/*! For license information please see main.e256294c.js.LICENSE.txt */
!function(){var e={9212:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)([(0,i.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,i.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");t.Z=o},7394:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBack");t.Z=o},8264:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");t.Z=o},1334:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-11-4 2.03 2.71L16 11l4 5H8l3-4zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z"}),"Collections");t.Z=o},3742:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M9 4v1.38c-.83-.33-1.72-.5-2.61-.5-1.79 0-3.58.68-4.95 2.05l3.33 3.33h1.11v1.11c.86.86 1.98 1.31 3.11 1.36V15H6v3c0 1.1.9 2 2 2h10c1.66 0 3-1.34 3-3V4H9zm-1.11 6.41V8.26H5.61L4.57 7.22a5.07 5.07 0 0 1 1.82-.34c1.34 0 2.59.52 3.54 1.46l1.41 1.41-.2.2c-.51.51-1.19.8-1.92.8-.47 0-.93-.12-1.33-.34zM19 17c0 .55-.45 1-1 1s-1-.45-1-1v-2h-6v-2.59c.57-.23 1.1-.57 1.56-1.03l.2-.2L15.59 14H17v-1.41l-6-5.97V6h8v11z"}),"HistoryEdu");t.Z=o},3970:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"m6 2 .01 6L10 12l-3.99 4.01L6 22h12v-6l-4-4 4-3.99V2H6zm10 14.5V20H8v-3.5l4-4 4 4z"}),"HourglassTop");t.Z=o},5878:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");t.Z=o},5172:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");t.Z=o},3229:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"}),"LocalPhone");t.Z=o},4941:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M14 6v15H3v-2h2V3h9v1h5v15h2v2h-4V6h-3zm-4 5v2h2v-2h-2z"}),"MeetingRoom");t.Z=o},9065:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M12 2C8.14 2 5 5.14 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7zm.88 13.75h-1.75V14h1.75v1.75zm0-2.87h-1.75c0-2.84 2.62-2.62 2.62-4.38 0-.96-.79-1.75-1.75-1.75s-1.75.79-1.75 1.75H8.5C8.5 6.57 10.07 5 12 5s3.5 1.57 3.5 3.5c0 2.19-2.62 2.41-2.62 4.38z"}),"NotListedLocation");t.Z=o},2237:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M12 12.25c1.24 0 2.25-1.01 2.25-2.25S13.24 7.75 12 7.75 9.75 8.76 9.75 10s1.01 2.25 2.25 2.25zm4.5 4c0-1.5-3-2.25-4.5-2.25s-4.5.75-4.5 2.25V17h9v-.75zM19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"}),"Portrait");t.Z=o},1542:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M15 21h-2v-2h2v2zm-2-7h-2v5h2v-5zm8-2h-2v4h2v-4zm-2-2h-2v2h2v-2zM7 12H5v2h2v-2zm-2-2H3v2h2v-2zm7-5h2V3h-2v2zm-7.5-.5v3h3v-3h-3zM9 9H3V3h6v6zm-4.5 7.5v3h3v-3h-3zM9 21H3v-6h6v6zm7.5-16.5v3h3v-3h-3zM21 9h-6V3h6v6zm-2 10v-3h-4v2h2v3h4v-2h-2zm-2-7h-4v2h4v-2zm-4-2H7v2h2v2h2v-2h2v-2zm1-1V7h-2V5h-2v4h4zM6.75 5.25h-1.5v1.5h1.5v-1.5zm0 12h-1.5v1.5h1.5v-1.5zm12-12h-1.5v1.5h1.5v-1.5z"}),"QrCode2");t.Z=o},7122:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}),"Settings");t.Z=o},5649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(7568)},7568:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return s},createChainedFunction:function(){return u},createSvgIcon:function(){return br},debounce:function(){return wr},deprecatedPropType:function(){return xr},isMuiElement:function(){return kr},ownerDocument:function(){return Er},ownerWindow:function(){return Sr},requirePropFactory:function(){return _r},setRef:function(){return Ir},unstable_ClassNameGenerator:function(){return Xr},unstable_useEnhancedEffect:function(){return Rr},unstable_useId:function(){return Mr},unsupportedProp:function(){return Or},useControlled:function(){return Pr},useEventCallback:function(){return Fr},useForkRef:function(){return Br},useIsFocusVisible:function(){return Kr}});var r=function(e){return e},a=function(){var e=r;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=r}}}();function i(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function o(e){if("string"!==typeof e)throw new Error(i(7));return e.charAt(0).toUpperCase()+e.slice(1)}var s=o;var u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),(function(){}))},l=n(7462),c=n(2791),d=n.t(c,2),h=n(3366),f=n(8182);function p(e,t){var n=(0,l.Z)({},t);return Object.keys(e).forEach((function(r){if(r.toString().match(/^(components|slots)$/))n[r]=(0,l.Z)({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){var a=e[r]||{},i=t[r];n[r]={},i&&Object.keys(i)?a&&Object.keys(a)?(n[r]=(0,l.Z)({},i),Object.keys(a).forEach((function(e){n[r][e]=p(a[e],i[e])}))):n[r]=i:n[r]=a}else void 0===n[r]&&(n[r]=e[r])})),n}function m(e){var t=e.theme,n=e.name,r=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?p(t.components[n].defaultProps,r):r}function v(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function g(e){if(!v(e))return e;var t={};return Object.keys(e).forEach((function(n){t[n]=g(e[n])})),t}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?(0,l.Z)({},e):e;return v(e)&&v(t)&&Object.keys(t).forEach((function(a){"__proto__"!==a&&(v(t[a])&&a in e&&v(e[a])?r[a]=y(e[a],t[a],n):n.clone?r[a]=v(t[a])?g(t[a]):t[a]:r[a]=t[a])})),r}var b=n(4942),w=["values","unit","step"];function x(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,r=e.unit,a=void 0===r?"px":r,i=e.step,o=void 0===i?5:i,s=(0,h.Z)(e,w),u=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return(0,l.Z)({},e,(0,b.Z)({},t.key,t.val))}),{})}(n),c=Object.keys(u);function d(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(a,")")}function f(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-o/100).concat(a,")")}function p(e,t){var r=c.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(a,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[c[r]]?n[c[r]]:t)-o/100).concat(a,")")}return(0,l.Z)({keys:c,values:u,up:d,down:f,between:p,only:function(e){return c.indexOf(e)+1<c.length?p(e,c[c.indexOf(e)+1]):d(e)},not:function(e){var t=c.indexOf(e);return 0===t?d(c[1]):t===c.length-1?f(c[t]):p(e,c[c.indexOf(e)+1]).replace("@media","@media not all and")},unit:a},s)}var k={borderRadius:4},C=n(885),E={xs:0,sm:600,md:900,lg:1200,xl:1536},S={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(E[e],"px)")}};function _(e,t,n){var r=e.theme||{};if(Array.isArray(t)){var a=r.breakpoints||S;return t.reduce((function(e,r,i){return e[a.up(a.keys[i])]=n(t[i]),e}),{})}if("object"===typeof t){var i=r.breakpoints||S;return Object.keys(t).reduce((function(e,r){if(-1!==Object.keys(i.values||E).indexOf(r)){e[i.up(r)]=n(t[r],r)}else{var a=r;e[a]=t[a]}return e}),{})}return n(t)}function A(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function I(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function T(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){var r="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=r)return r}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function R(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||a:T(e,n)||a,t&&(r=t(r,a,e)),r}var N=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,a=e.themeKey,i=e.transform,s=function(e){if(null==e[t])return null;var n=e[t],s=T(e.theme,a)||{};return _(e,n,(function(e){var n=R(s,i,e);return e===n&&"string"===typeof e&&(n=R(s,i,"".concat(t).concat("default"===e?"":o(e)),e)),!1===r?n:(0,b.Z)({},r,n)}))};return s.propTypes={},s.filterProps=[t],s};var D=function(e,t){return t?y(e,t,{clone:!1}):e};var M={m:"margin",p:"padding"},O={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},P={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},F=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!P[e])return[e];e=P[e]}var t=e.split(""),n=(0,C.Z)(t,2),r=n[0],a=n[1],i=M[r],o=O[a]||"";return Array.isArray(o)?o.map((function(e){return i+e})):[i+o]})),L=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],B=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],j=[].concat(L,B);function z(e,t,n,r){var a,i=null!=(a=T(e,t,!1))?a:n;return"number"===typeof i?function(e){return"string"===typeof e?e:i*e}:Array.isArray(i)?function(e){return"string"===typeof e?e:i[e]}:"function"===typeof i?i:function(){}}function U(e){return z(e,"spacing",8)}function V(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function W(e,t,n,r){if(-1===t.indexOf(n))return null;var a=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=V(t,n),e}),{})}}(F(n),r);return _(e,e[n],a)}function H(e,t){var n=U(e.theme);return Object.keys(e).map((function(r){return W(e,t,r,n)})).reduce(D,{})}function G(e){return H(e,L)}function K(e){return H(e,B)}function X(e){return H(e,j)}G.propTypes={},G.filterProps=L,K.propTypes={},K.filterProps=B,X.propTypes={},X.filterProps=j;function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=U({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=0===n.length?[1]:n;return a.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var q=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),a=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?D(t,r[n](e)):t}),{})};return a.propTypes={},a.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),a};function Z(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var Q=N({prop:"border",themeKey:"borders",transform:Z}),J=N({prop:"borderTop",themeKey:"borders",transform:Z}),$=N({prop:"borderRight",themeKey:"borders",transform:Z}),ee=N({prop:"borderBottom",themeKey:"borders",transform:Z}),te=N({prop:"borderLeft",themeKey:"borders",transform:Z}),ne=N({prop:"borderColor",themeKey:"palette"}),re=N({prop:"borderTopColor",themeKey:"palette"}),ae=N({prop:"borderRightColor",themeKey:"palette"}),ie=N({prop:"borderBottomColor",themeKey:"palette"}),oe=N({prop:"borderLeftColor",themeKey:"palette"}),se=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=z(e.theme,"shape.borderRadius",4);return _(e,e.borderRadius,(function(e){return{borderRadius:V(t,e)}}))}return null};se.propTypes={},se.filterProps=["borderRadius"];q(Q,J,$,ee,te,ne,re,ae,ie,oe,se);var ue=function(e){if(void 0!==e.gap&&null!==e.gap){var t=z(e.theme,"spacing",8);return _(e,e.gap,(function(e){return{gap:V(t,e)}}))}return null};ue.propTypes={},ue.filterProps=["gap"];var le=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=z(e.theme,"spacing",8);return _(e,e.columnGap,(function(e){return{columnGap:V(t,e)}}))}return null};le.propTypes={},le.filterProps=["columnGap"];var ce=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=z(e.theme,"spacing",8);return _(e,e.rowGap,(function(e){return{rowGap:V(t,e)}}))}return null};ce.propTypes={},ce.filterProps=["rowGap"];q(ue,le,ce,N({prop:"gridColumn"}),N({prop:"gridRow"}),N({prop:"gridAutoFlow"}),N({prop:"gridAutoColumns"}),N({prop:"gridAutoRows"}),N({prop:"gridTemplateColumns"}),N({prop:"gridTemplateRows"}),N({prop:"gridTemplateAreas"}),N({prop:"gridArea"}));function de(e,t){return"grey"===t?t:e}q(N({prop:"color",themeKey:"palette",transform:de}),N({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:de}),N({prop:"backgroundColor",themeKey:"palette",transform:de}));function he(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var fe=N({prop:"width",transform:he}),pe=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return _(e,e.maxWidth,(function(t){var n,r,a;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(a=r.values)?void 0:a[t])||E[t]||he(t)}}))}return null};pe.filterProps=["maxWidth"];var me=N({prop:"minWidth",transform:he}),ve=N({prop:"height",transform:he}),ge=N({prop:"maxHeight",transform:he}),ye=N({prop:"minHeight",transform:he}),be=(N({prop:"size",cssProperty:"width",transform:he}),N({prop:"size",cssProperty:"height",transform:he}),q(fe,pe,me,ve,ge,ye,N({prop:"boxSizing"})),{border:{themeKey:"borders",transform:Z},borderTop:{themeKey:"borders",transform:Z},borderRight:{themeKey:"borders",transform:Z},borderBottom:{themeKey:"borders",transform:Z},borderLeft:{themeKey:"borders",transform:Z},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:se},color:{themeKey:"palette",transform:de},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:de},backgroundColor:{themeKey:"palette",transform:de},p:{style:K},pt:{style:K},pr:{style:K},pb:{style:K},pl:{style:K},px:{style:K},py:{style:K},padding:{style:K},paddingTop:{style:K},paddingRight:{style:K},paddingBottom:{style:K},paddingLeft:{style:K},paddingX:{style:K},paddingY:{style:K},paddingInline:{style:K},paddingInlineStart:{style:K},paddingInlineEnd:{style:K},paddingBlock:{style:K},paddingBlockStart:{style:K},paddingBlockEnd:{style:K},m:{style:G},mt:{style:G},mr:{style:G},mb:{style:G},ml:{style:G},mx:{style:G},my:{style:G},margin:{style:G},marginTop:{style:G},marginRight:{style:G},marginBottom:{style:G},marginLeft:{style:G},marginX:{style:G},marginY:{style:G},marginInline:{style:G},marginInlineStart:{style:G},marginInlineEnd:{style:G},marginBlock:{style:G},marginBlockStart:{style:G},marginBlockEnd:{style:G},displayPrint:{cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:ue},rowGap:{style:ce},columnGap:{style:le},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:he},maxWidth:{style:pe},minWidth:{transform:he},height:{transform:he},maxHeight:{transform:he},minHeight:{transform:he},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});var we=function(){function e(e,t,n,r){var a,i=(a={},(0,b.Z)(a,e,t),(0,b.Z)(a,"theme",n),a),s=r[e];if(!s)return(0,b.Z)({},e,t);var u=s.cssProperty,l=void 0===u?e:u,c=s.themeKey,d=s.transform,h=s.style;if(null==t)return null;var f=T(n,c)||{};if(h)return h(i);return _(i,t,(function(t){var n=R(f,d,t);return t===n&&"string"===typeof t&&(n=R(f,d,"".concat(e).concat("default"===t?"":o(t)),t)),!1===l?n:(0,b.Z)({},l,n)}))}return function t(n){var r,a=n||{},i=a.sx,o=a.theme,s=void 0===o?{}:o;if(!i)return null;var u=null!=(r=s.unstable_sxConfig)?r:be;function l(n){var r=n;if("function"===typeof n)r=n(s);else if("object"!==typeof n)return n;if(!r)return null;var a=A(s.breakpoints),i=Object.keys(a),o=a;return Object.keys(r).forEach((function(n){var a,i,l=(a=r[n],i=s,"function"===typeof a?a(i):a);if(null!==l&&void 0!==l)if("object"===typeof l)if(u[n])o=D(o,e(n,l,s,u));else{var c=_({theme:s},l,(function(e){return(0,b.Z)({},n,e)}));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),a=new Set(r);return t.every((function(e){return a.size===Object.keys(e).length}))}(c,l)?o=D(o,c):o[n]=t({sx:l,theme:s})}else o=D(o,e(n,l,s,u))})),I(i,o)}return Array.isArray(i)?i.map(l):l(i)}}();we.filterProps=["sx"];var xe=we,ke=["breakpoints","palette","spacing","shape"];var Ce=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.palette,a=void 0===r?{}:r,i=e.spacing,o=e.shape,s=void 0===o?{}:o,u=(0,h.Z)(e,ke),c=x(n),d=Y(i),f=y({breakpoints:c,direction:"ltr",components:{},palette:(0,l.Z)({mode:"light"},a),spacing:d,shape:(0,l.Z)({},k,s)},u),p=arguments.length,m=new Array(p>1?p-1:0),v=1;v<p;v++)m[v-1]=arguments[v];return(f=m.reduce((function(e,t){return y(e,t)}),f)).unstable_sxConfig=(0,l.Z)({},be,null==u?void 0:u.unstable_sxConfig),f.unstable_sx=function(e){return xe({sx:e,theme:this})},f};var Ee=c.createContext(null);function Se(){return c.useContext(Ee)}function _e(e){return 0===Object.keys(e).length}var Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Se();return!t||_e(t)?e:t},Ie=Ce();var Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie;return Ae(e)};function Re(e,t){var n;return(0,l.Z)({toolbar:(n={minHeight:56},(0,b.Z)(n,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),(0,b.Z)(n,e.up("sm"),{minHeight:64}),n)},t)}function Ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function De(e){if(e.type)return e;if("#"===e.charAt(0))return De(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(i(9,e));var r,a=e.substring(t+1,e.length-1);if("color"===n){if(r=(a=a.split(" ")).shift(),4===a.length&&"/"===a[3].charAt(0)&&(a[3]=a[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(i(10,r))}else a=a.split(",");return{type:n,values:a=a.map((function(e){return parseFloat(e)})),colorSpace:r}}function Me(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function Oe(e){var t="hsl"===(e=De(e)).type||"hsla"===e.type?De(function(e){var t=(e=De(e)).values,n=t[0],r=t[1]/100,a=t[2]/100,i=r*Math.min(a,1-a),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return a-i*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),Me({type:s,values:u})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Pe(e,t){if(e=De(e),t=Ne(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return Me(e)}function Fe(e,t){if(e=De(e),t=Ne(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return Me(e)}var Le={black:"#000",white:"#fff"},Be={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},je={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},ze={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Ue={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Ve={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},We={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},He={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Ge=["mode","contrastThreshold","tonalOffset"],Ke={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Le.white,default:Le.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Xe={text:{primary:Le.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Le.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Ye(e,t,n,r){var a=r.light||r,i=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Fe(e.main,a):"dark"===t&&(e.dark=Pe(e.main,i)))}function qe(e){var t=e.mode,n=void 0===t?"light":t,r=e.contrastThreshold,a=void 0===r?3:r,o=e.tonalOffset,s=void 0===o?.2:o,u=(0,h.Z)(e,Ge),c=e.primary||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:Ve[200],light:Ve[50],dark:Ve[400]}:{main:Ve[700],light:Ve[400],dark:Ve[800]}}(n),d=e.secondary||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:je[200],light:je[50],dark:je[400]}:{main:je[500],light:je[300],dark:je[700]}}(n),f=e.error||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:ze[500],light:ze[300],dark:ze[700]}:{main:ze[700],light:ze[400],dark:ze[800]}}(n),p=e.info||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:We[400],light:We[300],dark:We[700]}:{main:We[700],light:We[500],dark:We[900]}}(n),m=e.success||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:He[400],light:He[300],dark:He[700]}:{main:He[800],light:He[500],dark:He[900]}}(n),v=e.warning||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:Ue[400],light:Ue[300],dark:Ue[700]}:{main:"#ed6c02",light:Ue[500],dark:Ue[900]}}(n);function g(e){var t=function(e,t){var n=Oe(e),r=Oe(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,Xe.text.primary)>=a?Xe.text.primary:Ke.text.primary;return t}var b=function(e){var t=e.color,n=e.name,r=e.mainShade,a=void 0===r?500:r,o=e.lightShade,u=void 0===o?300:o,c=e.darkShade,d=void 0===c?700:c;if(!(t=(0,l.Z)({},t)).main&&t[a]&&(t.main=t[a]),!t.hasOwnProperty("main"))throw new Error(i(11,n?" (".concat(n,")"):"",a));if("string"!==typeof t.main)throw new Error(i(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return Ye(t,"light",u,s),Ye(t,"dark",d,s),t.contrastText||(t.contrastText=g(t.main)),t},w={dark:Xe,light:Ke};return y((0,l.Z)({common:(0,l.Z)({},Le),mode:n,primary:b({color:c,name:"primary"}),secondary:b({color:d,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:b({color:f,name:"error"}),warning:b({color:v,name:"warning"}),info:b({color:p,name:"info"}),success:b({color:m,name:"success"}),grey:Be,contrastThreshold:a,getContrastText:g,augmentColor:b,tonalOffset:s},w[n]),u)}var Ze=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var Qe={textTransform:"uppercase"},Je='"Roboto", "Helvetica", "Arial", sans-serif';function $e(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,a=void 0===r?Je:r,i=n.fontSize,o=void 0===i?14:i,s=n.fontWeightLight,u=void 0===s?300:s,c=n.fontWeightRegular,d=void 0===c?400:c,f=n.fontWeightMedium,p=void 0===f?500:f,m=n.fontWeightBold,v=void 0===m?700:m,g=n.htmlFontSize,b=void 0===g?16:g,w=n.allVariants,x=n.pxToRem,k=(0,h.Z)(n,Ze);var C=o/14,E=x||function(e){return"".concat(e/b*C,"rem")},S=function(e,t,n,r,i){return(0,l.Z)({fontFamily:a,fontWeight:e,fontSize:E(t),lineHeight:n},a===Je?{letterSpacing:"".concat((o=r/t,Math.round(1e5*o)/1e5),"em")}:{},i,w);var o},_={h1:S(u,96,1.167,-1.5),h2:S(u,60,1.2,-.5),h3:S(d,48,1.167,0),h4:S(d,34,1.235,.25),h5:S(d,24,1.334,0),h6:S(p,20,1.6,.15),subtitle1:S(d,16,1.75,.15),subtitle2:S(p,14,1.57,.1),body1:S(d,16,1.5,.15),body2:S(d,14,1.43,.15),button:S(p,14,1.75,.4,Qe),caption:S(d,12,1.66,.4),overline:S(d,12,2.66,1,Qe)};return y((0,l.Z)({htmlFontSize:b,pxToRem:E,fontFamily:a,fontSize:o,fontWeightLight:u,fontWeightRegular:d,fontWeightMedium:p,fontWeightBold:v},_),k,{clone:!1})}function et(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var tt=["none",et(0,2,1,-1,0,1,1,0,0,1,3,0),et(0,3,1,-2,0,2,2,0,0,1,5,0),et(0,3,3,-2,0,3,4,0,0,1,8,0),et(0,2,4,-1,0,4,5,0,0,1,10,0),et(0,3,5,-1,0,5,8,0,0,1,14,0),et(0,3,5,-1,0,6,10,0,0,1,18,0),et(0,4,5,-2,0,7,10,1,0,2,16,1),et(0,5,5,-3,0,8,10,1,0,3,14,2),et(0,5,6,-3,0,9,12,1,0,3,16,2),et(0,6,6,-3,0,10,14,1,0,4,18,3),et(0,6,7,-4,0,11,15,1,0,4,20,3),et(0,7,8,-4,0,12,17,2,0,5,22,4),et(0,7,8,-4,0,13,19,2,0,5,24,4),et(0,7,9,-4,0,14,21,2,0,5,26,4),et(0,8,9,-5,0,15,22,2,0,6,28,5),et(0,8,10,-5,0,16,24,2,0,6,30,5),et(0,8,11,-5,0,17,26,2,0,6,32,5),et(0,9,11,-5,0,18,28,2,0,7,34,6),et(0,9,12,-6,0,19,29,2,0,7,36,6),et(0,10,13,-6,0,20,31,3,0,8,38,7),et(0,10,13,-6,0,21,33,3,0,8,40,7),et(0,10,14,-6,0,22,35,3,0,8,42,7),et(0,11,14,-7,0,23,36,3,0,9,44,8),et(0,11,15,-7,0,24,38,3,0,9,46,8)],nt=["duration","easing","delay"],rt={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},at={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function it(e){return"".concat(Math.round(e),"ms")}function ot(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function st(e){var t=(0,l.Z)({},rt,e.easing),n=(0,l.Z)({},at,e.duration);return(0,l.Z)({getAutoHeightDuration:ot,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.duration,i=void 0===a?n.standard:a,o=r.easing,s=void 0===o?t.easeInOut:o,u=r.delay,l=void 0===u?0:u;(0,h.Z)(r,nt);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof i?i:it(i)," ").concat(s," ").concat("string"===typeof l?l:it(l))})).join(",")}},e,{easing:t,duration:n})}var ut={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},lt=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function ct(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,r=e.palette,a=void 0===r?{}:r,o=e.transitions,s=void 0===o?{}:o,u=e.typography,c=void 0===u?{}:u,d=(0,h.Z)(e,lt);if(e.vars)throw new Error(i(18));var f=qe(a),p=Ce(e),m=y(p,{mixins:Re(p.breakpoints,n),palette:f,shadows:tt.slice(),typography:$e(f,c),transitions:st(s),zIndex:(0,l.Z)({},ut)});m=y(m,d);for(var v=arguments.length,g=new Array(v>1?v-1:0),b=1;b<v;b++)g[b-1]=arguments[b];return(m=g.reduce((function(e,t){return y(e,t)}),m)).unstable_sxConfig=(0,l.Z)({},be,null==d?void 0:d.unstable_sxConfig),m.unstable_sx=function(e){return xe({sx:e,theme:this})},m}var dt=ct();function ht(e){return function(e){var t=e.props,n=e.name,r=e.defaultTheme;return m({theme:Te(r),name:n,props:t})}({props:e.props,name:e.name,defaultTheme:dt})}var ft=n(2982);var pt=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},mt=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,vt=pt((function(e){return mt.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var gt=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),yt=Math.abs,bt=String.fromCharCode,wt=Object.assign;function xt(e){return e.trim()}function kt(e,t,n){return e.replace(t,n)}function Ct(e,t){return e.indexOf(t)}function Et(e,t){return 0|e.charCodeAt(t)}function St(e,t,n){return e.slice(t,n)}function _t(e){return e.length}function At(e){return e.length}function It(e,t){return t.push(e),e}var Tt=1,Rt=1,Nt=0,Dt=0,Mt=0,Ot="";function Pt(e,t,n,r,a,i,o){return{value:e,root:t,parent:n,type:r,props:a,children:i,line:Tt,column:Rt,length:o,return:""}}function Ft(e,t){return wt(Pt("",null,null,"",null,null,0),e,{length:-e.length},t)}function Lt(){return Mt=Dt>0?Et(Ot,--Dt):0,Rt--,10===Mt&&(Rt=1,Tt--),Mt}function Bt(){return Mt=Dt<Nt?Et(Ot,Dt++):0,Rt++,10===Mt&&(Rt=1,Tt++),Mt}function jt(){return Et(Ot,Dt)}function zt(){return Dt}function Ut(e,t){return St(Ot,e,t)}function Vt(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Wt(e){return Tt=Rt=1,Nt=_t(Ot=e),Dt=0,[]}function Ht(e){return Ot="",e}function Gt(e){return xt(Ut(Dt-1,Yt(91===e?e+2:40===e?e+1:e)))}function Kt(e){for(;(Mt=jt())&&Mt<33;)Bt();return Vt(e)>2||Vt(Mt)>3?"":" "}function Xt(e,t){for(;--t&&Bt()&&!(Mt<48||Mt>102||Mt>57&&Mt<65||Mt>70&&Mt<97););return Ut(e,zt()+(t<6&&32==jt()&&32==Bt()))}function Yt(e){for(;Bt();)switch(Mt){case e:return Dt;case 34:case 39:34!==e&&39!==e&&Yt(Mt);break;case 40:41===e&&Yt(e);break;case 92:Bt()}return Dt}function qt(e,t){for(;Bt()&&e+Mt!==57&&(e+Mt!==84||47!==jt()););return"/*"+Ut(t,Dt-1)+"*"+bt(47===e?e:Bt())}function Zt(e){for(;!Vt(jt());)Bt();return Ut(e,Dt)}var Qt="-ms-",Jt="-moz-",$t="-webkit-",en="comm",tn="rule",nn="decl",rn="@keyframes";function an(e,t){for(var n="",r=At(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function on(e,t,n,r){switch(e.type){case"@import":case nn:return e.return=e.return||e.value;case en:return"";case rn:return e.return=e.value+"{"+an(e.children,r)+"}";case tn:e.value=e.props.join(",")}return _t(n=an(e.children,r))?e.return=e.value+"{"+n+"}":""}function sn(e){return Ht(un("",null,null,null,[""],e=Wt(e),0,[0],e))}function un(e,t,n,r,a,i,o,s,u){for(var l=0,c=0,d=o,h=0,f=0,p=0,m=1,v=1,g=1,y=0,b="",w=a,x=i,k=r,C=b;v;)switch(p=y,y=Bt()){case 40:if(108!=p&&58==Et(C,d-1)){-1!=Ct(C+=kt(Gt(y),"&","&\f"),"&\f")&&(g=-1);break}case 34:case 39:case 91:C+=Gt(y);break;case 9:case 10:case 13:case 32:C+=Kt(p);break;case 92:C+=Xt(zt()-1,7);continue;case 47:switch(jt()){case 42:case 47:It(cn(qt(Bt(),zt()),t,n),u);break;default:C+="/"}break;case 123*m:s[l++]=_t(C)*g;case 125*m:case 59:case 0:switch(y){case 0:case 125:v=0;case 59+c:f>0&&_t(C)-d&&It(f>32?dn(C+";",r,n,d-1):dn(kt(C," ","")+";",r,n,d-2),u);break;case 59:C+=";";default:if(It(k=ln(C,t,n,l,c,a,s,b,w=[],x=[],d),i),123===y)if(0===c)un(C,t,k,k,w,i,d,s,x);else switch(99===h&&110===Et(C,3)?100:h){case 100:case 109:case 115:un(e,k,k,r&&It(ln(e,k,k,0,0,a,s,b,a,w=[],d),x),a,x,d,s,r?w:x);break;default:un(C,k,k,k,[""],x,0,s,x)}}l=c=f=0,m=g=1,b=C="",d=o;break;case 58:d=1+_t(C),f=p;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==Lt())continue;switch(C+=bt(y),y*m){case 38:g=c>0?1:(C+="\f",-1);break;case 44:s[l++]=(_t(C)-1)*g,g=1;break;case 64:45===jt()&&(C+=Gt(Bt())),h=jt(),c=d=_t(b=C+=Zt(zt())),y++;break;case 45:45===p&&2==_t(C)&&(m=0)}}return i}function ln(e,t,n,r,a,i,o,s,u,l,c){for(var d=a-1,h=0===a?i:[""],f=At(h),p=0,m=0,v=0;p<r;++p)for(var g=0,y=St(e,d+1,d=yt(m=o[p])),b=e;g<f;++g)(b=xt(m>0?h[g]+" "+y:kt(y,/&\f/g,h[g])))&&(u[v++]=b);return Pt(e,t,n,0===a?tn:s,u,l,c)}function cn(e,t,n){return Pt(e,t,n,en,bt(Mt),St(e,2,-2),0)}function dn(e,t,n,r){return Pt(e,t,n,nn,St(e,0,r),St(e,r+1,-1),r)}var hn=function(e,t,n){for(var r=0,a=0;r=a,a=jt(),38===r&&12===a&&(t[n]=1),!Vt(a);)Bt();return Ut(e,Dt)},fn=function(e,t){return Ht(function(e,t){var n=-1,r=44;do{switch(Vt(r)){case 0:38===r&&12===jt()&&(t[n]=1),e[n]+=hn(Dt-1,t,n);break;case 2:e[n]+=Gt(r);break;case 4:if(44===r){e[++n]=58===jt()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=bt(r)}}while(r=Bt());return e}(Wt(e),t))},pn=new WeakMap,mn=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||pn.get(n))&&!r){pn.set(e,!0);for(var a=[],i=fn(t,a),o=n.props,s=0,u=0;s<i.length;s++)for(var l=0;l<o.length;l++,u++)e.props[u]=a[s]?i[s].replace(/&\f/g,o[l]):o[l]+" "+i[s]}}},vn=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function gn(e,t){switch(function(e,t){return 45^Et(e,0)?(((t<<2^Et(e,0))<<2^Et(e,1))<<2^Et(e,2))<<2^Et(e,3):0}(e,t)){case 5103:return $t+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return $t+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return $t+e+Jt+e+Qt+e+e;case 6828:case 4268:return $t+e+Qt+e+e;case 6165:return $t+e+Qt+"flex-"+e+e;case 5187:return $t+e+kt(e,/(\w+).+(:[^]+)/,$t+"box-$1$2"+Qt+"flex-$1$2")+e;case 5443:return $t+e+Qt+"flex-item-"+kt(e,/flex-|-self/,"")+e;case 4675:return $t+e+Qt+"flex-line-pack"+kt(e,/align-content|flex-|-self/,"")+e;case 5548:return $t+e+Qt+kt(e,"shrink","negative")+e;case 5292:return $t+e+Qt+kt(e,"basis","preferred-size")+e;case 6060:return $t+"box-"+kt(e,"-grow","")+$t+e+Qt+kt(e,"grow","positive")+e;case 4554:return $t+kt(e,/([^-])(transform)/g,"$1"+$t+"$2")+e;case 6187:return kt(kt(kt(e,/(zoom-|grab)/,$t+"$1"),/(image-set)/,$t+"$1"),e,"")+e;case 5495:case 3959:return kt(e,/(image-set\([^]*)/,$t+"$1$`$1");case 4968:return kt(kt(e,/(.+:)(flex-)?(.*)/,$t+"box-pack:$3"+Qt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+$t+e+e;case 4095:case 3583:case 4068:case 2532:return kt(e,/(.+)-inline(.+)/,$t+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(_t(e)-1-t>6)switch(Et(e,t+1)){case 109:if(45!==Et(e,t+4))break;case 102:return kt(e,/(.+:)(.+)-([^]+)/,"$1"+$t+"$2-$3$1"+Jt+(108==Et(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Ct(e,"stretch")?gn(kt(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Et(e,t+1))break;case 6444:switch(Et(e,_t(e)-3-(~Ct(e,"!important")&&10))){case 107:return kt(e,":",":"+$t)+e;case 101:return kt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+$t+(45===Et(e,14)?"inline-":"")+"box$3$1"+$t+"$2$3$1"+Qt+"$2box$3")+e}break;case 5936:switch(Et(e,t+11)){case 114:return $t+e+Qt+kt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return $t+e+Qt+kt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return $t+e+Qt+kt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return $t+e+Qt+e+e}return e}var yn=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case nn:e.return=gn(e.value,e.length);break;case rn:return an([Ft(e,{value:kt(e.value,"@","@"+$t)})],r);case tn:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return an([Ft(e,{props:[kt(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return an([Ft(e,{props:[kt(t,/:(plac\w+)/,":"+$t+"input-$1")]}),Ft(e,{props:[kt(t,/:(plac\w+)/,":-moz-$1")]}),Ft(e,{props:[kt(t,/:(plac\w+)/,Qt+"input-$1")]})],r)}return""}))}}],bn=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||yn;var a,i,o={},s=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;s.push(e)}));var u,l,c=[on,(l=function(e){u.insert(e)},function(e){e.root||(e=e.return)&&l(e)})],d=function(e){var t=At(e);return function(n,r,a,i){for(var o="",s=0;s<t;s++)o+=e[s](n,r,a,i)||"";return o}}([mn,vn].concat(r,c));i=function(e,t,n,r){u=n,an(sn(e?e+"{"+t.styles+"}":t.styles),d),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new gt({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:i};return h.sheet.hydrate(s),h};var wn=function(e){for(var t,n=0,r=0,a=e.length;a>=4;++r,a-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(a){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},xn={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},kn=/[A-Z]|^ms/g,Cn=/_EMO_([^_]+?)_([^]*?)_EMO_/g,En=function(e){return 45===e.charCodeAt(1)},Sn=function(e){return null!=e&&"boolean"!==typeof e},_n=pt((function(e){return En(e)?e:e.replace(kn,"-$&").toLowerCase()})),An=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Cn,(function(e,t,n){return Tn={name:t,styles:n,next:Tn},t}))}return 1===xn[e]||En(e)||"number"!==typeof t||0===t?t:t+"px"};function In(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Tn={name:n.name,styles:n.styles,next:Tn},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Tn={name:r.name,styles:r.styles,next:Tn},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=In(e,t,n[a])+";";else for(var i in n){var o=n[i];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=i+"{"+t[o]+"}":Sn(o)&&(r+=_n(i)+":"+An(i,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=In(e,t,o);switch(i){case"animation":case"animationName":r+=_n(i)+":"+s+";";break;default:r+=i+"{"+s+"}"}}else for(var u=0;u<o.length;u++)Sn(o[u])&&(r+=_n(i)+":"+An(i,o[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=Tn,i=n(e);return Tn=a,In(e,t,i)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var Tn,Rn=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Nn=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,a="";Tn=void 0;var i=e[0];null==i||void 0===i.raw?(r=!1,a+=In(n,t,i)):a+=i[0];for(var o=1;o<e.length;o++)a+=In(n,t,e[o]),r&&(a+=i[o]);Rn.lastIndex=0;for(var s,u="";null!==(s=Rn.exec(a));)u+="-"+s[1];return{name:wn(a)+u,styles:a,next:Tn}},Dn=!!d.useInsertionEffect&&d.useInsertionEffect,Mn=Dn||function(e){return e()},On=(Dn||c.useLayoutEffect,(0,c.createContext)("undefined"!==typeof HTMLElement?bn({key:"css"}):null));On.Provider;var Pn=function(e){return(0,c.forwardRef)((function(t,n){var r=(0,c.useContext)(On);return e(t,r,n)}))},Fn=(0,c.createContext)({});function Ln(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var Bn=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},jn=vt,zn=function(e){return"theme"!==e},Un=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?jn:zn},Vn=function(e,t,n){var r;if(t){var a=t.shouldForwardProp;r=e.__emotion_forwardProp&&a?function(t){return e.__emotion_forwardProp(t)&&a(t)}:a}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},Wn=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;Bn(t,n,r);Mn((function(){return function(e,t,n){Bn(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a=t;do{e.insert(t===a?"."+r:"",a,e.sheet,!0),a=a.next}while(void 0!==a)}}(t,n,r)}));return null},Hn=function e(t,n){var r,a,i=t.__emotion_real===t,o=i&&t.__emotion_base||t;void 0!==n&&(r=n.label,a=n.target);var s=Vn(t,n,i),u=s||Un(o),d=!u("as");return function(){var h=arguments,f=i&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&f.push("label:"+r+";"),null==h[0]||void 0===h[0].raw)f.push.apply(f,h);else{0,f.push(h[0][0]);for(var p=h.length,m=1;m<p;m++)f.push(h[m],h[0][m])}var v=Pn((function(e,t,n){var r=d&&e.as||o,i="",l=[],h=e;if(null==e.theme){for(var p in h={},e)h[p]=e[p];h.theme=(0,c.useContext)(Fn)}"string"===typeof e.className?i=Ln(t.registered,l,e.className):null!=e.className&&(i=e.className+" ");var m=Nn(f.concat(l),t.registered,h);i+=t.key+"-"+m.name,void 0!==a&&(i+=" "+a);var v=d&&void 0===s?Un(r):u,g={};for(var y in e)d&&"as"===y||v(y)&&(g[y]=e[y]);return g.className=i,g.ref=n,(0,c.createElement)(c.Fragment,null,(0,c.createElement)(Wn,{cache:t,serialized:m,isStringTag:"string"===typeof r}),(0,c.createElement)(r,g))}));return v.displayName=void 0!==r?r:"Styled("+("string"===typeof o?o:o.displayName||o.name||"Component")+")",v.defaultProps=t.defaultProps,v.__emotion_real=v,v.__emotion_base=o,v.__emotion_styles=f,v.__emotion_forwardProp=s,Object.defineProperty(v,"toString",{value:function(){return"."+a}}),v.withComponent=function(t,r){return e(t,(0,l.Z)({},n,r,{shouldForwardProp:Vn(v,r,!0)})).apply(void 0,f)},v}},Gn=Hn.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Gn[e]=Gn(e)}));var Kn=Gn;function Xn(e,t){return Kn(e,t)}var Yn=function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},qn=["variant"];function Zn(e){return 0===e.length}function Qn(e){var t=e.variant,n=(0,h.Z)(e,qn),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?Zn(r)?e[t]:o(e[t]):"".concat(Zn(r)?t:o(t)).concat(o(e[t].toString()))})),r}var Jn=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],$n=["theme"],er=["theme"];function tr(e){return 0===Object.keys(e).length}function nr(e){return"string"===typeof e&&e.charCodeAt(0)>96}var rr=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},ar=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=Qn(e.props);r[t]=e.style})),r},ir=function(e,t,n,r){var a,i,o=e.ownerState,s=void 0===o?{}:o,u=[],l=null==n||null==(a=n.components)||null==(i=a[r])?void 0:i.variants;return l&&l.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&u.push(t[Qn(n.props)])})),u};function or(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var sr=Ce();var ur=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?sr:t,r=e.rootShouldForwardProp,a=void 0===r?or:r,i=e.slotShouldForwardProp,o=void 0===i?or:i,s=function(e){var t=tr(e.theme)?n:e.theme;return xe((0,l.Z)({},e,{theme:t}))};return s.__mui_systemSx=!0,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Yn(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var r,i=t.name,u=t.slot,c=t.skipVariantsResolver,d=t.skipSx,f=t.overridesResolver,p=(0,h.Z)(t,Jn),m=void 0!==c?c:u&&"Root"!==u||!1,v=d||!1;var g=or;"Root"===u?g=a:u?g=o:nr(e)&&(g=void 0);var y=Xn(e,(0,l.Z)({shouldForwardProp:g,label:r},p)),b=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var o=r?r.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,a=(0,h.Z)(t,$n);return e((0,l.Z)({theme:tr(r)?n:r},a))}:e})):[],u=e;i&&f&&o.push((function(e){var t=tr(e.theme)?n:e.theme,r=rr(i,t);if(r){var a={};return Object.entries(r).forEach((function(n){var r=(0,C.Z)(n,2),i=r[0],o=r[1];a[i]="function"===typeof o?o((0,l.Z)({},e,{theme:t})):o})),f(e,a)}return null})),i&&!m&&o.push((function(e){var t=tr(e.theme)?n:e.theme;return ir(e,ar(i,t),t,i)})),v||o.push(s);var c=o.length-r.length;if(Array.isArray(e)&&c>0){var d=new Array(c).fill("");(u=[].concat((0,ft.Z)(e),(0,ft.Z)(d))).raw=[].concat((0,ft.Z)(e.raw),(0,ft.Z)(d))}else"function"===typeof e&&e.__emotion_real!==e&&(u=function(t){var r=t.theme,a=(0,h.Z)(t,er);return e((0,l.Z)({theme:tr(r)?n:r},a))});var p=y.apply(void 0,[u].concat((0,ft.Z)(o)));return p};return y.withConfig&&(b.withConfig=y.withConfig),b}}({defaultTheme:dt,rootShouldForwardProp:function(e){return or(e)&&"classes"!==e}}),lr=ur,cr={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function dr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r=cr[t];return r?"".concat(n,"-").concat(r):"".concat(a.generate(e),"-").concat(t)}function hr(e){return dr("MuiSvgIcon",e)}!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r={};t.forEach((function(t){r[t]=dr(e,t,n)}))}("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var fr=n(184),pr=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],mr=function(e){var t=e.color,n=e.fontSize,r=e.classes;return function(e,t,n){var r={};return Object.keys(e).forEach((function(a){r[a]=e[a].reduce((function(e,r){return r&&(e.push(t(r)),n&&n[r]&&e.push(n[r])),e}),[]).join(" ")})),r}({root:["root","inherit"!==t&&"color".concat(s(t)),"fontSize".concat(s(n))]},hr,r)},vr=lr("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat(s(n.color))],t["fontSize".concat(s(n.fontSize))]]}})((function(e){var t,n,r,a,i,o,s,u,l,c,d,h,f,p,m,v,g,y=e.theme,b=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=y.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=y.transitions)||null==(a=r.duration)?void 0:a.shorter}),fontSize:{inherit:"inherit",small:(null==(i=y.typography)||null==(o=i.pxToRem)?void 0:o.call(i,20))||"1.25rem",medium:(null==(s=y.typography)||null==(u=s.pxToRem)?void 0:u.call(s,24))||"1.5rem",large:(null==(l=y.typography)||null==(c=l.pxToRem)?void 0:c.call(l,35))||"2.1875rem"}[b.fontSize],color:null!=(d=null==(h=(y.vars||y).palette)||null==(f=h[b.color])?void 0:f.main)?d:{action:null==(p=(y.vars||y).palette)||null==(m=p.action)?void 0:m.active,disabled:null==(v=(y.vars||y).palette)||null==(g=v.action)?void 0:g.disabled,inherit:void 0}[b.color]}})),gr=c.forwardRef((function(e,t){var n=ht({props:e,name:"MuiSvgIcon"}),r=n.children,a=n.className,i=n.color,o=void 0===i?"inherit":i,s=n.component,u=void 0===s?"svg":s,c=n.fontSize,d=void 0===c?"medium":c,p=n.htmlColor,m=n.inheritViewBox,v=void 0!==m&&m,g=n.titleAccess,y=n.viewBox,b=void 0===y?"0 0 24 24":y,w=(0,h.Z)(n,pr),x=(0,l.Z)({},n,{color:o,component:u,fontSize:d,instanceFontSize:e.fontSize,inheritViewBox:v,viewBox:b}),k={};v||(k.viewBox=b);var C=mr(x);return(0,fr.jsxs)(vr,(0,l.Z)({as:u,className:(0,f.Z)(C.root,a),focusable:"false",color:p,"aria-hidden":!g||void 0,role:g?"img":void 0,ref:t},k,w,{ownerState:x,children:[r,g?(0,fr.jsx)("title",{children:g}):null]}))}));gr.muiName="SvgIcon";var yr=gr;function br(e,t){function n(n,r){return(0,fr.jsx)(yr,(0,l.Z)({"data-testid":"".concat(t,"Icon"),ref:r},n,{children:e}))}return n.muiName=yr.muiName,c.memo(c.forwardRef(n))}var wr=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var s=function(){e.apply(r,i)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r};var xr=function(e,t){return function(){return null}};var kr=function(e,t){return c.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)};function Cr(e){return e&&e.ownerDocument||document}var Er=Cr;var Sr=function(e){return Cr(e).defaultView||window};var _r=function(e,t){return function(){return null}};function Ar(e,t){"function"===typeof e?e(t):e&&(e.current=t)}var Ir=Ar,Tr="undefined"!==typeof window?c.useLayoutEffect:c.useEffect,Rr=Tr,Nr=0;var Dr=d.useId;var Mr=function(e){if(void 0!==Dr){var t=Dr();return null!=e?e:t}return function(e){var t=c.useState(e),n=(0,C.Z)(t,2),r=n[0],a=n[1],i=e||r;return c.useEffect((function(){null==r&&a("mui-".concat(Nr+=1))}),[r]),i}(e)};var Or=function(e,t,n,r,a){return null};var Pr=function(e){var t=e.controlled,n=e.default,r=(e.name,e.state,c.useRef(void 0!==t).current),a=c.useState(n),i=(0,C.Z)(a,2),o=i[0],s=i[1];return[r?t:o,c.useCallback((function(e){r||s(e)}),[])]};var Fr=function(e){var t=c.useRef(e);return Tr((function(){t.current=e})),c.useCallback((function(){return t.current.apply(void 0,arguments)}),[])};var Lr,Br=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo((function(){return t.every((function(e){return null==e}))?null:function(e){t.forEach((function(t){Ar(t,e)}))}}),t)},jr=!0,zr=!1,Ur={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Vr(e){e.metaKey||e.altKey||e.ctrlKey||(jr=!0)}function Wr(){jr=!1}function Hr(){"hidden"===this.visibilityState&&zr&&(jr=!0)}function Gr(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return jr||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!Ur[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var Kr=function(){var e=c.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",Vr,!0),t.addEventListener("mousedown",Wr,!0),t.addEventListener("pointerdown",Wr,!0),t.addEventListener("touchstart",Wr,!0),t.addEventListener("visibilitychange",Hr,!0))}),[]),t=c.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!Gr(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(zr=!0,window.clearTimeout(Lr),Lr=window.setTimeout((function(){zr=!1}),100),t.current=!1,!0)},ref:e}},Xr={configure:function(e){a.configure(e)}}},8182:function(e,t,n){"use strict";function r(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}t.Z=function(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}},2110:function(e,t,n){"use strict";var r=n(8309),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var a=f(n);a&&a!==p&&e(t,a,r)}var o=c(n);d&&(o=o.concat(d(n)));for(var s=u(t),m=u(n),v=0;v<o.length;++v){var g=o[v];if(!i[g]&&(!r||!r[g])&&(!m||!m[g])&&(!s||!s[g])){var y=h(n,g);try{l(t,g,y)}catch(b){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case d:case i:case s:case o:case f:return e;default:switch(e=e&&e.$$typeof){case l:case h:case v:case m:case u:return e;default:return t}}case a:return t}}}function k(e){return x(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=i,t.Lazy=v,t.Memo=m,t.Portal=a,t.Profiler=s,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return k(e)||x(e)===c},t.isConcurrentMode=k,t.isContextConsumer=function(e){return x(e)===l},t.isContextProvider=function(e){return x(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===h},t.isFragment=function(e){return x(e)===i},t.isLazy=function(e){return x(e)===v},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===a},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===o},t.isSuspense=function(e){return x(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===d||e===s||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===u||e.$$typeof===l||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===g)},t.typeOf=x},8309:function(e,t,n){"use strict";e.exports=n(746)},3484:function(e,t,n){var r=n(7424).default,a=n(6115).default,i=n(7061).default,o=n(1588).default,s=n(3808).default,u=n(4704).default,l=n(6690).default,c=n(9728).default,d=n(1655).default,h=n(6389).default;!function(e){"use strict";function t(e){return null===e||void 0===e}var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function p(e,t){function n(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function m(e,t){var n=Object.setPrototypeOf;n?n(e,t):e.__proto__=t}function v(e,t){void 0===t&&(t=e.constructor);var n=Error.captureStackTrace;n&&n(e,t)}var g=function(e){d(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return l(this,n),(e=t.call(this,r)).message=r,e}return c(n,[{key:"getKind",value:function(){return this.constructor.kind}}]),n}(function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),m(r,n.prototype),v(r),r}return p(t,e),t}(Error));g.kind="Exception";var y=function(e){d(n,e);var t=h(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n)}(g);y.kind="ArgumentException";var b=function(e){d(n,e);var t=h(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n)}(g);b.kind="IllegalArgumentException";var w=function(){function e(t){if(l(this,e),this.binarizer=t,null===t)throw new b("Binarizer must be non-null.")}return c(e,[{key:"getWidth",value:function(){return this.binarizer.getWidth()}},{key:"getHeight",value:function(){return this.binarizer.getHeight()}},{key:"getBlackRow",value:function(e,t){return this.binarizer.getBlackRow(e,t)}},{key:"getBlackMatrix",value:function(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}},{key:"isCropSupported",value:function(){return this.binarizer.getLuminanceSource().isCropSupported()}},{key:"crop",value:function(t,n,r,a){var i=this.binarizer.getLuminanceSource().crop(t,n,r,a);return new e(this.binarizer.createBinarizer(i))}},{key:"isRotateSupported",value:function(){return this.binarizer.getLuminanceSource().isRotateSupported()}},{key:"rotateCounterClockwise",value:function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new e(this.binarizer.createBinarizer(t))}},{key:"rotateCounterClockwise45",value:function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new e(this.binarizer.createBinarizer(t))}},{key:"toString",value:function(){try{return this.getBlackMatrix().toString()}catch(e){return""}}}]),e}(),x=function(e){d(n,e);var t=h(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,null,[{key:"getChecksumInstance",value:function(){return new n}}]),n}(g);x.kind="ChecksumException";var k=function(){function e(t){l(this,e),this.source=t}return c(e,[{key:"getLuminanceSource",value:function(){return this.source}},{key:"getWidth",value:function(){return this.source.getWidth()}},{key:"getHeight",value:function(){return this.source.getHeight()}}]),e}(),C=function(){function e(){l(this,e)}return c(e,null,[{key:"arraycopy",value:function(e,t,n,r,a){for(;a--;)n[r++]=e[t++]}},{key:"currentTimeMillis",value:function(){return Date.now()}}]),e}(),E=function(e){d(n,e);var t=h(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n)}(g);E.kind="IndexOutOfBoundsException";var S=function(e){d(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return l(this,n),(e=t.call(this,a)).index=r,e.message=a,e}return c(n)}(E);S.kind="ArrayIndexOutOfBoundsException";var _=function(){function e(){l(this,e)}return c(e,null,[{key:"fill",value:function(e,t){for(var n=0,r=e.length;n<r;n++)e[n]=t}},{key:"fillWithin",value:function(t,n,r,a){e.rangeCheck(t.length,n,r);for(var i=n;i<r;i++)t[i]=a}},{key:"rangeCheck",value:function(e,t,n){if(t>n)throw new b("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new S(t);if(n>e)throw new S(n)}},{key:"asList",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}},{key:"create",value:function(e,t,n){return Array.from({length:e}).map((function(e){return Array.from({length:t}).fill(n)}))}},{key:"createInt32Array",value:function(e,t,n){return Array.from({length:e}).map((function(e){return Int32Array.from({length:t}).fill(n)}))}},{key:"equals",value:function(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}},{key:"hashCode",value:function(e){if(null===e)return 0;var t,n=1,r=u(e);try{for(r.s();!(t=r.n()).done;)n=31*n+t.value}catch(a){r.e(a)}finally{r.f()}return n}},{key:"fillUint8Array",value:function(e,t){for(var n=0;n!==e.length;n++)e[n]=t}},{key:"copyOf",value:function(e,t){return e.slice(0,t)}},{key:"copyOfUint8Array",value:function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}},{key:"copyOfRange",value:function(e,t,n){var r=n-t,a=new Int32Array(r);return C.arraycopy(e,t,a,0,r),a}},{key:"binarySearch",value:function(t,n,r){void 0===r&&(r=e.numberComparator);for(var a=0,i=t.length-1;a<=i;){var o=i+a>>1,s=r(n,t[o]);if(s>0)a=o+1;else{if(!(s<0))return o;i=o-1}}return-a-1}},{key:"numberComparator",value:function(e,t){return e-t}}]),e}(),A=function(){function e(){l(this,e)}return c(e,null,[{key:"numberOfTrailingZeros",value:function(e){var t;if(0===e)return 32;var n=31;return 0!==(t=e<<16)&&(n-=16,e=t),0!==(t=e<<8)&&(n-=8,e=t),0!==(t=e<<4)&&(n-=4,e=t),0!==(t=e<<2)&&(n-=2,e=t),n-(e<<1>>>31)}},{key:"numberOfLeadingZeros",value:function(e){if(0===e)return 32;var t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31}},{key:"toHexString",value:function(e){return e.toString(16)}},{key:"toBinaryString",value:function(e){return String(parseInt(String(e),2))}},{key:"bitCount",value:function(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)}},{key:"truncDivision",value:function(e,t){return Math.trunc(e/t)}},{key:"parseInt",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}))}]),e}();A.MIN_VALUE_32_BITS=-2147483648,A.MAX_VALUE=Number.MAX_SAFE_INTEGER;var I,T=function(){function e(t,n){l(this,e),void 0===t?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,this.bits=void 0===n||null===n?e.makeArray(t):n)}return c(e,[{key:"getSize",value:function(){return this.size}},{key:"getSizeInBytes",value:function(){return Math.floor((this.size+7)/8)}},{key:"ensureCapacity",value:function(t){if(t>32*this.bits.length){var n=e.makeArray(t);C.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}}},{key:"get",value:function(e){return 0!==(this.bits[Math.floor(e/32)]&1<<(31&e))}},{key:"set",value:function(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}},{key:"flip",value:function(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}},{key:"getNextSet",value:function(e){var t=this.size;if(e>=t)return t;var n=this.bits,r=Math.floor(e/32),a=n[r];a&=~((1<<(31&e))-1);for(var i=n.length;0===a;){if(++r===i)return t;a=n[r]}var o=32*r+A.numberOfTrailingZeros(a);return o>t?t:o}},{key:"getNextUnset",value:function(e){var t=this.size;if(e>=t)return t;var n=this.bits,r=Math.floor(e/32),a=~n[r];a&=~((1<<(31&e))-1);for(var i=n.length;0===a;){if(++r===i)return t;a=~n[r]}var o=32*r+A.numberOfTrailingZeros(a);return o>t?t:o}},{key:"setBulk",value:function(e,t){this.bits[Math.floor(e/32)]=t}},{key:"setRange",value:function(e,t){if(t<e||e<0||t>this.size)throw new b;if(t!==e){t--;for(var n=Math.floor(e/32),r=Math.floor(t/32),a=this.bits,i=n;i<=r;i++){var o=(2<<(i<r?31:31&t))-(1<<(i>n?0:31&e));a[i]|=o}}}},{key:"clear",value:function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0}},{key:"isRange",value:function(e,t,n){if(t<e||e<0||t>this.size)throw new b;if(t===e)return!0;t--;for(var r=Math.floor(e/32),a=Math.floor(t/32),i=this.bits,o=r;o<=a;o++){var s=(2<<(o<a?31:31&t))-(1<<(o>r?0:31&e))&4294967295;if((i[o]&s)!==(n?s:0))return!1}return!0}},{key:"appendBit",value:function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}},{key:"appendBits",value:function(e,t){if(t<0||t>32)throw new b("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit(1===(e>>n-1&1))}},{key:"appendBitArray",value:function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))}},{key:"xor",value:function(e){if(this.size!==e.size)throw new b("Sizes don't match");for(var t=this.bits,n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}},{key:"toBytes",value:function(e,t,n,r){for(var a=0;a<r;a++){for(var i=0,o=0;o<8;o++)this.get(e)&&(i|=1<<7-o),e++;t[n+a]=i}}},{key:"getBitArray",value:function(){return this.bits}},{key:"reverse",value:function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits,a=0;a<n;a++){var i=r[a];i=(i=(i=(i=(i=i>>1&1431655765|(1431655765&i)<<1)>>2&858993459|(858993459&i)<<2)>>4&252645135|(252645135&i)<<4)>>8&16711935|(16711935&i)<<8)>>16&65535|(65535&i)<<16,e[t-a]=i}if(this.size!==32*n){for(var o=32*n-this.size,s=e[0]>>>o,u=1;u<n;u++){var l=e[u];s|=l<<32-o,e[u-1]=s,s=l>>>o}e[n-1]=s}this.bits=e}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.size===n.size&&_.equals(this.bits,n.bits)}},{key:"hashCode",value:function(){return 31*this.size+_.hashCode(this.bits)}},{key:"toString",value:function(){for(var e="",t=0,n=this.size;t<n;t++)0===(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e}},{key:"clone",value:function(){return new e(this.size,this.bits.slice())}}],[{key:"makeArray",value:function(e){return new Int32Array(Math.floor((e+31)/32))}}]),e}();!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ASSUME_GS1=7]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(I||(I={}));var R,N=I,D=function(e){d(n,e);var t=h(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,null,[{key:"getFormatInstance",value:function(){return new n}}]),n}(g);D.kind="FormatException",function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(R||(R={}));var M=function(){function e(t,n,r){l(this,e),this.valueIdentifier=t,this.name=r,this.values="number"===typeof n?Int32Array.from([n]):n;for(var a=arguments.length,i=new Array(a>3?a-3:0),o=3;o<a;o++)i[o-3]=arguments[o];this.otherEncodingNames=i,e.VALUE_IDENTIFIER_TO_ECI.set(t,this),e.NAME_TO_ECI.set(r,this);for(var s=this.values,u=0,c=s.length;u!==c;u++){var d=s[u];e.VALUES_TO_ECI.set(d,this)}for(var h=0,f=i;h<f.length;h++){var p=f[h];e.NAME_TO_ECI.set(p,this)}}return c(e,[{key:"getValueIdentifier",value:function(){return this.valueIdentifier}},{key:"getName",value:function(){return this.name}},{key:"getValue",value:function(){return this.values[0]}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.getName()===n.getName()}}],[{key:"getCharacterSetECIByValue",value:function(t){if(t<0||t>=900)throw new D("incorect value");var n=e.VALUES_TO_ECI.get(t);if(void 0===n)throw new D("incorect value");return n}},{key:"getCharacterSetECIByName",value:function(t){var n=e.NAME_TO_ECI.get(t);if(void 0===n)throw new D("incorect value");return n}}]),e}();M.VALUE_IDENTIFIER_TO_ECI=new Map,M.VALUES_TO_ECI=new Map,M.NAME_TO_ECI=new Map,M.Cp437=new M(R.Cp437,Int32Array.from([0,2]),"Cp437"),M.ISO8859_1=new M(R.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),M.ISO8859_2=new M(R.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),M.ISO8859_3=new M(R.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),M.ISO8859_4=new M(R.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),M.ISO8859_5=new M(R.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),M.ISO8859_6=new M(R.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),M.ISO8859_7=new M(R.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),M.ISO8859_8=new M(R.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),M.ISO8859_9=new M(R.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),M.ISO8859_10=new M(R.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),M.ISO8859_11=new M(R.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),M.ISO8859_13=new M(R.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),M.ISO8859_14=new M(R.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),M.ISO8859_15=new M(R.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),M.ISO8859_16=new M(R.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),M.SJIS=new M(R.SJIS,20,"SJIS","Shift_JIS"),M.Cp1250=new M(R.Cp1250,21,"Cp1250","windows-1250"),M.Cp1251=new M(R.Cp1251,22,"Cp1251","windows-1251"),M.Cp1252=new M(R.Cp1252,23,"Cp1252","windows-1252"),M.Cp1256=new M(R.Cp1256,24,"Cp1256","windows-1256"),M.UnicodeBigUnmarked=new M(R.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),M.UTF8=new M(R.UTF8,26,"UTF8","UTF-8"),M.ASCII=new M(R.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),M.Big5=new M(R.Big5,28,"Big5"),M.GB18030=new M(R.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),M.EUC_KR=new M(R.EUC_KR,30,"EUC_KR","EUC-KR");var O=function(e){d(n,e);var t=h(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n)}(g);O.kind="UnsupportedOperationException";var P=function(){function e(){l(this,e)}return c(e,null,[{key:"decode",value:function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}},{key:"shouldDecodeOnFallback",value:function(t){return!e.isBrowser()&&"ISO-8859-1"===t}},{key:"encode",value:function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"===typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)}},{key:"isBrowser",value:function(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)}},{key:"encodingName",value:function(e){return"string"===typeof e?e:e.getName()}},{key:"encodingCharacterSet",value:function(e){return e instanceof M?e:M.getCharacterSetECIByName(e)}},{key:"decodeFallback",value:function(t,n){var r=this.encodingCharacterSet(n);if(e.isDecodeFallbackSupported(r)){for(var a="",i=0,o=t.length;i<o;i++){var s=t[i].toString(16);s.length<2&&(s="0"+s),a+="%"+s}return decodeURIComponent(a)}if(r.equals(M.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new O("Encoding ".concat(this.encodingName(n)," not supported by fallback."))}},{key:"isDecodeFallbackSupported",value:function(e){return e.equals(M.UTF8)||e.equals(M.ISO8859_1)||e.equals(M.ASCII)}},{key:"encodeFallback",value:function(e){for(var t=btoa(unescape(encodeURIComponent(e))).split(""),n=[],r=0;r<t.length;r++)n.push(t[r].charCodeAt(0));return new Uint8Array(n)}}]),e}(),F=function(){function e(){l(this,e)}return c(e,null,[{key:"castAsNonUtf8Char",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t?t.getName():this.ISO88591;return P.decode(new Uint8Array([e]),n)}},{key:"guessEncoding",value:function(t,n){if(null!==n&&void 0!==n&&void 0!==n.get(N.CHARACTER_SET))return n.get(N.CHARACTER_SET).toString();for(var r=t.length,a=!0,i=!0,o=!0,s=0,u=0,l=0,c=0,d=0,h=0,f=0,p=0,m=0,v=0,g=0,y=t.length>3&&239===t[0]&&187===t[1]&&191===t[2],b=0;b<r&&(a||i||o);b++){var w=255&t[b];o&&(s>0?0===(128&w)?o=!1:s--:0!==(128&w)&&(0===(64&w)?o=!1:(s++,0===(32&w)?u++:(s++,0===(16&w)?l++:(s++,0===(8&w)?c++:o=!1))))),a&&(w>127&&w<160?a=!1:w>159&&(w<192||215===w||247===w)&&g++),i&&(d>0?w<64||127===w||w>252?i=!1:d--:128===w||160===w||w>239?i=!1:w>160&&w<224?(h++,p=0,++f>m&&(m=f)):w>127?(d++,f=0,++p>v&&(v=p)):(f=0,p=0))}return o&&s>0&&(o=!1),i&&d>0&&(i=!1),o&&(y||u+l+c>0)?e.UTF8:i&&(e.ASSUME_SHIFT_JIS||m>=3||v>=3)?e.SHIFT_JIS:a&&i?2===m&&2===h||10*g>=r?e.SHIFT_JIS:e.ISO88591:a?e.ISO88591:i?e.SHIFT_JIS:o?e.UTF8:e.PLATFORM_DEFAULT_ENCODING}},{key:"format",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=-1;function i(e,t,r,i,o,s){if("%%"===e)return"%";if(void 0!==n[++a]){e=i?parseInt(i.substr(1)):void 0;var u,l=o?parseInt(o.substr(1)):void 0;switch(s){case"s":u=n[a];break;case"c":u=n[a][0];break;case"f":u=parseFloat(n[a]).toFixed(e);break;case"p":u=parseFloat(n[a]).toPrecision(e);break;case"e":u=parseFloat(n[a]).toExponential(e);break;case"x":u=parseInt(n[a]).toString(l||16);break;case"d":u=parseFloat(parseInt(n[a],l||10).toPrecision(e)).toFixed(0)}u="object"===typeof u?JSON.stringify(u):(+u).toString(l);for(var c=parseInt(r),d=r&&r[0]+""==="0"?"0":" ";u.length<c;)u=void 0!==t?u+d:d+u;return u}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)}},{key:"getBytes",value:function(e,t){return P.encode(e,t)}},{key:"getCharCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charCodeAt(t)}},{key:"getCharAt",value:function(e){return String.fromCharCode(e)}}]),e}();F.SHIFT_JIS=M.SJIS.getName(),F.GB2312="GB2312",F.ISO88591=M.ISO8859_1.getName(),F.EUC_JP="EUC_JP",F.UTF8=M.UTF8.getName(),F.PLATFORM_DEFAULT_ENCODING=F.UTF8,F.ASSUME_SHIFT_JIS=!1;var L=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";l(this,e),this.value=t}return c(e,[{key:"enableDecoding",value:function(e){return this.encoding=e,this}},{key:"append",value:function(e){return"string"===typeof e?this.value+=e.toString():this.encoding?this.value+=F.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}},{key:"appendChars",value:function(e,t,n){for(var r=t;t<t+n;r++)this.append(e[r]);return this}},{key:"length",value:function(){return this.value.length}},{key:"charAt",value:function(e){return this.value.charAt(e)}},{key:"deleteCharAt",value:function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}},{key:"setCharAt",value:function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}},{key:"substring",value:function(e,t){return this.value.substring(e,t)}},{key:"setLengthToZero",value:function(){this.value=""}},{key:"toString",value:function(){return this.value}},{key:"insert",value:function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}]),e}(),B=function(){function e(t,n,r,a){if(l(this,e),this.width=t,this.height=n,this.rowSize=r,this.bits=a,void 0!==n&&null!==n||(n=t),this.height=n,t<1||n<1)throw new b("Both dimensions must be greater than 0");void 0!==r&&null!==r||(r=Math.floor((t+31)/32)),this.rowSize=r,void 0!==a&&null!==a||(this.bits=new Int32Array(this.rowSize*this.height))}return c(e,[{key:"get",value:function(e,t){var n=t*this.rowSize+Math.floor(e/32);return 0!==(this.bits[n]>>>(31&e)&1)}},{key:"set",value:function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295}},{key:"unset",value:function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)}},{key:"flip",value:function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295}},{key:"xor",value:function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new b("input matrix dimensions do not match");for(var t=new T(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits,a=0,i=this.height;a<i;a++)for(var o=a*n,s=e.getRow(a,t).getBitArray(),u=0;u<n;u++)r[o+u]^=s[u]}},{key:"clear",value:function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0}},{key:"setRegion",value:function(e,t,n,r){if(t<0||e<0)throw new b("Left and top must be nonnegative");if(r<1||n<1)throw new b("Height and width must be at least 1");var a=e+n,i=t+r;if(i>this.height||a>this.width)throw new b("The region must fit inside the matrix");for(var o=this.rowSize,s=this.bits,u=t;u<i;u++)for(var l=u*o,c=e;c<a;c++)s[l+Math.floor(c/32)]|=1<<(31&c)&4294967295}},{key:"getRow",value:function(e,t){null===t||void 0===t||t.getSize()<this.width?t=new T(this.width):t.clear();for(var n=this.rowSize,r=this.bits,a=e*n,i=0;i<n;i++)t.setBulk(32*i,r[a+i]);return t}},{key:"setRow",value:function(e,t){C.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}},{key:"rotate180",value:function(){for(var e=this.getWidth(),t=this.getHeight(),n=new T(e),r=new T(e),a=0,i=Math.floor((t+1)/2);a<i;a++)n=this.getRow(a,n),r=this.getRow(t-1-a,r),n.reverse(),r.reverse(),this.setRow(a,r),this.setRow(t-1-a,n)}},{key:"getEnclosingRectangle",value:function(){for(var e=this.width,t=this.height,n=this.rowSize,r=this.bits,a=e,i=t,o=-1,s=-1,u=0;u<t;u++)for(var l=0;l<n;l++){var c=r[u*n+l];if(0!==c){if(u<i&&(i=u),u>s&&(s=u),32*l<a){for(var d=0;0===(c<<31-d&4294967295);)d++;32*l+d<a&&(a=32*l+d)}if(32*l+31>o){for(var h=31;c>>>h===0;)h--;32*l+h>o&&(o=32*l+h)}}}return o<a||s<i?null:Int32Array.from([a,i,o-a+1,s-i+1])}},{key:"getTopLeftOnBit",value:function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&0===t[n];)n++;if(n===t.length)return null;for(var r=n/e,a=n%e*32,i=t[n],o=0;0===(i<<31-o&4294967295);)o++;return a+=o,Int32Array.from([a,r])}},{key:"getBottomRightOnBit",value:function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&0===t[n];)n--;if(n<0)return null;for(var r=Math.floor(n/e),a=32*Math.floor(n%e),i=t[n],o=31;i>>>o===0;)o--;return a+=o,Int32Array.from([a,r])}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getRowSize",value:function(){return this.rowSize}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&_.equals(this.bits,n.bits)}},{key:"hashCode",value:function(){var e=this.width;return e=31*(e=31*(e=31*(e=31*e+this.width)+this.height)+this.rowSize)+_.hashCode(this.bits)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"X ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"  ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";return this.buildToString(e,t,n)}},{key:"buildToString",value:function(e,t,n){for(var r=new L,a=0,i=this.height;a<i;a++){for(var o=0,s=this.width;o<s;o++)r.append(this.get(o,a)?e:t);r.append(n)}return r.toString()}},{key:"clone",value:function(){return new e(this.width,this.height,this.rowSize,this.bits.slice())}}],[{key:"parseFromBooleanArray",value:function(t){for(var n=t.length,r=t[0].length,a=new e(r,n),i=0;i<n;i++)for(var o=t[i],s=0;s<r;s++)o[s]&&a.set(s,i);return a}},{key:"parseFromString",value:function(t,n,r){if(null===t)throw new b("stringRepresentation cannot be null");for(var a=new Array(t.length),i=0,o=0,s=-1,u=0,l=0;l<t.length;)if("\n"===t.charAt(l)||"\r"===t.charAt(l)){if(i>o){if(-1===s)s=i-o;else if(i-o!==s)throw new b("row lengths do not match");o=i,u++}l++}else if(t.substring(l,l+n.length)===n)l+=n.length,a[i]=!0,i++;else{if(t.substring(l,l+r.length)!==r)throw new b("illegal character encountered: "+t.substring(l));l+=r.length,a[i]=!1,i++}if(i>o){if(-1===s)s=i-o;else if(i-o!==s)throw new b("row lengths do not match");u++}for(var c=new e(s,u),d=0;d<i;d++)a[d]&&c.set(Math.floor(d%s),Math.floor(d/s));return c}}]),e}(),j=function(e){d(n,e);var t=h(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,null,[{key:"getNotFoundInstance",value:function(){return new n}}]),n}(g);j.kind="NotFoundException";var z=function(e){d(n,e);var t=h(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).luminances=n.EMPTY,r.buckets=new Int32Array(n.LUMINANCE_BUCKETS),r}return c(n,[{key:"getBlackRow",value:function(e,t){var r=this.getLuminanceSource(),a=r.getWidth();void 0===t||null===t||t.getSize()<a?t=new T(a):t.clear(),this.initArrays(a);for(var i=r.getRow(e,this.luminances),o=this.buckets,s=0;s<a;s++)o[(255&i[s])>>n.LUMINANCE_SHIFT]++;var u=n.estimateBlackPoint(o);if(a<3)for(var l=0;l<a;l++)(255&i[l])<u&&t.set(l);else for(var c=255&i[0],d=255&i[1],h=1;h<a-1;h++){var f=255&i[h+1];(4*d-c-f)/2<u&&t.set(h),c=d,d=f}return t}},{key:"getBlackMatrix",value:function(){var e=this.getLuminanceSource(),t=e.getWidth(),r=e.getHeight(),a=new B(t,r);this.initArrays(t);for(var i=this.buckets,o=1;o<5;o++)for(var s=Math.floor(r*o/5),u=e.getRow(s,this.luminances),l=Math.floor(4*t/5),c=Math.floor(t/5);c<l;c++)i[(255&u[c])>>n.LUMINANCE_SHIFT]++;for(var d=n.estimateBlackPoint(i),h=e.getMatrix(),f=0;f<r;f++)for(var p=f*t,m=0;m<t;m++)(255&h[p+m])<d&&a.set(m,f);return a}},{key:"createBinarizer",value:function(e){return new n(e)}},{key:"initArrays",value:function(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));for(var t=this.buckets,r=0;r<n.LUMINANCE_BUCKETS;r++)t[r]=0}}],[{key:"estimateBlackPoint",value:function(e){for(var t=e.length,r=0,a=0,i=0,o=0;o<t;o++)e[o]>i&&(a=o,i=e[o]),e[o]>r&&(r=e[o]);for(var s=0,u=0,l=0;l<t;l++){var c=l-a,d=e[l]*c*c;d>u&&(s=l,u=d)}if(a>s){var h=a;a=s,s=h}if(s-a<=t/16)throw new j;for(var f=s-1,p=-1,m=s-1;m>a;m--){var v=m-a,g=v*v*(s-m)*(r-e[m]);g>p&&(f=m,p=g)}return f<<n.LUMINANCE_SHIFT}}]),n}(k);z.LUMINANCE_BITS=5,z.LUMINANCE_SHIFT=8-z.LUMINANCE_BITS,z.LUMINANCE_BUCKETS=1<<z.LUMINANCE_BITS,z.EMPTY=Uint8ClampedArray.from([0]);var U=function(e){d(n,e);var t=h(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).matrix=null,r}return c(n,[{key:"getBlackMatrix",value:function(){if(null!==this.matrix)return this.matrix;var e=this.getLuminanceSource(),t=e.getWidth(),r=e.getHeight();if(t>=n.MINIMUM_DIMENSION&&r>=n.MINIMUM_DIMENSION){var a=e.getMatrix(),i=t>>n.BLOCK_SIZE_POWER;0!==(t&n.BLOCK_SIZE_MASK)&&i++;var u=r>>n.BLOCK_SIZE_POWER;0!==(r&n.BLOCK_SIZE_MASK)&&u++;var l=n.calculateBlackPoints(a,i,u,t,r),c=new B(t,r);n.calculateThresholdForBlock(a,i,u,t,r,l,c),this.matrix=c}else this.matrix=o(s(n.prototype),"getBlackMatrix",this).call(this);return this.matrix}},{key:"createBinarizer",value:function(e){return new n(e)}}],[{key:"calculateThresholdForBlock",value:function(e,t,r,a,i,o,s){for(var u=i-n.BLOCK_SIZE,l=a-n.BLOCK_SIZE,c=0;c<r;c++){var d=c<<n.BLOCK_SIZE_POWER;d>u&&(d=u);for(var h=n.cap(c,2,r-3),f=0;f<t;f++){var p=f<<n.BLOCK_SIZE_POWER;p>l&&(p=l);for(var m=n.cap(f,2,t-3),v=0,g=-2;g<=2;g++){var y=o[h+g];v+=y[m-2]+y[m-1]+y[m]+y[m+1]+y[m+2]}var b=v/25;n.thresholdBlock(e,p,d,b,a,s)}}}},{key:"cap",value:function(e,t,n){return e<t?t:e>n?n:e}},{key:"thresholdBlock",value:function(e,t,r,a,i,o){for(var s=0,u=r*i+t;s<n.BLOCK_SIZE;s++,u+=i)for(var l=0;l<n.BLOCK_SIZE;l++)(255&e[u+l])<=a&&o.set(t+l,r+s)}},{key:"calculateBlackPoints",value:function(e,t,r,a,i){for(var o=i-n.BLOCK_SIZE,s=a-n.BLOCK_SIZE,u=new Array(r),l=0;l<r;l++){u[l]=new Int32Array(t);var c=l<<n.BLOCK_SIZE_POWER;c>o&&(c=o);for(var d=0;d<t;d++){var h=d<<n.BLOCK_SIZE_POWER;h>s&&(h=s);for(var f=0,p=255,m=0,v=0,g=c*a+h;v<n.BLOCK_SIZE;v++,g+=a){for(var y=0;y<n.BLOCK_SIZE;y++){var b=255&e[g+y];f+=b,b<p&&(p=b),b>m&&(m=b)}if(m-p>n.MIN_DYNAMIC_RANGE)for(v++,g+=a;v<n.BLOCK_SIZE;v++,g+=a)for(var w=0;w<n.BLOCK_SIZE;w++)f+=255&e[g+w]}var x=f>>2*n.BLOCK_SIZE_POWER;if(m-p<=n.MIN_DYNAMIC_RANGE&&(x=p/2,l>0&&d>0)){var k=(u[l-1][d]+2*u[l][d-1]+u[l-1][d-1])/4;p<k&&(x=k)}u[l][d]=x}}return u}}]),n}(z);U.BLOCK_SIZE_POWER=3,U.BLOCK_SIZE=1<<U.BLOCK_SIZE_POWER,U.BLOCK_SIZE_MASK=U.BLOCK_SIZE-1,U.MINIMUM_DIMENSION=5*U.BLOCK_SIZE,U.MIN_DYNAMIC_RANGE=24;var V=function(){function e(t,n){l(this,e),this.width=t,this.height=n}return c(e,[{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"isCropSupported",value:function(){return!1}},{key:"crop",value:function(e,t,n,r){throw new O("This luminance source does not support cropping.")}},{key:"isRotateSupported",value:function(){return!1}},{key:"rotateCounterClockwise",value:function(){throw new O("This luminance source does not support rotation by 90 degrees.")}},{key:"rotateCounterClockwise45",value:function(){throw new O("This luminance source does not support rotation by 45 degrees.")}},{key:"toString",value:function(){for(var e=new Uint8ClampedArray(this.width),t=new L,n=0;n<this.height;n++){for(var r=this.getRow(n,e),a=0;a<this.width;a++){var i=255&r[a],o=void 0;o=i<64?"#":i<128?"+":i<192?".":" ",t.append(o)}t.append("\n")}return t.toString()}}]),e}(),W=function(e){d(n,e);var t=h(n);function n(e){var r;return l(this,n),(r=t.call(this,e.getWidth(),e.getHeight())).delegate=e,r}return c(n,[{key:"getRow",value:function(e,t){for(var n=this.delegate.getRow(e,t),r=this.getWidth(),a=0;a<r;a++)n[a]=255-(255&n[a]);return n}},{key:"getMatrix",value:function(){for(var e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t),r=0;r<t;r++)n[r]=255-(255&e[r]);return n}},{key:"isCropSupported",value:function(){return this.delegate.isCropSupported()}},{key:"crop",value:function(e,t,r,a){return new n(this.delegate.crop(e,t,r,a))}},{key:"isRotateSupported",value:function(){return this.delegate.isRotateSupported()}},{key:"invert",value:function(){return this.delegate}},{key:"rotateCounterClockwise",value:function(){return new n(this.delegate.rotateCounterClockwise())}},{key:"rotateCounterClockwise45",value:function(){return new n(this.delegate.rotateCounterClockwise45())}}]),n}(V),H=function(e){d(n,e);var t=h(n);function n(e){var r;return l(this,n),(r=t.call(this,e.width,e.height)).canvas=e,r.tempCanvasElement=null,r.buffer=n.makeBufferFromCanvasImageData(e),r}return c(n,[{key:"getRow",value:function(e,t){if(e<0||e>=this.getHeight())throw new b("Requested row is outside the image: "+e);var n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}},{key:"getMatrix",value:function(){return this.buffer}},{key:"isCropSupported",value:function(){return!0}},{key:"crop",value:function(e,t,r,a){return o(s(n.prototype),"crop",this).call(this,e,t,r,a),this}},{key:"isRotateSupported",value:function(){return!0}},{key:"rotateCounterClockwise",value:function(){return this.rotate(-90),this}},{key:"rotateCounterClockwise45",value:function(){return this.rotate(-45),this}},{key:"getTempCanvasElement",value:function(){if(null===this.tempCanvasElement){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}},{key:"rotate",value:function(e){var t=this.getTempCanvasElement(),r=t.getContext("2d"),a=e*n.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(a))*i+Math.abs(Math.sin(a))*o),u=Math.ceil(Math.abs(Math.sin(a))*i+Math.abs(Math.cos(a))*o);return t.width=s,t.height=u,r.translate(s/2,u/2),r.rotate(a),r.drawImage(this.canvas,i/-2,o/-2),this.buffer=n.makeBufferFromCanvasImageData(t),this}},{key:"invert",value:function(){return new W(this)}}],[{key:"makeBufferFromCanvasImageData",value:function(e){var t=e.getContext("2d").getImageData(0,0,e.width,e.height);return n.toGrayscaleBuffer(t.data,e.width,e.height)}},{key:"toGrayscaleBuffer",value:function(e,t,n){for(var r=new Uint8ClampedArray(t*n),a=0,i=0,o=e.length;a<o;a+=4,i++){var s=void 0;s=0===e[a+3]?255:306*e[a]+601*e[a+1]+117*e[a+2]+512>>10,r[i]=s}return r}}]),n}(V);H.DEGREE_TO_RADIANS=Math.PI/180;var G,K=function(){function e(t,n,r){l(this,e),this.deviceId=t,this.label=n,this.kind="videoinput",this.groupId=r||void 0}return c(e,[{key:"toJSON",value:function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}]),e}(),X=(globalThis||n.g||self||window?(globalThis||n.g||self||window||void 0).__awaiter:void 0)||function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function o(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){e.done?n(e.value):a(e.value).then(o,s)}u((r=r.apply(e,t||[])).next())}))},Y=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,r=arguments.length>2?arguments[2]:void 0;l(this,e),this.reader=t,this.timeBetweenScansMillis=n,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return c(e,[{key:"hasNavigator",get:function(){return"undefined"!==typeof navigator}},{key:"isMediaDevicesSuported",get:function(){return this.hasNavigator&&!!navigator.mediaDevices}},{key:"canEnumerateDevices",get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}},{key:"timeBetweenDecodingAttempts",get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e}},{key:"hints",get:function(){return this._hints},set:function(e){this._hints=e||null}},{key:"listVideoInputDevices",value:function(){return X(this,void 0,void 0,i().mark((function e(){var t,n,r,a,o,s,l,c,d,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasNavigator){e.next=2;break}throw new Error("Can't enumerate devices, navigator is not present.");case 2:if(this.canEnumerateDevices){e.next=4;break}throw new Error("Can't enumerate devices, method not supported.");case 4:return e.next=6,navigator.mediaDevices.enumerateDevices();case 6:t=e.sent,n=[],r=u(t),e.prev=9,r.s();case 11:if((a=r.n()).done){e.next=23;break}if(o=a.value,"videoinput"===(s="video"===o.kind?"videoinput":o.kind)){e.next=16;break}return e.abrupt("continue",21);case 16:l=o.deviceId||o.id,c=o.label||"Video device ".concat(n.length+1),d=o.groupId,h={deviceId:l,label:c,kind:s,groupId:d},n.push(h);case 21:e.next=11;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(9),r.e(e.t0);case 28:return e.prev=28,r.f(),e.finish(28);case 31:return e.abrupt("return",n);case 32:case"end":return e.stop()}}),e,this,[[9,25,28,31]])})))}},{key:"getVideoInputDevices",value:function(){return X(this,void 0,void 0,i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listVideoInputDevices();case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return new K(e.deviceId,e.label)})));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"findDeviceById",value:function(e){return X(this,void 0,void 0,i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.listVideoInputDevices();case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",null);case 5:return t.abrupt("return",n.find((function(t){return t.deviceId===e})));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"decodeFromInputVideoDevice",value:function(e,t){return X(this,void 0,void 0,i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.decodeOnceFromVideoDevice(e,t);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"decodeOnceFromVideoDevice",value:function(e,t){return X(this,void 0,void 0,i().mark((function n(){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.reset(),r={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},n.next=5,this.decodeOnceFromConstraints(r,t);case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"decodeOnceFromConstraints",value:function(e,t){return X(this,void 0,void 0,i().mark((function n(){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,navigator.mediaDevices.getUserMedia(e);case 2:return r=n.sent,n.next=5,this.decodeOnceFromStream(r,t);case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"decodeOnceFromStream",value:function(e,t){return X(this,void 0,void 0,i().mark((function n(){var r,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.reset(),n.next=3,this.attachStreamToVideo(e,t);case 3:return r=n.sent,n.next=6,this.decodeOnce(r);case 6:return a=n.sent,n.abrupt("return",a);case 8:case"end":return n.stop()}}),n,this)})))}},{key:"decodeFromInputVideoDeviceContinuously",value:function(e,t,n){return X(this,void 0,void 0,i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.decodeFromVideoDevice(e,t,n);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r,this)})))}},{key:"decodeFromVideoDevice",value:function(e,t,n){return X(this,void 0,void 0,i().mark((function r(){var a;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},r.next=4,this.decodeFromConstraints(a,t,n);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),r,this)})))}},{key:"decodeFromConstraints",value:function(e,t,n){return X(this,void 0,void 0,i().mark((function r(){var a;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,navigator.mediaDevices.getUserMedia(e);case 2:return a=r.sent,r.next=5,this.decodeFromStream(a,t,n);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}}),r,this)})))}},{key:"decodeFromStream",value:function(e,t,n){return X(this,void 0,void 0,i().mark((function r(){var a;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this.reset(),r.next=3,this.attachStreamToVideo(e,t);case 3:return a=r.sent,r.next=6,this.decodeContinuously(a,n);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r,this)})))}},{key:"stopAsyncDecode",value:function(){this._stopAsyncDecode=!0}},{key:"stopContinuousDecode",value:function(){this._stopContinuousDecode=!0}},{key:"attachStreamToVideo",value:function(e,t){return X(this,void 0,void 0,i().mark((function n(){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,n.next=6,this.playVideoOnLoadAsync(r);case 6:return n.abrupt("return",r);case 7:case"end":return n.stop()}}),n,this)})))}},{key:"playVideoOnLoadAsync",value:function(e){var t=this;return new Promise((function(n,r){return t.playVideoOnLoad(e,(function(){return n()}))}))}},{key:"playVideoOnLoad",value:function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}},{key:"isVideoPlaying",value:function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}},{key:"tryPlayVideo",value:function(e){return X(this,void 0,void 0,i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isVideoPlaying(e)){t.next=3;break}return console.warn("Trying to play video that is already playing."),t.abrupt("return");case 3:return t.prev=3,t.next=6,e.play();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),console.warn("It was not possible to play the video.");case 11:case"end":return t.stop()}}),t,this,[[3,8]])})))}},{key:"getMediaElement",value:function(e,t){var n=document.getElementById(e);if(!n)throw new y("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new y("element with id '".concat(e,"' must be an ").concat(t," element"));return n}},{key:"decodeFromImage",value:function(e,t){if(!e&&!t)throw new y("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}},{key:"decodeFromVideo",value:function(e,t){if(!e&&!t)throw new y("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}},{key:"decodeFromVideoContinuously",value:function(e,t,n){if(void 0===e&&void 0===t)throw new y("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}},{key:"decodeFromImageElement",value:function(e){if(!e)throw new y("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);return this.imageElement=t,this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t)}},{key:"decodeFromVideoElement",value:function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}},{key:"decodeFromVideoElementContinuously",value:function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}},{key:"_decodeFromVideoElementSetup",value:function(e){if(!e)throw new y("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t}},{key:"decodeFromImageUrl",value:function(e){if(!e)throw new y("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n}},{key:"decodeFromVideoUrl",value:function(e){if(!e)throw new y("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}},{key:"decodeFromVideoUrlContinuously",value:function(e,t){if(!e)throw new y("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}},{key:"_decodeOnLoadImage",value:function(e){var t=this;return new Promise((function(n,r){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,r)},e.addEventListener("load",t.imageLoadedListener)}))}},{key:"_decodeOnLoadVideo",value:function(e){return X(this,void 0,void 0,i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.playVideoOnLoadAsync(e);case 2:return t.next=4,this.decodeOnce(e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"_decodeOnLoadVideoContinuously",value:function(e,t){return X(this,void 0,void 0,i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.playVideoOnLoadAsync(e);case 2:this.decodeContinuously(e,t);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"isImageLoaded",value:function(e){return!!e.complete&&0!==e.naturalWidth}},{key:"prepareImageElement",value:function(e){var t;return"undefined"===typeof e&&((t=document.createElement("img")).width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}},{key:"prepareVideoElement",value:function(e){var t;return e||"undefined"===typeof document||((t=document.createElement("video")).width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}},{key:"decodeOnce",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._stopAsyncDecode=!1;var a=function a(i,o){if(t._stopAsyncDecode)return o(new j("Video stream has ended before any code could be detected.")),void(t._stopAsyncDecode=void 0);try{i(t.decode(e))}catch(s){if(n&&s instanceof j||(s instanceof x||s instanceof D)&&r)return setTimeout(a,t._timeBetweenDecodingAttempts,i,o);o(s)}};return new Promise((function(e,t){return a(e,t)}))}},{key:"decodeContinuously",value:function(e,t){var n=this;this._stopContinuousDecode=!1,function r(){if(n._stopContinuousDecode)n._stopContinuousDecode=void 0;else try{var a=n.decode(e);t(a,null),setTimeout(r,n.timeBetweenScansMillis)}catch(i){t(null,i),(i instanceof x||i instanceof D||i instanceof j)&&setTimeout(r,n._timeBetweenDecodingAttempts)}}()}},{key:"decode",value:function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}},{key:"_isHTMLVideoElement",value:function(e){return 0!==e.videoWidth}},{key:"drawFrameOnCanvas",value:function(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}},{key:"drawImageOnCanvas",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.captureCanvasContext;t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}},{key:"createBinaryBitmap",value:function(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);var t=this.getCaptureCanvas(e),n=new H(t),r=new U(n);return new w(r)}},{key:"getCaptureCanvasContext",value:function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext}},{key:"getCaptureCanvas",value:function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}},{key:"decodeBitmap",value:function(e){return this.reader.decode(e,this._hints)}},{key:"createCaptureCanvas",value:function(e){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;var t,n,r=document.createElement("canvas");return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(t=e.videoWidth,n=e.videoHeight):e instanceof HTMLImageElement&&(t=e.naturalWidth||e.width,n=e.naturalHeight||e.height)),r.style.width=t+"px",r.style.height=n+"px",r.width=t,r.height=n,r}},{key:"stopStreams",value:function(){this.stream&&(this.stream.getVideoTracks().forEach((function(e){return e.stop()})),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}},{key:"reset",value:function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}},{key:"_destroyVideoElement",value:function(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}},{key:"_destroyImageElement",value:function(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}},{key:"_destroyCaptureCanvas",value:function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}},{key:"addVideoSource",value:function(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}}},{key:"cleanVideoSource",value:function(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")}}]),e}(),q=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==n?0:8*n.length,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:C.currentTimeMillis();l(this,e),this.text=t,this.rawBytes=n,this.numBits=r,this.resultPoints=a,this.format=i,this.timestamp=o,this.text=t,this.rawBytes=n,this.numBits=void 0===r||null===r?null===n||void 0===n?0:8*n.length:r,this.resultPoints=a,this.format=i,this.resultMetadata=null,this.timestamp=void 0===o||null===o?C.currentTimeMillis():o}return c(e,[{key:"getText",value:function(){return this.text}},{key:"getRawBytes",value:function(){return this.rawBytes}},{key:"getNumBits",value:function(){return this.numBits}},{key:"getResultPoints",value:function(){return this.resultPoints}},{key:"getBarcodeFormat",value:function(){return this.format}},{key:"getResultMetadata",value:function(){return this.resultMetadata}},{key:"putMetadata",value:function(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}},{key:"putAllMetadata",value:function(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))}},{key:"addResultPoints",value:function(e){var t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){var n=new Array(t.length+e.length);C.arraycopy(t,0,n,0,t.length),C.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}},{key:"getTimestamp",value:function(){return this.timestamp}},{key:"toString",value:function(){return this.text}}]),e}();!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(G||(G={}));var Z,Q=G;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(Z||(Z={}));var J=Z,$=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;l(this,e),this.rawBytes=t,this.text=n,this.byteSegments=r,this.ecLevel=a,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=void 0===t||null===t?0:8*t.length}return c(e,[{key:"getRawBytes",value:function(){return this.rawBytes}},{key:"getNumBits",value:function(){return this.numBits}},{key:"setNumBits",value:function(e){this.numBits=e}},{key:"getText",value:function(){return this.text}},{key:"getByteSegments",value:function(){return this.byteSegments}},{key:"getECLevel",value:function(){return this.ecLevel}},{key:"getErrorsCorrected",value:function(){return this.errorsCorrected}},{key:"setErrorsCorrected",value:function(e){this.errorsCorrected=e}},{key:"getErasures",value:function(){return this.erasures}},{key:"setErasures",value:function(e){this.erasures=e}},{key:"getOther",value:function(){return this.other}},{key:"setOther",value:function(e){this.other=e}},{key:"hasStructuredAppend",value:function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}},{key:"getStructuredAppendParity",value:function(){return this.structuredAppendParity}},{key:"getStructuredAppendSequenceNumber",value:function(){return this.structuredAppendSequenceNumber}}]),e}(),ee=function(){function e(){l(this,e)}return c(e,[{key:"exp",value:function(e){return this.expTable[e]}},{key:"log",value:function(e){if(0===e)throw new b;return this.logTable[e]}}],[{key:"addOrSubtract",value:function(e,t){return e^t}}]),e}(),te=function(){function e(t,n){if(l(this,e),0===n.length)throw new b;this.field=t;var r=n.length;if(r>1&&0===n[0]){for(var a=1;a<r&&0===n[a];)a++;a===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-a),C.arraycopy(n,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return c(e,[{key:"getCoefficients",value:function(){return this.coefficients}},{key:"getDegree",value:function(){return this.coefficients.length-1}},{key:"isZero",value:function(){return 0===this.coefficients[0]}},{key:"getCoefficient",value:function(e){return this.coefficients[this.coefficients.length-1-e]}},{key:"evaluateAt",value:function(e){if(0===e)return this.getCoefficient(0);var t,n=this.coefficients;if(1===e){t=0;for(var r=0,a=n.length;r!==a;r++){var i=n[r];t=ee.addOrSubtract(t,i)}return t}t=n[0];for(var o=n.length,s=this.field,u=1;u<o;u++)t=ee.addOrSubtract(s.multiply(e,t),n[u]);return t}},{key:"addOrSubtract",value:function(t){if(!this.field.equals(t.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var n=this.coefficients,r=t.coefficients;if(n.length>r.length){var a=n;n=r,r=a}var i=new Int32Array(r.length),o=r.length-n.length;C.arraycopy(r,0,i,0,o);for(var s=o;s<r.length;s++)i[s]=ee.addOrSubtract(n[s-o],r[s]);return new e(this.field,i)}},{key:"multiply",value:function(t){if(!this.field.equals(t.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var n=this.coefficients,r=n.length,a=t.coefficients,i=a.length,o=new Int32Array(r+i-1),s=this.field,u=0;u<r;u++)for(var l=n[u],c=0;c<i;c++)o[u+c]=ee.addOrSubtract(o[u+c],s.multiply(l,a[c]));return new e(s,o)}},{key:"multiplyScalar",value:function(t){if(0===t)return this.field.getZero();if(1===t)return this;for(var n=this.coefficients.length,r=this.field,a=new Int32Array(n),i=this.coefficients,o=0;o<n;o++)a[o]=r.multiply(i[o],t);return new e(r,a)}},{key:"multiplyByMonomial",value:function(t,n){if(t<0)throw new b;if(0===n)return this.field.getZero();for(var r=this.coefficients,a=r.length,i=new Int32Array(a+t),o=this.field,s=0;s<a;s++)i[s]=o.multiply(r[s],n);return new e(o,i)}},{key:"divide",value:function(e){if(!this.field.equals(e.field))throw new b("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new b("Divide by 0");for(var t=this.field,n=t.getZero(),r=this,a=e.getCoefficient(e.getDegree()),i=t.inverse(a);r.getDegree()>=e.getDegree()&&!r.isZero();){var o=r.getDegree()-e.getDegree(),s=t.multiply(r.getCoefficient(r.getDegree()),i),u=e.multiplyByMonomial(o,s),l=t.buildMonomial(o,s);n=n.addOrSubtract(l),r=r.addOrSubtract(u)}return[n,r]}},{key:"toString",value:function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){var r=this.field.log(n);0===r?e+="1":1===r?e+="a":(e+="a^",e+=r)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e}}]),e}(),ne=function(e){d(n,e);var t=h(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n)}(g);ne.kind="ArithmeticException";var re=function(e){d(n,e);var t=h(n);function n(e,r,i){var o;l(this,n),(o=t.call(this)).primitive=e,o.size=r,o.generatorBase=i;for(var s=new Int32Array(r),u=1,c=0;c<r;c++)s[c]=u,(u*=2)>=r&&(u^=e,u&=r-1);o.expTable=s;for(var d=new Int32Array(r),h=0;h<r-1;h++)d[s[h]]=h;return o.logTable=d,o.zero=new te(a(o),Int32Array.from([0])),o.one=new te(a(o),Int32Array.from([1])),o}return c(n,[{key:"getZero",value:function(){return this.zero}},{key:"getOne",value:function(){return this.one}},{key:"buildMonomial",value:function(e,t){if(e<0)throw new b;if(0===t)return this.zero;var n=new Int32Array(e+1);return n[0]=t,new te(this,n)}},{key:"inverse",value:function(e){if(0===e)throw new ne;return this.expTable[this.size-this.logTable[e]-1]}},{key:"multiply",value:function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}},{key:"getSize",value:function(){return this.size}},{key:"getGeneratorBase",value:function(){return this.generatorBase}},{key:"toString",value:function(){return"GF(0x"+A.toHexString(this.primitive)+","+this.size+")"}},{key:"equals",value:function(e){return e===this}}]),n}(ee);re.AZTEC_DATA_12=new re(4201,4096,1),re.AZTEC_DATA_10=new re(1033,1024,1),re.AZTEC_DATA_6=new re(67,64,1),re.AZTEC_PARAM=new re(19,16,1),re.QR_CODE_FIELD_256=new re(285,256,0),re.DATA_MATRIX_FIELD_256=new re(301,256,1),re.AZTEC_DATA_8=re.DATA_MATRIX_FIELD_256,re.MAXICODE_FIELD_64=re.AZTEC_DATA_6;var ae=function(e){d(n,e);var t=h(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n)}(g);ae.kind="ReedSolomonException";var ie=function(e){d(n,e);var t=h(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n)}(g);ie.kind="IllegalStateException";var oe,se=function(){function e(t){l(this,e),this.field=t}return c(e,[{key:"decode",value:function(e,t){for(var n=this.field,r=new te(n,e),a=new Int32Array(t),i=!0,o=0;o<t;o++){var s=r.evaluateAt(n.exp(o+n.getGeneratorBase()));a[a.length-1-o]=s,0!==s&&(i=!1)}if(!i)for(var u=new te(n,a),l=this.runEuclideanAlgorithm(n.buildMonomial(t,1),u,t),c=l[0],d=l[1],h=this.findErrorLocations(c),f=this.findErrorMagnitudes(d,h),p=0;p<h.length;p++){var m=e.length-1-n.log(h[p]);if(m<0)throw new ae("Bad error location");e[m]=re.addOrSubtract(e[m],f[p])}}},{key:"runEuclideanAlgorithm",value:function(e,t,n){if(e.getDegree()<t.getDegree()){var r=e;e=t,t=r}for(var a=this.field,i=e,o=t,s=a.getZero(),u=a.getOne();o.getDegree()>=(n/2|0);){var l=i,c=s;if(s=u,(i=o).isZero())throw new ae("r_{i-1} was zero");o=l;for(var d=a.getZero(),h=i.getCoefficient(i.getDegree()),f=a.inverse(h);o.getDegree()>=i.getDegree()&&!o.isZero();){var p=o.getDegree()-i.getDegree(),m=a.multiply(o.getCoefficient(o.getDegree()),f);d=d.addOrSubtract(a.buildMonomial(p,m)),o=o.addOrSubtract(i.multiplyByMonomial(p,m))}if(u=d.multiply(s).addOrSubtract(c),o.getDegree()>=i.getDegree())throw new ie("Division algorithm failed to reduce polynomial?")}var v=u.getCoefficient(0);if(0===v)throw new ae("sigmaTilde(0) was zero");var g=a.inverse(v);return[u.multiplyScalar(g),o.multiplyScalar(g)]}},{key:"findErrorLocations",value:function(e){var t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),r=0,a=this.field,i=1;i<a.getSize()&&r<t;i++)0===e.evaluateAt(i)&&(n[r]=a.inverse(i),r++);if(r!==t)throw new ae("Error locator degree does not match number of roots");return n}},{key:"findErrorMagnitudes",value:function(e,t){for(var n=t.length,r=new Int32Array(n),a=this.field,i=0;i<n;i++){for(var o=a.inverse(t[i]),s=1,u=0;u<n;u++)if(i!==u){var l=a.multiply(t[u],o),c=0===(1&l)?1|l:-2&l;s=a.multiply(s,c)}r[i]=a.multiply(e.evaluateAt(o),a.inverse(s)),0!==a.getGeneratorBase()&&(r[i]=a.multiply(r[i],o))}return r}}]),e}();!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(oe||(oe={}));var ue=function(){function e(){l(this,e)}return c(e,[{key:"decode",value:function(t){this.ddata=t;var n=t.getBits(),r=this.extractBits(n),a=this.correctBits(r),i=e.convertBoolArrayToByteArray(a),o=e.getEncodedData(a),s=new $(i,o,null,null);return s.setNumBits(a.length),s}},{key:"correctBits",value:function(t){var n,r;this.ddata.getNbLayers()<=2?(r=6,n=re.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=re.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=re.AZTEC_DATA_10):(r=12,n=re.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),i=t.length/r;if(i<a)throw new D;for(var o=t.length%r,s=new Int32Array(i),u=0;u<i;u++,o+=r)s[u]=e.readCode(t,o,r);try{new se(n).decode(s,i-a)}catch(y){throw new D(y)}for(var l=(1<<r)-1,c=0,d=0;d<a;d++){var h=s[d];if(0===h||h===l)throw new D;1!==h&&h!==l-1||c++}for(var f=new Array(a*r-c),p=0,m=0;m<a;m++){var v=s[m];if(1===v||v===l-1)f.fill(v>1,p,p+r-1),p+=r-1;else for(var g=r-1;g>=0;--g)f[p++]=0!==(v&1<<g)}return f}},{key:"extractBits",value:function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+4*n,a=new Int32Array(r),i=new Array(this.totalBitsInLayer(n,t));if(t)for(var o=0;o<a.length;o++)a[o]=o;else for(var s=r+1+2*A.truncDivision(A.truncDivision(r,2)-1,15),u=r/2,l=A.truncDivision(s,2),c=0;c<u;c++){var d=c+A.truncDivision(c,15);a[u-c-1]=l-d-1,a[u+c]=l+d+1}for(var h=0,f=0;h<n;h++){for(var p=4*(n-h)+(t?9:12),m=2*h,v=r-1-m,g=0;g<p;g++)for(var y=2*g,b=0;b<2;b++)i[f+y+b]=e.get(a[m+b],a[m+g]),i[f+2*p+y+b]=e.get(a[m+g],a[v-b]),i[f+4*p+y+b]=e.get(a[v-b],a[v-g]),i[f+6*p+y+b]=e.get(a[v-g],a[m+b]);f+=8*p}return i}},{key:"totalBitsInLayer",value:function(e,t){return((t?88:112)+16*e)*e}}],[{key:"highLevelDecode",value:function(e){return this.getEncodedData(e)}},{key:"getEncodedData",value:function(t){for(var n=t.length,r=oe.UPPER,a=oe.UPPER,i="",o=0;o<n;)if(a===oe.BINARY){if(n-o<5)break;var s=e.readCode(t,o,5);if(o+=5,0===s){if(n-o<11)break;s=e.readCode(t,o,11)+31,o+=11}for(var u=0;u<s;u++){if(n-o<8){o=n;break}var l=e.readCode(t,o,8);i+=F.castAsNonUtf8Char(l),o+=8}a=r}else{var c=a===oe.DIGIT?4:5;if(n-o<c)break;var d=e.readCode(t,o,c);o+=c;var h=e.getCharacter(a,d);h.startsWith("CTRL_")?(r=a,a=e.getTable(h.charAt(5)),"L"===h.charAt(6)&&(r=a)):(i+=h,a=r)}return i}},{key:"getTable",value:function(e){switch(e){case"L":return oe.LOWER;case"P":return oe.PUNCT;case"M":return oe.MIXED;case"D":return oe.DIGIT;case"B":return oe.BINARY;default:return oe.UPPER}}},{key:"getCharacter",value:function(t,n){switch(t){case oe.UPPER:return e.UPPER_TABLE[n];case oe.LOWER:return e.LOWER_TABLE[n];case oe.MIXED:return e.MIXED_TABLE[n];case oe.PUNCT:return e.PUNCT_TABLE[n];case oe.DIGIT:return e.DIGIT_TABLE[n];default:throw new ie("Bad table")}}},{key:"readCode",value:function(e,t,n){for(var r=0,a=t;a<t+n;a++)r<<=1,e[a]&&(r|=1);return r}},{key:"readByte",value:function(t,n){var r=t.length-n;return r>=8?e.readCode(t,n,8):e.readCode(t,n,r)<<8-r}},{key:"convertBoolArrayToByteArray",value:function(t){for(var n=new Uint8Array((t.length+7)/8),r=0;r<n.length;r++)n[r]=e.readByte(t,8*r);return n}}]),e}();ue.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ue.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ue.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ue.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ue.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];var le=function(){function e(){l(this,e)}return c(e,null,[{key:"round",value:function(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}},{key:"distance",value:function(e,t,n,r){var a=e-n,i=t-r;return Math.sqrt(a*a+i*i)}},{key:"sum",value:function(e){for(var t=0,n=0,r=e.length;n!==r;n++)t+=e[n];return t}}]),e}(),ce=function(){function e(){l(this,e)}return c(e,null,[{key:"floatToIntBits",value:function(e){return e}}]),e}();ce.MAX_VALUE=Number.MAX_SAFE_INTEGER;var de=function(){function e(t,n){l(this,e),this.x=t,this.y=n}return c(e,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"equals",value:function(t){if(t instanceof e){var n=t;return this.x===n.x&&this.y===n.y}return!1}},{key:"hashCode",value:function(){return 31*ce.floatToIntBits(this.x)+ce.floatToIntBits(this.y)}},{key:"toString",value:function(){return"("+this.x+","+this.y+")"}}],[{key:"orderBestPatterns",value:function(e){var t,n,r,a=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),o=this.distance(e[0],e[2]);if(i>=a&&i>=o?(n=e[0],t=e[1],r=e[2]):o>=i&&o>=a?(n=e[1],t=e[0],r=e[2]):(n=e[2],t=e[0],r=e[1]),this.crossProductZ(t,n,r)<0){var s=t;t=r,r=s}e[0]=t,e[1]=n,e[2]=r}},{key:"distance",value:function(e,t){return le.distance(e.x,e.y,t.x,t.y)}},{key:"crossProductZ",value:function(e,t,n){var r=t.x,a=t.y;return(n.x-r)*(e.y-a)-(n.y-a)*(e.x-r)}}]),e}(),he=function(){function e(t,n){l(this,e),this.bits=t,this.points=n}return c(e,[{key:"getBits",value:function(){return this.bits}},{key:"getPoints",value:function(){return this.points}}]),e}(),fe=function(e){d(n,e);var t=h(n);function n(e,r,a,i,o){var s;return l(this,n),(s=t.call(this,e,r)).compact=a,s.nbDatablocks=i,s.nbLayers=o,s}return c(n,[{key:"getNbLayers",value:function(){return this.nbLayers}},{key:"getNbDatablocks",value:function(){return this.nbDatablocks}},{key:"isCompact",value:function(){return this.compact}}]),n}(he),pe=function(){function e(t,n,r,a){l(this,e),this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),void 0!==n&&null!==n||(n=e.INIT_SIZE),void 0!==r&&null!==r||(r=t.getWidth()/2|0),void 0!==a&&null!==a||(a=t.getHeight()/2|0);var i=n/2|0;if(this.leftInit=r-i,this.rightInit=r+i,this.upInit=a-i,this.downInit=a+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new j}return c(e,[{key:"detect",value:function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,a=!1,i=!0,o=!1,s=!1,u=!1,l=!1,c=!1,d=this.width,h=this.height;i;){i=!1;for(var f=!0;(f||!s)&&t<d;)(f=this.containsBlackPoint(n,r,t,!1))?(t++,i=!0,s=!0):s||t++;if(t>=d){a=!0;break}for(var p=!0;(p||!u)&&r<h;)(p=this.containsBlackPoint(e,t,r,!0))?(r++,i=!0,u=!0):u||r++;if(r>=h){a=!0;break}for(var m=!0;(m||!l)&&e>=0;)(m=this.containsBlackPoint(n,r,e,!1))?(e--,i=!0,l=!0):l||e--;if(e<0){a=!0;break}for(var v=!0;(v||!c)&&n>=0;)(v=this.containsBlackPoint(e,t,n,!0))?(n--,i=!0,c=!0):c||n--;if(n<0){a=!0;break}i&&(o=!0)}if(!a&&o){for(var g=t-e,y=null,b=1;null===y&&b<g;b++)y=this.getBlackPointOnSegment(e,r-b,e+b,r);if(null==y)throw new j;for(var w=null,x=1;null===w&&x<g;x++)w=this.getBlackPointOnSegment(e,n+x,e+x,n);if(null==w)throw new j;for(var k=null,C=1;null===k&&C<g;C++)k=this.getBlackPointOnSegment(t,n+C,t-C,n);if(null==k)throw new j;for(var E=null,S=1;null===E&&S<g;S++)E=this.getBlackPointOnSegment(t,r-S,t-S,r);if(null==E)throw new j;return this.centerEdges(E,y,k,w)}throw new j}},{key:"getBlackPointOnSegment",value:function(e,t,n,r){for(var a=le.round(le.distance(e,t,n,r)),i=(n-e)/a,o=(r-t)/a,s=this.image,u=0;u<a;u++){var l=le.round(e+u*i),c=le.round(t+u*o);if(s.get(l,c))return new de(l,c)}return null}},{key:"centerEdges",value:function(t,n,r,a){var i=t.getX(),o=t.getY(),s=n.getX(),u=n.getY(),l=r.getX(),c=r.getY(),d=a.getX(),h=a.getY(),f=e.CORR;return i<this.width/2?[new de(d-f,h+f),new de(s+f,u+f),new de(l-f,c-f),new de(i+f,o-f)]:[new de(d+f,h+f),new de(s+f,u-f),new de(l-f,c+f),new de(i-f,o-f)]}},{key:"containsBlackPoint",value:function(e,t,n,r){var a=this.image;if(r){for(var i=e;i<=t;i++)if(a.get(i,n))return!0}else for(var o=e;o<=t;o++)if(a.get(n,o))return!0;return!1}}]),e}();pe.INIT_SIZE=10,pe.CORR=1;var me=function(){function e(){l(this,e)}return c(e,null,[{key:"checkAndNudgePoints",value:function(e,t){for(var n=e.getWidth(),r=e.getHeight(),a=!0,i=0;i<t.length&&a;i+=2){var o=Math.floor(t[i]),s=Math.floor(t[i+1]);if(o<-1||o>n||s<-1||s>r)throw new j;a=!1,-1===o?(t[i]=0,a=!0):o===n&&(t[i]=n-1,a=!0),-1===s?(t[i+1]=0,a=!0):s===r&&(t[i+1]=r-1,a=!0)}a=!0;for(var u=t.length-2;u>=0&&a;u-=2){var l=Math.floor(t[u]),c=Math.floor(t[u+1]);if(l<-1||l>n||c<-1||c>r)throw new j;a=!1,-1===l?(t[u]=0,a=!0):l===n&&(t[u]=n-1,a=!0),-1===c?(t[u+1]=0,a=!0):c===r&&(t[u+1]=r-1,a=!0)}}}]),e}(),ve=function(){function e(t,n,r,a,i,o,s,u,c){l(this,e),this.a11=t,this.a21=n,this.a31=r,this.a12=a,this.a22=i,this.a32=o,this.a13=s,this.a23=u,this.a33=c}return c(e,[{key:"transformPoints",value:function(e){for(var t=e.length,n=this.a11,r=this.a12,a=this.a13,i=this.a21,o=this.a22,s=this.a23,u=this.a31,l=this.a32,c=this.a33,d=0;d<t;d+=2){var h=e[d],f=e[d+1],p=a*h+s*f+c;e[d]=(n*h+i*f+u)/p,e[d+1]=(r*h+o*f+l)/p}}},{key:"transformPointsWithValues",value:function(e,t){for(var n=this.a11,r=this.a12,a=this.a13,i=this.a21,o=this.a22,s=this.a23,u=this.a31,l=this.a32,c=this.a33,d=e.length,h=0;h<d;h++){var f=e[h],p=t[h],m=a*f+s*p+c;e[h]=(n*f+i*p+u)/m,t[h]=(r*f+o*p+l)/m}}},{key:"buildAdjoint",value:function(){return new e(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}},{key:"times",value:function(t){return new e(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}],[{key:"quadrilateralToQuadrilateral",value:function(t,n,r,a,i,o,s,u,l,c,d,h,f,p,m,v){var g=e.quadrilateralToSquare(t,n,r,a,i,o,s,u);return e.squareToQuadrilateral(l,c,d,h,f,p,m,v).times(g)}},{key:"squareToQuadrilateral",value:function(t,n,r,a,i,o,s,u){var l=t-r+i-s,c=n-a+o-u;if(0===l&&0===c)return new e(r-t,i-r,t,a-n,o-a,n,0,0,1);var d=r-i,h=s-i,f=a-o,p=u-o,m=d*p-h*f,v=(l*p-h*c)/m,g=(d*c-l*f)/m;return new e(r-t+v*r,s-t+g*s,t,a-n+v*a,u-n+g*u,n,v,g,1)}},{key:"quadrilateralToSquare",value:function(t,n,r,a,i,o,s,u){return e.squareToQuadrilateral(t,n,r,a,i,o,s,u).buildAdjoint()}}]),e}(),ge=function(e){d(n,e);var t=h(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"sampleGrid",value:function(e,t,n,r,a,i,o,s,u,l,c,d,h,f,p,m,v,g,y){var b=ve.quadrilateralToQuadrilateral(r,a,i,o,s,u,l,c,d,h,f,p,m,v,g,y);return this.sampleGridWithTransform(e,t,n,b)}},{key:"sampleGridWithTransform",value:function(e,t,n,r){if(t<=0||n<=0)throw new j;for(var a=new B(t,n),i=new Float32Array(2*t),o=0;o<n;o++){for(var s=i.length,u=o+.5,l=0;l<s;l+=2)i[l]=l/2+.5,i[l+1]=u;r.transformPoints(i),me.checkAndNudgePoints(e,i);try{for(var c=0;c<s;c+=2)e.get(Math.floor(i[c]),Math.floor(i[c+1]))&&a.set(c/2,o)}catch(d){throw new j}}return a}}]),n}(me),ye=function(){function e(){l(this,e)}return c(e,null,[{key:"setGridSampler",value:function(t){e.gridSampler=t}},{key:"getInstance",value:function(){return e.gridSampler}}]),e}();ye.gridSampler=new ge;var be=function(){function e(t,n){l(this,e),this.x=t,this.y=n}return c(e,[{key:"toResultPoint",value:function(){return new de(this.getX(),this.getY())}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}}]),e}(),we=function(){function e(t){l(this,e),this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}return c(e,[{key:"detect",value:function(){return this.detectMirror(!1)}},{key:"detectMirror",value:function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var r=n[0];n[0]=n[2],n[2]=r}this.extractParameters(n);var a=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new fe(a,i,this.compact,this.nbDataBlocks,this.nbLayers)}},{key:"extractParameters",value:function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new j;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var r=0,a=0;a<4;a++){var i=n[(this.shift+a)%4];this.compact?(r<<=7,r+=i>>1&127):(r<<=10,r+=(i>>2&992)+(i>>1&31))}var o=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(o>>6),this.nbDataBlocks=1+(63&o)):(this.nbLayers=1+(o>>11),this.nbDataBlocks=1+(2047&o))}},{key:"getRotation",value:function(e,t){var n=0;e.forEach((function(e,r,a){n=(e>>t-2<<1)+(1&e)+(n<<3)})),n=((1&n)<<11)+(n>>1);for(var r=0;r<4;r++)if(A.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new j}},{key:"getCorrectedParameterData",value:function(e,t){var n,r;t?(n=7,r=2):(n=10,r=4);for(var a=n-r,i=new Int32Array(n),o=n-1;o>=0;--o)i[o]=15&e,e>>=4;try{new se(re.AZTEC_PARAM).decode(i,a)}catch(l){throw new j}for(var s=0,u=0;u<r;u++)s=(s<<4)+i[u];return s}},{key:"getBullsEyeCorners",value:function(e){var t=e,n=e,r=e,a=e,i=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(t,i,1,-1),s=this.getFirstDifferent(n,i,1,1),u=this.getFirstDifferent(r,i,-1,1),l=this.getFirstDifferent(a,i,-1,-1);if(this.nbCenterLayers>2){var c=this.distancePoint(l,o)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(c<.75||c>1.25||!this.isWhiteOrBlackRectangle(o,s,u,l))break}t=o,n=s,r=u,a=l,i=!i}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new j;this.compact=5===this.nbCenterLayers;var d=new de(t.getX()+.5,t.getY()-.5),h=new de(n.getX()+.5,n.getY()+.5),f=new de(r.getX()-.5,r.getY()+.5),p=new de(a.getX()-.5,a.getY()-.5);return this.expandSquare([d,h,f,p],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}},{key:"getMatrixCenter",value:function(){var e,t,n,r;try{var a=new pe(this.image).detect();e=a[0],t=a[1],n=a[2],r=a[3]}catch(c){var i=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new be(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new be(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new be(i-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new be(i-7,o-7),!1,-1,-1).toResultPoint()}var s=le.round((e.getX()+r.getX()+t.getX()+n.getX())/4),u=le.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{var l=new pe(this.image,15,s,u).detect();e=l[0],t=l[1],n=l[2],r=l[3]}catch(c){e=this.getFirstDifferent(new be(s+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new be(s+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new be(s-7,u+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new be(s-7,u-7),!1,-1,-1).toResultPoint()}return s=le.round((e.getX()+r.getX()+t.getX()+n.getX())/4),u=le.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new be(s,u)}},{key:"getMatrixCornerPoints",value:function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}},{key:"sampleGrid",value:function(e,t,n,r,a){var i=ye.getInstance(),o=this.getDimension(),s=o/2-this.nbCenterLayers,u=o/2+this.nbCenterLayers;return i.sampleGrid(e,o,o,s,s,u,s,u,u,s,u,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),a.getX(),a.getY())}},{key:"sampleLine",value:function(e,t,n){for(var r=0,a=this.distanceResultPoint(e,t),i=a/n,o=e.getX(),s=e.getY(),u=i*(t.getX()-e.getX())/a,l=i*(t.getY()-e.getY())/a,c=0;c<n;c++)this.image.get(le.round(o+c*u),le.round(s+c*l))&&(r|=1<<n-c-1);return r}},{key:"isWhiteOrBlackRectangle",value:function(e,t,n,r){var a=3;e=new be(e.getX()-a,e.getY()+a),t=new be(t.getX()-a,t.getY()-a),n=new be(n.getX()+a,n.getY()-a),r=new be(r.getX()+a,r.getY()+a);var i=this.getColor(r,e);if(0===i)return!1;var o=this.getColor(e,t);return o===i&&(o=this.getColor(t,n))===i&&(o=this.getColor(n,r))===i}},{key:"getColor",value:function(e,t){for(var n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,a=(t.getY()-e.getY())/n,i=0,o=e.getX(),s=e.getY(),u=this.image.get(e.getX(),e.getY()),l=Math.ceil(n),c=0;c<l;c++)o+=r,s+=a,this.image.get(le.round(o),le.round(s))!==u&&i++;var d=i/n;return d>.1&&d<.9?0:d<=.1===u?1:-1}},{key:"getFirstDifferent",value:function(e,t,n,r){for(var a=e.getX()+n,i=e.getY()+r;this.isValid(a,i)&&this.image.get(a,i)===t;)a+=n,i+=r;for(a-=n,i-=r;this.isValid(a,i)&&this.image.get(a,i)===t;)a+=n;for(a-=n;this.isValid(a,i)&&this.image.get(a,i)===t;)i+=r;return new be(a,i-=r)}},{key:"expandSquare",value:function(e,t,n){var r=n/(2*t),a=e[0].getX()-e[2].getX(),i=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,s=(e[0].getY()+e[2].getY())/2,u=new de(o+r*a,s+r*i),l=new de(o-r*a,s-r*i);return a=e[1].getX()-e[3].getX(),i=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,s=(e[1].getY()+e[3].getY())/2,[u,new de(o+r*a,s+r*i),l,new de(o-r*a,s-r*i)]}},{key:"isValid",value:function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}},{key:"isValidPoint",value:function(e){var t=le.round(e.getX()),n=le.round(e.getY());return this.isValid(t,n)}},{key:"distancePoint",value:function(e,t){return le.distance(e.getX(),e.getY(),t.getX(),t.getY())}},{key:"distanceResultPoint",value:function(e,t){return le.distance(e.getX(),e.getY(),t.getX(),t.getY())}},{key:"getDimension",value:function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(A.truncDivision(this.nbLayers-4,8)+1)+15}}]),e}(),xe=function(){function e(){l(this,e)}return c(e,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null,r=new we(e.getBlackMatrix()),a=null,i=null;try{var o=r.detectMirror(!1);a=o.getPoints(),this.reportFoundResultPoints(t,a),i=(new ue).decode(o)}catch(d){n=d}if(null==i)try{var s=r.detectMirror(!0);a=s.getPoints(),this.reportFoundResultPoints(t,a),i=(new ue).decode(s)}catch(d){if(null!=n)throw n;throw d}var u=new q(i.getText(),i.getRawBytes(),i.getNumBits(),a,Q.AZTEC,C.currentTimeMillis()),l=i.getByteSegments();null!=l&&u.putMetadata(J.BYTE_SEGMENTS,l);var c=i.getECLevel();return null!=c&&u.putMetadata(J.ERROR_CORRECTION_LEVEL,c),u}},{key:"reportFoundResultPoints",value:function(e,t){if(null!=e){var n=e.get(N.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach((function(e,t,r){n.foundPossibleResultPoint(e)}))}}},{key:"reset",value:function(){}}]),e}(),ke=function(e){d(n,e);var t=h(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return l(this,n),t.call(this,new xe,e)}return c(n)}(Y),Ce=function(){function e(){l(this,e)}return c(e,[{key:"decode",value:function(e,t){try{return this.doDecode(e,t)}catch(l){if(t&&!0===t.get(N.TRY_HARDER)&&e.isRotateSupported()){var n=e.rotateCounterClockwise(),r=this.doDecode(n,t),a=r.getResultMetadata(),i=270;null!==a&&!0===a.get(J.ORIENTATION)&&(i+=a.get(J.ORIENTATION)%360),r.putMetadata(J.ORIENTATION,i);var o=r.getResultPoints();if(null!==o)for(var s=n.getHeight(),u=0;u<o.length;u++)o[u]=new de(s-o[u].getY()-1,o[u].getX());return r}throw new j}}},{key:"reset",value:function(){}},{key:"doDecode",value:function(e,t){var n,r=this,a=e.getWidth(),i=e.getHeight(),o=new T(a),s=t&&!0===t.get(N.TRY_HARDER),u=Math.max(1,i>>(s?8:5));n=s?i:15;for(var l=Math.trunc(i/2),c=0;c<n;c++){var d=Math.trunc((c+1)/2),h=l+u*(0===(1&c)?d:-d);if(h<0||h>=i)break;try{o=e.getBlackRow(h,o)}catch(v){continue}for(var f=function(){if(1===p&&(o.reverse(),t&&!0===t.get(N.NEED_RESULT_POINT_CALLBACK))){var e=new Map;t.forEach((function(t,n){return e.set(n,t)})),e.delete(N.NEED_RESULT_POINT_CALLBACK),t=e}try{var n=r.decodeRow(h,o,t);if(1===p){n.putMetadata(J.ORIENTATION,180);var i=n.getResultPoints();null!==i&&(i[0]=new de(a-i[0].getX()-1,i[0].getY()),i[1]=new de(a-i[1].getX()-1,i[1].getY()))}return{v:n}}catch(s){}},p=0;p<2;p++){var m=f();if("object"===typeof m)return m.v}}throw new j}}],[{key:"recordPattern",value:function(e,t,n){for(var r=n.length,a=0;a<r;a++)n[a]=0;var i=e.getSize();if(t>=i)throw new j;for(var o=!e.get(t),s=0,u=t;u<i;){if(e.get(u)!==o)n[s]++;else{if(++s===r)break;n[s]=1,o=!o}u++}if(s!==r&&(s!==r-1||u!==i))throw new j}},{key:"recordPatternInReverse",value:function(t,n,r){for(var a=r.length,i=t.get(n);n>0&&a>=0;)t.get(--n)!==i&&(a--,i=!i);if(a>=0)throw new j;e.recordPattern(t,n+1,r)}},{key:"patternMatchVariance",value:function(e,t,n){for(var r=e.length,a=0,i=0,o=0;o<r;o++)a+=e[o],i+=t[o];if(a<i)return Number.POSITIVE_INFINITY;var s=a/i;n*=s;for(var u=0,l=0;l<r;l++){var c=e[l],d=t[l]*s,h=c>d?c-d:d-c;if(h>n)return Number.POSITIVE_INFINITY;u+=h}return u/a}}]),e}(),Ee=function(e){d(n,e);var t=h(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,[{key:"decodeRow",value:function(e,t,r){var a,i=r&&!0===r.get(N.ASSUME_GS1),o=n.findStartPattern(t),s=o[2],u=0,l=new Uint8Array(20);switch(l[u++]=s,s){case n.CODE_START_A:a=n.CODE_CODE_A;break;case n.CODE_START_B:a=n.CODE_CODE_B;break;case n.CODE_START_C:a=n.CODE_CODE_C;break;default:throw new D}for(var c=!1,d=!1,h="",f=o[0],p=o[1],m=Int32Array.from([0,0,0,0,0,0]),v=0,g=0,y=s,b=0,w=!0,k=!1,C=!1;!c;){var E=d;switch(d=!1,v=g,g=n.decodeCode(t,m,p),l[u++]=g,g!==n.CODE_STOP&&(w=!0),g!==n.CODE_STOP&&(y+=++b*g),f=p,p+=m.reduce((function(e,t){return e+t}),0),g){case n.CODE_START_A:case n.CODE_START_B:case n.CODE_START_C:throw new D}switch(a){case n.CODE_CODE_A:if(g<64)h+=C===k?String.fromCharCode(" ".charCodeAt(0)+g):String.fromCharCode(" ".charCodeAt(0)+g+128),C=!1;else if(g<96)h+=C===k?String.fromCharCode(g-64):String.fromCharCode(g+64),C=!1;else switch(g!==n.CODE_STOP&&(w=!1),g){case n.CODE_FNC_1:i&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case n.CODE_FNC_2:case n.CODE_FNC_3:break;case n.CODE_FNC_4_A:!k&&C?(k=!0,C=!1):k&&C?(k=!1,C=!1):C=!0;break;case n.CODE_SHIFT:d=!0,a=n.CODE_CODE_B;break;case n.CODE_CODE_B:a=n.CODE_CODE_B;break;case n.CODE_CODE_C:a=n.CODE_CODE_C;break;case n.CODE_STOP:c=!0}break;case n.CODE_CODE_B:if(g<96)h+=C===k?String.fromCharCode(" ".charCodeAt(0)+g):String.fromCharCode(" ".charCodeAt(0)+g+128),C=!1;else switch(g!==n.CODE_STOP&&(w=!1),g){case n.CODE_FNC_1:i&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case n.CODE_FNC_2:case n.CODE_FNC_3:break;case n.CODE_FNC_4_B:!k&&C?(k=!0,C=!1):k&&C?(k=!1,C=!1):C=!0;break;case n.CODE_SHIFT:d=!0,a=n.CODE_CODE_A;break;case n.CODE_CODE_A:a=n.CODE_CODE_A;break;case n.CODE_CODE_C:a=n.CODE_CODE_C;break;case n.CODE_STOP:c=!0}break;case n.CODE_CODE_C:if(g<100)g<10&&(h+="0"),h+=g;else switch(g!==n.CODE_STOP&&(w=!1),g){case n.CODE_FNC_1:i&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case n.CODE_CODE_A:a=n.CODE_CODE_A;break;case n.CODE_CODE_B:a=n.CODE_CODE_B;break;case n.CODE_STOP:c=!0}}E&&(a=a===n.CODE_CODE_A?n.CODE_CODE_B:n.CODE_CODE_A)}var S=p-f;if(p=t.getNextUnset(p),!t.isRange(p,Math.min(t.getSize(),p+(p-f)/2),!1))throw new j;if((y-=b*v)%103!==v)throw new x;var _=h.length;if(0===_)throw new j;_>0&&w&&(h=a===n.CODE_CODE_C?h.substring(0,_-2):h.substring(0,_-1));for(var A=(o[1]+o[0])/2,I=f+S/2,T=l.length,R=new Uint8Array(T),M=0;M<T;M++)R[M]=l[M];var O=[new de(A,e),new de(I,e)];return new q(h,R,0,O,Q.CODE_128,(new Date).getTime())}}],[{key:"findStartPattern",value:function(e){for(var t=e.getSize(),r=e.getNextSet(0),a=0,i=Int32Array.from([0,0,0,0,0,0]),o=r,s=!1,u=6,l=r;l<t;l++)if(e.get(l)!==s)i[a]++;else{if(a===u-1){for(var c=n.MAX_AVG_VARIANCE,d=-1,h=n.CODE_START_A;h<=n.CODE_START_C;h++){var f=Ce.patternMatchVariance(i,n.CODE_PATTERNS[h],n.MAX_INDIVIDUAL_VARIANCE);f<c&&(c=f,d=h)}if(d>=0&&e.isRange(Math.max(0,o-(l-o)/2),o,!1))return Int32Array.from([o,l,d]);o+=i[0]+i[1],(i=i.slice(2,i.length-1))[a-1]=0,i[a]=0,a--}else a++;i[a]=1,s=!s}throw new j}},{key:"decodeCode",value:function(e,t,r){Ce.recordPattern(e,r,t);for(var a=n.MAX_AVG_VARIANCE,i=-1,o=0;o<n.CODE_PATTERNS.length;o++){var s=n.CODE_PATTERNS[o],u=this.patternMatchVariance(t,s,n.MAX_INDIVIDUAL_VARIANCE);u<a&&(a=u,i=o)}if(i>=0)return i;throw new j}}]),n}(Ce);Ee.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ee.MAX_AVG_VARIANCE=.25,Ee.MAX_INDIVIDUAL_VARIANCE=.7,Ee.CODE_SHIFT=98,Ee.CODE_CODE_C=99,Ee.CODE_CODE_B=100,Ee.CODE_CODE_A=101,Ee.CODE_FNC_1=102,Ee.CODE_FNC_2=97,Ee.CODE_FNC_3=96,Ee.CODE_FNC_4_A=101,Ee.CODE_FNC_4_B=100,Ee.CODE_START_A=103,Ee.CODE_START_B=104,Ee.CODE_START_C=105,Ee.CODE_STOP=106;var Se=function(e){d(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l(this,n),(e=t.call(this)).usingCheckDigit=r,e.extendedMode=a,e.decodeRowResult="",e.counters=new Int32Array(9),e}return c(n,[{key:"decodeRow",value:function(e,t,r){var a=this.counters;a.fill(0),this.decodeRowResult="";var i,o,s=n.findAsteriskPattern(t,a),l=t.getNextSet(s[1]),c=t.getSize();do{n.recordPattern(t,l,a);var d=n.toNarrowWidePattern(a);if(d<0)throw new j;i=n.patternToChar(d),this.decodeRowResult+=i,o=l;var h,f=u(a);try{for(f.s();!(h=f.n()).done;)l+=h.value}catch(E){f.e(E)}finally{f.f()}l=t.getNextSet(l)}while("*"!==i);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var p,m,v=0,g=u(a);try{for(g.s();!(p=g.n()).done;)v+=p.value}catch(E){g.e(E)}finally{g.f()}if(l!==c&&2*(l-o-v)<v)throw new j;if(this.usingCheckDigit){for(var y=this.decodeRowResult.length-1,b=0,w=0;w<y;w++)b+=n.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(w));if(this.decodeRowResult.charAt(y)!==n.ALPHABET_STRING.charAt(b%43))throw new x;this.decodeRowResult=this.decodeRowResult.substring(0,y)}if(0===this.decodeRowResult.length)throw new j;m=this.extendedMode?n.decodeExtended(this.decodeRowResult):this.decodeRowResult;var k=(s[1]+s[0])/2,C=o+v/2;return new q(m,null,0,[new de(k,e),new de(C,e)],Q.CODE_39,(new Date).getTime())}}],[{key:"findAsteriskPattern",value:function(e,t){for(var r=e.getSize(),a=e.getNextSet(0),i=0,o=a,s=!1,u=t.length,l=a;l<r;l++)if(e.get(l)!==s)t[i]++;else{if(i===u-1){if(this.toNarrowWidePattern(t)===n.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((l-o)/2)),o,!1))return[o,l];o+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,s=!s}throw new j}},{key:"toNarrowWidePattern",value:function(e){var t,n=e.length,r=0;do{var a,i=2147483647,o=u(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;s<i&&s>r&&(i=s)}}catch(m){o.e(m)}finally{o.f()}r=i,t=0;for(var l=0,c=0,d=0;d<n;d++){var h=e[d];h>r&&(c|=1<<n-1-d,t++,l+=h)}if(3===t){for(var f=0;f<n&&t>0;f++){var p=e[f];if(p>r&&(t--,2*p>=l))return-1}return c}}while(t>3);return-1}},{key:"patternToChar",value:function(e){for(var t=0;t<n.CHARACTER_ENCODINGS.length;t++)if(n.CHARACTER_ENCODINGS[t]===e)return n.ALPHABET_STRING.charAt(t);if(e===n.ASTERISK_ENCODING)return"*";throw new j}},{key:"decodeExtended",value:function(e){for(var t=e.length,n="",r=0;r<t;r++){var a=e.charAt(r);if("+"===a||"$"===a||"%"===a||"/"===a){var i=e.charAt(r+1),o="\0";switch(a){case"+":if(!(i>="A"&&i<="Z"))throw new D;o=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new D;o=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")o=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")o=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")o=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)o="\0";else if("V"===i)o="@";else if("W"===i)o="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new D;o="\x7f"}break;case"/":if(i>="A"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new D;o=":"}}n+=o,r++}else n+=a}return n}}]),n}(Ce);Se.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Se.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Se.ASTERISK_ENCODING=148;var _e=function(e){d(n,e);var t=h(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).narrowLineWidth=-1,e}return c(n,[{key:"decodeRow",value:function(e,t,r){var a=this.decodeStart(t),i=this.decodeEnd(t),o=new L;n.decodeMiddle(t,a[1],i[0],o);var s=o.toString(),l=null;null!=r&&(l=r.get(N.ALLOWED_LENGTHS)),null==l&&(l=n.DEFAULT_ALLOWED_LENGTHS);var c,d=s.length,h=!1,f=0,p=u(l);try{for(p.s();!(c=p.n()).done;){var m=c.value;if(d===m){h=!0;break}m>f&&(f=m)}}catch(g){p.e(g)}finally{p.f()}if(!h&&d>f&&(h=!0),!h)throw new D;var v=[new de(a[1],e),new de(i[0],e)];return new q(s,null,0,v,Q.ITF,(new Date).getTime())}},{key:"decodeStart",value:function(e){var t=n.skipWhiteSpace(e),r=n.findGuardPattern(e,t,n.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(e,r[0]),r}},{key:"validateQuietZone",value:function(e,t){var n=10*this.narrowLineWidth;n=n<t?n:t;for(var r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(0!==n)throw new j}},{key:"decodeEnd",value:function(e){e.reverse();try{var t,r=n.skipWhiteSpace(e);try{t=n.findGuardPattern(e,r,n.END_PATTERN_REVERSED[0])}catch(i){i instanceof j&&(t=n.findGuardPattern(e,r,n.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,t[0]);var a=t[0];return t[0]=e.getSize()-t[1],t[1]=e.getSize()-a,t}finally{e.reverse()}}}],[{key:"decodeMiddle",value:function(e,t,r,a){var i=new Int32Array(10),o=new Int32Array(5),s=new Int32Array(5);for(i.fill(0),o.fill(0),s.fill(0);t<r;){Ce.recordPattern(e,t,i);for(var u=0;u<5;u++){var l=2*u;o[u]=i[l],s[u]=i[l+1]}var c=n.decodeDigit(o);a.append(c.toString()),c=this.decodeDigit(s),a.append(c.toString()),i.forEach((function(e){t+=e}))}}},{key:"skipWhiteSpace",value:function(e){var t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new j;return n}},{key:"findGuardPattern",value:function(e,t,r){var a=r.length,i=new Int32Array(a),o=e.getSize(),s=!1,u=0,l=t;i.fill(0);for(var c=t;c<o;c++)if(e.get(c)!==s)i[u]++;else{if(u===a-1){if(Ce.patternMatchVariance(i,r,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return[l,c];l+=i[0]+i[1],C.arraycopy(i,2,i,0,u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,s=!s}throw new j}},{key:"decodeDigit",value:function(e){for(var t=n.MAX_AVG_VARIANCE,r=-1,a=n.PATTERNS.length,i=0;i<a;i++){var o=n.PATTERNS[i],s=Ce.patternMatchVariance(e,o,n.MAX_INDIVIDUAL_VARIANCE);s<t?(t=s,r=i):s===t&&(r=-1)}if(r>=0)return r%10;throw new j}}]),n}(Ce);_e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],_e.MAX_AVG_VARIANCE=.38,_e.MAX_INDIVIDUAL_VARIANCE=.5,_e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],_e.START_PATTERN=Int32Array.from([1,1,1,1]),_e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];var Ae=function(e){d(n,e);var t=h(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).decodeRowStringBuffer="",e}return c(n,null,[{key:"findStartGuardPattern",value:function(e){for(var t,r=!1,a=0,i=Int32Array.from([0,0,0]);!r;){i=Int32Array.from([0,0,0]);var o=(t=n.findGuardPattern(e,a,!1,this.START_END_PATTERN,i))[0],s=o-((a=t[1])-o);s>=0&&(r=e.isRange(s,o,!1))}return t}},{key:"checkChecksum",value:function(e){return n.checkStandardUPCEANChecksum(e)}},{key:"checkStandardUPCEANChecksum",value:function(e){var t=e.length;if(0===t)return!1;var r=parseInt(e.charAt(t-1),10);return n.getStandardUPCEANChecksum(e.substring(0,t-1))===r}},{key:"getStandardUPCEANChecksum",value:function(e){for(var t=e.length,n=0,r=t-1;r>=0;r-=2){var a=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(a<0||a>9)throw new D;n+=a}n*=3;for(var i=t-2;i>=0;i-=2){var o=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(o<0||o>9)throw new D;n+=o}return(1e3-n)%10}},{key:"decodeEnd",value:function(e,t){return n.findGuardPattern(e,t,!1,n.START_END_PATTERN,new Int32Array(n.START_END_PATTERN.length).fill(0))}},{key:"findGuardPatternWithoutCounters",value:function(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}},{key:"findGuardPattern",value:function(e,t,r,a,i){for(var o=e.getSize(),s=0,u=t=r?e.getNextUnset(t):e.getNextSet(t),l=a.length,c=r,d=t;d<o;d++)if(e.get(d)!==c)i[s]++;else{if(s===l-1){if(Ce.patternMatchVariance(i,a,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return Int32Array.from([u,d]);u+=i[0]+i[1];for(var h=i.slice(2,i.length-1),f=0;f<s-1;f++)i[f]=h[f];i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,c=!c}throw new j}},{key:"decodeDigit",value:function(e,t,r,a){this.recordPattern(e,r,t);for(var i=this.MAX_AVG_VARIANCE,o=-1,s=a.length,u=0;u<s;u++){var l=a[u],c=Ce.patternMatchVariance(t,l,n.MAX_INDIVIDUAL_VARIANCE);c<i&&(i=c,o=u)}if(o>=0)return o;throw new j}}]),n}(Ce);Ae.MAX_AVG_VARIANCE=.48,Ae.MAX_INDIVIDUAL_VARIANCE=.7,Ae.START_END_PATTERN=Int32Array.from([1,1,1]),Ae.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ae.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ae.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];var Ie=function(){function e(){l(this,e),this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return c(e,[{key:"decodeRow",value:function(t,n,r){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(n,r,a),o=a.toString(),s=e.parseExtensionString(o),u=[new de((r[0]+r[1])/2,t),new de(i,t)],l=new q(o,null,0,u,Q.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&l.putAllMetadata(s),l}},{key:"decodeMiddle",value:function(t,n,r){var a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var i=t.getSize(),o=n[1],s=0,l=0;l<5&&o<i;l++){var c=Ae.decodeDigit(t,a,o,Ae.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+c%10);var d,h=u(a);try{for(h.s();!(d=h.n()).done;)o+=d.value}catch(p){h.e(p)}finally{h.f()}c>=10&&(s|=1<<4-l),4!==l&&(o=t.getNextSet(o),o=t.getNextUnset(o))}if(5!==r.length)throw new j;var f=this.determineCheckDigit(s);if(e.extensionChecksum(r.toString())!==f)throw new j;return o}},{key:"determineCheckDigit",value:function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new j}}],[{key:"extensionChecksum",value:function(e){for(var t=e.length,n=0,r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(var a=t-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-"0".charCodeAt(0);return(n*=3)%10}},{key:"parseExtensionString",value:function(t){if(5!==t.length)return null;var n=e.parseExtension5String(t);return null==n?null:new Map([[J.SUGGESTED_PRICE,n]])}},{key:"parseExtension5String",value:function(e){var t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}var n=parseInt(e.substring(1)),r=n%100;return t+(n/100).toString()+"."+(r<10?"0"+r:r.toString())}}]),e}(),Te=function(){function e(){l(this,e),this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return c(e,[{key:"decodeRow",value:function(t,n,r){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(n,r,a),o=a.toString(),s=e.parseExtensionString(o),u=[new de((r[0]+r[1])/2,t),new de(i,t)],l=new q(o,null,0,u,Q.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&l.putAllMetadata(s),l}},{key:"decodeMiddle",value:function(e,t,n){var r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;for(var a=e.getSize(),i=t[1],o=0,s=0;s<2&&i<a;s++){var l=Ae.decodeDigit(e,r,i,Ae.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+l%10);var c,d=u(r);try{for(d.s();!(c=d.n()).done;)i+=c.value}catch(h){d.e(h)}finally{d.f()}l>=10&&(o|=1<<1-s),1!==s&&(i=e.getNextSet(i),i=e.getNextUnset(i))}if(2!==n.length)throw new j;if(parseInt(n.toString())%4!==o)throw new j;return i}}],[{key:"parseExtensionString",value:function(e){return 2!==e.length?null:new Map([[J.ISSUE_NUMBER,parseInt(e)]])}}]),e}(),Re=function(){function e(){l(this,e)}return c(e,null,[{key:"decodeRow",value:function(e,t,n){var r=Ae.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Ie).decodeRow(e,t,r)}catch(a){return(new Te).decodeRow(e,t,r)}}}]),e}();Re.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);var Ne=function(e){d(n,e);var t=h(n);function n(){var e;l(this,n),(e=t.call(this)).decodeRowStringBuffer="",n.L_AND_G_PATTERNS=n.L_PATTERNS.map((function(e){return Int32Array.from(e)}));for(var r=10;r<20;r++){for(var a=n.L_PATTERNS[r-10],i=new Int32Array(a.length),o=0;o<a.length;o++)i[o]=a[a.length-o-1];n.L_AND_G_PATTERNS[r]=i}return e}return c(n,[{key:"decodeRow",value:function(e,t,r){var a=n.findStartGuardPattern(t),i=null==r?null:r.get(N.NEED_RESULT_POINT_CALLBACK);if(null!=i){var o=new de((a[0]+a[1])/2,e);i.foundPossibleResultPoint(o)}var s=this.decodeMiddle(t,a,this.decodeRowStringBuffer),u=s.rowOffset,l=s.resultString;if(null!=i){var c=new de(u,e);i.foundPossibleResultPoint(c)}var d=this.decodeEnd(t,u);if(null!=i){var h=new de((d[0]+d[1])/2,e);i.foundPossibleResultPoint(h)}var f=d[1],p=f+(f-d[0]);if(p>=t.getSize()||!t.isRange(f,p,!1))throw new j;var m=l.toString();if(m.length<8)throw new D;if(!n.checkChecksum(m))throw new x;var v=(a[1]+a[0])/2,g=(d[1]+d[0])/2,y=this.getBarcodeFormat(),b=[new de(v,e),new de(g,e)],w=new q(m,null,0,b,y,(new Date).getTime()),k=0;try{var C=Re.decodeRow(e,t,d[1]);w.putMetadata(J.UPC_EAN_EXTENSION,C.getText()),w.putAllMetadata(C.getResultMetadata()),w.addResultPoints(C.getResultPoints()),k=C.getText().length}catch(A){}var E=null==r?null:r.get(N.ALLOWED_EAN_EXTENSIONS);if(null!=E){var S=!1;for(var _ in E)if(k.toString()===_){S=!0;break}if(!S)throw new j}return w}},{key:"decodeEnd",value:function(e,t){return n.findGuardPattern(e,t,!1,n.START_END_PATTERN,new Int32Array(n.START_END_PATTERN.length).fill(0))}}],[{key:"checkChecksum",value:function(e){return n.checkStandardUPCEANChecksum(e)}},{key:"checkStandardUPCEANChecksum",value:function(e){var t=e.length;if(0===t)return!1;var r=parseInt(e.charAt(t-1),10);return n.getStandardUPCEANChecksum(e.substring(0,t-1))===r}},{key:"getStandardUPCEANChecksum",value:function(e){for(var t=e.length,n=0,r=t-1;r>=0;r-=2){var a=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(a<0||a>9)throw new D;n+=a}n*=3;for(var i=t-2;i>=0;i-=2){var o=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(o<0||o>9)throw new D;n+=o}return(1e3-n)%10}}]),n}(Ae),De=function(e){d(n,e);var t=h(n);function n(){var e;return l(this,n),(e=t.call(this)).decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return c(n,[{key:"decodeMiddle",value:function(e,t,r){var a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var i=e.getSize(),o=t[1],s=0,l=0;l<6&&o<i;l++){var c=Ne.decodeDigit(e,a,o,Ne.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+c%10);var d,h=u(a);try{for(h.s();!(d=h.n()).done;)o+=d.value}catch(g){h.e(g)}finally{h.f()}c>=10&&(s|=1<<5-l)}r=n.determineFirstDigit(r,s),o=Ne.findGuardPattern(e,o,!0,Ne.MIDDLE_PATTERN,new Int32Array(Ne.MIDDLE_PATTERN.length).fill(0))[1];for(var f=0;f<6&&o<i;f++){var p=Ne.decodeDigit(e,a,o,Ne.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+p);var m,v=u(a);try{for(v.s();!(m=v.n()).done;)o+=m.value}catch(g){v.e(g)}finally{v.f()}}return{rowOffset:o,resultString:r}}},{key:"getBarcodeFormat",value:function(){return Q.EAN_13}}],[{key:"determineFirstDigit",value:function(e,t){for(var n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode("0".charCodeAt(0)+n)+e;throw new j}}]),n}(Ne);De.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];var Me=function(e){d(n,e);var t=h(n);function n(){var e;return l(this,n),(e=t.call(this)).decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return c(n,[{key:"decodeMiddle",value:function(e,t,n){var r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;for(var a=e.getSize(),i=t[1],o=0;o<4&&i<a;o++){var s=Ne.decodeDigit(e,r,i,Ne.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+s);var l,c=u(r);try{for(c.s();!(l=c.n()).done;)i+=l.value}catch(m){c.e(m)}finally{c.f()}}i=Ne.findGuardPattern(e,i,!0,Ne.MIDDLE_PATTERN,new Int32Array(Ne.MIDDLE_PATTERN.length).fill(0))[1];for(var d=0;d<4&&i<a;d++){var h=Ne.decodeDigit(e,r,i,Ne.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+h);var f,p=u(r);try{for(p.s();!(f=p.n()).done;)i+=f.value}catch(m){p.e(m)}finally{p.f()}}return{rowOffset:i,resultString:n}}},{key:"getBarcodeFormat",value:function(){return Q.EAN_8}}]),n}(Ne),Oe=function(e){d(n,e);var t=h(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).ean13Reader=new De,e}return c(n,[{key:"getBarcodeFormat",value:function(){return Q.UPC_A}},{key:"decode",value:function(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}},{key:"decodeRow",value:function(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}},{key:"decodeMiddle",value:function(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}},{key:"maybeReturnResult",value:function(e){var t=e.getText();if("0"===t.charAt(0)){var n=new q(t.substring(1),null,null,e.getResultPoints(),Q.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new j}},{key:"reset",value:function(){this.ean13Reader.reset()}}]),n}(Ne),Pe=function(e){d(n,e);var t=h(n);function n(){var e;return l(this,n),(e=t.call(this)).decodeMiddleCounters=new Int32Array(4),e}return c(n,[{key:"decodeMiddle",value:function(e,t,r){var a=this.decodeMiddleCounters.map((function(e){return e}));a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var i=e.getSize(),o=t[1],s=0,l=0;l<6&&o<i;l++){var c=n.decodeDigit(e,a,o,n.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+c%10);var d,h=u(a);try{for(h.s();!(d=h.n()).done;)o+=d.value}catch(f){h.e(f)}finally{h.f()}c>=10&&(s|=1<<5-l)}return{rowOffset:o,resultString:n.determineNumSysAndCheckDigit(r,s)}}},{key:"decodeEnd",value:function(e,t){return n.findGuardPatternWithoutCounters(e,t,!0,n.MIDDLE_END_PATTERN)}},{key:"checkChecksum",value:function(e){return Ne.checkChecksum(n.convertUPCEtoUPCA(e))}},{key:"getBarcodeFormat",value:function(){return Q.UPC_E}}],[{key:"determineNumSysAndCheckDigit",value:function(e,t){for(var n=0;n<=1;n++)for(var r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return String.fromCharCode("0".charCodeAt(0)+n)+e+String.fromCharCode("0".charCodeAt(0)+r);throw j.getNotFoundInstance()}},{key:"convertUPCEtoUPCA",value:function(e){var t=e.slice(1,7).split("").map((function(e){return e.charCodeAt(0)})),n=new L;n.append(e.charAt(0));var r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r)}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}]),n}(Ne);Pe.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pe.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];var Fe=function(e){d(r,e);var n=h(r);function r(e){var a;l(this,r),a=n.call(this);var i=null==e?null:e.get(N.POSSIBLE_FORMATS),o=[];return t(i)?(o.push(new De),o.push(new Oe),o.push(new Me),o.push(new Pe)):(i.indexOf(Q.EAN_13)>-1&&o.push(new De),i.indexOf(Q.UPC_A)>-1&&o.push(new Oe),i.indexOf(Q.EAN_8)>-1&&o.push(new Me),i.indexOf(Q.UPC_E)>-1&&o.push(new Pe)),a.readers=o,a}return c(r,[{key:"decodeRow",value:function(e,t,n){var r,a=u(this.readers);try{for(a.s();!(r=a.n()).done;){var i=r.value;try{var o=i.decodeRow(e,t,n),s=o.getBarcodeFormat()===Q.EAN_13&&"0"===o.getText().charAt(0),l=null==n?null:n.get(N.POSSIBLE_FORMATS),c=null==l||l.includes(Q.UPC_A);if(s&&c){var d=o.getRawBytes(),h=new q(o.getText().substring(1),d,d?d.length:null,o.getResultPoints(),Q.UPC_A);return h.putAllMetadata(o.getResultMetadata()),h}return o}catch(f){}}}catch(f){a.e(f)}finally{a.f()}throw new j}},{key:"reset",value:function(){var e,t=u(this.readers);try{for(t.s();!(e=t.n()).done;)e.value.reset()}catch(n){t.e(n)}finally{t.f()}}}]),r}(Ce),Le=function(e){d(n,e);var t=h(n);function n(){var e;return l(this,n),(e=t.call(this)).decodeFinderCounters=new Int32Array(4),e.dataCharacterCounters=new Int32Array(8),e.oddRoundingErrors=new Array(4),e.evenRoundingErrors=new Array(4),e.oddCounts=new Array(e.dataCharacterCounters.length/2),e.evenCounts=new Array(e.dataCharacterCounters.length/2),e}return c(n,[{key:"getDecodeFinderCounters",value:function(){return this.decodeFinderCounters}},{key:"getDataCharacterCounters",value:function(){return this.dataCharacterCounters}},{key:"getOddRoundingErrors",value:function(){return this.oddRoundingErrors}},{key:"getEvenRoundingErrors",value:function(){return this.evenRoundingErrors}},{key:"getOddCounts",value:function(){return this.oddCounts}},{key:"getEvenCounts",value:function(){return this.evenCounts}},{key:"parseFinderValue",value:function(e,t){for(var r=0;r<t.length;r++)if(Ce.patternMatchVariance(e,t[r],n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return r;throw new j}}],[{key:"count",value:function(e){return le.sum(new Int32Array(e))}},{key:"increment",value:function(e,t){for(var n=0,r=t[0],a=1;a<e.length;a++)t[a]>r&&(r=t[a],n=a);e[n]++}},{key:"decrement",value:function(e,t){for(var n=0,r=t[0],a=1;a<e.length;a++)t[a]<r&&(r=t[a],n=a);e[n]--}},{key:"isFinderPattern",value:function(e){var t=e[0]+e[1],r=t/(t+e[2]+e[3]);if(r>=n.MIN_FINDER_PATTERN_RATIO&&r<=n.MAX_FINDER_PATTERN_RATIO){var a,i=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,s=u(e);try{for(s.s();!(a=s.n()).done;){var l=a.value;l>o&&(o=l),l<i&&(i=l)}}catch(c){s.e(c)}finally{s.f()}return o<10*i}return!1}}]),n}(Ce);Le.MAX_AVG_VARIANCE=.2,Le.MAX_INDIVIDUAL_VARIANCE=.45,Le.MIN_FINDER_PATTERN_RATIO=9.5/12,Le.MAX_FINDER_PATTERN_RATIO=12.5/14;var Be=function(){function e(t,n){l(this,e),this.value=t,this.checksumPortion=n}return c(e,[{key:"getValue",value:function(){return this.value}},{key:"getChecksumPortion",value:function(){return this.checksumPortion}},{key:"toString",value:function(){return this.value+"("+this.checksumPortion+")"}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value&&this.checksumPortion===n.checksumPortion}},{key:"hashCode",value:function(){return this.value^this.checksumPortion}}]),e}(),je=function(){function e(t,n,r,a,i){l(this,e),this.value=t,this.startEnd=n,this.value=t,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new de(r,i)),this.resultPoints.push(new de(a,i))}return c(e,[{key:"getValue",value:function(){return this.value}},{key:"getStartEnd",value:function(){return this.startEnd}},{key:"getResultPoints",value:function(){return this.resultPoints}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value}},{key:"hashCode",value:function(){return this.value}}]),e}(),ze=function(){function e(){l(this,e)}return c(e,null,[{key:"getRSSvalue",value:function(t,n,r){var a,i=0,o=u(t);try{for(o.s();!(a=o.n()).done;)i+=a.value}catch(v){o.e(v)}finally{o.f()}for(var s=0,l=0,c=t.length,d=0;d<c-1;d++){var h=void 0;for(h=1,l|=1<<d;h<t[d];h++,l&=~(1<<d)){var f=e.combins(i-h-1,c-d-2);if(r&&0===l&&i-h-(c-d-1)>=c-d-1&&(f-=e.combins(i-h-(c-d),c-d-2)),c-d-1>1){for(var p=0,m=i-h-(c-d-2);m>n;m--)p+=e.combins(i-h-m-1,c-d-3);f-=p*(c-1-d)}else i-h>n&&f--;s+=f}i-=h}return s}},{key:"combins",value:function(e,t){var n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);for(var a=1,i=1,o=e;o>n;o--)a*=o,i<=r&&(a/=i,i++);for(;i<=r;)a/=i,i++;return a}}]),e}(),Ue=function(){function e(){l(this,e)}return c(e,null,[{key:"buildBitArray",value:function(e){var t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);for(var n=new T(12*t),r=0,a=e[0].getRightChar().getValue(),i=11;i>=0;--i)0!=(a&1<<i)&&n.set(r),r++;for(var o=1;o<e.length;++o){for(var s=e[o],u=s.getLeftChar().getValue(),l=11;l>=0;--l)0!=(u&1<<l)&&n.set(r),r++;if(null!=s.getRightChar())for(var c=s.getRightChar().getValue(),d=11;d>=0;--d)0!=(c&1<<d)&&n.set(r),r++}return n}}]),e}(),Ve=function(){function e(t,n){l(this,e),n?this.decodedInformation=null:(this.finished=t,this.decodedInformation=n)}return c(e,[{key:"getDecodedInformation",value:function(){return this.decodedInformation}},{key:"isFinished",value:function(){return this.finished}}]),e}(),We=function(){function e(t){l(this,e),this.newPosition=t}return c(e,[{key:"getNewPosition",value:function(){return this.newPosition}}]),e}(),He=function(e){d(n,e);var t=h(n);function n(e,r){var a;return l(this,n),(a=t.call(this,e)).value=r,a}return c(n,[{key:"getValue",value:function(){return this.value}},{key:"isFNC1",value:function(){return this.value===n.FNC1}}]),n}(We);He.FNC1="$";var Ge=function(e){d(n,e);var t=h(n);function n(e,r,a){var i;return l(this,n),i=t.call(this,e),a?(i.remaining=!0,i.remainingValue=i.remainingValue):(i.remaining=!1,i.remainingValue=0),i.newString=r,i}return c(n,[{key:"getNewString",value:function(){return this.newString}},{key:"isRemaining",value:function(){return this.remaining}},{key:"getRemainingValue",value:function(){return this.remainingValue}}]),n}(We),Ke=function(e){d(n,e);var t=h(n);function n(e,r,a){var i;if(l(this,n),i=t.call(this,e),r<0||r>10||a<0||a>10)throw new D;return i.firstDigit=r,i.secondDigit=a,i}return c(n,[{key:"getFirstDigit",value:function(){return this.firstDigit}},{key:"getSecondDigit",value:function(){return this.secondDigit}},{key:"getValue",value:function(){return 10*this.firstDigit+this.secondDigit}},{key:"isFirstDigitFNC1",value:function(){return this.firstDigit===n.FNC1}},{key:"isSecondDigitFNC1",value:function(){return this.secondDigit===n.FNC1}},{key:"isAnyFNC1",value:function(){return this.firstDigit===n.FNC1||this.secondDigit===n.FNC1}}]),n}(We);Ke.FNC1=10;var Xe=function(){function e(){l(this,e)}return c(e,null,[{key:"parseFieldsInGeneralPurpose",value:function(t){if(!t)return null;if(t.length<2)throw new j;var n,r=t.substring(0,2),a=u(e.TWO_DIGIT_DATA_LENGTH);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i[0]===r)return i[1]===e.VARIABLE_LENGTH?e.processVariableAI(2,i[2],t):e.processFixedAI(2,i[1],t)}}catch(y){a.e(y)}finally{a.f()}if(t.length<3)throw new j;var o,s=t.substring(0,3),l=u(e.THREE_DIGIT_DATA_LENGTH);try{for(l.s();!(o=l.n()).done;){var c=o.value;if(c[0]===s)return c[1]===e.VARIABLE_LENGTH?e.processVariableAI(3,c[2],t):e.processFixedAI(3,c[1],t)}}catch(y){l.e(y)}finally{l.f()}var d,h=u(e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH);try{for(h.s();!(d=h.n()).done;){var f=d.value;if(f[0]===s)return f[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,f[2],t):e.processFixedAI(4,f[1],t)}}catch(y){h.e(y)}finally{h.f()}if(t.length<4)throw new j;var p,m=t.substring(0,4),v=u(e.FOUR_DIGIT_DATA_LENGTH);try{for(v.s();!(p=v.n()).done;){var g=p.value;if(g[0]===m)return g[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,g[2],t):e.processFixedAI(4,g[1],t)}}catch(y){v.e(y)}finally{v.f()}throw new j}},{key:"processFixedAI",value:function(t,n,r){if(r.length<t)throw new j;var a=r.substring(0,t);if(r.length<t+n)throw new j;var i=r.substring(t,t+n),o=r.substring(t+n),s="("+a+")"+i,u=e.parseFieldsInGeneralPurpose(o);return null==u?s:s+u}},{key:"processVariableAI",value:function(t,n,r){var a,i=r.substring(0,t);a=r.length<t+n?r.length:t+n;var o=r.substring(t,a),s=r.substring(a),u="("+i+")"+o,l=e.parseFieldsInGeneralPurpose(s);return null==l?u:u+l}}]),e}();Xe.VARIABLE_LENGTH=[],Xe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Xe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Xe.VARIABLE_LENGTH,20],["22",Xe.VARIABLE_LENGTH,29],["30",Xe.VARIABLE_LENGTH,8],["37",Xe.VARIABLE_LENGTH,8],["90",Xe.VARIABLE_LENGTH,30],["91",Xe.VARIABLE_LENGTH,30],["92",Xe.VARIABLE_LENGTH,30],["93",Xe.VARIABLE_LENGTH,30],["94",Xe.VARIABLE_LENGTH,30],["95",Xe.VARIABLE_LENGTH,30],["96",Xe.VARIABLE_LENGTH,30],["97",Xe.VARIABLE_LENGTH,3],["98",Xe.VARIABLE_LENGTH,30],["99",Xe.VARIABLE_LENGTH,30]],Xe.THREE_DIGIT_DATA_LENGTH=[["240",Xe.VARIABLE_LENGTH,30],["241",Xe.VARIABLE_LENGTH,30],["242",Xe.VARIABLE_LENGTH,6],["250",Xe.VARIABLE_LENGTH,30],["251",Xe.VARIABLE_LENGTH,30],["253",Xe.VARIABLE_LENGTH,17],["254",Xe.VARIABLE_LENGTH,20],["400",Xe.VARIABLE_LENGTH,30],["401",Xe.VARIABLE_LENGTH,30],["402",17],["403",Xe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Xe.VARIABLE_LENGTH,20],["421",Xe.VARIABLE_LENGTH,15],["422",3],["423",Xe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Xe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Xe.VARIABLE_LENGTH,15],["391",Xe.VARIABLE_LENGTH,18],["392",Xe.VARIABLE_LENGTH,15],["393",Xe.VARIABLE_LENGTH,18],["703",Xe.VARIABLE_LENGTH,30]],Xe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Xe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Xe.VARIABLE_LENGTH,20],["8003",Xe.VARIABLE_LENGTH,30],["8004",Xe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Xe.VARIABLE_LENGTH,30],["8008",Xe.VARIABLE_LENGTH,12],["8018",18],["8020",Xe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Xe.VARIABLE_LENGTH,70],["8200",Xe.VARIABLE_LENGTH,70]];var Ye=function(){function e(t){l(this,e),this.buffer=new L,this.information=t}return c(e,[{key:"decodeAllCodes",value:function(e,t){for(var n=t,r=null;;){var a=this.decodeGeneralPurposeField(n,r),i=Xe.parseFieldsInGeneralPurpose(a.getNewString());if(null!=i&&e.append(i),r=a.isRemaining()?""+a.getRemainingValue():null,n===a.getNewPosition())break;n=a.getNewPosition()}return e.toString()}},{key:"isStillNumeric",value:function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}},{key:"decodeNumeric",value:function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return new Ke(this.information.getSize(),0===t?Ke.FNC1:t-1,Ke.FNC1)}var n=this.extractNumericValueFromBitArray(e,7);return new Ke(e+7,(n-8)/11,(n-8)%11)}},{key:"extractNumericValueFromBitArray",value:function(t,n){return e.extractNumericValueFromBitArray(this.information,t,n)}},{key:"decodeGeneralPurposeField",value:function(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return null!=n&&n.isRemaining()?new Ge(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Ge(this.current.getPosition(),this.buffer.toString())}},{key:"parseBlocks",value:function(){var e,t;do{var n=this.current.getPosition();if(e=this.current.isAlpha()?(t=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(t=this.parseIsoIec646Block()).isFinished():(t=this.parseNumericBlock()).isFinished(),n===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()}},{key:"parseNumericBlock",value:function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return t=e.isSecondDigitFNC1()?new Ge(this.current.getPosition(),this.buffer.toString()):new Ge(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Ve(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var n=new Ge(this.current.getPosition(),this.buffer.toString());return new Ve(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ve(!1)}},{key:"parseIsoIec646Block",value:function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Ge(this.current.getPosition(),this.buffer.toString());return new Ve(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ve(!1)}},{key:"parseAlphaBlock",value:function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Ge(this.current.getPosition(),this.buffer.toString());return new Ve(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ve(!1)}},{key:"isStillIsoIec646",value:function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}},{key:"decodeIsoIec646",value:function(e){var t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new He(e+5,He.FNC1);if(t>=5&&t<15)return new He(e+5,"0"+(t-5));var n,r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new He(e+7,""+(r+1));if(r>=90&&r<116)return new He(e+7,""+(r+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:n="!";break;case 233:n='"';break;case 234:n="%";break;case 235:n="&";break;case 236:n="'";break;case 237:n="(";break;case 238:n=")";break;case 239:n="*";break;case 240:n="+";break;case 241:n=",";break;case 242:n="-";break;case 243:n=".";break;case 244:n="/";break;case 245:n=":";break;case 246:n=";";break;case 247:n="<";break;case 248:n="=";break;case 249:n=">";break;case 250:n="?";break;case 251:n="_";break;case 252:n=" ";break;default:throw new D}return new He(e+8,n)}},{key:"isStillAlpha",value:function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}},{key:"decodeAlphanumeric",value:function(e){var t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new He(e+5,He.FNC1);if(t>=5&&t<15)return new He(e+5,"0"+(t-5));var n,r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new He(e+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new ie("Decoding invalid alphanumeric value: "+r)}return new He(e+6,n)}},{key:"isAlphaTo646ToAlphaLatch",value:function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}},{key:"isAlphaOr646ToNumericLatch",value:function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}},{key:"isNumericToAlphaNumericLatch",value:function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}],[{key:"extractNumericValueFromBitArray",value:function(e,t,n){for(var r=0,a=0;a<n;++a)e.get(t+a)&&(r|=1<<n-a-1);return r}}]),e}(),qe=function(){function e(t){l(this,e),this.information=t,this.generalDecoder=new Ye(t)}return c(e,[{key:"getInformation",value:function(){return this.information}},{key:"getGeneralDecoder",value:function(){return this.generalDecoder}}]),e}(),Ze=function(e){d(n,e);var t=h(n);function n(e){return l(this,n),t.call(this,e)}return c(n,[{key:"encodeCompressedGtin",value:function(e,t){e.append("(01)");var n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}},{key:"encodeCompressedGtinWithoutAI",value:function(e,t,r){for(var a=0;a<4;++a){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*a,10);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i)}n.appendCheckDigit(e,r)}}],[{key:"appendCheckDigit",value:function(e,t){for(var n=0,r=0;r<13;r++){var a=e.charAt(r+t).charCodeAt(0)-"0".charCodeAt(0);n+=0===(1&r)?3*a:a}10===(n=10-n%10)&&(n=0),e.append(n)}}]),n}(qe);Ze.GTIN_SIZE=40;var Qe=function(e){d(n,e);var t=h(n);function n(e){return l(this,n),t.call(this,e)}return c(n,[{key:"parseInformation",value:function(){var e=new L;e.append("(01)");var t=e.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(n.HEADER_SIZE,4);return e.append(r),this.encodeCompressedGtinWithoutAI(e,n.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,n.HEADER_SIZE+44)}}]),n}(Ze);Qe.HEADER_SIZE=4;var Je=function(e){d(n,e);var t=h(n);function n(e){return l(this,n),t.call(this,e)}return c(n,[{key:"parseInformation",value:function(){var e=new L;return this.getGeneralDecoder().decodeAllCodes(e,n.HEADER_SIZE)}}]),n}(qe);Je.HEADER_SIZE=5;var $e=function(e){d(n,e);var t=h(n);function n(e){return l(this,n),t.call(this,e)}return c(n,[{key:"encodeCompressedWeight",value:function(e,t,n){var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);for(var a=this.checkWeight(r),i=1e5,o=0;o<5;++o)a/i===0&&e.append("0"),i/=10;e.append(a)}}]),n}(Ze),et=function(e){d(n,e);var t=h(n);function n(e){return l(this,n),t.call(this,e)}return c(n,[{key:"parseInformation",value:function(){if(this.getInformation().getSize()!=n.HEADER_SIZE+$e.GTIN_SIZE+n.WEIGHT_SIZE)throw new j;var e=new L;return this.encodeCompressedGtin(e,n.HEADER_SIZE),this.encodeCompressedWeight(e,n.HEADER_SIZE+$e.GTIN_SIZE,n.WEIGHT_SIZE),e.toString()}}]),n}($e);et.HEADER_SIZE=5,et.WEIGHT_SIZE=15;var tt=function(e){d(n,e);var t=h(n);function n(e){return l(this,n),t.call(this,e)}return c(n,[{key:"addWeightCode",value:function(e,t){e.append("(3103)")}},{key:"checkWeight",value:function(e){return e}}]),n}(et),nt=function(e){d(n,e);var t=h(n);function n(e){return l(this,n),t.call(this,e)}return c(n,[{key:"addWeightCode",value:function(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}},{key:"checkWeight",value:function(e){return e<1e4?e:e-1e4}}]),n}(et),rt=function(e){d(n,e);var t=h(n);function n(e){return l(this,n),t.call(this,e)}return c(n,[{key:"parseInformation",value:function(){if(this.getInformation().getSize()<n.HEADER_SIZE+Ze.GTIN_SIZE)throw new j;var e=new L;this.encodeCompressedGtin(e,n.HEADER_SIZE);var t=this.getGeneralDecoder().extractNumericValueFromBitArray(n.HEADER_SIZE+Ze.GTIN_SIZE,n.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");var r=this.getGeneralDecoder().decodeGeneralPurposeField(n.HEADER_SIZE+Ze.GTIN_SIZE+n.LAST_DIGIT_SIZE,null);return e.append(r.getNewString()),e.toString()}}]),n}(Ze);rt.HEADER_SIZE=8,rt.LAST_DIGIT_SIZE=2;var at=function(e){d(n,e);var t=h(n);function n(e){return l(this,n),t.call(this,e)}return c(n,[{key:"parseInformation",value:function(){if(this.getInformation().getSize()<n.HEADER_SIZE+Ze.GTIN_SIZE)throw new j;var e=new L;this.encodeCompressedGtin(e,n.HEADER_SIZE);var t=this.getGeneralDecoder().extractNumericValueFromBitArray(n.HEADER_SIZE+Ze.GTIN_SIZE,n.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");var r=this.getGeneralDecoder().extractNumericValueFromBitArray(n.HEADER_SIZE+Ze.GTIN_SIZE+n.LAST_DIGIT_SIZE,n.FIRST_THREE_DIGITS_SIZE);r/100==0&&e.append("0"),r/10==0&&e.append("0"),e.append(r);var a=this.getGeneralDecoder().decodeGeneralPurposeField(n.HEADER_SIZE+Ze.GTIN_SIZE+n.LAST_DIGIT_SIZE+n.FIRST_THREE_DIGITS_SIZE,null);return e.append(a.getNewString()),e.toString()}}]),n}(Ze);at.HEADER_SIZE=8,at.LAST_DIGIT_SIZE=2,at.FIRST_THREE_DIGITS_SIZE=10;var it=function(e){d(n,e);var t=h(n);function n(e,r,a){var i;return l(this,n),(i=t.call(this,e)).dateCode=a,i.firstAIdigits=r,i}return c(n,[{key:"parseInformation",value:function(){if(this.getInformation().getSize()!=n.HEADER_SIZE+n.GTIN_SIZE+n.WEIGHT_SIZE+n.DATE_SIZE)throw new j;var e=new L;return this.encodeCompressedGtin(e,n.HEADER_SIZE),this.encodeCompressedWeight(e,n.HEADER_SIZE+n.GTIN_SIZE,n.WEIGHT_SIZE),this.encodeCompressedDate(e,n.HEADER_SIZE+n.GTIN_SIZE+n.WEIGHT_SIZE),e.toString()}},{key:"encodeCompressedDate",value:function(e,t){var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n.DATE_SIZE);if(38400!=r){e.append("("),e.append(this.dateCode),e.append(")");var a=r%32,i=(r/=32)%12+1,o=r/=12;o/10==0&&e.append("0"),e.append(o),i/10==0&&e.append("0"),e.append(i),a/10==0&&e.append("0"),e.append(a)}}},{key:"addWeightCode",value:function(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}},{key:"checkWeight",value:function(e){return e%1e5}}]),n}($e);function ot(e){try{if(e.get(1))return new Qe(e);if(!e.get(2))return new Je(e);switch(Ye.extractNumericValueFromBitArray(e,1,4)){case 4:return new tt(e);case 5:return new nt(e)}switch(Ye.extractNumericValueFromBitArray(e,1,5)){case 12:return new rt(e);case 13:return new at(e)}switch(Ye.extractNumericValueFromBitArray(e,1,7)){case 56:return new it(e,"310","11");case 57:return new it(e,"320","11");case 58:return new it(e,"310","13");case 59:return new it(e,"320","13");case 60:return new it(e,"310","15");case 61:return new it(e,"320","15");case 62:return new it(e,"310","17");case 63:return new it(e,"320","17")}}catch(t){throw console.log(t),new ie("unknown decoder: "+e)}}it.HEADER_SIZE=8,it.WEIGHT_SIZE=20,it.DATE_SIZE=16;var st=function(){function e(t,n,r,a){l(this,e),this.leftchar=t,this.rightchar=n,this.finderpattern=r,this.maybeLast=a}return c(e,[{key:"mayBeLast",value:function(){return this.maybeLast}},{key:"getLeftChar",value:function(){return this.leftchar}},{key:"getRightChar",value:function(){return this.rightchar}},{key:"getFinderPattern",value:function(){return this.finderpattern}},{key:"mustBeLast",value:function(){return null==this.rightchar}},{key:"toString",value:function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}},{key:"hashCode",value:function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}],[{key:"equals",value:function(t,n){return t instanceof e&&e.equalsOrNull(t.leftchar,n.leftchar)&&e.equalsOrNull(t.rightchar,n.rightchar)&&e.equalsOrNull(t.finderpattern,n.finderpattern)}},{key:"equalsOrNull",value:function(t,n){return null===t?null===n:e.equals(t,n)}}]),e}(),ut=function(){function e(t,n,r){l(this,e),this.pairs=t,this.rowNumber=n,this.wasReversed=r}return c(e,[{key:"getPairs",value:function(){return this.pairs}},{key:"getRowNumber",value:function(){return this.rowNumber}},{key:"isReversed",value:function(){return this.wasReversed}},{key:"isEquivalent",value:function(e){return this.checkEqualitity(this,e)}},{key:"toString",value:function(){return"{ "+this.pairs+" }"}},{key:"equals",value:function(t,n){return t instanceof e&&this.checkEqualitity(t,n)&&t.wasReversed===n.wasReversed}},{key:"checkEqualitity",value:function(e,t){var n;if(e&&t)return e.forEach((function(e,r){t.forEach((function(t){e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)}))})),n}}]),e}(),lt=function(e){d(n,e);var t=h(n);function n(e){var r;return l(this,n),(r=t.apply(this,arguments)).pairs=new Array(n.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r.verbose=!0===e,r}return c(n,[{key:"decodeRow",value:function(e,t,r){this.pairs.length=0,this.startFromEven=!1;try{return n.constructResult(this.decodeRow2pairs(e,t))}catch(a){this.verbose&&console.log(a)}return this.pairs.length=0,this.startFromEven=!0,n.constructResult(this.decodeRow2pairs(e,t))}},{key:"reset",value:function(){this.pairs.length=0,this.rows.length=0}},{key:"decodeRow2pairs",value:function(e,t){for(var n,r=!1;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof j){if(!this.pairs.length)throw new j;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){var a=this.checkRowsBoolean(!1);if(null!=a)return a;if(null!=(a=this.checkRowsBoolean(!0)))return a}throw new j}},{key:"checkRowsBoolean",value:function(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());var t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}},{key:"checkRows",value:function(e,t){for(var r=t;r<this.rows.length;r++){var a=this.rows[r];this.pairs.length=0;var i,o=u(e);try{for(o.s();!(i=o.n()).done;){var s=i.value;this.pairs.push(s.getPairs())}}catch(c){o.e(c)}finally{o.f()}if(this.pairs.push(a.getPairs()),n.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var l=new Array(e);l.push(a);try{return this.checkRows(l,r+1)}catch(d){this.verbose&&console.log(d)}}}throw new j}},{key:"storeRow",value:function(e,t){for(var r=0,a=!1,i=!1;r<this.rows.length;){var o=this.rows[r];if(o.getRowNumber()>e){i=o.isEquivalent(this.pairs);break}a=o.isEquivalent(this.pairs),r++}i||a||n.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new ut(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}},{key:"removePartialRows",value:function(e,t){var n,r=u(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.getPairs().length!==e.length){var i,o=u(a.getPairs());try{for(o.s();!(i=o.n()).done;){var s,l=i.value,c=u(e);try{for(c.s();!(s=c.n()).done;){var d=s.value;if(st.equals(l,d))break}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}}}}catch(h){r.e(h)}finally{r.f()}}},{key:"getRows",value:function(){return this.rows}},{key:"checkChecksum",value:function(){var e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null==n)return!1;for(var r=n.getChecksumPortion(),a=2,i=1;i<this.pairs.size();++i){var o=this.pairs.get(i);r+=o.getLeftChar().getChecksumPortion(),a++;var s=o.getRightChar();null!=s&&(r+=s.getChecksumPortion(),a++)}return 211*(a-4)+(r%=211)==t.getValue()}},{key:"retrieveNextPair",value:function(e,t,r){var a,i=t.length%2==0;this.startFromEven&&(i=!i);var o=!0,s=-1;do{this.findNextPair(e,t,s),null==(a=this.parseFoundFinderPattern(e,r,i))?s=n.getNextSecondBar(e,this.startEnd[0]):o=!1}while(o);var u,l=this.decodeDataCharacter(e,a,i,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new j;try{u=this.decodeDataCharacter(e,a,i,!1)}catch(c){u=null,this.verbose&&console.log(c)}return new st(l,u,a,!0)}},{key:"isEmptyPair",value:function(e){return 0===e.length}},{key:"findNextPair",value:function(e,t,r){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var i,o=e.getSize();i=r>=0?r:this.isEmptyPair(t)?0:t[t.length-1].getFinderPattern().getStartEnd()[1];var s=t.length%2!=0;this.startFromEven&&(s=!s);for(var u=!1;i<o&&(u=!e.get(i));)i++;for(var l=0,c=i,d=i;d<o;d++)if(e.get(d)!=u)a[l]++;else{if(3==l){if(s&&n.reverseCounters(a),n.isFinderPattern(a))return this.startEnd[0]=c,void(this.startEnd[1]=d);s&&n.reverseCounters(a),c+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,l--}else l++;a[l]=1,u=!u}throw new j}},{key:"parseFoundFinderPattern",value:function(e,t,r){var a,i,o;if(r){for(var s=this.startEnd[0]-1;s>=0&&!e.get(s);)s--;s++,a=this.startEnd[0]-s,i=s,o=this.startEnd[1]}else i=this.startEnd[0],a=(o=e.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var u,l=this.getDecodeFinderCounters();C.arraycopy(l,0,l,1,l.length-1),l[0]=a;try{u=this.parseFinderValue(l,n.FINDER_PATTERNS)}catch(c){return null}return new je(u,[i,o],i,o,t)}},{key:"decodeDataCharacter",value:function(e,t,r,a){for(var i=this.getDataCharacterCounters(),o=0;o<i.length;o++)i[o]=0;if(a)n.recordPatternInReverse(e,t.getStartEnd()[0],i);else{n.recordPattern(e,t.getStartEnd()[1],i);for(var s=0,u=i.length-1;s<u;s++,u--){var l=i[s];i[s]=i[u],i[u]=l}}var c=17,d=le.sum(new Int32Array(i))/c,h=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(d-h)/h>.3)throw new j;for(var f=this.getOddCounts(),p=this.getEvenCounts(),m=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors(),g=0;g<i.length;g++){var y=1*i[g]/d,b=y+.5;if(b<1){if(y<.3)throw new j;b=1}else if(b>8){if(y>8.7)throw new j;b=8}var w=g/2;0==(1&g)?(f[w]=b,m[w]=y-b):(p[w]=b,v[w]=y-b)}this.adjustOddEvenCounts(c);for(var x=4*t.getValue()+(r?0:2)+(a?0:1)-1,k=0,C=0,E=f.length-1;E>=0;E--){if(n.isNotA1left(t,r,a)){var S=n.WEIGHTS[x][2*E];C+=f[E]*S}k+=f[E]}for(var _=0,A=p.length-1;A>=0;A--)if(n.isNotA1left(t,r,a)){var I=n.WEIGHTS[x][2*A+1];_+=p[A]*I}var T=C+_;if(0!=(1&k)||k>13||k<4)throw new j;var R=(13-k)/2,N=n.SYMBOL_WIDEST[R],D=9-N,M=ze.getRSSvalue(f,N,!0),O=ze.getRSSvalue(p,D,!1),P=n.EVEN_TOTAL_SUBSET[R],F=n.GSUM[R];return new Be(M*P+O+F,T)}},{key:"adjustOddEvenCounts",value:function(e){var t=le.sum(new Int32Array(this.getOddCounts())),r=le.sum(new Int32Array(this.getEvenCounts())),a=!1,i=!1;t>13?i=!0:t<4&&(a=!0);var o=!1,s=!1;r>13?s=!0:r<4&&(o=!0);var u=t+r-e,l=1==(1&t),c=0==(1&r);if(1==u)if(l){if(c)throw new j;i=!0}else{if(!c)throw new j;s=!0}else if(-1==u)if(l){if(c)throw new j;a=!0}else{if(!c)throw new j;o=!0}else{if(0!=u)throw new j;if(l){if(!c)throw new j;t<r?(a=!0,s=!0):(i=!0,o=!0)}else if(c)throw new j}if(a){if(i)throw new j;n.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&n.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(s)throw new j;n.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&n.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}],[{key:"isValidSequence",value:function(e){var t,r=u(n.FINDER_PATTERN_SEQUENCES);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(!(e.length>a.length)){for(var i=!0,o=0;o<e.length;o++)if(e[o].getFinderPattern().getValue()!=a[o]){i=!1;break}if(i)return!0}}}catch(s){r.e(s)}finally{r.f()}return!1}},{key:"isPartialRow",value:function(e,t){var n,r=u(t);try{for(r.s();!(n=r.n()).done;){var a,i=n.value,o=!0,s=u(e);try{for(s.s();!(a=s.n()).done;){var l,c=a.value,d=!1,h=u(i.getPairs());try{for(h.s();!(l=h.n()).done;){var f=l.value;if(c.equals(f)){d=!0;break}}}catch(p){h.e(p)}finally{h.f()}if(!d){o=!1;break}}}catch(p){s.e(p)}finally{s.f()}if(o)return!0}}catch(p){r.e(p)}finally{r.f()}return!1}},{key:"constructResult",value:function(e){var t=ot(Ue.buildBitArray(e)).parseInformation(),n=e[0].getFinderPattern().getResultPoints(),r=e[e.length-1].getFinderPattern().getResultPoints(),a=[n[0],n[1],r[0],r[1]];return new q(t,null,null,a,Q.RSS_EXPANDED,null)}},{key:"getNextSecondBar",value:function(e,t){var n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}},{key:"reverseCounters",value:function(e){for(var t=e.length,n=0;n<t/2;++n){var r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}},{key:"isNotA1left",value:function(e,t,n){return!(0==e.getValue()&&t&&n)}}]),n}(Le);lt.SYMBOL_WIDEST=[7,5,4,3,1],lt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],lt.GSUM=[0,348,1388,2948,3988],lt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],lt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],lt.FINDER_PAT_A=0,lt.FINDER_PAT_B=1,lt.FINDER_PAT_C=2,lt.FINDER_PAT_D=3,lt.FINDER_PAT_E=4,lt.FINDER_PAT_F=5,lt.FINDER_PATTERN_SEQUENCES=[[lt.FINDER_PAT_A,lt.FINDER_PAT_A],[lt.FINDER_PAT_A,lt.FINDER_PAT_B,lt.FINDER_PAT_B],[lt.FINDER_PAT_A,lt.FINDER_PAT_C,lt.FINDER_PAT_B,lt.FINDER_PAT_D],[lt.FINDER_PAT_A,lt.FINDER_PAT_E,lt.FINDER_PAT_B,lt.FINDER_PAT_D,lt.FINDER_PAT_C],[lt.FINDER_PAT_A,lt.FINDER_PAT_E,lt.FINDER_PAT_B,lt.FINDER_PAT_D,lt.FINDER_PAT_D,lt.FINDER_PAT_F],[lt.FINDER_PAT_A,lt.FINDER_PAT_E,lt.FINDER_PAT_B,lt.FINDER_PAT_D,lt.FINDER_PAT_E,lt.FINDER_PAT_F,lt.FINDER_PAT_F],[lt.FINDER_PAT_A,lt.FINDER_PAT_A,lt.FINDER_PAT_B,lt.FINDER_PAT_B,lt.FINDER_PAT_C,lt.FINDER_PAT_C,lt.FINDER_PAT_D,lt.FINDER_PAT_D],[lt.FINDER_PAT_A,lt.FINDER_PAT_A,lt.FINDER_PAT_B,lt.FINDER_PAT_B,lt.FINDER_PAT_C,lt.FINDER_PAT_C,lt.FINDER_PAT_D,lt.FINDER_PAT_E,lt.FINDER_PAT_E],[lt.FINDER_PAT_A,lt.FINDER_PAT_A,lt.FINDER_PAT_B,lt.FINDER_PAT_B,lt.FINDER_PAT_C,lt.FINDER_PAT_C,lt.FINDER_PAT_D,lt.FINDER_PAT_E,lt.FINDER_PAT_F,lt.FINDER_PAT_F],[lt.FINDER_PAT_A,lt.FINDER_PAT_A,lt.FINDER_PAT_B,lt.FINDER_PAT_B,lt.FINDER_PAT_C,lt.FINDER_PAT_D,lt.FINDER_PAT_D,lt.FINDER_PAT_E,lt.FINDER_PAT_E,lt.FINDER_PAT_F,lt.FINDER_PAT_F]],lt.MAX_PAIRS=11;var ct=function(e){d(n,e);var t=h(n);function n(e,r,a){var i;return l(this,n),(i=t.call(this,e,r)).count=0,i.finderPattern=a,i}return c(n,[{key:"getFinderPattern",value:function(){return this.finderPattern}},{key:"getCount",value:function(){return this.count}},{key:"incrementCount",value:function(){this.count++}}]),n}(Be),dt=function(e){d(n,e);var t=h(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).possibleLeftPairs=[],e.possibleRightPairs=[],e}return c(n,[{key:"decodeRow",value:function(e,t,r){var a=this.decodePair(t,!1,e,r);n.addOrTally(this.possibleLeftPairs,a),t.reverse();var i=this.decodePair(t,!0,e,r);n.addOrTally(this.possibleRightPairs,i),t.reverse();var o,s=u(this.possibleLeftPairs);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(l.getCount()>1){var c,d=u(this.possibleRightPairs);try{for(d.s();!(c=d.n()).done;){var h=c.value;if(h.getCount()>1&&n.checkChecksum(l,h))return n.constructResult(l,h)}}catch(f){d.e(f)}finally{d.f()}}}}catch(f){s.e(f)}finally{s.f()}throw new j}},{key:"reset",value:function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}},{key:"decodePair",value:function(e,t,n,r){try{var a=this.findFinderPattern(e,t),i=this.parseFoundFinderPattern(e,n,t,a),o=null==r?null:r.get(N.NEED_RESULT_POINT_CALLBACK);if(null!=o){var s=(a[0]+a[1])/2;t&&(s=e.getSize()-1-s),o.foundPossibleResultPoint(new de(s,n))}var u=this.decodeDataCharacter(e,i,!0),l=this.decodeDataCharacter(e,i,!1);return new ct(1597*u.getValue()+l.getValue(),u.getChecksumPortion()+4*l.getChecksumPortion(),i)}catch(c){return null}}},{key:"decodeDataCharacter",value:function(e,t,r){for(var a=this.getDataCharacterCounters(),i=0;i<a.length;i++)a[i]=0;if(r)Ce.recordPatternInReverse(e,t.getStartEnd()[0],a);else{Ce.recordPattern(e,t.getStartEnd()[1]+1,a);for(var o=0,s=a.length-1;o<s;o++,s--){var u=a[o];a[o]=a[s],a[s]=u}}for(var l=r?16:15,c=le.sum(new Int32Array(a))/l,d=this.getOddCounts(),h=this.getEvenCounts(),f=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors(),m=0;m<a.length;m++){var v=a[m]/c,g=Math.floor(v+.5);g<1?g=1:g>8&&(g=8);var y=Math.floor(m/2);0===(1&m)?(d[y]=g,f[y]=v-g):(h[y]=g,p[y]=v-g)}this.adjustOddEvenCounts(r,l);for(var b=0,w=0,x=d.length-1;x>=0;x--)w*=9,w+=d[x],b+=d[x];for(var k=0,C=0,E=h.length-1;E>=0;E--)k*=9,k+=h[E],C+=h[E];var S=w+3*k;if(r){if(0!==(1&b)||b>12||b<4)throw new j;var _=(12-b)/2,A=n.OUTSIDE_ODD_WIDEST[_],I=9-A,T=ze.getRSSvalue(d,A,!1),R=ze.getRSSvalue(h,I,!0),N=n.OUTSIDE_EVEN_TOTAL_SUBSET[_],D=n.OUTSIDE_GSUM[_];return new Be(T*N+R+D,S)}if(0!==(1&C)||C>10||C<4)throw new j;var M=(10-C)/2,O=n.INSIDE_ODD_WIDEST[M],P=9-O,F=ze.getRSSvalue(d,O,!0),L=ze.getRSSvalue(h,P,!1),B=n.INSIDE_ODD_TOTAL_SUBSET[M],z=n.INSIDE_GSUM[M];return new Be(L*B+F+z,S)}},{key:"findFinderPattern",value:function(e,t){var n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;for(var r=e.getSize(),a=!1,i=0;i<r&&t!==(a=!e.get(i));)i++;for(var o=0,s=i,u=i;u<r;u++)if(e.get(u)!==a)n[o]++;else{if(3===o){if(Le.isFinderPattern(n))return[s,u];s+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,o--}else o++;n[o]=1,a=!a}throw new j}},{key:"parseFoundFinderPattern",value:function(e,t,r,a){for(var i=e.get(a[0]),o=a[0]-1;o>=0&&i!==e.get(o);)o--;o++;var s=a[0]-o,u=this.getDecodeFinderCounters(),l=new Int32Array(u.length);C.arraycopy(u,0,l,1,u.length-1),l[0]=s;var c=this.parseFinderValue(l,n.FINDER_PATTERNS),d=o,h=a[1];return r&&(d=e.getSize()-1-d,h=e.getSize()-1-h),new je(c,[o,a[1]],d,h,t)}},{key:"adjustOddEvenCounts",value:function(e,t){var n=le.sum(new Int32Array(this.getOddCounts())),r=le.sum(new Int32Array(this.getEvenCounts())),a=!1,i=!1,o=!1,s=!1;e?(n>12?i=!0:n<4&&(a=!0),r>12?s=!0:r<4&&(o=!0)):(n>11?i=!0:n<5&&(a=!0),r>10?s=!0:r<4&&(o=!0));var u=n+r-t,l=(1&n)===(e?1:0),c=1===(1&r);if(1===u)if(l){if(c)throw new j;i=!0}else{if(!c)throw new j;s=!0}else if(-1===u)if(l){if(c)throw new j;a=!0}else{if(!c)throw new j;o=!0}else{if(0!==u)throw new j;if(l){if(!c)throw new j;n<r?(a=!0,s=!0):(i=!0,o=!0)}else if(c)throw new j}if(a){if(i)throw new j;Le.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&Le.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(s)throw new j;Le.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&Le.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}],[{key:"addOrTally",value:function(e,t){if(null!=t){var n,r=!1,a=u(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.getValue()===t.getValue()){i.incrementCount(),r=!0;break}}}catch(o){a.e(o)}finally{a.f()}r||e.push(t)}}},{key:"constructResult",value:function(e,t){for(var n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),a=new L,i=13-r.length;i>0;i--)a.append("0");a.append(r);for(var o=0,s=0;s<13;s++){var u=a.charAt(s).charCodeAt(0)-"0".charCodeAt(0);o+=0===(1&s)?3*u:u}10===(o=10-o%10)&&(o=0),a.append(o.toString());var l=e.getFinderPattern().getResultPoints(),c=t.getFinderPattern().getResultPoints();return new q(a.toString(),null,0,[l[0],l[1],c[0],c[1]],Q.RSS_14,(new Date).getTime())}},{key:"checkChecksum",value:function(e,t){var n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}}]),n}(Le);dt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],dt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],dt.OUTSIDE_GSUM=[0,161,961,2015,2715],dt.INSIDE_GSUM=[0,336,1036,1516],dt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],dt.INSIDE_ODD_WIDEST=[2,4,6,8],dt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];var ht=function(e){d(n,e);var t=h(n);function n(e,r){var a;l(this,n),(a=t.call(this)).readers=[],a.verbose=!0===r;var i=e?e.get(N.POSSIBLE_FORMATS):null,o=e&&void 0!==e.get(N.ASSUME_CODE_39_CHECK_DIGIT);return i?((i.includes(Q.EAN_13)||i.includes(Q.UPC_A)||i.includes(Q.EAN_8)||i.includes(Q.UPC_E))&&a.readers.push(new Fe(e)),i.includes(Q.CODE_39)&&a.readers.push(new Se(o)),i.includes(Q.CODE_128)&&a.readers.push(new Ee),i.includes(Q.ITF)&&a.readers.push(new _e),i.includes(Q.RSS_14)&&a.readers.push(new dt),i.includes(Q.RSS_EXPANDED)&&a.readers.push(new lt(a.verbose))):(a.readers.push(new Fe(e)),a.readers.push(new Se),a.readers.push(new Fe(e)),a.readers.push(new Ee),a.readers.push(new _e),a.readers.push(new dt),a.readers.push(new lt(a.verbose))),a}return c(n,[{key:"decodeRow",value:function(e,t,n){for(var r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch(a){}throw new j}},{key:"reset",value:function(){this.readers.forEach((function(e){return e.reset()}))}}]),n}(Ce),ft=function(e){d(n,e);var t=h(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,r=arguments.length>1?arguments[1]:void 0;return l(this,n),t.call(this,new ht(r),e,r)}return c(n)}(Y),pt=function(){function e(t,n,r){l(this,e),this.ecCodewords=t,this.ecBlocks=[n],r&&this.ecBlocks.push(r)}return c(e,[{key:"getECCodewords",value:function(){return this.ecCodewords}},{key:"getECBlocks",value:function(){return this.ecBlocks}}]),e}(),mt=function(){function e(t,n){l(this,e),this.count=t,this.dataCodewords=n}return c(e,[{key:"getCount",value:function(){return this.count}},{key:"getDataCodewords",value:function(){return this.dataCodewords}}]),e}(),vt=function(){function e(t,n,r,a,i,o){l(this,e),this.versionNumber=t,this.symbolSizeRows=n,this.symbolSizeColumns=r,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=i,this.ecBlocks=o;var s,c=0,d=o.getECCodewords(),h=o.getECBlocks(),f=u(h);try{for(f.s();!(s=f.n()).done;){var p=s.value;c+=p.getCount()*(p.getDataCodewords()+d)}}catch(m){f.e(m)}finally{f.f()}this.totalCodewords=c}return c(e,[{key:"getVersionNumber",value:function(){return this.versionNumber}},{key:"getSymbolSizeRows",value:function(){return this.symbolSizeRows}},{key:"getSymbolSizeColumns",value:function(){return this.symbolSizeColumns}},{key:"getDataRegionSizeRows",value:function(){return this.dataRegionSizeRows}},{key:"getDataRegionSizeColumns",value:function(){return this.dataRegionSizeColumns}},{key:"getTotalCodewords",value:function(){return this.totalCodewords}},{key:"getECBlocks",value:function(){return this.ecBlocks}},{key:"toString",value:function(){return""+this.versionNumber}}],[{key:"getVersionForDimensions",value:function(t,n){if(0!==(1&t)||0!==(1&n))throw new D;var r,a=u(e.VERSIONS);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i.symbolSizeRows===t&&i.symbolSizeColumns===n)return i}}catch(o){a.e(o)}finally{a.f()}throw new D}},{key:"buildVersions",value:function(){return[new e(1,10,10,8,8,new pt(5,new mt(1,3))),new e(2,12,12,10,10,new pt(7,new mt(1,5))),new e(3,14,14,12,12,new pt(10,new mt(1,8))),new e(4,16,16,14,14,new pt(12,new mt(1,12))),new e(5,18,18,16,16,new pt(14,new mt(1,18))),new e(6,20,20,18,18,new pt(18,new mt(1,22))),new e(7,22,22,20,20,new pt(20,new mt(1,30))),new e(8,24,24,22,22,new pt(24,new mt(1,36))),new e(9,26,26,24,24,new pt(28,new mt(1,44))),new e(10,32,32,14,14,new pt(36,new mt(1,62))),new e(11,36,36,16,16,new pt(42,new mt(1,86))),new e(12,40,40,18,18,new pt(48,new mt(1,114))),new e(13,44,44,20,20,new pt(56,new mt(1,144))),new e(14,48,48,22,22,new pt(68,new mt(1,174))),new e(15,52,52,24,24,new pt(42,new mt(2,102))),new e(16,64,64,14,14,new pt(56,new mt(2,140))),new e(17,72,72,16,16,new pt(36,new mt(4,92))),new e(18,80,80,18,18,new pt(48,new mt(4,114))),new e(19,88,88,20,20,new pt(56,new mt(4,144))),new e(20,96,96,22,22,new pt(68,new mt(4,174))),new e(21,104,104,24,24,new pt(56,new mt(6,136))),new e(22,120,120,18,18,new pt(68,new mt(6,175))),new e(23,132,132,20,20,new pt(62,new mt(8,163))),new e(24,144,144,22,22,new pt(62,new mt(8,156),new mt(2,155))),new e(25,8,18,6,16,new pt(7,new mt(1,5))),new e(26,8,32,6,14,new pt(11,new mt(1,10))),new e(27,12,26,10,24,new pt(14,new mt(1,16))),new e(28,12,36,10,16,new pt(18,new mt(1,22))),new e(29,16,36,14,16,new pt(24,new mt(1,32))),new e(30,16,48,14,22,new pt(28,new mt(1,49)))]}}]),e}();vt.VERSIONS=vt.buildVersions();var gt,yt=function(){function e(t){l(this,e);var n=t.getHeight();if(n<8||n>144||0!==(1&n))throw new D;this.version=e.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new B(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return c(e,[{key:"getVersion",value:function(){return this.version}},{key:"readCodewords",value:function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,r=0,a=this.mappingBitMatrix.getHeight(),i=this.mappingBitMatrix.getWidth(),o=!1,s=!1,u=!1,l=!1;do{if(n!==a||0!==r||o)if(n!==a-2||0!==r||0===(3&i)||s)if(n!==a+4||2!==r||0!==(7&i)||u)if(n!==a-2||0!==r||4!==(7&i)||l){do{n<a&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,a,i)),n-=2,r+=2}while(n>=0&&r<i);n+=1,r+=3;do{n>=0&&r<i&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,a,i)),n+=2,r-=2}while(n<a&&r>=0);n+=3,r+=1}else e[t++]=255&this.readCorner4(a,i),n-=2,r+=2,l=!0;else e[t++]=255&this.readCorner3(a,i),n-=2,r+=2,u=!0;else e[t++]=255&this.readCorner2(a,i),n-=2,r+=2,s=!0;else e[t++]=255&this.readCorner1(a,i),n-=2,r+=2,o=!0}while(n<a||r<i);if(t!==this.version.getTotalCodewords())throw new D;return e}},{key:"readModule",value:function(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}},{key:"readUtah",value:function(e,t,n,r){var a=0;return this.readModule(e-2,t-2,n,r)&&(a|=1),a<<=1,this.readModule(e-2,t-1,n,r)&&(a|=1),a<<=1,this.readModule(e-1,t-2,n,r)&&(a|=1),a<<=1,this.readModule(e-1,t-1,n,r)&&(a|=1),a<<=1,this.readModule(e-1,t,n,r)&&(a|=1),a<<=1,this.readModule(e,t-2,n,r)&&(a|=1),a<<=1,this.readModule(e,t-1,n,r)&&(a|=1),a<<=1,this.readModule(e,t,n,r)&&(a|=1),a}},{key:"readCorner1",value:function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}},{key:"readCorner2",value:function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}},{key:"readCorner3",value:function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}},{key:"readCorner4",value:function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}},{key:"extractDataRegion",value:function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new b("Dimension of bitMatrix must match the version size");for(var r=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),i=t/r|0,o=n/a|0,s=new B(o*a,i*r),u=0;u<i;++u)for(var l=u*r,c=0;c<o;++c)for(var d=c*a,h=0;h<r;++h)for(var f=u*(r+2)+1+h,p=l+h,m=0;m<a;++m){var v=c*(a+2)+1+m;if(e.get(v,f)){var g=d+m;s.set(g,p)}}return s}}],[{key:"readVersion",value:function(e){var t=e.getHeight(),n=e.getWidth();return vt.getVersionForDimensions(t,n)}}]),e}(),bt=function(){function e(t,n){l(this,e),this.numDataCodewords=t,this.codewords=n}return c(e,[{key:"getNumDataCodewords",value:function(){return this.numDataCodewords}},{key:"getCodewords",value:function(){return this.codewords}}],[{key:"getDataBlocks",value:function(t,n){var r,a=n.getECBlocks(),i=0,o=a.getECBlocks(),s=u(o);try{for(s.s();!(r=s.n()).done;)i+=r.value.getCount()}catch(N){s.e(N)}finally{s.f()}var l,c=new Array(i),d=0,h=u(o);try{for(h.s();!(l=h.n()).done;)for(var f=l.value,p=0;p<f.getCount();p++){var m=f.getDataCodewords(),v=a.getECCodewords()+m;c[d++]=new e(m,new Uint8Array(v))}}catch(N){h.e(N)}finally{h.f()}for(var g=c[0].codewords.length-a.getECCodewords(),y=g-1,w=0,x=0;x<y;x++)for(var k=0;k<d;k++)c[k].codewords[x]=t[w++];for(var C=24===n.getVersionNumber(),E=C?8:d,S=0;S<E;S++)c[S].codewords[g-1]=t[w++];for(var _=c[0].codewords.length,A=g;A<_;A++)for(var I=0;I<d;I++){var T=C?(I+8)%d:I,R=C&&T>7?A-1:A;c[T].codewords[R]=t[w++]}if(w!==t.length)throw new b;return c}}]),e}(),wt=function(){function e(t){l(this,e),this.bytes=t,this.byteOffset=0,this.bitOffset=0}return c(e,[{key:"getBitOffset",value:function(){return this.bitOffset}},{key:"getByteOffset",value:function(){return this.byteOffset}},{key:"readBits",value:function(e){if(e<1||e>32||e>this.available())throw new b(""+e);var t=0,n=this.bitOffset,r=this.byteOffset,a=this.bytes;if(n>0){var i=8-n,o=e<i?e:i,s=i-o,u=255>>8-o<<s;t=(a[r]&u)>>s,e-=o,8===(n+=o)&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|255&a[r],r++,e-=8;if(e>0){var l=8-e,c=255>>l<<l;t=t<<e|(a[r]&c)>>l,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}},{key:"available",value:function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}]),e}();!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(gt||(gt={}));var xt=function(){function e(){l(this,e)}return c(e,null,[{key:"decode",value:function(e){var t=new wt(e),n=new L,r=new L,a=new Array,i=gt.ASCII_ENCODE;do{if(i===gt.ASCII_ENCODE)i=this.decodeAsciiSegment(t,n,r);else{switch(i){case gt.C40_ENCODE:this.decodeC40Segment(t,n);break;case gt.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case gt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case gt.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case gt.BASE256_ENCODE:this.decodeBase256Segment(t,n,a);break;default:throw new D}i=gt.ASCII_ENCODE}}while(i!==gt.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new $(e,n.toString(),0===a.length?null:a,null)}},{key:"decodeAsciiSegment",value:function(e,t,n){var r=!1;do{var a=e.readBits(8);if(0===a)throw new D;if(a<=128)return r&&(a+=128),t.append(String.fromCharCode(a-1)),gt.ASCII_ENCODE;if(129===a)return gt.PAD_ENCODE;if(a<=229){var i=a-130;i<10&&t.append("0"),t.append(""+i)}else switch(a){case 230:return gt.C40_ENCODE;case 231:return gt.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:r=!0;break;case 236:t.append("[)>\x1e05\x1d"),n.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),n.insert(0,"\x1e\x04");break;case 238:return gt.ANSIX12_ENCODE;case 239:return gt.TEXT_ENCODE;case 240:return gt.EDIFACT_ENCODE;default:if(254!==a||0!==e.available())throw new D}}while(e.available()>0);return gt.ASCII_ENCODE}},{key:"decodeC40Segment",value:function(e,t){var n=!1,r=[],a=0;do{if(8===e.available())return;var i=e.readBits(8);if(254===i)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var s=r[o];switch(a){case 0:if(s<3)a=s+1;else{if(!(s<this.C40_BASIC_SET_CHARS.length))throw new D;var u=this.C40_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),a=0;break;case 2:if(s<this.C40_SHIFT2_SET_CHARS.length){var l=this.C40_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):t.append(l)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new D}a=0;break;case 3:n?(t.append(String.fromCharCode(s+224)),n=!1):t.append(String.fromCharCode(s+96)),a=0;break;default:throw new D}}}while(e.available()>0)}},{key:"decodeTextSegment",value:function(e,t){var n=!1,r=[],a=0;do{if(8===e.available())return;var i=e.readBits(8);if(254===i)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var s=r[o];switch(a){case 0:if(s<3)a=s+1;else{if(!(s<this.TEXT_BASIC_SET_CHARS.length))throw new D;var u=this.TEXT_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),a=0;break;case 2:if(s<this.TEXT_SHIFT2_SET_CHARS.length){var l=this.TEXT_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):t.append(l)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new D}a=0;break;case 3:if(!(s<this.TEXT_SHIFT3_SET_CHARS.length))throw new D;var c=this.TEXT_SHIFT3_SET_CHARS[s];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c),a=0;break;default:throw new D}}}while(e.available()>0)}},{key:"decodeAnsiX12Segment",value:function(e,t){var n=[];do{if(8===e.available())return;var r=e.readBits(8);if(254===r)return;this.parseTwoBytes(r,e.readBits(8),n);for(var a=0;a<3;a++){var i=n[a];switch(i){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(i<14)t.append(String.fromCharCode(i+44));else{if(!(i<40))throw new D;t.append(String.fromCharCode(i+51))}}}}while(e.available()>0)}},{key:"parseTwoBytes",value:function(e,t,n){var r=(e<<8)+t-1,a=Math.floor(r/1600);n[0]=a,r-=1600*a,a=Math.floor(r/40),n[1]=a,n[2]=r-40*a}},{key:"decodeEdifactSegment",value:function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var r=e.readBits(6);if(31===r){var a=8-e.getBitOffset();return void(8!==a&&e.readBits(a))}0===(32&r)&&(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)}},{key:"decodeBase256Segment",value:function(e,t,n){var r,a=1+e.getByteOffset(),i=this.unrandomize255State(e.readBits(8),a++);if((r=0===i?e.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(e.readBits(8),a++))<0)throw new D;for(var o=new Uint8Array(r),s=0;s<r;s++){if(e.available()<8)throw new D;o[s]=this.unrandomize255State(e.readBits(8),a++)}n.push(o);try{t.append(P.decode(o,F.ISO88591))}catch(u){throw new ie("Platform does not support required encoding: "+u.message)}}},{key:"unrandomize255State",value:function(e,t){var n=e-(149*t%255+1);return n>=0?n:n+256}}]),e}();xt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],xt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],xt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],xt.TEXT_SHIFT2_SET_CHARS=xt.C40_SHIFT2_SET_CHARS,xt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];var kt=function(){function e(){l(this,e),this.rsDecoder=new se(re.DATA_MATRIX_FIELD_256)}return c(e,[{key:"decode",value:function(e){var t,n=new yt(e),r=n.getVersion(),a=n.readCodewords(),i=bt.getDataBlocks(a,r),o=0,s=u(i);try{for(s.s();!(t=s.n()).done;)o+=t.value.getNumDataCodewords()}catch(v){s.e(v)}finally{s.f()}for(var l=new Uint8Array(o),c=i.length,d=0;d<c;d++){var h=i[d],f=h.getCodewords(),p=h.getNumDataCodewords();this.correctErrors(f,p);for(var m=0;m<p;m++)l[m*c+d]=f[m]}return xt.decode(l)}},{key:"correctErrors",value:function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(a){throw new x}for(var r=0;r<t;r++)e[r]=n[r]}}]),e}(),Ct=function(){function e(t){l(this,e),this.image=t,this.rectangleDetector=new pe(this.image)}return c(e,[{key:"detect",value:function(){var t=this.rectangleDetector.detect(),n=this.detectSolid1(t);if((n=this.detectSolid2(n))[3]=this.correctTopRight(n),!n[3])throw new j;var r=(n=this.shiftToModuleCenter(n))[0],a=n[1],i=n[2],o=n[3],s=this.transitionsBetween(r,o)+1,u=this.transitionsBetween(i,o)+1;1===(1&s)&&(s+=1),1===(1&u)&&(u+=1),4*s<7*u&&4*u<7*s&&(s=u=Math.max(s,u));var l=e.sampleGrid(this.image,r,a,i,o,s,u);return new he(l,[r,a,i,o])}},{key:"detectSolid1",value:function(e){var t=e[0],n=e[1],r=e[3],a=e[2],i=this.transitionsBetween(t,n),o=this.transitionsBetween(n,r),s=this.transitionsBetween(r,a),u=this.transitionsBetween(a,t),l=i,c=[a,t,n,r];return l>o&&(l=o,c[0]=t,c[1]=n,c[2]=r,c[3]=a),l>s&&(l=s,c[0]=n,c[1]=r,c[2]=a,c[3]=t),l>u&&(c[0]=r,c[1]=a,c[2]=t,c[3]=n),c}},{key:"detectSolid2",value:function(t){var n=t[0],r=t[1],a=t[2],i=t[3],o=this.transitionsBetween(n,i),s=e.shiftPoint(r,a,4*(o+1)),u=e.shiftPoint(a,r,4*(o+1));return this.transitionsBetween(s,n)<this.transitionsBetween(u,i)?(t[0]=n,t[1]=r,t[2]=a,t[3]=i):(t[0]=r,t[1]=a,t[2]=i,t[3]=n),t}},{key:"correctTopRight",value:function(t){var n=t[0],r=t[1],a=t[2],i=t[3],o=this.transitionsBetween(n,i),s=this.transitionsBetween(r,i),u=e.shiftPoint(n,r,4*(s+1)),l=e.shiftPoint(a,r,4*(o+1));o=this.transitionsBetween(u,i),s=this.transitionsBetween(l,i);var c=new de(i.getX()+(a.getX()-r.getX())/(o+1),i.getY()+(a.getY()-r.getY())/(o+1)),d=new de(i.getX()+(n.getX()-r.getX())/(s+1),i.getY()+(n.getY()-r.getY())/(s+1));return this.isValid(c)?this.isValid(d)?this.transitionsBetween(u,c)+this.transitionsBetween(l,c)>this.transitionsBetween(u,d)+this.transitionsBetween(l,d)?c:d:c:this.isValid(d)?d:null}},{key:"shiftToModuleCenter",value:function(t){var n=t[0],r=t[1],a=t[2],i=t[3],o=this.transitionsBetween(n,i)+1,s=this.transitionsBetween(a,i)+1,u=e.shiftPoint(n,r,4*s),l=e.shiftPoint(a,r,4*o);1===(1&(o=this.transitionsBetween(u,i)+1))&&(o+=1),1===(1&(s=this.transitionsBetween(l,i)+1))&&(s+=1);var c,d,h=(n.getX()+r.getX()+a.getX()+i.getX())/4,f=(n.getY()+r.getY()+a.getY()+i.getY())/4;return n=e.moveAway(n,h,f),r=e.moveAway(r,h,f),a=e.moveAway(a,h,f),i=e.moveAway(i,h,f),u=e.shiftPoint(n,r,4*s),u=e.shiftPoint(u,i,4*o),c=e.shiftPoint(r,n,4*s),c=e.shiftPoint(c,a,4*o),l=e.shiftPoint(a,i,4*s),l=e.shiftPoint(l,r,4*o),d=e.shiftPoint(i,a,4*s),[u,c,l,d=e.shiftPoint(d,n,4*o)]}},{key:"isValid",value:function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}},{key:"transitionsBetween",value:function(e,t){var n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),a=Math.trunc(t.getX()),i=Math.trunc(t.getY()),o=Math.abs(i-r)>Math.abs(a-n);if(o){var s=n;n=r,r=s,s=a,a=i,i=s}for(var u=Math.abs(a-n),l=Math.abs(i-r),c=-u/2,d=r<i?1:-1,h=n<a?1:-1,f=0,p=this.image.get(o?r:n,o?n:r),m=n,v=r;m!==a;m+=h){var g=this.image.get(o?v:m,o?m:v);if(g!==p&&(f++,p=g),(c+=l)>0){if(v===i)break;v+=d,c-=u}}return f}}],[{key:"shiftPoint",value:function(e,t,n){var r=(t.getX()-e.getX())/(n+1),a=(t.getY()-e.getY())/(n+1);return new de(e.getX()+r,e.getY()+a)}},{key:"moveAway",value:function(e,t,n){var r=e.getX(),a=e.getY();return r<t?r-=1:r+=1,a<n?a-=1:a+=1,new de(r,a)}},{key:"sampleGrid",value:function(e,t,n,r,a,i,o){return ye.getInstance().sampleGrid(e,i,o,.5,.5,i-.5,.5,i-.5,o-.5,.5,o-.5,t.getX(),t.getY(),a.getX(),a.getY(),r.getX(),r.getY(),n.getX(),n.getY())}}]),e}(),Et=function(){function e(){l(this,e),this.decoder=new kt}return c(e,[{key:"decode",value:function(t){var n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=a&&a.has(N.PURE_BARCODE)){var i=e.extractPureBits(t.getBlackMatrix());n=this.decoder.decode(i),r=e.NO_POINTS}else{var o=new Ct(t.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),r=o.getPoints()}var s=n.getRawBytes(),u=new q(n.getText(),s,8*s.length,r,Q.DATA_MATRIX,C.currentTimeMillis()),l=n.getByteSegments();null!=l&&u.putMetadata(J.BYTE_SEGMENTS,l);var c=n.getECLevel();return null!=c&&u.putMetadata(J.ERROR_CORRECTION_LEVEL,c),u}},{key:"reset",value:function(){}}],[{key:"extractPureBits",value:function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new j;var r=this.moduleSize(t,e),a=t[1],i=n[1],o=t[0],s=(n[0]-o+1)/r,u=(i-a+1)/r;if(s<=0||u<=0)throw new j;var l=r/2;a+=l,o+=l;for(var c=new B(s,u),d=0;d<u;d++)for(var h=a+d*r,f=0;f<s;f++)e.get(o+f*r,h)&&c.set(f,d);return c}},{key:"moduleSize",value:function(e,t){for(var n=t.getWidth(),r=e[0],a=e[1];r<n&&t.get(r,a);)r++;if(r===n)throw new j;var i=r-e[0];if(0===i)throw new j;return i}}]),e}();Et.NO_POINTS=[];var St,_t=function(e){d(n,e);var t=h(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return l(this,n),t.call(this,new Et,e)}return c(n)}(Y);!function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(St||(St={}));var At=function(){function e(t,n,r){l(this,e),this.value=t,this.stringValue=n,this.bits=r,e.FOR_BITS.set(r,this),e.FOR_VALUE.set(t,this)}return c(e,[{key:"getValue",value:function(){return this.value}},{key:"getBits",value:function(){return this.bits}},{key:"toString",value:function(){return this.stringValue}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value}}],[{key:"fromString",value:function(t){switch(t){case"L":return e.L;case"M":return e.M;case"Q":return e.Q;case"H":return e.H;default:throw new y(t+"not available")}}},{key:"forBits",value:function(t){if(t<0||t>=e.FOR_BITS.size)throw new b;return e.FOR_BITS.get(t)}}]),e}();At.FOR_BITS=new Map,At.FOR_VALUE=new Map,At.L=new At(St.L,"L",1),At.M=new At(St.M,"M",0),At.Q=new At(St.Q,"Q",3),At.H=new At(St.H,"H",2);var It=function(){function e(t){l(this,e),this.errorCorrectionLevel=At.forBits(t>>3&3),this.dataMask=7&t}return c(e,[{key:"getErrorCorrectionLevel",value:function(){return this.errorCorrectionLevel}},{key:"getDataMask",value:function(){return this.dataMask}},{key:"hashCode",value:function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask}}],[{key:"numBitsDiffering",value:function(e,t){return A.bitCount(e^t)}},{key:"decodeFormatInformation",value:function(t,n){var r=e.doDecodeFormatInformation(t,n);return null!==r?r:e.doDecodeFormatInformation(t^e.FORMAT_INFO_MASK_QR,n^e.FORMAT_INFO_MASK_QR)}},{key:"doDecodeFormatInformation",value:function(t,n){var r,a=Number.MAX_SAFE_INTEGER,i=0,o=u(e.FORMAT_INFO_DECODE_LOOKUP);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=s[0];if(l===t||l===n)return new e(s[1]);var c=e.numBitsDiffering(t,l);c<a&&(i=s[1],a=c),t!==n&&(c=e.numBitsDiffering(n,l))<a&&(i=s[1],a=c)}}catch(d){o.e(d)}finally{o.f()}return a<=3?new e(i):null}}]),e}();It.FORMAT_INFO_MASK_QR=21522,It.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];var Tt,Rt=function(){function e(t){l(this,e),this.ecCodewordsPerBlock=t;for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];this.ecBlocks=r}return c(e,[{key:"getECCodewordsPerBlock",value:function(){return this.ecCodewordsPerBlock}},{key:"getNumBlocks",value:function(){var e,t=0,n=this.ecBlocks,r=u(n);try{for(r.s();!(e=r.n()).done;)t+=e.value.getCount()}catch(a){r.e(a)}finally{r.f()}return t}},{key:"getTotalECCodewords",value:function(){return this.ecCodewordsPerBlock*this.getNumBlocks()}},{key:"getECBlocks",value:function(){return this.ecBlocks}}]),e}(),Nt=function(){function e(t,n){l(this,e),this.count=t,this.dataCodewords=n}return c(e,[{key:"getCount",value:function(){return this.count}},{key:"getDataCodewords",value:function(){return this.dataCodewords}}]),e}(),Dt=function(){function e(t,n){l(this,e),this.versionNumber=t,this.alignmentPatternCenters=n;for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];this.ecBlocks=a;var o,s=0,c=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks(),h=u(d);try{for(h.s();!(o=h.n()).done;){var f=o.value;s+=f.getCount()*(f.getDataCodewords()+c)}}catch(p){h.e(p)}finally{h.f()}this.totalCodewords=s}return c(e,[{key:"getVersionNumber",value:function(){return this.versionNumber}},{key:"getAlignmentPatternCenters",value:function(){return this.alignmentPatternCenters}},{key:"getTotalCodewords",value:function(){return this.totalCodewords}},{key:"getDimensionForVersion",value:function(){return 17+4*this.versionNumber}},{key:"getECBlocksForLevel",value:function(e){return this.ecBlocks[e.getValue()]}},{key:"buildFunctionPattern",value:function(){var e=this.getDimensionForVersion(),t=new B(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,r=0;r<n;r++)for(var a=this.alignmentPatternCenters[r]-2,i=0;i<n;i++)0===r&&(0===i||i===n-1)||r===n-1&&0===i||t.setRegion(this.alignmentPatternCenters[i]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}},{key:"toString",value:function(){return""+this.versionNumber}}],[{key:"getProvisionalVersionForDimension",value:function(e){if(e%4!==1)throw new D;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new D}}},{key:"getVersionForNumber",value:function(t){if(t<1||t>40)throw new b;return e.VERSIONS[t-1]}},{key:"decodeVersionInformation",value:function(t){for(var n=Number.MAX_SAFE_INTEGER,r=0,a=0;a<e.VERSION_DECODE_INFO.length;a++){var i=e.VERSION_DECODE_INFO[a];if(i===t)return e.getVersionForNumber(a+7);var o=It.numBitsDiffering(t,i);o<n&&(r=a+7,n=o)}return n<=3?e.getVersionForNumber(r):null}}]),e}();Dt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Dt.VERSIONS=[new Dt(1,new Int32Array(0),new Rt(7,new Nt(1,19)),new Rt(10,new Nt(1,16)),new Rt(13,new Nt(1,13)),new Rt(17,new Nt(1,9))),new Dt(2,Int32Array.from([6,18]),new Rt(10,new Nt(1,34)),new Rt(16,new Nt(1,28)),new Rt(22,new Nt(1,22)),new Rt(28,new Nt(1,16))),new Dt(3,Int32Array.from([6,22]),new Rt(15,new Nt(1,55)),new Rt(26,new Nt(1,44)),new Rt(18,new Nt(2,17)),new Rt(22,new Nt(2,13))),new Dt(4,Int32Array.from([6,26]),new Rt(20,new Nt(1,80)),new Rt(18,new Nt(2,32)),new Rt(26,new Nt(2,24)),new Rt(16,new Nt(4,9))),new Dt(5,Int32Array.from([6,30]),new Rt(26,new Nt(1,108)),new Rt(24,new Nt(2,43)),new Rt(18,new Nt(2,15),new Nt(2,16)),new Rt(22,new Nt(2,11),new Nt(2,12))),new Dt(6,Int32Array.from([6,34]),new Rt(18,new Nt(2,68)),new Rt(16,new Nt(4,27)),new Rt(24,new Nt(4,19)),new Rt(28,new Nt(4,15))),new Dt(7,Int32Array.from([6,22,38]),new Rt(20,new Nt(2,78)),new Rt(18,new Nt(4,31)),new Rt(18,new Nt(2,14),new Nt(4,15)),new Rt(26,new Nt(4,13),new Nt(1,14))),new Dt(8,Int32Array.from([6,24,42]),new Rt(24,new Nt(2,97)),new Rt(22,new Nt(2,38),new Nt(2,39)),new Rt(22,new Nt(4,18),new Nt(2,19)),new Rt(26,new Nt(4,14),new Nt(2,15))),new Dt(9,Int32Array.from([6,26,46]),new Rt(30,new Nt(2,116)),new Rt(22,new Nt(3,36),new Nt(2,37)),new Rt(20,new Nt(4,16),new Nt(4,17)),new Rt(24,new Nt(4,12),new Nt(4,13))),new Dt(10,Int32Array.from([6,28,50]),new Rt(18,new Nt(2,68),new Nt(2,69)),new Rt(26,new Nt(4,43),new Nt(1,44)),new Rt(24,new Nt(6,19),new Nt(2,20)),new Rt(28,new Nt(6,15),new Nt(2,16))),new Dt(11,Int32Array.from([6,30,54]),new Rt(20,new Nt(4,81)),new Rt(30,new Nt(1,50),new Nt(4,51)),new Rt(28,new Nt(4,22),new Nt(4,23)),new Rt(24,new Nt(3,12),new Nt(8,13))),new Dt(12,Int32Array.from([6,32,58]),new Rt(24,new Nt(2,92),new Nt(2,93)),new Rt(22,new Nt(6,36),new Nt(2,37)),new Rt(26,new Nt(4,20),new Nt(6,21)),new Rt(28,new Nt(7,14),new Nt(4,15))),new Dt(13,Int32Array.from([6,34,62]),new Rt(26,new Nt(4,107)),new Rt(22,new Nt(8,37),new Nt(1,38)),new Rt(24,new Nt(8,20),new Nt(4,21)),new Rt(22,new Nt(12,11),new Nt(4,12))),new Dt(14,Int32Array.from([6,26,46,66]),new Rt(30,new Nt(3,115),new Nt(1,116)),new Rt(24,new Nt(4,40),new Nt(5,41)),new Rt(20,new Nt(11,16),new Nt(5,17)),new Rt(24,new Nt(11,12),new Nt(5,13))),new Dt(15,Int32Array.from([6,26,48,70]),new Rt(22,new Nt(5,87),new Nt(1,88)),new Rt(24,new Nt(5,41),new Nt(5,42)),new Rt(30,new Nt(5,24),new Nt(7,25)),new Rt(24,new Nt(11,12),new Nt(7,13))),new Dt(16,Int32Array.from([6,26,50,74]),new Rt(24,new Nt(5,98),new Nt(1,99)),new Rt(28,new Nt(7,45),new Nt(3,46)),new Rt(24,new Nt(15,19),new Nt(2,20)),new Rt(30,new Nt(3,15),new Nt(13,16))),new Dt(17,Int32Array.from([6,30,54,78]),new Rt(28,new Nt(1,107),new Nt(5,108)),new Rt(28,new Nt(10,46),new Nt(1,47)),new Rt(28,new Nt(1,22),new Nt(15,23)),new Rt(28,new Nt(2,14),new Nt(17,15))),new Dt(18,Int32Array.from([6,30,56,82]),new Rt(30,new Nt(5,120),new Nt(1,121)),new Rt(26,new Nt(9,43),new Nt(4,44)),new Rt(28,new Nt(17,22),new Nt(1,23)),new Rt(28,new Nt(2,14),new Nt(19,15))),new Dt(19,Int32Array.from([6,30,58,86]),new Rt(28,new Nt(3,113),new Nt(4,114)),new Rt(26,new Nt(3,44),new Nt(11,45)),new Rt(26,new Nt(17,21),new Nt(4,22)),new Rt(26,new Nt(9,13),new Nt(16,14))),new Dt(20,Int32Array.from([6,34,62,90]),new Rt(28,new Nt(3,107),new Nt(5,108)),new Rt(26,new Nt(3,41),new Nt(13,42)),new Rt(30,new Nt(15,24),new Nt(5,25)),new Rt(28,new Nt(15,15),new Nt(10,16))),new Dt(21,Int32Array.from([6,28,50,72,94]),new Rt(28,new Nt(4,116),new Nt(4,117)),new Rt(26,new Nt(17,42)),new Rt(28,new Nt(17,22),new Nt(6,23)),new Rt(30,new Nt(19,16),new Nt(6,17))),new Dt(22,Int32Array.from([6,26,50,74,98]),new Rt(28,new Nt(2,111),new Nt(7,112)),new Rt(28,new Nt(17,46)),new Rt(30,new Nt(7,24),new Nt(16,25)),new Rt(24,new Nt(34,13))),new Dt(23,Int32Array.from([6,30,54,78,102]),new Rt(30,new Nt(4,121),new Nt(5,122)),new Rt(28,new Nt(4,47),new Nt(14,48)),new Rt(30,new Nt(11,24),new Nt(14,25)),new Rt(30,new Nt(16,15),new Nt(14,16))),new Dt(24,Int32Array.from([6,28,54,80,106]),new Rt(30,new Nt(6,117),new Nt(4,118)),new Rt(28,new Nt(6,45),new Nt(14,46)),new Rt(30,new Nt(11,24),new Nt(16,25)),new Rt(30,new Nt(30,16),new Nt(2,17))),new Dt(25,Int32Array.from([6,32,58,84,110]),new Rt(26,new Nt(8,106),new Nt(4,107)),new Rt(28,new Nt(8,47),new Nt(13,48)),new Rt(30,new Nt(7,24),new Nt(22,25)),new Rt(30,new Nt(22,15),new Nt(13,16))),new Dt(26,Int32Array.from([6,30,58,86,114]),new Rt(28,new Nt(10,114),new Nt(2,115)),new Rt(28,new Nt(19,46),new Nt(4,47)),new Rt(28,new Nt(28,22),new Nt(6,23)),new Rt(30,new Nt(33,16),new Nt(4,17))),new Dt(27,Int32Array.from([6,34,62,90,118]),new Rt(30,new Nt(8,122),new Nt(4,123)),new Rt(28,new Nt(22,45),new Nt(3,46)),new Rt(30,new Nt(8,23),new Nt(26,24)),new Rt(30,new Nt(12,15),new Nt(28,16))),new Dt(28,Int32Array.from([6,26,50,74,98,122]),new Rt(30,new Nt(3,117),new Nt(10,118)),new Rt(28,new Nt(3,45),new Nt(23,46)),new Rt(30,new Nt(4,24),new Nt(31,25)),new Rt(30,new Nt(11,15),new Nt(31,16))),new Dt(29,Int32Array.from([6,30,54,78,102,126]),new Rt(30,new Nt(7,116),new Nt(7,117)),new Rt(28,new Nt(21,45),new Nt(7,46)),new Rt(30,new Nt(1,23),new Nt(37,24)),new Rt(30,new Nt(19,15),new Nt(26,16))),new Dt(30,Int32Array.from([6,26,52,78,104,130]),new Rt(30,new Nt(5,115),new Nt(10,116)),new Rt(28,new Nt(19,47),new Nt(10,48)),new Rt(30,new Nt(15,24),new Nt(25,25)),new Rt(30,new Nt(23,15),new Nt(25,16))),new Dt(31,Int32Array.from([6,30,56,82,108,134]),new Rt(30,new Nt(13,115),new Nt(3,116)),new Rt(28,new Nt(2,46),new Nt(29,47)),new Rt(30,new Nt(42,24),new Nt(1,25)),new Rt(30,new Nt(23,15),new Nt(28,16))),new Dt(32,Int32Array.from([6,34,60,86,112,138]),new Rt(30,new Nt(17,115)),new Rt(28,new Nt(10,46),new Nt(23,47)),new Rt(30,new Nt(10,24),new Nt(35,25)),new Rt(30,new Nt(19,15),new Nt(35,16))),new Dt(33,Int32Array.from([6,30,58,86,114,142]),new Rt(30,new Nt(17,115),new Nt(1,116)),new Rt(28,new Nt(14,46),new Nt(21,47)),new Rt(30,new Nt(29,24),new Nt(19,25)),new Rt(30,new Nt(11,15),new Nt(46,16))),new Dt(34,Int32Array.from([6,34,62,90,118,146]),new Rt(30,new Nt(13,115),new Nt(6,116)),new Rt(28,new Nt(14,46),new Nt(23,47)),new Rt(30,new Nt(44,24),new Nt(7,25)),new Rt(30,new Nt(59,16),new Nt(1,17))),new Dt(35,Int32Array.from([6,30,54,78,102,126,150]),new Rt(30,new Nt(12,121),new Nt(7,122)),new Rt(28,new Nt(12,47),new Nt(26,48)),new Rt(30,new Nt(39,24),new Nt(14,25)),new Rt(30,new Nt(22,15),new Nt(41,16))),new Dt(36,Int32Array.from([6,24,50,76,102,128,154]),new Rt(30,new Nt(6,121),new Nt(14,122)),new Rt(28,new Nt(6,47),new Nt(34,48)),new Rt(30,new Nt(46,24),new Nt(10,25)),new Rt(30,new Nt(2,15),new Nt(64,16))),new Dt(37,Int32Array.from([6,28,54,80,106,132,158]),new Rt(30,new Nt(17,122),new Nt(4,123)),new Rt(28,new Nt(29,46),new Nt(14,47)),new Rt(30,new Nt(49,24),new Nt(10,25)),new Rt(30,new Nt(24,15),new Nt(46,16))),new Dt(38,Int32Array.from([6,32,58,84,110,136,162]),new Rt(30,new Nt(4,122),new Nt(18,123)),new Rt(28,new Nt(13,46),new Nt(32,47)),new Rt(30,new Nt(48,24),new Nt(14,25)),new Rt(30,new Nt(42,15),new Nt(32,16))),new Dt(39,Int32Array.from([6,26,54,82,110,138,166]),new Rt(30,new Nt(20,117),new Nt(4,118)),new Rt(28,new Nt(40,47),new Nt(7,48)),new Rt(30,new Nt(43,24),new Nt(22,25)),new Rt(30,new Nt(10,15),new Nt(67,16))),new Dt(40,Int32Array.from([6,30,58,86,114,142,170]),new Rt(30,new Nt(19,118),new Nt(6,119)),new Rt(28,new Nt(18,47),new Nt(31,48)),new Rt(30,new Nt(34,24),new Nt(34,25)),new Rt(30,new Nt(20,15),new Nt(61,16)))],function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(Tt||(Tt={}));var Mt=function(){function e(t,n){l(this,e),this.value=t,this.isMasked=n}return c(e,[{key:"unmaskBitMatrix",value:function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}]),e}();Mt.values=new Map([[Tt.DATA_MASK_000,new Mt(Tt.DATA_MASK_000,(function(e,t){return 0===(e+t&1)}))],[Tt.DATA_MASK_001,new Mt(Tt.DATA_MASK_001,(function(e,t){return 0===(1&e)}))],[Tt.DATA_MASK_010,new Mt(Tt.DATA_MASK_010,(function(e,t){return t%3===0}))],[Tt.DATA_MASK_011,new Mt(Tt.DATA_MASK_011,(function(e,t){return(e+t)%3===0}))],[Tt.DATA_MASK_100,new Mt(Tt.DATA_MASK_100,(function(e,t){return 0===(Math.floor(e/2)+Math.floor(t/3)&1)}))],[Tt.DATA_MASK_101,new Mt(Tt.DATA_MASK_101,(function(e,t){return e*t%6===0}))],[Tt.DATA_MASK_110,new Mt(Tt.DATA_MASK_110,(function(e,t){return e*t%6<3}))],[Tt.DATA_MASK_111,new Mt(Tt.DATA_MASK_111,(function(e,t){return 0===(e+t+e*t%3&1)}))]]);var Ot,Pt=function(){function e(t){l(this,e);var n=t.getHeight();if(n<21||1!==(3&n))throw new D;this.bitMatrix=t}return c(e,[{key:"readFormatInformation",value:function(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var r=this.bitMatrix.getHeight(),a=0,i=r-7,o=r-1;o>=i;o--)a=this.copyBit(8,o,a);for(var s=r-8;s<r;s++)a=this.copyBit(s,8,a);if(this.parsedFormatInfo=It.decodeFormatInformation(e,a),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new D}},{key:"readVersion",value:function(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Dt.getVersionForNumber(t);for(var n=0,r=e-11,a=5;a>=0;a--)for(var i=e-9;i>=r;i--)n=this.copyBit(i,a,n);var o=Dt.decodeVersionInformation(n);if(null!==o&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;n=0;for(var s=5;s>=0;s--)for(var u=e-9;u>=r;u--)n=this.copyBit(s,u,n);if(null!==(o=Dt.decodeVersionInformation(n))&&o.getDimensionForVersion()===e)return this.parsedVersion=o,o;throw new D}},{key:"copyBit",value:function(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}},{key:"readCodewords",value:function(){var e=this.readFormatInformation(),t=this.readVersion(),n=Mt.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);for(var a=t.buildFunctionPattern(),i=!0,o=new Uint8Array(t.getTotalCodewords()),s=0,u=0,l=0,c=r-1;c>0;c-=2){6===c&&c--;for(var d=0;d<r;d++)for(var h=i?r-1-d:d,f=0;f<2;f++)a.get(c-f,h)||(l++,u<<=1,this.bitMatrix.get(c-f,h)&&(u|=1),8===l&&(o[s++]=u,l=0,u=0));i=!i}if(s!==t.getTotalCodewords())throw new D;return o}},{key:"remask",value:function(){if(null!==this.parsedFormatInfo){var e=Mt.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}}},{key:"setMirror",value:function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}},{key:"mirror",value:function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var r=t+1,a=e.getHeight();r<a;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}]),e}(),Ft=function(){function e(t,n){l(this,e),this.numDataCodewords=t,this.codewords=n}return c(e,[{key:"getNumDataCodewords",value:function(){return this.numDataCodewords}},{key:"getCodewords",value:function(){return this.codewords}}],[{key:"getDataBlocks",value:function(t,n,r){if(t.length!==n.getTotalCodewords())throw new b;var a,i=n.getECBlocksForLevel(r),o=0,s=i.getECBlocks(),l=u(s);try{for(l.s();!(a=l.n()).done;)o+=a.value.getCount()}catch(R){l.e(R)}finally{l.f()}var c,d=new Array(o),h=0,f=u(s);try{for(f.s();!(c=f.n()).done;)for(var p=c.value,m=0;m<p.getCount();m++){var v=p.getDataCodewords(),g=i.getECCodewordsPerBlock()+v;d[h++]=new e(v,new Uint8Array(g))}}catch(R){f.e(R)}finally{f.f()}for(var y=d[0].codewords.length,w=d.length-1;w>=0&&d[w].codewords.length!==y;)w--;w++;for(var x=y-i.getECCodewordsPerBlock(),k=0,C=0;C<x;C++)for(var E=0;E<h;E++)d[E].codewords[C]=t[k++];for(var S=w;S<h;S++)d[S].codewords[x]=t[k++];for(var _=d[0].codewords.length,A=x;A<_;A++)for(var I=0;I<h;I++){var T=I<w?A:A+1;d[I].codewords[T]=t[k++]}return d}}]),e}();!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(Ot||(Ot={}));var Lt=function(){function e(t,n,r,a){l(this,e),this.value=t,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=a,e.FOR_BITS.set(a,this),e.FOR_VALUE.set(t,this)}return c(e,[{key:"getCharacterCountBits",value:function(e){var t,n=e.getVersionNumber();return t=n<=9?0:n<=26?1:2,this.characterCountBitsForVersions[t]}},{key:"getValue",value:function(){return this.value}},{key:"getBits",value:function(){return this.bits}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value}},{key:"toString",value:function(){return this.stringValue}}],[{key:"forBits",value:function(t){var n=e.FOR_BITS.get(t);if(void 0===n)throw new b;return n}}]),e}();Lt.FOR_BITS=new Map,Lt.FOR_VALUE=new Map,Lt.TERMINATOR=new Lt(Ot.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Lt.NUMERIC=new Lt(Ot.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Lt.ALPHANUMERIC=new Lt(Ot.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Lt.STRUCTURED_APPEND=new Lt(Ot.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Lt.BYTE=new Lt(Ot.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Lt.ECI=new Lt(Ot.ECI,"ECI",Int32Array.from([0,0,0]),7),Lt.KANJI=new Lt(Ot.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Lt.FNC1_FIRST_POSITION=new Lt(Ot.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Lt.FNC1_SECOND_POSITION=new Lt(Ot.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Lt.HANZI=new Lt(Ot.HANZI,"HANZI",Int32Array.from([8,10,12]),13);var Bt=function(){function e(){l(this,e)}return c(e,null,[{key:"decode",value:function(t,n,r,a){var i=new wt(t),o=new L,s=new Array,u=-1,l=-1;try{var c,d=null,h=!1;do{if(i.available()<4)c=Lt.TERMINATOR;else{var f=i.readBits(4);c=Lt.forBits(f)}switch(c){case Lt.TERMINATOR:break;case Lt.FNC1_FIRST_POSITION:case Lt.FNC1_SECOND_POSITION:h=!0;break;case Lt.STRUCTURED_APPEND:if(i.available()<16)throw new D;u=i.readBits(8),l=i.readBits(8);break;case Lt.ECI:var p=e.parseECIValue(i);if(null===(d=M.getCharacterSetECIByValue(p)))throw new D;break;case Lt.HANZI:var m=i.readBits(4),v=i.readBits(c.getCharacterCountBits(n));m===e.GB2312_SUBSET&&e.decodeHanziSegment(i,o,v);break;default:var g=i.readBits(c.getCharacterCountBits(n));switch(c){case Lt.NUMERIC:e.decodeNumericSegment(i,o,g);break;case Lt.ALPHANUMERIC:e.decodeAlphanumericSegment(i,o,g,h);break;case Lt.BYTE:e.decodeByteSegment(i,o,g,d,s,a);break;case Lt.KANJI:e.decodeKanjiSegment(i,o,g);break;default:throw new D}}}while(c!==Lt.TERMINATOR)}catch(y){throw new D}return new $(t,o.toString(),0===s.length?null:s,null===r?null:r.toString(),u,l)}},{key:"decodeHanziSegment",value:function(e,t,n){if(13*n>e.available())throw new D;for(var r=new Uint8Array(2*n),a=0;n>0;){var i=e.readBits(13),o=i/96<<8&4294967295|i%96;o+=o<959?41377:42657,r[a]=o>>8&255,r[a+1]=255&o,a+=2,n--}try{t.append(P.decode(r,F.GB2312))}catch(s){throw new D(s)}}},{key:"decodeKanjiSegment",value:function(e,t,n){if(13*n>e.available())throw new D;for(var r=new Uint8Array(2*n),a=0;n>0;){var i=e.readBits(13),o=i/192<<8&4294967295|i%192;o+=o<7936?33088:49472,r[a]=o>>8,r[a+1]=o,a+=2,n--}try{t.append(P.decode(r,F.SHIFT_JIS))}catch(s){throw new D(s)}}},{key:"decodeByteSegment",value:function(e,t,n,r,a,i){if(8*n>e.available())throw new D;for(var o,s=new Uint8Array(n),u=0;u<n;u++)s[u]=e.readBits(8);o=null===r?F.guessEncoding(s,i):r.getName();try{t.append(P.decode(s,o))}catch(l){throw new D(l)}a.push(s)}},{key:"toAlphaNumericChar",value:function(t){if(t>=e.ALPHANUMERIC_CHARS.length)throw new D;return e.ALPHANUMERIC_CHARS[t]}},{key:"decodeAlphanumericSegment",value:function(t,n,r,a){for(var i=n.length();r>1;){if(t.available()<11)throw new D;var o=t.readBits(11);n.append(e.toAlphaNumericChar(Math.floor(o/45))),n.append(e.toAlphaNumericChar(o%45)),r-=2}if(1===r){if(t.available()<6)throw new D;n.append(e.toAlphaNumericChar(t.readBits(6)))}if(a)for(var s=i;s<n.length();s++)"%"===n.charAt(s)&&(s<n.length()-1&&"%"===n.charAt(s+1)?n.deleteCharAt(s+1):n.setCharAt(s,String.fromCharCode(29)))}},{key:"decodeNumericSegment",value:function(t,n,r){for(;r>=3;){if(t.available()<10)throw new D;var a=t.readBits(10);if(a>=1e3)throw new D;n.append(e.toAlphaNumericChar(Math.floor(a/100))),n.append(e.toAlphaNumericChar(Math.floor(a/10)%10)),n.append(e.toAlphaNumericChar(a%10)),r-=3}if(2===r){if(t.available()<7)throw new D;var i=t.readBits(7);if(i>=100)throw new D;n.append(e.toAlphaNumericChar(Math.floor(i/10))),n.append(e.toAlphaNumericChar(i%10))}else if(1===r){if(t.available()<4)throw new D;var o=t.readBits(4);if(o>=10)throw new D;n.append(e.toAlphaNumericChar(o))}}},{key:"parseECIValue",value:function(e){var t=e.readBits(8);if(0===(128&t))return 127&t;if(128===(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192===(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new D}}]),e}();Bt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Bt.GB2312_SUBSET=1;var jt=function(){function e(t){l(this,e),this.mirrored=t}return c(e,[{key:"isMirrored",value:function(){return this.mirrored}},{key:"applyMirroredCorrection",value:function(e){if(this.mirrored&&null!==e&&!(e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}}}]),e}(),zt=function(){function e(){l(this,e),this.rsDecoder=new se(re.QR_CODE_FIELD_256)}return c(e,[{key:"decodeBooleanArray",value:function(e,t){return this.decodeBitMatrix(B.parseFromBooleanArray(e),t)}},{key:"decodeBitMatrix",value:function(e,t){var n=new Pt(e),r=null;try{return this.decodeBitMatrixParser(n,t)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var a=this.decodeBitMatrixParser(n,t);return a.setOther(new jt(!0)),a}catch(i){if(null!==r)throw r;throw i}}},{key:"decodeBitMatrixParser",value:function(e,t){var n,r=e.readVersion(),a=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),o=Ft.getDataBlocks(i,r,a),s=0,l=u(o);try{for(l.s();!(n=l.n()).done;)s+=n.value.getNumDataCodewords()}catch(y){l.e(y)}finally{l.f()}var c,d=new Uint8Array(s),h=0,f=u(o);try{for(f.s();!(c=f.n()).done;){var p=c.value,m=p.getCodewords(),v=p.getNumDataCodewords();this.correctErrors(m,v);for(var g=0;g<v;g++)d[h++]=m[g]}}catch(y){f.e(y)}finally{f.f()}return Bt.decode(d,r,a,t)}},{key:"correctErrors",value:function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(a){throw new x}for(var r=0;r<t;r++)e[r]=n[r]}}]),e}(),Ut=function(e){d(n,e);var t=h(n);function n(e,r,a){var i;return l(this,n),(i=t.call(this,e,r)).estimatedModuleSize=a,i}return c(n,[{key:"aboutEquals",value:function(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}},{key:"combineEstimate",value:function(e,t,r){return new n((this.getX()+t)/2,(this.getY()+e)/2,(this.estimatedModuleSize+r)/2)}}]),n}(de),Vt=function(){function e(t,n,r,a,i,o,s){l(this,e),this.image=t,this.startX=n,this.startY=r,this.width=a,this.height=i,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return c(e,[{key:"find",value:function(){for(var e=this.startX,t=this.height,n=e+this.width,r=this.startY+t/2,a=new Int32Array(3),i=this.image,o=0;o<t;o++){var s=r+(0===(1&o)?Math.floor((o+1)/2):-Math.floor((o+1)/2));a[0]=0,a[1]=0,a[2]=0;for(var u=e;u<n&&!i.get(u,s);)u++;for(var l=0;u<n;){if(i.get(u,s))if(1===l)a[1]++;else if(2===l){if(this.foundPatternCross(a)){var c=this.handlePossibleCenter(a,s,u);if(null!==c)return c}a[0]=a[2],a[1]=1,a[2]=0,l=1}else a[++l]++;else 1===l&&l++,a[l]++;u++}if(this.foundPatternCross(a)){var d=this.handlePossibleCenter(a,s,n);if(null!==d)return d}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new j}},{key:"foundPatternCross",value:function(e){for(var t=this.moduleSize,n=t/2,r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}},{key:"crossCheckVertical",value:function(t,n,r,a){var i=this.image,o=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var u=t;u>=0&&i.get(n,u)&&s[1]<=r;)s[1]++,u--;if(u<0||s[1]>r)return NaN;for(;u>=0&&!i.get(n,u)&&s[0]<=r;)s[0]++,u--;if(s[0]>r)return NaN;for(u=t+1;u<o&&i.get(n,u)&&s[1]<=r;)s[1]++,u++;if(u===o||s[1]>r)return NaN;for(;u<o&&!i.get(n,u)&&s[2]<=r;)s[2]++,u++;if(s[2]>r)return NaN;var l=s[0]+s[1]+s[2];return 5*Math.abs(l-a)>=2*a?NaN:this.foundPatternCross(s)?e.centerFromEnd(s,u):NaN}},{key:"handlePossibleCenter",value:function(t,n,r){var a=t[0]+t[1]+t[2],i=e.centerFromEnd(t,r),o=this.crossCheckVertical(n,i,2*t[1],a);if(!isNaN(o)){var s,l=(t[0]+t[1]+t[2])/3,c=u(this.possibleCenters);try{for(c.s();!(s=c.n()).done;){var d=s.value;if(d.aboutEquals(l,o,i))return d.combineEstimate(o,i,l)}}catch(f){c.e(f)}finally{c.f()}var h=new Ut(i,o,l);this.possibleCenters.push(h),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(h)}return null}}],[{key:"centerFromEnd",value:function(e,t){return t-e[2]-e[1]/2}}]),e}(),Wt=function(e){d(n,e);var t=h(n);function n(e,r,a,i){var o;return l(this,n),(o=t.call(this,e,r)).estimatedModuleSize=a,o.count=i,void 0===i&&(o.count=1),o}return c(n,[{key:"getEstimatedModuleSize",value:function(){return this.estimatedModuleSize}},{key:"getCount",value:function(){return this.count}},{key:"aboutEquals",value:function(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}},{key:"combineEstimate",value:function(e,t,r){var a=this.count+1;return new n((this.count*this.getX()+t)/a,(this.count*this.getY()+e)/a,(this.count*this.estimatedModuleSize+r)/a,a)}}]),n}(de),Ht=function(){function e(t){l(this,e),this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}return c(e,[{key:"getBottomLeft",value:function(){return this.bottomLeft}},{key:"getTopLeft",value:function(){return this.topLeft}},{key:"getTopRight",value:function(){return this.topRight}}]),e}(),Gt=function(){function e(t,n){l(this,e),this.image=t,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}return c(e,[{key:"getImage",value:function(){return this.image}},{key:"getPossibleCenters",value:function(){return this.possibleCenters}},{key:"find",value:function(t){var n=null!==t&&void 0!==t&&void 0!==t.get(N.TRY_HARDER),r=null!==t&&void 0!==t&&void 0!==t.get(N.PURE_BARCODE),a=this.image,i=a.getHeight(),o=a.getWidth(),s=Math.floor(3*i/(4*e.MAX_MODULES));(s<e.MIN_SKIP||n)&&(s=e.MIN_SKIP);for(var u=!1,l=new Int32Array(5),c=s-1;c<i&&!u;c+=s){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;for(var d=0,h=0;h<o;h++)if(a.get(h,c))1===(1&d)&&d++,l[d]++;else if(0===(1&d))if(4===d)if(e.foundPatternCross(l)){if(!0!==this.handlePossibleCenter(l,c,h,r)){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,d=3;continue}if(s=2,!0===this.hasSkipped)u=this.haveMultiplyConfirmedCenters();else{var f=this.findRowSkip();f>l[2]&&(c+=f-l[2]-s,h=o-1)}d=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,d=3;else l[++d]++;else l[d]++;e.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,c,o,r)&&(s=l[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}var p=this.selectBestPatterns();return de.orderBestPatterns(p),new Ht(p)}},{key:"getCrossCheckStateCount",value:function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}},{key:"crossCheckDiagonal",value:function(t,n,r,a){for(var i=this.getCrossCheckStateCount(),o=0,s=this.image;t>=o&&n>=o&&s.get(n-o,t-o);)i[2]++,o++;if(t<o||n<o)return!1;for(;t>=o&&n>=o&&!s.get(n-o,t-o)&&i[1]<=r;)i[1]++,o++;if(t<o||n<o||i[1]>r)return!1;for(;t>=o&&n>=o&&s.get(n-o,t-o)&&i[0]<=r;)i[0]++,o++;if(i[0]>r)return!1;var u=s.getHeight(),l=s.getWidth();for(o=1;t+o<u&&n+o<l&&s.get(n+o,t+o);)i[2]++,o++;if(t+o>=u||n+o>=l)return!1;for(;t+o<u&&n+o<l&&!s.get(n+o,t+o)&&i[3]<r;)i[3]++,o++;if(t+o>=u||n+o>=l||i[3]>=r)return!1;for(;t+o<u&&n+o<l&&s.get(n+o,t+o)&&i[4]<r;)i[4]++,o++;if(i[4]>=r)return!1;var c=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(c-a)<2*a&&e.foundPatternCross(i)}},{key:"crossCheckVertical",value:function(t,n,r,a){for(var i=this.image,o=i.getHeight(),s=this.getCrossCheckStateCount(),u=t;u>=0&&i.get(n,u);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!i.get(n,u)&&s[1]<=r;)s[1]++,u--;if(u<0||s[1]>r)return NaN;for(;u>=0&&i.get(n,u)&&s[0]<=r;)s[0]++,u--;if(s[0]>r)return NaN;for(u=t+1;u<o&&i.get(n,u);)s[2]++,u++;if(u===o)return NaN;for(;u<o&&!i.get(n,u)&&s[3]<r;)s[3]++,u++;if(u===o||s[3]>=r)return NaN;for(;u<o&&i.get(n,u)&&s[4]<r;)s[4]++,u++;if(s[4]>=r)return NaN;var l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-a)>=2*a?NaN:e.foundPatternCross(s)?e.centerFromEnd(s,u):NaN}},{key:"crossCheckHorizontal",value:function(t,n,r,a){for(var i=this.image,o=i.getWidth(),s=this.getCrossCheckStateCount(),u=t;u>=0&&i.get(u,n);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!i.get(u,n)&&s[1]<=r;)s[1]++,u--;if(u<0||s[1]>r)return NaN;for(;u>=0&&i.get(u,n)&&s[0]<=r;)s[0]++,u--;if(s[0]>r)return NaN;for(u=t+1;u<o&&i.get(u,n);)s[2]++,u++;if(u===o)return NaN;for(;u<o&&!i.get(u,n)&&s[3]<r;)s[3]++,u++;if(u===o||s[3]>=r)return NaN;for(;u<o&&i.get(u,n)&&s[4]<r;)s[4]++,u++;if(s[4]>=r)return NaN;var l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-a)>=a?NaN:e.foundPatternCross(s)?e.centerFromEnd(s,u):NaN}},{key:"handlePossibleCenter",value:function(t,n,r,a){var i=t[0]+t[1]+t[2]+t[3]+t[4],o=e.centerFromEnd(t,r),s=this.crossCheckVertical(n,Math.floor(o),t[2],i);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),t[2],i),!isNaN(o)&&(!a||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),t[2],i)))){for(var u=i/7,l=!1,c=this.possibleCenters,d=0,h=c.length;d<h;d++){var f=c[d];if(f.aboutEquals(u,s,o)){c[d]=f.combineEstimate(s,o,u),l=!0;break}}if(!l){var p=new Wt(o,s,u);c.push(p),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(p)}return!0}return!1}},{key:"findRowSkip",value:function(){if(this.possibleCenters.length<=1)return 0;var t,n=null,r=u(this.possibleCenters);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a.getCount()>=e.CENTER_QUORUM){if(null!=n)return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-a.getX())-Math.abs(n.getY()-a.getY()))/2);n=a}}}catch(i){r.e(i)}finally{r.f()}return 0}},{key:"haveMultiplyConfirmedCenters",value:function(){var t,n=0,r=0,a=this.possibleCenters.length,i=u(this.possibleCenters);try{for(i.s();!(t=i.n()).done;){var o=t.value;o.getCount()>=e.CENTER_QUORUM&&(n++,r+=o.getEstimatedModuleSize())}}catch(f){i.e(f)}finally{i.f()}if(n<3)return!1;var s,l=r/a,c=0,d=u(this.possibleCenters);try{for(d.s();!(s=d.n()).done;){var h=s.value;c+=Math.abs(h.getEstimatedModuleSize()-l)}}catch(f){d.e(f)}finally{d.f()}return c<=.05*r}},{key:"selectBestPatterns",value:function(){var e=this.possibleCenters.length;if(e<3)throw new j;var t,n=this.possibleCenters;if(e>3){var r,a=0,i=0,o=u(this.possibleCenters);try{for(o.s();!(r=o.n()).done;){var s=r.value.getEstimatedModuleSize();a+=s,i+=s*s}}catch(v){o.e(v)}finally{o.f()}t=a/e;var l=Math.sqrt(i/e-t*t);n.sort((function(e,n){var r=Math.abs(n.getEstimatedModuleSize()-t),a=Math.abs(e.getEstimatedModuleSize()-t);return r<a?-1:r>a?1:0}));for(var c=Math.max(.2*t,l),d=0;d<n.length&&n.length>3;d++){var h=n[d];Math.abs(h.getEstimatedModuleSize()-t)>c&&(n.splice(d,1),d--)}}if(n.length>3){var f,p=0,m=u(n);try{for(m.s();!(f=m.n()).done;)p+=f.value.getEstimatedModuleSize()}catch(v){m.e(v)}finally{m.f()}t=p/n.length,n.sort((function(e,n){if(n.getCount()===e.getCount()){var r=Math.abs(n.getEstimatedModuleSize()-t),a=Math.abs(e.getEstimatedModuleSize()-t);return r<a?1:r>a?-1:0}return n.getCount()-e.getCount()})),n.splice(3)}return[n[0],n[1],n[2]]}}],[{key:"centerFromEnd",value:function(e,t){return t-e[4]-e[3]-e[2]/2}},{key:"foundPatternCross",value:function(e){for(var t=0,n=0;n<5;n++){var r=e[n];if(0===r)return!1;t+=r}if(t<7)return!1;var a=t/7,i=a/2;return Math.abs(a-e[0])<i&&Math.abs(a-e[1])<i&&Math.abs(3*a-e[2])<3*i&&Math.abs(a-e[3])<i&&Math.abs(a-e[4])<i}}]),e}();Gt.CENTER_QUORUM=2,Gt.MIN_SKIP=3,Gt.MAX_MODULES=57;var Kt=function(){function e(t){l(this,e),this.image=t}return c(e,[{key:"getImage",value:function(){return this.image}},{key:"getResultPointCallback",value:function(){return this.resultPointCallback}},{key:"detect",value:function(e){this.resultPointCallback=null===e||void 0===e?null:e.get(N.NEED_RESULT_POINT_CALLBACK);var t=new Gt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)}},{key:"processFinderPatternInfo",value:function(t){var n=t.getTopLeft(),r=t.getTopRight(),a=t.getBottomLeft(),i=this.calculateModuleSize(n,r,a);if(i<1)throw new j("No pattern found in proccess finder.");var o=e.computeDimension(n,r,a,i),s=Dt.getProvisionalVersionForDimension(o),u=s.getDimensionForVersion()-7,l=null;if(s.getAlignmentPatternCenters().length>0)for(var c=r.getX()-n.getX()+a.getX(),d=r.getY()-n.getY()+a.getY(),h=1-3/u,f=Math.floor(n.getX()+h*(c-n.getX())),p=Math.floor(n.getY()+h*(d-n.getY())),m=4;m<=16;m<<=1)try{l=this.findAlignmentInRegion(i,f,p,m);break}catch(y){if(!(y instanceof j))throw y}var v=e.createTransform(n,r,a,l,o),g=e.sampleGrid(this.image,v,o);return new he(g,null===l?[a,n,r]:[a,n,r,l])}},{key:"calculateModuleSize",value:function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}},{key:"calculateModuleSizeOneWay",value:function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}},{key:"sizeOfBlackWhiteBlackRunBothWays",value:function(e,t,n,r){var a=this.sizeOfBlackWhiteBlackRun(e,t,n,r),i=1,o=e-(n-e);o<0?(i=e/(e-o),o=0):o>=this.image.getWidth()&&(i=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);var s=Math.floor(t-(r-t)*i);return i=1,s<0?(i=t/(t-s),s=0):s>=this.image.getHeight()&&(i=(this.image.getHeight()-1-t)/(s-t),s=this.image.getHeight()-1),o=Math.floor(e+(o-e)*i),(a+=this.sizeOfBlackWhiteBlackRun(e,t,o,s))-1}},{key:"sizeOfBlackWhiteBlackRun",value:function(e,t,n,r){var a=Math.abs(r-t)>Math.abs(n-e);if(a){var i=e;e=t,t=i,i=n,n=r,r=i}for(var o=Math.abs(n-e),s=Math.abs(r-t),u=-o/2,l=e<n?1:-1,c=t<r?1:-1,d=0,h=n+l,f=e,p=t;f!==h;f+=l){var m=a?p:f,v=a?f:p;if(1===d===this.image.get(m,v)){if(2===d)return le.distance(f,p,e,t);d++}if((u+=s)>0){if(p===r)break;p+=c,u-=o}}return 2===d?le.distance(n+l,r,e,t):NaN}},{key:"findAlignmentInRegion",value:function(e,t,n,r){var a=Math.floor(r*e),i=Math.max(0,t-a),o=Math.min(this.image.getWidth()-1,t+a);if(o-i<3*e)throw new j("Alignment top exceeds estimated module size.");var s=Math.max(0,n-a),u=Math.min(this.image.getHeight()-1,n+a);if(u-s<3*e)throw new j("Alignment bottom exceeds estimated module size.");return new Vt(this.image,i,s,o-i,u-s,e,this.resultPointCallback).find()}}],[{key:"createTransform",value:function(e,t,n,r,a){var i,o,s,u,l=a-3.5;return null!==r?(i=r.getX(),o=r.getY(),u=s=l-3):(i=t.getX()-e.getX()+n.getX(),o=t.getY()-e.getY()+n.getY(),s=l,u=l),ve.quadrilateralToQuadrilateral(3.5,3.5,l,3.5,s,u,3.5,l,e.getX(),e.getY(),t.getX(),t.getY(),i,o,n.getX(),n.getY())}},{key:"sampleGrid",value:function(e,t,n){return ye.getInstance().sampleGridWithTransform(e,n,n,t)}},{key:"computeDimension",value:function(e,t,n,r){var a=le.round(de.distance(e,t)/r),i=le.round(de.distance(e,n)/r),o=Math.floor((a+i)/2)+7;switch(3&o){case 0:o++;break;case 2:o--;break;case 3:throw new j("Dimensions could be not found.")}return o}}]),e}(),Xt=function(){function e(){l(this,e),this.decoder=new zt}return c(e,[{key:"getDecoder",value:function(){return this.decoder}},{key:"decode",value:function(t,n){var r,a;if(void 0!==n&&null!==n&&void 0!==n.get(N.PURE_BARCODE)){var i=e.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(i,n),a=e.NO_POINTS}else{var o=new Kt(t.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(o.getBits(),n),a=o.getPoints()}r.getOther()instanceof jt&&r.getOther().applyMirroredCorrection(a);var s=new q(r.getText(),r.getRawBytes(),void 0,a,Q.QR_CODE,void 0),u=r.getByteSegments();null!==u&&s.putMetadata(J.BYTE_SEGMENTS,u);var l=r.getECLevel();return null!==l&&s.putMetadata(J.ERROR_CORRECTION_LEVEL,l),r.hasStructuredAppend()&&(s.putMetadata(J.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),s.putMetadata(J.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),s}},{key:"reset",value:function(){}}],[{key:"extractPureBits",value:function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new j;var r=this.moduleSize(t,e),a=t[1],i=n[1],o=t[0],s=n[0];if(o>=s||a>=i)throw new j;if(i-a!==s-o&&(s=o+(i-a))>=e.getWidth())throw new j;var u=Math.round((s-o+1)/r),l=Math.round((i-a+1)/r);if(u<=0||l<=0)throw new j;if(l!==u)throw new j;var c=Math.floor(r/2);a+=c;var d=(o+=c)+Math.floor((u-1)*r)-s;if(d>0){if(d>c)throw new j;o-=d}var h=a+Math.floor((l-1)*r)-i;if(h>0){if(h>c)throw new j;a-=h}for(var f=new B(u,l),p=0;p<l;p++)for(var m=a+Math.floor(p*r),v=0;v<u;v++)e.get(o+Math.floor(v*r),m)&&f.set(v,p);return f}},{key:"moduleSize",value:function(e,t){for(var n=t.getHeight(),r=t.getWidth(),a=e[0],i=e[1],o=!0,s=0;a<r&&i<n;){if(o!==t.get(a,i)){if(5===++s)break;o=!o}a++,i++}if(a===r||i===n)throw new j;return(a-e[0])/7}}]),e}();Xt.NO_POINTS=new Array;var Yt=function(){function e(){l(this,e)}return c(e,[{key:"PDF417Common",value:function(){}}],[{key:"getBitCountSum",value:function(e){return le.sum(e)}},{key:"toIntArray",value:function(t){if(null==t||!t.length)return e.EMPTY_INT_ARRAY;var n,r=new Int32Array(t.length),a=0,i=u(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;r[a++]=o}}catch(s){i.e(s)}finally{i.f()}return r}},{key:"getCodeword",value:function(t){var n=_.binarySearch(e.SYMBOL_TABLE,262143&t);return n<0?-1:(e.CODEWORD_TABLE[n]-1)%e.NUMBER_OF_CODEWORDS}}]),e}();Yt.NUMBER_OF_CODEWORDS=929,Yt.MAX_CODEWORDS_IN_BARCODE=Yt.NUMBER_OF_CODEWORDS-1,Yt.MIN_ROWS_IN_BARCODE=3,Yt.MAX_ROWS_IN_BARCODE=90,Yt.MODULES_IN_CODEWORD=17,Yt.MODULES_IN_STOP_PATTERN=18,Yt.BARS_IN_MODULE=8,Yt.EMPTY_INT_ARRAY=new Int32Array([]),Yt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Yt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);var qt=function(){function e(t,n){l(this,e),this.bits=t,this.points=n}return c(e,[{key:"getBits",value:function(){return this.bits}},{key:"getPoints",value:function(){return this.points}}]),e}(),Zt=function(){function e(){l(this,e)}return c(e,null,[{key:"detectMultiple",value:function(t,n,r){var a=t.getBlackMatrix(),i=e.detect(r,a);return i.length||((a=a.clone()).rotate180(),i=e.detect(r,a)),new qt(a,i)}},{key:"detect",value:function(t,n){for(var r=new Array,a=0,i=0,o=!1;a<n.getHeight();){var s=e.findVertices(n,a,i);if(null!=s[0]||null!=s[3]){if(o=!0,r.push(s),!t)break;null!=s[2]?(i=Math.trunc(s[2].getX()),a=Math.trunc(s[2].getY())):(i=Math.trunc(s[4].getX()),a=Math.trunc(s[4].getY()))}else{if(!o)break;o=!1,i=0;var l,c=u(r);try{for(c.s();!(l=c.n()).done;){var d=l.value;null!=d[1]&&(a=Math.trunc(Math.max(a,d[1].getY()))),null!=d[3]&&(a=Math.max(a,Math.trunc(d[3].getY())))}}catch(h){c.e(h)}finally{c.f()}a+=e.ROW_STEP}}return r}},{key:"findVertices",value:function(t,n,r){var a=t.getHeight(),i=t.getWidth(),o=new Array(8);return e.copyToResult(o,e.findRowsWithPattern(t,a,i,n,r,e.START_PATTERN),e.INDEXES_START_PATTERN),null!=o[4]&&(r=Math.trunc(o[4].getX()),n=Math.trunc(o[4].getY())),e.copyToResult(o,e.findRowsWithPattern(t,a,i,n,r,e.STOP_PATTERN),e.INDEXES_STOP_PATTERN),o}},{key:"copyToResult",value:function(e,t,n){for(var r=0;r<n.length;r++)e[n[r]]=t[r]}},{key:"findRowsWithPattern",value:function(t,n,r,a,i,o){for(var s=new Array(4),u=!1,l=new Int32Array(o.length);a<n;a+=e.ROW_STEP){var c=e.findGuardPattern(t,i,a,r,!1,o,l);if(null!=c){for(;a>0;){var d=e.findGuardPattern(t,i,--a,r,!1,o,l);if(null==d){a++;break}c=d}s[0]=new de(c[0],a),s[1]=new de(c[1],a),u=!0;break}}var h=a+1;if(u){for(var f=0,p=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);h<n;h++){var m=e.findGuardPattern(t,p[0],h,r,!1,o,l);if(null!=m&&Math.abs(p[0]-m[0])<e.MAX_PATTERN_DRIFT&&Math.abs(p[1]-m[1])<e.MAX_PATTERN_DRIFT)p=m,f=0;else{if(f>e.SKIPPED_ROW_COUNT_MAX)break;f++}}h-=f+1,s[2]=new de(p[0],h),s[3]=new de(p[1],h)}return h-a<e.BARCODE_MIN_HEIGHT&&_.fill(s,null),s}},{key:"findGuardPattern",value:function(t,n,r,a,i,o,s){_.fillWithin(s,0,s.length,0);for(var u=n,l=0;t.get(u,r)&&u>0&&l++<e.MAX_PIXEL_DRIFT;)u--;for(var c=u,d=0,h=o.length,f=i;c<a;c++)if(t.get(c,r)!==f)s[d]++;else{if(d===h-1){if(e.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return new Int32Array([u,c]);u+=s[0]+s[1],C.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,f=!f}return d===h-1&&e.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE?new Int32Array([u,c-1]):null}},{key:"patternMatchVariance",value:function(e,t,n){for(var r=e.length,a=0,i=0,o=0;o<r;o++)a+=e[o],i+=t[o];if(a<i)return 1/0;var s=a/i;n*=s;for(var u=0,l=0;l<r;l++){var c=e[l],d=t[l]*s,h=c>d?c-d:d-c;if(h>n)return 1/0;u+=h}return u/a}}]),e}();Zt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Zt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Zt.MAX_AVG_VARIANCE=.42,Zt.MAX_INDIVIDUAL_VARIANCE=.8,Zt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Zt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Zt.MAX_PIXEL_DRIFT=3,Zt.MAX_PATTERN_DRIFT=5,Zt.SKIPPED_ROW_COUNT_MAX=25,Zt.ROW_STEP=5,Zt.BARCODE_MIN_HEIGHT=10;var Qt=function(){function e(t,n){if(l(this,e),0===n.length)throw new b;this.field=t;var r=n.length;if(r>1&&0===n[0]){for(var a=1;a<r&&0===n[a];)a++;a===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-a),C.arraycopy(n,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return c(e,[{key:"getCoefficients",value:function(){return this.coefficients}},{key:"getDegree",value:function(){return this.coefficients.length-1}},{key:"isZero",value:function(){return 0===this.coefficients[0]}},{key:"getCoefficient",value:function(e){return this.coefficients[this.coefficients.length-1-e]}},{key:"evaluateAt",value:function(e){if(0===e)return this.getCoefficient(0);if(1===e){var t,n=0,r=u(this.coefficients);try{for(r.s();!(t=r.n()).done;){var a=t.value;n=this.field.add(n,a)}}catch(l){r.e(l)}finally{r.f()}return n}for(var i=this.coefficients[0],o=this.coefficients.length,s=1;s<o;s++)i=this.field.add(this.field.multiply(e,i),this.coefficients[s]);return i}},{key:"add",value:function(t){if(!this.field.equals(t.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var n=this.coefficients,r=t.coefficients;if(n.length>r.length){var a=n;n=r,r=a}var i=new Int32Array(r.length),o=r.length-n.length;C.arraycopy(r,0,i,0,o);for(var s=o;s<r.length;s++)i[s]=this.field.add(n[s-o],r[s]);return new e(this.field,i)}},{key:"subtract",value:function(e){if(!this.field.equals(e.field))throw new b("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}},{key:"multiply",value:function(t){return t instanceof e?this.multiplyOther(t):this.multiplyScalar(t)}},{key:"multiplyOther",value:function(t){if(!this.field.equals(t.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new e(this.field,new Int32Array([0]));for(var n=this.coefficients,r=n.length,a=t.coefficients,i=a.length,o=new Int32Array(r+i-1),s=0;s<r;s++)for(var u=n[s],l=0;l<i;l++)o[s+l]=this.field.add(o[s+l],this.field.multiply(u,a[l]));return new e(this.field,o)}},{key:"negative",value:function(){for(var t=this.coefficients.length,n=new Int32Array(t),r=0;r<t;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new e(this.field,n)}},{key:"multiplyScalar",value:function(t){if(0===t)return new e(this.field,new Int32Array([0]));if(1===t)return this;for(var n=this.coefficients.length,r=new Int32Array(n),a=0;a<n;a++)r[a]=this.field.multiply(this.coefficients[a],t);return new e(this.field,r)}},{key:"multiplyByMonomial",value:function(t,n){if(t<0)throw new b;if(0===n)return new e(this.field,new Int32Array([0]));for(var r=this.coefficients.length,a=new Int32Array(r+t),i=0;i<r;i++)a[i]=this.field.multiply(this.coefficients[i],n);return new e(this.field,a)}},{key:"toString",value:function(){for(var e=new L,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),0!==t&&1===n||e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}]),e}(),Jt=function(e){d(n,e);var t=h(n);function n(e,r){var i;l(this,n),(i=t.call(this)).modulus=e,i.expTable=new Int32Array(e),i.logTable=new Int32Array(e);for(var o=1,s=0;s<e;s++)i.expTable[s]=o,o=o*r%e;for(var u=0;u<e-1;u++)i.logTable[i.expTable[u]]=u;return i.zero=new Qt(a(i),new Int32Array([0])),i.one=new Qt(a(i),new Int32Array([1])),i}return c(n,[{key:"getZero",value:function(){return this.zero}},{key:"getOne",value:function(){return this.one}},{key:"buildMonomial",value:function(e,t){if(e<0)throw new b;if(0===t)return this.zero;var n=new Int32Array(e+1);return n[0]=t,new Qt(this,n)}}]),n}(function(){function e(){l(this,e)}return c(e,[{key:"add",value:function(e,t){return(e+t)%this.modulus}},{key:"subtract",value:function(e,t){return(this.modulus+e-t)%this.modulus}},{key:"exp",value:function(e){return this.expTable[e]}},{key:"log",value:function(e){if(0===e)throw new b;return this.logTable[e]}},{key:"inverse",value:function(e){if(0===e)throw new ne;return this.expTable[this.modulus-this.logTable[e]-1]}},{key:"multiply",value:function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}},{key:"getSize",value:function(){return this.modulus}},{key:"equals",value:function(e){return e===this}}]),e}());Jt.PDF417_GF=new Jt(Yt.NUMBER_OF_CODEWORDS,3);var $t=function(){function e(){l(this,e),this.field=Jt.PDF417_GF}return c(e,[{key:"decode",value:function(e,t,n){for(var r=new Qt(this.field,e),a=new Int32Array(t),i=!1,o=t;o>0;o--){var s=r.evaluateAt(this.field.exp(o));a[t-o]=s,0!==s&&(i=!0)}if(!i)return 0;var l=this.field.getOne();if(null!=n){var c,d=u(n);try{for(d.s();!(c=d.n()).done;){var h=c.value,f=this.field.exp(e.length-1-h),p=new Qt(this.field,new Int32Array([this.field.subtract(0,f),1]));l=l.multiply(p)}}catch(E){d.e(E)}finally{d.f()}}for(var m=new Qt(this.field,a),v=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),m,t),g=v[0],y=v[1],b=this.findErrorLocations(g),w=this.findErrorMagnitudes(y,g,b),k=0;k<b.length;k++){var C=e.length-1-this.field.log(b[k]);if(C<0)throw x.getChecksumInstance();e[C]=this.field.subtract(e[C],w[k])}return b.length}},{key:"runEuclideanAlgorithm",value:function(e,t,n){if(e.getDegree()<t.getDegree()){var r=e;e=t,t=r}for(var a=e,i=t,o=this.field.getZero(),s=this.field.getOne();i.getDegree()>=Math.round(n/2);){var u=a,l=o;if(o=s,(a=i).isZero())throw x.getChecksumInstance();i=u;for(var c=this.field.getZero(),d=a.getCoefficient(a.getDegree()),h=this.field.inverse(d);i.getDegree()>=a.getDegree()&&!i.isZero();){var f=i.getDegree()-a.getDegree(),p=this.field.multiply(i.getCoefficient(i.getDegree()),h);c=c.add(this.field.buildMonomial(f,p)),i=i.subtract(a.multiplyByMonomial(f,p))}s=c.multiply(o).subtract(l).negative()}var m=s.getCoefficient(0);if(0===m)throw x.getChecksumInstance();var v=this.field.inverse(m);return[s.multiply(v),i.multiply(v)]}},{key:"findErrorLocations",value:function(e){for(var t=e.getDegree(),n=new Int32Array(t),r=0,a=1;a<this.field.getSize()&&r<t;a++)0===e.evaluateAt(a)&&(n[r]=this.field.inverse(a),r++);if(r!==t)throw x.getChecksumInstance();return n}},{key:"findErrorMagnitudes",value:function(e,t,n){for(var r=t.getDegree(),a=new Int32Array(r),i=1;i<=r;i++)a[r-i]=this.field.multiply(i,t.getCoefficient(i));for(var o=new Qt(this.field,a),s=n.length,u=new Int32Array(s),l=0;l<s;l++){var c=this.field.inverse(n[l]),d=this.field.subtract(0,e.evaluateAt(c)),h=this.field.inverse(o.evaluateAt(c));u[l]=this.field.multiply(d,h)}return u}}]),e}(),en=function(){function e(t,n,r,a,i){l(this,e),t instanceof e?this.constructor_2(t):this.constructor_1(t,n,r,a,i)}return c(e,[{key:"constructor_1",value:function(e,t,n,r,a){var i=null==t||null==n,o=null==r||null==a;if(i&&o)throw new j;i?(t=new de(0,r.getY()),n=new de(0,a.getY())):o&&(r=new de(e.getWidth()-1,t.getY()),a=new de(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),a.getY()))}},{key:"constructor_2",value:function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}},{key:"addMissingRows",value:function(t,n,r){var a=this.topLeft,i=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(t>0){var u=r?this.topLeft:this.topRight,l=Math.trunc(u.getY()-t);l<0&&(l=0);var c=new de(u.getX(),l);r?a=c:o=c}if(n>0){var d=r?this.bottomLeft:this.bottomRight,h=Math.trunc(d.getY()+n);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var f=new de(d.getX(),h);r?i=f:s=f}return new e(this.image,a,i,o,s)}},{key:"getMinX",value:function(){return this.minX}},{key:"getMaxX",value:function(){return this.maxX}},{key:"getMinY",value:function(){return this.minY}},{key:"getMaxY",value:function(){return this.maxY}},{key:"getTopLeft",value:function(){return this.topLeft}},{key:"getTopRight",value:function(){return this.topRight}},{key:"getBottomLeft",value:function(){return this.bottomLeft}},{key:"getBottomRight",value:function(){return this.bottomRight}}],[{key:"merge",value:function(t,n){return null==t?n:null==n?t:new e(t.image,t.topLeft,t.bottomLeft,n.topRight,n.bottomRight)}}]),e}(),tn=function(){function e(t,n,r,a){l(this,e),this.columnCount=t,this.errorCorrectionLevel=a,this.rowCountUpperPart=n,this.rowCountLowerPart=r,this.rowCount=n+r}return c(e,[{key:"getColumnCount",value:function(){return this.columnCount}},{key:"getErrorCorrectionLevel",value:function(){return this.errorCorrectionLevel}},{key:"getRowCount",value:function(){return this.rowCount}},{key:"getRowCountUpperPart",value:function(){return this.rowCountUpperPart}},{key:"getRowCountLowerPart",value:function(){return this.rowCountLowerPart}}]),e}(),nn=function(){function e(){l(this,e),this.buffer=""}return c(e,[{key:"format",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];this.buffer+=e.form(t,r)}},{key:"toString",value:function(){return this.buffer}}],[{key:"form",value:function(e,t){var n=-1;function r(e,r,a,i,o,s){if("%%"===e)return"%";if(void 0!==t[++n]){e=i?parseInt(i.substr(1)):void 0;var u,l=o?parseInt(o.substr(1)):void 0;switch(s){case"s":u=t[n];break;case"c":u=t[n][0];break;case"f":u=parseFloat(t[n]).toFixed(e);break;case"p":u=parseFloat(t[n]).toPrecision(e);break;case"e":u=parseFloat(t[n]).toExponential(e);break;case"x":u=parseInt(t[n]).toString(l||16);break;case"d":u=parseFloat(parseInt(t[n],l||10).toPrecision(e)).toFixed(0)}u="object"===typeof u?JSON.stringify(u):(+u).toString(l);for(var c=parseInt(a),d=a&&a[0]+""==="0"?"0":" ";u.length<c;)u=void 0!==r?u+d:d+u;return u}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,r)}}]),e}(),rn=function(){function e(t){l(this,e),this.boundingBox=new en(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}return c(e,[{key:"getCodewordNearby",value:function(t){var n=this.getCodeword(t);if(null!=n)return n;for(var r=1;r<e.MAX_NEARBY_DISTANCE;r++){var a=this.imageRowToCodewordIndex(t)-r;if(a>=0&&null!=(n=this.codewords[a]))return n;if((a=this.imageRowToCodewordIndex(t)+r)<this.codewords.length&&null!=(n=this.codewords[a]))return n}return null}},{key:"imageRowToCodewordIndex",value:function(e){return e-this.boundingBox.getMinY()}},{key:"setCodeword",value:function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}},{key:"getCodeword",value:function(e){return this.codewords[this.imageRowToCodewordIndex(e)]}},{key:"getBoundingBox",value:function(){return this.boundingBox}},{key:"getCodewords",value:function(){return this.codewords}},{key:"toString",value:function(){var e,t=new nn,n=0,r=u(this.codewords);try{for(r.s();!(e=r.n()).done;){var a=e.value;null!=a?t.format("%3d: %3d|%3d%n",n++,a.getRowNumber(),a.getValue()):t.format("%3d:    |   %n",n++)}}catch(i){r.e(i)}finally{r.f()}return t.toString()}}]),e}();rn.MAX_NEARBY_DISTANCE=5;var an=function(){function e(){l(this,e),this.values=new Map}return c(e,[{key:"setValue",value:function(e){e=Math.trunc(e);var t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}},{key:"getValue",value:function(){var e,t=-1,n=new Array,a=u(this.values.entries());try{var i=function(){var a=r(e.value,2),i=a[0],o=a[1],s={getKey:function(){return i},getValue:function(){return o}};s.getValue()>t?(t=s.getValue(),(n=[]).push(s.getKey())):s.getValue()===t&&n.push(s.getKey())};for(a.s();!(e=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}return Yt.toIntArray(n)}},{key:"getConfidence",value:function(e){return this.values.get(e)}}]),e}(),on=function(e){d(n,e);var t=h(n);function n(e,r){var a;return l(this,n),(a=t.call(this,e))._isLeft=r,a}return c(n,[{key:"setRowNumbers",value:function(){var e,t=u(this.getCodewords());try{for(t.s();!(e=t.n()).done;){var n=e.value;null!=n&&n.setRowNumberAsRowIndicatorColumn()}}catch(r){t.e(r)}finally{t.f()}}},{key:"adjustCompleteIndicatorColumnRowNumbers",value:function(e){var t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);for(var n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),a=this._isLeft?n.getBottomLeft():n.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),s=-1,u=1,l=0,c=i;c<o;c++)if(null!=t[c]){var d=t[c],h=d.getRowNumber()-s;if(0===h)l++;else if(1===h)u=Math.max(u,l),l=1,s=d.getRowNumber();else if(h<0||d.getRowNumber()>=e.getRowCount()||h>c)t[c]=null;else{for(var f=void 0,p=(f=u>2?(u-2)*h:h)>=c,m=1;m<=f&&!p;m++)p=null!=t[c-m];p?t[c]=null:(s=d.getRowNumber(),l=1)}}}},{key:"getRowHeights",value:function(){var e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);var t,n=new Int32Array(e.getRowCount()),r=u(this.getCodewords());try{for(r.s();!(t=r.n()).done;){var a=t.value;if(null!=a){var i=a.getRowNumber();if(i>=n.length)continue;n[i]++}}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"adjustIncompleteIndicatorColumnRowNumbers",value:function(e){for(var t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(n.getY())),i=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.getCodewords(),s=-1,u=a;u<i;u++)if(null!=o[u]){var l=o[u];l.setRowNumberAsRowIndicatorColumn();var c=l.getRowNumber()-s;0===c||(1===c?s=l.getRowNumber():l.getRowNumber()>=e.getRowCount()?o[u]=null:s=l.getRowNumber())}}},{key:"getBarcodeMetadata",value:function(){var e,t=this.getCodewords(),n=new an,r=new an,a=new an,i=new an,o=u(t);try{for(o.s();!(e=o.n()).done;){var s=e.value;if(null!=s){s.setRowNumberAsRowIndicatorColumn();var l=s.getValue()%30,c=s.getRowNumber();switch(this._isLeft||(c+=2),c%3){case 0:r.setValue(3*l+1);break;case 1:i.setValue(l/3),a.setValue(l%3);break;case 2:n.setValue(l+1)}}}}catch(h){o.e(h)}finally{o.f()}if(0===n.getValue().length||0===r.getValue().length||0===a.getValue().length||0===i.getValue().length||n.getValue()[0]<1||r.getValue()[0]+a.getValue()[0]<Yt.MIN_ROWS_IN_BARCODE||r.getValue()[0]+a.getValue()[0]>Yt.MAX_ROWS_IN_BARCODE)return null;var d=new tn(n.getValue()[0],r.getValue()[0],a.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(t,d),d}},{key:"removeIncorrectCodewords",value:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(null!=e[n]){var a=r.getValue()%30,i=r.getRowNumber();if(i>t.getRowCount())e[n]=null;else switch(this._isLeft||(i+=2),i%3){case 0:3*a+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:Math.trunc(a/3)===t.getErrorCorrectionLevel()&&a%3===t.getRowCountLowerPart()||(e[n]=null);break;case 2:a+1!==t.getColumnCount()&&(e[n]=null)}}}}},{key:"isLeft",value:function(){return this._isLeft}},{key:"toString",value:function(){return"IsLeft: "+this._isLeft+"\n"+o(s(n.prototype),"toString",this).call(this)}}]),n}(rn),sn=function(){function e(t,n){l(this,e),this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return c(e,[{key:"getDetectionResultColumns",value:function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e,t=Yt.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns}},{key:"adjustIndicatorColumnRowNumbers",value:function(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}},{key:"adjustRowNumbersAndGetCount",value:function(){var e=this.adjustRowNumbersByRow();if(0===e)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),r=0;r<n.length;r++)null!=n[r]&&(n[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,n));return e}},{key:"adjustRowNumbersByRow",value:function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}},{key:"adjustRowNumbersFromBothRI",value:function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(var r=1;r<=this.barcodeColumnCount;r++){var a=this.detectionResultColumns[r].getCodewords()[n];null!=a&&(a.setRowNumber(e[n].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[r].getCodewords()[n]=null))}}},{key:"adjustRowNumbersFromRRI",value:function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var t=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<n.length;r++)if(null!=n[r])for(var a=n[r].getRowNumber(),i=0,o=this.barcodeColumnCount+1;o>0&&i<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[r];null!=s&&(i=e.adjustRowNumberIfValid(a,i,s),s.hasValidRowNumber()||t++)}return t}},{key:"adjustRowNumbersFromLRI",value:function(){if(null==this.detectionResultColumns[0])return 0;for(var t=0,n=this.detectionResultColumns[0].getCodewords(),r=0;r<n.length;r++)if(null!=n[r])for(var a=n[r].getRowNumber(),i=0,o=1;o<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[r];null!=s&&(i=e.adjustRowNumberIfValid(a,i,s),s.hasValidRowNumber()||t++)}return t}},{key:"adjustRowNumbers",value:function(t,n,r){if(this.detectionResultColumns[t-1]){var a=r[n],i=this.detectionResultColumns[t-1].getCodewords(),o=i;null!=this.detectionResultColumns[t+1]&&(o=this.detectionResultColumns[t+1].getCodewords());var s=new Array(14);s[2]=i[n],s[3]=o[n],n>0&&(s[0]=r[n-1],s[4]=i[n-1],s[5]=o[n-1]),n>1&&(s[8]=r[n-2],s[10]=i[n-2],s[11]=o[n-2]),n<r.length-1&&(s[1]=r[n+1],s[6]=i[n+1],s[7]=o[n+1]),n<r.length-2&&(s[9]=r[n+2],s[12]=i[n+2],s[13]=o[n+2]);for(var u=0,l=s;u<l.length;u++){var c=l[u];if(e.adjustRowNumber(a,c))return}}}},{key:"getBarcodeColumnCount",value:function(){return this.barcodeColumnCount}},{key:"getBarcodeRowCount",value:function(){return this.barcodeMetadata.getRowCount()}},{key:"getBarcodeECLevel",value:function(){return this.barcodeMetadata.getErrorCorrectionLevel()}},{key:"setBoundingBox",value:function(e){this.boundingBox=e}},{key:"getBoundingBox",value:function(){return this.boundingBox}},{key:"setDetectionResultColumn",value:function(e,t){this.detectionResultColumns[e]=t}},{key:"getDetectionResultColumn",value:function(e){return this.detectionResultColumns[e]}},{key:"toString",value:function(){var e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new nn,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var r=0;r<this.barcodeColumnCount+2;r++)if(null!=this.detectionResultColumns[r]){var a=this.detectionResultColumns[r].getCodewords()[n];null!=a?t.format(" %3d|%3d",a.getRowNumber(),a.getValue()):t.format("    |   ")}else t.format("    |   ");t.format("%n")}return t.toString()}}],[{key:"adjustRowNumberIfValid",value:function(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}},{key:"adjustRowNumber",value:function(e,t){return null!=t&&!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0)}}]),e}(),un=function(){function e(t,n,r,a){l(this,e),this.rowNumber=e.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(a)}return c(e,[{key:"hasValidRowNumber",value:function(){return this.isValidRowNumber(this.rowNumber)}},{key:"isValidRowNumber",value:function(t){return t!==e.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}},{key:"setRowNumberAsRowIndicatorColumn",value:function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}},{key:"getWidth",value:function(){return this.endX-this.startX}},{key:"getStartX",value:function(){return this.startX}},{key:"getEndX",value:function(){return this.endX}},{key:"getBucket",value:function(){return this.bucket}},{key:"getValue",value:function(){return this.value}},{key:"getRowNumber",value:function(){return this.rowNumber}},{key:"setRowNumber",value:function(e){this.rowNumber=e}},{key:"toString",value:function(){return this.rowNumber+"|"+this.value}}]),e}();un.BARCODE_ROW_UNKNOWN=-1;var ln=function(){function e(){l(this,e)}return c(e,null,[{key:"initialize",value:function(){for(var t=0;t<Yt.SYMBOL_TABLE.length;t++)for(var n=Yt.SYMBOL_TABLE[t],r=1&n,a=0;a<Yt.BARS_IN_MODULE;a++){for(var i=0;(1&n)===r;)i+=1,n>>=1;r=1&n,e.RATIOS_TABLE[t]||(e.RATIOS_TABLE[t]=new Array(Yt.BARS_IN_MODULE)),e.RATIOS_TABLE[t][Yt.BARS_IN_MODULE-a-1]=Math.fround(i/Yt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0}},{key:"getDecodedValue",value:function(t){var n=e.getDecodedCodewordValue(e.sampleBitCounts(t));return-1!==n?n:e.getClosestDecodedValue(t)}},{key:"sampleBitCounts",value:function(e){for(var t=le.sum(e),n=new Int32Array(Yt.BARS_IN_MODULE),r=0,a=0,i=0;i<Yt.MODULES_IN_CODEWORD;i++){var o=t/(2*Yt.MODULES_IN_CODEWORD)+i*t/Yt.MODULES_IN_CODEWORD;a+e[r]<=o&&(a+=e[r],r++),n[r]++}return n}},{key:"getDecodedCodewordValue",value:function(t){var n=e.getBitValue(t);return-1===Yt.getCodeword(n)?-1:n}},{key:"getBitValue",value:function(e){for(var t=0,n=0;n<e.length;n++)for(var r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}},{key:"getClosestDecodedValue",value:function(t){var n=le.sum(t),r=new Array(Yt.BARS_IN_MODULE);if(n>1)for(var a=0;a<r.length;a++)r[a]=Math.fround(t[a]/n);var i=ce.MAX_VALUE,o=-1;this.bSymbolTableReady||e.initialize();for(var s=0;s<e.RATIOS_TABLE.length;s++){for(var u=0,l=e.RATIOS_TABLE[s],c=0;c<Yt.BARS_IN_MODULE;c++){var d=Math.fround(l[c]-r[c]);if((u+=Math.fround(d*d))>=i)break}u<i&&(i=u,o=Yt.SYMBOL_TABLE[s])}return o}}]),e}();ln.bSymbolTableReady=!1,ln.RATIOS_TABLE=new Array(Yt.SYMBOL_TABLE.length).map((function(e){return new Array(Yt.BARS_IN_MODULE)}));var cn=function(){function e(){l(this,e),this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return c(e,[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"setSegmentIndex",value:function(e){this.segmentIndex=e}},{key:"getFileId",value:function(){return this.fileId}},{key:"setFileId",value:function(e){this.fileId=e}},{key:"getOptionalData",value:function(){return this.optionalData}},{key:"setOptionalData",value:function(e){this.optionalData=e}},{key:"isLastSegment",value:function(){return this.lastSegment}},{key:"setLastSegment",value:function(e){this.lastSegment=e}},{key:"getSegmentCount",value:function(){return this.segmentCount}},{key:"setSegmentCount",value:function(e){this.segmentCount=e}},{key:"getSender",value:function(){return this.sender||null}},{key:"setSender",value:function(e){this.sender=e}},{key:"getAddressee",value:function(){return this.addressee||null}},{key:"setAddressee",value:function(e){this.addressee=e}},{key:"getFileName",value:function(){return this.fileName}},{key:"setFileName",value:function(e){this.fileName=e}},{key:"getFileSize",value:function(){return this.fileSize}},{key:"setFileSize",value:function(e){this.fileSize=e}},{key:"getChecksum",value:function(){return this.checksum}},{key:"setChecksum",value:function(e){this.checksum=e}},{key:"getTimestamp",value:function(){return this.timestamp}},{key:"setTimestamp",value:function(e){this.timestamp=e}}]),e}(),dn=function(){function e(){l(this,e)}return c(e,null,[{key:"parseLong",value:function(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}]),e}(),hn=function(e){d(n,e);var t=h(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n)}(g);hn.kind="NullPointerException";var fn,pn,mn=function(){function e(){l(this,e)}return c(e,[{key:"writeBytes",value:function(e){this.writeBytesOffset(e,0,e.length)}},{key:"writeBytesOffset",value:function(e,t,n){if(null==e)throw new hn;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new E;if(0!==n)for(var r=0;r<n;r++)this.write(e[t+r])}},{key:"flush",value:function(){}},{key:"close",value:function(){}}]),e}(),vn=function(e){d(n,e);var t=h(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n)}(g),gn=function(e){d(n,e);var t=h(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(l(this,n),(e=t.call(this)).count=0,r<0)throw new b("Negative initial size: "+r);return e.buf=new Uint8Array(r),e}return c(n,[{key:"ensureCapacity",value:function(e){e-this.buf.length>0&&this.grow(e)}},{key:"grow",value:function(e){var t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new vn;t=A.MAX_VALUE}this.buf=_.copyOfUint8Array(this.buf,t)}},{key:"write",value:function(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}},{key:"writeBytesOffset",value:function(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new E;this.ensureCapacity(this.count+n),C.arraycopy(e,t,this.buf,this.count,n),this.count+=n}},{key:"writeTo",value:function(e){e.writeBytesOffset(this.buf,0,this.count)}},{key:"reset",value:function(){this.count=0}},{key:"toByteArray",value:function(){return _.copyOfUint8Array(this.buf,this.count)}},{key:"size",value:function(){return this.count}},{key:"toString",value:function(e){return e?"string"===typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}},{key:"toString_void",value:function(){return new String(this.buf).toString()}},{key:"toString_string",value:function(e){return new String(this.buf).toString()}},{key:"toString_number",value:function(e){return new String(this.buf).toString()}},{key:"close",value:function(){}}]),n}(mn);function yn(){if("undefined"!==typeof window)return window.BigInt||null;if("undefined"!==typeof n.g)return n.g.BigInt||null;if("undefined"!==typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function bn(e){if("undefined"===typeof pn&&(pn=yn()),null===pn)throw new Error("BigInt is not supported!");return pn(e)}function wn(){var e=[];e[0]=bn(1);var t=bn(900);e[1]=t;for(var n=2;n<16;n++)e[n]=e[n-1]*t;return e}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(fn||(fn={}));var xn=function(){function e(){l(this,e)}return c(e,null,[{key:"decode",value:function(t,n){var r=new L(""),a=M.ISO8859_1;r.enableDecoding(a);for(var i=1,o=t[i++],s=new cn;i<t[0];){switch(o){case e.TEXT_COMPACTION_MODE_LATCH:i=e.textCompaction(t,i,r);break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:i=e.byteCompaction(o,t,a,i,r);break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[i++]);break;case e.NUMERIC_COMPACTION_MODE_LATCH:i=e.numericCompaction(t,i,r);break;case e.ECI_CHARSET:M.getCharacterSetECIByValue(t[i++]);break;case e.ECI_GENERAL_PURPOSE:i+=2;break;case e.ECI_USER_DEFINED:i++;break;case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=e.decodeMacroBlock(t,i,s);break;case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:throw new D;default:i--,i=e.textCompaction(t,i,r)}if(!(i<t.length))throw D.getFormatInstance();o=t[i++]}if(0===r.length())throw D.getFormatInstance();var u=new $(null,r.toString(),null,n);return u.setOther(s),u}},{key:"decodeMacroBlock",value:function(t,n,r){if(n+e.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw D.getFormatInstance();for(var a=new Int32Array(e.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<e.NUMBER_OF_SEQUENCE_CODEWORDS;i++,n++)a[i]=t[n];r.setSegmentIndex(A.parseInt(e.decodeBase900toBase10(a,e.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new L;n=e.textCompaction(t,n,o),r.setFileId(o.toString());var s=-1;for(t[n]===e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=n+1);n<t[0];)switch(t[n]){case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t[++n]){case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new L;n=e.textCompaction(t,n+1,u),r.setFileName(u.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var l=new L;n=e.textCompaction(t,n+1,l),r.setSender(l.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var c=new L;n=e.textCompaction(t,n+1,c),r.setAddressee(c.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var d=new L;n=e.numericCompaction(t,n+1,d),r.setSegmentCount(A.parseInt(d.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new L;n=e.numericCompaction(t,n+1,h),r.setTimestamp(dn.parseLong(h.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var f=new L;n=e.numericCompaction(t,n+1,f),r.setChecksum(A.parseInt(f.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var p=new L;n=e.numericCompaction(t,n+1,p),r.setFileSize(dn.parseLong(p.toString()));break;default:throw D.getFormatInstance()}break;case e.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw D.getFormatInstance()}if(-1!==s){var m=n-s;r.isLastSegment()&&m--,r.setOptionalData(_.copyOfRange(t,s,s+m))}return n}},{key:"textCompaction",value:function(t,n,r){for(var a=new Int32Array(2*(t[0]-n)),i=new Int32Array(2*(t[0]-n)),o=0,s=!1;n<t[0]&&!s;){var u=t[n++];if(u<e.TEXT_COMPACTION_MODE_LATCH)a[o]=u/30,a[o+1]=u%30,o+=2;else switch(u){case e.TEXT_COMPACTION_MODE_LATCH:a[o++]=e.TEXT_COMPACTION_MODE_LATCH;break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:n--,s=!0;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[o]=e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=t[n++],i[o]=u,o++}}return e.decodeTextCompaction(a,i,o,r),n}},{key:"decodeTextCompaction",value:function(t,n,r,a){for(var i=fn.ALPHA,o=fn.ALPHA,s=0;s<r;){var u=t[s],l="";switch(i){case fn.ALPHA:if(u<26)l=String.fromCharCode(65+u);else switch(u){case 26:l=" ";break;case e.LL:i=fn.LOWER;break;case e.ML:i=fn.MIXED;break;case e.PS:o=i,i=fn.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=fn.ALPHA}break;case fn.LOWER:if(u<26)l=String.fromCharCode(97+u);else switch(u){case 26:l=" ";break;case e.AS:o=i,i=fn.ALPHA_SHIFT;break;case e.ML:i=fn.MIXED;break;case e.PS:o=i,i=fn.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=fn.ALPHA}break;case fn.MIXED:if(u<e.PL)l=e.MIXED_CHARS[u];else switch(u){case e.PL:i=fn.PUNCT;break;case 26:l=" ";break;case e.LL:i=fn.LOWER;break;case e.AL:i=fn.ALPHA;break;case e.PS:o=i,i=fn.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=fn.ALPHA}break;case fn.PUNCT:if(u<e.PAL)l=e.PUNCT_CHARS[u];else switch(u){case e.PAL:i=fn.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=fn.ALPHA}break;case fn.ALPHA_SHIFT:if(i=o,u<26)l=String.fromCharCode(65+u);else switch(u){case 26:l=" ";break;case e.TEXT_COMPACTION_MODE_LATCH:i=fn.ALPHA}break;case fn.PUNCT_SHIFT:if(i=o,u<e.PAL)l=e.PUNCT_CHARS[u];else switch(u){case e.PAL:i=fn.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=fn.ALPHA}}""!==l&&a.append(l),s++}}},{key:"byteCompaction",value:function(t,n,r,a,i){var o=new gn,s=0,u=0,l=!1;switch(t){case e.BYTE_COMPACTION_MODE_LATCH:for(var c=new Int32Array(6),d=n[a++];a<n[0]&&!l;)switch(c[s++]=d,u=900*u+d,d=n[a++]){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:a--,l=!0;break;default:if(s%5===0&&s>0){for(var h=0;h<6;++h)o.write(Number(bn(u)>>bn(8*(5-h))));u=0,s=0}}a===n[0]&&d<e.TEXT_COMPACTION_MODE_LATCH&&(c[s++]=d);for(var f=0;f<s;f++)o.write(c[f]);break;case e.BYTE_COMPACTION_MODE_LATCH_6:for(;a<n[0]&&!l;){var p=n[a++];if(p<e.TEXT_COMPACTION_MODE_LATCH)s++,u=900*u+p;else switch(p){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:a--,l=!0}if(s%5===0&&s>0){for(var m=0;m<6;++m)o.write(Number(bn(u)>>bn(8*(5-m))));u=0,s=0}}}return i.append(P.decode(o.toByteArray(),r)),a}},{key:"numericCompaction",value:function(t,n,r){for(var a=0,i=!1,o=new Int32Array(e.MAX_NUMERIC_CODEWORDS);n<t[0]&&!i;){var s=t[n++];if(n===t[0]&&(i=!0),s<e.TEXT_COMPACTION_MODE_LATCH)o[a]=s,a++;else switch(s){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:n--,i=!0}(a%e.MAX_NUMERIC_CODEWORDS===0||s===e.NUMERIC_COMPACTION_MODE_LATCH||i)&&a>0&&(r.append(e.decodeBase900toBase10(o,a)),a=0)}return n}},{key:"decodeBase900toBase10",value:function(t,n){for(var r=bn(0),a=0;a<n;a++)r+=e.EXP900[n-a-1]*bn(t[a]);var i=r.toString();if("1"!==i.charAt(0))throw new D;return i.substring(1)}}]),e}();xn.TEXT_COMPACTION_MODE_LATCH=900,xn.BYTE_COMPACTION_MODE_LATCH=901,xn.NUMERIC_COMPACTION_MODE_LATCH=902,xn.BYTE_COMPACTION_MODE_LATCH_6=924,xn.ECI_USER_DEFINED=925,xn.ECI_GENERAL_PURPOSE=926,xn.ECI_CHARSET=927,xn.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,xn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,xn.MACRO_PDF417_TERMINATOR=922,xn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,xn.MAX_NUMERIC_CODEWORDS=15,xn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,xn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,xn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,xn.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,xn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,xn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,xn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,xn.PL=25,xn.LL=27,xn.AS=27,xn.ML=28,xn.AL=28,xn.PS=29,xn.PAL=29,xn.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",xn.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",xn.EXP900=yn()?wn():[],xn.NUMBER_OF_SEQUENCE_CODEWORDS=2;var kn=function(){function e(){l(this,e)}return c(e,null,[{key:"decode",value:function(t,n,r,a,i,o,s){for(var u,l=new en(t,n,r,a,i),c=null,d=null,h=!0;;h=!1){if(null!=n&&(c=e.getRowIndicatorColumn(t,l,n,!0,o,s)),null!=a&&(d=e.getRowIndicatorColumn(t,l,a,!1,o,s)),null==(u=e.merge(c,d)))throw j.getNotFoundInstance();var f=u.getBoundingBox();if(!h||null==f||!(f.getMinY()<l.getMinY()||f.getMaxY()>l.getMaxY()))break;l=f}u.setBoundingBox(l);var p=u.getBarcodeColumnCount()+1;u.setDetectionResultColumn(0,c),u.setDetectionResultColumn(p,d);for(var m=null!=c,v=1;v<=p;v++){var g=m?v:p-v;if(void 0===u.getDetectionResultColumn(g)){var y=void 0;y=0===g||g===p?new on(l,0===g):new rn(l),u.setDetectionResultColumn(g,y);for(var b=-1,w=b,x=l.getMinY();x<=l.getMaxY();x++){if((b=e.getStartColumn(u,g,x,m))<0||b>l.getMaxX()){if(-1===w)continue;b=w}var k=e.detectCodeword(t,l.getMinX(),l.getMaxX(),m,b,x,o,s);null!=k&&(y.setCodeword(x,k),w=b,o=Math.min(o,k.getWidth()),s=Math.max(s,k.getWidth()))}}}return e.createDecoderResult(u)}},{key:"merge",value:function(t,n){if(null==t&&null==n)return null;var r=e.getBarcodeMetadata(t,n);if(null==r)return null;var a=en.merge(e.adjustBoundingBox(t),e.adjustBoundingBox(n));return new sn(r,a)}},{key:"adjustBoundingBox",value:function(t){if(null==t)return null;var n=t.getRowHeights();if(null==n)return null;var r,a=e.getMax(n),i=0,o=u(n);try{for(o.s();!(r=o.n()).done;){var s=r.value;if(i+=a-s,s>0)break}}catch(p){o.e(p)}finally{o.f()}for(var l=t.getCodewords(),c=0;i>0&&null==l[c];c++)i--;for(var d=0,h=n.length-1;h>=0&&(d+=a-n[h],!(n[h]>0));h--);for(var f=l.length-1;d>0&&null==l[f];f--)d--;return t.getBoundingBox().addMissingRows(i,d,t.isLeft())}},{key:"getMax",value:function(e){var t,n=-1,r=u(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n=Math.max(n,a)}}catch(i){r.e(i)}finally{r.f()}return n}},{key:"getBarcodeMetadata",value:function(e,t){var n,r;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(r=t.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}},{key:"getRowIndicatorColumn",value:function(t,n,r,a,i,o){for(var s=new on(n,a),u=0;u<2;u++)for(var l=0===u?1:-1,c=Math.trunc(Math.trunc(r.getX())),d=Math.trunc(Math.trunc(r.getY()));d<=n.getMaxY()&&d>=n.getMinY();d+=l){var h=e.detectCodeword(t,0,t.getWidth(),a,c,d,i,o);null!=h&&(s.setCodeword(d,h),c=a?h.getStartX():h.getEndX())}return s}},{key:"adjustCodewordCount",value:function(t,n){var r=n[0][1],a=r.getValue(),i=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-e.getNumberOfECCodeWords(t.getBarcodeECLevel());if(0===a.length){if(i<1||i>Yt.MAX_CODEWORDS_IN_BARCODE)throw j.getNotFoundInstance();r.setValue(i)}else a[0]!==i&&r.setValue(i)}},{key:"createDecoderResult",value:function(t){var n=e.createBarcodeMatrix(t);e.adjustCodewordCount(t,n);for(var r=new Array,a=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),i=[],o=new Array,s=0;s<t.getBarcodeRowCount();s++)for(var u=0;u<t.getBarcodeColumnCount();u++){var l=n[s][u+1].getValue(),c=s*t.getBarcodeColumnCount()+u;0===l.length?r.push(c):1===l.length?a[c]=l[0]:(o.push(c),i.push(l))}for(var d=new Array(i.length),h=0;h<d.length;h++)d[h]=i[h];return e.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),a,Yt.toIntArray(r),Yt.toIntArray(o),d)}},{key:"createDecoderResultFromAmbiguousValues",value:function(t,n,r,a,i){for(var o=new Int32Array(a.length),s=100;s-- >0;){for(var u=0;u<o.length;u++)n[a[u]]=i[u][o[u]];try{return e.decodeCodewords(n,t,r)}catch(c){if(!(c instanceof x))throw c}if(0===o.length)throw x.getChecksumInstance();for(var l=0;l<o.length;l++){if(o[l]<i[l].length-1){o[l]++;break}if(o[l]=0,l===o.length-1)throw x.getChecksumInstance()}}throw x.getChecksumInstance()}},{key:"createBarcodeMatrix",value:function(e){for(var t=Array.from({length:e.getBarcodeRowCount()},(function(){return new Array(e.getBarcodeColumnCount()+2)})),n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)t[n][r]=new an;var a,i=0,o=u(e.getDetectionResultColumns());try{for(o.s();!(a=o.n()).done;){var s=a.value;if(null!=s){var l,c=u(s.getCodewords());try{for(c.s();!(l=c.n()).done;){var d=l.value;if(null!=d){var h=d.getRowNumber();if(h>=0){if(h>=t.length)continue;t[h][i].setValue(d.getValue())}}}}catch(f){c.e(f)}finally{c.f()}}i++}}catch(f){o.e(f)}finally{o.f()}return t}},{key:"isValidBarcodeColumn",value:function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}},{key:"getStartColumn",value:function(t,n,r,a){var i=a?1:-1,o=null;if(e.isValidBarcodeColumn(t,n-i)&&(o=t.getDetectionResultColumn(n-i).getCodeword(r)),null!=o)return a?o.getEndX():o.getStartX();if(null!=(o=t.getDetectionResultColumn(n).getCodewordNearby(r)))return a?o.getStartX():o.getEndX();if(e.isValidBarcodeColumn(t,n-i)&&(o=t.getDetectionResultColumn(n-i).getCodewordNearby(r)),null!=o)return a?o.getEndX():o.getStartX();for(var s=0;e.isValidBarcodeColumn(t,n-i);){n-=i;var l,c=u(t.getDetectionResultColumn(n).getCodewords());try{for(c.s();!(l=c.n()).done;){var d=l.value;if(null!=d)return(a?d.getEndX():d.getStartX())+i*s*(d.getEndX()-d.getStartX())}}catch(h){c.e(h)}finally{c.f()}s++}return a?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}},{key:"detectCodeword",value:function(t,n,r,a,i,o,s,u){i=e.adjustCodewordStartColumn(t,n,r,a,i,o);var l,c=e.getModuleBitCount(t,n,r,a,i,o);if(null==c)return null;var d=le.sum(c);if(a)l=i+d;else{for(var h=0;h<c.length/2;h++){var f=c[h];c[h]=c[c.length-1-h],c[c.length-1-h]=f}i=(l=i)-d}if(!e.checkCodewordSkew(d,s,u))return null;var p=ln.getDecodedValue(c),m=Yt.getCodeword(p);return-1===m?null:new un(i,l,e.getCodewordBucketNumber(p),m)}},{key:"getModuleBitCount",value:function(e,t,n,r,a,i){for(var o=a,s=new Int32Array(8),u=0,l=r?1:-1,c=r;(r?o<n:o>=t)&&u<s.length;)e.get(o,i)===c?(s[u]++,o+=l):(u++,c=!c);return u===s.length||o===(r?n:t)&&u===s.length-1?s:null}},{key:"getNumberOfECCodeWords",value:function(e){return 2<<e}},{key:"adjustCodewordStartColumn",value:function(t,n,r,a,i,o){for(var s=i,u=a?-1:1,l=0;l<2;l++){for(;(a?s>=n:s<r)&&a===t.get(s,o);){if(Math.abs(i-s)>e.CODEWORD_SKEW_SIZE)return i;s+=u}u=-u,a=!a}return s}},{key:"checkCodewordSkew",value:function(t,n,r){return n-e.CODEWORD_SKEW_SIZE<=t&&t<=r+e.CODEWORD_SKEW_SIZE}},{key:"decodeCodewords",value:function(t,n,r){if(0===t.length)throw D.getFormatInstance();var a=1<<n+1,i=e.correctErrors(t,r,a);e.verifyCodewordCount(t,a);var o=xn.decode(t,""+n);return o.setErrorsCorrected(i),o.setErasures(r.length),o}},{key:"correctErrors",value:function(t,n,r){if(null!=n&&n.length>r/2+e.MAX_ERRORS||r<0||r>e.MAX_EC_CODEWORDS)throw x.getChecksumInstance();return e.errorCorrection.decode(t,r,n)}},{key:"verifyCodewordCount",value:function(e,t){if(e.length<4)throw D.getFormatInstance();var n=e[0];if(n>e.length)throw D.getFormatInstance();if(0===n){if(!(t<e.length))throw D.getFormatInstance();e[0]=e.length-t}}},{key:"getBitCountForCodeword",value:function(e){for(var t=new Int32Array(8),n=0,r=t.length-1;!((1&e)!==n&&(n=1&e,--r<0));)t[r]++,e>>=1;return t}},{key:"getCodewordBucketNumber",value:function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}},{key:"getCodewordBucketNumber_number",value:function(t){return e.getCodewordBucketNumber(e.getBitCountForCodeword(t))}},{key:"getCodewordBucketNumber_Int32Array",value:function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}},{key:"toString",value:function(e){for(var t=new nn,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var r=0;r<e[n].length;r++){var a=e[n][r];0===a.getValue().length?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()}}]),e}();kn.CODEWORD_SKEW_SIZE=2,kn.MAX_ERRORS=3,kn.MAX_EC_CODEWORDS=512,kn.errorCorrection=new $t;var Cn=function(){function e(){l(this,e)}return c(e,[{key:"decode",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.decode(t,n,!1);if(null==r||0===r.length||null==r[0])throw j.getNotFoundInstance();return r[0]}},{key:"decodeMultiple",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return e.decode(t,n,!0)}catch(r){if(r instanceof D||r instanceof x)throw j.getNotFoundInstance();throw r}}},{key:"reset",value:function(){}}],[{key:"decode",value:function(t,n,r){var a,i=new Array,o=Zt.detectMultiple(t,n,r),s=u(o.getPoints());try{for(s.s();!(a=s.n()).done;){var l=a.value,c=kn.decode(o.getBits(),l[4],l[5],l[6],l[7],e.getMinCodewordWidth(l),e.getMaxCodewordWidth(l)),d=new q(c.getText(),c.getRawBytes(),void 0,l,Q.PDF_417);d.putMetadata(J.ERROR_CORRECTION_LEVEL,c.getECLevel());var h=c.getOther();null!=h&&d.putMetadata(J.PDF417_EXTRA_METADATA,h),i.push(d)}}catch(f){s.e(f)}finally{s.f()}return i.map((function(e){return e}))}},{key:"getMaxWidth",value:function(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}},{key:"getMinWidth",value:function(e,t){return null==e||null==t?A.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}},{key:"getMaxCodewordWidth",value:function(t){return Math.floor(Math.max(Math.max(e.getMaxWidth(t[0],t[4]),e.getMaxWidth(t[6],t[2])*Yt.MODULES_IN_CODEWORD/Yt.MODULES_IN_STOP_PATTERN),Math.max(e.getMaxWidth(t[1],t[5]),e.getMaxWidth(t[7],t[3])*Yt.MODULES_IN_CODEWORD/Yt.MODULES_IN_STOP_PATTERN)))}},{key:"getMinCodewordWidth",value:function(t){return Math.floor(Math.min(Math.min(e.getMinWidth(t[0],t[4]),e.getMinWidth(t[6],t[2])*Yt.MODULES_IN_CODEWORD/Yt.MODULES_IN_STOP_PATTERN),Math.min(e.getMinWidth(t[1],t[5]),e.getMinWidth(t[7],t[3])*Yt.MODULES_IN_CODEWORD/Yt.MODULES_IN_STOP_PATTERN)))}}]),e}(),En=function(e){d(n,e);var t=h(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n)}(g);En.kind="ReaderException";var Sn,_n=function(){function e(t,n){l(this,e),this.verbose=!0===t,n&&this.setHints(n)}return c(e,[{key:"decode",value:function(e,t){return t&&this.setHints(t),this.decodeInternal(e)}},{key:"decodeWithState",value:function(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)}},{key:"setHints",value:function(e){this.hints=e;var n=!t(e)&&!0===e.get(N.TRY_HARDER),r=t(e)?null:e.get(N.POSSIBLE_FORMATS),a=new Array;if(!t(r)){var i=r.some((function(e){return e===Q.UPC_A||e===Q.UPC_E||e===Q.EAN_13||e===Q.EAN_8||e===Q.CODABAR||e===Q.CODE_39||e===Q.CODE_93||e===Q.CODE_128||e===Q.ITF||e===Q.RSS_14||e===Q.RSS_EXPANDED}));i&&!n&&a.push(new ht(e,this.verbose)),r.includes(Q.QR_CODE)&&a.push(new Xt),r.includes(Q.DATA_MATRIX)&&a.push(new Et),r.includes(Q.AZTEC)&&a.push(new xe),r.includes(Q.PDF_417)&&a.push(new Cn),i&&n&&a.push(new ht(e,this.verbose))}0===a.length&&(n||a.push(new ht(e,this.verbose)),a.push(new Xt),a.push(new Et),a.push(new xe),a.push(new Cn),n&&a.push(new ht(e,this.verbose))),this.readers=a}},{key:"reset",value:function(){if(null!==this.readers){var e,t=u(this.readers);try{for(t.s();!(e=t.n()).done;)e.value.reset()}catch(n){t.e(n)}finally{t.f()}}}},{key:"decodeInternal",value:function(e){if(null===this.readers)throw new En("No readers where selected, nothing can be read.");var t,n=u(this.readers);try{for(n.s();!(t=n.n()).done;){var r=t.value;try{return r.decode(e,this.hints)}catch(a){if(a instanceof En)continue}}}catch(i){n.e(i)}finally{n.f()}throw new j("No MultiFormat Readers were able to detect the code.")}}]),e}(),An=function(e){d(n,e);var t=h(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;l(this,n);var a=new _n;return a.setHints(e),t.call(this,a,r)}return c(n,[{key:"decodeBitmap",value:function(e){return this.reader.decodeWithState(e)}}]),n}(Y),In=function(e){d(n,e);var t=h(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return l(this,n),t.call(this,new Cn,e)}return c(n)}(Y),Tn=function(e){d(n,e);var t=h(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return l(this,n),t.call(this,new Xt,e)}return c(n)}(Y);!function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.MIN_SIZE=3]="MIN_SIZE",e[e.MAX_SIZE=4]="MAX_SIZE",e[e.MARGIN=5]="MARGIN",e[e.PDF417_COMPACT=6]="PDF417_COMPACT",e[e.PDF417_COMPACTION=7]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=9]="AZTEC_LAYERS",e[e.QR_VERSION=10]="QR_VERSION"}(Sn||(Sn={}));var Rn=Sn,Nn=function(){function e(t){l(this,e),this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new te(t,Int32Array.from([1])))}return c(e,[{key:"buildGenerator",value:function(e){var t=this.cachedGenerators;if(e>=t.length)for(var n=t[t.length-1],r=this.field,a=t.length;a<=e;a++){var i=n.multiply(new te(r,Int32Array.from([1,r.exp(a-1+r.getGeneratorBase())])));t.push(i),n=i}return t[e]}},{key:"encode",value:function(e,t){if(0===t)throw new b("No error correction bytes");var n=e.length-t;if(n<=0)throw new b("No data bytes provided");var r=this.buildGenerator(t),a=new Int32Array(n);C.arraycopy(e,0,a,0,n);for(var i=new te(this.field,a),o=(i=i.multiplyByMonomial(t,1)).divide(r)[1].getCoefficients(),s=t-o.length,u=0;u<s;u++)e[n+u]=0;C.arraycopy(o,0,e,n+s,o.length)}}]),e}(),Dn=function(){function e(){l(this,e)}return c(e,null,[{key:"applyMaskPenaltyRule1",value:function(t){return e.applyMaskPenaltyRule1Internal(t,!0)+e.applyMaskPenaltyRule1Internal(t,!1)}},{key:"applyMaskPenaltyRule2",value:function(t){for(var n=0,r=t.getArray(),a=t.getWidth(),i=t.getHeight(),o=0;o<i-1;o++)for(var s=r[o],u=0;u<a-1;u++){var l=s[u];l===s[u+1]&&l===r[o+1][u]&&l===r[o+1][u+1]&&n++}return e.N2*n}},{key:"applyMaskPenaltyRule3",value:function(t){for(var n=0,r=t.getArray(),a=t.getWidth(),i=t.getHeight(),o=0;o<i;o++)for(var s=0;s<a;s++){var u=r[o];s+6<a&&1===u[s]&&0===u[s+1]&&1===u[s+2]&&1===u[s+3]&&1===u[s+4]&&0===u[s+5]&&1===u[s+6]&&(e.isWhiteHorizontal(u,s-4,s)||e.isWhiteHorizontal(u,s+7,s+11))&&n++,o+6<i&&1===r[o][s]&&0===r[o+1][s]&&1===r[o+2][s]&&1===r[o+3][s]&&1===r[o+4][s]&&0===r[o+5][s]&&1===r[o+6][s]&&(e.isWhiteVertical(r,s,o-4,o)||e.isWhiteVertical(r,s,o+7,o+11))&&n++}return n*e.N3}},{key:"isWhiteHorizontal",value:function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var r=t;r<n;r++)if(1===e[r])return!1;return!0}},{key:"isWhiteVertical",value:function(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(var a=n;a<r;a++)if(1===e[a][t])return!1;return!0}},{key:"applyMaskPenaltyRule4",value:function(t){for(var n=0,r=t.getArray(),a=t.getWidth(),i=t.getHeight(),o=0;o<i;o++)for(var s=r[o],u=0;u<a;u++)1===s[u]&&n++;var l=t.getHeight()*t.getWidth();return Math.floor(10*Math.abs(2*n-l)/l)*e.N4}},{key:"getDataMaskBit",value:function(e,t,n){var r,a;switch(e){case 0:r=n+t&1;break;case 1:r=1&n;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:r=(1&(a=n*t))+a%3;break;case 6:r=(1&(a=n*t))+a%3&1;break;case 7:r=(a=n*t)%3+(n+t&1)&1;break;default:throw new b("Invalid mask pattern: "+e)}return 0===r}},{key:"applyMaskPenaltyRule1Internal",value:function(t,n){for(var r=0,a=n?t.getHeight():t.getWidth(),i=n?t.getWidth():t.getHeight(),o=t.getArray(),s=0;s<a;s++){for(var u=0,l=-1,c=0;c<i;c++){var d=n?o[s][c]:o[c][s];d===l?u++:(u>=5&&(r+=e.N1+(u-5)),u=1,l=d)}u>=5&&(r+=e.N1+(u-5))}return r}}]),e}();Dn.N1=3,Dn.N2=3,Dn.N3=40,Dn.N4=10;var Mn=function(){function e(t,n){l(this,e),this.width=t,this.height=n;for(var r=new Array(n),a=0;a!==n;a++)r[a]=new Uint8Array(t);this.bytes=r}return c(e,[{key:"getHeight",value:function(){return this.height}},{key:"getWidth",value:function(){return this.width}},{key:"get",value:function(e,t){return this.bytes[t][e]}},{key:"getArray",value:function(){return this.bytes}},{key:"setNumber",value:function(e,t,n){this.bytes[t][e]=n}},{key:"setBoolean",value:function(e,t,n){this.bytes[t][e]=n?1:0}},{key:"clear",value:function(e){var t,n=u(this.bytes);try{for(n.s();!(t=n.n()).done;){var r=t.value;_.fill(r,e)}}catch(a){n.e(a)}finally{n.f()}}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;if(this.width!==n.width)return!1;if(this.height!==n.height)return!1;for(var r=0,a=this.height;r<a;++r)for(var i=this.bytes[r],o=n.bytes[r],s=0,u=this.width;s<u;++s)if(i[s]!==o[s])return!1;return!0}},{key:"toString",value:function(){for(var e=new L,t=0,n=this.height;t<n;++t){for(var r=this.bytes[t],a=0,i=this.width;a<i;++a)switch(r[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()}}]),e}(),On=function(){function e(){l(this,e),this.maskPattern=-1}return c(e,[{key:"getMode",value:function(){return this.mode}},{key:"getECLevel",value:function(){return this.ecLevel}},{key:"getVersion",value:function(){return this.version}},{key:"getMaskPattern",value:function(){return this.maskPattern}},{key:"getMatrix",value:function(){return this.matrix}},{key:"toString",value:function(){var e=new L;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()}},{key:"setMode",value:function(e){this.mode=e}},{key:"setECLevel",value:function(e){this.ecLevel=e}},{key:"setVersion",value:function(e){this.version=e}},{key:"setMaskPattern",value:function(e){this.maskPattern=e}},{key:"setMatrix",value:function(e){this.matrix=e}}],[{key:"isValidMaskPattern",value:function(t){return t>=0&&t<e.NUM_MASK_PATTERNS}}]),e}();On.NUM_MASK_PATTERNS=8;var Pn=function(e){d(n,e);var t=h(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n)}(g);Pn.kind="WriterException";var Fn=function(){function e(){l(this,e)}return c(e,null,[{key:"clearMatrix",value:function(e){e.clear(255)}},{key:"buildMatrix",value:function(t,n,r,a,i){e.clearMatrix(i),e.embedBasicPatterns(r,i),e.embedTypeInfo(n,a,i),e.maybeEmbedVersionInfo(r,i),e.embedDataBits(t,a,i)}},{key:"embedBasicPatterns",value:function(t,n){e.embedPositionDetectionPatternsAndSeparators(n),e.embedDarkDotAtLeftBottomCorner(n),e.maybeEmbedPositionAdjustmentPatterns(t,n),e.embedTimingPatterns(n)}},{key:"embedTypeInfo",value:function(t,n,r){var a=new T;e.makeTypeInfoBits(t,n,a);for(var i=0,o=a.getSize();i<o;++i){var s=a.get(a.getSize()-1-i),u=e.TYPE_INFO_COORDINATES[i],l=u[0],c=u[1];if(r.setBoolean(l,c,s),i<8){var d=r.getWidth()-i-1,h=8;r.setBoolean(d,h,s)}else{var f=8,p=r.getHeight()-7+(i-8);r.setBoolean(f,p,s)}}}},{key:"maybeEmbedVersionInfo",value:function(t,n){if(!(t.getVersionNumber()<7)){var r=new T;e.makeVersionInfoBits(t,r);for(var a=17,i=0;i<6;++i)for(var o=0;o<3;++o){var s=r.get(a);a--,n.setBoolean(i,n.getHeight()-11+o,s),n.setBoolean(n.getHeight()-11+o,i,s)}}}},{key:"embedDataBits",value:function(t,n,r){for(var a=0,i=-1,o=r.getWidth()-1,s=r.getHeight()-1;o>0;){for(6===o&&(o-=1);s>=0&&s<r.getHeight();){for(var u=0;u<2;++u){var l=o-u;if(e.isEmpty(r.get(l,s))){var c=void 0;a<t.getSize()?(c=t.get(a),++a):c=!1,255!==n&&Dn.getDataMaskBit(n,l,s)&&(c=!c),r.setBoolean(l,s,c)}}s+=i}s+=i=-i,o-=2}if(a!==t.getSize())throw new Pn("Not all bits consumed: "+a+"/"+t.getSize())}},{key:"findMSBSet",value:function(e){return 32-A.numberOfLeadingZeros(e)}},{key:"calculateBCHCode",value:function(t,n){if(0===n)throw new b("0 polynomial");var r=e.findMSBSet(n);for(t<<=r-1;e.findMSBSet(t)>=r;)t^=n<<e.findMSBSet(t)-r;return t}},{key:"makeTypeInfoBits",value:function(t,n,r){if(!On.isValidMaskPattern(n))throw new Pn("Invalid mask pattern");var a=t.getBits()<<3|n;r.appendBits(a,5);var i=e.calculateBCHCode(a,e.TYPE_INFO_POLY);r.appendBits(i,10);var o=new T;if(o.appendBits(e.TYPE_INFO_MASK_PATTERN,15),r.xor(o),15!==r.getSize())throw new Pn("should not happen but we got: "+r.getSize())}},{key:"makeVersionInfoBits",value:function(t,n){n.appendBits(t.getVersionNumber(),6);var r=e.calculateBCHCode(t.getVersionNumber(),e.VERSION_INFO_POLY);if(n.appendBits(r,12),18!==n.getSize())throw new Pn("should not happen but we got: "+n.getSize())}},{key:"isEmpty",value:function(e){return 255===e}},{key:"embedTimingPatterns",value:function(t){for(var n=8;n<t.getWidth()-8;++n){var r=(n+1)%2;e.isEmpty(t.get(n,6))&&t.setNumber(n,6,r),e.isEmpty(t.get(6,n))&&t.setNumber(6,n,r)}}},{key:"embedDarkDotAtLeftBottomCorner",value:function(e){if(0===e.get(8,e.getHeight()-8))throw new Pn;e.setNumber(8,e.getHeight()-8,1)}},{key:"embedHorizontalSeparationPattern",value:function(t,n,r){for(var a=0;a<8;++a){if(!e.isEmpty(r.get(t+a,n)))throw new Pn;r.setNumber(t+a,n,0)}}},{key:"embedVerticalSeparationPattern",value:function(t,n,r){for(var a=0;a<7;++a){if(!e.isEmpty(r.get(t,n+a)))throw new Pn;r.setNumber(t,n+a,0)}}},{key:"embedPositionAdjustmentPattern",value:function(t,n,r){for(var a=0;a<5;++a)for(var i=e.POSITION_ADJUSTMENT_PATTERN[a],o=0;o<5;++o)r.setNumber(t+o,n+a,i[o])}},{key:"embedPositionDetectionPattern",value:function(t,n,r){for(var a=0;a<7;++a)for(var i=e.POSITION_DETECTION_PATTERN[a],o=0;o<7;++o)r.setNumber(t+o,n+a,i[o])}},{key:"embedPositionDetectionPatternsAndSeparators",value:function(t){var n=e.POSITION_DETECTION_PATTERN[0].length;e.embedPositionDetectionPattern(0,0,t),e.embedPositionDetectionPattern(t.getWidth()-n,0,t),e.embedPositionDetectionPattern(0,t.getWidth()-n,t);var r=8;e.embedHorizontalSeparationPattern(0,r-1,t),e.embedHorizontalSeparationPattern(t.getWidth()-r,r-1,t),e.embedHorizontalSeparationPattern(0,t.getWidth()-r,t);var a=7;e.embedVerticalSeparationPattern(a,0,t),e.embedVerticalSeparationPattern(t.getHeight()-a-1,0,t),e.embedVerticalSeparationPattern(a,t.getHeight()-a,t)}},{key:"maybeEmbedPositionAdjustmentPatterns",value:function(t,n){if(!(t.getVersionNumber()<2))for(var r=t.getVersionNumber()-1,a=e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],i=0,o=a.length;i!==o;i++){var s=a[i];if(s>=0)for(var u=0;u!==o;u++){var l=a[u];l>=0&&e.isEmpty(n.get(l,s))&&e.embedPositionAdjustmentPattern(l-2,s-2,n)}}}}]),e}();Fn.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Fn.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Fn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Fn.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Fn.VERSION_INFO_POLY=7973,Fn.TYPE_INFO_POLY=1335,Fn.TYPE_INFO_MASK_PATTERN=21522;var Ln=function(){function e(t,n){l(this,e),this.dataBytes=t,this.errorCorrectionBytes=n}return c(e,[{key:"getDataBytes",value:function(){return this.dataBytes}},{key:"getErrorCorrectionBytes",value:function(){return this.errorCorrectionBytes}}]),e}(),Bn=function(){function e(){l(this,e)}return c(e,null,[{key:"calculateMaskPenalty",value:function(e){return Dn.applyMaskPenaltyRule1(e)+Dn.applyMaskPenaltyRule2(e)+Dn.applyMaskPenaltyRule3(e)+Dn.applyMaskPenaltyRule4(e)}},{key:"encode",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=e.DEFAULT_BYTE_MODE_ENCODING,i=null!==r&&void 0!==r.get(Rn.CHARACTER_SET);i&&(a=r.get(Rn.CHARACTER_SET).toString());var o=this.chooseMode(t,a),s=new T;if(o===Lt.BYTE&&(i||e.DEFAULT_BYTE_MODE_ENCODING!==a)){var u=M.getCharacterSetECIByName(a);void 0!==u&&this.appendECI(u,s)}this.appendModeInfo(o,s);var l,c=new T;if(this.appendBytes(t,o,c,a),null!==r&&void 0!==r.get(Rn.QR_VERSION)){var d=Number.parseInt(r.get(Rn.QR_VERSION).toString(),10);l=Dt.getVersionForNumber(d);var h=this.calculateBitsNeeded(o,s,c,l);if(!this.willFit(h,l,n))throw new Pn("Data too big for requested version")}else l=this.recommendVersion(n,o,s,c);var f=new T;f.appendBitArray(s);var p=o===Lt.BYTE?c.getSizeInBytes():t.length;this.appendLengthInfo(p,l,o,f),f.appendBitArray(c);var m=l.getECBlocksForLevel(n),v=l.getTotalCodewords()-m.getTotalECCodewords();this.terminateBits(v,f);var g=this.interleaveWithECBytes(f,l.getTotalCodewords(),v,m.getNumBlocks()),y=new On;y.setECLevel(n),y.setMode(o),y.setVersion(l);var b=l.getDimensionForVersion(),w=new Mn(b,b),x=this.chooseMaskPattern(g,n,l,w);return y.setMaskPattern(x),Fn.buildMatrix(g,n,l,x,w),y.setMatrix(w),y}},{key:"recommendVersion",value:function(e,t,n,r){var a=this.calculateBitsNeeded(t,n,r,Dt.getVersionForNumber(1)),i=this.chooseVersion(a,e),o=this.calculateBitsNeeded(t,n,r,i);return this.chooseVersion(o,e)}},{key:"calculateBitsNeeded",value:function(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}},{key:"getAlphanumericCode",value:function(t){return t<e.ALPHANUMERIC_TABLE.length?e.ALPHANUMERIC_TABLE[t]:-1}},{key:"chooseMode",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(M.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(t))return Lt.KANJI;for(var r=!1,a=!1,i=0,o=t.length;i<o;++i){var s=t.charAt(i);if(e.isDigit(s))r=!0;else{if(-1===this.getAlphanumericCode(s.charCodeAt(0)))return Lt.BYTE;a=!0}}return a?Lt.ALPHANUMERIC:r?Lt.NUMERIC:Lt.BYTE}},{key:"isOnlyDoubleByteKanji",value:function(e){var t;try{t=P.encode(e,M.SJIS)}catch(i){return!1}var n=t.length;if(n%2!==0)return!1;for(var r=0;r<n;r+=2){var a=255&t[r];if((a<129||a>159)&&(a<224||a>235))return!1}return!0}},{key:"chooseMaskPattern",value:function(e,t,n,r){for(var a=Number.MAX_SAFE_INTEGER,i=-1,o=0;o<On.NUM_MASK_PATTERNS;o++){Fn.buildMatrix(e,t,n,o,r);var s=this.calculateMaskPenalty(r);s<a&&(a=s,i=o)}return i}},{key:"chooseVersion",value:function(t,n){for(var r=1;r<=40;r++){var a=Dt.getVersionForNumber(r);if(e.willFit(t,a,n))return a}throw new Pn("Data too big")}},{key:"willFit",value:function(e,t,n){return t.getTotalCodewords()-t.getECBlocksForLevel(n).getTotalECCodewords()>=(e+7)/8}},{key:"terminateBits",value:function(e,t){var n=8*e;if(t.getSize()>n)throw new Pn("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(var r=0;r<4&&t.getSize()<n;++r)t.appendBit(!1);var a=7&t.getSize();if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),s=0;s<o;++s)t.appendBits(0===(1&s)?236:17,8);if(t.getSize()!==n)throw new Pn("Bits size does not equal capacity")}},{key:"getNumDataBytesAndNumECBytesForBlockID",value:function(e,t,n,r,a,i){if(r>=n)throw new Pn("Block ID too large");var o=e%n,s=n-o,u=Math.floor(e/n),l=u+1,c=Math.floor(t/n),d=c+1,h=u-c,f=l-d;if(h!==f)throw new Pn("EC bytes mismatch");if(n!==s+o)throw new Pn("RS blocks mismatch");if(e!==(c+h)*s+(d+f)*o)throw new Pn("Total bytes mismatch");r<s?(a[0]=c,i[0]=h):(a[0]=d,i[0]=f)}},{key:"interleaveWithECBytes",value:function(t,n,r,a){if(t.getSizeInBytes()!==r)throw new Pn("Number of bits and data bytes does not match");for(var i=0,o=0,s=0,l=new Array,c=0;c<a;++c){var d=new Int32Array(1),h=new Int32Array(1);e.getNumDataBytesAndNumECBytesForBlockID(n,r,a,c,d,h);var f=d[0],p=new Uint8Array(f);t.toBytes(8*i,p,0,f);var m=e.generateECBytes(p,h[0]);l.push(new Ln(p,m)),o=Math.max(o,f),s=Math.max(s,m.length),i+=d[0]}if(r!==i)throw new Pn("Data bytes does not match offset");for(var v=new T,g=0;g<o;++g){var y,b=u(l);try{for(b.s();!(y=b.n()).done;){var w=y.value.getDataBytes();g<w.length&&v.appendBits(w[g],8)}}catch(S){b.e(S)}finally{b.f()}}for(var x=0;x<s;++x){var k,C=u(l);try{for(C.s();!(k=C.n()).done;){var E=k.value.getErrorCorrectionBytes();x<E.length&&v.appendBits(E[x],8)}}catch(S){C.e(S)}finally{C.f()}}if(n!==v.getSizeInBytes())throw new Pn("Interleaving error: "+n+" and "+v.getSizeInBytes()+" differ.");return v}},{key:"generateECBytes",value:function(e,t){for(var n=e.length,r=new Int32Array(n+t),a=0;a<n;a++)r[a]=255&e[a];new Nn(re.QR_CODE_FIELD_256).encode(r,t);for(var i=new Uint8Array(t),o=0;o<t;o++)i[o]=r[n+o];return i}},{key:"appendModeInfo",value:function(e,t){t.appendBits(e.getBits(),4)}},{key:"appendLengthInfo",value:function(e,t,n,r){var a=n.getCharacterCountBits(t);if(e>=1<<a)throw new Pn(e+" is bigger than "+((1<<a)-1));r.appendBits(e,a)}},{key:"appendBytes",value:function(t,n,r,a){switch(n){case Lt.NUMERIC:e.appendNumericBytes(t,r);break;case Lt.ALPHANUMERIC:e.appendAlphanumericBytes(t,r);break;case Lt.BYTE:e.append8BitBytes(t,r,a);break;case Lt.KANJI:e.appendKanjiBytes(t,r);break;default:throw new Pn("Invalid mode: "+n)}}},{key:"getDigit",value:function(e){return e.charCodeAt(0)-48}},{key:"isDigit",value:function(t){var n=e.getDigit(t);return n>=0&&n<=9}},{key:"appendNumericBytes",value:function(t,n){for(var r=t.length,a=0;a<r;){var i=e.getDigit(t.charAt(a));if(a+2<r){var o=e.getDigit(t.charAt(a+1)),s=e.getDigit(t.charAt(a+2));n.appendBits(100*i+10*o+s,10),a+=3}else if(a+1<r){var u=e.getDigit(t.charAt(a+1));n.appendBits(10*i+u,7),a+=2}else n.appendBits(i,4),a++}}},{key:"appendAlphanumericBytes",value:function(t,n){for(var r=t.length,a=0;a<r;){var i=e.getAlphanumericCode(t.charCodeAt(a));if(-1===i)throw new Pn;if(a+1<r){var o=e.getAlphanumericCode(t.charCodeAt(a+1));if(-1===o)throw new Pn;n.appendBits(45*i+o,11),a+=2}else n.appendBits(i,6),a++}}},{key:"append8BitBytes",value:function(e,t,n){var r;try{r=P.encode(e,n)}catch(s){throw new Pn(s)}for(var a=0,i=r.length;a!==i;a++){var o=r[a];t.appendBits(o,8)}}},{key:"appendKanjiBytes",value:function(e,t){var n;try{n=P.encode(e,M.SJIS)}catch(u){throw new Pn(u)}for(var r=n.length,a=0;a<r;a+=2){var i=(255&n[a])<<8&4294967295|255&n[a+1],o=-1;if(i>=33088&&i<=40956?o=i-33088:i>=57408&&i<=60351&&(o=i-49472),-1===o)throw new Pn("Invalid byte sequence");var s=192*(o>>8)+(255&o);t.appendBits(s,13)}}},{key:"appendECI",value:function(e,t){t.appendBits(Lt.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}]),e}();Bn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Bn.DEFAULT_BYTE_MODE_ENCODING=M.UTF8.getName();var jn=function(){function e(){l(this,e)}return c(e,[{key:"write",value:function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(0===t.length)throw new b("Found empty contents");if(n<0||r<0)throw new b("Requested dimensions are too small: "+n+"x"+r);var i=At.L,o=e.QUIET_ZONE_SIZE;null!==a&&(void 0!==a.get(Rn.ERROR_CORRECTION)&&(i=At.fromString(a.get(Rn.ERROR_CORRECTION).toString())),void 0!==a.get(Rn.MARGIN)&&(o=Number.parseInt(a.get(Rn.MARGIN).toString(),10)));var s=Bn.encode(t,i,a);return this.renderResult(s,n,r,o)}},{key:"writeToDom",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;"string"===typeof e&&(e=document.querySelector(e));var i=this.write(t,n,r,a);e&&e.appendChild(i)}},{key:"renderResult",value:function(e,t,n,r){var a=e.getMatrix();if(null===a)throw new ie;for(var i=a.getWidth(),o=a.getHeight(),s=i+2*r,u=o+2*r,l=Math.max(t,s),c=Math.max(n,u),d=Math.min(Math.floor(l/s),Math.floor(c/u)),h=Math.floor((l-i*d)/2),f=Math.floor((c-o*d)/2),p=this.createSVGElement(l,c),m=0,v=f;m<o;m++,v+=d)for(var g=0,y=h;g<i;g++,y+=d)if(1===a.get(g,m)){var b=this.createSvgRectElement(y,v,d,d);p.appendChild(b)}return p}},{key:"createSVGElement",value:function(t,n){var r=document.createElementNS(e.SVG_NS,"svg");return r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"width",n.toString()),r}},{key:"createSvgRectElement",value:function(t,n,r,a){var i=document.createElementNS(e.SVG_NS,"rect");return i.setAttributeNS(null,"x",t.toString()),i.setAttributeNS(null,"y",n.toString()),i.setAttributeNS(null,"height",r.toString()),i.setAttributeNS(null,"width",a.toString()),i.setAttributeNS(null,"fill","#000000"),i}}]),e}();jn.QUIET_ZONE_SIZE=4,jn.SVG_NS="http://www.w3.org/2000/svg";var zn=function(){function e(){l(this,e)}return c(e,[{key:"encode",value:function(t,n,r,a,i){if(0===t.length)throw new b("Found empty contents");if(n!==Q.QR_CODE)throw new b("Can only encode QR_CODE, but got "+n);if(r<0||a<0)throw new b("Requested dimensions are too small: ".concat(r,"x").concat(a));var o=At.L,s=e.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(Rn.ERROR_CORRECTION)&&(o=At.fromString(i.get(Rn.ERROR_CORRECTION).toString())),void 0!==i.get(Rn.MARGIN)&&(s=Number.parseInt(i.get(Rn.MARGIN).toString(),10)));var u=Bn.encode(t,o,i);return e.renderResult(u,r,a,s)}}],[{key:"renderResult",value:function(e,t,n,r){var a=e.getMatrix();if(null===a)throw new ie;for(var i=a.getWidth(),o=a.getHeight(),s=i+2*r,u=o+2*r,l=Math.max(t,s),c=Math.max(n,u),d=Math.min(Math.floor(l/s),Math.floor(c/u)),h=Math.floor((l-i*d)/2),f=Math.floor((c-o*d)/2),p=new B(l,c),m=0,v=f;m<o;m++,v+=d)for(var g=0,y=h;g<i;g++,y+=d)1===a.get(g,m)&&p.setRegion(y,v,d,d);return p}}]),e}();zn.QUIET_ZONE_SIZE=4;var Un=function(){function e(){l(this,e)}return c(e,[{key:"encode",value:function(e,t,n,r,a){if(t!==Q.QR_CODE)throw new b("No encoder available for format "+t);return(new zn).encode(e,t,n,r,a)}}]),e}(),Vn=function(e){d(n,e);var t=h(n);function n(e,r,a,i,o,s,u,c){var d;if(l(this,n),(d=t.call(this,s,u)).yuvData=e,d.dataWidth=r,d.dataHeight=a,d.left=i,d.top=o,i+s>r||o+u>a)throw new b("Crop rectangle does not fit within image data.");return c&&d.reverseHorizontal(s,u),d}return c(n,[{key:"getRow",value:function(e,t){if(e<0||e>=this.getHeight())throw new b("Requested row is outside the image: "+e);var n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));var r=(e+this.top)*this.dataWidth+this.left;return C.arraycopy(this.yuvData,r,t,0,n),t}},{key:"getMatrix",value:function(){var e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;var n=e*t,r=new Uint8ClampedArray(n),a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return C.arraycopy(this.yuvData,a,r,0,n),r;for(var i=0;i<t;i++){var o=i*e;C.arraycopy(this.yuvData,a,r,o,e),a+=this.dataWidth}return r}},{key:"isCropSupported",value:function(){return!0}},{key:"crop",value:function(e,t,r,a){return new n(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,r,a,!1)}},{key:"renderThumbnail",value:function(){for(var e=this.getWidth()/n.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/n.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(e*t),a=this.yuvData,i=this.top*this.dataWidth+this.left,o=0;o<t;o++){for(var s=o*e,u=0;u<e;u++){var l=255&a[i+u*n.THUMBNAIL_SCALE_FACTOR];r[s+u]=4278190080|65793*l}i+=this.dataWidth*n.THUMBNAIL_SCALE_FACTOR}return r}},{key:"getThumbnailWidth",value:function(){return this.getWidth()/n.THUMBNAIL_SCALE_FACTOR}},{key:"getThumbnailHeight",value:function(){return this.getHeight()/n.THUMBNAIL_SCALE_FACTOR}},{key:"reverseHorizontal",value:function(e,t){for(var n=this.yuvData,r=0,a=this.top*this.dataWidth+this.left;r<t;r++,a+=this.dataWidth)for(var i=a+e/2,o=a,s=a+e-1;o<i;o++,s--){var u=n[o];n[o]=n[s],n[s]=u}}},{key:"invert",value:function(){return new W(this)}}]),n}(V);Vn.THUMBNAIL_SCALE_FACTOR=2;var Wn=function(e){d(n,e);var t=h(n);function n(e,r,a,i,o,s,u){var c;if(l(this,n),(c=t.call(this,r,a)).dataWidth=i,c.dataHeight=o,c.left=s,c.top=u,4===e.BYTES_PER_ELEMENT){for(var d=r*a,h=new Uint8ClampedArray(d),f=0;f<d;f++){var p=e[f],m=p>>16&255,v=p>>7&510,g=255&p;h[f]=(m+v+g)/4&255}c.luminances=h}else c.luminances=e;if(void 0===i&&(c.dataWidth=r),void 0===o&&(c.dataHeight=a),void 0===s&&(c.left=0),void 0===u&&(c.top=0),c.left+r>c.dataWidth||c.top+a>c.dataHeight)throw new b("Crop rectangle does not fit within image data.");return c}return c(n,[{key:"getRow",value:function(e,t){if(e<0||e>=this.getHeight())throw new b("Requested row is outside the image: "+e);var n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));var r=(e+this.top)*this.dataWidth+this.left;return C.arraycopy(this.luminances,r,t,0,n),t}},{key:"getMatrix",value:function(){var e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;var n=e*t,r=new Uint8ClampedArray(n),a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return C.arraycopy(this.luminances,a,r,0,n),r;for(var i=0;i<t;i++){var o=i*e;C.arraycopy(this.luminances,a,r,o,e),a+=this.dataWidth}return r}},{key:"isCropSupported",value:function(){return!0}},{key:"crop",value:function(e,t,r,a){return new n(this.luminances,r,a,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}},{key:"invert",value:function(){return new W(this)}}]),n}(V),Hn=function(e){d(n,e);var t=h(n);function n(){return l(this,n),t.apply(this,arguments)}return c(n,null,[{key:"forName",value:function(e){return this.getCharacterSetECIByName(e)}}]),n}(M),Gn=c((function e(){l(this,e)}));Gn.ISO_8859_1=M.ISO8859_1;var Kn=function(){function e(){l(this,e)}return c(e,[{key:"isCompact",value:function(){return this.compact}},{key:"setCompact",value:function(e){this.compact=e}},{key:"getSize",value:function(){return this.size}},{key:"setSize",value:function(e){this.size=e}},{key:"getLayers",value:function(){return this.layers}},{key:"setLayers",value:function(e){this.layers=e}},{key:"getCodeWords",value:function(){return this.codeWords}},{key:"setCodeWords",value:function(e){this.codeWords=e}},{key:"getMatrix",value:function(){return this.matrix}},{key:"setMatrix",value:function(e){this.matrix=e}}]),e}(),Xn=function(){function e(){l(this,e)}return c(e,null,[{key:"singletonList",value:function(e){return[e]}},{key:"min",value:function(e,t){return e.sort(t)[0]}}]),e}(),Yn=function(e){d(n,e);var t=h(n);function n(e,r,a){var i;return l(this,n),(i=t.call(this,e)).value=r,i.bitCount=a,i}return c(n,[{key:"appendTo",value:function(e,t){e.appendBits(this.value,this.bitCount)}},{key:"add",value:function(e,t){return new n(this,e,t)}},{key:"addBinaryShift",value:function(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new n(this,e,t)}},{key:"toString",value:function(){var e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+A.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}]),n}(function(){function e(t){l(this,e),this.previous=t}return c(e,[{key:"getPrevious",value:function(){return this.previous}}]),e}()),qn=function(e){d(n,e);var t=h(n);function n(e,r,a){var i;return l(this,n),(i=t.call(this,e,0,0)).binaryShiftStart=r,i.binaryShiftByteCount=a,i}return c(n,[{key:"appendTo",value:function(e,t){for(var n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}},{key:"addBinaryShift",value:function(e,t){return new n(this,e,t)}},{key:"toString",value:function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}]),n}(Yn);function Zn(e,t,n){return new qn(e,t,n)}function Qn(e,t,n){return new Yn(e,t,n)}var Jn=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],$n=0,er=1,tr=2,nr=3,rr=4,ar=new Yn(null,0,0),ir=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];function or(e){var t,n=u(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;_.fill(r,-1)}}catch(a){n.e(a)}finally{n.f()}return e[$n][rr]=0,e[er][rr]=0,e[er][$n]=28,e[nr][rr]=0,e[tr][rr]=0,e[tr][$n]=15,e}var sr=or(_.createInt32Array(6,6)),ur=function(){function e(t,n,r,a){l(this,e),this.token=t,this.mode=n,this.binaryShiftByteCount=r,this.bitCount=a}return c(e,[{key:"getMode",value:function(){return this.mode}},{key:"getToken",value:function(){return this.token}},{key:"getBinaryShiftByteCount",value:function(){return this.binaryShiftByteCount}},{key:"getBitCount",value:function(){return this.bitCount}},{key:"latchAndAppend",value:function(t,n){var r=this.bitCount,a=this.token;if(t!==this.mode){var i=ir[this.mode][t];a=Qn(a,65535&i,i>>16),r+=i>>16}var o=t===tr?4:5;return new e(a=Qn(a,n,o),t,0,r+o)}},{key:"shiftAndAppend",value:function(t,n){var r=this.token,a=this.mode===tr?4:5;return r=Qn(r,sr[this.mode][t],a),new e(r=Qn(r,n,5),this.mode,0,this.bitCount+a+5)}},{key:"addBinaryShiftChar",value:function(t){var n=this.token,r=this.mode,a=this.bitCount;if(this.mode===rr||this.mode===tr){var i=ir[r][$n];n=Qn(n,65535&i,i>>16),a+=i>>16,r=$n}var o=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,s=new e(n,r,this.binaryShiftByteCount+1,a+o);return 2078===s.binaryShiftByteCount&&(s=s.endBinaryShift(t+1)),s}},{key:"endBinaryShift",value:function(t){if(0===this.binaryShiftByteCount)return this;var n=this.token;return new e(n=Zn(n,t-this.binaryShiftByteCount,this.binaryShiftByteCount),this.mode,0,this.bitCount)}},{key:"isBetterThanOrEqualTo",value:function(t){var n=this.bitCount+(ir[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?n+=e.calculateBinaryShiftCost(t)-e.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(n+=10),n<=t.bitCount}},{key:"toBitArray",value:function(e){for(var t=[],n=this.endBinaryShift(e.length).token;null!==n;n=n.getPrevious())t.unshift(n);for(var r=new T,a=0,i=t;a<i.length;a++)i[a].appendTo(r,e);return r}},{key:"toString",value:function(){return F.format("%s bits=%d bytes=%d",Jn[this.mode],this.bitCount,this.binaryShiftByteCount)}}],[{key:"calculateBinaryShiftCost",value:function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}]),e}();function lr(e){var t=F.getCharCode(" "),n=F.getCharCode("."),r=F.getCharCode(",");e[$n][t]=1;for(var a=F.getCharCode("Z"),i=F.getCharCode("A"),o=i;o<=a;o++)e[$n][o]=o-i+2;e[er][t]=1;for(var s=F.getCharCode("z"),u=F.getCharCode("a"),l=u;l<=s;l++)e[er][l]=l-u+2;e[tr][t]=1;for(var c=F.getCharCode("9"),d=F.getCharCode("0"),h=d;h<=c;h++)e[tr][h]=h-d+2;e[tr][r]=12,e[tr][n]=13;for(var f=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"],p=0;p<f.length;p++)e[nr][F.getCharCode(f[p])]=p;for(var m=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],v=0;v<m.length;v++)F.getCharCode(m[v])>0&&(e[rr][F.getCharCode(m[v])]=v);return e}ur.INITIAL_STATE=new ur(ar,$n,0,0);var cr=lr(_.createInt32Array(5,256)),dr=function(){function e(t){l(this,e),this.text=t}return c(e,[{key:"encode",value:function(){for(var t=F.getCharCode(" "),n=F.getCharCode("\n"),r=Xn.singletonList(ur.INITIAL_STATE),a=0;a<this.text.length;a++){var i=void 0,o=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case F.getCharCode("\r"):i=o===n?2:0;break;case F.getCharCode("."):i=o===t?3:0;break;case F.getCharCode(","):i=o===t?4:0;break;case F.getCharCode(":"):i=o===t?5:0;break;default:i=0}i>0?(r=e.updateStateListForPair(r,a,i),a++):r=this.updateStateListForChar(r,a)}return Xn.min(r,(function(e,t){return e.getBitCount()-t.getBitCount()})).toBitArray(this.text)}},{key:"updateStateListForChar",value:function(t,n){var r,a=[],i=u(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.updateStateForChar(o,n,a)}}catch(s){i.e(s)}finally{i.f()}return e.simplifyStates(a)}},{key:"updateStateForChar",value:function(e,t,n){for(var r=255&this.text[t],a=cr[e.getMode()][r]>0,i=null,o=0;o<=rr;o++){var s=cr[o][r];if(s>0){if(null==i&&(i=e.endBinaryShift(t)),!a||o===e.getMode()||o===tr){var u=i.latchAndAppend(o,s);n.push(u)}if(!a&&sr[e.getMode()][o]>=0){var l=i.shiftAndAppend(o,s);n.push(l)}}}if(e.getBinaryShiftByteCount()>0||0===cr[e.getMode()][r]){var c=e.addBinaryShiftChar(t);n.push(c)}}}],[{key:"updateStateListForPair",value:function(e,t,n){var r,a=[],i=u(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.updateStateForPair(o,t,n,a)}}catch(s){i.e(s)}finally{i.f()}return this.simplifyStates(a)}},{key:"updateStateForPair",value:function(e,t,n,r){var a=e.endBinaryShift(t);if(r.push(a.latchAndAppend(rr,n)),e.getMode()!==rr&&r.push(a.shiftAndAppend(rr,n)),3===n||4===n){var i=a.latchAndAppend(tr,16-n).latchAndAppend(tr,1);r.push(i)}if(e.getBinaryShiftByteCount()>0){var o=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(o)}}},{key:"simplifyStates",value:function(e){var t,n=[],r=u(e);try{for(r.s();!(t=r.n()).done;){var a,i=t.value,o=!0,s=u(n);try{var l=function(){var e=a.value;if(e.isBetterThanOrEqualTo(i))return o=!1,"break";i.isBetterThanOrEqualTo(e)&&(n=n.filter((function(t){return t!==e})))};for(s.s();!(a=s.n()).done&&"break"!==l(););}catch(c){s.e(c)}finally{s.f()}o&&n.push(i)}}catch(c){r.e(c)}finally{r.f()}return n}}]),e}(),hr=function(){function e(){l(this,e)}return c(e,null,[{key:"encodeBytes",value:function(t){return e.encode(t,e.DEFAULT_EC_PERCENT,e.DEFAULT_AZTEC_LAYERS)}},{key:"encode",value:function(t,n,r){var a,i,o,s,u,l=new dr(t).encode(),c=A.truncDivision(l.getSize()*n,100)+11,d=l.getSize()+c;if(r!==e.DEFAULT_AZTEC_LAYERS){if(a=r<0,(i=Math.abs(r))>(a?e.MAX_NB_BITS_COMPACT:e.MAX_NB_BITS))throw new b(F.format("Illegal value %s for layers",r));var h=(o=e.totalBitsInLayer(i,a))-o%(s=e.WORD_SIZE[i]);if((u=e.stuffBits(l,s)).getSize()+c>h)throw new b("Data to large for user specified layer");if(a&&u.getSize()>64*s)throw new b("Data to large for user specified layer")}else{s=0,u=null;for(var f=0;;f++){if(f>e.MAX_NB_BITS)throw new b("Data too large for an Aztec code");if(i=(a=f<=3)?f+1:f,!(d>(o=e.totalBitsInLayer(i,a)))){null!=u&&s===e.WORD_SIZE[i]||(s=e.WORD_SIZE[i],u=e.stuffBits(l,s));var p=o-o%s;if(!(a&&u.getSize()>64*s)&&u.getSize()+c<=p)break}}}var m,v=e.generateCheckWords(u,o,s),g=u.getSize()/s,y=e.generateModeMessage(a,i,g),w=(a?11:14)+4*i,x=new Int32Array(w);if(a){m=w;for(var k=0;k<x.length;k++)x[k]=k}else{m=w+1+2*A.truncDivision(A.truncDivision(w,2)-1,15);for(var C=A.truncDivision(w,2),E=A.truncDivision(m,2),S=0;S<C;S++){var _=S+A.truncDivision(S,15);x[C-S-1]=E-_-1,x[C+S]=E+_+1}}for(var I=new B(m),T=0,R=0;T<i;T++){for(var N=4*(i-T)+(a?9:12),D=0;D<N;D++)for(var M=2*D,O=0;O<2;O++)v.get(R+M+O)&&I.set(x[2*T+O],x[2*T+D]),v.get(R+2*N+M+O)&&I.set(x[2*T+D],x[w-1-2*T-O]),v.get(R+4*N+M+O)&&I.set(x[w-1-2*T-O],x[w-1-2*T-D]),v.get(R+6*N+M+O)&&I.set(x[w-1-2*T-D],x[2*T+O]);R+=8*N}if(e.drawModeMessage(I,a,m,y),a)e.drawBullsEye(I,A.truncDivision(m,2),5);else{e.drawBullsEye(I,A.truncDivision(m,2),7);for(var P=0,L=0;P<A.truncDivision(w,2)-1;P+=15,L+=16)for(var j=1&A.truncDivision(m,2);j<m;j+=2)I.set(A.truncDivision(m,2)-L,j),I.set(A.truncDivision(m,2)+L,j),I.set(j,A.truncDivision(m,2)-L),I.set(j,A.truncDivision(m,2)+L)}var z=new Kn;return z.setCompact(a),z.setSize(m),z.setLayers(i),z.setCodeWords(g),z.setMatrix(I),z}},{key:"drawBullsEye",value:function(e,t,n){for(var r=0;r<n;r+=2)for(var a=t-r;a<=t+r;a++)e.set(a,t-r),e.set(a,t+r),e.set(t-r,a),e.set(t+r,a);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}},{key:"generateModeMessage",value:function(t,n,r){var a=new T;return t?(a.appendBits(n-1,2),a.appendBits(r-1,6),a=e.generateCheckWords(a,28,4)):(a.appendBits(n-1,5),a.appendBits(r-1,11),a=e.generateCheckWords(a,40,4)),a}},{key:"drawModeMessage",value:function(e,t,n,r){var a=A.truncDivision(n,2);if(t)for(var i=0;i<7;i++){var o=a-3+i;r.get(i)&&e.set(o,a-5),r.get(i+7)&&e.set(a+5,o),r.get(20-i)&&e.set(o,a+5),r.get(27-i)&&e.set(a-5,o)}else for(var s=0;s<10;s++){var u=a-5+s+A.truncDivision(s,5);r.get(s)&&e.set(u,a-7),r.get(s+10)&&e.set(a+7,u),r.get(29-s)&&e.set(u,a+7),r.get(39-s)&&e.set(a-7,u)}}},{key:"generateCheckWords",value:function(t,n,r){var a=t.getSize()/r,i=new Nn(e.getGF(r)),o=A.truncDivision(n,r),s=e.bitsToWords(t,r,o);i.encode(s,o-a);var u=n%r,l=new T;l.appendBits(0,u);for(var c=0,d=Array.from(s);c<d.length;c++){var h=d[c];l.appendBits(h,r)}return l}},{key:"bitsToWords",value:function(e,t,n){var r,a,i=new Int32Array(n);for(r=0,a=e.getSize()/t;r<a;r++){for(var o=0,s=0;s<t;s++)o|=e.get(r*t+s)?1<<t-s-1:0;i[r]=o}return i}},{key:"getGF",value:function(e){switch(e){case 4:return re.AZTEC_PARAM;case 6:return re.AZTEC_DATA_6;case 8:return re.AZTEC_DATA_8;case 10:return re.AZTEC_DATA_10;case 12:return re.AZTEC_DATA_12;default:throw new b("Unsupported word size "+e)}}},{key:"stuffBits",value:function(e,t){for(var n=new T,r=e.getSize(),a=(1<<t)-2,i=0;i<r;i+=t){for(var o=0,s=0;s<t;s++)(i+s>=r||e.get(i+s))&&(o|=1<<t-1-s);(o&a)===a?(n.appendBits(o&a,t),i--):0===(o&a)?(n.appendBits(1|o,t),i--):n.appendBits(o,t)}return n}},{key:"totalBitsInLayer",value:function(e,t){return((t?88:112)+16*e)*e}}]),e}();hr.DEFAULT_EC_PERCENT=33,hr.DEFAULT_AZTEC_LAYERS=0,hr.MAX_NB_BITS=32,hr.MAX_NB_BITS_COMPACT=4,hr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);var fr=function(){function e(){l(this,e)}return c(e,[{key:"encode",value:function(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}},{key:"encodeWithHints",value:function(t,n,r,a,i){var o=Gn.ISO_8859_1,s=hr.DEFAULT_EC_PERCENT,u=hr.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(Rn.CHARACTER_SET)&&(o=Hn.forName(i.get(Rn.CHARACTER_SET).toString())),i.has(Rn.ERROR_CORRECTION)&&(s=A.parseInt(i.get(Rn.ERROR_CORRECTION).toString())),i.has(Rn.AZTEC_LAYERS)&&(u=A.parseInt(i.get(Rn.AZTEC_LAYERS).toString()))),e.encodeLayers(t,n,r,a,o,s,u)}}],[{key:"encodeLayers",value:function(t,n,r,a,i,o,s){if(n!==Q.AZTEC)throw new b("Can only encode AZTEC, but got "+n);var u=hr.encode(F.getBytes(t,i),o,s);return e.renderResult(u,r,a)}},{key:"renderResult",value:function(e,t,n){var r=e.getMatrix();if(null==r)throw new ie;for(var a=r.getWidth(),i=r.getHeight(),o=Math.max(t,a),s=Math.max(n,i),u=Math.min(o/a,s/i),l=(o-a*u)/2,c=(s-i*u)/2,d=new B(o,s),h=0,f=c;h<i;h++,f+=u)for(var p=0,m=l;p<a;p++,m+=u)r.get(p,h)&&d.setRegion(m,f,u,u);return d}}]),e}();e.AbstractExpandedDecoder=qe,e.ArgumentException=y,e.ArithmeticException=ne,e.AztecCode=Kn,e.AztecCodeReader=xe,e.AztecCodeWriter=fr,e.AztecDecoder=ue,e.AztecDetector=we,e.AztecDetectorResult=fe,e.AztecEncoder=hr,e.AztecHighLevelEncoder=dr,e.AztecPoint=be,e.BarcodeFormat=Q,e.Binarizer=k,e.BinaryBitmap=w,e.BitArray=T,e.BitMatrix=B,e.BitSource=wt,e.BrowserAztecCodeReader=ke,e.BrowserBarcodeReader=ft,e.BrowserCodeReader=Y,e.BrowserDatamatrixCodeReader=_t,e.BrowserMultiFormatReader=An,e.BrowserPDF417Reader=In,e.BrowserQRCodeReader=Tn,e.BrowserQRCodeSvgWriter=jn,e.CharacterSetECI=M,e.ChecksumException=x,e.Code128Reader=Ee,e.Code39Reader=Se,e.DataMatrixDecodedBitStreamParser=xt,e.DataMatrixReader=Et,e.DecodeHintType=N,e.DecoderResult=$,e.DefaultGridSampler=ge,e.DetectorResult=he,e.EAN13Reader=De,e.EncodeHintType=Rn,e.Exception=g,e.FormatException=D,e.GenericGF=re,e.GenericGFPoly=te,e.GlobalHistogramBinarizer=z,e.GridSampler=me,e.GridSamplerInstance=ye,e.HTMLCanvasElementLuminanceSource=H,e.HybridBinarizer=U,e.ITFReader=_e,e.IllegalArgumentException=b,e.IllegalStateException=ie,e.InvertedLuminanceSource=W,e.LuminanceSource=V,e.MathUtils=le,e.MultiFormatOneDReader=ht,e.MultiFormatReader=_n,e.MultiFormatWriter=Un,e.NotFoundException=j,e.OneDReader=Ce,e.PDF417DecodedBitStreamParser=xn,e.PDF417DecoderErrorCorrection=$t,e.PDF417Reader=Cn,e.PDF417ResultMetadata=cn,e.PerspectiveTransform=ve,e.PlanarYUVLuminanceSource=Vn,e.QRCodeByteMatrix=Mn,e.QRCodeDataMask=Mt,e.QRCodeDecodedBitStreamParser=Bt,e.QRCodeDecoderErrorCorrectionLevel=At,e.QRCodeDecoderFormatInformation=It,e.QRCodeEncoder=Bn,e.QRCodeEncoderQRCode=On,e.QRCodeMaskUtil=Dn,e.QRCodeMatrixUtil=Fn,e.QRCodeMode=Lt,e.QRCodeReader=Xt,e.QRCodeVersion=Dt,e.QRCodeWriter=zn,e.RGBLuminanceSource=Wn,e.RSS14Reader=dt,e.RSSExpandedReader=lt,e.ReaderException=En,e.ReedSolomonDecoder=se,e.ReedSolomonEncoder=Nn,e.ReedSolomonException=ae,e.Result=q,e.ResultMetadataType=J,e.ResultPoint=de,e.StringUtils=F,e.UnsupportedOperationException=O,e.VideoInputDevice=K,e.WhiteRectangleDetector=pe,e.WriterException=Pn,e.ZXingArrays=_,e.ZXingCharset=Hn,e.ZXingInteger=A,e.ZXingStandardCharsets=Gn,e.ZXingStringBuilder=L,e.ZXingStringEncoding=P,e.ZXingSystem=C,e.createAbstractExpandedDecoder=ot,Object.defineProperty(e,"__esModule",{value:!0})}(t)},4463:function(e,t,n){"use strict";var r=n(2791),a=n(5296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=v.hasOwnProperty(t)?v[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),A=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var F,L=Object.assign;function B(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var j=!1;function z(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var a=l.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var u="\n"+a[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function U(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case k:return"Portal";case S:return"Profiler";case E:return"StrictMode";case T:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function q(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ge=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ce=null,Ee=null;function Se(e){if(e=ba(e)){if("function"!==typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=xa(t),ke(e.stateNode,e.type,t))}}function _e(e){Ce?Ee?Ee.push(e):Ee=[e]:Ce=e}function Ae(){if(Ce){var e=Ce,t=Ee;if(Ee=Ce=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ie(e,t){return e(t)}function Te(){}var Re=!1;function Ne(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==Ce||null!==Ee)&&(Te(),Ae())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=xa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Me=!1;if(c)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ce){Me=!1}function Pe(e,t,n,r,a,i,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Fe=!1,Le=null,Be=!1,je=null,ze={onError:function(e){Fe=!0,Le=e}};function Ue(e,t,n,r,a,i,o,s,u){Fe=!1,Le=null,Pe.apply(ze,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(i(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return He(a),e;if(o===r)return He(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Xe=a.unstable_scheduleCallback,Ye=a.unstable_cancelCallback,qe=a.unstable_shouldYield,Ze=a.unstable_requestPaint,Qe=a.unstable_now,Je=a.unstable_getCurrentPriorityLevel,$e=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~a;0!==s?r=dt(s):0!==(i&=o)&&(r=dt(i))}else 0!==(o=n&~a)?r=dt(o):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,kt,Ct,Et,St,_t=!1,At=[],It=null,Tt=null,Rt=null,Nt=new Map,Dt=new Map,Mt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Ft(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lt(e){var t=ya(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void St(e.priority,(function(){Ct(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function jt(e,t,n){Bt(e)&&n.delete(t)}function zt(){_t=!1,null!==It&&Bt(It)&&(It=null),null!==Tt&&Bt(Tt)&&(Tt=null),null!==Rt&&Bt(Rt)&&(Rt=null),Nt.forEach(jt),Dt.forEach(jt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,zt)))}function Vt(e){function t(t){return Ut(t,e)}if(0<At.length){Ut(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Ut(It,e),null!==Tt&&Ut(Tt,e),null!==Rt&&Ut(Rt,e),Nt.forEach(t),Dt.forEach(t),n=0;n<Mt.length;n++)(r=Mt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Mt.shift()}var Wt=w.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var a=bt,i=Wt.transition;Wt.transition=null;try{bt=1,Xt(e,t,n,r)}finally{bt=a,Wt.transition=i}}function Kt(e,t,n,r){var a=bt,i=Wt.transition;Wt.transition=null;try{bt=4,Xt(e,t,n,r)}finally{bt=a,Wt.transition=i}}function Xt(e,t,n,r){if(Ht){var a=qt(e,t,n,r);if(null===a)Hr(e,t,r,Yt,n),Pt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return It=Ft(It,e,t,n,r,a),!0;case"dragenter":return Tt=Ft(Tt,e,t,n,r,a),!0;case"mouseover":return Rt=Ft(Rt,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Nt.set(i,Ft(Nt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Dt.set(i,Ft(Dt.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&xt(i),null===(i=qt(e,t,n,r))&&Hr(e,t,r,Yt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Yt=null;function qt(e,t,n,r){if(Yt=null,null!==(e=ya(e=xe(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,$t=null;function en(){if($t)return $t;var e,t,n=Jt,r=n.length,a="value"in Qt?Qt.value:Qt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return $t=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),dn=L({},ln,{view:0,detail:0}),hn=an(dn),fn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(fn),mn=an(L({},fn,{dataTransfer:0})),vn=an(L({},dn,{relatedTarget:0})),gn=an(L({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),wn=an(L({},ln,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function Sn(){return En}var _n=L({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=an(_n),In=an(L({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Rn=an(L({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=L({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Nn),Mn=[9,13,27,32],On=c&&"CompositionEvent"in window,Pn=null;c&&"documentMode"in document&&(Pn=document.documentMode);var Fn=c&&"TextEvent"in window&&!Pn,Ln=c&&(!On||Pn&&8<Pn&&11>=Pn),Bn=String.fromCharCode(32),jn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Gn(e,t,n,r){_e(r),0<(t=Kr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Xn=null;function Yn(e){Br(e,0)}function qn(e){if(X(wa(e)))return e}function Zn(e,t){if("change"===e)return t}var Qn=!1;if(c){var Jn;if(c){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Jn=$n}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Xn=Kn=null)}function nr(e){if("value"===e.propertyName&&qn(Xn)){var t=[];Gn(t,Xn,e,xe(e)),Ne(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qn(Xn)}function ir(e,t){if("click"===e)return qn(t)}function or(e,t){if("input"===e||"change"===e)return qn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=cr(n,i);var o=cr(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,vr=null,gr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==vr||vr!==Y(r)||("selectionStart"in(r=vr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Kr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Cr={},Er={};function Sr(e){if(Cr[e])return Cr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Cr[e]=n[t];return e}c&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var _r=Sr("animationend"),Ar=Sr("animationiteration"),Ir=Sr("animationstart"),Tr=Sr("transitionend"),Rr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Rr.set(e,t),u(t,[e])}for(var Mr=0;Mr<Nr.length;Mr++){var Or=Nr[Mr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(_r,"onAnimationEnd"),Dr(Ar,"onAnimationIteration"),Dr(Ir,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Tr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,u,l){if(Ue.apply(this,arguments),Fe){if(!Fe)throw Error(i(198));var c=Le;Fe=!1,Le=null,Be||(Be=!0,je=c)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==i&&a.isPropagationStopped())break e;Lr(a,s,l),i=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==i&&a.isPropagationStopped())break e;Lr(a,s,l),i=u}}}if(Be)throw e=je,Be=!1,je=null,e}function jr(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,zr("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Zt(t)){case 1:var a=Gt;break;case 4:a=Kt;break;default:a=Xt}n=a.bind(null,t,n,e),a=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ya(s)))return;if(5===(u=o.tag)||6===u){r=i=o;continue e}s=s.parentNode}}r=r.return}Ne((function(){var r=i,a=xe(n),o=[];e:{var s=Rr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=An;break;case"focusin":l="focus",u=vn;break;case"focusout":l="blur",u=vn;break;case"beforeblur":case"afterblur":u=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Tn;break;case _r:case Ar:case Ir:u=gn;break;case Tr:u=Rn;break;case"scroll":u=hn;break;case"wheel":u=Dn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=De(p,h))&&c.push(Gr(p,m,f)))),d)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,a),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(l=n.relatedTarget||n.fromElement)||!ya(l)&&!l[pa])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?ya(l):null)&&(l!==(d=Ve(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==u?s:wa(u),f=null==l?s:wa(l),(s=new c(m,p+"leave",u,n,a)).target=d,s.relatedTarget=f,m=null,ya(a)===r&&((c=new c(h,p+"enter",l,n,a)).target=f,c.relatedTarget=d,m=c),d=m,u&&l)e:{for(h=l,p=0,f=c=u;f;f=Xr(f))p++;for(f=0,m=h;m;m=Xr(m))f++;for(;0<p-f;)c=Xr(c),p--;for(;0<f-p;)h=Xr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Xr(c),h=Xr(h)}c=null}else c=null;null!==u&&Yr(o,s,u,c,!1),null!==l&&null!==d&&Yr(o,d,l,c,!0)}if("select"===(u=(s=r?wa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=Zn;else if(Hn(s))if(Qn)v=or;else{v=ar;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ir);switch(v&&(v=v(e,r))?Gn(o,v,n,a):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?wa(r):window,e){case"focusin":(Hn(g)||"true"===g.contentEditable)&&(vr=g,gr=r,yr=null);break;case"focusout":yr=gr=vr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(o,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(o,n,a)}var y;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=en()):(Jt="value"in(Qt=a)?Qt.value:Qt.textContent,Vn=!0)),0<(g=Kr(r,b)).length&&(b=new wn(b,e,null,n,a),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=Fn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(jn=!0,Bn);case"textInput":return(e=t.data)===Bn&&jn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!On&&zn(e,t)?(e=en(),$t=Jt=Qt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(a=new wn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}Br(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=De(e,n))&&r.unshift(Gr(e,i,a)),null!=(i=De(e,t))&&r.push(Gr(e,i,a))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,a?null!=(u=De(n,i))&&o.unshift(Gr(n,u,s)):a||null!=(u=De(n,i))&&o.push(Gr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var qr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(qr,"\n").replace(Zr,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(i(425))}function $r(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function ua(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Vt(t)}function la(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ca(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,fa="__reactProps$"+da,pa="__reactContainer$"+da,ma="__reactEvents$"+da,va="__reactListeners$"+da,ga="__reactHandles$"+da;function ya(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ca(e);null!==e;){if(n=e[ha])return n;e=ca(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[ha]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function xa(e){return e[fa]||null}var ka=[],Ca=-1;function Ea(e){return{current:e}}function Sa(e){0>Ca||(e.current=ka[Ca],ka[Ca]=null,Ca--)}function _a(e,t){Ca++,ka[Ca]=e.current,e.current=t}var Aa={},Ia=Ea(Aa),Ta=Ea(!1),Ra=Aa;function Na(e,t){var n=e.type.contextTypes;if(!n)return Aa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Da(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ma(){Sa(Ta),Sa(Ia)}function Oa(e,t,n){if(Ia.current!==Aa)throw Error(i(168));_a(Ia,t),_a(Ta,n)}function Pa(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,W(e)||"Unknown",a));return L({},n,r)}function Fa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Aa,Ra=Ia.current,_a(Ia,e),_a(Ta,Ta.current),!0}function La(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Pa(e,t,Ra),r.__reactInternalMemoizedMergedChildContext=e,Sa(Ta),Sa(Ia),_a(Ia,e)):Sa(Ta),_a(Ta,n)}var Ba=null,ja=!1,za=!1;function Ua(e){null===Ba?Ba=[e]:Ba.push(e)}function Va(){if(!za&&null!==Ba){za=!0;var e=0,t=bt;try{var n=Ba;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ba=null,ja=!1}catch(a){throw null!==Ba&&(Ba=Ba.slice(e+1)),Xe($e,Va),a}finally{bt=t,za=!1}}return null}var Wa=[],Ha=0,Ga=null,Ka=0,Xa=[],Ya=0,qa=null,Za=1,Qa="";function Ja(e,t){Wa[Ha++]=Ka,Wa[Ha++]=Ga,Ga=e,Ka=t}function $a(e,t,n){Xa[Ya++]=Za,Xa[Ya++]=Qa,Xa[Ya++]=qa,qa=e;var r=Za;e=Qa;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Za=1<<32-ot(t)+a|n<<a|r,Qa=i+e}else Za=1<<i|n<<a|r,Qa=e}function ei(e){null!==e.return&&(Ja(e,1),$a(e,1,0))}function ti(e){for(;e===Ga;)Ga=Wa[--Ha],Wa[Ha]=null,Ka=Wa[--Ha],Wa[Ha]=null;for(;e===qa;)qa=Xa[--Ya],Xa[Ya]=null,Qa=Xa[--Ya],Xa[Ya]=null,Za=Xa[--Ya],Xa[Ya]=null}var ni=null,ri=null,ai=!1,ii=null;function oi(e,t){var n=Nl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function si(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=la(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==qa?{id:Za,overflow:Qa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function ui(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function li(e){if(ai){var t=ri;if(t){var n=t;if(!si(e,t)){if(ui(e))throw Error(i(418));t=la(n.nextSibling);var r=ni;t&&si(e,t)?oi(r,n):(e.flags=-4097&e.flags|2,ai=!1,ni=e)}}else{if(ui(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ni=e}}}function ci(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!ai)return ci(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ri)){if(ui(e))throw hi(),Error(i(418));for(;t;)oi(e,t),t=la(t.nextSibling)}if(ci(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=la(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?la(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=la(e.nextSibling)}function fi(){ri=ni=null,ai=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var mi=w.ReactCurrentBatchConfig;function vi(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var gi=Ea(null),yi=null,bi=null,wi=null;function xi(){wi=bi=yi=null}function ki(e){var t=gi.current;Sa(gi),e._currentValue=t}function Ci(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ei(e,t){yi=e,wi=bi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Si(e){var t=e._currentValue;if(wi!==e)if(e={context:e,memoizedValue:t,next:null},null===bi){if(null===yi)throw Error(i(308));bi=e,yi.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var _i=null;function Ai(e){null===_i?_i=[e]:_i.push(e)}function Ii(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Ai(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ti(e,r)}function Ti(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ri=!1;function Ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Di(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Iu)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ti(e,n)}return null===(a=r.interleaved)?(t.next=t,Ai(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ti(e,n)}function Pi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Fi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Li(e,t,n,r){var a=e.updateQueue;Ri=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var u=s,l=u.next;u.next=null,null===o?i=l:o.next=l,o=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==i){var d=a.baseState;for(o=0,c=l=u=null,s=i;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=L({},d,h);break e;case 2:Ri=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=f,u=d):c=c.next=f,o|=h;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(h=s).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===c&&(u=d),a.baseState=u,a.firstBaseUpdate=l,a.lastBaseUpdate=c,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Fu|=o,e.lanes=o,e.memoizedState=d}}function Bi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var ji=(new r.Component).refs;function zi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ui={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),a=tl(e),i=Mi(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Oi(e,i,a))&&(nl(t,e,a,r),Pi(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),a=tl(e),i=Mi(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Oi(e,i,a))&&(nl(t,e,a,r),Pi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),a=Mi(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Oi(e,a,r))&&(nl(t,e,r,n),Pi(t,e,r))}};function Vi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(a,i))}function Wi(e,t,n){var r=!1,a=Aa,i=t.contextType;return"object"===typeof i&&null!==i?i=Si(i):(a=Da(t)?Ra:Ia.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Na(e,a):Aa),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ui,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Hi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ui.enqueueReplaceState(t,t.state,null)}function Gi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=ji,Ni(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Si(i):(i=Da(t)?Ra:Ia.current,a.context=Na(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(zi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Ui.enqueueReplaceState(a,a.state,null),Li(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Ki(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===ji&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Xi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yi(e){return(0,e._init)(e._payload)}function qi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Ml(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ll(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===C?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===D&&Yi(i)===t.type)?((r=a(t,n.props)).ref=Ki(e,t,n),r.return=e,r):((r=Ol(n.type,n.key,n.props,null,e.mode,r)).ref=Ki(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bl(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Pl(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ll(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Ol(t.type,t.key,t.props,null,e.mode,n)).ref=Ki(e,null,t),n.return=e,n;case k:return(t=Bl(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Pl(t,e.mode,n,null)).return=e,t;Xi(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===a?l(e,t,n,r):null;case k:return n.key===a?c(e,t,n,r):null;case D:return f(e,t,(a=n._init)(n._payload),r)}if(te(n)||P(n))return null!==a?null:d(e,t,n,r,null);Xi(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case D:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||P(r))return d(t,e=e.get(n)||null,r,a,null);Xi(t,r)}return null}function m(a,i,s,u){for(var l=null,c=null,d=i,m=i=0,v=null;null!==d&&m<s.length;m++){d.index>m?(v=d,d=null):v=d.sibling;var g=f(a,d,s[m],u);if(null===g){null===d&&(d=v);break}e&&d&&null===g.alternate&&t(a,d),i=o(g,i,m),null===c?l=g:c.sibling=g,c=g,d=v}if(m===s.length)return n(a,d),ai&&Ja(a,m),l;if(null===d){for(;m<s.length;m++)null!==(d=h(a,s[m],u))&&(i=o(d,i,m),null===c?l=d:c.sibling=d,c=d);return ai&&Ja(a,m),l}for(d=r(a,d);m<s.length;m++)null!==(v=p(d,a,m,s[m],u))&&(e&&null!==v.alternate&&d.delete(null===v.key?m:v.key),i=o(v,i,m),null===c?l=v:c.sibling=v,c=v);return e&&d.forEach((function(e){return t(a,e)})),ai&&Ja(a,m),l}function v(a,s,u,l){var c=P(u);if("function"!==typeof c)throw Error(i(150));if(null==(u=c.call(u)))throw Error(i(151));for(var d=c=null,m=s,v=s=0,g=null,y=u.next();null!==m&&!y.done;v++,y=u.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=f(a,m,y.value,l);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(a,m),s=o(b,s,v),null===d?c=b:d.sibling=b,d=b,m=g}if(y.done)return n(a,m),ai&&Ja(a,v),c;if(null===m){for(;!y.done;v++,y=u.next())null!==(y=h(a,y.value,l))&&(s=o(y,s,v),null===d?c=y:d.sibling=y,d=y);return ai&&Ja(a,v),c}for(m=r(a,m);!y.done;v++,y=u.next())null!==(y=p(m,a,v,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=o(y,s,v),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(a,e)})),ai&&Ja(a,v),c}return function e(r,i,o,u){if("object"===typeof o&&null!==o&&o.type===C&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var l=o.key,c=i;null!==c;){if(c.key===l){if((l=o.type)===C){if(7===c.tag){n(r,c.sibling),(i=a(c,o.props.children)).return=r,r=i;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===D&&Yi(l)===c.type){n(r,c.sibling),(i=a(c,o.props)).ref=Ki(r,c,o),i.return=r,r=i;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===C?((i=Pl(o.props.children,r.mode,u,o.key)).return=r,r=i):((u=Ol(o.type,o.key,o.props,null,r.mode,u)).ref=Ki(r,i,o),u.return=r,r=u)}return s(r);case k:e:{for(c=o.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=a(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Bl(o,r.mode,u)).return=r,r=i}return s(r);case D:return e(r,i,(c=o._init)(o._payload),u)}if(te(o))return m(r,i,o,u);if(P(o))return v(r,i,o,u);Xi(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,o)).return=r,r=i):(n(r,i),(i=Ll(o,r.mode,u)).return=r,r=i),s(r)):n(r,i)}}var Zi=qi(!0),Qi=qi(!1),Ji={},$i=Ea(Ji),eo=Ea(Ji),to=Ea(Ji);function no(e){if(e===Ji)throw Error(i(174));return e}function ro(e,t){switch(_a(to,t),_a(eo,e),_a($i,Ji),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sa($i),_a($i,t)}function ao(){Sa($i),Sa(eo),Sa(to)}function io(e){no(to.current);var t=no($i.current),n=ue(t,e.type);t!==n&&(_a(eo,e),_a($i,n))}function oo(e){eo.current===e&&(Sa($i),Sa(eo))}var so=Ea(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function co(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=w.ReactCurrentDispatcher,fo=w.ReactCurrentBatchConfig,po=0,mo=null,vo=null,go=null,yo=!1,bo=!1,wo=0,xo=0;function ko(){throw Error(i(321))}function Co(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,a,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,a),bo){o=0;do{if(bo=!1,wo=0,25<=o)throw Error(i(301));o+=1,go=vo=null,t.updateQueue=null,ho.current=ls,e=n(r,a)}while(bo)}if(ho.current=os,t=null!==vo&&null!==vo.next,po=0,go=vo=mo=null,yo=!1,t)throw Error(i(300));return e}function So(){var e=0!==wo;return wo=0,e}function _o(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?mo.memoizedState=go=e:go=go.next=e,go}function Ao(){if(null===vo){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=vo.next;var t=null===go?mo.memoizedState:go.next;if(null!==t)go=t,vo=e;else{if(null===e)throw Error(i(310));e={memoizedState:(vo=e).memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},null===go?mo.memoizedState=go=e:go=go.next=e}return go}function Io(e,t){return"function"===typeof t?t(e):t}function To(e){var t=Ao(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=vo,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var u=s=null,l=null,c=o;do{var d=c.lane;if((po&d)===d)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=h,s=r):l=l.next=h,mo.lanes|=d,Fu|=d}c=c.next}while(null!==c&&c!==o);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(ws=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,mo.lanes|=o,Fu|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ro(e){var t=Ao(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sr(o,t.memoizedState)||(ws=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function No(){}function Do(e,t){var n=mo,r=Ao(),a=t(),o=!sr(r.memoizedState,a);if(o&&(r.memoizedState=a,ws=!0),r=r.queue,Ho(Po.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,jo(9,Oo.bind(null,n,r,a,t),void 0,null),null===Tu)throw Error(i(349));0!==(30&po)||Mo(n,t,a)}return a}function Mo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Fo(t)&&Lo(e)}function Po(e,t,n){return n((function(){Fo(t)&&Lo(e)}))}function Fo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Lo(e){var t=Ti(e,1);null!==t&&nl(t,e,1,-1)}function Bo(e){var t=_o();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,mo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return Ao().memoizedState}function Uo(e,t,n,r){var a=_o();mo.flags|=e,a.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Vo(e,t,n,r){var a=Ao();r=void 0===r?null:r;var i=void 0;if(null!==vo){var o=vo.memoizedState;if(i=o.destroy,null!==r&&Co(r,o.deps))return void(a.memoizedState=jo(t,n,i,r))}mo.flags|=e,a.memoizedState=jo(1|t,n,i,r)}function Wo(e,t){return Uo(8390656,8,e,t)}function Ho(e,t){return Vo(2048,8,e,t)}function Go(e,t){return Vo(4,2,e,t)}function Ko(e,t){return Vo(4,4,e,t)}function Xo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Yo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4,4,Xo.bind(null,t,e),n)}function qo(){}function Zo(e,t){var n=Ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Co(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qo(e,t){var n=Ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Co(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),mo.lanes|=n,Fu|=n,e.baseState=!0),t)}function $o(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{bt=n,fo.transition=r}}function es(){return Ao().memoizedState}function ts(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))as(t,n);else if(null!==(n=Ii(e,t,n,r))){nl(n,e,r,el()),is(n,t,r)}}function ns(e,t,n){var r=tl(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))as(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(a.next=a,Ai(t)):(a.next=u.next,u.next=a),void(t.interleaved=a)}}catch(l){}null!==(n=Ii(e,t,a,r))&&(nl(n,e,r,a=el()),is(n,t,r))}}function rs(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function as(e,t){bo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function is(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Si,useCallback:ko,useContext:ko,useEffect:ko,useImperativeHandle:ko,useInsertionEffect:ko,useLayoutEffect:ko,useMemo:ko,useReducer:ko,useRef:ko,useState:ko,useDebugValue:ko,useDeferredValue:ko,useTransition:ko,useMutableSource:ko,useSyncExternalStore:ko,useId:ko,unstable_isNewReconciler:!1},ss={readContext:Si,useCallback:function(e,t){return _o().memoizedState=[e,void 0===t?null:t],e},useContext:Si,useEffect:Wo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4194308,4,Xo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uo(4,2,e,t)},useMemo:function(e,t){var n=_o();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_o();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_o().memoizedState=e},useState:Bo,useDebugValue:qo,useDeferredValue:function(e){return _o().memoizedState=e},useTransition:function(){var e=Bo(!1),t=e[0];return e=$o.bind(null,e[1]),_o().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,a=_o();if(ai){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Tu)throw Error(i(349));0!==(30&po)||Mo(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Wo(Po.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=_o(),t=Tu.identifierPrefix;if(ai){var n=Qa;t=":"+t+"R"+(n=(Za&~(1<<32-ot(Za)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Si,useCallback:Zo,useContext:Si,useEffect:Ho,useImperativeHandle:Yo,useInsertionEffect:Go,useLayoutEffect:Ko,useMemo:Qo,useReducer:To,useRef:zo,useState:function(){return To(Io)},useDebugValue:qo,useDeferredValue:function(e){return Jo(Ao(),vo.memoizedState,e)},useTransition:function(){return[To(Io)[0],Ao().memoizedState]},useMutableSource:No,useSyncExternalStore:Do,useId:es,unstable_isNewReconciler:!1},ls={readContext:Si,useCallback:Zo,useContext:Si,useEffect:Ho,useImperativeHandle:Yo,useInsertionEffect:Go,useLayoutEffect:Ko,useMemo:Qo,useReducer:Ro,useRef:zo,useState:function(){return Ro(Io)},useDebugValue:qo,useDeferredValue:function(e){var t=Ao();return null===vo?t.memoizedState=e:Jo(t,vo.memoizedState,e)},useTransition:function(){return[Ro(Io)[0],Ao().memoizedState]},useMutableSource:No,useSyncExternalStore:Do,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Mi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Gu=r),hs(0,t)},n}function ms(e,t,n){(n=Mi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){hs(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Ku?Ku=new Set([this]):Ku.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Sl.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Mi(-1,1)).tag=2,Oi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bs=w.ReactCurrentOwner,ws=!1;function xs(e,t,n,r){t.child=null===e?Qi(t,null,n,r):Zi(t,e.child,n,r)}function ks(e,t,n,r,a){n=n.render;var i=t.ref;return Ei(t,a),r=Eo(e,t,n,r,i,a),n=So(),null===e||ws?(ai&&n&&ei(t),t.flags|=1,xs(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hs(e,t,a))}function Cs(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Dl(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ol(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Es(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Hs(e,t,a)}return t.flags|=1,(e=Ml(i,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(ur(i,r)&&e.ref===t.ref){if(ws=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,Hs(e,t,a);0!==(131072&e.flags)&&(ws=!0)}}return As(e,t,n,r,a)}function Ss(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_a(Mu,Du),Du|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_a(Mu,Du),Du|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,_a(Mu,Du),Du|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,_a(Mu,Du),Du|=r;return xs(e,t,a,n),t.child}function _s(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function As(e,t,n,r,a){var i=Da(n)?Ra:Ia.current;return i=Na(t,i),Ei(t,a),n=Eo(e,t,n,r,i,a),r=So(),null===e||ws?(ai&&r&&ei(t),t.flags|=1,xs(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hs(e,t,a))}function Is(e,t,n,r,a){if(Da(n)){var i=!0;Fa(t)}else i=!1;if(Ei(t,a),null===t.stateNode)Ws(e,t),Wi(t,n,r),Gi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Si(l):l=Na(t,l=Da(n)?Ra:Ia.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&Hi(t,o,r,l),Ri=!1;var h=t.memoizedState;o.state=h,Li(t,r,o,a),u=t.memoizedState,s!==r||h!==u||Ta.current||Ri?("function"===typeof c&&(zi(t,n,c,r),u=t.memoizedState),(s=Ri||Vi(t,n,s,r,h,u,l))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Di(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:vi(t.type,s),o.props=l,d=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Si(u):u=Na(t,u=Da(n)?Ra:Ia.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||h!==u)&&Hi(t,o,r,u),Ri=!1,h=t.memoizedState,o.state=h,Li(t,r,o,a);var p=t.memoizedState;s!==d||h!==p||Ta.current||Ri?("function"===typeof f&&(zi(t,n,f,r),p=t.memoizedState),(l=Ri||Vi(t,n,l,r,h,p,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ts(e,t,n,r,i,a)}function Ts(e,t,n,r,a,i){_s(e,t);var o=0!==(128&t.flags);if(!r&&!o)return a&&La(t,n,!1),Hs(e,t,i);r=t.stateNode,bs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Zi(t,e.child,null,i),t.child=Zi(t,null,s,i)):xs(e,t,s,i),t.memoizedState=r.state,a&&La(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?Oa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oa(0,t.context,!1),ro(e,t.containerInfo)}function Ns(e,t,n,r,a){return fi(),pi(a),t.flags|=256,xs(e,t,n,r),t.child}var Ds,Ms,Os,Ps={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ls(e,t,n){var r,a=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),_a(so,1&o),null===e)return li(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=a.children,e=a.fallback,s?(a=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Fl(u,a,0,null),e=Pl(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Ps,e):Bs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,a,o,s){if(n)return 256&t.flags?(t.flags&=-257,js(e,t,s,r=ds(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=Fl({mode:"visible",children:r.children},a,0,null),(o=Pl(o,a,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Zi(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ps,o);if(0===(1&t.mode))return js(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var u=r.dgst;return r=u,js(e,t,s,r=ds(o=Error(i(419)),r,void 0))}if(u=0!==(s&e.childLanes),ws||u){if(null!==(r=Tu)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Ti(e,a),nl(r,e,a,-1))}return ml(),js(e,t,s,r=ds(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Al.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ri=la(a.nextSibling),ni=t,ai=!0,ii=null,null!==e&&(Xa[Ya++]=Za,Xa[Ya++]=Qa,Xa[Ya++]=qa,Za=e.id,Qa=e.overflow,qa=t),t=Bs(t,r.children),t.flags|=4096,t)}(e,t,u,a,r,o,n);if(s){s=a.fallback,u=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:a.children};return 0===(1&u)&&t.child!==o?((a=t.child).childLanes=0,a.pendingProps=l,t.deletions=null):(a=Ml(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Ml(r,s):(s=Pl(s,u,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,u=null===(u=e.child.memoizedState)?Fs(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ps,a}return e=(s=e.child).sibling,a=Ml(s,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Bs(e,t){return(t=Fl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function js(e,t,n,r){return null!==r&&pi(r),Zi(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ci(e.return,t,n)}function Us(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Vs(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_a(so,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Us(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===uo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Us(t,!0,n,null,i);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Ml(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ml(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xs(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Da(t.type)&&Ma(),Ks(t),null;case 3:return r=t.stateNode,ao(),Sa(Ta),Sa(Ia),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(ol(ii),ii=null))),Ks(t),null;case 5:oo(t);var a=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ms(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ks(t),null}if(e=no($i.current),di(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ha]=t,r[fa]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(a=0;a<Pr.length;a++)jr(Pr[a],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Z(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ae(r,o),jr("invalid",r)}for(var u in ye(n,o),a=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),a=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),a=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&jr("scroll",r)}switch(n){case"input":K(r),$(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[ha]=t,e[fa]=r,Ds(e,t),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":jr("cancel",e),jr("close",e),a=r;break;case"iframe":case"object":case"embed":jr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Pr.length;a++)jr(Pr[a],e);a=r;break;case"source":jr("error",e),a=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),a=r;break;case"details":jr("toggle",e),a=r;break;case"input":Z(e,r),a=q(e,r),jr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=L({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),jr("invalid",e)}for(o in ye(n,a),l=a)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?ve(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&jr("scroll",e):null!=c&&b(e,o,c,u))}switch(n){case"input":K(e),$(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Os(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=no(to.current),no($i.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(o=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ha]=t,t.stateNode=r}return Ks(t),null;case 13:if(Sa(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),fi(),t.flags|=98560,o=!1;else if(o=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[ha]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),o=!1}else null!==ii&&(ol(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Ou&&(Ou=3):ml())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return ao(),null===e&&Vr(t.stateNode.containerInfo),Ks(t),null;case 10:return ki(t.type._context),Ks(t),null;case 19:if(Sa(so),null===(o=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Gs(o,!1);else{if(0!==Ou||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Gs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _a(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Vu&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ai)return Ks(t),null}else 2*Qe()-o.renderingStartTime>Vu&&1073741824!==n&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=so.current,_a(so,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Du)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ys(e,t){switch(ti(t),t.tag){case 1:return Da(t.type)&&Ma(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ao(),Sa(Ta),Sa(Ia),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Sa(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sa(so),null;case 4:return ao(),null;case 10:return ki(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Ds=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ms=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,no($i.current);var i,o=null;switch(n){case"input":a=q(e,a),r=q(e,r),o=[];break;case"select":a=L({},a,{value:void 0}),r=L({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(c in ye(n,r),n=null,a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var u=a[c];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=a?a[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(i in u)!u.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&u[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&jr("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Os=function(e,t,n,r){n!==r&&(t.flags|=4)};var qs=!1,Zs=!1,Qs="function"===typeof WeakSet?WeakSet:Set,Js=null;function $s(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){El(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){El(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&eu(t,n,i)}a=a.next}while(a!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function iu(e){var t=e.alternate;null!==t&&(e.alternate=null,iu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[fa],delete t[ma],delete t[va],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var cu=null,du=!1;function hu(e,t,n){for(n=n.child;null!==n;)fu(e,t,n),n=n.sibling}function fu(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(s){}switch(n.tag){case 5:Zs||$s(n,t);case 6:var r=cu,a=du;cu=null,hu(e,t,n),du=a,null!==(cu=r)&&(du?(e=cu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(du?(e=cu,n=n.stateNode,8===e.nodeType?ua(e.parentNode,n):1===e.nodeType&&ua(e,n),Vt(e)):ua(cu,n.stateNode));break;case 4:r=cu,a=du,cu=n.stateNode.containerInfo,du=!0,hu(e,t,n),cu=r,du=a;break;case 0:case 11:case 14:case 15:if(!Zs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&eu(n,t,o),a=a.next}while(a!==r)}hu(e,t,n);break;case 1:if(!Zs&&($s(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){El(n,t,s)}hu(e,t,n);break;case 21:hu(e,t,n);break;case 22:1&n.mode?(Zs=(r=Zs)||null!==n.memoizedState,hu(e,t,n),Zs=r):hu(e,t,n);break;default:hu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach((function(t){var r=Il.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,du=!1;break e;case 3:case 4:cu=u.stateNode.containerInfo,du=!0;break e}u=u.return}if(null===cu)throw Error(i(160));fu(o,s,a),cu=null,du=!1;var l=a.alternate;null!==l&&(l.return=null),a.return=null}catch(c){El(a,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vu(t,e),t=t.sibling}function vu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),gu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(v){El(e,e.return,v)}try{nu(5,e,e.return)}catch(v){El(e,e.return,v)}}break;case 1:mu(t,e),gu(e),512&r&&null!==n&&$s(n,n.return);break;case 5:if(mu(t,e),gu(e),512&r&&null!==n&&$s(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(v){El(e,e.return,v)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&Q(a,o),be(u,s);var c=be(u,o);for(s=0;s<l.length;s+=2){var d=l[s],h=l[s+1];"style"===d?ve(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):b(a,d,h,c)}switch(u){case"input":J(a,o);break;case"textarea":ie(a,o);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(a,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(a,!!o.multiple,o.defaultValue,!0):ne(a,!!o.multiple,o.multiple?[]:"",!1))}a[fa]=o}catch(v){El(e,e.return,v)}}break;case 6:if(mu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(v){El(e,e.return,v)}}break;case 3:if(mu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(v){El(e,e.return,v)}break;case 4:default:mu(t,e),gu(e);break;case 13:mu(t,e),gu(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(Uu=Qe())),4&r&&pu(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Zs=(c=Zs)||d,mu(t,e),Zs=c):mu(t,e),gu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Js=e,d=e.child;null!==d;){for(h=Js=d;null!==Js;){switch(p=(f=Js).child,f.tag){case 0:case 11:case 14:case 15:nu(4,f,f.return);break;case 1:$s(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){El(r,n,v)}}break;case 5:$s(f,f.return);break;case 22:if(null!==f.memoizedState){xu(h);continue}}null!==p?(p.return=f,Js=p):xu(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,c?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=h.stateNode,s=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=me("display",s))}catch(v){El(e,e.return,v)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){El(e,e.return,v)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mu(t,e),gu(e),4&r&&pu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),lu(e,su(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(i(161))}}catch(s){El(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yu(e,t,n){Js=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var a=Js,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||qs;if(!o){var s=a.alternate,u=null!==s&&null!==s.memoizedState||Zs;s=qs;var l=Zs;if(qs=o,(Zs=u)&&!l)for(Js=a;null!==Js;)u=(o=Js).child,22===o.tag&&null!==o.memoizedState?ku(a):null!==u?(u.return=o,Js=u):ku(a);for(;null!==i;)Js=i,bu(i,t,n),i=i.sibling;Js=a,qs=s,Zs=l}wu(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Js=i):wu(e)}}function wu(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zs||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Zs)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:vi(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Bi(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bi(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(i(163))}Zs||512&t.flags&&au(t)}catch(f){El(t,t.return,f)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function xu(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function ku(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){El(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(u){El(t,a,u)}}var i=t.return;try{au(t)}catch(u){El(t,i,u)}break;case 5:var o=t.return;try{au(t)}catch(u){El(t,o,u)}}}catch(u){El(t,t.return,u)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var Cu,Eu=Math.ceil,Su=w.ReactCurrentDispatcher,_u=w.ReactCurrentOwner,Au=w.ReactCurrentBatchConfig,Iu=0,Tu=null,Ru=null,Nu=0,Du=0,Mu=Ea(0),Ou=0,Pu=null,Fu=0,Lu=0,Bu=0,ju=null,zu=null,Uu=0,Vu=1/0,Wu=null,Hu=!1,Gu=null,Ku=null,Xu=!1,Yu=null,qu=0,Zu=0,Qu=null,Ju=-1,$u=0;function el(){return 0!==(6&Iu)?Qe():-1!==Ju?Ju:Ju=Qe()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Iu)&&0!==Nu?Nu&-Nu:null!==mi.transition?(0===$u&&($u=mt()),$u):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function nl(e,t,n,r){if(50<Zu)throw Zu=0,Qu=null,Error(i(185));gt(e,n,r),0!==(2&Iu)&&e===Tu||(e===Tu&&(0===(2&Iu)&&(Lu|=n),4===Ou&&sl(e,Nu)),rl(e,r),1===n&&0===Iu&&0===(1&t.mode)&&(Vu=Qe()+500,ja&&Va()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,u=a[o];-1===u?0!==(s&n)&&0===(s&r)||(a[o]=ft(s,t)):u<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ht(e,e===Tu?Nu:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){ja=!0,Ua(e)}(ul.bind(null,e)):Ua(ul.bind(null,e)),oa((function(){0===(6&Iu)&&Va()})),n=null;else{switch(wt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tl(n,al.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function al(e,t){if(Ju=-1,$u=0,0!==(6&Iu))throw Error(i(327));var n=e.callbackNode;if(kl()&&e.callbackNode!==n)return null;var r=ht(e,e===Tu?Nu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vl(e,r);else{t=r;var a=Iu;Iu|=2;var o=pl();for(Tu===e&&Nu===t||(Wu=null,Vu=Qe()+500,hl(e,t));;)try{yl();break}catch(u){fl(e,u)}xi(),Su.current=o,Iu=a,null!==Ru?t=0:(Tu=null,Nu=0,t=Ou)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=il(e,a))),1===t)throw n=Pu,hl(e,0),sl(e,r),rl(e,Qe()),n;if(6===t)sl(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!sr(i(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=vl(e,r))&&(0!==(o=pt(e))&&(r=o,t=il(e,o))),1===t))throw n=Pu,hl(e,0),sl(e,r),rl(e,Qe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:xl(e,zu,Wu);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=Uu+500-Qe())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(xl.bind(null,e,zu,Wu),t);break}xl(e,zu,Wu);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>a&&(a=s),r&=~o}if(r=a,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){e.timeoutHandle=ra(xl.bind(null,e,zu,Wu),r);break}xl(e,zu,Wu);break;default:throw Error(i(329))}}}return rl(e,Qe()),e.callbackNode===n?al.bind(null,e):null}function il(e,t){var n=ju;return e.current.memoizedState.isDehydrated&&(hl(e,t).flags|=256),2!==(e=vl(e,t))&&(t=zu,zu=n,null!==t&&ol(t)),e}function ol(e){null===zu?zu=e:zu.push.apply(zu,e)}function sl(e,t){for(t&=~Bu,t&=~Lu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ul(e){if(0!==(6&Iu))throw Error(i(327));kl();var t=ht(e,0);if(0===(1&t))return rl(e,Qe()),null;var n=vl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=il(e,r))}if(1===n)throw n=Pu,hl(e,0),sl(e,t),rl(e,Qe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xl(e,zu,Wu),rl(e,Qe()),null}function ll(e,t){var n=Iu;Iu|=1;try{return e(t)}finally{0===(Iu=n)&&(Vu=Qe()+500,ja&&Va())}}function cl(e){null!==Yu&&0===Yu.tag&&0===(6&Iu)&&kl();var t=Iu;Iu|=1;var n=Au.transition,r=bt;try{if(Au.transition=null,bt=1,e)return e()}finally{bt=r,Au.transition=n,0===(6&(Iu=t))&&Va()}}function dl(){Du=Mu.current,Sa(Mu)}function hl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ma();break;case 3:ao(),Sa(Ta),Sa(Ia),co();break;case 5:oo(r);break;case 4:ao();break;case 13:case 19:Sa(so);break;case 10:ki(r.type._context);break;case 22:case 23:dl()}n=n.return}if(Tu=e,Ru=e=Ml(e.current,null),Nu=Du=t,Ou=0,Pu=null,Bu=Lu=Fu=0,zu=ju=null,null!==_i){for(t=0;t<_i.length;t++)if(null!==(r=(n=_i[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}n.pending=r}_i=null}return e}function fl(e,t){for(;;){var n=Ru;try{if(xi(),ho.current=os,yo){for(var r=mo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}yo=!1}if(po=0,go=vo=mo=null,bo=!1,wo=0,_u.current=null,null===n||null===n.return){Ou=1,Pu=t,Ru=null;break}e:{var o=e,s=n.return,u=n,l=t;if(t=Nu,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,d=u,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&vs(o,c,t),l=c;var m=(t=p).updateQueue;if(null===m){var v=new Set;v.add(l),t.updateQueue=v}else m.add(l);break e}if(0===(1&t)){vs(o,c,t),ml();break e}l=Error(i(426))}else if(ai&&1&u.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,u,0,t),pi(cs(l,u));break e}}o=l=cs(l,u),4!==Ou&&(Ou=2),null===ju?ju=[o]:ju.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Fi(o,ps(0,l,t));break e;case 1:u=l;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ku||!Ku.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Fi(o,ms(o,u,t));break e}}o=o.return}while(null!==o)}wl(n)}catch(w){t=w,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function pl(){var e=Su.current;return Su.current=os,null===e?os:e}function ml(){0!==Ou&&3!==Ou&&2!==Ou||(Ou=4),null===Tu||0===(268435455&Fu)&&0===(268435455&Lu)||sl(Tu,Nu)}function vl(e,t){var n=Iu;Iu|=2;var r=pl();for(Tu===e&&Nu===t||(Wu=null,hl(e,t));;)try{gl();break}catch(a){fl(e,a)}if(xi(),Iu=n,Su.current=r,null!==Ru)throw Error(i(261));return Tu=null,Nu=0,Ou}function gl(){for(;null!==Ru;)bl(Ru)}function yl(){for(;null!==Ru&&!qe();)bl(Ru)}function bl(e){var t=Cu(e.alternate,e,Du);e.memoizedProps=e.pendingProps,null===t?wl(e):Ru=t,_u.current=null}function wl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xs(n,t,Du)))return void(Ru=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Ru=n);if(null===e)return Ou=6,void(Ru=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Ou&&(Ou=5)}function xl(e,t,n){var r=bt,a=Au.transition;try{Au.transition=null,bt=1,function(e,t,n,r){do{kl()}while(null!==Yu);if(0!==(6&Iu))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,o),e===Tu&&(Ru=Tu=null,Nu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xu||(Xu=!0,Tl(tt,(function(){return kl(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Au.transition,Au.transition=null;var s=bt;bt=1;var u=Iu;Iu|=4,_u.current=null,function(e,t){if(ea=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var s=0,u=-1,l=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==a&&3!==h.nodeType||(u=s+a),h!==o||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===a&&(u=s),f===o&&++d===r&&(l=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Ht=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,g=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:vi(t.type,v),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(x){El(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}m=tu,tu=!1}(e,n),vu(n,e),pr(ta),Ht=!!ea,ta=ea=null,e.current=n,yu(n,e,a),Ze(),Iu=u,bt=s,Au.transition=o}else e.current=n;if(Xu&&(Xu=!1,Yu=e,qu=a),o=e.pendingLanes,0===o&&(Ku=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Hu)throw Hu=!1,e=Gu,Gu=null,e;0!==(1&qu)&&0!==e.tag&&kl(),o=e.pendingLanes,0!==(1&o)?e===Qu?Zu++:(Zu=0,Qu=e):Zu=0,Va()}(e,t,n,r)}finally{Au.transition=a,bt=r}return null}function kl(){if(null!==Yu){var e=wt(qu),t=Au.transition,n=bt;try{if(Au.transition=null,bt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,qu=0,0!==(6&Iu))throw Error(i(331));var a=Iu;for(Iu|=4,Js=e.current;null!==Js;){var o=Js,s=o.child;if(0!==(16&Js.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Js=c;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:nu(8,d,o)}var h=d.child;if(null!==h)h.return=d,Js=h;else for(;null!==Js;){var f=(d=Js).sibling,p=d.return;if(iu(d),d===c){Js=null;break}if(null!==f){f.return=p,Js=f;break}Js=p}}}var m=o.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}Js=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Js=s;else e:for(;null!==Js;){if(0!==(2048&(o=Js).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Js=y;break e}Js=o.return}}var b=e.current;for(Js=b;null!==Js;){var w=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Js=w;else e:for(s=b;null!==Js;){if(0!==(2048&(u=Js).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(k){El(u,u.return,k)}if(u===s){Js=null;break e}var x=u.sibling;if(null!==x){x.return=u.return,Js=x;break e}Js=u.return}}if(Iu=a,Va(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(k){}r=!0}return r}finally{bt=n,Au.transition=t}}return!1}function Cl(e,t,n){e=Oi(e,t=ps(0,t=cs(n,t),1),1),t=el(),null!==e&&(gt(e,1,t),rl(e,t))}function El(e,t,n){if(3===e.tag)Cl(e,e,n);else for(;null!==t;){if(3===t.tag){Cl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ku||!Ku.has(r))){t=Oi(t,e=ms(t,e=cs(n,e),1),1),e=el(),null!==t&&(gt(t,1,e),rl(t,e));break}}t=t.return}}function Sl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Tu===e&&(Nu&n)===n&&(4===Ou||3===Ou&&(130023424&Nu)===Nu&&500>Qe()-Uu?hl(e,0):Bu|=n),rl(e,t)}function _l(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=el();null!==(e=Ti(e,t))&&(gt(e,t,n),rl(e,n))}function Al(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),_l(e,n)}function Il(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),_l(e,n)}function Tl(e,t){return Xe(e,t)}function Rl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nl(e,t,n,r){return new Rl(e,t,n,r)}function Dl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ml(e,t){var n=e.alternate;return null===n?((n=Nl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ol(e,t,n,r,a,o){var s=2;if(r=e,"function"===typeof e)Dl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case C:return Pl(n.children,a,o,t);case E:s=8,a|=8;break;case S:return(e=Nl(12,n,t,2|a)).elementType=S,e.lanes=o,e;case T:return(e=Nl(13,n,t,a)).elementType=T,e.lanes=o,e;case R:return(e=Nl(19,n,t,a)).elementType=R,e.lanes=o,e;case M:return Fl(n,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:s=10;break e;case A:s=9;break e;case I:s=11;break e;case N:s=14;break e;case D:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Nl(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Pl(e,t,n,r){return(e=Nl(7,e,r,t)).lanes=n,e}function Fl(e,t,n,r){return(e=Nl(22,e,r,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function Ll(e,t,n){return(e=Nl(6,e,null,t)).lanes=n,e}function Bl(e,t,n){return(t=Nl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jl(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function zl(e,t,n,r,a,i,o,s,u){return e=new jl(e,t,n,s,u),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Nl(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ni(i),e}function Ul(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Vl(e){if(!e)return Aa;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Da(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Da(n))return Pa(e,n,t)}return t}function Wl(e,t,n,r,a,i,o,s,u){return(e=zl(n,r,!0,e,0,i,0,s,u)).context=Vl(null),n=e.current,(i=Mi(r=el(),a=tl(n))).callback=void 0!==t&&null!==t?t:null,Oi(n,i,a),e.current.lanes=a,gt(e,a,r),rl(e,r),e}function Hl(e,t,n,r){var a=t.current,i=el(),o=tl(a);return n=Vl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Mi(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oi(a,t,o))&&(nl(e,a,o,i),Pi(e,a,o)),o}function Gl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xl(e,t){Kl(e,t),(e=e.alternate)&&Kl(e,t)}Cu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ta.current)ws=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ws=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),fi();break;case 5:io(t);break;case 1:Da(t.type)&&Fa(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;_a(gi,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_a(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ls(e,t,n):(_a(so,1&so.current),null!==(e=Hs(e,t,n))?e.sibling:null);_a(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),_a(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Hs(e,t,n)}(e,t,n);ws=0!==(131072&e.flags)}else ws=!1,ai&&0!==(1048576&t.flags)&&$a(t,Ka,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var a=Na(t,Ia.current);Ei(t,n),a=Eo(null,t,r,e,a,n);var o=So();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Da(r)?(o=!0,Fa(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ni(t),a.updater=Ui,t.stateNode=a,a._reactInternals=t,Gi(t,r,e,n),t=Ts(null,t,r,!0,o,n)):(t.tag=0,ai&&o&&ei(t),xs(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Dl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===N)return 14}return 2}(r),e=vi(r,e),a){case 0:t=As(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=ks(null,t,r,e,n);break e;case 14:t=Cs(null,t,r,vi(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,As(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 1:return r=t.type,a=t.pendingProps,Is(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 3:e:{if(Rs(t),null===e)throw Error(i(387));r=t.pendingProps,a=(o=t.memoizedState).element,Di(e,t),Li(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ns(e,t,r,n,a=cs(Error(i(423)),t));break e}if(r!==a){t=Ns(e,t,r,n,a=cs(Error(i(424)),t));break e}for(ri=la(t.stateNode.containerInfo.firstChild),ni=t,ai=!0,ii=null,n=Qi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===a){t=Hs(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return io(t),null===e&&li(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==o&&na(r,o)&&(t.flags|=32),_s(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&li(t),null;case 13:return Ls(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Zi(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ks(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,_a(gi,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===a.children&&!Ta.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Mi(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ci(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ci(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}xs(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ei(t,n),r=r(a=Si(a)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return a=vi(r=t.type,t.pendingProps),Cs(e,t,r,a=vi(r.type,a),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:vi(r,a),Ws(e,t),t.tag=1,Da(r)?(e=!0,Fa(t)):e=!1,Ei(t,n),Wi(t,r,a),Gi(t,r,a,n),Ts(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return Ss(e,t,n)}throw Error(i(156,t.tag))};var Yl="function"===typeof reportError?reportError:function(e){console.error(e)};function ql(e){this._internalRoot=e}function Zl(e){this._internalRoot=e}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $l(){}function ec(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof a){var s=a;a=function(){var e=Gl(o);s.call(e)}}Hl(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Gl(o);i.call(e)}}var o=Wl(t,r,e,0,null,!1,0,"",$l);return e._reactRootContainer=o,e[pa]=o.current,Vr(8===e.nodeType?e.parentNode:e),cl(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Gl(u);s.call(e)}}var u=zl(e,0,!1,null,0,!1,0,"",$l);return e._reactRootContainer=u,e[pa]=u.current,Vr(8===e.nodeType?e.parentNode:e),cl((function(){Hl(t,u,n,r)})),u}(n,t,e,a,r);return Gl(o)}Zl.prototype.render=ql.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Hl(e,t,null,null)},Zl.prototype.unmount=ql.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl((function(){Hl(null,e,null,null)})),t[pa]=null}},Zl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Lt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,Qe()),0===(6&Iu)&&(Vu=Qe()+500,Va()))}break;case 13:cl((function(){var t=Ti(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Xl(e,1)}},kt=function(e){if(13===e.tag){var t=Ti(e,134217728);if(null!==t)nl(t,e,134217728,el());Xl(e,134217728)}},Ct=function(e){if(13===e.tag){var t=tl(e),n=Ti(e,t);if(null!==n)nl(n,e,t,el());Xl(e,t)}},Et=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=xa(r);if(!a)throw Error(i(90));X(r),J(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=ll,Te=cl;var tc={usingClientEntryPoint:!1,Events:[ba,wa,xa,_e,Ae,ll]},nc={findFiberByHostInstance:ya,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{at=ac.inject(rc),it=ac}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ql(t))throw Error(i(200));return Ul(e,t,null,n)},t.createRoot=function(e,t){if(!Ql(e))throw Error(i(299));var n=!1,r="",a=Yl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=zl(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Vr(8===e.nodeType?e.parentNode:e),new ql(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(i(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ql(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",s=Yl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Wl(t,null,e,1,null!=n?n:null,a,0,o,s),e[pa]=t.current,Vr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Zl(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(i(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(i(40));return!!e._reactRootContainer&&(cl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pa]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},6374:function(e,t,n){"use strict";var r=n(2791),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,i={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:l,ref:c,props:i,_owner:s.current}}t.Fragment=i,t.jsx=l,t.jsxs=l},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var w=b.prototype=new y;w.constructor=b,m(w,g.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,C={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,a)&&!E.hasOwnProperty(a)&&(i[a]=t[a]);var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===i[a]&&(i[a]=u[a]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:C.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===i?"."+I(u,0):i,x(o)?(a="",null!=e&&(a=e.replace(A,"$&/")+"/"),T(o,t,a,"",(function(e){return e}))):null!=o&&(_(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(A,"$&/")+"/")+e)),t.push(o)),1;if(u=0,i=""===i?".":i+":",x(e))for(var l=0;l<e.length;l++){var c=i+I(s=e[l],l);u+=T(s,t,a,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=T(s=s.value,t,a,c=i+I(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function R(e,t,n){if(null==e)return e;var r=[],a=0;return T(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},M={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:M,ReactCurrentOwner:C};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=C.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)k.call(t,l)&&!E.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>i(u,n))l<a&&0>i(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<a&&0>i(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],d=1,h=null,f=3,p=!1,m=!1,v=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)a(c);else{if(!(t.startTime<=e))break;a(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function x(e){if(v=!1,w(e),!m)if(null!==r(l))m=!0,M(k);else{var t=r(c);null!==t&&O(x,t.startTime-e)}}function k(e,n){m=!1,v&&(v=!1,y(_),_=-1),p=!0;var i=f;try{for(w(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!T());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(l)&&a(l),w(n)}else a(l);h=r(l)}if(null!==h)var u=!0;else{var d=r(c);null!==d&&O(x,d.startTime-n),u=!1}return u}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,E=!1,S=null,_=-1,A=5,I=-1;function T(){return!(t.unstable_now()-I<A)}function R(){if(null!==S){var e=t.unstable_now();I=e;var n=!0;try{n=S(!0,e)}finally{n?C():(E=!1,S=null)}}else E=!1}if("function"===typeof b)C=function(){b(R)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,D=N.port2;N.port1.onmessage=R,C=function(){D.postMessage(null)}}else C=function(){g(R,0)};function M(e){S=e,E||(E=!0,C())}function O(e,n){_=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,M(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(c,e),null===r(l)&&e===r(c)&&(v?(y(_),_=-1):v=!0,O(x,i-o))):(e.sortIndex=s,n(l,e),m||p||(m=!0,M(k))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},9977:function(e,t,n){var r={"./img/castle/castle.jpg":9543,"./img/castle/hrad-1.jpg":9252,"./img/castle/hrad-10.jpg":3306,"./img/castle/hrad-11.jpg":9202,"./img/castle/hrad-12.jpg":938,"./img/castle/hrad-13.jpg":2680,"./img/castle/hrad-14.jpg":621,"./img/castle/hrad-15.jpg":8282,"./img/castle/hrad-16.jpg":7873,"./img/castle/hrad-19.jpg":9369,"./img/castle/hrad-2.jpg":3035,"./img/castle/hrad-20.jpg":1285,"./img/castle/hrad-21.jpg":4533,"./img/castle/hrad-24.jpg":3708,"./img/castle/hrad-26.jpg":6937,"./img/castle/hrad-3.jpg":7993,"./img/castle/hrad-31.jpg":5575,"./img/castle/hrad-35.jpg":5255,"./img/castle/hrad-36.jpg":8328,"./img/castle/hrad-37.jpg":6161,"./img/castle/hrad-38.jpg":8204,"./img/castle/hrad-39.jpg":5726,"./img/castle/hrad-4.jpg":6037,"./img/castle/hrad-40.jpg":7912,"./img/castle/hrad-41.jpg":5797,"./img/castle/hrad-42.jpg":6031,"./img/castle/hrad-6.jpg":4342,"./img/castle/hrad-7.jpg":5044,"./img/castle/hrad-9.jpg":6724,"./img/castle/room1.jpg":6090,"./img/castle/room10.jpg":1280,"./img/castle/room11.jpg":6914,"./img/castle/room12.jpg":9768,"./img/castle/room13.jpg":6328,"./img/castle/room14.jpg":2803,"./img/castle/room15.jpg":2867,"./img/castle/room2.jpg":7942,"./img/castle/room3.jpg":1572,"./img/castle/room4.jpg":3721,"./img/castle/room5.jpg":4961,"./img/castle/room6.jpg":5342,"./img/castle/room7.jpg":802,"./img/castle/room8.jpg":5154,"./img/castle/room9.jpg":5913,"./img/chateau/chateau.jpg":9233,"./img/coat_of_arms/albrecht.png":3146,"./img/coat_of_arms/biberstejnove.png":599,"./img/coat_of_arms/clamgallasove.png":9329,"./img/coat_of_arms/gallasove.png":5688,"./img/coat_of_arms/redernove.png":8584,"./img/coat_of_arms/ronovci.png":7049,"./img/history/coat_of_arms.jpg":9150,"./img/history/history.jpg":7218,"./img/icons/icon-128.png":345,"./img/icons/icon-256.png":5920,"./img/icons/icon-48.png":9485,"./img/icons/icon-512.png":6344,"./img/icons/icon-64.png":9771,"./img/icons/maskable-icon-192.png":295,"./img/other/loading.gif":9876,"./img/people/albrecht_valdstejn.jpg":7695,"./img/people/antonin_pankrac_gallas.jpg":5619,"./img/people/eduard_clamgallas.jpg":2134,"./img/people/filip_josef_gallas.jpg":2789,"./img/people/frantisek_ferdinand_gallas.jpg":4361,"./img/people/jan_vaclav_gallas.jpg":7862,"./img/people/katerina_redern.jpg":5130,"./img/people/kristian_filip_clamgallas.jpg":9565,"./img/people/kristian_krystof_clamgallas.jpg":2881,"./img/people/matyas_gallas.jpg":8865,"./img/people/melchior_redern.jpg":6497,"./img/people/vilem_clamgallas.jpg":2856,"./img/uvod.jpg":5771};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=9977},9543:function(e,t,n){"use strict";e.exports=n.p+"static/media/castle.2a0f1e66ebd97ea84bd9.jpg"},9252:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-1.0bde4bab816b0c39f3dd.jpg"},3306:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-10.5026434640c7fedaeff8.jpg"},9202:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-11.45bb8fb871fb63fed846.jpg"},938:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-12.b63839d12f0e3c6edc9d.jpg"},2680:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-13.8ac795b8b705701a7331.jpg"},621:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-14.431c2231f54ceaa97cad.jpg"},8282:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-15.1fc01f0b001b9be9ed58.jpg"},7873:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-16.5a287b504d66d43fee98.jpg"},9369:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-19.c1b097fd10652b30e029.jpg"},3035:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-2.c1e67fc7d165ef3607e3.jpg"},1285:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-20.4493c5a3573e174a288b.jpg"},4533:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-21.359fb777ce4ef8dd7803.jpg"},3708:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-24.54e5c4552bb58c9c40fd.jpg"},6937:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-26.5e606a88a282e54e9b6e.jpg"},7993:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-3.a4177431580707beff9c.jpg"},5575:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-31.54a8b7c8352800ef5488.jpg"},5255:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-35.2bfad008d6033eed7ea3.jpg"},8328:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-36.db49515035148f07c7b9.jpg"},6161:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-37.749fdba6fa140097af25.jpg"},8204:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-38.fa79ca865aff7f135a36.jpg"},5726:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-39.64e78e553cf61632f4ef.jpg"},6037:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-4.398aae511e8e72891ea0.jpg"},7912:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-40.bdfbf1871d9d64526f3e.jpg"},5797:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-41.392028f0865b5f097a25.jpg"},6031:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-42.77b26be7a647f838c213.jpg"},4342:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-6.5a4a67183906e9744a35.jpg"},5044:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-7.032f876fe3a6294f03a5.jpg"},6724:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-9.9cf0378763bf5cc1e5c7.jpg"},6090:function(e,t,n){"use strict";e.exports=n.p+"static/media/room1.643a3b582770275b73c3.jpg"},1280:function(e,t,n){"use strict";e.exports=n.p+"static/media/room10.007ad52e0c0ef808f434.jpg"},6914:function(e,t,n){"use strict";e.exports=n.p+"static/media/room11.d569d64ef4f6afe24407.jpg"},9768:function(e,t,n){"use strict";e.exports=n.p+"static/media/room12.e407de1cab94f686fa59.jpg"},6328:function(e,t,n){"use strict";e.exports=n.p+"static/media/room13.8d9850758b85cc566f10.jpg"},2803:function(e,t,n){"use strict";e.exports=n.p+"static/media/room14.157a20d94da15cefe03e.jpg"},2867:function(e,t,n){"use strict";e.exports=n.p+"static/media/room15.32c4c9996dcd4371bcc0.jpg"},7942:function(e,t,n){"use strict";e.exports=n.p+"static/media/room2.6278f6206b63fc774f7c.jpg"},1572:function(e,t,n){"use strict";e.exports=n.p+"static/media/room3.be9c462756994ec402b8.jpg"},3721:function(e,t,n){"use strict";e.exports=n.p+"static/media/room4.b64d28bf62c32bd183ea.jpg"},4961:function(e,t,n){"use strict";e.exports=n.p+"static/media/room5.83796b9c69a03b702bb2.jpg"},5342:function(e,t,n){"use strict";e.exports=n.p+"static/media/room6.8ad9f30e330b49364200.jpg"},802:function(e,t,n){"use strict";e.exports=n.p+"static/media/room7.14e59db049ac58044f2e.jpg"},5154:function(e,t,n){"use strict";e.exports=n.p+"static/media/room8.4c672497835744b87ec3.jpg"},5913:function(e,t,n){"use strict";e.exports=n.p+"static/media/room9.5c79d00e964115cf2a98.jpg"},9233:function(e,t,n){"use strict";e.exports=n.p+"static/media/chateau.643a3b582770275b73c3.jpg"},3146:function(e,t,n){"use strict";e.exports=n.p+"static/media/albrecht.aec195fb9a141b8bdabb.png"},599:function(e,t,n){"use strict";e.exports=n.p+"static/media/biberstejnove.ef5d776aa039ff148504.png"},9329:function(e,t,n){"use strict";e.exports=n.p+"static/media/clamgallasove.b49e0c7345669f0ce6fd.png"},5688:function(e,t,n){"use strict";e.exports=n.p+"static/media/gallasove.c46888b34f539fa09d64.png"},8584:function(e,t,n){"use strict";e.exports=n.p+"static/media/redernove.3bee36bd4bd49a03446c.png"},7049:function(e,t,n){"use strict";e.exports=n.p+"static/media/ronovci.0b81c93244a715a3ee7a.png"},9150:function(e,t,n){"use strict";e.exports=n.p+"static/media/coat_of_arms.2a0f1e66ebd97ea84bd9.jpg"},7218:function(e,t,n){"use strict";e.exports=n.p+"static/media/history.2a0f1e66ebd97ea84bd9.jpg"},345:function(e,t,n){"use strict";e.exports=n.p+"static/media/icon-128.987b6916ad8cabc59e8a.png"},5920:function(e,t,n){"use strict";e.exports=n.p+"static/media/icon-256.a582b8fbf057d003d7af.png"},9485:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAqCSURBVGhD1Zp3aFVpE8bHWGPvGnvvFVTsqKy7uljYtaNiRxFB/UcQVD4bKqyuiA1BxRYVwbXFvjZsid1YEruxxhp7Esv95jc5b/aam8SErxgfuOSec8953ynPMzPnkGw+RUxMjCQkJMiPhipVqog5EBkZKfXq1fNO/xhQs+XWrVsSxEFQUJBky5YtQx+Q2vn/98fZbA5kBtAtKyHTDmQ1rWTagc+fP3vfsgYy5cCHDx/k9u3b3lHWQKYcePTokezfv987yhrIlAOVK1eWNm3aeEdZA5lygNoLjbISMi3i+Ph471vWQKYcmPvHH7Jw4UKJi4vzznx/ZNgBqBN56ZKcO3dO1q5d6539/siwA2/fvpWSJUtK/fr1EYN3NguAYe7SpUv8SRdHjhzxNW7cGMt9efLk8V29etX75fvhxo0bvgxnoGDBgpKoY0SBAgUkMTFRypUr5/3yfZFhB2JjY3UOSjTj3SSYFZAhB96/fy9nzpyR+IR4+fTpk81D4eHh3q8ZByX4y5cv9v3jx4/SvHlzGT9+vJw4cUIWLFgg/fr1S15XGSLPnz+37+kCLn1LAw8fPvTt3r3b17ZtW19wcLDpoHPnzj51xLvi24iIiPAtW7bM1717dzt+9+6dL3fu3LYWH82ofUJDQ+33nTt3+kaNGuWbNWuWTx3xaRDtvD8yrAEiR+ShjTpgf9UhuXDhgndF2lDxy986Pz179kzU6ORhMEeOHEZFB7XH/rpOf/36dXny5IlMnDhRSpQoIfPmzbPzKfFNB169eiWXL1+Ww4cP2yxEKXUa2L59u3dVIK5duybLly83Q+NV/Ggoe/bsRiE+aCl//vze1UnAiadPn4pm3K7FacD1W7duldmzZ9uxP+yZGAPr1q3rnfoH8BROnoqIkHD90AuioqLk5s2b9jtOEJlx48bZsT9WrFghw4YNk127dsnLly/l/Pnz0qRJE5kzZ44ZVqhQISlatKjpCaOLFSsmr1+/lrx588q9e/csEzjk3/WbNm0qSkXvSMyOdDNA9HQV2aV0OX78uN2svPV+TXIgrZcBRBC6lS9f3oxq1KiRbNy40YwYNGiQtGvXTlq1amXCVT3ZOjVq1LD9eOqDbmTfgb1SE3W6DthNL17I48eP7RgdvNBjh5o1a0qpUqW8o69BdKEYThD5kJAQ6yG5cuUyh4gwTl69csX4vmPHDtNUjEafe+g7/O7oSjYy7QCA93CStEIF5wzIly+fGZoa0ArR575Tp07ZKxCi7C9cKMk1OOWMLlOmjBkMnaAX/Md4QGZSPtKm64AzlnTzqVWrlpQtW9YiWbp0ablz547s27fPrkkJogzPixcvbl27WrVqUrVqVSlcuLDpIUiNJDAInCr35s0bc/Lu3buWHZzKmTOnt1oSYEDKlwppihgOEjmiPGHCBDl79qxFJSUwasOGDUYTf2hvkXLqLIZ90QjGPo6V4LzBcl6nWY4LaAXKoQaiM6JMZKlUvLbBcCf806dPmy2A7LEewQHpiph6Xb16dVvgwYMHlu7UwCJdunSxDVMiSDn8Qs/fv39fihQtYmu81KpCFh9pdmfMmCEjR4604rB+/XoZPXq0LFq0SG7euGEltmLFijJ16lQrn61bt/6Kfg6pOoD6iciBAwesYcHLmlohqBJQp0KFCvZeEp47ge3ds8e7OwlEFaeI6rp16yyD3bp1k7Fjx9p5mhQRxjkaFTRjT6jzSjPN+W3btsnOsJ1Gtc6dOsn8P/+0df0R4ACLwDMW0pHZhEdTIpLoAF0gTK6Bqzwf4FBUdLS3wj+gsqxcudJKMBRDD4C5CoPZA2AsgQBEuU6dOhKt66Gh5y+em9bW6EMUevMvrSDAAQyk/G3ZssVSd0I3R3iUS6KPQ/CexgMliDAUIwv8ddBnBtm7d68NbJRe1oQuVC2GQ34HGEw2Ha8JDF2aoBFMtAmN0R8l3QXBIcABuuL06dPN0969e0shNb5hw4ZWTumgvFZhw44dO1oDatCggRl48uRJi5SDEzA8ZlMqDcYQVaILfWiKBGeFjhzQFWdwgGrE9WSIbOAQ5ZYg+jdSkP1fCoyGz4BmQYMqoZsSYcYJIoYRbM4G1GyMp7t2/Okn664I7xflKVkCOXVzKhgVqkePHkYzBjsaWrSOI1QggsS6RJvMI1yMpYKxL2MENGZPqhVjCI44oKUAByhZVJ+ZM2fKxchIuxnhsHBJFdu16Gv2hg7+swFphlJERx85rUc4cB7DCQg8JyOsw3k0AA0RN45Q49kHLbCmA0HEBtig47V3Ngk4oMPO17iirR0KjRg+XMrr5nD1rW6cT6NDBHfv2W0UwlGiTd1m4GPTTpoBtOAESbqhECBbOr9bRbt48aLRDuM5P3ToUNPPsWPHTPj0ARytVKmSBQqdpZxcHQI0wCa8//zt99/MUFJcVqMFp5s1a2YipAoRRSILTYjswYMHZfXq1baxP4gqTmEIemnRooWNDEWKFDF+YyyGQzVoQyb4SxCoXGPGjLG/KbuyQ4ADffr0MW/j4xNs4xzajBiqEnVRhHzo0CHZo72hQ4cOxk8qFYJkBJgyZYosXbrUOL1q1SqZPHmyTJo0SfJphcHxTZs2mWHV1HlqP1HHQYoDRrMP4Br2JhhHjx61TKYMjEOAAywEWAzhZNdPIY1YXhUu54gEkccZHjK6du1q0SSyZGjJkiXWuDZv3mydlugiaCoLhvFmQ78Ytz9rtKEe97IOWcJwpwUqkaMk31NDgAMOCAvx4Pl7XThB/7IYmmCWWR8aanW9ZcuWVh4RJM5jEJHlXkYMokfVwrjBgwfLff3tnRpPMGrVrm0PSIt1fFi8eLFllz0ARsP9AQMG2Pe0HvADHHAL4DFCJeJf1Ci4ac7oOcrqZ43ScBU6WaLCMNPf0rmIeyipe3S0QJAcU99pVDF3Y+z+qKhoux7DyB70JCMu4oAs8HwwZMgQ6zGME6khwAFXwogm/Js7d65lgx6A+HLTQXUTV+9xDEPgNIMa971WUTsQeWdom7ZtJFZnoDx5cltmMIoqRgNMi+PYwx7fdMCJibbN/MJ7mjVaVcJ2hEnPXr1MqEQ72BsBMIqNeSammvB4CDCYTkuHZfirXq26nUfY8+fPt+mV7PGSmJIN1TCS/dMCWUmLQtYHmPqo8SxIZUFweM0cc0vHavjNNYjUp4a/UwoBMgLfiTqNsG/fvlbje/XsKU20O4eFhRmVGImnTZuWTA9KL2sSBBzOCKAYTqYcqe2BhuhR7xEbPYCqwyzPTS61OPSrjg/MRpTRUqVK64S4xqZRxMmYzBsIMki26A1lQsrIufPnkivbfwIM93+YAckPNDzu0TvjXsaZoXHKeYRLdNywVlsrxua//rIRoLmWvfCIcJtYKZX0glCtSmSO14RUGIx+8DApO/8NEH0q3ogRI6xUMy8By8DAgQOTH06gEmC4YkYKKR0id+7ekV9+/llO6xzPQMU8T5du37696YZqQyfmfrLGjILwHWX+V2AUMQeYLCmNrhpQziifpM1xDmNo6f3797dnAkTFMMci/LMINfsjZVazxm8IE4e4n3vJLEWA73wA59w17jg1cA0fMusvdvqGOeAd/4AQ+TeNPt5p+r+iYgAAAABJRU5ErkJggg=="},6344:function(e,t,n){"use strict";e.exports=n.p+"static/media/icon-512.1bff783033e4814f3101.png"},9771:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAABAqSURBVHhe5dt3rFXVtgbwiUgVFQsqxYING4pcO3YFu9FYYr2CXaP+YzTWcKPGPKNeEks0Gr3YrrE8e++NIhYUAUUEVJCOoNIF7pu/wZ7ew7n7HOAQ33snjGRlr73OWnPN8Y1vfGPMuaHJv7Kl1dgCgI8++ig1bdq0cmn1sBkzZqSjjz46JQAMHjzYx2plI4YPj881KoA02JYsWVI5a5y2ygCM/vbbylnjtFUGYN68eZWzxmmrDMDi1T0Ffv/998pZ47RVAiCLaFowf37lW+O0VQJg2LBh6ZJLLw0gGqutEgDrr79+OuSQQ1KTJk0qVxqfrRIAnTp1SltttVXlW+O0VdaAuXPnVr41TltlAFbrKiD606dPr3xrnNZgAH766ad0zjnnpLvuuis9+uijlauNzxoMwJdffpnWXXfdtHjx4nTttddWrjY+azAArVu3Tptssklac8010+zZsxttL9AgAAjf999/HyzYa8890zbbbJOGDBlS+WvjsgYBwNm2bdumb/NS+KMBA9LHH3+cjjnmmLRw4cLKHY3HGgSA5gftLYU32GCDuLbLLruk5s2bx3ljsgYBQPhowKJFiyIdtMJrrNFgOfk/tQbN+pdffkmPPfZYmjJlSvrtt98CgFmzZgUwf4bNnDnzT+s4GwTA8OHD09prr5223nrrP6L/3XffxURX1ejInDlzKt+W2kUXXRQLr+OPPz69/PLL6e67706HH3546tChQ3rggQcqdy3dnyTOK7NPudIAiPj222+fOm+xRWrZsmUcIo8Bd955Z+WulTdldGAW1OeefTYdcMAB6b333qv8Zem2m1R77rnnYiv70rwEf/3114OBpRP1+eabb6Ynn3wyHXfccaFRK2INAkAFWKtNm6DlOuusE5N33HjjjRGBlTFsGjhwYHr44YfTogxkk8wme/ZKbLFWrVot02eUc590iLnn008/jfR88cUXQ5R79OiRbrrppvh7XbbSAIiGSU+aNClSoFmzZqlFixaRBo6akVsR44QfZTbccMMAc+rUqcGomnsMa621VuXsP01AmAqEERMnTozvY8eODWC/+uqr+F6XrRQA+v/hecDPP/88KLn55pvHxOWtvOMM9GvncG3joHTRQrsXmBz5atiwyGv5jsKiK7W03DUZUNN+/vnnNHr06JgboH799dfKX5baBx98kLbI6fr+++9Xrixr8dOYRmbP3NHVZ14A4U8/+SQN/eKLoJoooeqIESMqd+UB8zX0e+ONN1K7du0qV5e1H3/4IZ173nnprbfeSs8//3yw6Jtvvkk//vhjOuyww9LTTz+dXnvttWDGBhmMlpnezh0FGBGfP39+BGDsmLE5fRbFd5o0YcKEypv+bf948B+pd5/elW8pjcxz3mHHHVecASUCEzIQX3/9dYiQ3xTpQU1zX0y80iBVs9k56p5zLwcACziAAWTatGmpS5cuEZQtc9PlniuuuCLtv//+sf7Ydttt01577RVMAd6Mn2dEamLD5MwmVjOF2LTp0ypny9oKA4CGHH42qzSES8lbsGBBfBbz4p133rnexkjK0I0jjzwyde7cOXXr1i3Ufb/99gsKc3LjjTdOJ598cgCBwq+++mrMYdNOndLizICxY8akHzKTMEfUy5glUUrAChBSqZqtMABtsupvtNFGcVgBMpQrolOsV69eMdH6DDgXXnhhuvnmm9O8XEna5NzVWYr8kqwPACGwUvOLnG7eTWOsPWbl1BsxcmT6JCs+FnFQ7tuflBYcN77rjgKEsavZSokgx1SAUaNGxcAGrQ0AugKpPqP2hFDpmpFpyyE6MiKP3StrgHqurmPXpptumsbkaO+9994hutJFihFLAACKw7SBoJpXEeTiPBOsarbCAKDbgQcemNq3bx8v7d69e4idc/mOfo7HH388vfTSS/+RGjUNkCIusiamoqD+wQcfHHmty+OMNOuS892947NAdt1pp7R/ThPPEEwp+UkWZSn5S6Y4YAo7a1spl7VthQCQX5999lnU+IMOOihEKEpijpjoqAheLG9FDPXqWxdwvCykrCx77LNPjNl2vfWixW6ehc3yWkPUv/9D4eBbb7+d/t6vX3r+hRfS/HnzQ/wAuV5mgWfaZ0bQgpLzta2uznC5ZRCdoGzSVPaqq64KNkyePLleJ7fbbrv0Qp6szZLahpqaFPcAT4RF27gYgD0ABiYn6YLO0xwADbxFGbxxueucMGF8dm5OapavY8U3OT2HDh0a4lgzBbCKkBYrZbA6X2qY9pIoGdy5nKeoy1twmMCxxx4bTZNcr2miVJ7nLBahr3RSFSysvAcwSq60ognjx4+PFOiaqwwBlTbyX6U4L/cVk3JQOmYmSFXjaX7efffdeK4uqzcFUL/k55dZjW+//faYPPpRXhMUEZPwQp/FnKPuS7kzrMs8I585jU2DBw9OO+ywQyy2TjnllHCG6Inohx9+GOuMbrvuGmW2LMJE2acxBOnW225LN9xwQzBUuloc3XHHHZEm1axeANDQBN/O+af7u/LKK1P3PIF999037ZPztmfPnqH41NmkTN6BMSbYsWPH9HEde4WzMuVVEYqv/r/zzjsholKiUHdKXhcYY2oGoRh2uFZynfOCoASOGzcu0sR8bNs988wzsTLkvKV0NasTABNRZjjjJaJgwgMHDUqvvPJKiCLKoqoXW3xIDZS1ANm1264hiuhdLV2WZCdFysTVcDX+iCOOCDoXJlF5k++85ZbxnS1ZvLQf8Fyxrl27Bs0xREqZ0x577BHlGlO11ffdd1/l7mWtKgDaSqpJNNDy3HPPjXNVwGqtTBBAaCwa0qFEj8OTp0yOicRCpMoK0YQdyqplNcEE3tlnnx3PdOzQMQAljvoG5r3tNmq3TJ/h3RgwJAu5ccyHkBJs41toSaO6epOqAHhoYqb/WWedFfVTj75TrsEU/YzTT0/XXHNNOvHEE+Mll112WTo9X5OzmhUOiah7Rd9Yo3LEaioyEyF56hn5a+IES96u0SQ3NnNmR5ltm6sAEeWoQ0piG6d9xwTgK4PMvViLlZzWMLl20kknxd9rW9O/ZZPrJl1MZP/rlluCTot+XxTtbSlB/k2QwUVZLrqGHftlXdh9992jnpdNEiKIwnLbKq+mSav/zqu+IbnEnnHGGZFevXr2in9xMnzE8LTZZpsF2wYMGBD/EEPpk3KW20qoqkCgzUOlcZ9zoOyTQdUyWybzSyr9rW/ftGGN1an3tcsAVQXAQOrsqaeeGq3td3mg+RkMEdecqM9AKhsV+vndsvMmbRxdIoePOuqopSBk8HpmEGsakIz94IMPRkmj4PL/ncwCnaUl85w8rndZHDlUpXKILjYQW4ECKPMpbeU/ZmDW1VdfnY7OjVVNqxcAEe7+l7/ENRuQSpAooLSXySlNS6eOnSJHx+dmBDioaUJyF2McomTpWvsfUogUwCh2++yciZaSC9hpOcKuobiVIjZQdi0yNtCpaIjygW3Gq200YcssoDU3TosVAKp2gpoYKGOAmi+iclM0OM9M0gLmuuuuC2oC8frrr/9DoTljclLihBNOqNoRMpECgqoCXF3nnNzZdezUMTSCkAKX496hBIs8oIima2XL3Jxrm6aIttS2ejdE5PX555+fLr/88tiGziSJCAJjvdyv75gf5JCyw0noE0uTKgsma31C179//yibTGrVNvrgeZESccZ5XaelMKc4rKvbOzNJ78GMrU0uO8bFeQDZPNH6spKmdVlVAFCXMClJrbOC6sWpqWoAABNWkqi/kiUS8pYIyjumsbEjKx10kNWiwIzFCSVLNQCeyavtGGexo+mKJXQGEMOAQeCAXxNUYwEDvbFXIAuodVlVAAiO1RgjfgvzoMTFYK1atQyKezlAMES7S9GJGmBuyRXkiSeeiElLGUJ45plnxn6iaKI2ZX7ooYciWgBQ7kRUZyj6AAdGx6xDABYU76Q5aE9rlEv5X5x0joUO9zFj12dVAWDykXmRiZk459q0WTuivH5mQstMXy/fJddd3RrRRHeO77bbbjHxYiZ96mmnRW/uhw/tb+/evWMD1NjTc3WhPSgLNCAZh4Y4F1XRlYYs1g9L/r0WYBig7GKFa8ayfVaf1QmAgZmOcHbOby8mRM5NhkOYwTiQ3x06YDfYT1noe8EFF8S5f0qDknQDfR//5z+zxpwXgHqPcWkMpecAhrlmx/mRRx4JfXAfAHbK+nNbXvBgA2A4WuYKAGVa2pVr+oH6rM79AOqsLouiAmM4OQXdFnmCPMYSDJCnJnRFXiwdlEVQeRFF6TFv7rw0c9bMAJKDUkt6EFJO2xp3YJW8VlEmZD3w7w4igtlBPYJmR5ktoleT2sVZcwF8nz590jG5dNpeM66SXduWuy1eaEUAm2bHqSwnvZwuiLZrv2aEZ2bEx+TJ0Y4+WTjdYzIzps9I474fF2DOmjkrNV2jaZQs0VXurPONY1xpRnB1eZzHDlXA6k8aAmOTvLiywFI5OF2OYuasMqlaPXI1wAQdo6auLltuClDemrVWKjj014RJe8lZ1C3NTnHSjxVliTt12tTUvEXzP8SpjC99FmZAgYBVdonktxWlKHMe0Bg1Ma8r0N53ANVlxvasMX0KUF1WdRQDiAybmx0RCesBC6LyCzCBKosULwJKqcVSRTMj5/+a1Z9hRWhIrb05kV2Qn1NRqH6HfFjNGVcpxAipoRkq8zJOtZ6ithnDMwJYly2zJYZCRATt1HEbCqOyMo/MOrB7VvXxlR0e0fE3kxAJosUxTKAZFiz+AcWtt94aDCnRphmDBg2KqALHdX2F93Lq/vvvjyU3IFDdRoxx5bBP7ytjrYiVe6VCXRYAqLuiB+kpmWL26iGPbtCz1CVAJqHhcc2gJlkigeqqA4cwg2ECEbJwsj9oTXHJJZdEa41BFimjvx0da4x+/frFdnqJGmA9ZzyAzMi5/FNuixtiywWAcxyWqyavGdHUoLZKIOJ2hJhIcZZDTz31VCi0Tg9zOIcNhRnu46jlst/8/F7/93yvtbtcNzGgeq6kT4maMdDeUayAs7JW0rmahQZwGtKUWDMjchyanwWEoHGy7PdxUI5qSZUyP3HbD3SP9YMfTRnHUZ2jKEydrSi75O8EDb2B5EfL4vzyrCHOMyldqlptCwDkrh8jKPTQXG+ttbGhWXaW0gODMyjp3MT9KuQTE/TurntJ6SmUvtNy59e3b99ofqRHdHiTJqffcqsKIKXwf8PsPQqu3aeLL7449KmkUwAQOZdB0HbumJXeZga6WdmV1hMVOcmwwM9YaAoUANIGOe0X3UMPPTSaoHvvvTcqiA2KSfmFLVu0jKbIRgeA6orKn2FS1zzuueeeWOhZyLHoBP3ag+ra3G8rqyxrfdeKyFUzrJACcpuwAVLjQc2BQjeIXKvWrf4QSany/8GkvKAGAPJW2SuNA0cwAMVFmzO+O5j7UNj/F6IHOi2VQ60XVX8bOXJkVAvPYlG8rPK8nKcz7vV3Zkx/9937Hcyn+xzmUw73C06ZazUr173LeWGcZ/zLk765YwwA4upqaSn9DwXv6wwyGhhhAAAAAElFTkSuQmCC"},295:function(e,t,n){"use strict";e.exports=n.p+"static/media/maskable-icon-192.2be9a4a0fb28eafccac1.png"},9876:function(e,t,n){"use strict";e.exports=n.p+"static/media/loading.803f24369a085e35482e.gif"},7695:function(e,t,n){"use strict";e.exports=n.p+"static/media/albrecht_valdstejn.cdd5c60d5971f658ec29.jpg"},5619:function(e,t,n){"use strict";e.exports=n.p+"static/media/antonin_pankrac_gallas.0133bc71c6b5ef1e3cd9.jpg"},2134:function(e,t,n){"use strict";e.exports=n.p+"static/media/eduard_clamgallas.4cb3e0b3d737c624fda3.jpg"},2789:function(e,t,n){"use strict";e.exports=n.p+"static/media/filip_josef_gallas.6761b39603097fcb0f12.jpg"},4361:function(e,t,n){"use strict";e.exports=n.p+"static/media/frantisek_ferdinand_gallas.f19e8d6e88d971509160.jpg"},7862:function(e,t,n){"use strict";e.exports=n.p+"static/media/jan_vaclav_gallas.b138c20da14ce19d815d.jpg"},5130:function(e,t,n){"use strict";e.exports=n.p+"static/media/katerina_redern.cc8d1ff7eae36c96af99.jpg"},9565:function(e,t,n){"use strict";e.exports=n.p+"static/media/kristian_filip_clamgallas.b30d0b68bd5deb5b00f7.jpg"},2881:function(e,t,n){"use strict";e.exports=n.p+"static/media/kristian_krystof_clamgallas.3191773eec2ccb95d943.jpg"},8865:function(e,t,n){"use strict";e.exports=n.p+"static/media/matyas_gallas.1371677a81eb569fa11b.jpg"},6497:function(e,t,n){"use strict";e.exports=n.p+"static/media/melchior_redern.8131d12b11b80bcc8be7.jpg"},2856:function(e,t,n){"use strict";e.exports=n.p+"static/media/vilem_clamgallas.d9a6861ed8c6dac5c82b.jpg"},5771:function(e,t,n){"use strict";e.exports=n.p+"static/media/uvod.8c72f255b8838e80a20b.jpg"},4902:function(){},522:function(){},753:function(){},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,n){var r=n(4062);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r(a.key),a)}}e.exports=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,n){var r=n(6116);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,n){var r=n(3808),a=n(9617),i=n(4993);e.exports=function(e){var t=a();return function(){var n,a=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return i(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},1588:function(e,t,n){var r=n(1753);function a(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=a=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,n){var a=r(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(this,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,n){var r=n(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,n){var r=n(8698).default,a=n(6115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,n){var r=n(8698).default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(N){d=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),s=new I(r||[]);return o(i,"_invoke",{value:E(e,n,s)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}t.wrap=h;var p={};function m(){}function v(){}function g(){}var y={};d(y,u,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==n&&i.call(w,u)&&(y=w);var x=g.prototype=m.prototype=Object.create(y);function k(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(a,o,s,u){var l=f(e[a],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==r(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}})}function E(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return R()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var a=f(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,p;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:R}}function R(){return{value:void 0,done:!0}}return v.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=d(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,d(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},k(C.prototype),d(C.prototype,l,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new C(h(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(x),d(x,c,"Generator"),d(x,u,(function(){return this})),d(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;A(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,n){var r=n(5372),a=n(8872),i=n(6116),o=n(2218);e.exports=function(e,t){return r(e)||a(e,t)||i(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},1753:function(e,t,n){var r=n(3808);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var r=n(8698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var r=n(8698).default,a=n(5036);e.exports=function(e){var t=a(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var r=n(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9142);function a(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},7462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}n.d(t,{Z:function(){return r}})},885:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(181);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2982:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);var a=n(181);function i(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1002);function a(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==(0,r.Z)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);function a(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(i,o),i}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".8b87e823.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="frydlant-audio-guide:";n.l=function(r,a,i,o){if(e[r])e[r].push(a);else{var s,u;if(void 0!==i)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[a];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(f);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise((function(n,r){a=e[t]=[n,r]}));r.push(a[2]=i);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,a[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var a,i,o=r[0],s=r[1],u=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)u(n)}for(t&&t(r);l<o.length;l++)i=o[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkfrydlant_audio_guide=self.webpackChunkfrydlant_audio_guide||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e=n(2791),t=n.t(e,2),r=n(1250);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(9142);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,i.Z)(r.key),r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Nu){return!1}}var h=n(1002);function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if(t&&("object"===(0,h.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function m(e){var t=d();return function(){var n,r=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}var v,g=JSON.parse('{"Mj":["en","de"],"U1":[{"language":"en","rotate":"Please rotate your device!"},{"language":"de","rotate":"Bitte drehen Sie Ihr Ger\xe4t!"}],"um":[{"language":"en","info":"Information","tours_info":"First, choose the tour for which you have purchased a ticket. Then wait at the place where the tour starts. Your guide will pick you up there.","history_info":"In this section, you can learn about the history of the castle and chateau. You can read a brief history or get to know the individual families that have owned the manor here over the years.","where_to_info":"If you would like to make another trip, we recommend visiting following places in the nearby area.","rooms_overview":"Here you can see an overview of the rooms located in the sightseeing route you have chosen."},{"language":"de","info":"Informationen","tours_info":"W\xe4hlen Sie zun\xe4chst die Tour aus, f\xfcr die Sie ein Ticket gekauft haben. Warten Sie dann an der Stelle, an der die Tour beginnt. Dort holt Sie Ihr Guide ab.","history_info":"In diesem Abschnitt k\xf6nnen Sie sich \xfcber die Geschichte der Burg und des Schlosses informieren. Hier k\xf6nnen Sie eine kurze Geschichte lesen oder die einzelnen Familien kennenlernen, die das Gut hier im Laufe der Jahre besessen haben.","where_to_info":"Wenn Sie einen weiteren Ausflug machen m\xf6chten, empflehlen wir Ihnen, die folgenden Orte in der n\xe4heren Umgebung zu besuchen.","rooms_overview":"Hier sehen Sie eine \xdcbersicht der Zimmer, die sich in der von Ihnen gew\xe4hlten F\xfchrung befinden."}],"y4":[{"language":"en","install_download_label":"How to download?","install_step_1":"1. Open your browser\u2019s settings.","install_step_2":"2. Find and tap Add to Home screen.","install_step_1_safari":"2. Find and tap Share.","install_step_3":"3. Confirm by tapping Add.","warning":"Warning","install_use_safari":"You must use the Safari browser to install the application.","error_label":"Something went wrong...","invalid_scan_label":"We are sorry, but the given QR code could not be recognized.","close_label":"Close","no_face_detected":"We are sorry, but it was not possible to recognize anyone from the photo you took.","try_again_label":"Please try again. Zoom in on the face and take a photo.","recognition_wait_label":"Please wait. The picture you took is currently being processed."},{"language":"de","install_download_label":"Wie downloadet man das?","install_step_1":"1. \xd6ffnen Sie die Einstellungen Ihres Browsers.","install_step_2":"2. Suchen und tippen Sie auf Zum Startbildschirm hinzuf\xfcgen.","install_step_1_safari":"2. Suchen und tippen Sie auf Share.","install_step_3":"3. Best\xe4tigen Sie, indem Sie auf Installieren tippen.","warning":"Warnung","install_step_4_safari":"Sie m\xfcssen den Safari-Browser verwenden, um die Applikation zu installieren.","close_label":"Schlie\xdfen","invalid_scan_label":"Es tut uns leid, aber der angegebene QR-Code konnte nicht erkannt werden.","error_label":"Etwas ist schief gelaufen...","no_face_detected":"Wir entschuldigen uns, aber auf dem von Ihnen aufgenommenen Foto war niemand zu erkennen.","try_again_label":"Bitte versuchen Sie es nochmal. Vergr\xf6\xdfern Sie das Gesicht und machen Sie ein Foto.","recognition_wait_label":"Warten Sie mal. Das von Ihnen aufgenommene Bild wird gerade bearbeitet."}],"N9":[{"language":"en","install":"Install","install_label":"Install the app for offline access."},{"language":"de","install":"Installieren","install_label":"Installieren Sie die App f\xfcr den Offline-Zugriff."}],"em":[{"language":"en","face_recognition":"Image recognition","title":"Don\'t know who is in the picture?","label":"If you\'ve come across an image on the tour and you\'re not sure who\'s in it, you can either ask the tourguide or use this feature, which recognizes who\'s in the image from the photo. Just follow the instructions below.","step_1":"Press the \u201eTake a picture\u201d button.","step_2":"Zoom in so that the face in the image you want to recognize is clearly visible.","step_3":"Now take a picture and then press OK.","step_4":"Wait a moment. When the image is recognized, you will be redirected to a new page with the depicted person.","button":"Take a picture","button_back":"Back"},{"language":"de","face_recognition":"Bilderkennung","title":"Sie wissen nicht, wer auf dem Bild ist?","label":"Wenn Sie bei der F\xfchrung auf ein Bild gesto\xdfen sind und sich nicht sicher sind, wer darauf abgebildet ist, k\xf6nnen Sie entweder den Begleiter fragen oder diese Funktion verwenden, die anhand des Fotos erkennt, wer auf dem Bild zu sehen ist. Befolgen Sie einfach die nachstehenden Anweisungen.","step_1":"Dr\xfccken Sie die Schaltfl\xe4che \u201eBild aufnehmen\u201d.","step_2":"Vergr\xf6\xdfern Sie die Kamera so, dass das Gesicht im Bild, das Sie erkennen m\xf6chten, deutlich sichtbar ist.","step_3":"Machen Sie jetzt ein Foto und dr\xfccken Sie dann OK.","step_4":"Moment mal. Wenn das Bild erkannt wird, werden Sie auf eine neue Seite mit der abgebildeten Person weitergeleitet.","button":"Bild aufnehmen","button_back":"Zur\xfcck"}],"RS":[{"language":"en","qr_scanner":"QR code Scanner","title":"Don\'t know where you are right now?","label":"If you are not sure where exactly you are, you can ask your guide or use this feature to help you find where you are. Find the stand with QR code and follow the instructions below.","step_1":"Press the \u201eScan QR code\u201d button.","step_2":"Zoom in so that the QR code is clearly visible.","step_3":"Now take a picture and then press OK.","step_4":"Wait a moment. When the QR code is detected, you will be redirected to the correct location.","button":"Scan QR code"},{"language":"de","qr_scanner":"QR Code Scanner","title":"Sie wissen nicht, wo Sie gerade sind?","label":"Wenn Sie sich nicht sicher sind, wo genau Sie sich befinden, k\xf6nnen Sie Ihren Reiseleiter fragen oder diese Funktion nutzen, um Ihnen dabei zu helfen, Ihren Standort zu finden. Finden Sie den Stand mit QR-Code und folgen Sie den Anweisungen unten.","step_1":"Dr\xfccken Sie die Schaltfl\xe4che \u201eQR Code scannen\u201c.","step_2":"Vergr\xf6\xdfern Sie die Kamera so, dass das QR-Code, deutlich sichtbar ist.","step_3":"Machen Sie jetzt ein Foto und dr\xfccken Sie dann OK.","step_4":"Moment mal. Wenn der QR-Code erkannt wird, werden Sie an die richtige Stelle weitergeleitet.","button":"QR Code scannen"}],"Fs":[{"language":"en","rooms":"Rooms","menu":"Menu","history":"History","houses":"Houses","owners":"Owners","tours":"Tours","map":"Map","where_to_next":"Where to next?","gallery":"Gallery","about_app":"About app","settings":"Settings","contact":"Contact"},{"language":"de","rooms":"R\xe4ume","menu":"Men\xfc","history":"Geschichte","houses":"H\xe4user","owners":"Besitzer","tours":"F\xfchrungen","map":"Landkarte","where_to_next":"Wohin als n\xe4chstes?","gallery":"Galerie","about_app":"\xdcber App","settings":"Einstellung","contact":"Kontakt"}],"Xd":[{"language":"en","letter":"Font size","language_label":"Language","default":"Default","medium":"Medium","large":"Large"},{"language":"de","letter":"Schriftgr\xf6\xdfe","language_label":"Sprache","default":"Original","medium":"Mittlere","large":"Gro\xdf"}],"YH":[{"language":"en","history":"History","gallery":"Gallery","image_recognition":"Image recognition","scan_room":"Scan the room","where_to_next":"Where to next?","contact":"Contact","settings":"Settings","about_app":"About app"},{"language":"de","history":"Geschichte","gallery":"Galerie","image_recognition":"Bilderkennung","scan_room":"Scannen Sie den Raum","where_to_next":"Wohin als n\xe4chstes?","contact":"Kontakt","settings":"Einstellung","about_app":"\xdcber App"}],"mx":[{"language":"en","home":"Home","tours":"Tours","rooms":"Rooms in tour","menu":"Menu","back":"Back to previous"},{"language":"de","home":"Startseite","tours":"F\xfchrungen","rooms":"Zimmer in der F\xfchrung","menu":"Men\xfc","back":"Zur\xfcck zum vorherigen"}],"LE":[{"language":"en","label_1":"Welcome","label_2":"to the state castle","label_3":"and chateau Fr\xfddlant","button_label":"Choose tour"},{"language":"de","label_1":"Wilkommen","label_2":"auf der Burg und","label_3":"dem Schloss Friedland","button_label":"F\xfchrung ausw\xe4hlen"}],"Le":[{"language":"en","button":"Visit","places":[{"title":"Grab\u0161tejn castle","description":"Grab\u0161tejn was originally a Gothic castle, built in the middle of the thirteenth century, which stands near the Tri-Border Area where the Czech Republic, Germany and Poland meet. It was remodelled in the sixteenth century as a Renaissance castle, and now offers visitors several guided tours.","url":"https://hrad-grabstejn.cz/en","img":""},{"title":"Lemberk castle","description":"The predecessor of today\'s Baroque castle was the medieval castle of Lemberk, founded in the 1340s by Havel of Markvartic, husband of St. Zdislava. In the second half of the 16th century it was rebuilt into a Renaissance chateau and it acquired its present appearance after the mid-17th century under the the lords of Breda. The last owners were the Clam-Gallas family, until 1945.","url":"https://www.zamek-lemberk.cz/en","img":""},{"title":"Brewery Albrecht","description":"Manor beer production in Fr\xfddlant is first documented in 1381, beer was apparently brewed right at the castle. In the 16th century, a new independent brewery was built under the Redern family near the Sm\u011bd\xe1 river, on the site where the current operation is still located. The half-timbered storey building of the Renaissance brewery is depicted on the so-called Glaubic map.","url":"https://pivovar-albrecht.com/","img":""}]},{"language":"de","button":"Besuchen","places":[{"title":"Burg Grab\u0161tejn","description":"Grab\u0161tejn (Grafenstein), urspr\xfcnglich eine gotische Burg aus dem 13. Jahrhundert, die im 16. Jahrhundert in ein Renaissancesschloss umgebaut wurde, liegt nahe dem Dreil\xe4ndereck zwischen der Tschechischen Republik, Deutschland und Polen und stellt ein nationales Kulturdenkmal mit einer reichen Geschichte dar. Heutzutage bietet die Burg mehrere Touristenf\xfchrungen an, einschlie\xdflich der St. Barbara Kapelle, eines Renaissancejuwel aus der 2. H\xe4lfte des 16. Jahrhunderts.","url":"https://hrad-grabstejn.cz/de","img":""},{"title":"Schloss Lemberk","description":"Der Vorg\xe4nger des heutigen Barockschlosses war die mittelalterliche Burg Lemberk, das in den 1340er Jahren von Havel von Markvartic, dem Ehemann von St. Zdislava, gegr\xfcndet wurde. In der zweiten H\xe4lfte des 16. Jahrhunderts wurde es zu einem Renaissanceschloss umgebaut und erhielt sein heutiges Aussehen nach der Mitte des 17. Jahrhunderts unter den Herren von Breda. Die letzten Eigent\xfcmer waren bis 1945 die Familie Clam-Gallas.","url":"https://www.zamek-lemberk.cz/en","img":""},{"title":"Brauerei Albrecht","description":"Die Herstellung von Bier in Fr\xfddlant wird erstmals 1381 erw\xe4hnt, Bier wurde angeblich direkt auf der Burg gebraut. Im 16. Jahrhundert wurde unter der Familie Redern in der N\xe4he des Flusses Sm\u011bd\xe1 an der Stelle, an der sich noch heute der Betrieb befindet, eine neue unabh\xe4ngige Brauerei gebaut. Der Fachwerkgeschossbau der Renaissance-Brauerei ist auf der sogenannten Glaubic-Karte abgebildet.","url":"https://pivovar-albrecht.com/","img":""}]}],"PU":[{"language":"en","for_label":"Official app for","for":"Castle and chateau Fr\xfddlant","author_label":"Author","author":"Veronika Pavl\xedkov\xe1","collaboration_label":"In collaboration with","collaboration":"Palack\xfd University Olomouc","photos_label":"Photos by","photos":"Luk\xe1\u0161 H\xfcbner","logo_label":"Logo by","logo":"Lucie Pavl\xedkov\xe1"},{"language":"de","for_label":"Ofizielle App f\xfcr","for":"Das Schloss und die Burg Fr\xfddlant","author_label":"Author","author":"Veronika Pavl\xedkov\xe1","collaboration_label":"In Zusammenarbeit mit","collaboration":"Palack\xfd Universit\xe4t Olm\xfctz","photos_label":"Fotos von","photos":"Luk\xe1\u0161 H\xfcbner","logo_label":"Logo von","logo":"Lucie Pavl\xedkov\xe1"}],"ZR":[{"language":"en","tour_not_selected":"First, please choose the sightseeing route you want to take.","seen":"Already visited rooms","not_seen":"Rooms not yet visited"},{"language":"de","tour_not_selected":"Bitte w\xe4hlen Sie zun\xe4chst die F\xfchrung aus, die Sie nehmen m\xf6chten.","seen":"Bereits besuchte R\xe4ume","not_seen":"Noch nicht besuchte R\xe4ume"}],"PX":[{"language":"en","title":"Contact","address":"Address","reservation":"Ticket reservation","phone":"Phone number"},{"language":"de","title":"Kontakt","address":"Addresse","reservation":"Ticketbuchung","phone":"Telefonnummer"}],"Lx":[{"language":"en","people":[{"name":"Fridrich of Redern","img":"/people/katerina_redern.jpg"},{"name":"Melchior of Redern","img":"/people/melchior_redern.jpg"},{"name":"Catherine of Redern","img":"/people/katerina_redern.jpg"},{"name":"Christopher of Redern","img":"/people/katerina_redern.jpg"},{"name":"Albrecht of Wallenstein","img":"/people/albrecht_valdstejn.jpg"},{"name":"Matthias of Gallas","img":"/people/matyas_gallas.jpg"},{"name":"Antonius of Gallas","img":"/people/antonin_pankrac_gallas.jpg"},{"name":"Francis Ferdinand of Gallas","img":"/people/frantisek_ferdinand_gallas.jpg"},{"name":"John Wenceslas of Gallas","img":"/people/jan_vaclav_gallas.jpg"},{"name":"Philip Joseph of Gallas","img":"/people/filip_josef_gallas.jpg"},{"name":"Christian Philip of Clam-Gallas","img":"/people/kristian_filip_clamgallas.jpg"},{"name":"Christian Christopher of Clam-Gallas","img":"/people/kristian_krystof_clamgallas.jpg"},{"name":"William of Clam-Gallas","img":"/people/vilem_clamgallas.jpg"},{"name":"Edward of Clam-Gallas","img":"/people/eduard_clamgallas.jpg"},{"name":"Francis of Clam-Gallas","img":"/people/frantisek_ferdinand_gallas.jpg"},{"name":"Clotilde of Clam-Gallas","img":"/people/katerina_redern.jpg"}]},{"language":"de","people":[{"name":"Fridrich von R\xf6dern","img":"/people/katerina_redern.jpg"},{"name":"Melchior von R\xf6dern","img":"/people/melchior_redern.jpg"},{"name":"Katharina von R\xf6dern","img":"/people/katerina_redern.jpg"},{"name":"Christoph von R\xf6dern","img":"/people/katerina_redern.jpg"},{"name":"Albrecht von Wallenstein","img":"/people/albrecht_valdstejn.jpg"},{"name":"Matthias von Gallas","img":"/people/matyas_gallas.jpg"},{"name":"Antonius von Gallas","img":"/people/antonin_pankrac_gallas.jpg"},{"name":"Franz Ferdinand von Gallas","img":"/people/frantisek_ferdinand_gallas.jpg"},{"name":"Johann Wenzeslaus von Gallas","img":"/people/jan_vaclav_gallas.jpg"},{"name":"Philip Joseph von Gallas","img":"/people/filip_josef_gallas.jpg"},{"name":"Christian Philip von Clam-Gallas","img":"/people/kristian_filip_clamgallas.jpg"},{"name":"Christian Christoph von Clam-Gallas","img":"/people/kristian_krystof_clamgallas.jpg"},{"name":"Wilhelm von Clam-Gallas","img":"/people/vilem_clamgallas.jpg"},{"name":"Eduard von Clam-Gallas","img":"/people/eduard_clamgallas.jpg"},{"name":"Franz von Clam-Gallas","img":"/people/frantisek_ferdinand_gallas.jpg"},{"name":"Clotilde von Clam-Gallas","img":"/people/katerina_redern.jpg"}]}],"m8":[{"language":"en","path":"/history_overview","title":"History overview","button":"Learn more","img":"/history/history.jpg","card_label":"Get to know the history of the Fr\xfddlant castle and chateau.","description":"Fr\xfddlant is one of largest and most important heritage sites in Northern Bohemia. It consists of two architectural complexes: a medieval castle and a renaissance chateau. The castle was built around the mid-13th century. In 1278, the domain became property of the Biberstein house who took major part in building the large castle palace. Between 1558 and 1620, Fr\xfddlant was owned by the Redern house that continued to upgrade the domain. The Rederns were good managers and warriors, but also builders and art supporters. They built the new renaissance chateau and the chapel. \\n\\nBetween 1622 and 1634, the castle belonged to Albrecht of Wallenstein. He bought it for 150,000 guldens and gradually built a large domain. His estates flourished greatly during the Thirty Years War as they supplied his army. The Fr\xfddlant region was called Terra felix \u2013 the happy country. \\n\\nAfter Albrecht\u2019s murder in 1634, the emperor gave Fr\xfddlant to the Gallas house, and since 1759 the domain was owned by the Clam-Gallases, an important aristocratic house active in diplomatic and military circles at the imperial court. They remained until 1945 when Fr\xfddlant became property of the state. \\n\\nThe original gothic castle hasn\u2019t been preserved in its entirety. Nowadays, the castle is a large two-floor building around the small, irregularly shaped courtyard, with the predominant cylindrical tower \u2013 a bergfrit. The castle was growing over time, and underwent two renaissance reconstructions in the 16th century. The chapel and the renaissance chateau were built at the turn of the 16th and 17th century by Marco Spazzio di Lancio. The last big reconstruction took place in the 1860s, when the castle warden wing was rebuilt. \\n\\nIn 1801, the Clam-Gallases enabled public access to a part of the castle with exhibitions, making it the first castle museum in the Central Europe. The current exhibition includes this museum, the chapel with valuable items, and two chateau wings.","label":"History of castle Fr\xfddlant"},{"language":"en","path":"/houses","title":"Houses","img":"/history/coat_of_arms.jpg","card_label":"Get to know the individual owners of the Fr\xfddlant manor.","button":"Learn more","houses":[{"title":"Ronowitzer","description":"Founders of Fr\xfddlant Castle.","img":"/coat_of_arms/ronovci.png","button":"More","owners":[{"number":1,"name":"Ronowitzer","years":"????-1278","label":"The oldest history of the Fr\xfddlant castle is connected with the Ronowitzer family, who had it built in the 13th century.","button":"More","text":"The oldest history of the Fr\xfddlant castle is connected with the Ronowitzer family, who had it built in the 13th century. We don\'t know much about their activities in the northern part of Bohemia. The first known member of this family was Smil, who was a member of the retinue of King P\u0159emysl Otakar I. His sons Henry and \u010castolov still use the epithet \'of Zittau\' in 1238, but in 1257 we already find a mention of \'\u010castolov of Fr\xfddlant\'. The expansion of this family was limited in 1278 by King P\u0159emysl Otakar II., when he took the estate from the Ronowitzer family and sold it to the Biberstein family.","img":"/coat_of_arms/ronovci.png"}]},{"title":"Biberstein","description":"The longest ruling house, which was responsible for the expansion of the castle.","img":"/coat_of_arms/biberstejnove.png","button":"More","owners":[{"number":1,"name":"Biberstein","years":"1278-1551","label":"Representatives of the Biberstein family became the owners of the Fr\xfddlant castle for the next almost 300 years, and their reign is mainly connected with the construction expansion of the castle and the further growth of Fr\xfddlant manor.","button":"More","text":"Representatives of the Biberstein family became the owners of the Fr\xfddlant castle for the next almost 300 years, and their reign is mainly connected with the construction expansion of the castle and the further growth of Fr\xfddlant manor. Due to this family\'s efforts for further territorial gains, there have been several conflicts with neighboring ones nobles (e.g. the burning of Nymburk in 1326) and even clash with the royal army of Wenceslaus IV. \\n\\nDuring the Hussite Wars, Fr\xfddlant became the center of the anti-Hussite opposition, and the Fr\xfddlant manor was attacked several times between 1420 and 1433. The town of Fr\xfddlant and other villages in the vicinity were several times burned out. The Biberstein family then remained in opposition even against King Charles of Pod\u011bbrady and were involved in other military conflicts. During the rule of the last Biberstein, the Fr\xfddlant manor became completely Protestant, which was followed by family of Redern. The last male descendant, Christoph, died in 1551 without an heir and thus the manor fell to the Czech royal chamber.","img":"/coat_of_arms/biberstejnove.png"}]},{"title":"Redern","description":"The Silesian house, which contributed to the growth of Protestantism and the construction of the chateau.","img":"/coat_of_arms/redernove.png","button":"More","owners":[{"number":1,"name":"Friedrich of Redern","years":"????-1564","label":"Friedrich of Redern was a member of the Silesian knightly family.","button":"More","text":"Friedrich of Redern was a member of the Silesian knightly family. During his lifetime, he held the position of president of the Silesian Land Chamber and was a member of the royal commission to record the state of the Fr\xfddlant manor after death of the last owner. In 1558 it was Friedrich, who bought the North Bohemian estates of Liberec, Fr\xfddlant and Zawidow. After buying them, he reached elevation to nobility. He and his wife Salomena of Sch\xf6naich had a total of 10 children. He died in 1564 while staying in Wroclaw, Poland.","img":"/coat_of_arms/redernove.png"},{"number":2,"name":"Melchior of Redern","years":"1555-1600","label":"He was the ninth of a total of ten children of Friedrich of Redern.","button":"More","text":"He was the ninth of a total of ten children of Friedrich of Redern. He studied law at a protestant university in Heidelberg and then together with his brother Christopher went on a cavalier trip to France, where in 1572 he witnessed the murder of the Huguenots during the so-called Bartholomew\'s Night. In addition to France, he also visited the Italian cities of Rome, Padua or Naples. Melchior eventually joined the service in the army. In the 1570s and 1580s, he took part in the siege of Gda\u0144sk, the anti-Hungarian campaign, the war in the Netherlands or the Siege of Pskov. \\n\\nAfter death of his brother Christopher in 1591 he became the owner of the Fr\xfddlant manor. He married Catherine of \u0160lik, the sister of one of the most influential Protestant noblemen, J\xe1chym Ond\u0159ej of \u0160lik, who was the owner of the neighboring estate. During his lifetime, construction modifications were made in the castle area. He added one castle wing, the of the castle, the Renaissance wing of thechateau was created, and eventually also the chateau chapel. In the 1590s, Melchior returned to the Hungarian battlefields several times as an officer. As early as the spring of 1600, he participated in a meeting in Vienna about the next military advance against the Turks, during the autumn however, he interrupts his military campaign due to health reasons and died in September of this year.","img":"/people/melchior_redern.jpg"},{"number":3,"name":"Catherine of Redern","years":"1553-1617","label":"Catherine of Redern, born \u0160lik, was the sister of J\xe1chym Ond\u0159ej of \u0160lik, one of those executed at Old Town Square in 1621.","button":"More","text":"Catherine of Redern, born \u0160lik, was the sister of J\xe1chym Ond\u0159ej of \u0160lik, one of those executed at Old Town Square in 1621. Between 1600 and 1611 she managed the Fr\xfddlant manor for her underaged son Christopher. Her work on the Fr\xfddlant estate is mainly connected with disputes with the local townspeople regarding the right to brew beer. Bad relations with the locals eventually resulted in her staying primarily at castle in Liberec. \\n\\nDuring her tenure, the chateau chapels in Fr\xfddlant and Liberec were completed, and other churches were built in the entire Fr\xfddlant manor. She died in 1617 in Liberec, she was to be buried in the family tomb in Fr\xfddlant, but that never happened and the place of burial is still unknown.","img":"/people/katerina_redern.jpg"},{"number":4,"name":"Christopher of Redern","years":"1591-1641","label":"Christopher took over the administration of the estate in 1611.","button":"More","text":"Christopher took over the administration of the estate in 1611. He continued the dispute with the townspeople of Fr\xfddlant, which began during his mother\'s reign. After the outbreak of Bohemian uprising, together with his uncle J\xe1chym Ond\u0159ej of \u0160lik, he was involved on the side of Protestant union where he became the commander of a cavalry division. He was already suffering from health problems at this time. \\n\\nAfter defeat in 1620, his manor was confiscated and he lived in exile on the Zawidow estate. In 1627, the Zawidow estate was also confiscated from him. He then lived in the residence of his wife Magdalena of Hundt in Poland. During the raid Swedes to Bohemia between 1639-1640, he returned to Fr\xfddlant, but in the same year he had to leave Fr\xfddlant manor to Wallenstein. He dies in exile sometime after 1641.","img":"/coat_of_arms/redernove.png"}]},{"title":"Albrecht of Wallenstein","description":"Albrecht of Wallenstein was a Czech military leader, politician and one of the most important figures in the Czech history.","img":"/coat_of_arms/albrecht.png","button":"More","owners":[{"number":1,"name":"Albrecht von Wallenstein","years":"1591-1641","label":"Albrecht of Wallenstein was born into a not very wealthy and influential Protestant family and eventually became one of the most powerful men of European importance.","button":"More","text":"Albrecht of Wallenstein was born into a not very wealthy and influential Protestant family and eventually became one of the most powerful men of European importance. His tenure at Fr\xfddlant was not long, it lasted only 12 years, even so, this is the time that made this place and the manor the most famous and it was even raised to a dukedom.\\n\\n The life of Albrecht of Wallenstein was connected with service in the army from a young age. He soon defected from the Protestant camp to the imperial service and on the battlefields of the Thirty Years\' War he attained the highest rank in military command, i.e. Generalissimo of the Imperial Army. His possessions, which included the manor of Fr\xfddlant were then more or less spared from major war conflicts and that is why they were referred to as \'the happy land - terra felix\'.\\n\\n As for the Fr\xfddlant manor, during Wallenstein\'s reign, we can talk about an economic rise, primarily in industries that were associated with the needs of the time \u2013 mining and metal processing or gunpowder production. The castle and chateau were uninhabited and only minor structural modifications took place. Wallenstein stayed here only for a few days in 1627, 1628 and 1630. The end of Wallenstein\'s life was heralded by the loss of trust from the emperor, who felt threatened by Walstein, which is why Wallenstein was murdered by his officers at the beginning of 1634.","img":"/people/albrecht_valdstejn.jpg"}]},{"title":"Gallas","description":"House from northern Italy, which contributed to the expansion of the Fr\xfddlant manor to include Lemberk Castle and its surroundings.","img":"/coat_of_arms/gallasove.png","button":"More","owners":[{"number":1,"name":"Matthias of Gallas","years":"1588-1647","label":"The life of Matthias of Gallas and his social rise were, as in the case of Wallenstein, tightly connected with the period of the Thirty Years\' War.","button":"More","text":"The life of Matthias of Gallas and his social rise were, as in the case of Wallenstein, tightly connected with the period of the Thirty Years\' War. Matthias joined the army as a young man and became famous for the first time in the wars for the Mantuan inheritance on the side of the Catholic League. In 1628 he entered the service of Albrecht of Wallenstein and became one of his generals. In 1632 he attained the rank of earl. After the betrayal of Wallenstein, he became the heir to the Frydlant manor and later the commander-in-chief of the Imperial army, where he worked until the end of the Thirty Years\' War. For Fr\xfddlant, his reign meant the period between 1640-1649 when the castle and town were occupied by Swedish crew. Matthias died in Vienna in 1647.","img":"/people/matyas_gallas.jpg"},{"number":2,"name":"Antonius of Gallas","years":"1638-1695","label":"Antonius is the younger of the sons of Matthias of Gallas.","button":"More","text":"Antonius is the younger of the sons of Matthias of Gallas. He lost his father at the age of 9. After studies and a cavalier journey after France and Benelux, together with his brother Francis Ferdinand, he took over the administration of inherited manors. During his lifetime, he worked as a chamberlain in the service of the Elector of Bavaria and inherited from his father the command of military regiments. His economic situation worsened to the point that he was forced to sell his share to manor and to gave up military regiments as well. In the end, he fell into debt and lived in Kladsk on estates of his son Philip Francis.","img":"/people/antonin_pankrac_gallas.jpg"},{"number":3,"name":"Francis Ferdinand of Gallas","years":"1635-1697","label":"Francis is the elder of the sons of Matthias of Gallas.","button":"More","text":"Francis is the elder of the sons of Matthias of Gallas. After completing his studies and cavalier journey, he took over the administration of the inherited manors. The only court title he received was the titular court chamberlain. During his life he stayed mainly on his manors in Bohemia, mostly in Prague and at the castle in Ho\u0159\xedn\u011bves. His life in Fr\xfddlant is mainly connected with the rebellion of the subjects led by the blacksmith Ond\u0159ej of Stelzig, which was suppressed in 1680. He died in 1697 and his remains are kept in the ancestral tomb in Hejnice.","img":"/people/frantisek_ferdinand_gallas.jpg"},{"number":4,"name":"John Wenceslaus of Gallas","years":"1671-1719","label":"The most important member of this family together with Matthias of Gallas.","button":"More","text":"The most important member of this family together with Matthias of Gallas. He worked in the service of emperors Joseph I. and Charles VI. as an imperial chamberlain, a true privy councilor and diplomat. He worked in the diplomatic service in London, The Hague and Rome. He was eventually appointed viceroy in Naples, where he died in 1719. He is the founder of the later Clam-Gallas Palace in Prague\'s Old Town.","img":"/people/jan_vaclav_gallas.jpg"},{"number":5,"name":"Philip Joseph of Gallas","years":"1703-1757","label":"The last member of the Gallas family, thanks to whom the Fr\xfddlant estate was expanded to include the area around Lemberk.","button":"More","text":"The last member of the Gallas family, thanks to whom the Fr\xfddlant estate was expanded to include the area around Lemberk. During his life he held the official positions of the highest regional hofmeister of the Kingdom of Bohemia and the highest court judge. After the Habsburg army suffered a defeat by the Prussians in the Battle of Liberec, the Fr\xfddlant region was plundered by the Prussians. \\n\\nHe died in 1757 without a male heir, the estate was then managed by his wife Marie Anna. After her death the estate was passed to his nephew Christian Philip of Clam. The condition for this was the merging coats of arms and the addition of the name Gallas. This gave rise to the house Clam-Gallas.","img":"/people/filip_josef_gallas.jpg"}]},{"title":"Clam-Gallas","description":"The last family living in the Fr\xfddlant castle. During her tenure, a major reconstruction of the Renaissance wing of the chateau and the construction of a new wing took place.","img":"/coat_of_arms/clamgallasove.png","button":"Learn","owners":[{"number":1,"name":"Christian Philip of Clam-Gallas","years":"1748-1805","label":"The first of the Clam-Gallas line, who also held offices at the Habsburg court during his lifetime.","button":"More","text":"The first of the Clam-Gallas line, who also held offices at the Habsburg court during his lifetime. He became royal chamberlain of three emperors and was promoted to knight of the order of St. Stephen. He expanded the family estates by another territory. \\n\\nHe was a great lover and patron of the arts. In his Prague residence he hosted, for example, Mozart or Beethoven. In the Fr\xfddlant region, he is primarily associated with the founding of the spa town of Libverda, in Prague then with the Klamovka estate.","img":"/people/kristian_filip_clamgallas.jpg"},{"number":2,"name":"Christian Christopher of Clam-Gallas","years":"1771-1838","label":"Christian Christopher of Clam-Gallas continued his father\'s legacy in terms of career and patronage.","button":"More","text":"Christian Christopher of Clam-Gallas continued his father\'s legacy in terms of career and patronage. He had the rank of Supreme Marshal of the Czech Kingdom. He married Josefina Caroline Clary-Aldringen, also a great lover of art. Together they maintained contact with, for example, Ludwig van Beethoven. \\n\\nHe contributed to further construction activity in Libverda, where new spa pavilions were built. Around Klamovka,he established gardens with sculptural decoration.","img":"/people/kristian_krystof_clamgallas.jpg"},{"number":3,"name":"William of Clam-Gallas","years":"1801-1822","label":"The elder of Christian Christopher\'s sons.","button":"More","text":"The elder of Christian Christopher\'s sons. He died very young at the age of 21. He is buried in the ancestral tomb in Hejnice.","img":"/people/vilem_clamgallas.jpg"},{"number":4,"name":"Edward of Clam-Gallas","years":"1805-1891","label":"Edward was the younger of Christian Christopher\'s sons and also the most prominent member of the Clam-Gallas family.","button":"More","text":"Edward was the younger of Christian Christopher\'s sons and also the most prominent member of the Clam-Gallas family. In 1823 he entered the army as a young man, where he reached the rank of general. He fought under the command of Marshal Radeck\xfd in Northern Italy during the First Italian War of Independence, then fought in Hungary and returned to the Second War in Northern Italy. The most significant of the battles in which he participated are the battles of Magenta and Solferin. \\n\\nDuring the Prussian-Austrian War, he suffered a defeat at the Battle of Ji\u010d\xedn, for which he was judged by a court-martial. Even though he was acquitted, he never returned to the army and lived out his life in Fr\xfddlant and Liberec. \\n\\nDuring his stay in Fr\xfddlant, he had the local chateau undergo extensive reconstruction and building modifications, during which the newest wing of the chateau was created. He died in 1891 at the age of 86.","img":"/people/eduard_clamgallas.jpg"},{"number":5,"name":"Francis of Clam-Gallas","years":"1854-1930","label":"The last male descendant of the Clam-Gallas family.","button":"More","text":"The last male descendant of the Clam-Gallas family. He too continued his civil service career, was chamberlain and privy councilor, but above all he devoted himself to the management of the family estates Liberec, Fr\xfddlant, Grab\u0161tejn and Lemberk. \\n\\nThe First World War, the creation of the Czechoslovak Republic and also the land reform intervened in his life. In addition to farming, he also devoted his whole life to volunteer work and charity, to which he actively contributed. \\n\\nHe died in Fr\xfddlanta in 1930 and left behind 7 daughters. The youngest of them, Clotilde, lived in Fr\xfddlant until the end of World War II.","img":"/coat_of_arms/clamgallasove.png"},{"number":6,"name":"Clotilde of Clam-Gallas","years":"1898-1975","label":"Clotilda of Clam-Gallas was the youngest daughter of Francis Clam-Gallas and Maria Hoyos-Sprinzenstein.","button":"More","text":"Clotilda of Clam-Gallas was the youngest daughter of Francis Clam-Gallas and Maria Hoyos-Sprinzenstein. During Francis\' lifetime, his properties were divided between his daughters. Clotilde then received the Fr\xfddlant Castle. She remained single after her father\'s death, she took care of her widowed mother. After 1945, she had to move abroad and the castle was nationalized.","img":"/coat_of_arms/clamgallasove.png"}]}]},{"language":"de","path":"/history_overview","title":"Geschichte \xdcbersicht","button":"Mehr","img":"/history/history.jpg","card_label":"Lernen Sie die Geschichte der Burg und des Schlosses Fr\xfddlant kennen.","description":"Fr\xfddlant ist eine der gr\xf6\xdften und bedeutendsten Denkm\xe4ler in Nordb\xf6hmen. Es besteht aus zwei architektonischen Komplexen: einer mittelalterlichen Burg und einem Renaissanceschloss. Die Burg wurde um die Mitte des 13. Jahrhunderts erbaut. 1278 ging die Dom\xe4ne in den Besitz des Hauses Biberstein \xfcber, das ma\xdfgeblich am Bau des gro\xdfen Burgschlosses beteiligt war. Zwischen 1558 und 1620 war Fr\xfddlant im Besitz des Hauses Redern, das die Herrschaft weiter ausbaute. Die Rederns waren gute Manager und Krieger, aber auch Baumeister und Kunstf\xf6rderer. Sie bauten das Neurenaissanceschloss und die Kapelle. \\n\\nZwischen 1622 und 1634 geh\xf6rte die Burg Albrecht von Wallenstein. Er kaufte es f\xfcr 150.000 Gulden und baute nach und nach eine gro\xdfe Dom\xe4ne auf. Seine L\xe4ndereien bl\xfchten w\xe4hrend des Drei\xdfigj\xe4hrigen Krieges sehr auf, als sie seine Armee versorgten. Die Region Fr\xfddlant wurde Terra felix \u2013 das gl\xfcckliche Land \u2013 genannt. \\n\\nNach der Ermordung Albrechts im Jahre 1634 schenkte der Kaiser Fr\xfddlant dem Haus Gallas, und seit 1759 geh\xf6rte die Dom\xe4ne den Clam-Gallas, einem wichtigen Adelshaus, das in diplomatischen und milit\xe4rischen Kreisen am kaiserlichen Hof aktiv war. Sie blieben bis 1945, als Fr\xfddlant Staatseigentum wurde. \\n\\nDie urspr\xfcngliche gotische Burg ist nicht vollst\xe4ndig erhalten. Heutzutage ist die Burg ein gro\xdfes zweist\xf6ckiges Geb\xe4ude um den kleinen, unregelm\xe4\xdfig geformten Innenhof mit dem vorherrschenden zylindrischen Turm \u2013 einem Bergfrit. Die Burg wuchs im Laufe der Zeit und wurde im 16. Jahrhundert zweimal im Renaissancestil umgebaut. Die Kapelle und das Renaissanceschloss wurden um die Wende vom 16. zum 17. Jahrhundert von Marco Spazzio di Lancio erbaut. Der letzte gro\xdfe Umbau fand in den 1860er Jahren statt, als der Burgw\xe4rterfl\xfcgel wieder aufgebaut wurde. \\n\\nIn 1801 machten die Clam-Gallases einen Teil der Burgs mit Ausstellungen \xf6ffentlich zug\xe4nglich und machten es zum ersten Schlossmuseum in Mitteleuropa. Die aktuelle Ausstellung umfasst dieses Museum, die Kapelle mit wertvollen Gegenst\xe4nden und zwei Schlossfl\xfcgel.","label":"Geschichte der Burg Fr\xfddlant"},{"language":"de","path":"/houses","title":"Houses","img":"/history/coat_of_arms.jpg","card_label":"Lernen Sie die einzelnen Besitzer der Herrschaft Fr\xfddlant kennen","button":"Mehr","houses":[{"title":"Ronowitzer","description":"Gr\xfcnder der Burg Fr\xfddlant.","img":"/coat_of_arms/ronovci.png","button":"Mehr","owners":[{"number":1,"name":"Ronowitzer","years":"????-1278","label":"Die \xe4lteste Geschichte der Burg Fr\xfddlant ist mit der Familie Ronowitzer verbunden, die sie offenbar im 13. Jahrhundert in den 1340er Jahren erbauen lie\xdf.","button":"Mehr","text":"Die \xe4lteste Geschichte der Burg Fr\xfddlant ist mit der Familie Ronowitzer verbunden, die sie offenbar im 13. Jahrhundert in den 1340er Jahren erbauen lie\xdf. Wir wissen nicht viel \xfcber ihre Aktivit\xe4ten in Nordb\xf6hmen. Das erste bekannte Mitglied aus dieser Familie war Smil, der zum Gefolge von K\xf6nig P\u0159emysl Otakar I. geh\xf6rte. Seine S\xf6hne Jind\u0159ich und \u010castolov verwenden noch 1238 den Beinamen \'von Zittau\', aber schon 1257 finden wir eine Erw\xe4hnung \'Der Vogel von Fr\xfddlant\'. Die Expansion dieser Familie wurde 1278 von K\xf6nig P\u0159emysl Otakar II. begrenzt, als er den Besitz von der Familie Ronowitzer \xfcbernahm und an die benachbarte Familie Biberstein verkaufte.","img":"/coat_of_arms/ronovci.png"}]},{"title":"Biberstein","description":"Das l\xe4ngste Herrscherhaus, das f\xfcr den Ausbau des Schlosses verantwortlich war.","img":"/coat_of_arms/biberstejnove.png","button":"Mehr","owners":[{"number":1,"name":"Biberstein","years":"1278-1551","label":"Die Vertreter der Familie Biberstein wurden f\xfcr die n\xe4chsten 300 Jahre Eigent\xfcmer der Herrschaft Fr\xfddlant, und ihre T\xe4tigkeit ist haupts\xe4chlich mit dem Ausbau der Burg und dem weiteren Wachstum der Herrschaft Fr\xfddlant verbunden.","button":"Mehr","text":"Die Vertreter der Familie Biberstein wurden f\xfcr die n\xe4chsten 300 Jahre Eigent\xfcmer der Herrschaft Fr\xfddlant, und ihre T\xe4tigkeit ist haupts\xe4chlich mit dem Ausbau der Burg und dem weiteren Wachstum der Herrschaft Fr\xfddlant verbunden. Dank der Bem\xfchungen dieser Familie um weitere Gebietsgewinne kam es zu mehreren Konflikten mit benachbarten Adligen (z. B. dem Brand von Nymburk im Jahr 1326) und schlie\xdflich zu einem Zusammensto\xdf mit der k\xf6niglichen Armee von Wenzel IV. \\n\\nW\xe4hrend der Hussitenkriege wurde Fr\xfddlant zum Zentrum der antihussitischen Opposition, und die Herrschaft Fr\xfddlant wurde zwischen 1420 und 1433 mehrmals angegriffen. Die Stadt Fr\xfddlant und andere D\xf6rfer in der N\xe4he waren mehrmals ausgebrannt. Die Familie Biberstein blieb dann in Opposition zu K\xf6nig Ji\u0159\xed von Pod\u011bbrady und nahm an anderen kriegerischen Auseinandersetzungen teil. W\xe4hrend der Herrschaft der letzten Mitglieder det Familie Biberstein wurde die Herrschaft Fr\xfddlant vollst\xe4ndig protestantisch, worauf die aufstrebende Familie Redern folgte. Der letzte m\xe4nnliche Nachkomme, Kry\u0161tof, starb 1551 ohne Erben und somit fiel die Herrschaft an die b\xf6hmische K\xf6nigskammer.","img":"/coat_of_arms/biberstejnove.png"}]},{"title":"R\xf6dern","description":"Das Schlesische Haus, das zum Wachstum des Protestantismus und zum Bau des Schlosses beitrug.","img":"/coat_of_arms/redernove.png","button":"Mehr","owners":[{"number":1,"name":"Friedrich von R\xf6dern","years":"????-1564","label":"Friedrich von R\xf6dern war ein Mitglied des schlesischen Rittergeschlechts.","button":"Mehr","text":"Friedrich von R\xf6dern war ein Mitglied des schlesischen Rittergeschlechts. Zu seinen Lebzeiten bekleidete er das Amt des Pr\xe4sidenten der Schlesischen L\xe4nderkammer und war Mitglied der k\xf6niglichen Kommission zur Erfassung des Zustandes des Guts nach dem Tod des letzten Besitzers des Gutshofes Fr\xfddlant. In 1558 kaufte Friedrich die nordb\xf6hmischen G\xfcter Liberec, Fr\xfddlant und Zawidow. Nach dem Kauf wurde er in den Adelsstand erhoben. Er und seine Frau Salomena aus Sch\xf6naich hatten insgesamt 10 Kinder. Er starb 1564 w\xe4hrend eines Aufenthalts in Wroclaw, Polen.","img":"/coat_of_arms/redernove.png"},{"number":2,"name":"Melchior von R\xf6dern","years":"1555-1600","label":"Er war das neunte von insgesamt zehn Kindern von Friedrich von R\xf6dern.","button":"Mehr","text":"Er war das neunte von insgesamt zehn Kindern von Friedrich von R\xf6dern. In seiner Jugend studierte er der Rechtswissenschaften an einer evangelischen Universit\xe4t in Heidelberg und begab sich anschlie\xdfend zusammen mit seinem Bruder Christoph auf eine Kavaliersreise nach Frankreich, wo er 1572 Zeuge des Massakers an den Hugenotten in der sogenannten Bartholom\xe4usnacht wurde. Neben Frankreich besuchte er auch die italienischen St\xe4dte Rom, Padua und Neapel. Alle m\xe4nnlichen Nachkommen wurden an der Verwaltung des Frydlant-Anwesens beteiligt, und Melchior trat schlie\xdflich der Armee bei. In den 1570er und 1580er Jahren nahm er an der Belagerung von Danzig, dem Feldzug gegen Ungarn, dem Krieg in den Niederlanden oder der Belagerung von Pskow teil.\\n\\nErst 1581 verwaltete er das Gut nur mit seinem Bruder Kry\u0161tof, und nach seinem Tod 1591 wurde er alleiniger Eigent\xfcmer. Er heiratete Katharina von \u0160lik, die Schwester eines der einflussreichsten protestantischen Adligen, J\xe1chym Ond\u0159ej von \u0160lik. Zu seinen Lebzeiten wurden im Burgbereich bauliche Ver\xe4nderungen vorgenommen. Ein Burgfl\xfcgel wurde angebaut, ein Renaissancefl\xfcgel des Schlosses wurde in der N\xe4he der Burg errichtet und schlie\xdflich auch eine Schlosskapelle. In den 1590er Jahren kehrte Melchior mehrmals als Offizier auf die ungarischen Schlachtfelder zur\xfcck. Bereits im Fr\xfchjahr 1600 nahm er an einer Versammlung in Wien \xfcber das weitere milit\xe4rische Vorgehen gegen die T\xfcrken teil, unterbrach jedoch im Herbst aus gesundheitlichen Gr\xfcnden seinen Feldzug und starb im September dieses Jahres.","img":"/people/melchior_redern.jpg"},{"number":3,"name":"Katharina von R\xf6dern","years":"1553-1617","label":"Katharina von R\xf6dern, geborene \u0160lik, war die Schwester von J\xe1chym Ond\u0159ej von \u0160lik, einem von denen, die 1621 auf dem Altst\xe4dter Ring hingerichtet wurden.","button":"Mehr","text":"Katharina von R\xf6dern, geborene \u0160lik, war die Schwester von J\xe1chym Ond\u0159ej von \u0160lik, einem von denen, die 1621 auf dem Altst\xe4dter Ring hingerichtet wurden. Zwischen 1600 und 1611 verwaltete sie das Gut f\xfcr ihren minderj\xe4hrigen Sohn Christoph. Ihre Arbeit auf dem Gut Fr\xfddlant ist vor allem mit Streitigkeiten mit den B\xfcrgern der Stadt um das Bierbraurecht verbunden. Schlechte Beziehungen zu den Einheimischen f\xfchrten schlie\xdflich dazu, dass sie haupts\xe4chlich auf dem Schloss in Liberec blieb, und f\xfchrten zu lokalem Aberglauben \xfcber den b\xf6sen Adel. \\n\\nW\xe4hrend ihrer Amtszeit wurde die Schlosskapelle in Fr\xfddlant und Liberec fertig gestellt, und weitere Kirchen wurden im gesamten Gut Fr\xfddlant gebaut. Sie starb 1617 in Liberec, sie sollte in der Familiengruft in Fr\xfddlant beerdigt werden, aber das geschah nie und der Bestattungsort ist bis heute unbekannt.","img":"/people/katerina_redern.jpg"},{"number":4,"name":"Christoph von R\xf6dern","years":"1591-1641","label":"Christoph \xfcbernahm nach Vollj\xe4hrigkeit im Jahre 1611 die Herrschafr Fr\xfddlant.","button":"Mehr","text":"Christoph \xfcbernahm nach Vollj\xe4hrigkeit im Jahre 1611 die Herrschafr Fr\xfddlant. Er setzte den Streit mit den B\xfcrgern von Frydlant fort, der bereits w\xe4hrend der Regentschaft seiner Mutter begonnen hatte. Nach dem Ausbruch des St\xe4ndeaufstandes engagierte er sich zusammen mit seinem Onkel J\xe1chym Ond\u0159ej von \u0160lik auf der Seite des Protestantischen Bundes, als er Kommandeur einer Kavallerieeinheit wurde. Er litt zu diesem Zeitpunkt bereits unter gesundheitlichen Problemen. \\n\\nNach der Niederlage der b\xf6hmischen Staaten 1620 wurde sein Verm\xf6gen beschlagnahmt und er lebte im Exil auf dem Gut Zawidow. Er trat in den Dienst von K\xf6nig Christian von D\xe4nemark und setzte seinen Kampf gegen den Kaiser fort. Er unterhielt auch Beziehungen zu anderen Exilanten, z.B. Jind\u0159ich Maty\xe1\u0161 Thurn. 1627 wurde ihm auch das Gut Zawidow entzogen. Anschlie\xdfend residierte er in der Residenz seiner Frau Magdalena von Hundt im heutigen Polen. Als die Schweden zwischen 1639 und 1640 in B\xf6hmen einfielen, kehrte er nach Fr\xfddlant zur\xfcck, musste es aber im selben Jahr wieder nach Wallenstein verlassen. Er starb irgendwann nach 1641 im Exil.","img":"/coat_of_arms/redernove.png"}]},{"title":"Albrecht von Wallenstein","description":"Albrecht von Wallenstein war ein tschechischer Heerf\xfchrer, Politiker und eine der bedeutendsten Pers\xf6nlichkeiten der tschechischen Geschichte.","img":"/coat_of_arms/albrecht.png","button":"Mehr","owners":[{"number":1,"name":"Albrecht von Wallenstein","years":"1591-1641","label":"Albrecht von Wallenstein wurde in eine nicht sehr wohlhabende und einflussreiche protestantische Familie hineingeboren und wurde schlie\xdflich einer der m\xe4chtigsten M\xe4nner von gesamteurop\xe4ischer Bedeutung.","button":"Mehr","text":"Albrecht von Wallenstein wurde in eine nicht sehr wohlhabende und einflussreiche protestantische Familie hineingeboren und wurde schlie\xdflich einer der m\xe4chtigsten M\xe4nner von gesamteurop\xe4ischer Bedeutung. Seine Amtszeit bei Fr\xfddlant war nicht lang, es dauerte nur 12 Jahre, dennoch ist dies die Zeit, die diesen Ort am ber\xfchmtesten machte und das Anwesen zum Herzogtum erhoben wurde. \\n\\nDas Leben von Albrecht von Wallenstein war schon in jungen Jahren mit dem Milit\xe4rdienst verbunden. Er trat bald aus dem protestantischen Lager in den kaiserlichen Dienst \xfcber und erreichte auf den Schlachtfeldern des Drei\xdfigj\xe4hrigen Krieges die h\xf6chste Position in der Heeresleitung, d.h. Generalissimus der kaiserlichen Armee. Seine Besitzungen, zu denen auch das Herzogtum Fr\xfddlant geh\xf6rte, blieben damals von gr\xf6\xdferen kriegerischen Auseinandersetzungen mehr oder weniger verschont und wurden daher als \u201edas gl\xfcckliche Land \u2013 terra felix\u201c bezeichnet. \\n\\nWas das Gut Fr\xfddlan betrifft, k\xf6nnen wir w\xe4hrend der Herrschaft von Wallenstein von wirtschaftlichem Wachstum sprechen, insbesondere in Industriezweigen, die mit den Bed\xfcrfnissen der Zeit verbunden waren - Metallabbau und -verarbeitung oder Schie\xdfpulverherstellung. Die Burg und das Schloss waren unbewohnt und es wurden nur geringf\xfcgige bauliche Ver\xe4nderungen vorgenommen. Wallenstein hielt sich hier nur wenige Tage in den Jahren 1627, 1628 und 1630 auf. Das Ende von Wallensteins Leben k\xfcndigte der Vertrauensverlust des Kaisers an, der sich durch seine Pers\xf6nlichkeit bedroht f\xfchlte, und so wurde Wallenstein Anfang 1634 von seinen Offizieren entfernt . Damit endete eine Zeit ohne gr\xf6\xdfere Kriegsn\xf6te und Ver\xe4nderungen auch f\xfcr seinen Nachlass.","img":"/people/albrecht_valdstejn.jpg"}]},{"title":"Gallas","description":"Herrscherhaus aus Norditalien, das zur Erweiterung des Gutshofs Fr\xfddlant um das Schloss Lemberk und seine Umgebung beitrug.","img":"/coat_of_arms/gallasove.png","button":"Mehr","owners":[{"number":1,"name":"Matthias von Gallas","years":"1588-1647","label":"Das Leben des Matthias von Gallas und sein gesellschaftlicher Aufstieg waren wie im Falle Wallensteins fest mit der Zeit des Drei\xdfigj\xe4hrigen Krieges verbunden.","button":"Mehr","text":"Das Leben des Matthias von Gallas und sein gesellschaftlicher Aufstieg waren wie im Falle Wallensteins fest mit der Zeit des Drei\xdfigj\xe4hrigen Krieges verbunden. Matthias trat als junger Mann in die Armee ein und wurde zum ersten Mal in den Kriegen ber\xfchmt f\xfcr das mantuanische Erbe auf der Seite der Katholischen Liga. 1628 trat er in die Dienste von Albrecht von Wallenstein und wurde einer seiner Feldherren. 1632 erlangte er den Rang eines Earls. Nach dem Verrat an Wallenstein wurde er Erbe des Gutshofes Fr\xfddlant und sp\xe4ter Oberbefehlshaber der kaiserlichen Armee, wo er bis zum Ende des Drei\xdfigj\xe4hrigen Krieges diente. F\xfcr Fr\xfddlant bedeutete seine Regierungszeit die Zeit zwischen 1640 und 1649, als das Schloss und die Stadt von einer schwedischen Garnison besetzt waren. Matthias starb 1647 in Wien.","img":"/people/matyas_gallas.jpg"},{"number":2,"name":"Antonius von Gallas","years":"1638-1695","label":"Der j\xfcngere der S\xf6hne des Matthias von Gallas.","button":"Mehr","text":"Der j\xfcngere der S\xf6hne des Matthias von Gallas. Er verlor seinen Vater im Alter von 9 Jahren. Nach seinem Studium und einer Kavaliersreise durch Frankreich und die Benelux-L\xe4nder \xfcbernahm er zusammen mit seinem Bruder Franz Ferdinand die F\xfchrung der Familieng\xfcter. Zu Lebzeiten arbeitete er als Kammerherr im Dienst des Kurf\xfcrsten von Bayern und erbte von seinem Vater die F\xfchrung von Milit\xe4rregimentern. Seine wirtschaftliche Situation verschlechterte sich derart, dass er gezwungen war, seinen Anteil an den G\xfctern zu verkaufen und seine Milit\xe4rregimenter aufzugeben. Schlie\xdflich verschuldete er sich und lebte in Kladsk auf den G\xfctern seines Sohnes Filip Franz.","img":"/people/antonin_pankrac_gallas.jpg"},{"number":3,"name":"Franz Ferdinand von Gallas","years":"1635-1697","label":"\xc4ltester der S\xf6hne des Matthias von Gallas.","button":"Mehr","text":"\xc4ltester der S\xf6hne des Matthias von Gallas. Nach Abschluss seiner Ritterlehre \xfcbernahm er die Verwaltung der ererbten L\xe4ndereien. Der einzige Gerichtstitel, den er erhielt, war der Titulargerichtsk\xe4mmerer. Zu seinen Lebzeiten lebte er haupts\xe4chlich auf seinen G\xfctern in B\xf6hmen, haupts\xe4chlich in Prag und auf der Burg in Ho\u0159\xednevs. Sein Leben in Fr\xfddlant ist vor allem mit dem Aufstand der Untertanen unter F\xfchrung des Peitschenschmieds Ond\u0159ej von Stelzig verbunden, der 1680 niedergeschlagen wurde. Er starb 1697 und seine sterblichen \xdcberreste werden in der Ahnengruft in Hejnice aufbewahrt.","img":"/people/frantisek_ferdinand_gallas.jpg"},{"number":4,"name":"Johann Wenzeslaus von Gallas","years":"1671-1719","label":"Das wichtigste Mitglied dieser Familie zusammen mit Matthias von Gallas.","button":"Mehr","text":"Das wichtigste Mitglied dieser Familie zusammen mit Matthias von Gallas. Er arbeitete im Dienst der Kaiser Joseph I. und Karl VI. als kaiserlicher K\xe4mmerer, echter Geheimrat und Diplomat. Er diente im diplomatischen Dienst in London, Den Haag und Rom. Er wurde schlie\xdflich zum Vizek\xf6nig in Neapel ernannt, wo er 1719 starb. Er ist der Gr\xfcnder des sp\xe4teren Clam-Gallas-Palais in der Prager Altstadt.","img":"/people/jan_vaclav_gallas.jpg"},{"number":5,"name":"Philip Joseph von Gallas","years":"1703-1757","label":"Prvni majitel frydlantu","button":"Mehr","text":"Das letzte Mitglied der Familie Gallas, dank dessen das Gut Fr\xfddlant auf das Gebiet um Lemberk ausgedehnt wurde. Zu seinen Lebzeiten bekleidete er die \xc4mter des h\xf6chsten Landeshofmeisters des K\xf6nigreichs B\xf6hmen und des obersten Gerichtsrichters. Nachdem die habsburgische Armee in der Schlacht bei Liberec eine Niederlage gegen die Preu\xdfen erlitten hatte, wurde ganz Friedland von den Preu\xdfen gepl\xfcndert. \\n\\nEr starb 1757 ohne m\xe4nnlichen Erben, das Gut wurde dann von seiner Frau Marie Anna verwaltet. Nach ihren Tod musste das Gut an seinen Neffen Christian Philip von Clam \xfcbergehen. Voraussetzung daf\xfcr war die Zusammenlegung der Wappen und die Hinzuf\xfcgung des Namens Gallas.","img":"/people/filip_josef_gallas.jpg"}]},{"title":"Clam-Gallas","description":"Die letzte Familie, die im Schloss Fr\xfddlant lebte. W\xe4hrend ihrer Amtszeit fand eine umfassende Rekonstruktion des Renaissancefl\xfcgels des Schlosses und der Bau eines neuen Fl\xfcgels statt.","img":"/coat_of_arms/clamgallasove.png","button":"Mehr","owners":[{"number":1,"name":"Christian Philip von Clam-Gallas","years":"1748-1805","label":"Der erste aus der Clam-Gallas-Linie, der zu Lebzeiten auch \xc4mter am habsburgischen Hof bekleidete.","button":"Mehr","text":"Der erste aus der Clam-Gallas-Linie, der zu Lebzeiten auch \xc4mter am habsburgischen Hof bekleidete. Er wurde k\xf6niglicher Kammerherr von drei Kaisern und wurde in den Rang eines Ritters des St.-Stephans-Ordens erhoben. Er erweiterte die Familieng\xfcter mit zus\xe4tzlichem Territorium. \\n\\nEr war ein gro\xdfer Liebhaber und M\xe4zen der K\xfcnste. Er beherbergte zum Beispiel Mozart oder Beethoven in seiner Prager Residenz. In der Region Frydlant ist es vor allem mit der Gr\xfcndung der Kurstadt Libverda und in Prag mit dem Gut Klamovka verbunden.","img":"/people/kristian_filip_clamgallas.jpg"},{"number":2,"name":"Christian Christoph von Clam-Gallas","years":"1771-1838","label":"Christian Christoph setzte das Erbe seines Vaters in Bezug auf Karriere und M\xe4zenatentum fort.","button":"Mehr","text":"Christian Christoph setzte das Erbe seines Vaters in Bezug auf Karriere und M\xe4zenatentum fort. Er bekleidete den Rang eines Obersten Marschalls des b\xf6hmischen K\xf6nigreichs. Er heiratete Josefina Caroline von Clary-Aldringen, ebenfalls eine gro\xdfe Kunstliebhaberin. Gemeinsam pflegten sie den Kontakt zum Beispiel zu Ludwig van Beethoven. \\n\\nEr trug zur weiteren Baut\xe4tigkeit in Libverda bei, wo neue Spa-Pavillons gebaut wurden. Rund um das Geh\xf6ft Klamovka lie\xdf er G\xe4rten mit Skulpturenschmuck anlegen.","img":"/people/kristian_krystof_clamgallas.jpg"},{"number":3,"name":"Wilhelm von Clam-Gallas","years":"1801-1822","label":"Der \xe4ltere der S\xf6hne von Christian Christoph.","button":"Mehr","text":"Der \xe4ltere der S\xf6hne von Christian Christoph. Er starb sehr jung im Alter von 21 Jahren. Er ist in der Familiengruft in Hejnice begraben.","img":"/people/vilem_clamgallas.jpg"},{"number":4,"name":"Eduard von Clam-Gallas","years":"1805-1891","label":"Der j\xfcngere Sohn von Christian Christoph.","button":"Mehr","text":"Der j\xfcngere Sohn von Christian Christoph. Das prominenteste Mitglied der Clam-Gallas-Familie. Bereits als junger Mann trat er 1823 in die Armee ein, wo er den Rang eines Generals erreichte. Unter dem Kommando von Marschall Radeck\xfd k\xe4mpfte er w\xe4hrend des Ersten Italienischen Unabh\xe4ngigkeitskrieges in Norditalien, schloss sich dann den K\xe4mpfen in Ungarn an und kehrte in den Zweiten Krieg nach Norditalien zur\xfcck. Die wichtigsten der Schlachten, an denen er teilnahm, sind die Schlachten von Magenta und Solferino. \\n\\nW\xe4hrend des Preu\xdfisch-\xd6sterreichischen Krieges erlitt er in der Schlacht bei Ji\u010d\xedn eine Niederlage, f\xfcr die er vor ein Kriegsgericht gestellt wurde. Dieser sprach ihn frei, aber er kehrte nie zur Armee zur\xfcck und verbrachte sein Leben in Fr\xfddlant und Liberec. \\n\\nW\xe4hrend seines Aufenthaltes in Fr\xfddlant lie\xdf er das Renaissanceschloss umfassend umbauen, wobei der neueste Fl\xfcgel des Schlosses entstand. Er starb 1891 im Alter von 86 Jahren.","img":"/people/eduard_clamgallas.jpg"},{"number":5,"name":"Franz von Clam-Gallas","years":"1854-1930","label":"Der letzte m\xe4nnliche Nachkomme der Familie Clam-Gallas.","button":"Mehr","text":"Der letzte m\xe4nnliche Nachkomme der Familie Clam-Gallas. Auch er setzte seine Beamtenlaufbahn fort, war Kammerherr und Geheimrat, widmete sich aber vor allem der Verwaltung der Familieng\xfcter Liberec, Fr\xfddlant, Grab\u0161tejn und Lemberk. \\n\\nDer Erste Weltkrieg, die Gr\xfcndung der Tschechoslowakischen Republik und auch die Bodenreform griffen in sein Leben ein. Neben der Landwirtschaft widmete er sein ganzes Leben der Freiwilligenarbeit und der Wohlt\xe4tigkeit, zu der er aktiv beitrug. \\n\\nEr starb 1930 in Fr\xfddlant und hinterlie\xdf 7 T\xf6chter. Die j\xfcngste von ihnen, Klotilda, lebte bis zum Ende des Zweiten Weltkriegs in Fr\xfddlant.","img":"/coat_of_arms/clamgallasove.png"},{"number":6,"name":"Clotilde von Clam-Gallas","years":"1898-1975","label":"Klotilde von Clam-Gallas war die j\xfcngste Tochter von Franz Clam-Gallas und Maria Hoyos-Sprinzenstein.","button":"Mehr","text":"Klotilde von Clam-Gallas war die j\xfcngste Tochter von Franz Clam-Gallas und Maria Hoyos-Sprinzenstein. Zu Franz Lebzeiten wurde sein Verm\xf6gen zwischen seinen T\xf6chtern aufgeteilt. Klotylda erhielt dann die Burg Fr\xfddlant. Nach Franzs Tod k\xfcmmerte sie sich um ihre verwitwete Mutter und blieb ledig. Nach 1945 musste sie ins Ausland umziehen und das Schloss wurde verstaatlicht.","img":"/coat_of_arms/clamgallasove.png"}]}]}],"gB":[{"tour_id":"castle","language":"en","title":"Castle","img":"/castle/castle.jpg","rooms_label":"rooms","time":"60 minutes","description":"This tour takes the visitor through the Upper Castle, which is the oldest part of the Fr\xfddlant area. The entire route is dominated by a large knight\'s hall with an ancestral gallery, armory, banquet hall or a large collection of employee uniforms.","button":"Start tour","rooms":[{"number":1,"img":"/castle/room1.jpg","title":"N\xe1dvo\u0159\xed","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":2,"img":"/castle/room1.jpg","title":"N\xe1dvo\u0159\xed","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":3,"img":"/castle/room1.jpg","title":"N\xe1dvo\u0159\xed","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":4,"img":"/castle/room2.jpg","title":"Biber\u0161tejnov\xe9 a Redernov\xe9","card_label":"V prvn\xed hradn\xed m\xedstnosti bude n\xe1v\u0161t\u011bvn\xedk sezn\xe1men s prvn\xedmi majitely hradu, konkr\xe9tn\u011b tedy Biber\u0161tejny a Rederny.","label":"Prvn\xed m\xedstnost poskytne p\u0159ehled majitel\u016f hradu do poloviny 17.stolet\xed","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":5,"img":"/castle/room3.jpg","title":"Albrecht z Vald\u0161tejna","card_label":"Tato m\xedstnost prohl\xeddkov\xe9ho okruhu je v\u011bnov\xe1na dal\u0161\xedmu majiteli hradu, jedn\xe9 z nejv\xfdznam\u011bj\u0161\xedch osob \u010desk\xe9 Geschichte, a to Albrechtovi z Vald\u0161tejna.","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":6,"img":"/castle/room4.jpg","title":"Ryt\xed\u0159sk\xfd s\xe1l","card_label":"Ryt\xed\u0159sk\xfd s\xe1l, pozd\u011bji vyu\u017e\xedvan\xfd jako rodov\xe1 galerie, sezn\xe1m\xed n\xe1v\u0161tevn\xedka s rodem Gallas\u016f a jeho p\u016fsoben\xedm na hradu a v okol\xed.","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":7,"img":"/castle/room5.jpg","title":"U pi\xe1na","card_label":"Ve \u010dtvrt\xe9 hradn\xed m\xedstnosti bude n\xe1v\u0161t\u011bvn\xedkovi p\u0159edstaven rod Clam-Gallas\u016f. Z\xe1rove\u0148 ","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":8,"img":"/castle/room6.jpg","title":"Pracovna Eduarda z Gallasu","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":9,"img":"/castle/room7.jpg","title":"Uniformy","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":10,"img":"/castle/room8.jpg","title":"Nos\xedtka","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":11,"img":"/castle/room9.jpg","title":"Loveck\xfd salonek","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":12,"img":"/castle/room10.jpg","title":"Hradn\xed kuchyn\u011b","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":13,"img":"/castle/room11.jpg","title":"U v\u011bzen\xed","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":14,"img":"/castle/room12.jpg","title":"Hradn\xed zbrojnice","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":15,"img":"/castle/room13.jpg","title":"Ko\u0148sk\xe9 postroje","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":16,"img":"/castle/room14.jpg","title":"Hradn\xed galerie","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":17,"img":"/castle/room15.jpg","title":"Vrchnostensk\xe1 kancel\xe1\u0159","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."}]},{"tour_id":"castle","language":"de","title":"Die Burg","img":"/castle/castle.jpg","rooms_label":"R\xe4ume","time":"60 Minuten","description":"Die F\xfchrung f\xfchrt den Besucher durch die Obere Burg, den \xe4ltesten Teil des Fr\xfddlant-Gebiets. Der gesamte Weg wird dominiert von einem gro\xdfen Rittersaal mit Ahnenempore, einer R\xfcstkammer, einem Festsaal oder einer gro\xdfen Sammlung von Dienstkleidung.","button":"F\xfchrung beginnen","rooms":[{"number":1,"img":"/castle/room1.jpg","title":"N\xe1dvo\u0159\xed","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":2,"img":"/castle/room1.jpg","title":"N\xe1dvo\u0159\xed","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":3,"img":"/castle/room1.jpg","title":"N\xe1dvo\u0159\xed","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":4,"img":"/castle/room2.jpg","title":"Biber\u0161tejnov\xe9 a Redernov\xe9","card_label":"V prvn\xed hradn\xed m\xedstnosti bude n\xe1v\u0161t\u011bvn\xedk sezn\xe1men s prvn\xedmi majitely hradu, konkr\xe9tn\u011b tedy Biber\u0161tejny a Rederny.","label":"Prvn\xed m\xedstnost poskytne p\u0159ehled majitel\u016f hradu do poloviny 17.stolet\xed","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":5,"img":"/castle/room3.jpg","title":"Albrecht z Vald\u0161tejna","card_label":"Tato m\xedstnost prohl\xeddkov\xe9ho okruhu je v\u011bnov\xe1na dal\u0161\xedmu majiteli hradu, jedn\xe9 z nejv\xfdznam\u011bj\u0161\xedch osob \u010desk\xe9 Geschichte, a to Albrechtovi z Vald\u0161tejna.","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":6,"img":"/castle/room4.jpg","title":"Ryt\xed\u0159sk\xfd s\xe1l","card_label":"Ryt\xed\u0159sk\xfd s\xe1l, pozd\u011bji vyu\u017e\xedvan\xfd jako rodov\xe1 galerie, sezn\xe1m\xed n\xe1v\u0161tevn\xedka s rodem Gallas\u016f a jeho p\u016fsoben\xedm na hradu a v okol\xed.","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":7,"img":"/castle/room5.jpg","title":"U pi\xe1na","card_label":"Ve \u010dtvrt\xe9 hradn\xed m\xedstnosti bude n\xe1v\u0161t\u011bvn\xedkovi p\u0159edstaven rod Clam-Gallas\u016f. Z\xe1rove\u0148 ","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":8,"img":"/castle/room6.jpg","title":"Pracovna Eduarda z Gallasu","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":9,"img":"/castle/room7.jpg","title":"Uniformy","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":10,"img":"/castle/room8.jpg","title":"Nos\xedtka","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":11,"img":"/castle/room9.jpg","title":"Loveck\xfd salonek","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":12,"img":"/castle/room10.jpg","title":"Hradn\xed kuchyn\u011b","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":13,"img":"/castle/room11.jpg","title":"U v\u011bzen\xed","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":14,"img":"/castle/room12.jpg","title":"Hradn\xed zbrojnice","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":15,"img":"/castle/room13.jpg","title":"Ko\u0148sk\xe9 postroje","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":16,"img":"/castle/room14.jpg","title":"Hradn\xed galerie","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":17,"img":"/castle/room15.jpg","title":"Vrchnostensk\xe1 kancel\xe1\u0159","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."}]},{"tour_id":"chateau","language":"en","title":"Chateau","img":"/chateau/chateau.jpg","rooms_label":"rooms","time":"60 minutes","description":"This tour takes the visitor through the richly furnished castle and the history of the last owners of Clam Gallas. A fully equipped tour route maps the castle and its 24 accessible rooms on all its floors.","button":"Start tour","rooms":[{"number":1,"img":" /chateau/chateau.jpg","title":"Kuchyn\u011b","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":2,"img":" /chateau/chateau.jpg","title":"Chodba","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":3,"img":" /chateau/chateau.jpg","title":"Herna","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":4,"img":" /chateau/chateau.jpg","title":"J\xeddelna","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":5,"img":" /chateau/chateau.jpg","title":"Modr\xfd salon","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":6,"img":" /chateau/chateau.jpg","title":"P\u0159edpokoj","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":7,"img":" /chateau/chateau.jpg","title":"P\u0159ij\xedmac\xed salonek","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":8,"img":" /chateau/chateau.jpg","title":"Pracovna hrab\u011bte","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":9,"img":" /chateau/chateau.jpg","title":"Lo\u017enice","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":10,"img":" /chateau/chateau.jpg","title":"Nad schody","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":11,"img":" /chateau/chateau.jpg","title":"Kv\u011btinov\xfd salon","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":12,"img":" /chateau/chateau.jpg","title":"Lo\u017enice","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":13,"img":" /chateau/chateau.jpg","title":"Rann\xed salon","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":14,"img":" /chateau/chateau.jpg","title":"Mal\xe1 j\xeddelna","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":15,"img":" /chateau/chateau.jpg","title":"P\u0159evlek\xe1rna","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":16,"img":" /chateau/chateau.jpg","title":"Kr\xe1lovsk\xe1 chodba","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":17,"img":" /chateau/chateau.jpg","title":"Podkrov\xed","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":18,"img":" /chateau/chateau.jpg","title":"Lokajna","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":19,"img":" /chateau/chateau.jpg","title":"Kaple sv. Anny","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."}]},{"tour_id":"chateau","language":"de","title":"Das Schlo\xdf","img":"/chateau/chateau.jpg","rooms_label":"R\xe4ume","time":"60 Minuten","description":"Die F\xfchrung f\xfchrt den Besucher durch das reich ausgestattete Schloss und die Geschichte der letzten Besitzer von Clam Gallas. Ein komplett ausgestatteter Rundgang zeigt das Schloss und seine 24 barrierefreien R\xe4ume auf allen Etagen.","button":"F\xfchrung beginnen","rooms":[{"number":1,"img":" /chateau/chateau.jpg","title":"Kuchyn\u011b","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":2,"img":" /chateau/chateau.jpg","title":"Chodba","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":3,"img":" /chateau/chateau.jpg","title":"Herna","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":4,"img":" /chateau/chateau.jpg","title":"J\xeddelna","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":5,"img":" /chateau/chateau.jpg","title":"Modr\xfd salon","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":6,"img":" /chateau/chateau.jpg","title":"P\u0159edpokoj","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":7,"img":" /chateau/chateau.jpg","title":"P\u0159ij\xedmac\xed salonek","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":8,"img":" /chateau/chateau.jpg","title":"Pracovna hrab\u011bte","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":9,"img":" /chateau/chateau.jpg","title":"Lo\u017enice","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":10,"img":" /chateau/chateau.jpg","title":"Nad schody","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":11,"img":" /chateau/chateau.jpg","title":"Kv\u011btinov\xfd salon","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":12,"img":" /chateau/chateau.jpg","title":"Lo\u017enice","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":13,"img":" /chateau/chateau.jpg","title":"Rann\xed salon","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":14,"img":" /chateau/chateau.jpg","title":"Mal\xe1 j\xeddelna","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":15,"img":" /chateau/chateau.jpg","title":"P\u0159evlek\xe1rna","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":16,"img":" /chateau/chateau.jpg","title":"Kr\xe1lovsk\xe1 chodba","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":17,"img":" /chateau/chateau.jpg","title":"Podkrov\xed","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":18,"img":" /chateau/chateau.jpg","title":"Lokajna","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."},{"number":19,"img":" /chateau/chateau.jpg","title":"Kaple sv. Anny","card_label":"kratka veta popisujici, co navstevnik v misnosti uvidi","label":"Kratky popisek mistnosti","button":"Nav\u0161t\xedvit","text":"V\xedt\xe1m V\xe1s na fr\xfddlantsk\xe9m st\xe1tn\xedm hradu a z\xe1mku a p\u0159eji V\xe1m p\u0159\xedjemnou prohl\xeddku. Stoj\xedme na doln\xedm z\xe1meck\xe9m n\xe1dvo\u0159\xed, odkud vid\xedme dob\u0159e hrad, kapli i starou a novou \u010d\xe1st z\xe1mku. Hrad Fr\xfddlant pat\u0159\xed mezi nejmohutn\u011bj\u0161\xed a nejstar\u0161\xed zachoval\xe9 hrady v severn\xedch \u010cech\xe1ch, vybudov\xe1n byl kolem poloviny 13.stolet\xed ve slohu gotick\xe9m. Nejstar\u0161\xed \u010d\xe1st\xed hradu je kulat\xe1 v\u011b\u017e. Podle pov\u011bsti na ni byly zapalov\xe1ny ohn\u011b a slou\u017eila pr\xfd jako sv\u011bteln\xfd maj\xe1k na obchodn\xed stezce z \u010cech do Lu\u017eice a Polska."}]}]}'),y=function(){function e(){a(this,e)}return s(e,[{key:"getLanguages",value:function(){return g.Mj}},{key:"getInstall",value:function(e){for(var t=g.N9,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getQRScanner",value:function(e){for(var t=g.RS,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getFaceRecognition",value:function(e){for(var t=g.em,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getFaceRecognitionPeople",value:function(e){for(var t=g.Lx,n=0;n<t.length;n++)if(t[n].language===e)return t[n].people;return null}},{key:"getInfo",value:function(e){for(var t=g.um,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getDialogs",value:function(e){for(var t=g.y4,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getHeader",value:function(e){for(var t=g.Fs,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getRotateLabel",value:function(e){for(var t=g.U1,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getHome",value:function(e){for(var t=g.LE,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getTours",value:function(e){for(var t=g.gB,n=[],r=0;r<t.length;r++)t[r].language===e&&n.push(t[r]);return n}},{key:"getTourIds",value:function(e){for(var t=this.getTours(e),n=[],r=0;r<t.length;r++)n.push(t[r].tour_id);return n}},{key:"getTour",value:function(e,t){for(var n=g.gB,r=0;r<n.length;r++)if(n[r].language===e&&n[r].tour_id===t)return n[r];return null}},{key:"getRooms",value:function(e,t){for(var n=g.gB,r=0;r<n.length;r++)if(n[r].language===e&&n[r].tour_id===t)return n[r].rooms;return null}},{key:"getRoom",value:function(e,t,n){for(var r=this.getRooms(e,t),a=0;a<r.length;a++)if(r[a].number===n)return r[a];return null}},{key:"getContact",value:function(e){for(var t=g.PX,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getNavbar",value:function(e){for(var t=g.mx,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getHistory",value:function(e){for(var t=g.m8,n=[],r=0;r<t.length;r++)t[r].language===e&&n.push(t[r]);return n}},{key:"getHistoryOverview",value:function(e){for(var t=this.getHistory(e),n=0;n<t.length;n++)if("/history_overview"===t[n].path)return t[n];return null}},{key:"getHouses",value:function(e){for(var t=this.getHistory(e),n=0;n<t.length;n++)if("/houses"===t[n].path)return t[n].houses;return[]}},{key:"getHouse",value:function(e,t){for(var n=this.getHouses(e),r=0;r<n.length;r++)if(n[r].title===t)return n[r];return null}},{key:"getOwners",value:function(e,t){for(var n=this.getHouses(e),r=0;r<n.length;r++)if(n[r].title===t)return n[r].owners;return null}},{key:"getOwner",value:function(e,t,n){for(var r=this.getOwners(e,t),a=0;a<r.length;a++)if(r[a].number===n)return r[a];return null}},{key:"getOther",value:function(e){for(var t=g.YH,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getAboutApp",value:function(e){for(var t=g.PU,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getWhereToNext",value:function(e){for(var t=g.Le,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getSettings",value:function(e){for(var t=g.Xd,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getRoomsOverview",value:function(e){for(var t=g.ZR,n=0;n<t.length;n++)if(t[n].language===e)return t[n]}},{key:"getVisitedRooms",value:function(e,t,n){for(var r=this.getRooms(e,t),a=[],i=0;i<r.length;i++)r[i].number<=n&&a.push(r[i]);return a}},{key:"getUnvisitedRooms",value:function(e,t,n){for(var r=this.getRooms(e,t),a=[],i=0;i<r.length;i++)r[i].number>n&&a.push(r[i]);return a}}]),e}(),b=y,w=n(885),x=n(2982);function k(e,t,n){return k=d()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&u(a,n.prototype),a},k.apply(null,arguments)}function C(e){var t="function"===typeof Map?new Map:void 0;return C=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return k(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)},C(e)}function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(v||(v={}));var S,_="popstate";function A(e){return{usr:e.state,key:e.key}}function I(e,t,n,r){return void 0===n&&(n=null),E({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?R(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function T(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,a=void 0===r?"":r,i=e.hash,o=void 0===i?"":i;return a&&"?"!==a&&(n+="?"===a.charAt(0)?a:"?"+a),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function R(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function N(e,t,n,r){void 0===r&&(r={});var a=r,i=a.window,o=void 0===i?document.defaultView:i,s=a.v5Compat,u=void 0!==s&&s,l=o.history,c=v.Pop,d=null;function h(){c=v.Pop,d&&d({action:c,location:f.location})}var f={get action(){return c},get location(){return e(o,l)},listen:function(e){if(d)throw new Error("A history only accepts one active listener");return o.addEventListener(_,h),d=e,function(){o.removeEventListener(_,h),d=null}},createHref:function(e){return t(o,e)},push:function(e,t){c=v.Push;var r=I(f.location,e,t);n&&n(r,e);var a=A(r),i=f.createHref(r);try{l.pushState(a,"",i)}catch(s){o.location.assign(i)}u&&d&&d({action:c,location:r})},replace:function(e,t){c=v.Replace;var r=I(f.location,e,t);n&&n(r,e);var a=A(r),i=f.createHref(r);l.replaceState(a,"",i),u&&d&&d({action:c,location:r})},go:function(e){return l.go(e)}};return f}function D(e,t,n){void 0===n&&(n="/");var r=j(("string"===typeof t?R(t):t).pathname||"/",n);if(null==r)return null;var a=M(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(a);for(var i=null,o=0;null==i&&o<a.length;++o)i=L(a[o],r);return i}function M(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,a){var i={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(z(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));var o=W([r,i.relativePath]),s=n.concat(i);e.children&&e.children.length>0&&(z(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),M(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:F(o,e.index),routesMeta:s})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(S||(S={}));var O=/^:\w+$/,P=function(e){return"*"===e};function F(e,t){var n=e.split("/"),r=n.length;return n.some(P)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!P(e)})).reduce((function(e,t){return e+(O.test(t)?3:""===t?1:10)}),r)}function L(e,t){for(var n=e.routesMeta,r={},a="/",i=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,l="/"===a?t:t.slice(a.length)||"/",c=B({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var d=s.route;i.push({params:r,pathname:W([a,c.pathname]),pathnameBase:H(W([a,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(a=W([a,c.pathnameBase]))}return i}function B(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);U("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a+=n?"\\/*$":"(?:(?=[@.~-]|%[0-9A-F]{2})|\\b|\\/|$)";var i=new RegExp(a,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),r=(0,w.Z)(n,2),a=r[0],i=r[1],o=t.match(a);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),l=o.slice(1),c=i.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return U(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l[n]||"",t),e}),{});return{params:c,pathname:s,pathnameBase:u,pattern:e}}function j(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function z(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function U(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Nu){}}}function V(e,t,n,r){void 0===r&&(r=!1);var a,i="string"===typeof e?R(e):E({},e),o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var l=s.split("/");".."===l[0];)l.shift(),u-=1;i.pathname=l.join("/")}a=u>=0?t[u]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?R(e):e,r=n.pathname,a=n.search,i=void 0===a?"":a,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:G(i),hash:K(s)}}(i,a),d=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}var W=function(e){return e.join("/").replace(/\/\/+/g,"/")},H=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},G=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},K=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},X=function(e){l(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return s(n)}(C(Error));var Y=s((function e(t,n,r){a(this,e),this.status=t,this.statusText=n||"",this.data=r}));function q(e){return e instanceof Y}function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z.apply(this,arguments)}var Q="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},J=e.useState,$=e.useEffect,ee=e.useLayoutEffect,te=e.useDebugValue;function ne(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!Q(n,r)}catch(a){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,t.useSyncExternalStore;var re=e.createContext(null);var ae=e.createContext(null);var ie=e.createContext(null);var oe=e.createContext(null);var se=e.createContext(null);var ue=e.createContext(null);var le=e.createContext({outlet:null,matches:[]});var ce=e.createContext(null);function de(){return null!=e.useContext(ue)}function he(){return de()||z(!1),e.useContext(ue).location}function fe(e){return e.filter((function(t,n){return 0===n||!t.route.index&&t.pathnameBase!==e[n-1].pathnameBase}))}function pe(){de()||z(!1);var t=e.useContext(se),n=t.basename,r=t.navigator,a=e.useContext(le).matches,i=he().pathname,o=JSON.stringify(fe(a).map((function(e){return e.pathnameBase}))),s=e.useRef(!1);e.useEffect((function(){s.current=!0}));var u=e.useCallback((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var a=V(e,JSON.parse(o),i,"path"===t.relative);"/"!==n&&(a.pathname="/"===a.pathname?n:W([n,a.pathname])),(t.replace?r.replace:r.push)(a,t.state,t)}else r.go(e)}),[n,r,o,i]);return u}function me(t,n){var r=(void 0===n?{}:n).relative,a=e.useContext(le).matches,i=he().pathname,o=JSON.stringify(fe(a).map((function(e){return e.pathnameBase})));return e.useMemo((function(){return V(t,JSON.parse(o),i,"path"===r)}),[t,o,i,r])}function ve(){var t=function(){var t,n=e.useContext(ce),r=xe(ge.UseRouteError),a=e.useContext(le),i=a.matches[a.matches.length-1];if(n)return n;return a||z(!1),!i.route.id&&z(!1),null==(t=r.errors)?void 0:t[i.route.id]}(),n=q(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},o={padding:"2px 4px",backgroundColor:a};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unhandled Thrown Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:i},r):null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",e.createElement("code",{style:o},"errorElement")," props on\xa0",e.createElement("code",{style:o},"<Route>")))}var ge,ye=function(t){l(r,t);var n=m(r);function r(e){var t;return a(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return s(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(ce.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(e.Component);function be(t){var n=t.routeContext,r=t.match,a=t.children,i=e.useContext(re);return i&&r.route.errorElement&&(i._deepestRenderedBoundaryId=r.route.id),e.createElement(le.Provider,{value:n},a)}function we(t,n,r){if(void 0===n&&(n=[]),null==t){if(null==r||!r.errors)return null;t=r.matches}var a=t,i=null==r?void 0:r.errors;if(null!=i){var o=a.findIndex((function(e){return e.route.id&&(null==i?void 0:i[e.route.id])}));o>=0||z(!1),a=a.slice(0,Math.min(a.length,o+1))}return a.reduceRight((function(t,o,s){var u=o.route.id?null==i?void 0:i[o.route.id]:null,l=r?o.route.errorElement||e.createElement(ve,null):null,c=function(){return e.createElement(be,{match:o,routeContext:{outlet:t,matches:n.concat(a.slice(0,s+1))}},u?l:void 0!==o.route.element?o.route.element:t)};return r&&(o.route.errorElement||0===s)?e.createElement(ye,{location:r.location,component:l,error:u,children:c()}):c()}),null)}function xe(t){var n=e.useContext(ie);return n||z(!1),n}!function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(ge||(ge={}));var ke;function Ce(e){z(!1)}function Ee(t){var n=t.basename,r=void 0===n?"/":n,a=t.children,i=void 0===a?null:a,o=t.location,s=t.navigationType,u=void 0===s?v.Pop:s,l=t.navigator,c=t.static,d=void 0!==c&&c;de()&&z(!1);var h=r.replace(/^\/*/,"/"),f=e.useMemo((function(){return{basename:h,navigator:l,static:d}}),[h,l,d]);"string"===typeof o&&(o=R(o));var p=o,m=p.pathname,g=void 0===m?"/":m,y=p.search,b=void 0===y?"":y,w=p.hash,x=void 0===w?"":w,k=p.state,C=void 0===k?null:k,E=p.key,S=void 0===E?"default":E,_=e.useMemo((function(){var e=j(g,h);return null==e?null:{pathname:e,search:b,hash:x,state:C,key:S}}),[h,g,b,x,C,S]);return null==_?null:e.createElement(se.Provider,{value:f},e.createElement(ue.Provider,{children:i,value:{location:_,navigationType:u}}))}function Se(t){var n=t.children,r=t.location,a=e.useContext(ae);return function(t,n){de()||z(!1);var r,a=e.useContext(ie),i=e.useContext(le).matches,o=i[i.length-1],s=o?o.params:{},u=(o&&o.pathname,o?o.pathnameBase:"/"),l=(o&&o.route,he());if(n){var c,d="string"===typeof n?R(n):n;"/"===u||(null==(c=d.pathname)?void 0:c.startsWith(u))||z(!1),r=d}else r=l;var h=r.pathname||"/",f=D(t,{pathname:"/"===u?h:h.slice(u.length)||"/"}),p=we(f&&f.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:W([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:W([u,e.pathnameBase])})})),i,a||void 0);return n?e.createElement(ue.Provider,{value:{location:Z({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:v.Pop}},p):p}(a&&!n?a.router.routes:Ae(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(ke||(ke={}));var _e=new Promise((function(){}));e.Component;function Ae(t,n){void 0===n&&(n=[]);var r=[];return e.Children.forEach(t,(function(t,a){if(e.isValidElement(t))if(t.type!==e.Fragment){t.type!==Ce&&z(!1);var i=[].concat((0,x.Z)(n),[a]),o={id:t.props.id||i.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,hasErrorBoundary:null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle};t.props.children&&(o.children=Ae(t.props.children,i)),r.push(o)}else r.push.apply(r,Ae(t.props.children,n))})),r}function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ie.apply(this,arguments)}function Te(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var Re=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],Ne=["aria-current","caseSensitive","className","end","style","to","children"];function De(t){var n,r=t.basename,a=t.children,i=t.window,o=e.useRef();null==o.current&&(o.current=(void 0===(n={window:i,v5Compat:!0})&&(n={}),N((function(e,t){var n=e.location;return I("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:T(t)}),null,n)));var s=o.current,u=e.useState({action:s.action,location:s.location}),l=(0,w.Z)(u,2),c=l[0],d=l[1];return e.useLayoutEffect((function(){return s.listen(d)}),[s]),e.createElement(Ee,{basename:r,children:a,location:c.location,navigationType:c.action,navigator:s})}var Me=e.forwardRef((function(t,n){var r=t.onClick,a=t.relative,i=t.reloadDocument,o=t.replace,s=t.state,u=t.target,l=t.to,c=t.preventScrollReset,d=Te(t,Re),h=function(t,n){var r=(void 0===n?{}:n).relative;de()||z(!1);var a=e.useContext(se),i=a.basename,o=a.navigator,s=me(t,{relative:r}),u=s.hash,l=s.pathname,c=s.search,d=l;return"/"!==i&&(d="/"===l?i:W([i,l])),o.createHref({pathname:d,search:c,hash:u})}(l,{relative:a}),f=function(t,n){var r=void 0===n?{}:n,a=r.target,i=r.replace,o=r.state,s=r.preventScrollReset,u=r.relative,l=pe(),c=he(),d=me(t,{relative:u});return e.useCallback((function(e){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,a)){e.preventDefault();var n=void 0!==i?i:T(c)===T(d);l(t,{replace:n,state:o,preventScrollReset:s,relative:u})}}),[c,l,d,i,o,a,t,s,u])}(l,{replace:o,state:s,target:u,preventScrollReset:c,relative:a});return e.createElement("a",Ie({},d,{href:h,onClick:i?r:function(e){r&&r(e),e.defaultPrevented||f(e)},ref:n,target:u}))}));var Oe=e.forwardRef((function(t,n){var r,a=t["aria-current"],i=void 0===a?"page":a,o=t.caseSensitive,s=void 0!==o&&o,u=t.className,l=void 0===u?"":u,c=t.end,d=void 0!==c&&c,h=t.style,f=t.to,p=t.children,m=Te(t,Ne),v=me(f),g=function(t){de()||z(!1);var n=he().pathname;return e.useMemo((function(){return B(t,n)}),[n,t])}({path:v.pathname,end:d,caseSensitive:s}),y=e.useContext(ie),b=null==y?void 0:y.navigation.location,w=me(b||""),x=null!=e.useMemo((function(){return b?B({path:v.pathname,end:d,caseSensitive:s},w.pathname):null}),[b,v.pathname,s,d,w.pathname]),k=null!=g,C=k?i:void 0;r="function"===typeof l?l({isActive:k,isPending:x}):[l,k?"active":null,x?"pending":null].filter(Boolean).join(" ");var E="function"===typeof h?h({isActive:k,isPending:x}):h;return e.createElement(Me,Ie({},m,{"aria-current":C,className:r,ref:n,style:E,to:f}),"function"===typeof p?p({isActive:k,isPending:x}):p)}));var Pe=e.createContext({language:"en",setLanguage:function(){},tour:"castle",setTour:function(){},room:"1",setRoom:function(){},house:"rederns",setHouse:function(){},owner:"1",setOwner:function(){},"font-size":"d",setFontSize:function(){},gallery_tour:"castle",setGalleryTour:function(){},image_recognition_name:"",setImageRecognitionName:function(){},image_recognition_img:"",setImageRecognitionImg:function(){}}),Fe=n(5172),Le=n(184);var Be=function(){var t=(0,e.useContext)(Pe),n=(new b).getLanguages(),r=(0,e.useState)(!1),a=(0,w.Z)(r,2),i=a[0],o=a[1];return(0,Le.jsxs)("div",{className:"dropdown-box text-transform-primary",children:[(0,Le.jsxs)("div",{className:"dropdown-button text-transform-primary cursor-primary flex-secondary align-items-primary",onClick:function(){return o(!i)},children:[(0,Le.jsx)("div",{className:"dropdown-padding font-size-medium",children:t.language}),(0,Le.jsx)(Fe.Z,{className:"dropdown-icon"})]}),(0,Le.jsx)("ul",{className:i?"dropdown dropdown-show":"dropdown",children:n.map((function(e){return(0,Le.jsx)("li",{className:"dropdown-item cursor-primary font-size-medium",onClick:function(){return function(e){o(!i),t.setLanguage(e)}(e)},children:e},e)}))})]})},je=n(7462),ze=n(3366);function Ue(e,t){if(null==e)return{};var n,r,a=(0,ze.Z)(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ve=n(4942),We=n(8182),He=n(2110),Ge=n.n(He),Ke="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe="object"===("undefined"===typeof window?"undefined":Ke(window))&&"object"===("undefined"===typeof document?"undefined":Ke(document))&&9===document.nodeType;function Ye(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,u(e,t)}var qe={}.constructor;function Ze(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(Ze);if(e.constructor!==qe)return e;var t={};for(var n in e)t[n]=Ze(e[n]);return t}function Qe(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,a=Ze(t),i=r.plugins.onCreateRule(e,a,n);return i||(e[0],null)}var Je=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},$e=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&"!important"!==e[n];n++)t&&(t+=", "),t+=Je(e[n]," ");else t=Je(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function et(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function tt(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function nt(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var a=n.indent,i=void 0===a?0:a,o=t.fallbacks;!1===n.format&&(i=-1/0);var s=et(n),u=s.linebreak,l=s.space;if(e&&i++,o)if(Array.isArray(o))for(var c=0;c<o.length;c++){var d=o[c];for(var h in d){var f=d[h];null!=f&&(r&&(r+=u),r+=tt(h+":"+l+$e(f)+";",i))}}else for(var p in o){var m=o[p];null!=m&&(r&&(r+=u),r+=tt(p+":"+l+$e(m)+";",i))}for(var v in t){var g=t[v];null!=g&&"fallbacks"!==v&&(r&&(r+=u),r+=tt(v+":"+l+$e(g)+";",i))}return(r||n.allowEmpty)&&e?(r&&(r=""+u+r+u),tt(""+e+l+"{"+r,--i)+tt("}",i)):r}var rt=/([[\].#*$><+~=|^:(),"'`\s])/g,at="undefined"!==typeof CSS&&CSS.escape,it=function(e){return at?at(e):e.replace(rt,"\\$1")},ot=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var r=n.sheet,a=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:a&&(this.renderer=new a)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var a=t;n&&!1===n.process||(a=this.options.jss.plugins.onChangeValue(t,e,this));var i=null==a||!1===a,o=e in this.style;if(i&&!o&&!r)return this;var s=i&&o;if(s?delete this.style[e]:this.style[e]=a,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,a),this;var u=this.options.sheet;return u&&u.attached,this},e}(),st=function(e){function t(t,n,r){var a;a=e.call(this,t,n,r)||this;var i=r.selector,o=r.scoped,s=r.sheet,u=r.generateId;return i?a.selectorText=i:!1!==o&&(a.id=u(f(f(a)),s),a.selectorText="."+it(a.id)),a}Ye(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=$e(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,je.Z)({},e,{allowEmpty:!0}):e;return nt(this.selectorText,this.style,n)},s(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(ot),ut={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new st(e,t,n)}},lt={indent:1,children:!0},ct=/@([\w-]+)/,dt=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(ct);for(var a in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new Pt((0,je.Z)({},n,{parent:this})),t)this.rules.add(a,t[a]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.toString=function(e){void 0===e&&(e=lt);var t=et(e).linebreak;if(null==e.indent&&(e.indent=lt.indent),null==e.children&&(e.children=lt.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),ht=/@media|@supports\s+/,ft={onCreateRule:function(e,t,n){return ht.test(e)?new dt(e,t,n):null}},pt={indent:1,children:!0},mt=/@keyframes\s+([\w-]+)/,vt=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(mt);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var a=n.scoped,i=n.sheet,o=n.generateId;for(var s in this.id=!1===a?this.name:it(o(this,i)),this.rules=new Pt((0,je.Z)({},n,{parent:this})),t)this.rules.add(s,t[s],(0,je.Z)({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=pt);var t=et(e).linebreak;if(null==e.indent&&(e.indent=pt.indent),null==e.children&&(e.children=pt.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),gt=/@keyframes\s+/,yt=/\$([\w-]+)/g,bt=function(e,t){return"string"===typeof e?e.replace(yt,(function(e,n){return n in t?t[n]:e})):e},wt=function(e,t,n){var r=e[t],a=bt(r,n);a!==r&&(e[t]=a)},xt={onCreateRule:function(e,t,n){return"string"===typeof e&&gt.test(e)?new vt(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&wt(e,"animation-name",n.keyframes),"animation"in e&&wt(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return bt(e,r.keyframes);default:return e}}},kt=function(e){function t(){return e.apply(this,arguments)||this}return Ye(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,je.Z)({},e,{allowEmpty:!0}):e;return nt(this.key,this.style,n)},t}(ot),Ct={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new kt(e,t,n):null}},Et=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=et(e).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=nt(this.at,this.style[r]),this.style[r+1]&&(n+=t);return n}return nt(this.at,this.style,e)},e}(),St=/@font-face/,_t={onCreateRule:function(e,t,n){return St.test(e)?new Et(e,t,n):null}},At=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return nt(this.key,this.style,e)},e}(),It={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new At(e,t,n):null}},Tt=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),Rt={"@charset":!0,"@import":!0,"@namespace":!0},Nt={onCreateRule:function(e,t,n){return e in Rt?new Tt(e,t,n):null}},Dt=[ut,ft,xt,Ct,_t,It,Nt],Mt={process:!0},Ot={force:!0,process:!0},Pt=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,a=r.parent,i=r.sheet,o=r.jss,s=r.Renderer,u=r.generateId,l=r.scoped,c=(0,je.Z)({classes:this.classes,parent:a,sheet:i,jss:o,Renderer:s,generateId:u,scoped:l,name:e,keyframes:this.keyframes,selector:void 0},n),d=e;e in this.raw&&(d=e+"-d"+this.counter++),this.raw[d]=t,d in this.classes&&(c.selector="."+it(this.classes[d]));var h=Qe(d,t,c);if(!h)return null;this.register(h);var f=void 0===c.index?this.index.length:c.index;return this.index.splice(f,0,h),h},t.replace=function(e,t,n){var r=this.get(e),a=this.index.indexOf(r);r&&this.remove(r);var i=n;return-1!==a&&(i=(0,je.Z)({},n,{index:a})),this.add(e,t,i)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof st?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof vt&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof st?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof vt&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=Mt);var a=this.options,i=a.jss.plugins,o=a.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var s=t.style;if(i.onUpdate(n,t,o,r),r.process&&s&&s!==t.style){for(var u in i.onProcessStyle(t.style,t,o),t.style){var l=t.style[u];l!==s[u]&&t.prop(u,l,Ot)}for(var c in s){var d=t.style[c],h=s[c];null==d&&d!==h&&t.prop(c,null,Ot)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,a=et(e).linebreak,i=0;i<this.index.length;i++){var o=this.index[i].toString(e);(o||r)&&(t&&(t+=a),t+=o)}return t},e}(),Ft=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=(0,je.Z)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new Pt(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var a=this.rules.add(e,t,n);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?this.deployed?(r?r.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),a):a:(this.deployed=!1,a)):null},t.replaceRule=function(e,t,n){var r=this.rules.get(e);if(!r)return this.addRule(e,t,n);var a=this.rules.replace(e,t,n);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?this.deployed?(this.renderer&&(a?r.renderable&&this.renderer.replaceRule(r.renderable,a):this.renderer.deleteRule(r)),a):a:(this.deployed=!1,a)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var a=this.addRule(r,e[r],t);a&&n.push(a)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),Lt=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var a=this.registry.onCreateRule[r](e,t,n);if(a)return a}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,a=0;a<this.registry.onChangeValue.length;a++)r=this.registry.onChangeValue[a](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),Bt=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=(0,ze.Z)(t,["attached"]),a=et(r).linebreak,i="",o=0;o<this.registry.length;o++){var s=this.registry[o];null!=n&&s.attached!==n||(i&&(i+=a),i+=s.toString(r))}return i},s(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),jt=new Bt,zt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),Ut="2f1acc6c3a606b082e5eef5e54414ffb";null==zt[Ut]&&(zt[Ut]=0);var Vt=zt[Ut]++,Wt=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var a="",i="";return r&&(r.options.classNamePrefix&&(i=r.options.classNamePrefix),null!=r.options.jss.id&&(a=String(r.options.jss.id))),e.minify?""+(i||"c")+Vt+a+t:i+n.key+"-"+Vt+(a?"-"+a:"")+"-"+t}},Ht=function(e){var t;return function(){return t||(t=e()),t}},Gt=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},Kt=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=$e(n)),e.attributeStyleMap)e.attributeStyleMap.set(t,r);else{var a=r?r.indexOf("!important"):-1,i=a>-1?r.substr(0,a-1):r;e.style.setProperty(t,i,a>-1?"important":"")}}catch(o){return!1}return!0},Xt=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},Yt=function(e,t){return e.selectorText=t,e.selectorText===t},qt=Ht((function(){return document.querySelector("head")}));function Zt(e){var t=jt.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var a=function(e){for(var t=qt(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(a)return{parent:a.parentNode,node:a.nextSibling}}return!1}var Qt=Ht((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),Jt=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(r){return!1}return e.cssRules[n]},$t=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},en=function(){function e(e){this.getPropertyValue=Gt,this.setProperty=Kt,this.removeProperty=Xt,this.setSelector=Yt,this.hasInsertedRules=!1,this.cssRules=[],e&&jt.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,a=t.element;this.element=a||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var i=Qt();i&&this.element.setAttribute("nonce",i)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=Zt(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var a=n,i=a.parentNode;i&&i.insertBefore(e,a.nextSibling)}else qt().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,a=n;if("conditional"===e.type||"keyframes"===e.type){var i=$t(n,t);if(!1===(a=Jt(n,r.toString({children:!1}),i)))return!1;this.refCssRule(e,i,a)}return this.insertRules(r.rules,a),a}var o=e.toString();if(!o)return!1;var s=$t(n,t),u=Jt(n,o,s);return!1!==u&&(this.hasInsertedRules=!0,this.refCssRule(e,s,u),u)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof Ft&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),tn=0,nn=function(){function e(e){this.id=tn++,this.version="10.9.2",this.plugins=new Lt,this.options={id:{minify:!1},createGenerateId:Wt,Renderer:Xe?en:null,plugins:[]},this.generateId=Wt({minify:!1});for(var t=0;t<Dt.length;t++)this.plugins.use(Dt[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=(0,je.Z)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===jt.index?0:jt.index+1);var r=new Ft(e,(0,je.Z)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),jt.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var r=(0,je.Z)({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var a=Qe(e,t,r);return a&&this.plugins.onProcessRule(a),a},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),rn=function(e){return new nn(e)},an="object"===typeof CSS&&null!=CSS&&"number"in CSS;function on(e){var t=null;for(var n in e){var r=e[n],a=typeof r;if("function"===a)t||(t={}),t[n]=r;else if("object"===a&&null!==r&&!Array.isArray(r)){var i=on(r);i&&(t||(t={}),t[n]=i)}}return t}rn();function sn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var r=(0,je.Z)({},t);return Object.keys(n).forEach((function(e){n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))})),r}var un={set:function(e,t,n,r){var a=e.get(t);a||(a=new Map,e.set(t,a)),a.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},ln=un;var cn=e.createContext(null);function dn(){return e.useContext(cn)}var hn="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",fn=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var pn=Date.now(),mn="fnValues"+pn,vn="fnStyle"+ ++pn,gn=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=Qe(e,{},n);return r[vn]=t,r},onProcessStyle:function(e,t){if(mn in t||vn in t)return e;var n={};for(var r in e){var a=e[r];"function"===typeof a&&(delete e[r],n[r]=a)}return t[mn]=n,e},onUpdate:function(e,t,n,r){var a=t,i=a[vn];i&&(a.style=i(e)||{});var o=a[mn];if(o)for(var s in o)a.prop(s,o[s](e),r)}}},yn="@global",bn="@global ",wn=function(){function e(e,t,n){for(var r in this.type="global",this.at=yn,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new Pt((0,je.Z)({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),xn=function(){function e(e,t,n){this.type="global",this.at=yn,this.isProcessed=!1,this.key=e,this.options=n;var r=e.substr(bn.length);this.rule=n.jss.createRule(r,t,(0,je.Z)({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),kn=/\s*,\s*/g;function Cn(e,t){for(var n=e.split(kn),r="",a=0;a<n.length;a++)r+=t+" "+n[a].trim(),n[a+1]&&(r+=", ");return r}var En=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===yn)return new wn(e,t,n);if("@"===e[0]&&e.substr(0,bn.length)===bn)return new xn(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,a=r?r[yn]:null;if(a){for(var i in a)t.addRule(i,a[i],(0,je.Z)({},n,{selector:Cn(i,e.selector)}));delete r[yn]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var a in r)if("@"===a[0]&&a.substr(0,yn.length)===yn){var i=Cn(a.substr(yn.length),e.selector);t.addRule(i,r[a],(0,je.Z)({},n,{selector:i})),delete r[a]}}(e,t))}}},Sn=/\s*,\s*/g,_n=/&/g,An=/\$([\w-]+)/g;var In=function(){function e(e,t){return function(n,r){var a=e.getRule(r)||t&&t.getRule(r);return a?a.selector:r}}function t(e,t){for(var n=t.split(Sn),r=e.split(Sn),a="",i=0;i<n.length;i++)for(var o=n[i],s=0;s<r.length;s++){var u=r[s];a&&(a+=", "),a+=-1!==u.indexOf("&")?u.replace(_n,o):o+" "+u}return a}function n(e,t,n){if(n)return(0,je.Z)({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var a=(0,je.Z)({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete a.name,a}return{onProcessStyle:function(r,a,i){if("style"!==a.type)return r;var o,s,u=a,l=u.options.parent;for(var c in r){var d=-1!==c.indexOf("&"),h="@"===c[0];if(d||h){if(o=n(u,l,o),d){var f=t(c,u.selector);s||(s=e(l,i)),f=f.replace(An,s);var p=u.key+"-"+c;"replaceRule"in l?l.replaceRule(p,r[c],(0,je.Z)({},o,{selector:f})):l.addRule(p,r[c],(0,je.Z)({},o,{selector:f}))}else h&&l.addRule(c,{},o).addRule(u.key,r[c],{selector:u.selector});delete r[c]}}return r}}},Tn=/[A-Z]/g,Rn=/^ms-/,Nn={};function Dn(e){return"-"+e.toLowerCase()}var Mn=function(e){if(Nn.hasOwnProperty(e))return Nn[e];var t=e.replace(Tn,Dn);return Nn[e]=Rn.test(t)?"-"+t:t};function On(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:Mn(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(On):t.fallbacks=On(e.fallbacks)),t}var Pn=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=On(e[t]);return e}return On(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=Mn(t);return t===r?e:(n.prop(r,e),null)}}},Fn=an&&CSS?CSS.px:"px",Ln=an&&CSS?CSS.ms:"ms",Bn=an&&CSS?CSS.percent:"%";function jn(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var a in e)r[a]=e[a],r[a.replace(t,n)]=e[a];return r}var zn=jn({"animation-delay":Ln,"animation-duration":Ln,"background-position":Fn,"background-position-x":Fn,"background-position-y":Fn,"background-size":Fn,border:Fn,"border-bottom":Fn,"border-bottom-left-radius":Fn,"border-bottom-right-radius":Fn,"border-bottom-width":Fn,"border-left":Fn,"border-left-width":Fn,"border-radius":Fn,"border-right":Fn,"border-right-width":Fn,"border-top":Fn,"border-top-left-radius":Fn,"border-top-right-radius":Fn,"border-top-width":Fn,"border-width":Fn,"border-block":Fn,"border-block-end":Fn,"border-block-end-width":Fn,"border-block-start":Fn,"border-block-start-width":Fn,"border-block-width":Fn,"border-inline":Fn,"border-inline-end":Fn,"border-inline-end-width":Fn,"border-inline-start":Fn,"border-inline-start-width":Fn,"border-inline-width":Fn,"border-start-start-radius":Fn,"border-start-end-radius":Fn,"border-end-start-radius":Fn,"border-end-end-radius":Fn,margin:Fn,"margin-bottom":Fn,"margin-left":Fn,"margin-right":Fn,"margin-top":Fn,"margin-block":Fn,"margin-block-end":Fn,"margin-block-start":Fn,"margin-inline":Fn,"margin-inline-end":Fn,"margin-inline-start":Fn,padding:Fn,"padding-bottom":Fn,"padding-left":Fn,"padding-right":Fn,"padding-top":Fn,"padding-block":Fn,"padding-block-end":Fn,"padding-block-start":Fn,"padding-inline":Fn,"padding-inline-end":Fn,"padding-inline-start":Fn,"mask-position-x":Fn,"mask-position-y":Fn,"mask-size":Fn,height:Fn,width:Fn,"min-height":Fn,"max-height":Fn,"min-width":Fn,"max-width":Fn,bottom:Fn,left:Fn,top:Fn,right:Fn,inset:Fn,"inset-block":Fn,"inset-block-end":Fn,"inset-block-start":Fn,"inset-inline":Fn,"inset-inline-end":Fn,"inset-inline-start":Fn,"box-shadow":Fn,"text-shadow":Fn,"column-gap":Fn,"column-rule":Fn,"column-rule-width":Fn,"column-width":Fn,"font-size":Fn,"font-size-delta":Fn,"letter-spacing":Fn,"text-decoration-thickness":Fn,"text-indent":Fn,"text-stroke":Fn,"text-stroke-width":Fn,"word-spacing":Fn,motion:Fn,"motion-offset":Fn,outline:Fn,"outline-offset":Fn,"outline-width":Fn,perspective:Fn,"perspective-origin-x":Bn,"perspective-origin-y":Bn,"transform-origin":Bn,"transform-origin-x":Bn,"transform-origin-y":Bn,"transform-origin-z":Bn,"transition-delay":Ln,"transition-duration":Ln,"vertical-align":Fn,"flex-basis":Fn,"shape-margin":Fn,size:Fn,gap:Fn,grid:Fn,"grid-gap":Fn,"row-gap":Fn,"grid-row-gap":Fn,"grid-column-gap":Fn,"grid-template-rows":Fn,"grid-template-columns":Fn,"grid-auto-rows":Fn,"grid-auto-columns":Fn,"box-shadow-x":Fn,"box-shadow-y":Fn,"box-shadow-blur":Fn,"box-shadow-spread":Fn,"font-line-height":Fn,"text-shadow-x":Fn,"text-shadow-y":Fn,"text-shadow-blur":Fn});function Un(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=Un(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var a in t)t[a]=Un(a,t[a],n);else for(var i in t)t[i]=Un(e+"-"+i,t[i],n);else if("number"===typeof t&&!1===isNaN(t)){var o=n[e]||zn[e];return!o||0===t&&o===Fn?t.toString():"function"===typeof o?o(t).toString():""+t+o}return t}var Vn=function(e){void 0===e&&(e={});var t=jn(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=Un(r,e[r],t);return e},onChangeValue:function(e,n){return Un(n,e,t)}}},Wn="",Hn="",Gn="",Kn="",Xn=Xe&&"ontouchstart"in document.documentElement;if(Xe){var Yn={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},qn=document.createElement("p").style;for(var Zn in Yn)if(Zn+"Transform"in qn){Wn=Zn,Hn=Yn[Zn];break}"Webkit"===Wn&&"msHyphens"in qn&&(Wn="ms",Hn=Yn.ms,Kn="edge"),"Webkit"===Wn&&"-apple-trailing-word"in qn&&(Gn="apple")}var Qn=Wn,Jn=Hn,$n=Gn,er=Kn,tr=Xn;var nr={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===Qn?"-webkit-"+e:Jn+e)}},rr={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===Qn?Jn+"print-"+e:e)}},ar=/[-\s]+(.)?/g;function ir(e,t){return t?t.toUpperCase():""}function or(e){return e.replace(ar,ir)}function sr(e){return or("-"+e)}var ur,lr={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===Qn){var n="mask-image";if(or(n)in t)return e;if(Qn+sr(n)in t)return Jn+e}return e}},cr={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==$n||tr?e:Jn+e)}},dr={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:Jn+e)}},hr={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:Jn+e)}},fr={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===Qn||"ms"===Qn&&"edge"!==er?Jn+e:e)}},pr={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===Qn||"ms"===Qn||"apple"===$n?Jn+e:e)}},mr={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===Qn?"WebkitColumn"+sr(e)in t&&Jn+"column-"+e:"Moz"===Qn&&("page"+sr(e)in t&&"page-"+e))}},vr={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===Qn)return e;var n=e.replace("-inline","");return Qn+sr(n)in t&&Jn+n}},gr={supportedProperty:function(e,t){return or(e)in t&&e}},yr={supportedProperty:function(e,t){var n=sr(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:Qn+n in t?Jn+e:"Webkit"!==Qn&&"Webkit"+n in t&&"-webkit-"+e}},br={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===Qn?""+Jn+e:e)}},wr={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===Qn?Jn+"scroll-chaining":e)}},xr={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},kr={supportedProperty:function(e,t){var n=xr[e];return!!n&&(Qn+sr(n)in t&&Jn+n)}},Cr={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Er=Object.keys(Cr),Sr=function(e){return Jn+e},_r={supportedProperty:function(e,t,n){var r=n.multiple;if(Er.indexOf(e)>-1){var a=Cr[e];if(!Array.isArray(a))return Qn+sr(a)in t&&Jn+a;if(!r)return!1;for(var i=0;i<a.length;i++)if(!(Qn+sr(a[0])in t))return!1;return a.map(Sr)}return!1}},Ar=[nr,rr,lr,cr,dr,hr,fr,pr,mr,vr,gr,yr,br,wr,kr,_r],Ir=Ar.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),Tr=Ar.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,(0,x.Z)(t.noPrefill)),e}),[]),Rr={};if(Xe){ur=document.createElement("p");var Nr=window.getComputedStyle(document.documentElement,"");for(var Dr in Nr)isNaN(Dr)||(Rr[Nr[Dr]]=Nr[Dr]);Tr.forEach((function(e){return delete Rr[e]}))}function Mr(e,t){if(void 0===t&&(t={}),!ur)return e;if(null!=Rr[e])return Rr[e];"transition"!==e&&"transform"!==e||(t[e]=e in ur.style);for(var n=0;n<Ir.length&&(Rr[e]=Ir[n](e,ur.style,t),!Rr[e]);n++);try{ur.style[e]=""}catch(r){return!1}return Rr[e]}var Or,Pr={},Fr={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Lr=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function Br(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?Mr(t):", "+Mr(n);return r||(t||n)}function jr(e,t){var n=t;if(!Or||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=Pr[r])return Pr[r];try{Or.style[e]=n}catch(a){return Pr[r]=!1,!1}if(Fr[e])n=n.replace(Lr,Br);else if(""===Or.style[e]&&("-ms-flex"===(n=Jn+n)&&(Or.style[e]="-ms-flexbox"),Or.style[e]=n,""===Or.style[e]))return Pr[r]=!1,!1;return Or.style[e]="",Pr[r]=n,Pr[r]}Xe&&(Or=document.createElement("p"));var zr=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var a=!1,i=Mr(n);i&&i!==n&&(a=!0);var o=!1,s=jr(i,$e(r));s&&s!==r&&(o=!0),(a||o)&&(a&&delete t[n],t[i||n]=s||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===Qn?e:"@"+Jn+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return jr(t,$e(e))||e}}};var Ur=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},a=Object.keys(t).sort(e),i=0;i<a.length;i++)r[a[i]]=t[a[i]];return r}}};var Vr=rn({plugins:[gn(),En(),In(),Pn(),Vn(),"undefined"===typeof window?null:zr(),Ur()]}),Wr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,a=void 0===r?"jss":r,i=e.seed,o=void 0===i?"":i,s=""===o?"":"".concat(o,"-"),u=0,l=function(){return u+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==fn.indexOf(e.key))return"Mui-".concat(e.key);var i="".concat(s).concat(r,"-").concat(e.key);return t.options.theme[hn]&&""===o?"".concat(i,"-").concat(l()):i}return"".concat(s).concat(a).concat(l())}}(),Hr={disableGeneration:!1,generateClassName:Wr,jss:Vr,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},Gr=e.createContext(Hr);var Kr=-1e9;function Xr(){return Kr+=1}function Yr(e){return e&&"object"===(0,h.Z)(e)&&e.constructor===Object}function qr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?(0,je.Z)({},e):e;return Yr(e)&&Yr(t)&&Object.keys(t).forEach((function(a){"__proto__"!==a&&(Yr(t[a])&&a in e?r[a]=qr(e[a],t[a],n):r[a]=t[a])})),r}function Zr(e){var t="function"===typeof e;return{create:function(n,r){var a;try{a=t?e(n):e}catch(s){throw s}if(!r||!n.overrides||!n.overrides[r])return a;var i=n.overrides[r],o=(0,je.Z)({},a);return Object.keys(i).forEach((function(e){o[e]=qr(o[e],i[e])})),o},options:{}}}var Qr={};function Jr(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var a=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,a=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,a=!0),a&&(r.cacheClasses.value=sn({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}function $r(e,t){var n=e.state,r=e.theme,a=e.stylesOptions,i=e.stylesCreator,o=e.name;if(!a.disableGeneration){var s=ln.get(a.sheetsManager,i,r);s||(s={refs:0,staticSheet:null,dynamicStyles:null},ln.set(a.sheetsManager,i,r,s));var u=(0,je.Z)({},i.options,a,{theme:r,flip:"boolean"===typeof a.flip?a.flip:"rtl"===r.direction});u.generateId=u.serverGenerateClassName||u.generateClassName;var l=a.sheetsRegistry;if(0===s.refs){var c;a.sheetsCache&&(c=ln.get(a.sheetsCache,i,r));var d=i.create(r,o);c||((c=a.jss.createStyleSheet(d,(0,je.Z)({link:!1},u))).attach(),a.sheetsCache&&ln.set(a.sheetsCache,i,r,c)),l&&l.add(c),s.staticSheet=c,s.dynamicStyles=on(d)}if(s.dynamicStyles){var h=a.jss.createStyleSheet(s.dynamicStyles,(0,je.Z)({link:!0},u));h.update(t),h.attach(),n.dynamicSheet=h,n.classes=sn({baseClasses:s.staticSheet.classes,newClasses:h.classes}),l&&l.add(h)}else n.classes=s.staticSheet.classes;s.refs+=1}}function ea(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function ta(e){var t=e.state,n=e.theme,r=e.stylesOptions,a=e.stylesCreator;if(!r.disableGeneration){var i=ln.get(r.sheetsManager,a,n);i.refs-=1;var o=r.sheetsRegistry;0===i.refs&&(ln.delete(r.sheetsManager,a,n),r.jss.removeStyleSheet(i.staticSheet),o&&o.remove(i.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}}function na(t,n){var r,a=e.useRef([]),i=e.useMemo((function(){return{}}),n);a.current!==i&&(a.current=i,r=t()),e.useEffect((function(){return function(){r&&r()}}),[i])}function ra(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.name,a=n.classNamePrefix,i=n.Component,o=n.defaultTheme,s=void 0===o?Qr:o,u=Ue(n,["name","classNamePrefix","Component","defaultTheme"]),l=Zr(t),c=r||a||"makeStyles";l.options={index:Xr(),name:r,meta:c,classNamePrefix:c};var d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=dn()||s,a=(0,je.Z)({},e.useContext(Gr),u),o=e.useRef(),c=e.useRef();na((function(){var e={name:r,state:{},stylesCreator:l,stylesOptions:a,theme:n};return $r(e,t),c.current=!1,o.current=e,function(){ta(e)}}),[n,l]),e.useEffect((function(){c.current&&ea(o.current,t),c.current=!0}));var d=Jr(o.current,t.classes,i);return d};return d}function aa(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var a,i=t.props[n];for(a in i)void 0===r[a]&&(r[a]=i[a]);return r}var ia=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var a=n.defaultTheme,i=n.withTheme,o=void 0!==i&&i,s=n.name,u=Ue(n,["defaultTheme","withTheme","name"]);var l=s,c=ra(t,(0,je.Z)({defaultTheme:a,Component:r,name:s||r.displayName,classNamePrefix:l},u)),d=e.forwardRef((function(t,n){t.classes;var i,u=t.innerRef,l=Ue(t,["classes","innerRef"]),d=c((0,je.Z)({},r.defaultProps,t)),h=l;return("string"===typeof s||o)&&(i=dn()||a,s&&(h=aa({theme:i,name:s,props:l})),o&&!h.theme&&(h.theme=i)),e.createElement(r,(0,je.Z)({ref:u||n,classes:d},h))}));return Ge()(d,r),d}},oa=["xs","sm","md","lg","xl"];function sa(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,a=void 0===r?"px":r,i=e.step,o=void 0===i?5:i,s=Ue(e,["values","unit","step"]);function u(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(a,")")}function l(e,t){var r=oa.indexOf(t);return r===oa.length-1?u(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(a,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[oa[r+1]]?n[oa[r+1]]:t)-o/100).concat(a,")")}return(0,je.Z)({keys:oa,values:n,up:u,down:function(e){var t=oa.indexOf(e)+1,r=n[oa[t]];return t===oa.length?u("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-o/100).concat(a,")")},between:l,only:function(e){return l(e,e)},width:function(e){return n[e]}},s)}function ua(e,t,n){var r;return(0,je.Z)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),(0,je.Z)({paddingLeft:t(2),paddingRight:t(2)},n,(0,Ve.Z)({},e.up("sm"),(0,je.Z)({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(r={minHeight:56},(0,Ve.Z)(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,Ve.Z)(r,e.up("sm"),{minHeight:64}),r)},n)}function la(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}var ca={black:"#000",white:"#fff"},da={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},ha={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},fa={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},pa={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},ma={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},va={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},ga={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function ya(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function ba(e){if(e.type)return e;if("#"===e.charAt(0))return ba(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(la(3,e));var r=e.substring(t+1,e.length-1).split(",");return{type:n,values:r=r.map((function(e){return parseFloat(e)}))}}function wa(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function xa(e){var t="hsl"===(e=ba(e)).type?ba(function(e){var t=(e=ba(e)).values,n=t[0],r=t[1]/100,a=t[2]/100,i=r*Math.min(a,1-a),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return a-i*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),wa({type:s,values:u})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function ka(e,t){return e=ba(e),t=ya(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,wa(e)}function Ca(e,t){if(e=ba(e),t=ya(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return wa(e)}function Ea(e,t){if(e=ba(e),t=ya(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return wa(e)}var Sa={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ca.white,default:da[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},_a={text:{primary:ca.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:da[800],default:"#303030"},action:{active:ca.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Aa(e,t,n,r){var a=r.light||r,i=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Ea(e.main,a):"dark"===t&&(e.dark=Ca(e.main,i)))}function Ia(e){var t=e.primary,n=void 0===t?{light:ha[300],main:ha[500],dark:ha[700]}:t,r=e.secondary,a=void 0===r?{light:fa.A200,main:fa.A400,dark:fa.A700}:r,i=e.error,o=void 0===i?{light:pa[300],main:pa[500],dark:pa[700]}:i,s=e.warning,u=void 0===s?{light:ma[300],main:ma[500],dark:ma[700]}:s,l=e.info,c=void 0===l?{light:va[300],main:va[500],dark:va[700]}:l,d=e.success,h=void 0===d?{light:ga[300],main:ga[500],dark:ga[700]}:d,f=e.type,p=void 0===f?"light":f,m=e.contrastThreshold,v=void 0===m?3:m,g=e.tonalOffset,y=void 0===g?.2:g,b=Ue(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function w(e){var t=function(e,t){var n=xa(e),r=xa(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,_a.text.primary)>=v?_a.text.primary:Sa.text.primary;return t}var x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=(0,je.Z)({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(la(4,t));if("string"!==typeof e.main)throw new Error(la(5,JSON.stringify(e.main)));return Aa(e,"light",n,y),Aa(e,"dark",r,y),e.contrastText||(e.contrastText=w(e.main)),e},k={dark:_a,light:Sa};return qr((0,je.Z)({common:ca,type:p,primary:x(n),secondary:x(a,"A400","A200","A700"),error:x(o),warning:x(u),info:x(c),success:x(h),grey:da,contrastThreshold:v,getContrastText:w,augmentColor:x,tonalOffset:y},k[p]),b)}function Ta(e){return Math.round(1e5*e)/1e5}function Ra(e){return Ta(e)}var Na={textTransform:"uppercase"},Da='"Roboto", "Helvetica", "Arial", sans-serif';function Ma(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,a=void 0===r?Da:r,i=n.fontSize,o=void 0===i?14:i,s=n.fontWeightLight,u=void 0===s?300:s,l=n.fontWeightRegular,c=void 0===l?400:l,d=n.fontWeightMedium,h=void 0===d?500:d,f=n.fontWeightBold,p=void 0===f?700:f,m=n.htmlFontSize,v=void 0===m?16:m,g=n.allVariants,y=n.pxToRem,b=Ue(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var w=o/14,x=y||function(e){return"".concat(e/v*w,"rem")},k=function(e,t,n,r,i){return(0,je.Z)({fontFamily:a,fontWeight:e,fontSize:x(t),lineHeight:n},a===Da?{letterSpacing:"".concat(Ta(r/t),"em")}:{},i,g)},C={h1:k(u,96,1.167,-1.5),h2:k(u,60,1.2,-.5),h3:k(c,48,1.167,0),h4:k(c,34,1.235,.25),h5:k(c,24,1.334,0),h6:k(h,20,1.6,.15),subtitle1:k(c,16,1.75,.15),subtitle2:k(h,14,1.57,.1),body1:k(c,16,1.5,.15),body2:k(c,14,1.43,.15),button:k(h,14,1.75,.4,Na),caption:k(c,12,1.66,.4),overline:k(c,12,2.66,1,Na)};return qr((0,je.Z)({htmlFontSize:v,pxToRem:x,round:Ra,fontFamily:a,fontSize:o,fontWeightLight:u,fontWeightRegular:c,fontWeightMedium:h,fontWeightBold:p},C),b,{clone:!1})}function Oa(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var Pa=["none",Oa(0,2,1,-1,0,1,1,0,0,1,3,0),Oa(0,3,1,-2,0,2,2,0,0,1,5,0),Oa(0,3,3,-2,0,3,4,0,0,1,8,0),Oa(0,2,4,-1,0,4,5,0,0,1,10,0),Oa(0,3,5,-1,0,5,8,0,0,1,14,0),Oa(0,3,5,-1,0,6,10,0,0,1,18,0),Oa(0,4,5,-2,0,7,10,1,0,2,16,1),Oa(0,5,5,-3,0,8,10,1,0,3,14,2),Oa(0,5,6,-3,0,9,12,1,0,3,16,2),Oa(0,6,6,-3,0,10,14,1,0,4,18,3),Oa(0,6,7,-4,0,11,15,1,0,4,20,3),Oa(0,7,8,-4,0,12,17,2,0,5,22,4),Oa(0,7,8,-4,0,13,19,2,0,5,24,4),Oa(0,7,9,-4,0,14,21,2,0,5,26,4),Oa(0,8,9,-5,0,15,22,2,0,6,28,5),Oa(0,8,10,-5,0,16,24,2,0,6,30,5),Oa(0,8,11,-5,0,17,26,2,0,6,32,5),Oa(0,9,11,-5,0,18,28,2,0,7,34,6),Oa(0,9,12,-6,0,19,29,2,0,7,36,6),Oa(0,10,13,-6,0,20,31,3,0,8,38,7),Oa(0,10,13,-6,0,21,33,3,0,8,40,7),Oa(0,10,14,-6,0,22,35,3,0,8,42,7),Oa(0,11,14,-7,0,23,36,3,0,9,44,8),Oa(0,11,15,-7,0,24,38,3,0,9,46,8)],Fa={borderRadius:4},La={xs:0,sm:600,md:960,lg:1280,xl:1920},Ba={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(La[e],"px)")}};var ja=function(e,t){return t?qr(e,t,{clone:!1}):e};var za={m:"margin",p:"padding"},Ua={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Va={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Wa=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!Va[e])return[e];e=Va[e]}var t=e.split(""),n=(0,w.Z)(t,2),r=n[0],a=n[1],i=za[r],o=Ua[a]||"";return Array.isArray(o)?o.map((function(e){return i+e})):[i+o]})),Ha=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function Ga(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function Ka(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function Xa(e){var t=Ga(e.theme);return Object.keys(e).map((function(n){if(-1===Ha.indexOf(n))return null;var r=Ka(Wa(n),t),a=e[n];return function(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||Ba;return t.reduce((function(e,a,i){return e[r.up(r.keys[i])]=n(t[i]),e}),{})}if("object"===(0,h.Z)(t)){var a=e.theme.breakpoints||Ba;return Object.keys(t).reduce((function(e,r){return e[a.up(r)]=n(t[r]),e}),{})}return n(t)}(e,a,r)})).reduce(ja,{})}Xa.propTypes={},Xa.filterProps=Ha;function Ya(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=Ga({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}var qa={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Za={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Qa(e){return"".concat(Math.round(e),"ms")}var Ja={easing:qa,duration:Za,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?Za.standard:n,a=t.easing,i=void 0===a?qa.easeInOut:a,o=t.delay,s=void 0===o?0:o;Ue(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof r?r:Qa(r)," ").concat(i," ").concat("string"===typeof s?s:Qa(s))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},$a={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function ei(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,a=void 0===r?{}:r,i=e.palette,o=void 0===i?{}:i,s=e.spacing,u=e.typography,l=void 0===u?{}:u,c=Ue(e,["breakpoints","mixins","palette","spacing","typography"]),d=Ia(o),h=sa(n),f=Ya(s),p=qr({breakpoints:h,direction:"ltr",mixins:ua(h,f,a),overrides:{},palette:d,props:{},shadows:Pa,typography:Ma(d,l),spacing:f,shape:Fa,transitions:Ja,zIndex:$a},c),m=arguments.length,v=new Array(m>1?m-1:0),g=1;g<m;g++)v[g-1]=arguments[g];return p=v.reduce((function(e,t){return qr(e,t)}),p)}var ti=ei();var ni=function(e,t){return ia(e,(0,je.Z)({defaultTheme:ti},t))};function ri(e){if("string"!==typeof e)throw new Error(la(7));return e.charAt(0).toUpperCase()+e.slice(1)}var ai=n(4164);function ii(e){return e&&e.ownerDocument||document}function oi(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function si(t,n){return e.useMemo((function(){return null==t&&null==n?null:function(e){oi(t,e),oi(n,e)}}),[t,n])}var ui="undefined"!==typeof window?e.useLayoutEffect:e.useEffect;var li=e.forwardRef((function(t,n){var r=t.children,a=t.container,i=t.disablePortal,o=void 0!==i&&i,s=t.onRendered,u=e.useState(null),l=u[0],c=u[1],d=si(e.isValidElement(r)?r.ref:null,n);return ui((function(){o||c(function(e){return e="function"===typeof e?e():e,ai.findDOMNode(e)}(a)||document.body)}),[a,o]),ui((function(){if(l&&!o)return oi(n,l),function(){oi(n,null)}}),[n,l,o]),ui((function(){s&&(l||o)&&s()}),[s,l,o]),o?e.isValidElement(r)?e.cloneElement(r,{ref:d}):r:l?ai.createPortal(r,l):l}));function ci(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),(function(){}))}var di="undefined"!==typeof window?e.useLayoutEffect:e.useEffect;function hi(t){var n=e.useRef(t);return di((function(){n.current=t})),e.useCallback((function(){return n.current.apply(void 0,arguments)}),[])}function fi(e){var t,n=ii(e);return n.body===e?(t=n,ii(t).defaultView||window).innerWidth>n.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function pi(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function mi(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function vi(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0,i=[t,n].concat((0,x.Z)(r)),o=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===i.indexOf(e)&&-1===o.indexOf(e.tagName)&&pi(e,a)}))}function gi(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function yi(e,t){var n,r=[],a=[],i=e.container;if(!t.disableScrollLock){if(fi(i)){var o=function(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}();r.push({value:i.style.paddingRight,key:"padding-right",el:i}),i.style["padding-right"]="".concat(mi(i)+o,"px"),n=ii(i).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(e){a.push(e.style.paddingRight),e.style.paddingRight="".concat(mi(e)+o,"px")}))}var s=i.parentElement,u="HTML"===s.nodeName&&"scroll"===window.getComputedStyle(s)["overflow-y"]?s:i;r.push({value:u.style.overflow,key:"overflow",el:u}),u.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(e,t){a[t]?e.style.paddingRight=a[t]:e.style.removeProperty("padding-right")})),r.forEach((function(e){var t=e.value,n=e.el,r=e.key;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var bi=function(){function e(){a(this,e),this.modals=[],this.containers=[]}return s(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&pi(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);vi(t,e.mountNode,e.modalRef,r,!0);var a=gi(this.containers,(function(e){return e.container===t}));return-1!==a?(this.containers[a].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:r}),n)}},{key:"mount",value:function(e,t){var n=gi(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=yi(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=gi(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&pi(e.modalRef,!0),vi(r.container,e.mountNode,e.modalRef,r.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var a=r.modals[r.modals.length-1];a.modalRef&&pi(a.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();var wi=function(t){var n=t.children,r=t.disableAutoFocus,a=void 0!==r&&r,i=t.disableEnforceFocus,o=void 0!==i&&i,s=t.disableRestoreFocus,u=void 0!==s&&s,l=t.getDoc,c=t.isEnabled,d=t.open,h=e.useRef(),f=e.useRef(null),p=e.useRef(null),m=e.useRef(),v=e.useRef(null),g=e.useCallback((function(e){v.current=ai.findDOMNode(e)}),[]),y=si(n.ref,g),b=e.useRef();return e.useEffect((function(){b.current=d}),[d]),!b.current&&d&&"undefined"!==typeof window&&(m.current=l().activeElement),e.useEffect((function(){if(d){var e=ii(v.current);a||!v.current||v.current.contains(e.activeElement)||(v.current.hasAttribute("tabIndex")||v.current.setAttribute("tabIndex",-1),v.current.focus());var t=function(){null!==v.current&&(e.hasFocus()&&!o&&c()&&!h.current?v.current&&!v.current.contains(e.activeElement)&&v.current.focus():h.current=!1)},n=function(t){!o&&c()&&9===t.keyCode&&e.activeElement===v.current&&(h.current=!0,t.shiftKey?p.current.focus():f.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",n,!0);var r=setInterval((function(){t()}),50);return function(){clearInterval(r),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",n,!0),u||(m.current&&m.current.focus&&m.current.focus(),m.current=null)}}}),[a,o,u,c,d]),e.createElement(e.Fragment,null,e.createElement("div",{tabIndex:0,ref:f,"data-test":"sentinelStart"}),e.cloneElement(n,{ref:y}),e.createElement("div",{tabIndex:0,ref:p,"data-test":"sentinelEnd"}))},xi={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},ki=e.forwardRef((function(t,n){var r=t.invisible,a=void 0!==r&&r,i=t.open,o=Ue(t,["invisible","open"]);return i?e.createElement("div",(0,je.Z)({"aria-hidden":!0,ref:n},o,{style:(0,je.Z)({},xi.root,a?xi.invisible:{},o.style)})):null}));var Ci=new bi,Ei=e.forwardRef((function(t,n){var r=dn(),a=aa({name:"MuiModal",props:(0,je.Z)({},t),theme:r}),i=a.BackdropComponent,o=void 0===i?ki:i,s=a.BackdropProps,u=a.children,l=a.closeAfterTransition,c=void 0!==l&&l,d=a.container,h=a.disableAutoFocus,f=void 0!==h&&h,p=a.disableBackdropClick,m=void 0!==p&&p,v=a.disableEnforceFocus,g=void 0!==v&&v,y=a.disableEscapeKeyDown,b=void 0!==y&&y,w=a.disablePortal,x=void 0!==w&&w,k=a.disableRestoreFocus,C=void 0!==k&&k,E=a.disableScrollLock,S=void 0!==E&&E,_=a.hideBackdrop,A=void 0!==_&&_,I=a.keepMounted,T=void 0!==I&&I,R=a.manager,N=void 0===R?Ci:R,D=a.onBackdropClick,M=a.onClose,O=a.onEscapeKeyDown,P=a.onRendered,F=a.open,L=Ue(a,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),B=e.useState(!0),j=B[0],z=B[1],U=e.useRef({}),V=e.useRef(null),W=e.useRef(null),H=si(W,n),G=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(a),K=function(){return ii(V.current)},X=function(){return U.current.modalRef=W.current,U.current.mountNode=V.current,U.current},Y=function(){N.mount(X(),{disableScrollLock:S}),W.current.scrollTop=0},q=hi((function(){var e=function(e){return e="function"===typeof e?e():e,ai.findDOMNode(e)}(d)||K().body;N.add(X(),e),W.current&&Y()})),Z=e.useCallback((function(){return N.isTopModal(X())}),[N]),Q=hi((function(e){V.current=e,e&&(P&&P(),F&&Z()?Y():pi(W.current,!0))})),J=e.useCallback((function(){N.remove(X())}),[N]);if(e.useEffect((function(){return function(){J()}}),[J]),e.useEffect((function(){F?q():G&&c||J()}),[F,J,G,c,q]),!T&&!F&&(!G||j))return null;var $=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(r||{zIndex:$a}),ee={};return void 0===u.props.tabIndex&&(ee.tabIndex=u.props.tabIndex||"-1"),G&&(ee.onEnter=ci((function(){z(!1)}),u.props.onEnter),ee.onExited=ci((function(){z(!0),c&&J()}),u.props.onExited)),e.createElement(li,{ref:Q,container:d,disablePortal:x},e.createElement("div",(0,je.Z)({ref:H,onKeyDown:function(e){"Escape"===e.key&&Z()&&(O&&O(e),b||(e.stopPropagation(),M&&M(e,"escapeKeyDown")))},role:"presentation"},L,{style:(0,je.Z)({},$.root,!F&&j?$.hidden:{},L.style)}),A?null:e.createElement(o,(0,je.Z)({open:F,onClick:function(e){e.target===e.currentTarget&&(D&&D(e),!m&&M&&M(e,"backdropClick"))}},s)),e.createElement(wi,{disableEnforceFocus:g,disableAutoFocus:f,disableRestoreFocus:C,getDoc:K,isEnabled:Z,open:F},e.cloneElement(u,ee))))})),Si=!1,_i=e.createContext(null),Ai="unmounted",Ii="exited",Ti="entering",Ri="entered",Ni="exiting",Di=function(t){function n(e,n){var r;r=t.call(this,e,n)||this;var a,i=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?i?(a=Ii,r.appearStatus=Ti):a=Ri:a=e.unmountOnExit||e.mountOnEnter?Ai:Ii,r.state={status:a},r.nextCallback=null,r}Ye(n,t),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Ai?{status:Ii}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Ti&&n!==Ri&&(t=Ti):n!==Ti&&n!==Ri||(t=Ni)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Ti){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:ai.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ii&&this.setState({status:Ai})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[ai.findDOMNode(this),r],i=a[0],o=a[1],s=this.getTimeouts(),u=r?s.appear:s.enter;!e&&!n||Si?this.safeSetState({status:Ri},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,o),this.safeSetState({status:Ti},(function(){t.props.onEntering(i,o),t.onTransitionEnd(u,(function(){t.safeSetState({status:Ri},(function(){t.props.onEntered(i,o)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:ai.findDOMNode(this);t&&!Si?(this.props.onExit(r),this.safeSetState({status:Ni},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Ii},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Ii},(function(){e.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:ai.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=a[0],o=a[1];this.props.addEndListener(i,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var t=this.state.status;if(t===Ai)return null;var n=this.props,r=n.children,a=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,ze.Z)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(_i.Provider,{value:null},"function"===typeof r?r(t,a):e.cloneElement(e.Children.only(r),a))},n}(e.Component);function Mi(){}Di.contextType=_i,Di.propTypes={},Di.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Mi,onEntering:Mi,onEntered:Mi,onExit:Mi,onExiting:Mi,onExited:Mi},Di.UNMOUNTED=Ai,Di.EXITED=Ii,Di.ENTERING=Ti,Di.ENTERED=Ri,Di.EXITING=Ni;var Oi=Di;function Pi(e,t){var n=e.timeout,r=e.style,a=void 0===r?{}:r;return{duration:a.transitionDuration||"number"===typeof n?n:n[t.mode]||0,delay:a.transitionDelay}}var Fi={entering:{opacity:1},entered:{opacity:1}},Li={enter:Za.enteringScreen,exit:Za.leavingScreen},Bi=e.forwardRef((function(t,n){var r=t.children,a=t.disableStrictModeCompat,i=void 0!==a&&a,o=t.in,s=t.onEnter,u=t.onEntered,l=t.onEntering,c=t.onExit,d=t.onExited,h=t.onExiting,f=t.style,p=t.TransitionComponent,m=void 0===p?Oi:p,v=t.timeout,g=void 0===v?Li:v,y=Ue(t,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","TransitionComponent","timeout"]),b=dn()||ti,x=b.unstable_strictMode&&!i,k=e.useRef(null),C=si(r.ref,n),E=si(x?k:void 0,C),S=function(e){return function(t,n){if(e){var r=x?[k.current,t]:[t,n],a=(0,w.Z)(r,2),i=a[0],o=a[1];void 0===o?e(i):e(i,o)}}},_=S(l),A=S((function(e,t){!function(e){e.scrollTop}(e);var n=Pi({style:f,timeout:g},{mode:"enter"});e.style.webkitTransition=b.transitions.create("opacity",n),e.style.transition=b.transitions.create("opacity",n),s&&s(e,t)})),I=S(u),T=S(h),R=S((function(e){var t=Pi({style:f,timeout:g},{mode:"exit"});e.style.webkitTransition=b.transitions.create("opacity",t),e.style.transition=b.transitions.create("opacity",t),c&&c(e)})),N=S(d);return e.createElement(m,(0,je.Z)({appear:!0,in:o,nodeRef:x?k:void 0,onEnter:A,onEntered:I,onEntering:_,onExit:R,onExited:N,onExiting:T,timeout:g},y),(function(t,n){return e.cloneElement(r,(0,je.Z)({style:(0,je.Z)({opacity:0,visibility:"exited"!==t||o?void 0:"hidden"},Fi[t],f,r.props.style),ref:E},n))}))})),ji=Bi,zi=e.forwardRef((function(t,n){var r=t.children,a=t.classes,i=t.className,o=t.invisible,s=void 0!==o&&o,u=t.open,l=t.transitionDuration,c=t.TransitionComponent,d=void 0===c?ji:c,h=Ue(t,["children","classes","className","invisible","open","transitionDuration","TransitionComponent"]);return e.createElement(d,(0,je.Z)({in:u,timeout:l},h),e.createElement("div",{className:(0,We.Z)(a.root,i,s&&a.invisible),"aria-hidden":!0,ref:n},r))})),Ui=ni({root:{zIndex:-1,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},{name:"MuiBackdrop"})(zi),Vi=e.forwardRef((function(t,n){var r=t.classes,a=t.className,i=t.component,o=void 0===i?"div":i,s=t.square,u=void 0!==s&&s,l=t.elevation,c=void 0===l?1:l,d=t.variant,h=void 0===d?"elevation":d,f=Ue(t,["classes","className","component","square","elevation","variant"]);return e.createElement(o,(0,je.Z)({className:(0,We.Z)(r.root,a,"outlined"===h?r.outlined:r["elevation".concat(c)],!u&&r.rounded),ref:n},f))})),Wi=ni((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),(0,je.Z)({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(Vi),Hi={enter:Za.enteringScreen,exit:Za.leavingScreen},Gi=e.forwardRef((function(t,n){var r=t.BackdropProps,a=t.children,i=t.classes,o=t.className,s=t.disableBackdropClick,u=void 0!==s&&s,l=t.disableEscapeKeyDown,c=void 0!==l&&l,d=t.fullScreen,h=void 0!==d&&d,f=t.fullWidth,p=void 0!==f&&f,m=t.maxWidth,v=void 0===m?"sm":m,g=t.onBackdropClick,y=t.onClose,b=t.onEnter,w=t.onEntered,x=t.onEntering,k=t.onEscapeKeyDown,C=t.onExit,E=t.onExited,S=t.onExiting,_=t.open,A=t.PaperComponent,I=void 0===A?Wi:A,T=t.PaperProps,R=void 0===T?{}:T,N=t.scroll,D=void 0===N?"paper":N,M=t.TransitionComponent,O=void 0===M?ji:M,P=t.transitionDuration,F=void 0===P?Hi:P,L=t.TransitionProps,B=t["aria-describedby"],j=t["aria-labelledby"],z=Ue(t,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),U=e.useRef();return e.createElement(Ei,(0,je.Z)({className:(0,We.Z)(i.root,o),BackdropComponent:Ui,BackdropProps:(0,je.Z)({transitionDuration:F},r),closeAfterTransition:!0},u?{disableBackdropClick:u}:{},{disableEscapeKeyDown:c,onEscapeKeyDown:k,onClose:y,open:_,ref:n},z),e.createElement(O,(0,je.Z)({appear:!0,in:_,timeout:F,onEnter:b,onEntering:x,onEntered:w,onExit:C,onExiting:S,onExited:E,role:"none presentation"},L),e.createElement("div",{className:(0,We.Z)(i.container,i["scroll".concat(ri(D))]),onMouseUp:function(e){e.target===e.currentTarget&&e.target===U.current&&(U.current=null,g&&g(e),!u&&y&&y(e,"backdropClick"))},onMouseDown:function(e){U.current=e.target}},e.createElement(I,(0,je.Z)({elevation:24,role:"dialog","aria-describedby":B,"aria-labelledby":j},R,{className:(0,We.Z)(i.paper,i["paperScroll".concat(ri(D))],i["paperWidth".concat(ri(String(v)))],R.className,h&&i.paperFullScreen,p&&i.paperFullWidth)}),a))))})),Ki=ni((function(e){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(e.breakpoints.values.xs,444),"&$paperScrollBody":(0,Ve.Z)({},e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:e.breakpoints.values.sm,"&$paperScrollBody":(0,Ve.Z)({},e.breakpoints.down(e.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:e.breakpoints.values.md,"&$paperScrollBody":(0,Ve.Z)({},e.breakpoints.down(e.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:e.breakpoints.values.lg,"&$paperScrollBody":(0,Ve.Z)({},e.breakpoints.down(e.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:e.breakpoints.values.xl,"&$paperScrollBody":(0,Ve.Z)({},e.breakpoints.down(e.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}}),{name:"MuiDialog"})(Gi),Xi={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},Yi=e.forwardRef((function(t,n){var r=t.align,a=void 0===r?"inherit":r,i=t.classes,o=t.className,s=t.color,u=void 0===s?"initial":s,l=t.component,c=t.display,d=void 0===c?"initial":c,h=t.gutterBottom,f=void 0!==h&&h,p=t.noWrap,m=void 0!==p&&p,v=t.paragraph,g=void 0!==v&&v,y=t.variant,b=void 0===y?"body1":y,w=t.variantMapping,x=void 0===w?Xi:w,k=Ue(t,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),C=l||(g?"p":x[b]||Xi[b])||"span";return e.createElement(C,(0,je.Z)({className:(0,We.Z)(i.root,o,"inherit"!==b&&i[b],"initial"!==u&&i["color".concat(ri(u))],m&&i.noWrap,f&&i.gutterBottom,g&&i.paragraph,"inherit"!==a&&i["align".concat(ri(a))],"initial"!==d&&i["display".concat(ri(d))]),ref:n},k))})),qi=ni((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(Yi),Zi=e.forwardRef((function(t,n){return e.createElement(qi,(0,je.Z)({component:"p",variant:"body1",color:"textSecondary",ref:n},t))})),Qi=ni({root:{marginBottom:12}},{name:"MuiDialogContentText"})(Zi),Ji=e.forwardRef((function(t,n){var r=t.children,a=t.classes,i=t.className,o=t.disableTypography,s=void 0!==o&&o,u=Ue(t,["children","classes","className","disableTypography"]);return e.createElement("div",(0,je.Z)({className:(0,We.Z)(a.root,i),ref:n},u),s?r:e.createElement(qi,{component:"h2",variant:"h6"},r))})),$i=ni({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(Ji),eo=e.forwardRef((function(t,n){var r=t.disableSpacing,a=void 0!==r&&r,i=t.classes,o=t.className,s=Ue(t,["disableSpacing","classes","className"]);return e.createElement("div",(0,je.Z)({className:(0,We.Z)(i.root,o,!a&&i.spacing),ref:n},s))})),to=ni({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiDialogActions"})(eo),no=e.forwardRef((function(t,n){var r=t.classes,a=t.className,i=t.dividers,o=void 0!==i&&i,s=Ue(t,["classes","className","dividers"]);return e.createElement("div",(0,je.Z)({className:(0,We.Z)(r.root,a,o&&r.dividers),ref:n},s))})),ro=ni((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(no),ao=!0,io=!1,oo=null,so={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function uo(e){e.metaKey||e.altKey||e.ctrlKey||(ao=!0)}function lo(){ao=!1}function co(){"hidden"===this.visibilityState&&io&&(ao=!0)}function ho(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return ao||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!so[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function fo(){io=!0,window.clearTimeout(oo),oo=window.setTimeout((function(){io=!1}),100)}function po(){return{isFocusVisible:ho,onBlurVisible:fo,ref:e.useCallback((function(e){var t,n=ai.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",uo,!0),t.addEventListener("mousedown",lo,!0),t.addEventListener("pointerdown",lo,!0),t.addEventListener("touchstart",lo,!0),t.addEventListener("visibilitychange",co,!0))}),[])}}function mo(t,n){var r=Object.create(null);return t&&e.Children.map(t,(function(e){return e})).forEach((function(t){r[t.key]=function(t){return n&&(0,e.isValidElement)(t)?n(t):t}(t)})),r}function vo(e,t,n){return null!=n[t]?n[t]:e.props[t]}function go(t,n,r){var a=mo(t.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,a=Object.create(null),i=[];for(var o in e)o in t?i.length&&(a[o]=i,i=[]):i.push(o);var s={};for(var u in t){if(a[u])for(r=0;r<a[u].length;r++){var l=a[u][r];s[a[u][r]]=n(l)}s[u]=n(u)}for(r=0;r<i.length;r++)s[i[r]]=n(i[r]);return s}(n,a);return Object.keys(i).forEach((function(o){var s=i[o];if((0,e.isValidElement)(s)){var u=o in n,l=o in a,c=n[o],d=(0,e.isValidElement)(c)&&!c.props.in;!l||u&&!d?l||!u||d?l&&u&&(0,e.isValidElement)(c)&&(i[o]=(0,e.cloneElement)(s,{onExited:r.bind(null,s),in:c.props.in,exit:vo(s,"exit",t),enter:vo(s,"enter",t)})):i[o]=(0,e.cloneElement)(s,{in:!1}):i[o]=(0,e.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:vo(s,"exit",t),enter:vo(s,"enter",t)})}})),i}var yo=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},bo=function(t){function n(e,n){var r,a=(r=t.call(this,e,n)||this).handleExited.bind(f(r));return r.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},r}Ye(n,t);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(t,n){var r,a,i=n.children,o=n.handleExited;return{children:n.firstRender?(r=t,a=o,mo(r.children,(function(t){return(0,e.cloneElement)(t,{onExited:a.bind(null,t),in:!0,appear:vo(t,"appear",r),enter:vo(t,"enter",r),exit:vo(t,"exit",r)})}))):go(t,i,o),firstRender:!1}},r.handleExited=function(e,t){var n=mo(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,je.Z)({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var t=this.props,n=t.component,r=t.childFactory,a=(0,ze.Z)(t,["component","childFactory"]),i=this.state.contextValue,o=yo(this.state.children).map(r);return delete a.appear,delete a.enter,delete a.exit,null===n?e.createElement(_i.Provider,{value:i},o):e.createElement(_i.Provider,{value:i},e.createElement(n,a,o))},n}(e.Component);bo.propTypes={},bo.defaultProps={component:"div",childFactory:function(e){return e}};var wo=bo,xo="undefined"===typeof window?e.useEffect:e.useLayoutEffect;var ko=function(t){var n=t.classes,r=t.pulsate,a=void 0!==r&&r,i=t.rippleX,o=t.rippleY,s=t.rippleSize,u=t.in,l=t.onExited,c=void 0===l?function(){}:l,d=t.timeout,h=e.useState(!1),f=h[0],p=h[1],m=(0,We.Z)(n.ripple,n.rippleVisible,a&&n.ripplePulsate),v={width:s,height:s,top:-s/2+o,left:-s/2+i},g=(0,We.Z)(n.child,f&&n.childLeaving,a&&n.childPulsate),y=hi(c);return xo((function(){if(!u){p(!0);var e=setTimeout(y,d);return function(){clearTimeout(e)}}}),[y,u,d]),e.createElement("span",{className:m,style:v},e.createElement("span",{className:g}))},Co=e.forwardRef((function(t,n){var r=t.center,a=void 0!==r&&r,i=t.classes,o=t.className,s=Ue(t,["center","classes","className"]),u=e.useState([]),l=u[0],c=u[1],d=e.useRef(0),h=e.useRef(null);e.useEffect((function(){h.current&&(h.current(),h.current=null)}),[l]);var f=e.useRef(!1),p=e.useRef(null),m=e.useRef(null),v=e.useRef(null);e.useEffect((function(){return function(){clearTimeout(p.current)}}),[]);var g=e.useCallback((function(t){var n=t.pulsate,r=t.rippleX,a=t.rippleY,o=t.rippleSize,s=t.cb;c((function(t){return[].concat((0,x.Z)(t),[e.createElement(ko,{key:d.current,classes:i,timeout:550,pulsate:n,rippleX:r,rippleY:a,rippleSize:o})])})),d.current+=1,h.current=s}),[i]),y=e.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,i=void 0!==r&&r,o=t.center,s=void 0===o?a||t.pulsate:o,u=t.fakeElement,l=void 0!==u&&u;if("mousedown"===e.type&&f.current)f.current=!1;else{"touchstart"===e.type&&(f.current=!0);var c,d,h,y=l?null:v.current,b=y?y.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(b.width/2),d=Math.round(b.height/2);else{var w=e.touches?e.touches[0]:e,x=w.clientX,k=w.clientY;c=Math.round(x-b.left),d=Math.round(k-b.top)}if(s)(h=Math.sqrt((2*Math.pow(b.width,2)+Math.pow(b.height,2))/3))%2===0&&(h+=1);else{var C=2*Math.max(Math.abs((y?y.clientWidth:0)-c),c)+2,E=2*Math.max(Math.abs((y?y.clientHeight:0)-d),d)+2;h=Math.sqrt(Math.pow(C,2)+Math.pow(E,2))}e.touches?null===m.current&&(m.current=function(){g({pulsate:i,rippleX:c,rippleY:d,rippleSize:h,cb:n})},p.current=setTimeout((function(){m.current&&(m.current(),m.current=null)}),80)):g({pulsate:i,rippleX:c,rippleY:d,rippleSize:h,cb:n})}}),[a,g]),b=e.useCallback((function(){y({},{pulsate:!0})}),[y]),w=e.useCallback((function(e,t){if(clearTimeout(p.current),"touchend"===e.type&&m.current)return e.persist(),m.current(),m.current=null,void(p.current=setTimeout((function(){w(e,t)})));m.current=null,c((function(e){return e.length>0?e.slice(1):e})),h.current=t}),[]);return e.useImperativeHandle(n,(function(){return{pulsate:b,start:y,stop:w}}),[b,y,w]),e.createElement("span",(0,je.Z)({className:(0,We.Z)(i.root,o),ref:v},s),e.createElement(wo,{component:null,exit:!0},l))})),Eo=ni((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(e.memo(Co)),So=e.forwardRef((function(t,n){var r=t.action,a=t.buttonRef,i=t.centerRipple,o=void 0!==i&&i,s=t.children,u=t.classes,l=t.className,c=t.component,d=void 0===c?"button":c,h=t.disabled,f=void 0!==h&&h,p=t.disableRipple,m=void 0!==p&&p,v=t.disableTouchRipple,g=void 0!==v&&v,y=t.focusRipple,b=void 0!==y&&y,w=t.focusVisibleClassName,x=t.onBlur,k=t.onClick,C=t.onFocus,E=t.onFocusVisible,S=t.onKeyDown,_=t.onKeyUp,A=t.onMouseDown,I=t.onMouseLeave,T=t.onMouseUp,R=t.onTouchEnd,N=t.onTouchMove,D=t.onTouchStart,M=t.onDragLeave,O=t.tabIndex,P=void 0===O?0:O,F=t.TouchRippleProps,L=t.type,B=void 0===L?"button":L,j=Ue(t,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),z=e.useRef(null);var U=e.useRef(null),V=e.useState(!1),W=V[0],H=V[1];f&&W&&H(!1);var G=po(),K=G.isFocusVisible,X=G.onBlurVisible,Y=G.ref;function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return hi((function(r){return t&&t(r),!n&&U.current&&U.current[e](r),!0}))}e.useImperativeHandle(r,(function(){return{focusVisible:function(){H(!0),z.current.focus()}}}),[]),e.useEffect((function(){W&&b&&!m&&U.current.pulsate()}),[m,b,W]);var Z=q("start",A),Q=q("stop",M),J=q("stop",T),$=q("stop",(function(e){W&&e.preventDefault(),I&&I(e)})),ee=q("start",D),te=q("stop",R),ne=q("stop",N),re=q("stop",(function(e){W&&(X(e),H(!1)),x&&x(e)}),!1),ae=hi((function(e){z.current||(z.current=e.currentTarget),K(e)&&(H(!0),E&&E(e)),C&&C(e)})),ie=function(){var e=ai.findDOMNode(z.current);return d&&"button"!==d&&!("A"===e.tagName&&e.href)},oe=e.useRef(!1),se=hi((function(e){b&&!oe.current&&W&&U.current&&" "===e.key&&(oe.current=!0,e.persist(),U.current.stop(e,(function(){U.current.start(e)}))),e.target===e.currentTarget&&ie()&&" "===e.key&&e.preventDefault(),S&&S(e),e.target===e.currentTarget&&ie()&&"Enter"===e.key&&!f&&(e.preventDefault(),k&&k(e))})),ue=hi((function(e){b&&" "===e.key&&U.current&&W&&!e.defaultPrevented&&(oe.current=!1,e.persist(),U.current.stop(e,(function(){U.current.pulsate(e)}))),_&&_(e),k&&e.target===e.currentTarget&&ie()&&" "===e.key&&!e.defaultPrevented&&k(e)})),le=d;"button"===le&&j.href&&(le="a");var ce={};"button"===le?(ce.type=B,ce.disabled=f):("a"===le&&j.href||(ce.role="button"),ce["aria-disabled"]=f);var de=si(a,n),he=si(Y,z),fe=si(de,he),pe=e.useState(!1),me=pe[0],ve=pe[1];e.useEffect((function(){ve(!0)}),[]);var ge=me&&!m&&!f;return e.createElement(le,(0,je.Z)({className:(0,We.Z)(u.root,l,W&&[u.focusVisible,w],f&&u.disabled),onBlur:re,onClick:k,onFocus:ae,onKeyDown:se,onKeyUp:ue,onMouseDown:Z,onMouseLeave:$,onMouseUp:J,onDragLeave:Q,onTouchEnd:te,onTouchMove:ne,onTouchStart:ee,ref:fe,tabIndex:f?-1:P},ce,j),s,ge?e.createElement(Eo,(0,je.Z)({ref:U,center:o},F)):null)})),_o=ni({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(So),Ao=e.forwardRef((function(t,n){var r=t.children,a=t.classes,i=t.className,o=t.color,s=void 0===o?"default":o,u=t.component,l=void 0===u?"button":u,c=t.disabled,d=void 0!==c&&c,h=t.disableElevation,f=void 0!==h&&h,p=t.disableFocusRipple,m=void 0!==p&&p,v=t.endIcon,g=t.focusVisibleClassName,y=t.fullWidth,b=void 0!==y&&y,w=t.size,x=void 0===w?"medium":w,k=t.startIcon,C=t.type,E=void 0===C?"button":C,S=t.variant,_=void 0===S?"text":S,A=Ue(t,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),I=k&&e.createElement("span",{className:(0,We.Z)(a.startIcon,a["iconSize".concat(ri(x))])},k),T=v&&e.createElement("span",{className:(0,We.Z)(a.endIcon,a["iconSize".concat(ri(x))])},v);return e.createElement(_o,(0,je.Z)({className:(0,We.Z)(a.root,a[_],i,"inherit"===s?a.colorInherit:"default"!==s&&a["".concat(_).concat(ri(s))],"medium"!==x&&[a["".concat(_,"Size").concat(ri(x))],a["size".concat(ri(x))]],f&&a.disableElevation,d&&a.disabled,b&&a.fullWidth),component:l,disabled:d,focusRipple:!m,focusVisibleClassName:(0,We.Z)(a.focusVisible,g),ref:n,type:E},A),e.createElement("span",{className:a.label},I,r,T))})),Io=ni((function(e){return{root:(0,je.Z)({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:ka(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:ka(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:ka(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(ka(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:ka(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(ka(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:ka(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(Ao);var To=function(){var t=(0,e.useContext)(Pe),n=new b,r=n.getHome(t.language),a=n.getDialogs(t.language),i=function(){if(/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform))return!0;return!1}()&&!function(){var e=navigator.userAgent;if(e.includes("Safari")&&!e.includes("Chrome")&&!e.includes("Chromium"))return!0;return!1}(),o=(0,e.useState)(i),s=(0,w.Z)(o,2),u=s[0],l=s[1],c=function(){l(!1)};return(0,Le.jsxs)("div",{className:"welcome-background full-screen flex",children:[(0,Le.jsxs)(Ki,{open:u,onClose:c,children:[(0,Le.jsx)($i,{children:a.warning}),(0,Le.jsx)(ro,{children:(0,Le.jsx)(Qi,{children:a.install_use_safari})}),(0,Le.jsx)(to,{children:(0,Le.jsx)(Io,{className:"color-secondary",onClick:c,children:a.close_label})})]}),(0,Le.jsx)(Be,{}),(0,Le.jsxs)("div",{className:"flex welcome-box",children:[(0,Le.jsxs)("h1",{className:"center-text welcome-text-large color-primary welcome-text",children:[r.label_1,(0,Le.jsx)("br",{}),r.label_2,(0,Le.jsx)("br",{}),r.label_3]}),(0,Le.jsx)(Me,{to:"/tours",children:(0,Le.jsx)("button",{className:"button margin-top-primary background-primary color-primary welcome-text-button font-weight-primary text-transform-primary",onClick:function(){return window.lastVisited},children:r.button_label})})]})]})};function Ro(){Ro=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(T){u=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof f?t:f,o=Object.create(i.prototype),s=new _(a||[]);return r(o,"_invoke",{value:k(e,n,s)}),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=l;var d={};function f(){}function p(){}function m(){}var v={};u(v,i,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(A([])));y&&y!==t&&n.call(y,i)&&(v=y);var b=m.prototype=f.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,s){var u=c(e[r],e,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==(0,h.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,o,s)}),(function(e){a("throw",e,o,s)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,s)}))}s(u.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return I()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=C(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var a=c(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function A(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(x.prototype),u(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(b),u(b,s,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=A,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function No(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,a)}function Do(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){No(i,r,a,o,s,"next",e)}function s(e){No(i,r,a,o,s,"throw",e)}o(void 0)}))}}var Mo=function(t){var n=(0,e.useContext)(Pe),r=new b,a=r.getNavbar(n.language),i=r.getInstall(n.language),o=r.getDialogs(n.language),s=(0,e.useState)(!1),u=(0,w.Z)(s,2),l=u[0],c=u[1],d=function(){c(!l)},h=(0,e.useState)(!1),f=(0,w.Z)(h,2),p=f[0],m=f[1],v=function(){var e=navigator.userAgent;if(e.includes("Safari")&&!e.includes("Chrome")&&!e.includes("Chromium"))return!0;return!1}(),g=function(){if(/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform))return!0;return!1}(),y=pe(),x=function(){m(!0)},k=function(){m(!1)};function C(){return(C=Do(Ro().mark((function e(){var t;return Ro().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.deferredPrompt){e.next=9;break}return window.deferredPrompt.prompt(),e.next=4,window.deferredPrompt.userChoice;case 4:t=e.sent,"accepted"===t.outcome&&(window.installBannerDisplayed=!1),e.next=10;break;case 9:x();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)(Ki,{open:p,onClose:k,children:[(0,Le.jsx)($i,{children:o.install_download_label}),(0,Le.jsxs)(ro,{children:[(0,Le.jsx)(Qi,{children:v?o.install_step_1_safari:o.install_step_1}),(0,Le.jsx)(Qi,{children:o.install_step_2}),(0,Le.jsx)(Qi,{children:o.install_step_3}),(0,Le.jsx)(Qi,{className:"font-weight-primary",children:g&&!v?o.install_use_safari:""})]}),(0,Le.jsx)(to,{children:(0,Le.jsx)(Io,{onClick:k,children:o.close_label})})]}),(0,Le.jsxs)("header",{id:"header",className:"navigation background-primary stick-top z-index-nav flex-secondary align-items-primary",children:[(0,Le.jsx)("h1",{id:"headerLabel",className:"text-header font-weight-primary color-primary margin-right-primary text-large",children:t.header}),(0,Le.jsxs)("div",{className:"flex-secondary align-items-primary z-index-nav",children:[(0,Le.jsx)(Be,{}),(0,Le.jsxs)("div",{className:"hamburger",onClick:d,children:[(0,Le.jsx)("span",{className:l?"bar hamburger1":"bar"}),(0,Le.jsx)("span",{className:l?"bar hamburger2":"bar"}),(0,Le.jsx)("span",{className:l?"bar hamburger3":"bar"})]})]})]}),(0,Le.jsx)("nav",{id:"navbar",children:(0,Le.jsxs)("ul",{id:"navlist",className:l?"navigation-list font-weight-primary flex navigation-list-active":"navigation-list flex font-weight-primary",onClick:d,children:[(0,Le.jsx)("li",{children:(0,Le.jsx)(Oe,{className:"navigation-link navigation-link-padding text-medium font-weight-primary color-primary cursor-primary",to:"/",children:(0,Le.jsx)("span",{children:a.home})})}),(0,Le.jsx)("li",{children:(0,Le.jsx)(Oe,{className:"navigation-link navigation-link-padding text-medium font-weight-primary color-primary cursor-primary",to:"/other",children:a.menu})}),(0,Le.jsx)("li",{children:(0,Le.jsx)(Oe,{className:"navigation-link navigation-link-padding text-medium font-weight-primary color-primary cursor-primary",to:"/tours",children:a.tours})}),(0,Le.jsx)("li",{children:(0,Le.jsx)(Oe,{className:"navigation-link navigation-link-padding text-medium font-weight-primary color-primary cursor-primary",to:"/rooms_overview",children:a.rooms})}),(0,Le.jsx)("li",{children:(0,Le.jsx)(Oe,{className:"navigation-link navigation-link-padding text-medium font-weight-primary color-primary cursor-primary",onClick:function(){return y(-1)},children:a.back})}),(0,Le.jsx)("li",{className:window.installBannerDisplayed?"background-primary":"display-none",children:(0,Le.jsxs)("div",{className:"flex navigation-link-padding",children:[(0,Le.jsx)("span",{className:"text-medium color-primary margin-bottom-primary",children:i.install_label}),(0,Le.jsx)("button",{onClick:function(){return C.apply(this,arguments)},id:"downloadButton",className:"margin-secondary background-secondary text-medium button background-primary color-secondary text-transform-primary font-weight-primary",children:i.install})]})})]})})]})},Oo=n(5878);var Po=function(e){return(0,Le.jsx)("div",{className:"card box-shadow transition-primary padding-third margin-bottom-primary",children:(0,Le.jsxs)("div",{className:"flex",children:[(0,Le.jsxs)("div",{className:"flex-secondary align-items-primary padding-bottom-primary",children:[(0,Le.jsx)(Oo.Z,{className:"icon margin-right-secondary"}),(0,Le.jsx)("span",{className:"font-weight-primary text-medium",children:e.info})]}),(0,Le.jsx)("span",{children:e.content})]})})},Fo=n(9212),Lo=n(4941);var Bo=function(){var t=(0,e.useContext)(Pe),r=new b,a=r.getTours(t.language),i=r.getHeader(t.language),o=r.getInfo(t.language);return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mo,{header:i.tours}),(0,Le.jsxs)("div",{className:"content-container",children:[(0,Le.jsx)(Po,{info:o.info,content:o.tours_info}),(0,Le.jsx)("div",{className:"grid-secondary padding-top-primary",children:a.map((function(e){return(0,Le.jsx)(Me,{to:"/rooms",className:"card box-shadow transition-primary hover-primary",children:(0,Le.jsxs)("article",{className:"flex",onClick:function(){return t.setTour(e.tour_id)},children:[(0,Le.jsx)("img",{src:n(9977)("./img".concat(e.img)),alt:"castle",className:"card-image padding-bottom-primary border-radius-secondary"}),(0,Le.jsx)("h2",{className:"text-medium padding-primary padding-bottom-primary",children:e.title}),(0,Le.jsx)("p",{className:"margin-bottom padding-primary medieval-first-letter padding-bottom-primary",children:e.description}),(0,Le.jsxs)("div",{className:"flex-secondary align-items-primary padding-primary padding-bottom-primary",children:[(0,Le.jsx)(Lo.Z,{className:"icon margin-right-secondary"}),(0,Le.jsx)("span",{className:"font-weight-primary",children:e.rooms.length+" "+e.rooms_label})]}),(0,Le.jsxs)("div",{className:"flex-secondary align-items-primary padding-primary padding-bottom-primary",children:[(0,Le.jsx)(Fo.Z,{className:"icon margin-right-secondary"}),(0,Le.jsx)("span",{className:"font-weight-primary",children:e.time})]}),(0,Le.jsx)("div",{className:"center-text margin-primary",children:(0,Le.jsx)("button",{className:"text-medium button align-self-primary background-primary font-weight-primary color-primary",children:e.button})})]})},e.title)}))})]})]})};var jo=function(){var t=(0,e.useContext)(Pe),r=new b,a=r.getRooms(t.language,t.tour),i=r.getTour(t.language,t.tour);return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mo,{header:i.title}),(0,Le.jsx)("div",{className:"content-container",children:(0,Le.jsx)("div",{className:"grid",children:a.map((function(e){return(0,Le.jsx)(Me,{to:"/room",className:"card box-shadow transition-primary hover-primary",onClick:function(){return t.setRoom(e.number)},children:(0,Le.jsxs)("article",{className:"flex",children:[(0,Le.jsxs)("div",{className:"padding-bottom-primary position-relative",children:[(0,Le.jsx)("img",{src:n(9977)("./img".concat(e.img)),alt:"castle",className:"card-image border-radius-secondary"}),(0,Le.jsx)("div",{className:"card-number flex round-item",children:(0,Le.jsx)("span",{className:"round-item-content",children:e.number})})]}),(0,Le.jsx)("h2",{className:"text-medium padding-primary card-title flex-secondary ",children:e.title}),(0,Le.jsx)("p",{className:"margin-bottom padding-primary medieval-first-letter",children:"Mal\xe9 hradn\xed n\xe1dvo\u0159\xed sezn\xe1m\xed n\xe1v\u0161t\u011bvn\xedka s architekturou star\xe9ho hradu."}),(0,Le.jsx)("div",{className:"center-text margin-primary ",children:(0,Le.jsx)("button",{className:"text-medium button align-self-primary background-primary font-weight-primary color-primary",children:e.button})})]})},e.number)}))})})]})};var zo=function(){var t=(0,e.useContext)(Pe),n=new b,r=n.getContact(t.language),a=n.getHeader(t.language);return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mo,{header:a.contact}),(0,Le.jsx)("section",{class:"content-container background-secondary padding-secondary box-shadow border-radius-primary",children:(0,Le.jsxs)("div",{class:"contact-box",children:[(0,Le.jsx)("div",{className:"margin-top",children:(0,Le.jsxs)("ul",{class:"contact-list",children:[(0,Le.jsxs)("li",{class:"margin-bottom-primary",children:[(0,Le.jsx)("span",{class:"font-weight-primary text-transform-primary",children:r.address}),(0,Le.jsx)("address",{children:"Z\xe1meck\xe1 4001 464 01 Fr\xfddlant"})]}),(0,Le.jsxs)("li",{class:"margin-bottom-primary",children:[(0,Le.jsx)("span",{class:"font-weight-primary text-transform-primary",children:r.reservation}),(0,Le.jsx)("address",{children:"zamek.rezervace@seznam.cz"})]}),(0,Le.jsxs)("li",{class:"margin-bottom-primary",children:[(0,Le.jsx)("span",{class:"font-weight-primary text-transform-primary",children:r.phone}),(0,Le.jsx)("address",{children:"+420 771 270 150"})]})]})}),(0,Le.jsx)("div",{class:"map-box",children:(0,Le.jsx)("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d80611.4856216651!2d14.978767699106092!3d50.84766716300532!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47092e5555ec4efb%3A0xb81e27103a735e5c!2zWsOhbWVrIEZyw71kbGFudA!5e0!3m2!1scs!2scz!4v1659987294190!5m2!1scs!2scz",style:{border:0},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",class:"map",title:"map"})})]})})]})};var Uo=function(){var t=(0,e.useContext)(Pe),n=new b,r=n.getInfo(t.language),a=n.getHeader(t.language),i=n.getRoomsOverview(t.language),o=n.getUnvisitedRooms(t.language,t.tour,t.room),s=n.getVisitedRooms(t.language,t.tour,t.room);return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mo,{header:a.rooms}),(0,Le.jsx)("div",{class:"content-container background-secondary",children:t.room?(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("div",{className:"card box-shadow transition-primary padding-third margin-bottom-primary",children:(0,Le.jsxs)("div",{className:"flex",children:[(0,Le.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,Le.jsx)(Oo.Z,{className:"icon margin-right-secondary"}),(0,Le.jsx)("span",{className:"font-weight-primary",children:r.info})]}),(0,Le.jsx)("span",{children:r.rooms_overview})]})}),(0,Le.jsx)("h3",{className:"opacity padding-top-primary padding-bottom-primary",children:i.seen}),s.map((function(e){return(0,Le.jsxs)("div",{className:"card flex-secondary align-items-primary margin-bottom-primary box-shadow padding-third opacity",children:[(0,Le.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,Le.jsx)("span",{className:"round-item-content color-primary",children:e.number})}),(0,Le.jsx)("span",{children:e.title})]})})),(0,Le.jsx)("h3",{className:"padding-top-primary padding-bottom-primary",children:i.not_seen}),o.map((function(e){return(0,Le.jsx)(Me,{to:"/room",className:"transition-primary hover-primary card margin-bottom-primary box-shadow padding-third",onClick:function(){return t.setRoom(e.number)},children:(0,Le.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,Le.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,Le.jsx)("span",{className:"round-item-content color-primary",children:e.number})}),(0,Le.jsx)("span",{children:e.title})]})})}))]}):(0,Le.jsx)("p",{children:i.tour_not_selected})})]})},Vo=n(8264),Wo=n(7394),Ho=n(1542);var Go=function(){var t=(0,e.useContext)(Pe),r=new b,a=r.getRoom(t.language,t.tour,t.room),i=r.getTour(t.language,t.tour),o=a.number-1>=1,s=a.number+1<=i.rooms.length,u=0,l=0,c=function(){a.number-1>=1&&t.setRoom(a.number-1)},d=function(){a.number+1<=i.rooms.length&&t.setRoom(a.number+1)};return(0,e.useEffect)((function(){window.scrollTo(0,0)})),(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mo,{header:i.title}),(0,Le.jsxs)("div",{className:"flex content-container background-secondary center-text padding-secondary border-radius-primary box-shadow",onTouchStart:function(e){u=e.setdTouches[0].clientX,l=e.setdTouches[0].clientY},onTouchEnd:function(e){!function(e,t,n,r){Math.abs(n-r)<50&&(e>t+100?d():e+100<t&&c())}(u,e.setdTouches[0].clientX,l,e.setdTouches[0].clientY)},children:[(0,Le.jsxs)("article",{children:[(0,Le.jsx)("div",{className:"flex-secondary",children:(0,Le.jsxs)("div",{className:"margin-right-primary margin-left-primary",children:[(0,Le.jsx)("span",{className:"font-style-primary margin-primary",children:a.number}),(0,Le.jsx)("h2",{className:"text-medium",children:a.title}),(0,Le.jsx)("span",{className:"font-style-primary margin-primary",children:i.title})]})}),(0,Le.jsxs)("div",{className:"margin-top-secondary",children:[(0,Le.jsx)("img",{src:n(9977)("./img".concat(a.img)),alt:"castle",className:"page-image"}),(0,Le.jsx)("audio",{controls:!0,src:"/src/mp3/nachod.mp3",className:"page-audio",children:" Your browser does not support the audio element."})]}),(0,Le.jsx)("p",{className:"start-text margin-top-secondary medieval-first-letter",children:a.text})]}),(0,Le.jsxs)("div",{className:"flex-secondary stick-bottom padding-bottom-primary padding-top-primary background-gradient",children:[(0,Le.jsx)("div",{className:"flex round-item background-fourth margin-right-primary ".concat(o?"":" visibility-hidden"),children:(0,Le.jsx)(Wo.Z,{className:"round-item-content color-primary margin-top-third cursor-primary",onClick:function(){c()}})}),(0,Le.jsx)(Me,{to:"/scan_room",className:"flex round-item background-fourth",children:(0,Le.jsx)(Ho.Z,{className:"round-item-content color-primary margin-top-third cursor-primary"})}),(0,Le.jsx)("div",{className:"flex round-item background-fourth margin-left-primary ".concat(s?"":" visibility-hidden"),children:(0,Le.jsx)(Vo.Z,{className:"round-item-content color-primary margin-top-third cursor-primary",onClick:function(){d()}})})]})]})]})};var Ko=function(){var t=(0,e.useContext)(Pe),r=new b,a=r.getHistory(t.language),i=r.getHeader(t.language),o=r.getInfo(t.language);return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mo,{header:i.history}),(0,Le.jsxs)("div",{className:"content-container",children:[(0,Le.jsx)(Po,{info:o.info,content:o.history_info}),(0,Le.jsx)("div",{className:"grid-secondary padding-top-primary",children:a.map((function(e){return(0,Le.jsx)(Me,{to:e.path,className:"card box-shadow transition-primary hover-primary",children:(0,Le.jsxs)("article",{className:"flex",children:[(0,Le.jsx)("img",{src:n(9977)("./img".concat(e.img)),alt:"castle",className:"card-image padding-bottom-primary border-radius-secondary"}),(0,Le.jsx)("h2",{className:"text-medium padding-primary padding-bottom-primary",children:e.title}),(0,Le.jsx)("p",{className:"margin-bottom padding-primary medieval-first-letter",children:e.card_label}),(0,Le.jsx)("div",{className:"center-text margin-primary",children:(0,Le.jsx)("button",{className:"text-medium button align-self-primary background-primary font-weight-primary color-primary",children:e.button})})]})},e.title)}))})]})]})},Xo=n(5771);var Yo=function(){var t=(0,e.useContext)(Pe),n=new b,r=n.getHistoryOverview(t.language),a=n.getHeader(t.language);return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mo,{header:a.history}),(0,Le.jsx)("div",{className:"flex content-container background-secondary center-text padding-secondary box-shadow border-radius-primary",children:(0,Le.jsxs)("article",{className:"font-size-third ",children:[(0,Le.jsx)("div",{className:"flex-secondary",children:(0,Le.jsxs)("div",{className:"margin-right-primary margin-left-primary",children:[(0,Le.jsx)("span",{className:"font-style-primary margin-primary",children:a.history}),(0,Le.jsx)("h2",{children:r.title}),(0,Le.jsx)("span",{className:"font-style-primary margin-primary",children:r.label})]})}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("img",{src:Xo,alt:"castle",className:"page-image"}),(0,Le.jsx)("audio",{controls:!0,src:"/src/mp3/nachod.mp3",className:"page-audio",children:" Your browser does not support the audio element."})]}),(0,Le.jsx)("p",{className:"start-text margin-top-secondary medieval-first-letter",children:r.description})]})})]})};var qo=function(){var t=(0,e.useContext)(Pe),r=new b,a=r.getHouses(t.language),i=r.getHeader(t.language);return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mo,{header:i.houses}),(0,Le.jsx)("div",{className:"margin-primary content-container",children:(0,Le.jsx)("div",{className:"grid",children:a.map((function(e){return(0,Le.jsx)(Me,{to:"/owners",className:"card box-shadow transition-primary hover-primary",onClick:function(){return t.setHouse(e.title)},children:(0,Le.jsxs)("article",{className:"flex",children:[(0,Le.jsx)("img",{src:n(9977)("./img".concat(e.img)),alt:"castle",className:"card-image padding-bottom-primary border-radius-secondary padding-top-primary"}),(0,Le.jsx)("h2",{className:"text-medium padding-primary padding-bottom-primary",children:e.title}),(0,Le.jsx)("p",{className:"margin-bottom padding-primary medieval-first-letter",children:e.description}),(0,Le.jsx)("div",{className:"center-text",children:(0,Le.jsx)("button",{className:"button align-self-primary margin-primary text-medium background-primary font-weight-primary color-primary",children:e.button})})]})},e.title)}))})})]})};var Zo=function(){var t=(0,e.useContext)(Pe),r=(new b).getOwners(t.language,t.house);return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mo,{header:t.house}),(0,Le.jsx)("div",{className:"content-container",children:(0,Le.jsx)("div",{className:"grid",children:r.map((function(e){return(0,Le.jsx)(Me,{to:"/owner",className:"card box-shadow transition-primary hover-primary",onClick:function(){return t.setOwner(e.number)},children:(0,Le.jsxs)("article",{className:"flex",children:[(0,Le.jsx)("img",{src:n(9977)("./img".concat(e.img)),alt:"castle",className:"card-image border-radius-secondary padding-bottom-primary"}),(0,Le.jsx)("h2",{className:"text-medium padding-primary card-title flex-secondary padding-bottom-primary",children:e.name}),(0,Le.jsx)("p",{className:"margin-bottom padding-primary medieval-first-letter",children:e.label}),(0,Le.jsx)("div",{className:"center-text",children:(0,Le.jsx)("button",{className:"button align-self-primary margin-primary text-medium background-primary font-weight-primary color-primary",children:e.button})})]})},e.number)}))})})]})};var Qo=function(){var t=(0,e.useContext)(Pe),r=new b,a=r.getOwner(t.language,t.house,t.owner),i=r.getHouse(t.language,t.house),o=a.number-1>=1,s=a.number+1<=i.owners.length,u=0,l=0,c=function(){a.number-1>=1&&t.setOwner(a.number-1)},d=function(){a.number+1<=i.owners.length&&t.setOwner(a.number+1)};return(0,e.useEffect)((function(){window.scrollTo(0,0)})),(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mo,{header:t.house}),(0,Le.jsxs)("div",{className:"flex content-container background-secondary center-text padding-secondary box-shadow border-radius-primary",onTouchStart:function(e){u=e.setdTouches[0].clientX,l=e.setdTouches[0].clientY},onTouchEnd:function(e){!function(e,t,n,r){Math.abs(n-r)<50&&(e>t+100?d():e+100<t&&c())}(u,e.setdTouches[0].clientX,l,e.setdTouches[0].clientY)},children:[(0,Le.jsxs)("article",{className:"font-size-third medieval-first-letter",children:[(0,Le.jsx)("div",{className:"flex-secondary",children:(0,Le.jsxs)("div",{className:"margin-right-primary margin-left-primary",children:[(0,Le.jsx)("span",{className:"font-style-primary margin-primary",children:i.title}),(0,Le.jsx)("h2",{children:a.name}),(0,Le.jsx)("span",{className:"font-style-primary margin-primary",children:a.years})]})}),(0,Le.jsx)("div",{className:"margin-top-secondary",children:(0,Le.jsx)("img",{src:n(9977)("./img".concat(a.img)),alt:"castle",className:"page-image"})}),(0,Le.jsx)("p",{className:"start-text margin-top-secondary medieval-first-letter",children:a.text})]}),(0,Le.jsxs)("div",{className:"flex-secondary stick-bottom padding-bottom-primary padding-top-primary background-gradient",children:[(0,Le.jsx)("div",{className:"flex round-item background-fourth margin-right-primary ".concat(o?"":" visibility-hidden"),children:(0,Le.jsx)(Wo.Z,{className:"round-item-content color-primary margin-top-third cursor-primary",onClick:function(){c()}})}),(0,Le.jsx)("div",{className:"flex round-item background-fourth margin-left-primary ".concat(s?"":" visibility-hidden"),children:(0,Le.jsx)(Vo.Z,{className:"round-item-content color-primary margin-top-third cursor-primary",onClick:function(){d()}})})]})]})]})};var Jo=function(){var t=(0,e.useContext)(Pe),n=new b,r=n.getLanguages(),a=n.getHeader(t.language),i=n.getSettings(t.language);return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mo,{header:a.settings}),(0,Le.jsxs)("section",{className:"content-container background-secondary padding-secondary box-shadow border-radius-primary",children:[(0,Le.jsxs)("div",{children:[(0,Le.jsx)("h2",{className:"padding-bottom-primary text-medium",children:i.letter}),(0,Le.jsxs)("div",{onClick:function(){return t.setFontSize("d")},className:"font-size-default flex-secondary align-items-primary box-shadow transition-primary hover-primary padding-third margin-bottom-primary border-radius-primary cursor-primary",children:[(0,Le.jsx)("span",{className:"margin-right-secondary font-weight-primary",children:"Aa"}),(0,Le.jsx)("span",{children:i.default})]}),(0,Le.jsxs)("div",{onClick:function(){return t.setFontSize("m")},className:"font-size-medium flex-secondary align-items-primary box-shadow transition-primary hover-primary padding-third margin-bottom-primary border-radius-primary cursor-primary",children:[(0,Le.jsx)("span",{className:"margin-right-secondary font-weight-primary",children:"Aa"}),(0,Le.jsx)("span",{children:i.medium})]}),(0,Le.jsxs)("div",{onClick:function(){return t.setFontSize("l")},className:"font-size-large flex-secondary align-items-primary box-shadow transition-primary hover-primary padding-third margin-bottom-primary border-radius-primary cursor-primary",children:[(0,Le.jsx)("span",{className:"margin-right-secondary font-weight-primary",children:"Aa"}),(0,Le.jsx)("span",{children:i.large})]})]}),(0,Le.jsxs)("div",{children:[(0,Le.jsx)("h2",{className:"padding-bottom-primary text-medium",children:i.language_label}),r.map((function(e){return(0,Le.jsx)("div",{onClick:function(){return t.setLanguage(e)},className:"flex-secondary align-items-primary box-shadow transition-primary hover-primary padding-third margin-bottom-primary border-radius-primary cursor-primary",children:(0,Le.jsx)("span",{className:"text-transform-primary font-weight-primary",children:e})})}))]})]})]})},$o=n(3229),es=n(9065),ts=n(1334),ns=n(7122),rs=n(3742),as=n(2237);var is=function(){var t=(0,e.useContext)(Pe),n=new b,r=n.getHeader(t.language),a=n.getOther(t.language);return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mo,{header:r.menu}),(0,Le.jsxs)("div",{className:"content-container",children:[(0,Le.jsx)(Me,{to:"/history",className:"card box-shadow transition-primary hover-primary padding-third margin-bottom-primary",children:(0,Le.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,Le.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,Le.jsx)(rs.Z,{className:"round-item-content color-primary"})}),(0,Le.jsx)("span",{children:a.history})]})}),(0,Le.jsx)(Me,{to:"/gallery",className:"card box-shadow transition-primary hover-primary padding-third margin-bottom-primary",children:(0,Le.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,Le.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,Le.jsx)(ts.Z,{className:"round-item-content color-primary"})}),(0,Le.jsx)("span",{children:a.gallery})]})}),(0,Le.jsx)(Me,{to:"/image_recognition",className:"card box-shadow transition-primary hover-primary padding-third margin-bottom-primary",children:(0,Le.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,Le.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,Le.jsx)(as.Z,{className:"round-item-content color-primary"})}),(0,Le.jsx)("span",{children:a.image_recognition})]})}),(0,Le.jsx)(Me,{to:"/scan_room",className:"card box-shadow transition-primary hover-primary padding-third margin-bottom-primary",children:(0,Le.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,Le.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,Le.jsx)(Ho.Z,{className:"round-item-content color-primary"})}),(0,Le.jsx)("span",{children:a.scan_room})]})}),(0,Le.jsx)(Me,{to:"/where_to_next",className:"card box-shadow transition-primary hover-primary padding-third margin-bottom-primary",children:(0,Le.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,Le.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,Le.jsx)(es.Z,{className:"round-item-content color-primary"})}),(0,Le.jsx)("span",{children:a.where_to_next})]})}),(0,Le.jsx)(Me,{to:"/contact",className:"card box-shadow transition-primary hover-primary padding-third margin-bottom-primary",children:(0,Le.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,Le.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,Le.jsx)($o.Z,{className:"round-item-content color-primary"})}),(0,Le.jsx)("span",{children:a.contact})]})}),(0,Le.jsx)(Me,{to:"/settings",className:"card box-shadow transition-primary hover-primary padding-third margin-bottom-primary",children:(0,Le.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,Le.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,Le.jsx)(ns.Z,{className:"round-item-content color-primary"})}),(0,Le.jsx)("span",{children:a.settings})]})}),(0,Le.jsx)(Me,{to:"/about_app",className:"card box-shadow transition-primary hover-primary padding-third margin-bottom-primary",children:(0,Le.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,Le.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,Le.jsx)(Oo.Z,{className:"round-item-content color-primary"})}),(0,Le.jsx)("span",{children:a.about_app})]})})]})]})},os=n(5920);var ss=function(){var t=(0,e.useContext)(Pe),n=new b,r=n.getHeader(t.language),a=n.getAboutApp(t.language);return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mo,{header:r.about_app}),(0,Le.jsxs)("section",{class:"content-container background-secondary padding-secondary box-shadow border-radius-primary",children:[(0,Le.jsx)("div",{className:"flex align-items-primary",children:(0,Le.jsx)("div",{className:"margin-top-secondary",children:(0,Le.jsx)("img",{src:os,alt:"logo",className:"page-image"})})}),(0,Le.jsx)("div",{class:"contact-box",children:(0,Le.jsx)("div",{className:"margin-top",children:(0,Le.jsxs)("ul",{class:"contact-list",children:[(0,Le.jsxs)("li",{class:"margin-bottom-primary flex",children:[(0,Le.jsx)("span",{class:"font-weight-primary text-transform-primary",children:a.for_label}),(0,Le.jsx)("span",{children:a.for})]}),(0,Le.jsxs)("li",{class:"margin-bottom-primary flex",children:[(0,Le.jsx)("span",{class:"font-weight-primary text-transform-primary",children:a.author_label}),(0,Le.jsx)("span",{children:a.author})]}),(0,Le.jsxs)("li",{class:"margin-bottom-primary flex",children:[(0,Le.jsx)("span",{class:"font-weight-primary text-transform-primary",children:a.collaboration_label}),(0,Le.jsx)("span",{children:a.collaboration})]}),(0,Le.jsxs)("li",{class:"margin-bottom-primary flex",children:[(0,Le.jsx)("span",{class:"font-weight-primary text-transform-primary",children:a.photos_label}),(0,Le.jsx)("span",{children:a.photos})]}),(0,Le.jsxs)("li",{class:"margin-bottom-primary flex",children:[(0,Le.jsx)("span",{class:"font-weight-primary text-transform-primary",children:a.logo_label}),(0,Le.jsx)("span",{children:a.logo})]})]})})})]})]})},us=n(6090);var ls=function(){var t=(0,e.useContext)(Pe),n=new b,r=n.getHeader(t.language),a=n.getInfo(t.language),i=n.getWhereToNext(t.language);return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mo,{header:r.where_to_next}),(0,Le.jsxs)("div",{className:"content-container",children:[(0,Le.jsx)(Po,{info:a.info,content:a.where_to_info}),(0,Le.jsx)("div",{className:"grid padding-top-primary",children:i.places.map((function(e){return(0,Le.jsx)("a",{href:e.url,className:"card box-shadow transition-primary hover-primary",children:(0,Le.jsxs)("article",{className:"flex",children:[(0,Le.jsx)("div",{className:"padding-bottom-primary position-relative",children:(0,Le.jsx)("img",{src:us,alt:"castle",className:"card-image border-radius-secondary"})}),(0,Le.jsx)("h2",{className:"padding-primary card-title flex-secondary text-medium padding-bottom-primary",children:e.title}),(0,Le.jsx)("p",{className:"margin-bottom padding-primary medieval-first-letter",children:e.description}),(0,Le.jsx)("div",{className:"center-text margin-primary",children:(0,Le.jsx)("a",{href:e.url,className:"text-medium button align-self-primary background-primary font-weight-primary color-primary",children:i.button})})]})},e.title)}))})]})]})};var cs=function(){var t=(0,e.useContext)(Pe),n=new b,r=n.getTours(t.language),a=n.getHeader(t.language);return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mo,{header:a.gallery}),(0,Le.jsx)("div",{className:"content-container",children:(0,Le.jsx)("div",{className:"grid-secondary",children:r.map((function(e){return(0,Le.jsx)(Me,{to:"/gallery_rooms",className:"card box-shadow transition-primary hover-primary",children:(0,Le.jsxs)("div",{className:"flex",onClick:function(){return t.setGalleryTour(e.tour_id)},children:[(0,Le.jsx)("img",{src:Xo,alt:"castle",className:"card-image border-radius-primary",loading:"lazy"}),(0,Le.jsx)("h2",{className:"text-medium gallery-label margin-top-fourth color-primary padding-third",children:e.title})]})},e.title)}))})})]})};var ds=function(){var t=(0,e.useContext)(Pe),r=new b,a=r.getRooms(t.language,t.gallery_tour),i=r.getTour(t.language,t.gallery_tour);return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mo,{header:i.title}),(0,Le.jsx)("div",{className:"content-container",children:(0,Le.jsx)("div",{className:"grid",children:a.map((function(e){return(0,Le.jsx)(Me,{to:"/gallery_rooms",className:"card box-shadow transition-primary hover-primary",children:(0,Le.jsxs)("div",{className:"flex",children:[(0,Le.jsx)("img",{src:n(9977)("./img".concat(e.img)),alt:"castle",className:"card-image border-radius-primary"}),(0,Le.jsx)("h2",{className:"text-medium gallery-label margin-top-fourth color-primary padding-third",children:e.title})]})},e.title)}))})})]})};var hs,fs=function(){var t=he().pathname;return(0,e.useEffect)((function(){window.scrollTo(0,0)}),[t]),null};!function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(hs||(hs={}));var ps,ms,vs=new Map([[hs.QR_CODE,"QR_CODE"],[hs.AZTEC,"AZTEC"],[hs.CODABAR,"CODABAR"],[hs.CODE_39,"CODE_39"],[hs.CODE_93,"CODE_93"],[hs.CODE_128,"CODE_128"],[hs.DATA_MATRIX,"DATA_MATRIX"],[hs.MAXICODE,"MAXICODE"],[hs.ITF,"ITF"],[hs.EAN_13,"EAN_13"],[hs.EAN_8,"EAN_8"],[hs.PDF_417,"PDF_417"],[hs.RSS_14,"RSS_14"],[hs.RSS_EXPANDED,"RSS_EXPANDED"],[hs.UPC_A,"UPC_A"],[hs.UPC_E,"UPC_E"],[hs.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function gs(e){return Object.values(hs).includes(e)}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"}(ps||(ps={})),function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"}(ms||(ms={}));var ys,bs=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[ms.SCAN_TYPE_CAMERA,ms.SCAN_TYPE_FILE],e}(),ws=function(){function e(e,t){this.format=e,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!vs.has(t))throw t+" not in html5QrcodeSupportedFormatsTextMap";return new e(t,vs.get(t))},e}(),xs=function(){function e(){}return e.createFromText=function(e){return{decodedText:e,result:{text:e}}},e.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},e}();!function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"}(ys||(ys={}));var ks=function(){function e(){}return e.createFrom=function(e){return{errorMessage:e,type:ys.UNKWOWN_ERROR}},e}(),Cs=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}();function Es(e){return"undefined"===typeof e||null===e}var Ss,_s=function(){function e(){}return e.codeParseError=function(e){return"QR code parse error, error = "+e},e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = "+e},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e}(),As=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(e){return"Last Match: "+e},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),Is=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),Ts=function(){function e(){}return e.isMediaStreamConstraintsValid=function(e,t){if("object"!==typeof e){var n=typeof e;return t.logError("videoConstraints should be of type object, the object passed is of type "+n+".",!0),!1}for(var r=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),a=0,i=Object.keys(e);a<i.length;a++){var o=i[a];if(r.has(o))return t.logError(o+" is not supported videoConstaints.",!0),!1}return!0},e}(),Rs=n(3484),Ns=function(){function e(e,t,n){if(this.formatMap=new Map([[hs.QR_CODE,Rs.BarcodeFormat.QR_CODE],[hs.AZTEC,Rs.BarcodeFormat.AZTEC],[hs.CODABAR,Rs.BarcodeFormat.CODABAR],[hs.CODE_39,Rs.BarcodeFormat.CODE_39],[hs.CODE_93,Rs.BarcodeFormat.CODE_93],[hs.CODE_128,Rs.BarcodeFormat.CODE_128],[hs.DATA_MATRIX,Rs.BarcodeFormat.DATA_MATRIX],[hs.MAXICODE,Rs.BarcodeFormat.MAXICODE],[hs.ITF,Rs.BarcodeFormat.ITF],[hs.EAN_13,Rs.BarcodeFormat.EAN_13],[hs.EAN_8,Rs.BarcodeFormat.EAN_8],[hs.PDF_417,Rs.BarcodeFormat.PDF_417],[hs.RSS_14,Rs.BarcodeFormat.RSS_14],[hs.RSS_EXPANDED,Rs.BarcodeFormat.RSS_EXPANDED],[hs.UPC_A,Rs.BarcodeFormat.UPC_A],[hs.UPC_E,Rs.BarcodeFormat.UPC_E],[hs.UPC_EAN_EXTENSION,Rs.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Rs)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var r=this.createZXingFormats(e),a=new Map;a.set(Rs.DecodeHintType.POSSIBLE_FORMATS,r),a.set(Rs.DecodeHintType.TRY_HARDER,!1),this.hints=a}return e.prototype.decodeAsync=function(e){var t=this;return new Promise((function(n,r){try{n(t.decode(e))}catch(a){r(a)}}))},e.prototype.decode=function(e){var t=new Rs.MultiFormatReader(this.verbose,this.hints),n=new Rs.HTMLCanvasElementLuminanceSource(e),r=new Rs.BinaryBitmap(new Rs.HybridBinarizer(n)),a=t.decode(r);return{text:a.text,format:ws.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach((function(t,n,r){e.set(t,n)})),e},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have "+e;return this.reverseFormatMap.get(e)},e.prototype.createZXingFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var a=r[n];this.formatMap.has(a)?t.push(this.formatMap.get(a)):this.logger.logError(a+" is not supported byZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),Ds=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(Nu){i(Nu)}}function s(e){try{u(r.throw(e))}catch(Nu){i(Nu)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},Ms=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(Nu){i=[6,Nu],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Os=function(){function e(t,n,r){if(this.formatMap=new Map([[hs.QR_CODE,"qr_code"],[hs.AZTEC,"aztec"],[hs.CODABAR,"codabar"],[hs.CODE_39,"code_39"],[hs.CODE_93,"code_93"],[hs.CODE_128,"code_128"],[hs.DATA_MATRIX,"data_matrix"],[hs.ITF,"itf"],[hs.EAN_13,"ean_13"],[hs.EAN_8,"ean_8"],[hs.PDF_417,"pdf417"],[hs.UPC_A,"upc_a"],[hs.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&"undefined"!==typeof new BarcodeDetector({formats:["qr_code"]})},e.prototype.decodeAsync=function(e){return Ds(this,void 0,void 0,(function(){var t,n;return Ms(this,(function(r){switch(r.label){case 0:return[4,this.detector.detect(e)];case 1:if(!(t=r.sent())||0===t.length)throw"No barcode or QR code detected.";return[2,{text:(n=this.selectLargestBarcode(t)).rawValue,format:ws.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}}))}))},e.prototype.selectLargestBarcode=function(e){for(var t=null,n=0,r=0,a=e;r<a.length;r++){var i=a[r],o=i.boundingBox.width*i.boundingBox.height;o>n&&(n=o,t=i)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var a=r[n];this.formatMap.has(a)?t.push(this.formatMap.get(a)):this.logger.warn(a+" is not supported byBarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have "+e;return this.reverseFormatMap.get(e)},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach((function(t,n,r){e.set(t,n)})),e},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Ps=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(Nu){i(Nu)}}function s(e){try{u(r.throw(e))}catch(Nu){i(Nu)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},Fs=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(Nu){i=[6,Nu],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ls=function(){function e(e,t,n,r){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,t&&Os.isSupported()?(this.primaryDecoder=new Os(e,n,r),this.secondaryDecoder=new Ns(e,n,r)):this.primaryDecoder=new Ns(e,n,r)}return e.prototype.decodeAsync=function(e){return Ps(this,void 0,void 0,(function(){var t;return Fs(this,(function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}}))}))},e.prototype.decodeRobustlyAsync=function(e){return Ps(this,void 0,void 0,(function(){var t,n;return Fs(this,(function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,r.sent()];case 3:if(n=r.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}}))}))},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,n=this.executionResults;t<n.length;t++){e+=n[t]}var r=e/this.executionResults.length;console.log(r+" ms for "+this.executionResults.length+" last runs."),this.executions=0,this.executionResults=[]}},e}(),Bs=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),js=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(Nu){i(Nu)}}function s(e){try{u(r.throw(e))}catch(Nu){i(Nu)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},zs=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(Nu){i=[6,Nu],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Us=function(){function e(e,t){this.name=e,this.track=t}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},e.prototype.value=function(){var e=this.track.getSettings();return this.name in e?e[this.name]:null},e}(),Vs=function(e){function t(t){return e.call(this,"zoom",t)||this}return Bs(t,e),t}(function(e){function t(t,n){return e.call(this,t,n)||this}return Bs(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities()[this.name];return{min:e.min,max:e.max,step:e.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error(this.name+" capability not supported")},t}(Us)),Ws=function(e){function t(t){return e.call(this,"torch",t)||this}return Bs(t,e),t}(Us),Hs=function(){function e(e){this.track=e}return e.prototype.zoomFeature=function(){return new Vs(this.track)},e.prototype.torchFeature=function(){return new Ws(this.track)},e}(),Gs=function(){function e(e,t,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return e.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width=e+"px",t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};this.surface.addEventListener("playing",(function t(){var n=e.surface.clientWidth,r=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,r),e.surface.removeEventListener("playing",t)})),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,a){return js(this,void 0,void 0,(function(){var i,o;return zs(this,(function(s){switch(s.label){case 0:return i=new e(t,n,a),r.aspectRatio?(o={aspectRatio:r.aspectRatio},[4,i.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:s.sent(),s.label=2;case 2:return i.setupSurface(),[2,i]}}))}))},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(e){this.failIfClosed();var t=this;this.surface.addEventListener("playing",(function n(){setTimeout(e,200),t.surface.removeEventListener("playing",n)})),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(e){return js(this,void 0,void 0,(function(){return zs(this,(function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]}))}))},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise((function(t,n){var r=e.mediaStream.getVideoTracks().length,a=0;e.mediaStream.getVideoTracks().forEach((function(n){e.mediaStream.removeTrack(n),n.stop(),++a>=r&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())}))}))},e.prototype.getCapabilities=function(){return new Hs(this.getFirstTrackOrFail())},e}(),Ks=function(){function e(e){this.mediaStream=e}return e.prototype.render=function(e,t,n){return js(this,void 0,void 0,(function(){return zs(this,(function(r){return[2,Gs.create(e,this.mediaStream,t,n)]}))}))},e.create=function(t){return js(this,void 0,void 0,(function(){var n;return zs(this,(function(r){switch(r.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return[2,new e(r.sent())]}}))}))},e}(),Xs=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(Nu){i(Nu)}}function s(e){try{u(r.throw(e))}catch(Nu){i(Nu)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},Ys=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(Nu){i=[6,Nu],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},qs=function(){function e(){}return e.failIfNotSupported=function(){return Xs(this,void 0,void 0,(function(){return Ys(this,(function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]}))}))},e.prototype.create=function(e){return Xs(this,void 0,void 0,(function(){return Ys(this,(function(t){return[2,Ks.create(e)]}))}))},e}(),Zs=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(Nu){i(Nu)}}function s(e){try{u(r.throw(e))}catch(Nu){i(Nu)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},Qs=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(Nu){i=[6,Nu],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Js=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=_s.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=_s.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},e.getCamerasFromMediaDevices=function(){return Zs(this,void 0,void 0,(function(){var e,t,n,r,a,i,o;return Qs(this,(function(s){switch(s.label){case 0:return e=function(e){for(var t=0,n=e.getVideoTracks();t<n.length;t++){var r=n[t];r.enabled=!1,r.stop(),e.removeTrack(r)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=s.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=s.sent(),r=[],a=0,i=n;a<i.length;a++)"videoinput"===(o=i[a]).kind&&r.push({id:o.deviceId,label:o.label});return e(t),[2,r]}}))}))},e.getCamerasFromMediaStreamTrack=function(){return new Promise((function(e,t){MediaStreamTrack.getSources((function(t){for(var n=[],r=0,a=t;r<a.length;r++){var i=a[r];"video"===i.kind&&n.push({id:i.id,label:i.label})}e(n)}))}))},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"}(Ss||(Ss={}));var $s,eu=function(){function e(){this.state=Ss.NOT_STARTED,this.onGoingTransactionNewState=Ss.UNKNOWN}return e.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},e.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Ss.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ss.UNKNOWN,this.directTransition(e)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ss.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ss.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ss.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(e){switch(this.state){case Ss.UNKNOWN:throw"Transition from unknown is not allowed";case Ss.NOT_STARTED:this.failIfNewStateIs(e,[Ss.PAUSED]);case Ss.SCANNING:case Ss.PAUSED:}},e.prototype.failIfNewStateIs=function(e,t){for(var n=0,r=t;n<r.length;n++){if(e===r[n])throw"Cannot transition from "+this.state+" to "+e}},e}(),tu=function(){function e(e){this.stateManager=e}return e.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},e.prototype.directTransition=function(e){this.stateManager.directTransition(e)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Ss.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Ss.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ss.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Ss.PAUSED},e}(),nu=function(){function e(){}return e.create=function(){return new tu(new eu)},e}(),ru=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),au=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ru(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(bs),iu=function(){function e(e,t){this.logger=t,this.fps=au.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=au.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Ts.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Es(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),ou=function(){function e(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id="+e+" not found";var n;this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(n=t,this.verbose=!0===n.verbose,n.experimentalFeatures),this.logger=new Cs(this.verbose),this.qrcode=new Ls(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=nu.create()}return e.prototype.start=function(e,t,n,r){var a,i=this;if(!e)throw"cameraIdOrConfig is required";if(!n||"function"!=typeof n)throw"qrCodeSuccessCallback is required and should be a function.";a=r||(this.verbose?this.logger.log:function(){});var o=iu.create(t,this.logger);this.clearElement();var s=!1;o.videoConstraints&&(o.isMediaStreamConstraintsValid()?s=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var u=s,l=document.getElementById(this.elementId);l.clientWidth?l.clientWidth:au.DEFAULT_WIDTH;l.style.position="relative",this.shouldScan=!0,this.element=l;var c=this,d=this.stateManagerProxy.startTransition(Ss.SCANNING);return new Promise((function(t,r){var s=u?o.videoConstraints:c.createVideoConstraints(e);if(!s)return d.cancel(),void r("videoConstraints should be defined");var l={};u&&!o.aspectRatio||(l.aspectRatio=o.aspectRatio);var h={onRenderSurfaceReady:function(e,t){c.setupUi(e,t,o),c.isScanning=!0,c.foreverScan(o,n,a)}};qs.failIfNotSupported().then((function(e){e.create(s).then((function(e){return e.render(i.element,l,h).then((function(e){c.renderedCamera=e,d.execute(),t(null)})).catch((function(e){d.cancel(),r(e)}))})).catch((function(e){d.cancel(),r(_s.errorGettingUserMedia(e))}))})).catch((function(e){d.cancel(),r(_s.cameraStreamingNotSupported())}))}))},e.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ss.PAUSED),this.showPausedState(),(Es(e)||!0!==e)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(Ss.SCANNING),e.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume((function(){t()})):t()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Ss.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=this;return this.renderedCamera.close().then((function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),function(){if(e.element){var t=document.getElementById(au.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}}(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),t.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()}))},e.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then((function(e){return e.decodedText}))},e.prototype.scanFileV2=function(e,t){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Es(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise((function(r,a){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var i=new Image;i.onload=function(){var e=i.width,o=i.height,s=document.getElementById(n.elementId),u=s.clientWidth?s.clientWidth:au.DEFAULT_WIDTH,l=Math.max(s.clientHeight?s.clientHeight:o,au.FILE_SCAN_MIN_HEIGHT),c=n.computeCanvasDrawConfig(e,o,u,l);if(t){var d=n.createCanvasElement(u,l,"qr-canvas-visible");d.style.display="inline-block",s.appendChild(d);var h=d.getContext("2d");if(!h)throw"Unable to get 2d context from canvas";h.canvas.width=u,h.canvas.height=l,h.drawImage(i,0,0,e,o,c.x,c.y,c.width,c.height)}var f=au.FILE_SCAN_HIDDEN_CANVAS_PADDING,p=Math.max(i.width,c.width),m=Math.max(i.height,c.height),v=p+2*f,g=m+2*f,y=n.createCanvasElement(v,g);s.appendChild(y);var b=y.getContext("2d");if(!b)throw"Unable to get 2d context from canvas";b.canvas.width=v,b.canvas.height=g,b.drawImage(i,0,0,e,o,f,f,p,m);try{n.qrcode.decodeRobustlyAsync(y).then((function(e){r(xs.createFromQrcodeResult(e))})).catch(a)}catch(w){a("QR code parse error, error = "+w)}},i.onerror=a,i.onabort=a,i.onstalled=a,i.onsuspend=a,i.src=URL.createObjectURL(e)}))},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return Js.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(e){if(!e)throw"videoConstaints is required argument.";if(!Ts.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(e){var t=[hs.QR_CODE,hs.AZTEC,hs.CODABAR,hs.CODE_39,hs.CODE_93,hs.CODE_128,hs.DATA_MATRIX,hs.MAXICODE,hs.ITF,hs.EAN_13,hs.EAN_8,hs.PDF_417,hs.RSS_14,hs.RSS_EXPANDED,hs.UPC_A,hs.UPC_E,hs.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e)return t;if(!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],r=0,a=e.formatsToSupport;r<a.length;r++){var i=a[r];gs(i)?n.push(i):this.logger.warn("Invalid format: "+i+" passed in config, ignoring.")}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Es(e))return!0;if(!Es(e.useBarCodeDetectorIfSupported))return!1!==e.useBarCodeDetectorIfSupported;if(Es(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return!!Es(t.useBarCodeDetectorIfSupported)||!1!==t.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(e,t,n){var r=this,a=n.qrbox;this.validateQrboxConfig(a);var i,o=this.toQrdimensions(e,t,a),s=function(e){if(e<au.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is "+au.MIN_QR_BOX_SIZE+"px."};s(o.width),s(o.height),o.width=((i=o.width)>e&&(r.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),i=e),i)},e.prototype.validateQrboxConfig=function(e){if("number"!==typeof e&&"function"!==typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(e,t,n){if("number"===typeof n)return{width:n,height:n};if("function"===typeof n)try{return n(e,t)}catch(r){throw new Error("qrbox config was passed as a function but it failed with unknown error"+r)}return n},e.prototype.setupUi=function(e,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,n);var r=Es(n.qrbox)?{width:e,height:t}:n.qrbox;this.validateQrboxConfig(r);var a=this.toQrdimensions(e,t,r);a.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var i=n.isShadedBoxEnabled()&&a.height<=t,o={x:0,y:0,width:e,height:t},s=i?this.getShadedRegionBounds(e,t,a):o,u=this.createCanvasElement(s.width,s.height),l=u.getContext("2d",{willReadFrequently:!0});l.canvas.width=s.width,l.canvas.height=s.height,this.element.append(u),i&&this.possiblyInsertShadingElement(this.element,e,t,a),this.createScannerPausedUiElement(this.element),this.qrRegion=s,this.context=l,this.canvasElement=u},e.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText="Scanner paused",t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="yellow",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(e,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then((function(t){return e(t.text,xs.createFromQrcodeResult(t)),n.possiblyUpdateShaders(!0),!0})).catch((function(e){n.possiblyUpdateShaders(!1);var r=_s.codeParseError(e);return t(r,ks.createFrom(r)),!1}))},e.prototype.foreverScan=function(e,t,n){var r=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),i=a.videoWidth/a.clientWidth,o=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var s=this.qrRegion.width*i,u=this.qrRegion.height*o,l=this.qrRegion.x*i,c=this.qrRegion.y*o;this.context.drawImage(a,l,c,s,u,0,0,this.qrRegion.width,this.qrRegion.height);var d=function(){r.foreverScanTimeout=setTimeout((function(){r.foreverScan(e,t,n)}),r.getTimeoutFps(e.fps))};this.scanContext(t,n).then((function(a){a||!0===e.disableFlip?d():(r.context.translate(r.context.canvas.width,0),r.context.scale(-1,1),r.scanContext(t,n).finally((function(){d()})))})).catch((function(e){r.logger.logError("Error happend while scanning context",e),d()}))}},e.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",n="deviceId",r={user:!0,environment:!0},a="exact",i=function(e){if(e in r)return!0;throw"config has invalid 'facingMode' value = '"+e+"'"},o=Object.keys(e);if(1!==o.length)throw"'cameraIdOrConfig' object should have exactly 1 key, if passed as an object, found "+o.length+" keys";var s=Object.keys(e)[0];if(s!==t&&s!==n)throw"Only '"+t+"' and '"+n+"'  are supported for 'cameraIdOrConfig'";if(s!==t){var u=e.deviceId;if("string"==typeof u)return{deviceId:u};if("object"==typeof u){if(a in u)return{deviceId:{exact:u[""+a]}};throw"'deviceId' should be string or object with exact as key."}throw"Invalid type of 'deviceId' = "+typeof u}var l=e.facingMode;if("string"==typeof l){if(i(l))return{facingMode:l}}else{if("object"!=typeof l)throw"Invalid type of 'facingMode' = "+typeof l;if(!(a in l))throw"'facingMode' should be string or object with exact as key.";if(i(l[""+a]))return{facingMode:{exact:l[""+a]}}}}throw"Invalid type of 'cameraIdOrConfig' = "+typeof e},e.prototype.computeCanvasDrawConfig=function(e,t,n,r){if(e<=n&&t<=r)return{x:(n-e)/2,y:(r-t)/2,width:e,height:t};var a=e,i=t;return e>n&&(t*=n/e,e=n),t>r&&(e*=r/t,t=r),this.logger.log("Image downsampled from "+a+"X"+i+" to "+e+"X"+t+"."),this.computeCanvasDrawConfig(e,t,n,r)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},e.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach((function(t){t.style.backgroundColor=e?au.BORDER_SHADER_MATCH_COLOR:au.BORDER_SHADER_DEFAULT_COLOR})),this.qrMatch=e)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(e,t,n){var r=e,a=t,i=document.createElement("canvas");return i.style.width=r+"px",i.style.height=a+"px",i.style.display="none",i.id=Es(n)?"qr-canvas":n,i},e.prototype.getShadedRegionBounds=function(e,t,n){if(n.width>e||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(e,t,n,r){if(!(t-r.width<1||n-r.height<1)){var a=document.createElement("div");a.style.position="absolute";var i=(t-r.width)/2,o=(n-r.height)/2;if(a.style.borderLeft=i+"px solid rgba(0, 0, 0, 0.48)",a.style.borderRight=i+"px solid rgba(0, 0, 0, 0.48)",a.style.borderTop=o+"px solid rgba(0, 0, 0, 0.48)",a.style.borderBottom=o+"px solid rgba(0, 0, 0, 0.48)",a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id=""+au.SHADED_REGION_ELEMENT_ID,t-r.width<11||n-r.height<11)this.hasBorderShaders=!1;else{var s=40;this.insertShaderBorders(a,s,5,-5,null,0,!0),this.insertShaderBorders(a,s,5,-5,null,0,!1),this.insertShaderBorders(a,s,5,null,-5,0,!0),this.insertShaderBorders(a,s,5,null,-5,0,!1),this.insertShaderBorders(a,5,45,-5,null,-5,!0),this.insertShaderBorders(a,5,45,null,-5,-5,!0),this.insertShaderBorders(a,5,45,-5,null,-5,!1),this.insertShaderBorders(a,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}e.append(a)}},e.prototype.insertShaderBorders=function(e,t,n,r,a,i,o){var s=document.createElement("div");s.style.position="absolute",s.style.backgroundColor=au.BORDER_SHADER_DEFAULT_COLOR,s.style.width=t+"px",s.style.height=n+"px",null!==r&&(s.style.top=r+"px"),null!==a&&(s.style.bottom=a+"px"),o?s.style.left=i+"px":s.style.right=i+"px",this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(s),e.appendChild(s)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(e){return 1e3/e},e}(),su="data:image/svg+xml;base64,",uu=su+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",lu=su+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",cu=su+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",du=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),hu=function(){function e(){this.data=du.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},e.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=du.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),fu=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Is.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var n=document.createElement("br"),r=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(r);var a=document.createElement("a");a.innerText=Is.reportIssues(),a.href="https://github.com/mebjas/html5-qrcode/issues",a.target="new",a.style.color="white",this.infoDiv.appendChild(a),e.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),pu=function(){function e(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=cu,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(e){return t.onHoverIn()},this.infoIcon.onmouseout=function(e){return t.onHoverOut()},this.infoIcon.onclick=function(e){return t.onClick()},e.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=cu,this.infoIcon.style.opacity="0.6")},e}(),mu=function(){function e(){var e=this;this.infoDiv=new fu,this.infoIcon=new pu((function(){e.infoDiv.show()}),(function(){e.infoDiv.hide()}))}return e.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},e}(),vu=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(Nu){i(Nu)}}function s(e){try{u(r.throw(e))}catch(Nu){i(Nu)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},gu=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(Nu){i=[6,Nu],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},yu=function(){function e(){}return e.hasPermissions=function(){return vu(this,void 0,void 0,(function(){var e,t,n,r;return gu(this,(function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=a.sent(),t=0,n=e;t<n.length;t++)if("videoinput"===(r=n[t]).kind&&r.label)return[2,!0];return[2,!1]}}))}))},e}(),bu=function(){function e(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(e){return e===ms.SCAN_TYPE_CAMERA},e.isFileScanType=function(e){return e===ms.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(e){if(!e||0===e.length)return bs.DEFAULT_SUPPORTED_SCAN_TYPE;var t=bs.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max "+t+" values expected for supportedScanTypes";for(var n=0,r=e;n<r.length;n++){var a=r[n];if(!bs.DEFAULT_SUPPORTED_SCAN_TYPE.includes(a))throw"Unsupported scan type "+a}return e},e}(),wu=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),xu=function(){function e(){}return e.createElement=function(e,t){var n=document.createElement(e);return n.id=t,n.classList.add(wu.ALL_ELEMENT_CLASS),"button"===e&&n.setAttribute("type","button"),n},e}(),ku=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(Nu){i(Nu)}}function s(e){try{u(r.throw(e))}catch(Nu){i(Nu)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},Cu=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(Nu){i=[6,Nu],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Eu=function(){function e(e,t,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=n}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return ku(this,void 0,void 0,(function(){var e,t;return Cu(this,(function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=n.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}}))}))},e.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?As.torchOffButton():As.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(e,t){var n=e?As.torchOnFailedMessage():As.torchOffFailedMessage();t&&(n+="; Error = "+t),this.onTorchActionFailureCallback(n)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),Su=function(){function e(e,t){this.onTorchActionFailureCallback=t,this.torchButton=xu.createElement("button",wu.TORCH_BUTTON_ID),this.torchController=new Eu(e,this,t)}return e.prototype.render=function(e,t){var n=this;this.torchButton.innerText=As.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var r=this;this.torchButton.addEventListener("click",(function(e){return ku(n,void 0,void 0,(function(){return Cu(this,(function(e){switch(e.label){case 0:return[4,r.torchController.flipState()];case 1:return e.sent(),r.torchController.isTorchEnabled()?(r.torchButton.classList.remove(wu.TORCH_BUTTON_CLASS_TORCH_OFF),r.torchButton.classList.add(wu.TORCH_BUTTON_CLASS_TORCH_ON)):(r.torchButton.classList.remove(wu.TORCH_BUTTON_CLASS_TORCH_ON),r.torchButton.classList.add(wu.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}}))}))})),e.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(e){this.torchController=new Eu(e,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(e){this.torchButton.innerText=e},e.prototype.reset=function(){this.torchButton.innerText=As.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,a){var i=new e(n,a);return i.render(t,r),i},e}(),_u=function(){function e(e,t,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var r=document.createElement("label");r.setAttribute("for",this.getFileScanInputId()),r.style.display="inline-block",this.fileBasedScanRegion.appendChild(r),this.fileSelectionButton=xu.createElement("button",wu.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",(function(e){r.click()})),r.append(this.fileSelectionButton),this.fileScanInput=xu.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",r.appendChild(this.fileScanInput);var a=this;this.fileScanInput.addEventListener("change",(function(e){if(null!=e&&null!=e.target){var t=e.target;if(!t.files||0!==t.files.length){var r=t.files[0],i=r.name;a.setImageNameToButton(i),n(r)}}}));var i=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(i),this.fileBasedScanRegion.addEventListener("dragenter",(function(e){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()})),this.fileBasedScanRegion.addEventListener("dragleave",(function(e){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()})),this.fileBasedScanRegion.addEventListener("dragover",(function(e){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()})),this.fileBasedScanRegion.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault(),a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){var r=t.files;if(!r||0===r.length)return;for(var o=!1,s=0;s<r.length;++s){var u=r.item(s);if(u){if(u.type.match(/image.*/)){o=!0;var l=u.name;a.setImageNameToButton(l),n(u),i.innerText=As.dragAndDropMessage();break}}}o||(i.innerText=As.dragAndDropMessageOnlyImages())}}))}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=As.dragAndDropMessage(),e.style.fontWeight="400",e},e.prototype.setImageNameToButton=function(e){if(e.length>20){var t=e.substring(0,8),n=e.length,r=e.substring(n-8,n);e=t+"...."+r}var a=As.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=a},e.prototype.setInitialValueToButton=function(){var e=As.fileSelectionChooseImage()+" - "+As.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){return new e(t,n,r)},e}(),Au=function(){function e(e){this.selectElement=xu.createElement("select",wu.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return e.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var n=this.cameras.length;if(0===n)throw new Error("No cameras found");if(1===n)t.style.display="none";else{var r=As.selectCamera();t.innerText=r+" ("+this.cameras.length+")  "}for(var a=1,i=0,o=this.cameras;i<o.length;i++){var s=o[i],u=s.id,l=null==s.label?u:s.label;l&&""!==l||(l=[As.anonymousCameraPrefix(),a++].join(" "));var c=document.createElement("option");c.value=u,c.innerText=l,this.options.push(c),this.selectElement.appendChild(c)}t.appendChild(this.selectElement),e.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(e){for(var t=0,n=this.options;t<n.length;t++){if(n[t].value===e)return!0}return!1},e.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error(e+" is not present in the camera list.");this.selectElement.value=e},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}(),Iu=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=xu.createElement("input",wu.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=As.zoom();this.rangeText.innerText=this.rangeInput.value+"x "+n,this.rangeText.style.marginRight="10px";var r=this;this.rangeInput.addEventListener("input",(function(){return r.onValueChange()})),this.rangeInput.addEventListener("change",(function(){return r.onValueChange()})),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var e=As.zoom();this.rangeText.innerText=this.rangeInput.value+"x "+e,this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(e,t,n,r){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=r.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}();!function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}($s||($s={}));!function(){function e(e,t,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=!0===n,!document.getElementById(e))throw"HTML Element with id="+e+" not found";this.scanTypeSelector=new bu(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Cs(this.verbose),this.persistedDataManager=new hu,!0!==t.rememberLastUsedCamera&&this.persistedDataManager.reset()}e.prototype.render=function(e,t){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(t,r){if(e)e(t,r);else{if(n.lastMatchFound===t)return;n.lastMatchFound=t,n.setHeaderMessage(As.lastMatch(t),$s.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(e,n){t&&t(e,n)};var r=document.getElementById(this.elementId);if(!r)throw"HTML Element with id="+this.elementId+" not found";r.innerHTML="",this.createBasicLayout(r),this.html5Qrcode=new ou(this.getScanRegionId(),function(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}(this.config,this.verbose))},e.prototype.pause=function(e){(Es(e)||!0!==e)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var e=this,t=function(){var t=document.getElementById(e.elementId);t&&(t.innerHTML="",e.resetBasicLayout(t))};return this.html5Qrcode?new Promise((function(n,r){e.html5Qrcode?e.html5Qrcode.isScanning?e.html5Qrcode.stop().then((function(r){e.html5Qrcode?(e.html5Qrcode.clear(),t(),n()):n()})).catch((function(t){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",t),r(t)})):(e.html5Qrcode.clear(),t(),n()):n()})):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(e){return e?(e.fps||(e.fps=bs.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!bs.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=bs.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=bs.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:bs.SCAN_DEFAULT_FPS,rememberLastUsedCamera:bs.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:bs.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),n=this.getScanRegionId();t.id=n,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),bu.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var r=document.createElement("div"),a=this.getDashboardId();r.id=a,r.style.width="100%",e.appendChild(r),this.setupInitialDashboard(r)},e.prototype.resetBasicLayout=function(e){e.style.border="none"},e.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t),(new mu).renderInto(t);var n=document.createElement("div");n.id=this.getHeaderMessageContainerId(),n.style.display="none",n.style.textAlign="center",n.style.fontSize="14px",n.style.padding="2px 10px",n.style.margin="4px",n.style.borderTop="1px solid #f6f6f6",t.appendChild(n)},e.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},e.prototype.createCameraListUi=function(e,t,n){var r=this;r.showHideScanTypeSwapLink(!1),r.setHeaderMessage(As.cameraPermissionRequesting());var a=function(){n||r.createPermissionButton(e,t)};ou.getCameras().then((function(n){r.persistedDataManager.setHasPermission(!0),r.showHideScanTypeSwapLink(!0),r.resetHeaderMessage(),n&&n.length>0?(e.removeChild(t),r.renderCameraSelection(n)):(r.setHeaderMessage(As.noCameraFound(),$s.STATUS_WARNING),a())})).catch((function(e){r.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:a(),r.setHeaderMessage(e,$s.STATUS_WARNING),r.showHideScanTypeSwapLink(!0)}))},e.prototype.createPermissionButton=function(e,t){var n=this,r=xu.createElement("button",this.getCameraPermissionButtonId());r.innerText=As.cameraPermissionTitle(),r.addEventListener("click",(function(){r.disabled=!0,n.createCameraListUi(e,t,r)})),t.appendChild(r)},e.prototype.createPermissionsUi=function(e,t){var n=this;bu.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?yu.hasPermissions().then((function(r){r?n.createCameraListUi(e,t):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t))})).catch((function(r){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t)})):this.createPermissionButton(e,t)},e.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=bu.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(n);var r=document.createElement("div");r.style.textAlign="center",n.appendChild(r),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,r),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(e){var t=bu.isFileScanType(this.currentScanType),n=this;this.fileSelectionUi=_u.create(e,t,(function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";bu.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(As.loadingImage()),n.html5Qrcode.scanFileV2(e,!0).then((function(e){n.resetHeaderMessage(),n.qrCodeSuccessCallback(e.decodedText,e)})).catch((function(e){n.setHeaderMessage(e,$s.STATUS_WARNING),n.qrCodeErrorCallback(e,ks.createFrom(e))})))}))},e.prototype.renderCameraSelection=function(e){var t=this,n=this,r=document.getElementById(this.getDashboardSectionCameraScanRegionId());r.style.textAlign="center";var a=Iu.create(r,!1),i=Au.create(r,e),o=document.createElement("span"),s=xu.createElement("button",wu.CAMERA_START_BUTTON_ID);s.innerText=As.scanButtonStartScanningText(),o.appendChild(s);var u,l=xu.createElement("button",wu.CAMERA_STOP_BUTTON_ID);l.innerText=As.scanButtonStopScanningText(),l.style.display="none",l.disabled=!0,o.appendChild(l);r.appendChild(o);var c=function(e){e||(s.style.display="none"),s.innerText=As.scanButtonStartScanningText(),s.style.opacity="1",s.disabled=!1,e&&(s.style.display="inline-block")};if(s.addEventListener("click",(function(e){s.innerText=As.scanButtonScanningStarting(),i.disable(),s.disabled=!0,s.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var r=i.getValue();n.persistedDataManager.setLastUsedCameraId(r),n.html5Qrcode.start(r,function(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}(n.config),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then((function(e){l.disabled=!1,l.style.display="inline-block",c(!1);var r=n.html5Qrcode.getRunningTrackCameraCapabilities();!0===t.config.showTorchButtonIfSupported&&function(e){e.torchFeature().isSupported()?(u?u.updateTorchCapability(e.torchFeature()):u=Su.create(o,e.torchFeature(),{display:"none",marginLeft:"5px"},(function(e){n.setHeaderMessage(e,$s.STATUS_WARNING)})),u.show()):u&&u.hide()}(r),!0===t.config.showZoomSliderIfSupported&&function(e){var n=e.zoomFeature();if(n.isSupported()){a.setOnCameraZoomValueChangeCallback((function(e){n.apply(e)}));var r,i,o,s=1;t.config.defaultZoomValueIfSupported&&(s=t.config.defaultZoomValueIfSupported),r=s,i=n.min(),s=r>(o=n.max())?o:r<i?i:r,a.setValues(n.min(),n.max(),s,n.step()),a.show()}}(r)})).catch((function(e){n.showHideScanTypeSwapLink(!0),i.enable(),c(!0),n.setHeaderMessage(e,$s.STATUS_WARNING)}))})),i.hasSingleItem()&&s.click(),l.addEventListener("click",(function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";l.disabled=!0,n.html5Qrcode.stop().then((function(e){t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),i.enable(),s.disabled=!1,l.style.display="none",s.style.display="inline-block",u&&(u.reset(),u.hide()),a.removeOnCameraZoomValueChangeCallback(),a.hide(),n.insertCameraScanImageToScanRegion()})).catch((function(e){l.disabled=!1,n.setHeaderMessage(e,$s.STATUS_WARNING)}))})),n.persistedDataManager.getLastUsedCameraId()){var d=n.persistedDataManager.getLastUsedCameraId();i.hasValue(d)?(i.setValue(d),s.click()):n.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var e=this,t=As.textIfCameraScanSelected(),n=As.textIfFileScanSelected(),r=document.getElementById(this.getDashboardSectionId()),a=document.createElement("div");a.style.textAlign="center";var i=xu.createElement("span",this.getDashboardSectionSwapLinkId());i.style.textDecoration="underline",i.style.cursor="pointer",i.innerText=bu.isCameraScanType(this.currentScanType)?t:n,i.addEventListener("click",(function(){e.sectionSwapAllowed?(e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,bu.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),i.innerText=n,e.currentScanType=ms.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),i.innerText=t,e.currentScanType=ms.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0):e.verbose&&e.logger.logError("Section swap called when not allowed")})),a.appendChild(i),r.appendChild(a)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;this.persistedDataManager.hasCameraPermissions()&&yu.hasPermissions().then((function(n){if(n){var r=document.getElementById(t.getCameraPermissionButtonId());if(!r)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";r.click()}else t.persistedDataManager.setHasPermission(!1)})).catch((function(e){t.persistedDataManager.setHasPermission(!1)}))},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(e,t){t||(t=$s.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",t){case $s.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case $s.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case $s.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==e&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return t.innerHTML="<br>",void t.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=uu,this.cameraScanImage.alt=As.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return t.innerHTML="<br>",void t.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=lu,this.fileScanImage.alt=As.fileScanAltText()},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return this.elementId+"__dashboard_section"},e.prototype.getDashboardSectionCameraScanRegionId=function(){return this.elementId+"__dashboard_section_csr"},e.prototype.getDashboardSectionSwapLinkId=function(){return wu.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return this.elementId+"__scan_region"},e.prototype.getDashboardId=function(){return this.elementId+"__dashboard"},e.prototype.getHeaderMessageContainerId=function(){return this.elementId+"__header_message"},e.prototype.getCameraPermissionButtonId=function(){return wu.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())}}();var Tu=function(){var t=(0,e.useContext)(Pe),n=new b,r=n.getQRScanner(t.language),a=n.getTourIds(t.language),i=n.getRooms(t.language,t.tour),o=n.getDialogs(t.language),s=(0,e.useState)(!1),u=(0,w.Z)(s,2),l=u[0],c=u[1],d=pe();(0,e.useEffect)((function(){document.getElementById("native_camera").addEventListener("change",(function(){var e=document.getElementById("native_camera").files[0],t=new ou("reader");console.log(e),t.scanFile(e,!1).then((function(e){f(e)})).catch((function(e){c(!0)}))}))}),[]);var h=function(){c(!1)},f=function(e){var n=e.split(" "),r=n[0].toLowerCase(),a=parseInt(n[1]);p(r)&&a>=1&&a<=i.length&&function(e,n){console.log("redirecting"),t.setTour(e),t.setRoom(n),d("/room")}(r,a)},p=function(e){for(var t=0;t<a.length;t++)if(a[t]===e)return!0;return!1};return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsxs)(Ki,{disableTypography:!0,open:l,onClose:h,children:[(0,Le.jsx)($i,{children:o.error_label}),(0,Le.jsx)(ro,{children:(0,Le.jsx)(Qi,{children:o.invalid_scan_label})}),(0,Le.jsx)(to,{children:(0,Le.jsx)(Io,{className:"color-secondary",onClick:h,children:o.close_label})})]}),(0,Le.jsx)(Mo,{header:r.qr_scanner}),(0,Le.jsxs)("div",{className:"flex content-container background-secondary padding-secondary border-radius-primary box-shadow",children:[(0,Le.jsx)("h2",{className:"text-medium",children:r.title}),(0,Le.jsx)("p",{className:"margin-top-secondary margin-bottom-primary",children:r.label}),(0,Le.jsxs)("div",{className:"flex-secondary margin-bottom-primary",children:[(0,Le.jsx)("span",{className:"margin-right-secondary font-weight-primary text-medium",children:"1."}),(0,Le.jsx)("span",{children:r.step_1})]}),(0,Le.jsxs)("div",{className:"flex-secondary margin-bottom-primary",children:[(0,Le.jsx)("span",{className:"margin-right-secondary font-weight-primary text-medium",children:"2."}),(0,Le.jsx)("span",{children:r.step_2})]}),(0,Le.jsxs)("div",{className:"flex-secondary margin-bottom-primary",children:[(0,Le.jsx)("span",{className:"margin-right-secondary font-weight-primary text-medium",children:"3."}),(0,Le.jsx)("span",{children:r.step_3})]}),(0,Le.jsxs)("div",{className:"flex-secondary margin-bottom-primary",children:[(0,Le.jsx)("span",{className:"margin-right-secondary font-weight-primary text-medium",children:"4."}),(0,Le.jsx)("span",{children:r.step_4})]}),(0,Le.jsxs)("div",{className:"center-text margin-primary ",children:[(0,Le.jsx)("label",{htmlFor:"native_camera",className:"text-medium button align-self-primary background-primary font-weight-primary color-primary cursor-primary",children:r.button}),(0,Le.jsx)("input",{id:"native_camera",type:"file",accept:"image/*",capture:"environment",className:"display-none"})]}),(0,Le.jsx)("div",{id:"reader",className:"display-none"})]})]})},Ru=function(e,t){return(Ru=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Nu(e,t){function n(){this.constructor=e}Ru(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Du(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function Mu(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var Ou=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags||(this.flags[e]=this.evaluateFlag(e)),this.flags[e]},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return Pu(n,t[0],t[1]),t.join("=")})),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,a)}))}},e}();function Pu(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function Fu(){return Lu}var Lu=null,Bu=new Map,ju=new Map;function zu(e,t){var n=Hu(e,t);return Bu.get(n)}function Uu(e){for(var t=Bu.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=i[0],s=i[1];o.split("_")[0]===e&&n.push(s)}return n}function Vu(e){var t=e.kernelName,n=e.backendName,r=Hu(t,n);if(Bu.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");Bu.set(r,e)}function Wu(e){var t=e.kernelName;ju.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),ju.set(t,e)}function Hu(e,t){return t+"_"+e}function Gu(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function Ku(e,t,n){return Math.max(e,Math.min(t,n))}function Xu(e){return e%2==0?e:e+1}function Yu(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function qu(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function Zu(e,t,n){void 0===n&&(n=""),qu(el(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))}function Qu(e){qu(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function Ju(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),Array.isArray(e)||pl(e)&&!n)for(var r=0;r<e.length;++r)Ju(e[r],t,n);else t.push(e);return t}function $u(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function el(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function tl(e){return e%1==0}function nl(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function rl(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function al(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function il(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function ol(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found "+e[a]+" at dim "+a);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var i=e.slice();return i[r]=t/n,i}function sl(e,t){var n=t.length;return qu((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e})),qu(e.every((function(e){return tl(e)})),(function(){return"All values in axis param must be integers but got axis "+e})),e.map((function(e){return e<0?n+e:e}))}function ul(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:sl(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function ll(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function cl(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function dl(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function hl(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function fl(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function pl(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function ml(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function vl(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function gl(e){return"string"==typeof e||e instanceof String}function yl(e){return"boolean"==typeof e}function bl(e){return"number"==typeof e}function wl(e){return Array.isArray(e)?wl(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":bl(e)?"float32":gl(e)?"string":yl(e)?"bool":"float32"}function xl(e){return!!(e&&e.constructor&&e.call&&e.apply)}function kl(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function Cl(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function El(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Ju(e)),n&&dl(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),a=0;a<r.length;++a)0!==Math.round(e[a])&&(r[a]=1);return r}throw new Error("Unknown data type "+t)}function Sl(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function e(t,n,r){var a=new Array;if(1===n.length)for(var i=n[0],o=0;o<i;o++)a[o]=r[t+o];else{i=n[0];var s=n.slice(1),u=s.reduce((function(e,t){return e*t}));for(o=0;o<i;o++)a[o]=e(t+o*u,s,r)}return a}(0,e,t)}function _l(e,t){for(var n=Al(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Al(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function Il(){return Fu().platform.now()}function Tl(e){e.forEach((function(t){qu(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."}))}))}function Rl(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",Fu().platform.encode(e,t)}function Nl(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",Fu().platform.decode(e,t)}function Dl(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function Ml(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}Object.freeze({shuffle:Gu,clamp:Ku,nearestLargerEven:Xu,sum:Yu,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n},assert:qu,assertShapesMatch:Zu,assertNonNull:Qu,flatten:Ju,sizeFromShape:$u,isScalarShape:function(e){return 0===e.length},arraysEqual:el,isInt:tl,tanh:nl,sizeToSquarishShape:rl,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return Gu(t),t},rightPad:al,repeatedTry:il,inferFromImplicitShape:ol,parseAxisParam:sl,squeezeShape:ul,getTypedArrayFromDType:ll,getArrayFromDType:cl,checkConversionForErrors:dl,isValidDtype:hl,hasEncodingLoss:fl,isTypedArray:pl,bytesPerElement:ml,bytesFromStringArray:vl,isString:gl,isBoolean:yl,isNumber:bl,inferDtype:wl,isFunction:xl,nearestDivisor:kl,computeStrides:Cl,toTypedArray:El,toNestedArray:Sl,makeOnesTypedArray:_l,makeZerosTypedArray:Al,now:Il,assertNonNegativeIntegerDimensions:Tl,fetch:function(e,t){return Fu().platform.fetch(e,t)},encodeString:Rl,decodeString:Nl,locToIndex:Dl,indexToLoc:Ml});var Ol=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new Pl)}return e.prototype.profileKernel=function(e,t,n){var r,a=this,i=this.backendTimer.time((function(){r=n()}));return r.forEach((function(n){n.data().then((function(r){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found "+a+" in the result of '"+n+"'"),!0}}(r,n.dtype,e),i.then((function(i){var o="";null!=i.getExtraProfileInfo&&(o=i.getExtraProfileInfo()),a.logger.logKernelProfile(e,n,r,i.kernelMs,t,o)}))}))})),r},e}(),Pl=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,a,i){var o="number"==typeof r?al(r+"ms",9):r.error,s=al(e,25),u=t.rank,l=t.size,c=al(t.shape.toString(),14),d="";for(var h in a){var f=a[h].shape||t.shape,p=f.length;d+=h+": "+p+"D "+(p>0?f:"")+" "}console.log("%c"+s+"\t%c"+o+"\t%c"+u+"D "+c+"\t%c"+l+"\t%c"+d+"\t%c"+i,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}();function Fl(e,t,n){return al(Array.isArray(e)?parseFloat(e[0].toFixed(7))+" + "+parseFloat(e[1].toFixed(7))+"j":gl(e)?"'"+e+"'":"bool"===n?Ll(e):parseFloat(e.toFixed(7)).toString(),t)}function Ll(e){return 0===e?"false":"true"}function Bl(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var jl=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=$u(e),null!=n){var a=n.length;qu(a===this.size,(function(){return"Length of values '"+a+"' does not match the size inferred by the shape '"+r.size+"'."}))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||cl(t,this.size),this.strides=Cl(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),qu(n.length===this.rank,(function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"}));var a=this.locToIndex(n);this.values[a]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=0,r=0,a=e;r<a.length;r++){var i=a[r];if(i<0||i>=this.shape[n]){var o="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(o)}n++}for(var s=e[e.length-1],u=0;u<e.length-1;++u)s+=this.strides[u]*e[u];return this.values[s]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return zl().makeTensor(this.values,this.shape,this.dtype)},e}(),zl=null,Ul=null,Vl=null,Wl=function(){function e(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=$u(e),this.strides=Cl(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),qu(1===this.size,(function(){return"The array must have only 1 element."})),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),this.reshape([e,t,n,r,a])},e.prototype.asType=function(e){return this.throwIfDisposed(),Ul.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Du(this,void 0,void 0,(function(){var e;return Mu(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,Ul.buffer(this.shape,this.dtype,e)]}}))}))},e.prototype.bufferSync=function(){return Ul.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Du(this,void 0,void 0,(function(){var e;return Mu(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,Sl(this.shape,e)]}}))}))},e.prototype.arraySync=function(){return Sl(this.shape,this.dataSync())},e.prototype.data=function(){return Du(this,void 0,void 0,(function(){var e,t;return Mu(this,(function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=zl().read(this.dataId),"string"!==this.dtype?[3,2]:[4,e];case 1:t=n.sent();try{return[2,t.map((function(e){return Nl(e)}))]}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,e]}}))}))},e.prototype.dataSync=function(){this.throwIfDisposed();var e=zl().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return Nl(e)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},e.prototype.bytes=function(){return Du(this,void 0,void 0,(function(){var e;return Mu(this,(function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,zl().read(this.dataId)];case 1:return e=t.sent(),"string"===this.dtype?[2,e]:[2,new Uint8Array(e.buffer)]}}))}))},e.prototype.dispose=function(){this.isDisposed||(zl().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),Ul.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),Ul.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),Ul.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),Ul.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),Ul.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),Ul.clone(this)},e.prototype.oneHot=function(e,t,n){return this.throwIfDisposed(),Ul.oneHot(this,e,t,n)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var a=Cl(t),i=function(e,t,n,r){var a=$u(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?Bl(e):e;if(s>1)for(var l=0;l<a/i;l++)for(var c=l*i,d=0;d<i;d++)o[d]=Math.max(o[d],Fl(u[c+d],0,n).length);return o}(e,t,n,a),o=t.length,s=function e(t,n,r,a,i,o){void 0===o&&(o=!0);var s="complex64"===r?2:1,u=n[0],l=n.length;if(0===l)return"complex64"===r?[Fl(Bl(t)[0],0,r)]:"bool"===r?[Ll(t[0])]:[t[0].toString()];if(1===l){if(u>20){var c=3*s,d=Array.from(t.slice(0,c)),h=Array.from(t.slice((u-3)*s,u*s));return"complex64"===r&&(d=Bl(d),h=Bl(h)),["["+d.map((function(e,t){return Fl(e,i[t],r)})).join(", ")+", ..., "+h.map((function(e,t){return Fl(e,i[u-3+t],r)})).join(", ")+"]"]}return["["+("complex64"===r?Bl(t):Array.from(t)).map((function(e,t){return Fl(e,i[t],r)})).join(", ")+"]"]}var f=n.slice(1),p=a.slice(1),m=a[0]*s,v=[];if(u>20){for(var g=0;g<3;g++){var y=(b=g*m)+m;v.push.apply(v,e(t.slice(b,y),f,r,p,i,!1))}for(v.push("..."),g=u-3;g<u;g++)y=(b=g*m)+m,v.push.apply(v,e(t.slice(b,y),f,r,p,i,g===u-1))}else for(g=0;g<u;g++){var b;y=(b=g*m)+m,v.push.apply(v,e(t.slice(b,y),f,r,p,i,g===u-1))}var w=2===l?",":"";for(v[0]="["+v[0]+w,g=1;g<v.length-1;g++)v[g]=" "+v[g]+w;var x=",\n";for(g=2;g<l;g++)x+="\n";return v[v.length-1]=" "+v[v.length-1]+"]"+(o?"":x),v}(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+o),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),Ul.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),Ul.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),Ul.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),Ul.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),Ul.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),Ul.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),Ul.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),Ul.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),Ul.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),Ul.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),Ul.unstack(this,e)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),Ul.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,a){return void 0===n&&(n=.001),Vl("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,a,r,n)},e.prototype.batchNorm=function(e,t,n,r,a){return void 0===a&&(a=.001),this.throwIfDisposed(),Ul.batchNorm(this,e,t,n,r,a)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ul.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ul.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ul.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ul.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ul.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ul.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ul.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ul.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),Ul.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),Ul.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),Ul.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),Ul.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),Ul.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),Ul.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),Ul.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),Ul.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),Ul.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),Ul.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),Ul.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),Ul.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),Ul.div(this,e)},e.prototype.divNoNan=function(e){return this.throwIfDisposed(),Ul.divNoNan(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),Ul.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),Ul.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),Ul.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),Ul.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),Ul.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),Ul.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),Ul.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),Ul.modStrict(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),Ul.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),Ul.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),Ul.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),Ul.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),Ul.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),Ul.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),Ul.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),Ul.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),Ul.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),Ul.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),Ul.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),Ul.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),Ul.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),Ul.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),Ul.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),Ul.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),Ul.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),Ul.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),Ul.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),Ul.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),Ul.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),Ul.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),Ul.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),Ul.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),Ul.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),Ul.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),Ul.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),Ul.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),Ul.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),Ul.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),Ul.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),Ul.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),Ul.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),Ul.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),Ul.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Ul.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),Ul.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),Ul.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),Ul.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),Ul.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),Ul.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),Ul.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),Ul.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),Ul.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),Ul.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),Ul.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),Ul.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),Ul.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),Ul.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),Ul.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),Ul.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),Ul.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),Ul.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),Ul.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),Ul.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),Ul.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),Ul.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),Ul.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),Ul.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),Ul.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),Ul.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),Ul.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),Ul.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),Ul.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),Ul.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),Ul.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,a,i){return void 0===r&&(r="NWC"),void 0===a&&(a=1),this.throwIfDisposed(),Ul.conv1d(this,e,t,n,r,a,i)},e.prototype.conv2d=function(e,t,n,r,a,i){return void 0===r&&(r="NHWC"),void 0===a&&(a=[1,1]),this.throwIfDisposed(),Ul.conv2d(this,e,t,n,r,a,i)},e.prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),Ul.conv2dTranspose(this,e,t,n,r,a)},e.prototype.depthwiseConv2D=function(e,t,n,r,a,i){return void 0===r&&(r="NHWC"),void 0===a&&(a=[1,1]),this.throwIfDisposed(),Ul.depthwiseConv2d(this,e,t,n,r,a,i)},e.prototype.separableConv2d=function(e,t,n,r,a,i){return void 0===a&&(a=[1,1]),void 0===i&&(i="NHWC"),this.throwIfDisposed(),Ul.separableConv2d(this,e,t,n,r,a,i)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Ul.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Ul.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),Ul.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,a){return this.throwIfDisposed(),Ul.pool(this,e,t,n,r,a)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),zl().makeVariable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Ul.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Ul.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Ul.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),Ul.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return void 0===r&&(r=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),this.throwIfDisposed(),Ul.stridedSlice(this,e,t,n,r,a,i,o,s)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Ul.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),Ul.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),Ul.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),Ul.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),Ul.spectral.irfft(this)},e}();Object.defineProperty(Wl,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var Hl,Gl,Kl,Xl,Yl,ql,Zl=function(e){function t(t,n,r,a){var i=e.call(this,t.shape,t.dtype,t.dataId,a)||this;return i.trainable=n,i.name=r,i}return Nu(t,e),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!el(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");zl().disposeTensor(this),this.dataId=e.dataId,zl().incRef(this,null)},t.prototype.dispose=function(){zl().disposeVariable(this),this.isDisposedInternal=!0},t}(Wl);Object.defineProperty(Zl,Symbol.hasInstance,{value:function(e){return e instanceof Wl&&null!=e.assign&&e.assign instanceof Function}}),(ql=Hl||(Hl={})).R0="R0",ql.R1="R1",ql.R2="R2",ql.R3="R3",ql.R4="R4",ql.R5="R5",ql.R6="R6",function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Gl||(Gl={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Kl||(Kl={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Xl||(Xl={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Yl||(Yl={}));var Ql={float32:Xl,int32:Gl,bool:Kl,complex64:Yl};function Jl(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return Ql[e][t]}function $l(e){return Jl(e,"int32")}function ec(e,t){if(e.dtype===t.dtype)return[e,t];var n=Jl(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function tc(e,t){qu(e.dtype===t.dtype,(function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"}))}function nc(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof Wl)n.push(t);else if(a=t,Array.isArray(a)||"object"==typeof a){var a,i=t;for(var o in i){var s=i[o];r.has(s)||(r.add(s),e(s,n,r))}}}(e,t,new Set),t}Object.freeze({makeTypesMatch:ec,assertTypesMatch:tc,isTensorInList:function(e,t){return t.some((function(t){return t.id===e.id}))},getTensorsInContainer:nc});var rc,ac=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),ic=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new ac}return e.prototype.ready=function(){return Du(this,void 0,void 0,(function(){var e,t,n;return Mu(this,(function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then((function(){}))];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return Du(this,void 0,void 0,(function(){var t,n,r;return Mu(this,(function(a){switch(a.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=a.sent(),[3,3];case 2:r=n,a.label=3;case 3:if(!r)return[2,!1];a.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Ol(this.backendInstance),[2,!0]}}))}))},e.prototype.setupRegisteredKernels=function(){var e=this;Uu(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))},e.prototype.disposeRegisteredKernels=function(e){var t=this;Uu(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))},e.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return!(a<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),!1)}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,a,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(e,t){var n,r=this,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){return e.toFloat()}}}),[]),t},e.prototype.runKernel=function(e,t,n,r,a){return this.runKernelFunc(null,t,null,e,n,r,a)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+o+" data ids) after running '"+e+"'")},e.prototype.runKernelFunc=function(e,t,n,r,a,i,o){var s,u=this;void 0===i&&(i=[]),void 0===o&&(o=[]);var l=[],c=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var d,h=function(e){c&&(l=e.map((function(e){return u.keep(u.clone(e))})))},f=this.state.numBytes,p=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var m,v=zu(r,this.backendName);return d=null!=v?function(){var e=u.backend.numDataIds();m=v.kernelFunc({inputs:t,attrs:a,backend:u.backend});var n=Array.isArray(m)?m:[m];u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,e,n);var s=n.map((function(e){var t=e.dataId,n=e.shape,r=e.dtype;return u.makeTensorFromDataId(t,n,r)})),l=s.filter((function(e,t){return o[t]}));return h((i||[]).slice().concat(l)),s}:function(){var t=u.backend.numDataIds();m=u.tidy((function(){return e(u.backend,h)}));var n=Array.isArray(m)?m:[m];return u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,t,n),n},this.scopedRun((function(){return u.state.kernelDepth++}),(function(){return u.state.kernelDepth--}),(function(){s=u.ENV.getBool("DEBUG")?u.profiler.profileKernel(r,t,(function(){return d()})):d()})),c&&this.addTapeNode(r,t,s,n,l),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-f,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-p,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map((function(e){return t[e].shape})),outputShapes:s.map((function(e){return e.shape}))}),Array.isArray(m)?s:s[0]},e.prototype.makeTensor=function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&gl(e[0])&&(a=e.map((function(e){return Rl(e)})));var i=r.write(a,t,n),o=new Wl(t,n,i,this.nextTensorId());if(this.incRef(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=vl(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o},e.prototype.makeTensorFromDataId=function(e,t,n,r){var a=new Wl(t,n=n||"float32",e,this.nextTensorId());return this.incRef(a,r),a},e.prototype.makeVariable=function(e,t,n,r){void 0===t&&(t=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.asType(r));var a=new Zl(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name "+a.name+" was already registered");return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a},e.prototype.incRef=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*ml(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Zl||this.track(e)},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return Du(this,void 0,void 0,(function(){var t,n;return Mu(this,(function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]}))}))},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n,r,a){var i=this,o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},s=function(e){return ju.get(e)}(e);null!=s&&(r=s.gradFunc),null!=r&&(o.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=Al(r.size,r.dtype);return i.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a)}),this.state.activeTape.push(o)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=nc(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))},e.prototype.gradients=function(e,t,n,r){var a=this;if(void 0===r&&(r=!1),qu(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var i=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",e)}));qu(i instanceof Wl,(function(){return"The result y returned by f() must be a tensor."}));var o=function(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(i=0;i<e.length;i++){var o=(p=e[i]).inputs;for(var s in o){for(var u=o[s],l=!1,c=0;c<t.length;c++)if(r[u.id]){p.outputs.forEach((function(e){return r[e.id]=!0})),l=!0,a[p.id]=!0;break}if(l)break}}var d={};d[n.id]=!0;var h={};for(i=e.length-1;i>=0;i--)for(o=(p=e[i]).inputs,c=0;c<p.outputs.length;c++)if(d[p.outputs[c].id]){for(var s in o)d[o[s].id]=!0,h[p.id]=!0;break}var f=[];for(i=0;i<e.length;i++){var p;if(a[(p=e[i]).id]&&h[p.id]){var m={};for(var s in p.inputs){var v=p.inputs[s];r[v.id]&&(m[s]=v)}var g=Object.assign({},p);g.inputs=m,g.outputs=p.outputs,f.push(g)}}return f}(this.state.activeTape,t,i);if(!r&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e,r,s={};s[i.id]=null==n?(r=_l($u(e=i.shape),"float32"),oc.makeTensor(r,e,"float32")):n,function(e,t,n){for(var r=function(r){var a=t[r],i=[];if(a.outputs.forEach((function(t){var n=e[t.id];null!=n?i.push(n):i.push(null)})),null==a.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+a.kernelName+".");var o=a.gradient(i),s=function(t){if(!(t in o))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(o)+".");var r=n((function(){return o[t]()}));if("float32"!==r.dtype)throw new Error("Error in gradient for op "+a.kernelName+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'");var i=a.inputs[t];if(!el(r.shape,i.shape))throw new Error("Error in gradient for op "+a.kernelName+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+i.shape+"'");if(null==e[i.id])e[i.id]=r;else{var s=e[i.id];e[i.id]=s.add(r),s.dispose()}};for(var u in a.inputs)s(u)},a=t.length-1;a>=0;a--)r(a)}(s,o,(function(e){return a.tidy(e)}));var u=t.map((function(e){return s[e.id]}));return 0===a.state.gradientDepth&&(a.state.activeTape.forEach((function(e){for(var t=0,n=e.saved;t<n.length;t++)n[t].dispose()})),a.state.activeTape=null),{value:i,grads:u}}))},e.prototype.customGrad=function(e){var t=this;return qu(xl(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];qu(r.every((function(e){return e instanceof Wl})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};return r.forEach((function(e,t){i[t]=e})),t.runKernelFunc((function(t,a){return qu((n=e.apply(void 0,r.concat([a]))).value instanceof Wl,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),qu(xl(n.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),n.value}),i,(function(e,t){var a=n.gradFunc(e,t),i=Array.isArray(a)?a:[a];qu(i.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),qu(i.every((function(e){return e instanceof Wl})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return i.forEach((function(e,t){o[t]=function(){return e}})),o}))}},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.time=function(e){return Du(this,void 0,void 0,(function(){var t,n;return Mu(this,(function(r){switch(r.label){case 0:return t=Il(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=Il()-t,[2,n]}}))}))},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new ac,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),oc=function(){var e=function(){if(null==rc){var e=void 0;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}rc=e}return rc}();if(null==e._tfengine){var t=new Ou(e);e._tfengine=new ic(t)}return function(e){Lu=e}(e._tfengine.ENV),zl=function(){return e._tfengine},e._tfengine}();function sc(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var uc=Fu();uc.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),uc.registerFlag("IS_BROWSER",(function(){return sc()})),uc.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),uc.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),uc.registerFlag("PROD",(function(){return!1})),uc.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return uc.getBool("DEBUG")})),uc.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),uc.registerFlag("IS_TEST",(function(){return!1}));var lc,cc,dc,hc={},fc={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function pc(e,t){hc[e]=t}function mc(e){e in hc||(hc[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete hc[e]}),!1),1===e?t.getContext("webgl",fc)||t.getContext("experimental-webgl",fc):t.getContext("webgl2",fc)}(e));var t=hc[e];return t.isContextLost()?(delete hc[e],mc(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),hc[e])}function vc(e,t){return[t,e]}function gc(e){var t=$u(e);return rl(Math.ceil(t/4))}function yc(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function bc(e,t){var n,r,a,i,o,s,u,l,c,d=e;return 2===Fu().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,a=d.RGBA16F,i=d.RGBA32F,o=d.RED,s=4,u=1,l=d.HALF_FLOAT,c=d.FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=d.RGBA,o=e.RGBA,s=4,u=4,l=null!=t?t.HALF_FLOAT_OES:null,c=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function wc(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+kc(e,t))}(e),r}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(lc||(lc={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(cc||(cc={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(dc||(dc={}));function xc(e){return!!(Fu().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function kc(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function Cc(e,t,n){return Kc(e,t,(function(){return e.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function Ec(e,t,n){var r=Kc(e,t,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(wc(e,t,(function(){return e.shaderSource(r,n)})),wc(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function Sc(e,t,n){var r=Kc(e,t,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(wc(e,t,(function(){return e.shaderSource(r,n)})),wc(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=Ic.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return al((t+1).toString(),i)+e})),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var l=o.slice(0,r-1),c=o.slice(r-1,r),d=o.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+al(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var _c,Ac,Ic=/ERROR: [0-9]+:([0-9]+):/g;function Tc(e,t){return Kc(e,t,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function Rc(e,t,n){if(wc(e,t,(function(){return e.linkProgram(n)})),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Nc(e,t,n){if(wc(e,t,(function(){return e.validateProgram(n)})),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function Dc(e,t,n){var r=Kc(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return wc(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),wc(e,t,(function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function Mc(e,t,n){var r=Kc(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return wc(e,t,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)})),wc(e,t,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function Oc(e,t){return Kc(e,t,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function Pc(e,t){var n=Fu().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function Fc(e,t){return Kc(e,t,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function Lc(e,t,n,r,a,i,o,s){var u=e.getAttribLocation(n,r);return-1!==u&&(wc(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,a)})),wc(e,t,(function(){return e.vertexAttribPointer(u,i,e.FLOAT,!1,o,s)})),wc(e,t,(function(){return e.enableVertexAttribArray(u)})),!0)}function Bc(e,t,n,r){Xc(e,r),wc(e,t,(function(){return e.activeTexture(e.TEXTURE0+r)})),wc(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)}))}function jc(e,t,n,r){return Kc(e,t,(function(){return e.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function zc(e,t,n){return e.getUniformLocation(t,n)}function Uc(e,t,n,r,a,i){wc(e,t,(function(){return Bc(e,t,r,i)})),wc(e,t,(function(){return e.uniform1i(a,i)}))}function Vc(e,t,n,r){wc(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)})),wc(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}))}function Wc(e,t,n){wc(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),wc(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Hc(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Gc(e,t))}function Gc(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function Kc(e,t,n,r){var a=wc(e,t,(function(){return n()}));if(null==a)throw new Error(r);return a}function Xc(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function Yc(e,t){return void 0===t&&(t=2),$u(e.slice(0,e.length-t))}function qc(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Zc(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[Yc(e)].concat(qc(e))),t}function Qc(e,t){var n;void 0===t&&(t=!1);var r=Fu().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?Xu(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var a=ul(e);e=a.newShape}var i=$u(e);if(e.length<=1&&i<=r)return[1,i];if(2===e.length&&e[0]<=r&&e[1]<=r)return e;if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var o=Yc(e),s=2,u=2;return e.length&&(s=(n=qc(e))[0],u=n[1]),rl(i=o*(s/2)*(u/2)).map((function(e){return 2*e}))}return rl(i)}function Jc(e){return e%2==0}function $c(e,t){if(el(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(Jc(n)&&Jc(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Jc(e[0])&&Jc(t[0])}function ed(e){if(null==_c){var t=mc(e);_c=t.getParameter(t.MAX_TEXTURE_SIZE)}return _c}function td(e){if(null==Ac){var t=mc(e);Ac=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Ac)}function nd(e){if(0===e)return 0;var t=mc(e);return rd(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:rd(t,"EXT_disjoint_timer_query")?1:0}function rd(e,t){return null!=e.getExtension(t)}function ad(e){try{if(null!=mc(e))return!0}catch(e){return!1}return!1}function id(e){if(0===e)return!1;var t=mc(e);if(1===e){if(!rd(t,"OES_texture_float"))return!1}else if(!rd(t,"EXT_color_buffer_float"))return!1;return sd(t)}function od(e){if(0===e)return!1;var t=mc(e);if(1!==e){if(rd(t,"EXT_color_buffer_float"))return sd(t);if(rd(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(e,t){var n=bc(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),i}(t,n)}return!1}return!!rd(t,"OES_texture_float")&&!!rd(t,"WEBGL_color_buffer_float")&&sd(t)}function sd(e){var t=bc(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function ud(e){return 2===e&&null!=mc(e).fenceSync}var ld=Object.freeze({callAndCheck:wc,canBeRepresented:xc,getWebGLErrorMessage:kc,getExtensionOrThrow:Cc,createVertexShader:Ec,createFragmentShader:Sc,createProgram:Tc,linkProgram:Rc,validateProgram:Nc,createStaticVertexBuffer:Dc,createStaticIndexBuffer:Mc,getNumChannels:function(){return 2===Fu().getNumber("WEBGL_VERSION")?1:4},createTexture:Oc,validateTextureSize:Pc,createFramebuffer:Fc,bindVertexBufferToProgramAttribute:Lc,bindTextureUnit:Bc,unbindTextureUnit:function(e,t,n){Xc(e,n),wc(e,t,(function(){return e.activeTexture(e.TEXTURE0+n)})),wc(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))},getProgramUniformLocationOrThrow:jc,getProgramUniformLocation:zc,bindTextureToProgramUniformSampler:Uc,bindCanvasToFramebuffer:function(e,t){wc(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),wc(e,t,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),wc(e,t,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))},bindColorTextureToFramebuffer:Vc,unbindColorTextureFromFramebuffer:Wc,validateFramebuffer:Hc,getFramebufferErrorMessage:Gc,getBatchDim:Yc,getRowsCols:qc,getShapeAs3D:Zc,getTextureShapeFromLogicalShape:Qc,isReshapeFree:$c,getWebGLMaxTextureSize:ed,resetMaxTextureSize:function(){_c=null},resetMaxTexturesInShader:function(){Ac=null},getMaxTexturesInShader:td,getWebGLDisjointQueryTimerVersion:nd,hasExtension:rd,isWebGLVersionEnabled:ad,isCapableOfRenderingToFloatTexture:id,isDownloadFloatTextureEnabled:od,isWebGLFenceEnabled:ud}),cd=Fu();function dd(e){Fu().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function hd(e,t){return oc.tidy(e,t)}function fd(e){nc(e).forEach((function(e){return e.dispose()}))}function pd(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Fu().getBool("IS_TEST")||console.warn.apply(console,e)}function md(e,t){var n=e;if(pl(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||pl(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Fu().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||pl(t)){qu(n.length>0,(function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"})),qu(t.length===n[0],(function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"}));for(var a=n.slice(1),i=0;i<t.length;++i)e(t[i],a,r.concat(i))}else qu(0===n.length,(function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"}))}(e,r,[]),r}function vd(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function gd(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof Wl)return vd(r,e.dtype,t,n),e;var a=wl(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),vd(r,a,t,n),null==e||!pl(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+i+"'")}var o=md(e,a);pl(e)||Array.isArray(e)||(e=[e]);var s="string"!==a?El(e,a,Fu().getBool("DEBUG")):Ju(e,[],!0);return oc.makeTensor(s,o,a)}function yd(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map((function(e,r){return gd(e,t+"["+r+"]",n)}),r)}function bd(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function wd(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}function xd(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map((function(t){return e[t]}))]}function kd(e,t){return wd(e,t.map((function(e){return 1})),t)}function Cd(e,t,n){qu(bd(t,n),(function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."}))}function Ed(e,t){if(bd(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function Sd(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function _d(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function Ad(e,t){var n=e[0].length;e.forEach((function(e,t){qu(e.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"}))})),qu(t>=0&&t<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)qu(i===t||e[i]===r[i],(function(){return"Error in concat"+n+"D: Shape of tensors["+a+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+"."}))}))}function Id(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function Td(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];oc.startScope(n);try{var a=r.apply(void 0,e);return a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),oc.endScope(a),a}catch(e){throw oc.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}cd.registerFlag("HAS_WEBGL",(function(){return cd.getNumber("WEBGL_VERSION")>0})),cd.registerFlag("WEBGL_VERSION",(function(){return ad(2)?2:ad(1)?1:0})),cd.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===cd.get("WEBGL_VERSION")})),cd.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),cd.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),cd.registerFlag("WEBGL_PACK",(function(){return cd.getBool("HAS_WEBGL")})),cd.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return cd.getBool("WEBGL_PACK")})),cd.registerFlag("WEBGL_PACK_CLIP",(function(){return cd.getBool("WEBGL_PACK")})),cd.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),cd.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return cd.getBool("WEBGL_PACK")})),cd.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return cd.getBool("WEBGL_PACK")})),cd.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return cd.getBool("WEBGL_PACK")})),cd.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return cd.getBool("WEBGL_PACK")})),cd.registerFlag("WEBGL_PACK_REDUCE",(function(){return cd.getBool("WEBGL_PACK")})),cd.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return cd.getBool("WEBGL_PACK")})),cd.registerFlag("WEBGL_CONV_IM2COL",(function(){return cd.getBool("WEBGL_PACK")})),cd.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return ed(cd.getNumber("WEBGL_VERSION"))})),cd.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return td(cd.getNumber("WEBGL_VERSION"))})),cd.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=cd.getNumber("WEBGL_VERSION");return 0===e?0:nd(e)})),cd.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return cd.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e})),cd.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return id(cd.getNumber("WEBGL_VERSION"))})),cd.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!cd.getBool("WEBGL_FORCE_F16_TEXTURES")&&cd.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),cd.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return od(cd.getNumber("WEBGL_VERSION"))})),cd.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return ud(cd.getNumber("WEBGL_VERSION"))})),cd.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return cd.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Vl=dd;var Rd=Td({complex_:function(e,t){var n=gd(e,"real","complex"),r=gd(t,"imag","complex");return Zu(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),oc.runKernelFunc((function(e){return e.complex(n,r)}),{$real:n,$imag:r})}}),Nd=Td({real_:function(e){var t=gd(e,"input","real");return oc.runKernelFunc((function(e){return e.real(t)}),{$input:t})}}),Dd=Td({imag_:function(e){var t=gd(e,"input","imag");return oc.runKernelFunc((function(e){return e.imag(t)}),{$input:t})}});function Md(e,t,n){return Od(e,t,md(e,n),n)}function Od(e,t,n,r){if(null==r&&(r=wl(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!pl(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Tl(t);var a=$u(t),i=$u(n);qu(a===i,(function(){return"Based on the provided shape, ["+t+"], the tensor should have "+a+" values but has "+i}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==$u(t.slice(o));qu(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "}))}}return pl(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?El(e,r,Fu().getBool("DEBUG")):Ju(e,[],!0),oc.makeTensor(e,t,r)}function Pd(e,t){if((pl(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&pl(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Od(e,[],[],t)}function Fd(e,t){Qu(e);var n=md(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Od(e,null,n,t)}function Ld(e,t,n){if(Qu(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=md(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Od(e,t,r,n)}function Bd(e,t,n){if(Qu(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=md(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Od(e,t,r,n)}function jd(e,t,n){if(Qu(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=md(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Od(e,t,r,n)}function zd(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=zd(e,"float32"),r=Ud(e,"float32");return Rd(n,r)}var a=_l($u(e),t);return oc.makeTensor(a,e,t)}function Ud(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Ud(e,"float32"),r=Ud(e,"float32");return Rd(n,r)}var a=Al($u(e),t);return oc.makeTensor(a,e,t)}function Vd(e,t,n){return oc.runKernelFunc((function(r){return r.fill(e,t,n)}),{})}function Wd(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return Ud([0],r);var a=Al(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return Fd(a,r)}var Hd=Td({onesLike_:function(e){var t=gd(e,"x","onesLike");if("complex64"===t.dtype){var n=Hd(Nd(t)),r=Gd(Dd(t));return Rd(n,r)}return oc.runKernelFunc((function(e){return e.onesLike(t)}),{$x:t},(function(e,t){return{$x:function(){return Gd(e)}}}))}}),Gd=Td({zerosLike_:function(e){var t=gd(e,"x","zerosLike");return oc.runKernelFunc((function(e){return e.zerosLike(t)}),{$x:t},(function(e,t){return{$x:function(){return Gd(e)}}}))}}),Kd=Td({concat_:function(e,t){void 0===t&&(t=0),qu(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=yd(e,"tensors","concat");"complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+e.dtype+". ")})),t=sl(t,n[0].shape)[0];var r=Id(n.map((function(e){return e.shape})),t);if(0===$u(r))return Md([],r);if(1===(n=n.filter((function(e){return e.size>0}))).length)return n[0];var a=n.map((function(e){return e.shape}));Ad(a,t);var i=n,o={axis:t};return oc.runKernelFunc((function(e){return e.concat(n,t)}),i,(function(e){var n=a.map((function(e){return e[t]}));return Qd(e,n,t).map((function(e){return function(){return e}}))}),"Concat",o)}}),Xd=Td({concat1d_:function(e){return Kd(e,0)}}),Yd=Td({concat2d_:function(e,t){return Kd(e,t)}}),qd=Td({concat3d_:function(e,t){return Kd(e,t)}}),Zd=Td({concat4d_:function(e,t){return Kd(e,t)}}),Qd=Td({split_:function(e,t,n){void 0===n&&(n=0);var r,a=gd(e,"x","split");return n=sl(n,a.shape)[0],"number"==typeof t?(qu(a.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(a.shape[n]/t)):(qu(a.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t),oc.runKernelFunc((function(e){return e.split(a,r,n)}),{$x:a},(function(e){return{$x:function(){return Kd(e,n)}}}))}});function Jd(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self&&self;var $d=Jd((function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var n=new r(e),i=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:this.alea=i}(0,e)})),eh=Jd((function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:this.xor128=i}(0,e)})),th=Jd((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:this.xorwow=i}(0,e)})),nh=Jd((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&(i.x&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:this.xorshift7=i}(0,e)})),rh=Jd((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&(i.X&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:this.xor4096=i}(0,e)})),ah=Jd((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:this.tychei=i}(0,e)})),ih=Jd((function(e){!function(t,r){var a,i=this,o=256,s="random",u=r.pow(o,6),l=r.pow(2,52),c=2*l,d=255;function h(e,n,d){var h=[],g=m(function e(t,n){var r,a=[],i=typeof t;if(n&&"object"==i)for(r in t)try{a.push(e(t[r],n-1))}catch(e){}return a.length?a:"string"==i?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,v(t)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(o):(e=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(e)),v(e)}catch(e){var n=i.navigator,r=n&&n.plugins;return[+new Date,i,r,i.screen,v(t)]}}():e,3),h),y=new f(h),b=function(){for(var e=y.g(6),t=u,n=0;e<l;)e=(e+n)*o,t*=o,n=y.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,m(v(y.S),t),(n.pass||d||function(e,t,n,a){return a&&(a.S&&p(a,y),e.state=function(){return p(y,{})}),n?(r[s]=e,t):e})(b,g,"global"in n?n.global:this==r,n.state)}function f(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);a<o;)s[a]=a++;for(a=0;a<o;a++)s[a]=s[i=d&i+e[a%n]+(t=s[a])],s[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,s=r.S;e--;)t=s[a=d&a+1],n=n*o+s[d&(s[a]=s[i=d&i+t])+(s[i]=t)];return r.i=a,r.j=i,n})(o)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}if(r["seed"+s]=h,m(r.random(),t),e.exports){e.exports=h;try{a=n(4902)}catch(e){}}}([],Math)}));ih.alea=$d,ih.xor128=eh,ih.xorwow=th,ih.xorshift7=nh,ih.xor4096=rh,ih.tychei=ah;var oh=ih.alea,sh=function(){function e(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=a||Math.random();this.random=oh(i.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),uh=function(){function e(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;var a=r||Math.random();this.randu=oh(a.toString()),this.randn=new sh(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)},e.prototype.convertValue=function(e){return"float32"===this.dtype?e:Math.round(e)},e}(),lh=function(){function e(e,t,n,r){var a=this;if(void 0===e&&(e=0),void 0===t&&(t=1),this.canReturnFloat=function(){return null==a.dtype||"float32"===a.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=oh(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function ch(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",Tl(e),new jl(e,t,n)}var dh=Td({batchToSpaceND_:function(e,t,n){var r=gd(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));return qu(r.rank>=1+t.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length})),qu(n.length===t.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length})),qu(r.shape[0]%a==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+a})),oc.runKernelFunc((function(e){return e.batchToSpaceND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}}))}}),hh=Td({broadcastTo_:function(e,t){var n=gd(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=n.reshape(a)}for(var i=Array.from(t),o=t.length-1;o>=0;o--)if(n.shape[o]===t[o])i[o]=1;else if(1!==n.shape[o])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var s=i.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));return 0===s.length?n.clone():oc.runKernelFunc((function(e){return e.tile(n,i)}),{input:n},(function(e){return{input:function(){return e.sum(s,!0)}}}))}}),fh=Td({cast_:function(e,t){var n=gd(e,"x","cast");if(!hl(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={dtype:t};return oc.runKernelFunc((function(e){return e.cast(n,t)}),{x:n},(function(e){return{x:function(){return e.clone()}}}),"Cast",r)}}),ph=Td({clone_:function(e){var t=gd(e,"x","clone",null);return oc.runKernelFunc((function(){return oc.makeTensorFromDataId(t.dataId,t.shape,t.dtype)}),{$x:t},(function(e){return{$x:function(){return e.toFloat()}}}))}}),mh=Td({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var a=gd(e,"x","cumsum"),i=Ed([t|=0],a.rank),o=a;null!=i&&(o=a.transpose(i));var s=_d(1,a.rank)[0],u=oc.runKernelFunc((function(e){return e.cumsum(o,s,n,r)}),{permutedX:o},(function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}}));return null!=i&&(u=u.transpose(i)),u}}),vh=Td({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=gd(e,"x","depthToSpace"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];return qu(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+t+"  for depthToSpace with input shape\n      "+r.shape})),qu(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+t+" for depthToSpace with input shape\n          "+r.shape})),qu(o%(t*t)==0,(function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+o+" for depthToSpace with input shape "+r.shape})),oc.runKernelFunc((function(e){return e.depthToSpace(r,t,n)}),{$x:r})}}),gh=Td({expandDims_:function(e,t){void 0===t&&(t=0);var n=gd(e,"x","expandDims",null);qu(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return t<0&&(qu(-(n.rank+1)<=t,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),t=n.rank+t+1),r.splice(t,0,1),Rh(n,r)}}),yh=Td({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var a=ch([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=a.toTensor().as2D(e,t);if(null==n)return s;if(1===n.length)return Oh(gh(s,0),[n[0],1,1]);if(2===n.length)return Oh(gh(gh(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Oh(gh(gh(gh(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),bh=Td({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var a=gd(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var s=1===o?a.as2D(1,-1):a,u=oc.runKernelFunc((function(e){return e.multinomial(s,r,t,n)}),{logits2D:s});return 1===o?u.as1D():u}}),wh=Td({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var a=gd(e,"indices","oneHot","int32"),i=a.shape.concat([t]);return a=a.flatten(),oc.runKernelFunc((function(e){return e.oneHot(a,t,n,r)}),{$indices:a},(function(e){return{$indices:function(){return Ud(a.shape,"float32")}}})).reshape(i)}}),xh=Td({pad_:function(e,t,n){void 0===n&&(n=0);var r=gd(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n};return oc.runKernelFunc((function(e){return e.pad(r,t,n)}),{x:r},(function(e){var n=t.map((function(e){return e[0]}));return{x:function(){return e.slice(n,r.shape)}}}),"PadV2",a)}}),kh=Td({pad1d_:function(e,t,n){return void 0===n&&(n=0),qu(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),xh(e,[t],n)}}),Ch=Td({pad2d_:function(e,t,n){return void 0===n&&(n=0),qu(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),xh(e,t,n)}}),Eh=Td({pad3d_:function(e,t,n){return void 0===n&&(n=0),qu(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),xh(e,t,n)}}),Sh=Td({pad4d_:function(e,t,n){return void 0===n&&(n=0),qu(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),xh(e,t,n)}}),_h=Td({rand_:function(e,t,n){var r=$u(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return oc.makeTensor(a,e,n)}}),Ah=Td({randomNormal_:function(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new sh(t,n,r,!1,a),o=ch(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Ih=Td({randomGamma_:function(e,t,n,r,a){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var i=new uh(t,n,r,a),o=ch(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Th=Td({randomUniform_:function(e,t,n,r,a){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var i=ch(e,r),o=new lh(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}}),Rh=Td({reshape_:function(e,t){var n=gd(e,"x","reshape",null);t=ol(t,n.size),qu(n.size===$u(t),(function(){return"new shape and old shape must have the same number of elements."}));var r={shape:t};return oc.runKernelFunc((function(e){return e.reshape(n,t)}),{x:n},(function(e){return{x:function(){return e.reshape(n.shape)}}}),"Reshape",r)}}),Nh=Td({spaceToBatchND_:function(e,t,n){var r=gd(e,"x","spaceToBatchND");return qu(r.rank>=1+t.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length})),qu(n.length===t.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length})),qu(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()})),oc.runKernelFunc((function(e){return e.spaceToBatchND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}}))}}),Dh=Td({squeeze_:function(e,t){var n=gd(e,"x","squeeze");return Rh(n,ul(n.shape,t).newShape)}}),Mh=Td({stack_:function(e,t){void 0===t&&(t=0);var n=yd(e,"tensors","stack");if(qu(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),1===n.length)return n[0].expandDims(t);var r=n[0].rank,a=n[0].shape,i=n[0].dtype;qu(t<=r,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(e){Zu(a,e.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(e){qu(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=n.map((function(e){return e.expandDims(t)}));return Kd(o,t)}}),Oh=Td({tile_:function(e,t){var n=gd(e,"x","tile",null);qu(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."}));var r=[n],a={reps:t};return oc.runKernelFunc((function(e,r){var a=e.tile(n,t);return r([n]),a}),{x:n},(function(e,n){var r=n[0];return{x:function(){var n=Gd(r);if(1===r.rank)for(var a=0;a<t[0];++a)n=n.add(e.slice([a*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(a=0;a<t[0];++a)for(var i=0;i<t[1];++i)n=n.add(e.slice([a*r.shape[0],i*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(a=0;a<t[0];++a)for(i=0;i<t[1];++i)for(var o=0;o<t[2];++o)n=n.add(e.slice([a*r.shape[0],i*r.shape[1],o*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(a=0;a<t[0];++a)for(i=0;i<t[1];++i)for(o=0;o<t[2];++o)for(var s=0;s<t[3];++s)n=n.add(e.slice([a*r.shape[0],i*r.shape[1],o*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}}),"Tile",a,r)}}),Ph=Td({truncatedNormal_:function(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new sh(t,n,r,!0,a),o=ch(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),Fh=Td({unstack_:function(e,t){void 0===t&&(t=0),t=t||0;var n=gd(e,"x","unstack");qu(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),t<0&&(t+=n.shape.length);var r={axis:t};return oc.runKernelFunc((function(e){return e.unstack(n,t)}),{x:n},(function(e){return{x:function(){return Mh(e,t)}}}),"Unpack",r)}});function Lh(e,t,n,r){void 0===r&&(r=!0);var a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function Bh(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{var i=[],o=[];for(a=1;a<e;++a)a>=2*t+1||a%2==1?o.push(a):i.push(a);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function jh(e,t,n,r){void 0===r&&(r=!0);var a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function zh(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Uh(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function Vh(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],a=1,i=0;i<n.length-1;++i)a*=n[i];var o=e.shape,s=n.slice();s.pop();var u=1;for(i=r;i<e.rank;++i)u*=o[i],s.push(o[i]);var l=Cl(e.shape).map((function(e){return e/u})).concat([1]).slice(0,r);return[s,a,u,l]}Object.freeze({prepareAndValidate:Vh});function Wh(e){return e<=30?e:kl(e,Math.floor(Math.sqrt(e)))}function Hh(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+a+".";if(n.rank<a)throw new Error(i+" update.rank < "+a+". ");if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < "+(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != "+(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape["+o+"] ("+n.shape[o]+") != indices.shape["+o+"] ("+t.shape[o]+").");for(o=0;o<n.rank-a;++o)if(n.shape[o+a]!==e[o+r])throw new Error(i+" updates.shape["+(o+a)+"] ("+n.shape[o+a]+") != shape["+(o+a)+"] ("+e[o+a]+")")}function Gh(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}Hh(n,t,e)}function Kh(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:$u(t.shape)/u,sliceSize:o,strides:Cl(n.slice(0,a)).concat([1]),outputSize:$u(n)}}Object.freeze({validateUpdateShape:Hh,validateInput:Gh,calculateShapes:Kh});function Xh(e,t,n){qu(e.rank===t.length,(function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."})),qu(e.rank===n.length,(function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."}));for(var r=function(r){qu(t[r]+n[r]<=e.shape[r],(function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"}))},a=0;a<e.rank;++a)r(a)}function Yh(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function qh(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function Zh(e,t,n,r,a){var i=t[a],o=n[a]||1;(e&1<<a||null==i)&&(i=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[a];return i<0&&(i+=s),Ku(0,i,s-1)}function Qh(e,t,n,r,a){var i=t[a],o=n[a]||1;(e&1<<a||null==i)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[a];return i<0&&(i+=s),o>0?Ku(0,i,s):Ku(-1,i,s-1)}function Jh(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function $h(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}Object.freeze({assertParamsValid:Xh,maskToAxes:Yh,computeOutShape:qh,startForAxis:Zh,stopForAxis:Qh,isSliceContinous:Jh,computeFlatOffset:$h});function ef(e){return oc.customGrad(e)}var tf=Td({softmax_:function(e,t){void 0===t&&(t=-1);var n=gd(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return oc.runKernelFunc((function(e,r){var a=e.softmax(n,t);return r([a]),a}),{logits:n},(function(e,n){var r=n[0],a=e.mul(r);return{logits:function(){return a.sub(a.sum([t],!0).mul(r))}}}),"Softmax",{dim:t},[],[!0])}}),nf=Td({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=gd(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return ef((function(e,n){var r=e.max(t,!0),a=e.sub(r),i=a.toFloat().sub(a.exp().sum(t,!0).log());return n([i]),{value:i,gradFunc:function(e,n){var r=n[0].exp();return e.sub(e.sum(t,!0).mul(r))}}}))(n)}}),rf=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),af=function(){function e(){}return e.prototype.time=function(e){return of("time")},e.prototype.read=function(e){return of("read")},e.prototype.readSync=function(e){return of("readSync")},e.prototype.numDataIds=function(){return of("numDataIds")},e.prototype.disposeData=function(e){return of("disposeData")},e.prototype.write=function(e,t,n){return of("write")},e.prototype.move=function(e,t,n,r){return of("move")},e.prototype.memory=function(){return of("memory")},e.prototype.floatPrecision=function(){return of("floatPrecision")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){return of("batchMatMul")},e.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,of("fusedBatchMatMul")},e.prototype.slice=function(e,t,n){return of("slice")},e.prototype.stridedSlice=function(e,t,n,r){return of("stridedSlice")},e.prototype.unstack=function(e,t){return of("unstack")},e.prototype.reverse=function(e,t){return of("reverse")},e.prototype.concat=function(e,t){return of("concat")},e.prototype.neg=function(e){return of("neg")},e.prototype.add=function(e,t){return of("add")},e.prototype.addN=function(e){return of("addN")},e.prototype.subtract=function(e,t){return of("subtract")},e.prototype.multiply=function(e,t){return of("multiply")},e.prototype.realDivide=function(e,t){return of("realDivide")},e.prototype.floorDiv=function(e,t){return of("floorDiv")},e.prototype.sum=function(e,t){return of("sum")},e.prototype.prod=function(e,t){return of("prod")},e.prototype.unsortedSegmentSum=function(e,t,n){return of("unsortedSegmentSum")},e.prototype.argMin=function(e,t){return of("argMin")},e.prototype.argMax=function(e,t){return of("argMax")},e.prototype.equal=function(e,t){return of("equal")},e.prototype.notEqual=function(e,t){return of("notEqual")},e.prototype.less=function(e,t){return of("less")},e.prototype.lessEqual=function(e,t){return of("lessEqual")},e.prototype.greater=function(e,t){return of("greater")},e.prototype.greaterEqual=function(e,t){return of("greaterEqual")},e.prototype.logicalNot=function(e){return of("logicalNot")},e.prototype.logicalAnd=function(e,t){return of("logicalAnd")},e.prototype.logicalOr=function(e,t){return of("logicalOr")},e.prototype.where=function(e){return of("where")},e.prototype.select=function(e,t,n){return of("select")},e.prototype.topk=function(e,t,n){return of("topk")},e.prototype.min=function(e,t){return of("min")},e.prototype.minimum=function(e,t){return of("minimum")},e.prototype.mod=function(e,t){return of("mod")},e.prototype.max=function(e,t){return of("max")},e.prototype.maximum=function(e,t){return of("maximum")},e.prototype.all=function(e,t){return of("all")},e.prototype.any=function(e,t){return of("any")},e.prototype.squaredDifference=function(e,t){return of("squaredDifference")},e.prototype.ceil=function(e){return of("ceil")},e.prototype.floor=function(e){return of("floor")},e.prototype.round=function(e){return of("round")},e.prototype.sign=function(e){return of("sign")},e.prototype.isNaN=function(e){return of("isNaN")},e.prototype.isInf=function(e){return of("isInf")},e.prototype.isFinite=function(e){return of("isFinite")},e.prototype.pow=function(e,t){return of("pow")},e.prototype.exp=function(e){return of("exp")},e.prototype.expm1=function(e){return of("expm1")},e.prototype.softmax=function(e,t){return of("softmax")},e.prototype.log=function(e){return of("log")},e.prototype.log1p=function(e){return of("log1p")},e.prototype.sqrt=function(e){return of("sqrt")},e.prototype.rsqrt=function(e){return of("rsqrt")},e.prototype.square=function(e){return of("square")},e.prototype.reciprocal=function(e){return of("reciprocal")},e.prototype.relu=function(e){return of("relu")},e.prototype.relu6=function(e){return of("relu6")},e.prototype.prelu=function(e,t){return of("prelu")},e.prototype.elu=function(e){return of("elu")},e.prototype.eluDer=function(e,t){return of("eluDer")},e.prototype.selu=function(e){return of("selu")},e.prototype.int=function(e){return of("int")},e.prototype.clip=function(e,t,n){return of("clip")},e.prototype.abs=function(e){return of("abs")},e.prototype.complexAbs=function(e){return of("complexAbs")},e.prototype.sigmoid=function(e){return of("sigmoid")},e.prototype.softplus=function(e){return of("softplus")},e.prototype.sin=function(e){return of("sin")},e.prototype.cos=function(e){return of("cos")},e.prototype.tan=function(e){return of("tan")},e.prototype.asin=function(e){return of("asin")},e.prototype.acos=function(e){return of("acos")},e.prototype.atan=function(e){return of("atan")},e.prototype.atan2=function(e,t){return of("atan2")},e.prototype.sinh=function(e){return of("sinh")},e.prototype.cosh=function(e){return of("cosh")},e.prototype.tanh=function(e){return of("tanh")},e.prototype.asinh=function(e){return of("asinh")},e.prototype.acosh=function(e){return of("acosh")},e.prototype.atanh=function(e){return of("atanh")},e.prototype.erf=function(e){return of("erf")},e.prototype.step=function(e,t){return of("step")},e.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,of("fusedConv2d")},e.prototype.conv2d=function(e,t,n){return of("conv2d")},e.prototype.conv2dDerInput=function(e,t,n){return of("conv2dDerInput")},e.prototype.conv2dDerFilter=function(e,t,n){return of("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,of("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(e,t,n){return of("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){return of("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){return of("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(e,t,n){return of("conv3d")},e.prototype.conv3dDerInput=function(e,t,n){return of("conv3dDerInput")},e.prototype.conv3dDerFilter=function(e,t,n){return of("conv3dDerFilter")},e.prototype.maxPool=function(e,t){return of("maxPool")},e.prototype.maxPoolBackprop=function(e,t,n,r){return of("maxPoolBackprop")},e.prototype.avgPool=function(e,t){return of("avgPool")},e.prototype.avgPoolBackprop=function(e,t,n){return of("avgPoolBackprop")},e.prototype.avgPool3d=function(e,t){return of("avgPool3d")},e.prototype.avgPool3dBackprop=function(e,t,n){return of("avgPool3dBackprop")},e.prototype.maxPool3d=function(e,t){return of("maxPool3d")},e.prototype.maxPool3dBackprop=function(e,t,n,r){return of("maxPool3dBackprop")},e.prototype.reshape=function(e,t){return of("reshape")},e.prototype.cast=function(e,t){return of("cast")},e.prototype.tile=function(e,t){return of("tile")},e.prototype.pad=function(e,t,n){return of("pad")},e.prototype.transpose=function(e,t){return of("transpose")},e.prototype.gather=function(e,t,n){return of("gather")},e.prototype.gatherND=function(e,t){return of("gatherND")},e.prototype.scatterND=function(e,t,n){return of("scatterND")},e.prototype.batchToSpaceND=function(e,t,n){return of("batchToSpaceND")},e.prototype.spaceToBatchND=function(e,t,n){return of("spaceToBatchND")},e.prototype.resizeBilinear=function(e,t,n,r){return of("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(e,t,n){return of("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){return of("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){return of("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(e,t,n,r,a,i){return of("batchNormalization")},e.prototype.localResponseNormalization4D=function(e,t,n,r,a){return of("localResponseNormalization4D")},e.prototype.LRNGrad=function(e,t,n,r,a,i,o){return of("LRNGrad")},e.prototype.multinomial=function(e,t,n,r){return of("multinomial")},e.prototype.oneHot=function(e,t,n,r){return of("oneHot")},e.prototype.cumsum=function(e,t,n,r){return of("cumsum")},e.prototype.nonMaxSuppression=function(e,t,n,r,a){return of("nonMaxSuppression")},e.prototype.fft=function(e){return of("fft")},e.prototype.ifft=function(e){return of("ifft")},e.prototype.complex=function(e,t){return of("complex")},e.prototype.real=function(e){return of("real")},e.prototype.imag=function(e){return of("imag")},e.prototype.cropAndResize=function(e,t,n,r,a,i){return of("cropAndResize")},e.prototype.depthToSpace=function(e,t,n){return of("depthToSpace")},e.prototype.split=function(e,t,n){return of("split")},e.prototype.sparseToDense=function(e,t,n,r){return of("sparseToDense")},e.prototype.diag=function(e){return of("diag")},e.prototype.fill=function(e,t,n){return of("fill")},e.prototype.onesLike=function(e){return of("onesLike")},e.prototype.zerosLike=function(e){return of("zerosLike")},e.prototype.linspace=function(e,t,n){return of("linspace")},e.prototype.dispose=function(){return of("dispose")},e}();function of(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function sf(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function uf(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function lf(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(i)}}return n}function cf(e,t,n,r,a,i,o){void 0===o&&(o="channelsLast");var s,u=mf(t),l=u[0],c=u[1];if("channelsLast"===o)s=[l,c,e[3],e[3]];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);s=[l,c,e[1],e[1]]}return hf(e,s,n,r,a,i,!1,o)}function df(e,t,n,r,a,i,o){void 0===o&&(o="NDHWC");var s,u,l=vf(t),c=l[0],d=l[1],h=l[2];if("NDHWC"===o)u="channelsLast",s=[c,d,h,e[4],e[4]];else{if("NCDHW"!==o)throw new Error("Unknown dataFormat "+o);u="channelsFirst",s=[c,d,h,e[1],e[1]]}return ff(e,s,n,r,a,!1,u,i)}function hf(e,t,n,r,a,i,o,s){void 0===o&&(o=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],h=u[3];if("channelsLast"===s)l=e[0],c=e[1],d=e[2],h=e[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);l=e[0],h=e[1],c=e[2],d=e[3]}var f,p=t[0],m=t[1],v=t[3],g=mf(n),y=g[0],b=g[1],w=mf(r),x=w[0],k=w[1],C=gf(p,x),E=gf(m,k),S=function(e,t,n,r,a,i,o,s){var u,l,c;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var d=function(e,t,n,r,a){null==r&&(r=pf(e,t,n));var i=e[1],o=yf((e[0]-t+2*r)/n+1,a);qu(tl(o),(function(){return"The output # of rows ("+o+") must be an integer. Change the stride and/or zero pad parameters"}));var s=yf((i-t+2*r)/n+1,a);return qu(tl(s),(function(){return"The output # of columns ("+s+") must be an integer. Change the stride and/or zero pad parameters"})),[o,s]}([t,n],i,r,e,s);l=d[0],c=d[1]}else if("same"===e){l=Math.ceil(t/r),c=Math.ceil(n/a);var h=Math.max(0,(l-1)*r+i-t),f=Math.max(0,(c-1)*a+o-n),p=Math.floor(h/2),m=h-p,v=Math.floor(f/2);u={top:p,bottom:m,left:v,right:f-v,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);u={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),c=Math.ceil((n-o+1)/a)}return{padInfo:u,outHeight:l,outWidth:c}}(a,c,d,y,b,C,E,i),_=S.padInfo,A=S.outHeight,I=S.outWidth,T=o?v*h:v;return"channelsFirst"===s?f=[l,T,A,I]:"channelsLast"===s&&(f=[l,A,I,T]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:d,inChannels:h,outHeight:A,outWidth:I,outChannels:T,padInfo:_,strideHeight:y,strideWidth:b,filterHeight:p,filterWidth:m,effectiveFilterHeight:C,effectiveFilterWidth:E,dilationHeight:x,dilationWidth:k,inShape:e,outShape:f,filterShape:t}}function ff(e,t,n,r,a,i,o,s){void 0===i&&(i=!1),void 0===o&&(o="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],h=u[3],f=u[4];if("channelsLast"===o)l=e[0],c=e[1],d=e[2],h=e[3],f=e[4];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);l=e[0],f=e[1],c=e[2],d=e[3],h=e[4]}var p,m=t[0],v=t[1],g=t[2],y=t[4],b=vf(n),w=b[0],x=b[1],k=b[2],C=vf(r),E=C[0],S=C[1],_=C[2],A=gf(m,E),I=gf(v,S),T=gf(g,_),R=function(e,t,n,r,a,i,o,s,u,l,c){var d,h,f,p;if("number"==typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,a,i){null==a&&(a=pf(e,t,r));var o=e[1],s=e[2],u=yf((e[0]-t+2*a)/r+1,i);qu(tl(u),(function(){return"The output # of depths ("+u+") must be an integer. Change the stride and/or zero pad parameters"}));var l=yf((o-t+2*a)/r+1,i);qu(tl(l),(function(){return"The output # of rows ("+l+") must be an integer. Change the stride and/or zero pad parameters"}));var c=yf((s-t+2*a)/r+1,i);return qu(tl(c),(function(){return"The output # of columns ("+c+") must be an integer. Change the stride and/or zero pad parameters"})),[u,l,c,1]}([t,n,r,1],s,0,a,e,c);h=m[0],f=m[1],p=m[2]}else if("same"===e){var v=((h=Math.ceil(t/a))-1)*a+s-t,g=((f=Math.ceil(n/i))-1)*i+u-n,y=((p=Math.ceil(r/o))-1)*o+l-r,b=Math.floor(v/2),w=v-b,x=Math.floor(g/2),k=g-x,C=Math.floor(y/2);d={top:x,bottom:k,left:C,right:y-C,front:b,back:w,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((t-s+1)/a),f=Math.ceil((n-u+1)/i),p=Math.ceil((r-l+1)/o)}return{padInfo:d,outDepth:h,outHeight:f,outWidth:p}}(a,c,d,h,w,x,k,A,I,T,s),N=R.padInfo,D=R.outDepth,M=R.outHeight,O=R.outWidth,P=i?y*f:y;return"channelsFirst"===o?p=[l,P,D,M,O]:"channelsLast"===o&&(p=[l,D,M,O,P]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:d,inWidth:h,inChannels:f,outDepth:D,outHeight:M,outWidth:O,outChannels:P,padInfo:N,strideDepth:w,strideHeight:x,strideWidth:k,filterDepth:m,filterHeight:v,filterWidth:g,effectiveFilterDepth:A,effectiveFilterHeight:I,effectiveFilterWidth:T,dilationDepth:E,dilationHeight:S,dilationWidth:_,inShape:e,outShape:p,filterShape:t}}function pf(e,t,n,r){void 0===r&&(r=1);var a=gf(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function mf(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function vf(e){return"number"==typeof e?[e,e,e]:e}function gf(e,t){return t<=1?e:e+(e-1)*(t-1)}function yf(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function bf(e){var t=mf(e),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function wf(e,t){return bf(e)||bf(t)}function xf(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function kf(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=Ud(e.shape),a=e.toFloat(),i=n.complex(a,r);return r.dispose(),a.dispose(),i}if(!fl(e.dtype,t))return oc.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){var o=n.real(e);return i=o.cast(t),o.dispose(),i}if("int32"===t)return n.int(e);if("bool"===t){var s=Pd(0,e.dtype);return i=n.notEqual(e,s),s.dispose(),i}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function Cf(e,t){return oc.makeTensorFromDataId(e.dataId,t,e.dtype)}function Ef(e,t,n){var r=(t-e)/(n-1),a=Al(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return Fd(a,"float32")}Object.freeze({castTensor:kf,reshapeTensor:Cf,linspaceImpl:Ef,upcastType:Jl,axesAreInnerMostDims:bd,combineLocations:wd,computeOutAndReduceShapes:xd,expandShapeToKeepDim:kd,assertAxesAreInnerMostDims:Cd,getAxesPermutation:Ed,getUndoAxesPermutation:Sd,getInnerMostAxes:_d,getBroadcastDims:sf,getReductionAxes:uf,assertAndGetBroadcastShape:lf,assertParamsConsistent:Ad,computeOutShape:Id,computePool2DInfo:cf,computePool3DInfo:df,computeConv2DInfo:hf,computeConv3DInfo:ff,computeDefaultPad:pf,tupleValuesAreOne:bf,eitherStridesOrDilationsAreOne:wf,convertConv2DDataFormat:xf,PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:Wh});function Sf(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function _f(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Af(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function If(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function Tf(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,a=e.length,i=0,o=!1;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||Rf)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function Rf(e,t){return e>t?1:e<t?-1:0}function Nf(e,t,n,r,a){return Mf(e,t,n,r,a,0).selectedIndices}function Df(e,t,n,r,a,i){var o=Mf(e,t,n,r,a,i,!0);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function Mf(e,t,n,r,a,i,o,s){void 0===o&&(o=!1),void 0===s&&(s=!1);for(var u=Array.from(t).map((function(e,t){return{score:e,boxIndex:t,suppressBeginIndex:0}})).filter((function(e){return e.score>a})).sort(Ff),l=i>0?-.5/i:0,c=[],d=[];c.length<n&&u.length>0;){var h=u.pop(),f=h.score,p=h.boxIndex,m=h.suppressBeginIndex;if(f<a)break;for(var v=!1,g=c.length-1;g>=m;--g){var y=Of(e,p,c[g]);if(y>=r){v=!0;break}if(h.score=h.score*Pf(r,l,y),h.score<=a)break}h.suppressBeginIndex=c.length,v||(h.score===f?(c.push(p),d.push(h.score)):h.score>a&&Tf(u,h,Ff))}var b=c.length;return s&&(c.fill(0,b),d.fill(0,b)),{selectedIndices:Fd(c,"int32"),selectedScores:Fd(d,"float32"),numValidOutputs:Pd(b,"int32")}}function Of(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),h=Math.max(a[1],a[3]),f=(s-i)*(u-o),p=(d-l)*(h-c);if(f<=0||p<=0)return 0;var m=Math.max(i,l),v=Math.max(o,c),g=Math.min(s,d),y=Math.min(u,h),b=Math.max(g-m,0)*Math.max(y-v,0);return b/(f+p-b)}function Pf(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function Ff(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function Lf(e,t,n){var r=new Array(e.rank).fill(0),a=e.shape.slice();return t.map((function(t){a[n]=t;var i=e.slice(r,a);return r[n]+=t,i}))}function Bf(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var a=ch(n,e.dtype);for(r=0;r<a.values.length;++r){for(var i=a.indexToLoc(r),o=new Array(e.rank),s=0;s<o.length;s++)o[s]=i[s]%e.shape[s];var u=e.locToIndex(o);a.values[r]=e.values[u]}return a.toTensor()}function jf(e,t,n,r,a){for(var i=t[t.length-1],o=[e.length/i,i],s=o[0],u=o[1],l=ll(n,s*r),c=ll("int32",s*r),d=0;d<s;d++){for(var h=d*u,f=e.subarray(h,h+u),p=[],m=0;m<f.length;m++)p.push({value:f[m],index:m});p.sort((function(e,t){return t.value-e.value}));var v=d*r,g=l.subarray(v,v+r),y=c.subarray(v,v+r);for(m=0;m<r;m++)g[m]=p[m].value,y[m]=p[m].index}var b=t.slice();return b[b.length-1]=r,[Md(l,b,n),Md(c,b,"int32")]}function zf(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var a=ch(e,"int32"),i=ch([n.length,e.length],"int32");for(r=0;r<n.length;r++){var o=a.indexToLoc(n[r]),s=r*e.length;i.values.set(o,s)}return i.toTensor()}var Uf=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},Vf=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},Wf=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,a=e.batchSize,i=e.inSize,o=Math.ceil(i/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];var s="max"===t?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function Hf(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return e+"."+t}))}function Gf(e,t){return 1===t?[e]:Hf(e,t)}function Kf(){var e,t,n,r,a,i,o,s,u,l;return 2===Fu().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function Xf(e,t,n){void 0===n&&(n="index");var r=Cl(t);return r.map((function(t,a){return"int "+e[a]+" = "+n+" / "+t+"; "+(a===r.length-1?"int "+e[a+1]+" = "+n+" - "+e[a]+" * "+t:"index -= "+e[a]+" * "+t)+";"})).join("")}function Yf(e){var t=Cl(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var qf="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function Zf(e,t,n,r){var a=[];e.forEach((function(e){var t=$u(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?a.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(a.push("uniform sampler2D "+e.name+";"),a.push("uniform int offset"+e.name+";"))}));var i,o,s=a.join("\n"),u=e.map((function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?Jf(e):Qf(e);var a=e.shapeInfo.logicalShape,i=t.logicalShape;return a.length<=i.length&&(r+=n?function(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=sf(e.shapeInfo.logicalShape,t.logicalShape),l=ip(s),c=s-o,d=["x","y","z","w","u","v"];n=0===o?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords."+d[e+c]+" = 0;"})).join("\n");var h;h=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+d[t+c]})).join(", ");var f="return outputValue;",p=1===$u(e.shapeInfo.logicalShape),m=1===$u(t.logicalShape);if(1!==o||p||m){if(p&&!m)f=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var v=o-2,g=o-1;u.indexOf(v)>-1&&u.indexOf(g)>-1?f="return vec4(outputValue.x);":u.indexOf(v)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+i+"() {\n      "+l+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+a+"("+h+");\n      "+f+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&el(o,i))return"\n      float "+a+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var l,c=ip(u),d=sf(e.shapeInfo.logicalShape,t.logicalShape),h=u-s,f=["x","y","z","w","u","v"];l=0===s?"":u<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords."+f[e+h]+" = 0;"})).join("\n");var p;return p=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+f[t+h]})).join(", "),"\n    float "+a+"() {\n      "+c+" coords = getOutputCoords();\n      "+l+"\n      return get"+r+"("+p+");\n    }\n  "}(e,t)),r}(e,t,r)})).join("\n"),l=t.texShape,c=Kf(),d=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+e.texture2D+"(textureSampler, uv).r;\n    }\n  "}(c),h=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+e.defineSpecialNaN+"\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+$f+"\n    "+ep+"\n    "+tp+"\n  "}(c);return t.isPacked?(i=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(el(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=(i=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+a[0]+", "+a[1]+"));\n      int index = resTexRC.x * "+a[1]+" + resTexRC.y;\n\n      int b = index / "+o+";\n      index -= b * "+o+";\n\n      int r = 2 * (index / "+i+");\n      int c = imod(index, "+i+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),a=r*Math.ceil(e[e.length-2]/2),i=a,o="",s="b, r, c",u=2;u<e.length-1;u++)o="\n      int b"+u+" = index / "+(i*=e[e.length-u-1])+";\n      index -= b"+u+" * "+i+";\n    "+o,s="b"+u+", "+s;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+o+"\n\n      int b = index / "+a+";\n      index -= b * "+a+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+s+");\n    }\n  "}(e,t)}var n,r,a,i,o}(t.logicalShape,l),o=function(e){return"\n    void setOutput(vec4 val) {\n      "+e.output+" = val;\n    }\n  "}(c)):(i=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return el(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=Xf(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=Xf(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=Xf(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=Xf(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,l),o=function(e){return"\n    void setOutput(float val) {\n      "+e.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(c)),r&&(h+=np),[h,d,o,s,i,u,n].join("\n")}function Qf(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,a=r[0],i=r[1];if(1===a&&1===i)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var o=e.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+o[0]+", "+o[1]+", "+rp(t)+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+ap(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,a=r[0],i=r[1];if(1===i&&1===a)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var o=rp(t);return 1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+o+") + 0.5) / "+a+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+o+") + 0.5) / "+i+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+a+", "+i+", index + "+o+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape;if(null!=a&&el(t,a)){var i=a[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+a[1]+".0, "+i+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var o=ul(t),s=o.newShape,u=o.keptDims,l=s;if(l.length<t.length)return"\n      "+Qf(op(e,l))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+sp(["row","col"],u)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+t[1]+", 1)));\n        "+ap(e)+"\n      }\n    ";var c=a[0],d=a[1],h=rp(n);return 1===d?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+c+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===c?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+d+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+t[1]+" + col + "+h+";\n    vec2 uv = uvFromFlat("+c+", "+d+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[1]*t[2],i=t[2],o=ul(t),s=o.newShape,u=o.keptDims,l=s;if(l.length<t.length)return"\n        "+Qf(op(e,l))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+sp(["row","col","depth"],u)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+a+", "+i+", 1)));\n        "+ap(e)+"\n      }\n    ";var c=e.shapeInfo.texShape,d=c[0],h=c[1],f=e.shapeInfo.flatOffset;return h===a&&null==f?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+i+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+h+".0, "+d+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":h===i&&null==f?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+t[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+h+".0, "+d+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+a+" + col * "+i+" + depth + "+rp(n)+";\n        vec2 uv = uvFromFlat("+d+", "+h+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[3],i=t[2]*a,o=t[1]*i,s=ul(t),u=s.newShape,l=s.keptDims;if(u.length<t.length)return"\n      "+Qf(op(e,u))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+sp(["row","col","depth","depth2"],l)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+o+", "+i+", "+a+", 1)));\n        "+ap(e)+"\n      }\n    ";var c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],f=d[1];return f===o&&null==c?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+i+", "+a+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+f+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":f===a&&null==c?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+t[1]*t[2]+", "+t[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+f+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+o+" + col * "+i+" +\n          depth * "+a+" + depth2;\n      vec2 uv = uvFromFlat("+h+", "+f+", index + "+rp(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=ul(t),l=u.newShape,c=u.keptDims;if(l.length<t.length)return"\n      "+Qf(op(e,l))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+sp(["row","col","depth","depth2","depth3"],c)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+o+", "+i+", "+a+")) +\n          depth3;\n        "+ap(e)+"\n      }\n    ";var d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,f=h[0],p=h[1];return p===s&&null==d?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+o+", "+i+", "+a+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":p===a&&null==d?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]+",\n               "+t[2]*t[3]+", "+t[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+o+" + depth * "+i+" +\n          depth2 * "+a+" + depth3 + "+rp(n)+";\n      vec2 uv = uvFromFlat("+f+", "+p+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=ul(t),i=a.newShape,o=a.keptDims;if(i.length<t.length)return"\n      "+Qf(op(e,i))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+sp(["row","col","depth","depth2","depth3","depth4"],o)+");\n      }\n    ";var s=t[5],u=t[4]*s,l=t[3]*u,c=t[2]*l,d=t[1]*c;if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+d+", "+c+", "+l+", "+u+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+s+", 1)));\n        "+ap(e)+"\n      }\n    ";var h=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,p=f[0],m=f[1];return m===d&&null==h?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+c+", "+l+", "+u+", "+s+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":m===s&&null==h?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]*t[4]+",\n               "+t[2]*t[3]*t[4]+",\n               "+t[3]*t[4]+",\n               "+t[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+d+" + col * "+c+" + depth * "+l+" +\n          depth2 * "+u+" + depth3 * "+s+" + depth4 + "+rp(n)+";\n      vec2 uv = uvFromFlat("+p+", "+m+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function Jf(e){var t;switch(e.shapeInfo.logicalShape.length){case 0:return"\n    vec4 "+("get"+(t=e.name).charAt(0).toUpperCase()+t.slice(1))+"() {\n      return "+Kf().texture2D+"("+t+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Kf();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+a[0]+", "+a[1]+", index);\n      return "+i.texture2D+"("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=a[0],o=a[1],s=Kf();if(null!=a&&el(t,a))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+o+".0, "+i+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    ";var u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(t[1]/2)+", "+u[0]+", "+u[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===t[0])return"\n        "+Jf(op(e,t.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+sp(["b","row","col"],[1,2])+");\n        }\n      ";var o=i[0],s=i[1],u=Math.ceil(t[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+o+", "+s+", "+u*Math.ceil(t[1]/2)+", "+u+", b, row, col);\n      return "+Kf().texture2D+"("+n+", uv);\n    }\n  "}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],s=o[0],u=o[1],l=Math.ceil(t[n-1]/2),c=l*Math.ceil(t[n-2]/2),d="int b, int row, int col",h="b * "+c+" + (row / 2) * "+l+" + (col / 2)",f=2;f<n-1;f++)d="int b"+f+", "+d,h="b"+f+" * "+(c*=t[n-f-1])+" + "+h;return"\n    vec4 "+a+"("+d+") {\n      int index = "+h+";\n      int texR = index / "+u+";\n      int texC = index - texR * "+u+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+", "+s+");\n      return "+Kf().texture2D+"("+r+", uv);\n    }\n  "}(e)}}var $f="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ep="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",tp="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",np="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function rp(e){return"offset"+e}function ap(e){var t=e.name,n=$u(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function ip(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function op(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function sp(e,t){return t.map((function(t){return e[t]})).join(", ")}var up=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,qu(e.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var a=e[e.length-1],i=Math.ceil(a/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var o,s,u=this.outputShape,l=u.length,c=ip(l),d=Gf("coords",l);if(1===i){var h=ip(s=l+1);o="\n        "+h+" sourceLocR = "+h+"("+d.join()+", 0);\n        ++"+d[l-1]+";\n        "+h+" sourceLocG = "+h+"("+d.join()+", 0);\n        ++"+d[l-2]+";\n        "+h+" sourceLocA = "+h+"("+d.join()+", 0);\n        --"+d[l-1]+";\n        "+h+" sourceLocB = "+h+"("+d.join()+", 0);\n        --"+d[l-2]+";"}else s=l,o="\n        "+c+" sourceLocR = coords;\n        ++"+d[l-1]+";\n        "+c+" sourceLocG = coords;\n        ++"+d[l-2]+";\n        "+c+" sourceLocA = coords;\n        --"+d[l-1]+";\n        "+c+" sourceLocB = coords;\n        --"+d[l-2]+";";var f=["x","y","z","w","u","v"].slice(0,s),p="."+f[s-1],m=f.map((function(e){return"int "+e})),v=Gf("sourceLocR",s-1).concat("inIdx.r"),g=Gf("sourceLocG",s-1).concat("inIdx.g"),y=Gf("sourceLocB",s-1).concat("inIdx.b"),b=Gf("sourceLocA",s-1).concat("inIdx.a"),w="max"===n?"greaterThan":"lessThan",x=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+v.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+b.join()+")));",k="vec4(\n            getAChannel("+v.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+b.join()+") : 0.)",C=r?"":"\n      float getBestIndicesAChannel("+m.join()+") {\n        return getChannel(getBestIndicesA("+f.join()+"),\n                                          vec2("+f.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+m.join()+") {\n        return getChannel(getA("+f.join()+"),\n                               vec2("+f.slice(-2).join()+"));\n      }\n      "+C+"\n      void main() {\n        "+c+" coords = getOutputCoords();\n        bool hasNextCol = "+d[l-1]+" < "+(u[l-1]-1)+";\n        bool hasNextRow = "+d[l-2]+" < "+(u[l-2]-1)+";\n        "+o+"\n        ivec4 srcIdx = ivec4(sourceLocR"+p+", sourceLocG"+p+",\n          sourceLocB"+p+", sourceLocA"+p+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+k+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+x+"\n          vec4 candidate = "+k+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+w+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},lp=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=s-1-e.padInfo.top,c=u-1-e.padInfo.left,d=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+l+", "+c+");\n      const float avgMultiplier = float("+d+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n            wR += "+i+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+u+";\n            wC+= "+o+") {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},cp=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=c-1-e.padInfo.front,p=d-1-e.padInfo.top,m=h-1-e.padInfo.left,v=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3("+f+", "+p+", "+m+");\n      const float avgMultiplier = float("+v+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+c+";\n            wD += "+s+") {\n          float dyD = float(dyDCorner + wD) / "+a+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+d+";\n              wR += "+u+") {\n            float dyR = float(dyRCorner + wR) / "+i+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+h+";\n                wC += "+l+") {\n              float dyC = float(dyCCorner + wC) / "+o+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},dp=function(e,t,n,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],lf(e,t),lf(e,n);var o="0.0";null!=r&&(lf(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="1.0";null!=a&&(lf(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+o+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+i+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},hp=function(e,t,n,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],lf(e,t),lf(e,n);var o="vec4(0.0)";null!=r&&(lf(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=a&&(lf(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+o+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+i+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},fp=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=lf(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},pp="return a + b;",mp="return a - b;",vp="return a * b;",gp="return (a < 0.) ? b * a : a;",yp=function(e,t,n){this.variableNames=["A","B"],this.outputShape=lf(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},bp="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",wp=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=lf(t,n);var a=this.outputShape.length,i="";if(r)if(0===a||1===$u(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(i="\n          "+ip(a)+" coords = getOutputCoords();\n        ",1===a)i+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var o=Gf("coords",a);i+="\n            bool nextRowOutOfBounds =\n              ("+o[a-2]+" + 1) >= "+this.outputShape[a-2]+";\n            bool nextColOutOfBounds =\n              ("+o[a-1]+" + 1) >= "+this.outputShape[a-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+i+"\n\n        setOutput(result);\n      }\n    "},xp=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),kp=function(){function e(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),Cp=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},Ep=function(e){this.outputShape=[],this.outputShape=Id(e,1),this.variableNames=e.map((function(e,t){return"T"+t}));var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var a=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+a+"));")}var i=t.length,o=t[t.length-1];r.push("else setOutput(getT"+i+"(yR, yC-"+o+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},Sp=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Id(e,t);var n=this.outputShape,r=n.length,a=ip(r),i=Gf("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((function(e,t){return"T"+t}));var s=new Array(e.length-1);s[0]=e[0][t];for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][t];var l=o[t],c=o.slice(-2),d=o.join(),h="if ("+l+" < "+s[0]+") {\n        return getChannel(\n            getT0("+d+"), vec2("+c.join()+"));\n        }";for(u=1;u<s.length;u++){var f=s[u-1];h+="\n        if ("+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+") {\n          return getChannel(\n            getT"+u+"("+_p(o,l,f)+"),\n            vec2("+_p(c,l,f)+"));\n        }"}var p=s.length,m=s[s.length-1];h+="\n        return getChannel(\n          getT"+p+"("+_p(o,l,m)+"),\n          vec2("+_p(c,l,m)+"));",this.userCode="\n      float getValue("+o.map((function(e){return"int "+e}))+") {\n        "+h+"\n      }\n\n      void main() {\n        "+a+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+i+"), 0., 0., 0.);\n\n        "+i[r-1]+" = "+i[r-1]+" + 1;\n        if ("+i[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+i+");\n        }\n\n        "+i[r-2]+" = "+i[r-2]+" + 1;\n        if ("+i[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+i+");\n        }\n\n        "+i[r-1]+" = "+i[r-1]+" - 1;\n        if ("+i[r-2]+" < "+n[r-2]+" &&\n            "+i[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+i+");\n        }\n        setOutput(result);\n      }\n    "};function _p(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?e+" - "+n:e})).join()}var Ap=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+a+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              if ("+i+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ip=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i="channelsLast"===e.dataFormat,o=t-1-e.padInfo.top,s=n-1-e.padInfo.left,u=i?1:2,l=i?2:3,c=i?3:1;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+c+"];\n\n        ivec2 dyCorner = ivec2(coords["+u+"], coords["+l+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n\n              if ("+i+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Tp=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+a+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+i+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+o+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Rp=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=t-1-e.padInfo.front,u=n-1-e.padInfo.top,l=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+s+", "+u+", "+l+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+a+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+i+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+o+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Np=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+i+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+a+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Dp=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,o=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Mp=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4,p="channelsLast"===e.dataFormat,m=p?1:2,v=p?2:3,g=p?3:1,y="",b="";n&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",b="result = activation(result);");var w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+y+"\n\n      const ivec2 strides = ivec2("+o+", "+s+");\n      const ivec2 pads = ivec2("+a+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+g+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+m+"], coords["+v+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+c+"; wR++) {\n          int xR = xRCorner + wR * "+u+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+d+"; wC++) {\n            int xC = xCCorner + wC * "+l+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+h+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+p+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===f)+") {\n\n              if ("+p+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+h+") *\n                    getW(wR, wC, "+h+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+h+", xR, xC) *\n                    getW(wR, wC, "+h+", d2);\n              }\n\n            } else if ("+(2===f)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2)\n              );\n\n              if ("+p+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===f)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2),\n                getW(wR, wC, "+h+" + 2, d2)\n              );\n\n              if ("+p+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1),\n                  getX(batch, xR, xC, "+h+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC),\n                  getX(batch, "+h+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+w+"\n        "+b+"\n        setOutput(result);\n      }\n    "},Op=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterDepth,d=e.filterHeight,h=e.filterWidth,f=4*Math.floor(e.inChannels/4),p=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+a+", "+i+", "+o+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+c+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+d+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+h+"; wC++) {\n              int xC = xCCorner + wC * "+l+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+f+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===p)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+f+") *\n                  getW(wF, wR, wC, "+f+", d2);\n              } else if ("+(2===p)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+f+"),\n                  getX(batch, xF, xR, xC, "+f+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+f+", d2),\n                  getW(wF, wR, wC, "+f+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===p)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+f+"),\n                  getX(batch, xF, xR, xC, "+f+" + 1),\n                  getX(batch, xF, xR, xC, "+f+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+f+", d2),\n                  getW(wF, wR, wC, "+f+" + 1, d2),\n                  getW(wF, wR, wC, "+f+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Pp=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.inHeight,i=e.inWidth,o=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,p=e.outChannels/e.inChannels,m="",v="";n&&(m=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",v="result = activation(result);");var g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+m+"\n\n      const ivec2 strides = ivec2("+u+", "+l+");\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+p+";\n        int q = d2 - d1 * "+p+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+h+"; wR++) {\n          int xR = xRCorner + wR * "+c+";\n\n          if (xR < 0 || xR >= "+a+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC++) {\n            int xC = xCCorner + wC * "+d+";\n\n            if (xC < 0 || xC >= "+i+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+g+"\n        "+v+"\n        setOutput(result);\n      }\n    "},Fp=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var a=e.inHeight,i=e.inWidth,o=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,p=f,m="int xR; int xC; int xCOffset;",v=0;v<h;v++)for(var g=0;g<f;g++)m+="\n          vec4 xTexelR"+v+"C"+2*g+" = vec4(0.);\n          vec4 wR"+v+"C"+g+" = vec4(0.);\n          vec4 xR"+v+"C"+g+" = vec4(0.);";for(v=0;v<h;v++)for(var y=0;y<p;y++){if(m+="\n          xR = xRCorner + "+v*c+";\n          xC = xCCorner + "+(g=2*y)*d+";\n        ",1===l){if(g<f&&(m+=s%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+a+" && xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+v+"C"+g+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+i+") {\n                    xTexelR"+v+"C"+g+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+v+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+a+" && xCOffset >= 0 && xCOffset < "+i+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+i+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+v+"C"+g+" = vec4(previous.zw, xTexelR"+v+"C"+g+".xy);\n                } else {\n                  xR"+v+"C"+g+" = vec4(0, 0, xTexelR"+v+"C"+g+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+a+" && xC >= 0 && xC < "+i+") {\n                  xTexelR"+v+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+v+"C"+g+" = vec4(0.);\n                }\n\n                xR"+v+"C"+g+" = xTexelR"+v+"C"+g+";\n              ",g+1<f)){var b=s%2==0?Xu(d):d;d%2==0&&s%2==1||d%2!=0&&s%2!=1?(m+="\n                  xCOffset = xC + "+s%2+" + "+b+";\n\n                  if(xR >= 0 && xR < "+a+" &&\n                    xCOffset >= 0 && xCOffset < "+i+") {\n                    xTexelR"+v+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",d>1&&(m+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+a+" &&\n                      xCOffset >= 0 && xCOffset < "+i+") {\n                      xTexelR"+v+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+v+"C"+g+" = vec4(0.);\n                    }\n                  "),m+="\n                  xR"+v+"C"+(g+1)+" = vec4(\n                    xTexelR"+v+"C"+g+".zw, xTexelR"+v+"C"+(g+2)+".xy);\n                "):m+="\n                  xCOffset = xC + "+b+";\n\n                  if(xR >= 0 && xR < "+a+" &&\n                    xCOffset >= 0 && xCOffset < "+i+") {\n                    xTexelR"+v+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+v+"C"+(g+1)+" = xTexelR"+v+"C"+(g+2)+";\n                "}}else g<f&&(m+="\n              if(xR >= 0 && xR < "+a+") {\n            ",s%2==1?(m+="\n                xCOffset = xC + 1 - "+l+";\n                if(xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+v+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+v+"C"+g+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+i+") {\n                  xTexelR"+v+"C"+(g+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+v+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+v+"C"+g+" = vec4(\n                  xTexelR"+v+"C"+g+".zw, xTexelR"+v+"C"+(g+2)+".zw);\n              ",g+1<f&&(m+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+l+";\n                  if(xCOffset >= 0 && xCOffset < "+i+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+v+"C"+(g+1)+" = vec4(xTexelR"+v+"C"+(g+2)+".xy, final.xy);\n                ")):(m+="\n                if(xC >= 0 && xC < "+i+") {\n                  xTexelR"+v+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+v+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+l+";\n                if(xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+v+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+v+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+v+"C"+g+" = vec4(\n                  xTexelR"+v+"C"+g+".xy, xTexelR"+v+"C"+(g+2)+".xy);\n              ",g+1<f&&(m+="\n                  xR"+v+"C"+(g+1)+" = vec4(\n                    xTexelR"+v+"C"+g+".zw, xTexelR"+v+"C"+(g+2)+".zw);\n                ")),m+="}");g<f&&(m+="\n            vec4 wTexelR"+v+"C"+g+" = getW("+v+", "+g+", d1, q);\n            wR"+v+"C"+g+" = vec4(wTexelR"+v+"C"+g+".xz, wTexelR"+v+"C"+g+".xz);\n          ",g+1<f&&(m+="\n              vec4 wTexelR"+v+"C"+(g+1)+" = getW("+v+", "+(g+1)+", d1, q);\n              wR"+v+"C"+(g+1)+" =\n                vec4(wTexelR"+v+"C"+(g+1)+".xz, wTexelR"+v+"C"+(g+1)+".xz);"))}for(v=0;v<h;v++)for(g=0;g<f;g++)m+="dotProd += xR"+v+"C"+g+" * wR"+v+"C"+g+";";var w="",x="";n&&(w=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",x="result = activation(result);");var k=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+w+"\n\n      const ivec2 strides = ivec2("+u+", "+l+");\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+m+"\n\n        vec4 result = dotProd;\n        "+k+"\n        "+x+"\n        setOutput(result);\n      }\n    "},Lp=function(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],o=e[1],s=e[2],u=e[3],l=t[0],c=n[0],d=n[1];this.outputShape=[l,c,d,u];var h="bilinear"===r?1:0,f=[o-1+".0",s-1+".0"],p=f[0],m=f[1],v=c>1?[""+(o-1)/(c-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],g=v[0],y=v[1],b=v[2],w=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],x=w[0],k=w[1],C=w[2];this.userCode="\n      const float height_ratio = float("+g+");\n      const float width_ratio = float("+x+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+i+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+k+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+p+" ) {\n          setOutput(float("+a+"));\n          return;\n        }\n        float in_x = "+C+";\n        if( in_x < 0.0 || in_x > "+m+" ) {\n          setOutput(float("+a+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+h+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},Bp=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,a=e[e.length-1],i=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+a+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+ip(r)+" coords = getOutputCoords();\n        int end = "+jp(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+a+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+i+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+jp(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function jp(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var zp=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=lc.DENSE;var t=gc(e),n=Kf();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Xf(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},Up=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=lc.DENSE;var t=gc(e),n=Kf();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Xf(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},Vp=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),Wp=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},Hp=function(e){this.variableNames=["A"],this.outTexUsage=cc.DOWNLOAD;var t=Kf();this.outputShape=e,this.userCode="\n      "+qf+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},Gp=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=cc.DOWNLOAD;var t=Kf();this.outputShape=e,this.userCode="\n      "+qf+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},Kp=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=Kf(),a=t[0],i=t[1];this.outputShape=e;var o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode="\n      "+Yf(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+i+";\n        int c = imod(flatIndex, "+i+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+i+".0, "+a+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+o+", 0., 0., 0.);\n      }\n    "},Xp=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Kf(),a=t[0],i=t[1];this.outputShape=e;var o="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;o+="\n          localCoords = coords;\n          if(localCoords[2] + "+l+" < "+e[2]+") {\n            localCoords[2] += "+l+";\n            if(localCoords[1] + "+u+" < "+e[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+i+";\n              c = imod(flatIndex, "+i+");\n              uv = (vec2(c, r) + halfCR) / vec2("+i+".0, "+a+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+c+"] = values[0];\n              } else if(offset == 1) {\n                result["+c+"] = values[1];\n              } else if(offset == 2) {\n                result["+c+"] = values[2];\n              } else {\n                result["+c+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+Yf(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+o+"\n\n        "+r.output+" = "+s+";\n      }\n    "},Yp=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var a=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+a+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+i+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},qp=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),Zp=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var a=ip(this.rank),i=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],i=0;i<e.length;i++)i===t?a.push("int(getIndices("+r[i]+"))"):a.push(""+r[i]);return a.join()}(e,n);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "},Qp=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=ip(t.length),a=ip(n.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+a+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+i+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function Jp(e,t){var n=Kf();return Ec(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function $p(e,t){return Dc(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function em(e,t){return Mc(e,t,new Uint16Array([0,1,2,2,1,3]))}function tm(e,t,n,r,a,i,o){Pc(n,r);var s=Oc(e,t),u=e.TEXTURE_2D;return wc(e,t,(function(){return e.bindTexture(u,s)})),wc(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),wc(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),wc(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)})),wc(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)})),wc(e,t,(function(){return e.texImage2D(u,0,a,n,r,0,i,o,null)})),wc(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),s}function nm(e,t,n,r,a){var i=vc(n,r);return tm(e,t,i[0],i[1],a.internalFormatFloat,a.textureFormatFloat,e.FLOAT)}function rm(e,t,n,r,a){var i=vc(n,r);return tm(e,t,i[0],i[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function am(e,t,n,r,a){var i=vc(n,r);return tm(e,t,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function im(e,t,n,r,a){var i=yc(n,r);return tm(e,t,i[0],i[1],a.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function om(e,t,n,r,a){var i=yc(n,r);return tm(e,t,i[0],i[1],a.internalFormatPackedHalfFloat,e.RGBA,a.textureTypeHalfFloat)}function sm(e,t,n,r){return wc(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),Lc(e,t,n,"clipSpacePos",r,3,20,0)&&Lc(e,t,n,"uv",r,2,20,12)}function um(e,t,n,r,a,i,o){var s,u,l;wc(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),i instanceof Uint8Array?(s=new Uint8Array(r*a*4),u=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(r*a*4),u=e.FLOAT,l=o.internalFormatPackedFloat),s.set(i),wc(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,l,r,a,0,e.RGBA,u,s)})),wc(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function lm(e,t,n,r){wc(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),r.data instanceof Uint8Array?wc(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)})):wc(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})),wc(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function cm(e,t,n,r,a){var i=e.createBuffer();wc(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)}));var o=16*n*r;return wc(e,t,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)})),wc(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)})),wc(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),i}function dm(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function hm(e,t,n,r,a){var i=vc(n,r),o=i[0],s=i[1],u=new Uint8Array(n*r*4);return wc(e,t,(function(){return e.readPixels(0,0,o,s,a.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}function fm(e,t,n,r,a,i,o,s){var u=e,l=new Float32Array(function(e,t){var n=yc(e,t);return n[0]*n[1]*4}(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function pm(e,t,n,r){var a=new Float32Array(n*r*4);return wc(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,a)})),a}var mm=Object.freeze({createVertexShader:Jp,createVertexBuffer:$p,createIndexBuffer:em,createFloat32MatrixTexture:nm,createFloat16MatrixTexture:rm,createUnsignedBytesMatrixTexture:am,createPackedMatrixTexture:im,createFloat16PackedMatrixTexture:om,bindVertexProgramAttributeStreams:sm,uploadDenseMatrixToTexture:um,uploadPixelDataToTexture:lm,createBufferFromOutputTexture:cm,downloadFloat32MatrixFromBuffer:dm,downloadByteEncodedFloatMatrixFromOutputTexture:hm,downloadPackedMatrixFromBuffer:fm,downloadMatrixFromPackedOutputTexture:pm}),vm=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=Fu().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,pc(t,e)):this.gl=mc(t);var n="WEBGL_color_buffer_float";if(1===Fu().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=Cc(this.gl,this.debug,"OES_texture_float"),rd(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Cc(this.gl,this.debug,"OES_texture_half_float");else if(Fu().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),rd(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Cc(this.gl,this.debug,"EXT_color_buffer_half_float");else if(Fu().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",rd(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!rd(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=$p(this.gl,this.debug),this.indexBuffer=em(this.gl,this.debug),this.framebuffer=Fc(this.gl,this.debug),this.textureConfig=bc(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return Fu().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;wc(t,this.debug,(function(){return t.finish()})),wc(t,this.debug,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),wc(t,this.debug,(function(){return t.deleteFramebuffer(e.framebuffer)})),wc(t,this.debug,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),wc(t,this.debug,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),wc(t,this.debug,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),nm(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),rm(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),am(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),lm(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),um(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),om(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),im(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Wc(this.gl,this.debug,this.framebuffer),this.outputTexture=null),wc(this.gl,this.debug,(function(){return t.gl.deleteTexture(e)}))},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return hm(r.gl,r.debug,t,n,r.textureConfig)}))},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,a,i){return fm(this.gl,e,0,0,0,a,i,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return dm(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=cm(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(Fu().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else Fu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,Fu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return pm(r.gl,r.debug,t,n)}))},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=Sc(t,this.debug,e),r=Jp(t,this.debug),a=Tc(t,this.debug);return wc(t,this.debug,(function(){return t.attachShader(a,r)})),wc(t,this.debug,(function(){return t.attachShader(a,n)})),Rc(t,this.debug,a),this.debug&&Nc(t,this.debug,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=sm(t,this.debug,this.program,this.vertexBuffer)),a},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&wc(this.gl,this.debug,(function(){return t.gl.deleteProgram(e)}))},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&Nc(this.gl,this.debug,this.program),wc(this.gl,this.debug,(function(){return t.gl.useProgram(e)}))},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?jc(this.gl,this.debug,e,t):zc(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),wc(this.gl,this.debug,(function(){return n.gl.getAttribLocation(e,t)}))},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Uc(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=yc(t,n),a=r[0],i=r[1];this.setOutputMatrixTextureDriver(e,a,i)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&Nc(this.gl,this.debug,this.program),Hc(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),wc(e,this.debug,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),wc(this.gl,this.debug,(function(){return e.gl.finish()}))},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=Cc(this.gl,this.debug,2===Fu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===Fu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a},e.prototype.endQuery=function(){if(2!==Fu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return Du(this,void 0,void 0,(function(){var t=this;return Mu(this,(function(n){switch(n.label){case 0:return[4,il((function(){return t.disposed||t.isQueryAvailable(e,Fu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return n.sent(),[2,this.getQueryTime(e,Fu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}return a=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||il((function(){return n.pollItems(),0===n.itemsToPoll.length}))},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),Vc(this.gl,this.debug,e,this.framebuffer),this.debug&&Hc(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(Vc(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Hc(this.gl)):Wc(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;Vc(r,this.debug,e,this.framebuffer),this.debug&&Hc(r),this.outputTexture=e,wc(r,this.debug,(function(){return r.viewport(0,0,t,n)})),wc(r,this.debug,(function(){return r.scissor(0,0,t,n)}))},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var a=this;this.throwIfDisposed(),wc(this.gl,this.debug,(function(){return a.gl.scissor(e,t,n,r)}))},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function gm(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!el(r,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+i+" must match");if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!el(o,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+o+" and "+s+" must match")}}))}var ym=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,a=n.inChannels,i=n.strideWidth,o=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,d=n.dataFormat,h=s.left,f=s.top,p=a*r,m=Kf(),v="channelsLast"===d,g=v?0:1,y=v?1:2,b="",w=0;w<=1;w++)for(var x=0;x<=1;x++)b+="\n          blockIndex = rc.y + "+x+";\n          pos = rc.x + "+w+";\n\n          if(blockIndex < "+e[1]+" && pos < "+e[0]+") {\n            offsetY = int(blockIndex / ("+u+")) * "+o+" - "+f+";\n            d0 = offsetY + "+c+" * (pos / "+p+");\n\n            if(d0 < "+t[g]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+u+".) * "+i+". - "+h+".);\n              d1 = offsetX + "+l+" * (int(mod(float(pos), "+p+".) / "+a+".));\n\n              if(d1 < "+t[y]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+a+".));\n\n                if ("+v+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*w+x)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*w+x)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+b+"\n\n        "+m.output+" = result;\n      }\n    "},bm=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];var i,o=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";i=.5===a?"inversesqrt("+u+")":1===a?"1.0/("+u+")":"exp(log("+u+") * float(-"+a+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+o+"; j <= "+o+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+i+";\n        setOutput(val);\n      }\n    "},wm=function(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+a+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+a+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},xm=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,o=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";i=.5===a?"inversesqrt("+u+")":1===a?"1.0/("+u+")":"exp(log("+u+") * float(-"+a+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+o+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+o+"; j <= "+o+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+s+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+i+";\n        setOutput(result);\n      }\n    "},km=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=a-1-e.padInfo.top,s=i-1-e.padInfo.left,u=a*i-1;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+a+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+i+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+u+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+i+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Cm=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterDepth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=s-1-e.padInfo.front,d=u-1-e.padInfo.top,h=l-1-e.padInfo.left,f=s*u*l-1;this.userCode="\n      const ivec3 pads = ivec3("+c+", "+d+", "+h+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+s+";\n           wD += "+a+") {\n          float dyD = float(dyDCorner + wD) / "+t+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+i+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+l+";\n                wC += "+o+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+f+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+u+" * "+l+" +\n                  wR * "+l+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Em=function(e,t,n,r,a,i,o){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===i&&(i=null),void 0===o&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var s=n?e[1]:e[2],u=Math.ceil(s/2),l=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",d=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],f="",p="";i&&(f=o?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+i+"\n        }":"vec4 activation(vec4 x) {\n          "+i+"\n        }",p="result = activation(result);");var m=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+f+"\n\n      const float sharedDimension = "+u+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+u+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+l+");\n          vec4 b = getMatrixB(rc.x, "+c+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+d[0]+" * "+h[0]+");\n          result += ("+d[1]+" * "+h[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+m+"\n\n        "+p+"\n\n        setOutput(result);\n      }\n    "},Sm=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),_m=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},Am=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=Gf("rc",t),r=ip(t),a=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",a=e-2;a<e;a++)r+=n[a]+" >= "+t[a],a<e-1&&(r+="||");return r}(t,e,n),i=function(e,t,n,r){if(1===e)return"";var a=r.slice(-2);return"\n    int r = "+a[0]+";\n    int c = "+a[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),o=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var a=0;a<=1;a++){for(var i=(0===r?"r":"rp1")+", "+(0===a?"c":"cp1"),o=2;o<e;o++)i=t[t.length-1-o]+","+i;n.push(i)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+a+") {\n            setOutput(vec4(0));\n          } else {\n            "+i+"\n\n            setOutput(vec4("+o+"));\n          }\n        }\n      "}},Im=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));var r=e.length,a=ip(r),i=t.map((function(e){return e[0]})).join(","),o=t.map((function(t,n){return t[0]+e[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+a+" start = "+a+"("+i+");\n      "+a+" end = "+a+"("+o+");\n\n      void main() {\n        "+a+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+a+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+i+";\n        int end = "+o+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},Tm=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));for(var r=e.length,a=ip(r),i=t.map((function(e){return e[0]})).join(","),o=t.map((function(t,n){return t[0]+e[n]})).join(","),s=Gf("rc",r),u=Gf("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=1===r?"source":"vec2("+u.slice(-2).join()+")",d=[a+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+l+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+l+") {"],h=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",f="",p=0,m=1===r?2:4;p<m;p++)f+="\n        "+d[p]+"\n        if ("+h+") {\n          result["+p+"] = float("+n+");\n        } else {\n          "+a+" source = rc - start;\n          result["+p+"] = getChannel(getX("+u.join()+"), "+c+");\n        }\n      ";f+=1===r?"} ":"}}",this.userCode="\n      const "+a+" start = "+a+"("+i+");\n      const "+a+" end = "+a+"("+o+");\n\n      void main() {\n        "+a+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+f+"\n        setOutput(result);\n      }\n    "},Rm=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=e.padInfo.top,d=e.padInfo.left;this.outputShape=e.outShape;var h="avg"===t,f="0.0";if(h||(f="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+a+", "+i+");\n        const ivec2 pads = ivec2("+c+", "+d+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+o+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+l+";\n                wC += "+s+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+l+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var p=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(p="avgValue / count");var m=4*Math.floor(r/4),v=r%4,g="\n      if ("+h+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+a+", "+i+");\n      const ivec2 pads = ivec2("+c+", "+d+");\n      const float initializationValue = "+f+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+f+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+u+";\n            wR += "+o+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+m+"; wC += 4) {\n            int xC = xCCorner + wC * "+s+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              getValue(batch, xR, xC + 3 * "+s+", d)\n            );\n\n            "+g+"\n          }\n\n          int xC = xCCorner + "+m+";\n          if ("+(1===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(2===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(3===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              initializationValue\n            );\n\n            "+g+"\n          }\n        }\n        setOutput("+p+");\n      }\n    "}},Nm=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=e.padInfo.front,p=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;var v="avg"===t,g="0.0";if(v||(g="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+a+", "+i+", "+o+");\n        const ivec3 pads = ivec3("+f+", "+p+", "+m+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+c+";\n              wD += "+s+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+d+";\n                wR += "+u+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+h+";\n                  wC += "+l+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+d+" * "+h+" +\n                      wR * "+h+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var y=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(y="avgValue / count");var b=4*Math.floor(r/4),w=r%4,x="\n      if ("+v+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+a+", "+i+", "+o+");\n      const ivec3 pads = ivec3("+f+", "+p+", "+m+");\n      const float initializationValue = "+g+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+g+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+c+";\n            wD += "+s+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+d+";\n            wR += "+u+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+b+"; wC += 4) {\n              int xC = xCCorner + wC * "+l+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+l+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+l+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+l+", ch)\n              );\n\n              "+x+"\n            }\n\n            int xC = xCCorner + "+b+";\n            if ("+(1===w)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+x+"\n            } else if ("+(2===w)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+l+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+x+"\n            } else if ("+(3===w)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+l+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+l+", ch),\n                initializationValue\n              );\n\n              "+x+"\n            }\n          }\n          setOutput("+y+");\n        }\n      }\n    "}},Dm=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,a=e.inSize,i=Math.ceil(a/n);this.outputShape=[r,i];var o="0.0",s="";"prod"===t?o="1.0":"min"===t?(o="1.0 / 1e-20",s="min"):"max"===t&&(o="-1.0 / 1e-20",s="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?u="sumValue":"prod"===t?u="prodValue":"all"===t?u="allValue":"any"===t&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,d="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",h="vec4";"all"===t?(o="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===t&&(o="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var f="";a%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+o+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+f+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+o+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+d+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+d+"\n        } else if ("+(2===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+d+"\n        } else if ("+(3===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+d+"\n        }\n        setOutput("+u+");\n      }\n    "},Mm=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),n+="\n        "+a+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+Xf(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+Yf(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},Om=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],i=r[2],o=e.shape,s=o[1],u=o[2],l=[n&&s>1?a-1:a,n&&u>1?i-1:i],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],d=l[0]/c[0],h=l[1]/c[1],f=1/d,p=1/h,m=2*Math.ceil(f)+2,v=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+d+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+f+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+v+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(a-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(i-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Pm=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?i-1:i,r&&n>1?o-1:o],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+o+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},Fm=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?i-1:i,r&&n>1?o-1:o],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+",\n          "+u[1]/l[1]+");\n      const vec3 inputShapeRC = vec3("+i+".0, "+o+".0,\n                                     "+o+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(s-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},Lm=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],i=r[2],o=e.shape,s=o[1],u=o[2],l=[n&&s>1?a-1:a,n&&u>1?i-1:i],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],d=l[0]/c[0],h=l[1]/c[1],f=1/d,p=1/h,m=2*Math.ceil(f)+2,v=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+d+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+f+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+v+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+l[0]+") *\n                (float(dyR) / float("+c[0]+"));\n\n            float sourceFracCol =\n                float("+l[1]+") *\n                  (float(dyC) / float("+c[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Bm=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],i=e[1],o=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?i-1:i,r&&n>1?o-1:o],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+o+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+c+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},jm=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map((function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)})).join(","),a=ip(n);this.userCode="\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},zm=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=Gf("rc",n),a=r[n-1]+" + 1 < "+this.outputShape[n-1],i=r[n-2]+" + 1 < "+this.outputShape[n-2],o=ip(n);function s(n){var r=e.map((function(r,a){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(a,n)}));return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+a+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+o+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(e){return s(e)}(r.slice())+";\n          if("+a+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())+";\n          }\n          if("+i+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            if("+a+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},Um=function(e,t,n,r,a,i,o){void 0===o&&(o=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=ip(a.length),u=ip(i.length),l="";1===n?l="i":2===n&&(l="i, j");var c="getIndices("+l+")",d="";1===r?d="i":2===r&&(d="i, coords[1]");var h="getUpdates("+d+")",f=t>1?"strides[j]":"strides";this.userCode="\n        "+s+" strides = "+s+"("+a+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+c+");\n              flattenedIndex += index * "+f+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+h+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},Vm=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,a=e.inSize,i=e.numSegments,o=i*Math.ceil(a/n);this.outputShape=[r,o];var s=4*Math.floor(n/4),u=n%4,l="\n        sumValue += dot(values, segFilter);\n    ",c="";a%n>0&&(c="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return initializationValue;\n        }\n      ");var d="";a%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+d+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+i+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+i+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+l+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+l+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+l+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+l+"\n        }\n        setOutput(sumValue);\n      }\n    "},Wm=function(e,t,n){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)a="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[],u=0;u<t.length;u++)s.push(""+i[u]),u<e&&o.push(""+i[u]);r=o.join(),a=s.join()}var l=ip(n);this.userCode="\n      void main() {\n        "+l+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+a+"));\n        } else {\n          setOutput(getB("+a+"));\n        }\n      }\n    "},Hm=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=ip(this.rank),r="uniform int start["+this.rank+"];",a=function(e){if(1===e)return"sourceLoc";if(e<=6)return Gm.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map((function(e,t){return"sourceLoc."+Gm[t]+" = start["+t+"] + coords."+Gm[t]+";"})).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+a+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Gm=["x","y","z","w","u","v"],Km=function(){function e(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=ip(this.rank),n=Gf("coords",this.rank),r=Gf("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",i="getChannel(getSource("+r.join()+"), "+a+")",o="\n      result.x = "+i+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+i+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+i+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+i+";\n        }\n      }\n    ",u=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map((function(e,t){return"start["+t+"]"})).join()+");":e.map((function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"})).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+u+"\n        vec4 result = vec4(0.);\n        "+o+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Xm=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,a=ip(n.length),i=ip(n.length),o="";if(1===r)o="coords * strides + begin";else{var s=0;o=n.map((function(e,t){return s++,1===n.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(s-1)+"] * strides["+t+"] + begin["+t+"]"})).join(",")}this.userCode="\n      "+a+" begin = "+a+"("+e+");\n      "+a+" strides = "+a+"("+t+");\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+o+"));\n      }\n    "},Ym=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,a=qm(t,n),i=Zm(e,a,n);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var o=this.freeTextures[i].shift();return this.usedTextures[i].push(o),o}return this.numUsedTextures++,this.log(),a===dc.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===dc.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===dc.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===dc.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===dc.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var a=Zm(t,qm(n,r),r);a in this.freeTextures||(this.freeTextures[a]=[]),this.freeTextures[a].push(e),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[a],o=i.indexOf(e);if(o<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(o,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var t in this.usedTextures)this.usedTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function qm(e,t){if(e===cc.UPLOAD)return dc.PACKED_2X2_FLOAT32;if(e===cc.RENDER||null==e)return function(e){return Fu().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?dc.PACKED_2X2_FLOAT32:dc.UNPACKED_FLOAT32:e?dc.PACKED_2X2_FLOAT16:dc.UNPACKED_FLOAT16}(t);if(e===cc.DOWNLOAD||e===cc.PIXELS)return dc.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function Zm(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var Qm=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var a=ip(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod("+n[a]+", "+e[a]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "},Jm=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var a=ip(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(t);this.userCode="\n    void main() {\n      "+a+" resRC = getOutputCoords();\n      setOutput(getA("+i+"));\n    }\n    "},$m=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=ip(this.rank),i=Hf("rc",this.rank),o=new Array(this.rank);for(r=0;r<t.length;r++)o[t[r]]=i[r];var s="vec2("+o.slice(-2).join()+")",u="++"+i[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+o.join()+"), "+s+")";this.userCode="\n    void main() {\n      "+a+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+l+";\n      if("+u+") {\n        result[1] = "+l+";\n      }\n      --"+i[this.rank-1]+";\n      if(++"+i[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+l+";\n        if("+u+") {\n          result[3] = "+l+";\n        }\n      }\n      setOutput(result);\n    }\n    "},ev=1.7580993408473768,tv=1.0507009873554805,nv=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},rv="if (isnan(x)) return x;",av="return abs(x);",iv=rv+"\n  return (x < 0.0) ? 0.0 : x;\n",ov=rv+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",sv="return (x >= 0.0) ? x : (exp(x) - 1.0);",uv="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+ev+";\n  float scale = "+tv+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",lv="return -x;",cv="return ceil(x);",dv="return floor(x);",hv="return exp(x);",fv="return exp(x) - 1.0;",pv=rv+"\n  return sin(x);\n",mv=rv+"\n  return cos(x);\n",vv=rv+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",gv=rv+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",yv=rv+"\n  return atan(x);\n",bv=rv+"return log(x + sqrt(x * x + 1.0));",wv=rv+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",xv=rv+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",kv="return x;",Cv="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Ev="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Sv="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",_v=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Av=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=Gf("rc",t),r=ip(t),a=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),i=n.slice(-2),o=t<=1?"rc":"vec2("+i.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+a+");\n\n        setOutput(getChannel(packedInput, "+o+"));\n      }\n    "},Iv={};function Tv(e,t){if(void 0===t&&(t=!1),"linear"===e)return"return x;";if("relu"===e)return t?Cv:iv;if("elu"===e)return t?Sv:sv;if("relu6"===e)return t?Ev:ov;if("prelu"===e)return t?bp:gp;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var Rv=function(e){function t(t){var n,r=e.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!Fu().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){var a=mc(Fu().getNumber("WEBGL_VERSION"));r.binaryCache=((n=Fu().getNumber("WEBGL_VERSION"))in Iv||(Iv[n]={}),Iv[n]),r.gpgpu=new vm(a),r.canvas=a.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=t,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=t.gl.canvas;return r.textureManager=new Ym(r.gpgpu),r.numMBBeforeWarning=null==Fu().global.screen?1024:Fu().global.screen.height*Fu().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new rf(r,oc),r}return Nu(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(e,t,n){if(Fu().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:cc.UPLOAD}),r},t.prototype.move=function(e,t,n,r){if(Fu().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:cc.UPLOAD})},t.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensors,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var u;u=s?new _v(o,kv):new nv(o,kv);var l=this.runWebGLProgram(u,[{dataId:e,shape:o,dtype:r}],r),c=this.readSync(l.dataId);return this.disposeData(l.dataId),c}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,h,f=null!=this.activeTimers;return f&&(d=Il()),h="complex64"===r?Sf(a.real.dataSync(),a.imag.dataSync()):this.getValuesFromTexture(e),f&&(this.downloadWaitMs+=Il()-d),this.convertAndCacheOnCPU(e,h)},t.prototype.read=function(e){return Du(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,u,l,c,d,h,f,p,m,v,g,y,b,w,x,k;return Mu(this,(function(C){switch(C.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise((function(e){return t.push(e)}))];if(n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.complexTensors,u=n.isPacked,null!=i)return void 0,l=u?new _v(a,kv):new nv(a,kv),c=this.runWebGLProgram(l,[{dataId:e,shape:a,dtype:o}],o),d=this.read(c.dataId),this.disposeData(c.dataId),[2,d];if(null!=r)return[2,this.convertAndCacheOnCPU(e)];if(!Fu().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Fu().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return h=null,"complex64"!==o&&Fu().get("WEBGL_BUFFER_SUPPORTED")&&(f=this.decode(e),p=this.texData.get(f.dataId),h=(k=this.gpgpu).createBufferFromTexture.apply(k,[p.texture].concat(gc(a)))),this.pendingRead.set(e,[]),"complex64"===o?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:C.sent(),C.label=2;case 2:return"complex64"!==o?[3,4]:[4,Promise.all([s.real.data(),s.imag.data()])];case 3:return v=C.sent(),g=v[0],y=v[1],m=Sf(g,y),[3,5];case 4:null==h?m=this.getValuesFromTexture(e):(b=$u(a),m=this.gpgpu.downloadFloat32MatrixFromBuffer(h,b)),C.label=5;case 5:return null!=f&&this.disposeData(f.dataId),w=this.convertAndCacheOnCPU(e,m),x=this.pendingRead.get(e),this.pendingRead.delete(e),x.forEach((function(e){return e(w)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,w]}}))}))},t.prototype.checkNumericalProblems=function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!xc(n)){if(Fu().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},t.prototype.getValuesFromTexture=function(e){var t,n=this.texData.get(e),r=n.shape,a=n.dtype,i=n.isPacked,o=$u(r);if(Fu().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s=this.decode(e),u=this.texData.get(s.dataId),l=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[u.texture].concat(gc(r))).subarray(0,o);return this.disposeData(s.dataId),l}var c=Fu().getBool("WEBGL_PACK")&&!0===i,d=c?Zc(r):r,h=c?new Gp(d):new Hp(d),f=this.runWebGLProgram(h,[{shape:d,dtype:a,dataId:e}],"float32"),p=this.texData.get(f.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture,p.texShape[0],p.texShape[1]).subarray(0,o);return this.disposeData(f.dataId),m},t.prototype.time=function(e){return Du(this,void 0,void 0,(function(){var t,n,r,a,i,o,s;return Mu(this,(function(u){switch(u.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),a=Ju(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),i=Ju(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=t,r&&(this.programTimersStack=null),o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},Fu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(a)]:[3,2];case 1:return s=u.sent(),o.kernelMs=Yu(s),o.getExtraProfileInfo=function(){return s.map((function(e,t){return{name:i[t],ms:e}})).map((function(e){return e.name+": "+e.ms})).join(", ")},[3,3];case 2:o.kernelMs={error:"WebGL query timers are not supported in this environment."},u.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,o]}}))}))},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return Fu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Il(),endMs:null}},t.prototype.endTimer=function(e){return Fu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Il(),e)},t.prototype.getQueryTime=function(e){return Du(this,void 0,void 0,(function(){var t;return Mu(this,(function(n){return Fu().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]}))}))},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return Fu().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=oc.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,t){var n=this;return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every((function(e){return null==n.texData.get(e.dataId).texture&&e.size<t}))},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,t){var n=this.makeOutput(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:oc.keep(e.clone()),imag:oc.keep(t.clone())},n},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===$u(n))return Md([],n,e.dtype);var r=this.texData.get(e.dataId).isPacked,a=Jh(e.shape,t,n);if(r||!a){var i=Fu().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Km(n):new Hm(n),o=i.getCustomSetupFunc(t);return this.compileAndRun(i,[e],null,o)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},t.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),a=this.makeOutput(n,e.dtype),i=this.texData.get(a.dataId);Object.assign(i,r),i.shape=n,i.dtype=e.dtype;var o=$h(t,e.strides);r.slice&&(o+=r.slice.flatOffset),i.slice={flatOffset:o,origDataId:r.slice&&r.slice.origDataId||e.dataId};var s=this.dataRefCount.get(i.slice.origDataId)||1;return this.dataRefCount.set(i.slice.origDataId,s+1),a},t.prototype.stridedSlice=function(e,t,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r);var a=qh(t,n,r);if(a.some((function(e){return 0===e})))return Md([],a);var i=new Xm(t,r,a);return this.compileAndRun(i,[e])},t.prototype.reverse=function(e,t){var n=Fu().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zm(e.shape,t):new jm(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.concat=function(e,t){if("complex64"===e[0].dtype){var n=e.map((function(e){return Nd(e)})),r=e.map((function(e){return Dd(e)}));return Rd(this.concat(n,t),this.concat(r,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>Fu().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(e.length/2),i=this.concat(e.slice(0,a),t),o=this.concat(e.slice(a),t);return this.concat([i,o],t)}if(Fu().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var s=new Sp(e.map((function(e){return e.shape})),t);return this.compileAndRun(s,e)}var u=Id(e.map((function(e){return e.shape})),t),l=e.map((function(e){return e.as2D(-1,$u(e.shape.slice(t)))})),c=new Ep(l.map((function(e){return e.shape})));return this.compileAndRun(c,l).reshape(u)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(Fu().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,lv,e.dtype);var t=new nv(e.shape,lv);return this.compileAndRun(t,[e])},t.prototype.batchMatMul=function(e,t,n,r){var a=n?e.shape[2]:e.shape[1],i=r?t.shape[1]:t.shape[2],o=n?e.shape[1]:e.shape[2],s=e.shape[0];if((1===a||1===i)&&o>1e3){n&&(e=e.transpose([0,2,1])),r&&(t=t.transpose([0,2,1]));var u=1===i?e:e.as3D(s,o,1),l=1===i?2:1,c=1===i?t.as3D(s,1,o):t;return this.multiply(u,c).sum(l,!0)}var d=Jl(e.dtype,t.dtype),h=new Em(e.shape,[s,a,i],n,r);return this.compileAndRun(h,[e,t],d)},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.bias,o=e.activation,s=e.preluActivationWeights,u=r?t.shape[2]:t.shape[1],l=a?n.shape[1]:n.shape[2],c=t.shape[0],d=Jl(t.dtype,n.dtype),h=null!=i,f=null!=s,p=o?Tv(o,!0):null,m=new Em(t.shape,[c,u,l],r,a,h,p,f),v=[t,n];return i&&v.push(i),s&&v.push(s),this.compileAndRun(m,v,d)},t.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),a=new fp("return areal * breal - aimag * bimag;",e.shape,t.shape),i=new fp("return areal * bimag + aimag * breal;",e.shape,t.shape),o=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag),this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)],s=this.compileAndRun(a,o),u=this.compileAndRun(i,o),l=this.complex(s,u);return s.dispose(),u.dispose(),l}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,vp,e.dtype);var c=new yp(vp,e.shape,t.shape);return this.compileAndRun(c,[e,t],e.dtype)},t.prototype.batchNormalization=function(e,t,n,r,a,i){var o=[e,t,n],s=null;null!=i&&(s=i.shape,o.push(i));var u=null;if(null!=a&&(u=a.shape,o.push(a)),Fu().getBool("WEBGL_PACK_NORMALIZATION")){var l=new hp(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(l,o)}var c=new dp(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(c,o)},t.prototype.localResponseNormalization4D=function(e,t,n,r,a){var i=Fu().getBool("WEBGL_PACK_NORMALIZATION")?new xm(e.shape,t,n,r,a):new bm(e.shape,t,n,r,a);return this.compileAndRun(i,[e])},t.prototype.LRNGrad=function(e,t,n,r,a,i,o){var s=new wm(t.shape,r,a,i,o);return this.compileAndRun(s,[t,n,e])},t.prototype.tile=function(e,t){if("string"===e.dtype){var n=this.readSync(e.dataId).map((function(e){return Nl(e)}));return Bf(ch(e.shape,e.dtype,n),t)}var r=new Qm(e.shape,t);return this.compileAndRun(r,[e])},t.prototype.pad=function(e,t,n){var r=Fu().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Tm(e.shape,t,n):new Im(e.shape,t,n);return this.compileAndRun(r,[e])},t.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t);var n=Fu().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $m(e.shape,t):new Jm(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new Zp(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},t.prototype.batchToSpaceND=function(e,t,n){qu(e.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),a=Lh(e.shape,t,r),i=Bh(a.length,t.length),o=jh(e.shape,t,r),s=zh(n,t.length),u=Uh(o,n,t.length);return e.reshape(a).transpose(i).reshape(o).slice(s,u)},t.prototype.spaceToBatchND=function(e,t,n){qu(e.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),a=[[0,0]];a.push.apply(a,n);for(var i=1+t.length;i<e.shape.length;++i)a.push([0,0]);var o=e.pad(a),s=Lh(o.shape,t,r,!1),u=Bh(s.length,t.length,!1),l=jh(o.shape,t,r,!1);return o.reshape(s).transpose(u).reshape(l)},t.prototype.reduce=function(e,t,n){var r=e.shape[0],a=e.shape[1],i=Wh(a),o=new Dm({windowSize:i,inSize:a,batchSize:r},t),s=this.compileAndRun(o,[e],n);return 1===s.shape[1]?s:this.reduce(s,t,n)},t.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],a=e.shape[1];null!=n&&(r=n.shape[0],a=n.shape[1]);var i=Wh(a),o=new Wf({windowSize:i,inSize:a,batchSize:r},t,null==n),s=[e];null!=n&&s.push(n);var u=this.compileAndRun(o,s,"int32");return 1===u.shape[1]?u:this.argReduce(e,t,u)},t.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n.shape:e.shape,a=Wh(r[r.length-1]),i=new up(r,a,t,null==n),o=null==n?[e]:[e,n],s=this.compileAndRun(i,o,"int32");return s.rank===e.rank?this.argReducePacked(e,t,s):s},t.prototype.sum=function(e,t){Cd("sum",t,e.rank);var n=xd(e.shape,t),r=n[0],a=$u(n[1]),i=e.as2D(-1,a),o=$l(e.dtype);return this.reduce(i,"sum",o).reshape(r)},t.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=xd(e.shape,t),r=n[0],a=$u(n[1]),i=e.as2D(-1,a),o=$l(e.dtype);return this.reduce(i,"prod",o).reshape(r)},t.prototype.unsortedSegmentSum=function(e,t,n){var r=0,a=Ed([r],e.rank),i=e;null!=a&&(i=e.transpose(a),r=_d(1,e.rank)[0]);var o=function(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}(i.shape,r,n),s=$u([i.shape[r]]),u=i.as2D(-1,s),l=$l(e.dtype),c=this.segOpCompute(u,"unsortedSegmentSum",t,l,n).reshape(o);return null!=a&&(c=c.transpose(Sd(a))),c},t.prototype.segOpCompute=function(e,t,n,r,a){var i=e.shape[0],o=e.shape[1],s=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=kl(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=kl(e,n+1);return n}(o,a),u=new Vm({windowSize:s,inSize:o,batchSize:i,numSegments:a},t),l=this.compileAndRun(u,[e,n],r);return l.shape[1]===a?l:(n=Wd(0,a).tile([o/s]),this.segOpCompute(l,t,n,r,a))},t.prototype.argMinMaxReduce=function(e,t,n){var r=[t];if(Cd("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!Fu().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var a=xd(e.shape,r),i=a[0],o=$u(a[1]),s=e.as2D(-1,o);return this.argReduce(s,n).reshape(i)}return this.argReducePacked(e,n)},t.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},t.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},t.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var a=new Bp(e.shape,n,r);return this.compileAndRun(a,[e])},t.prototype.equal=function(e,t){if(Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new yp("return float(a == b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.notEqual=function(e,t){if(Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new yp("return float(a != b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new yp("return float(a < b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.lessEqual=function(e,t){if(Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new yp("return float(a <= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new yp("return float(a > b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greaterEqual=function(e,t){if(Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new yp("return float(a >= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalNot=function(e){var t=new nv(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},t.prototype.logicalAnd=function(e,t){if(Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new yp("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalOr=function(e,t){if(Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new yp("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.select=function(e,t,n){var r=new Wm(e.rank,t.shape,t.rank);return this.compileAndRun(r,[e,t,n],Jl(t.dtype,n.dtype))},t.prototype.where=function(e){pd("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return zf(e.shape,t)},t.prototype.topk=function(e,t,n){return jf(e.dataSync(),e.shape,e.dtype,t)},t.prototype.min=function(e,t){Cd("min",t,e.rank);var n=xd(e.shape,t),r=n[0],a=$u(n[1]),i=e.as2D(-1,a);return this.reduce(i,"min",i.dtype).reshape(r)},t.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wp("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new yp("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.mod=function(e,t){var n=Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wp("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new yp("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);Cd("max",t,e.rank);var n=xd(e.shape,t),r=n[0],a=$u(n[1]),i=e.as2D(-1,a);return this.reduce(i,"max",i.dtype).reshape(r)},t.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wp("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new yp("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.all=function(e,t){Cd("all",t,e.rank);var n=xd(e.shape,t),r=n[0],a=$u(n[1]),i=e.as2D(-1,a);return this.reduce(i,"all",i.dtype).reshape(r)},t.prototype.any=function(e,t){Cd("any",t,e.rank);var n=xd(e.shape,t),r=n[0],a=$u(n[1]),i=e.as2D(-1,a);return this.reduce(i,"any",i.dtype).reshape(r)},t.prototype.realDivide=function(e,t){if(Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var n=new yp("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape);return this.compileAndRun(n,[e,t],"float32")},t.prototype.floorDiv=function(e,t){if(Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new yp("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape);return this.compileAndRun(n,[e,t],"int32")},t.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,pp);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=Jl(e.dtype,t.dtype);if(Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,pp,n);var r=new yp(pp,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.packedUnaryOp=function(e,t,n){var r=new _v(e.shape,t);return this.compileAndRun(r,[e],n)},t.prototype.packedBinaryOp=function(e,t,n,r,a){void 0===a&&(a=!1);var i=new wp(n,e.shape,t.shape,a);return this.compileAndRun(i,[e,t],r)},t.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,a=this.texData.get(e.dataId),i=this.texData.get(t.dataId),o=[[a.complexTensors.real,i.complexTensors.real],[a.complexTensors.imag,i.complexTensors.imag]].map((function(a){var i=a[0],o=a[1],s=r.makeComplexComponentTensorInfo(e,i),u=r.makeComplexComponentTensorInfo(t,o),l=new yp(n,e.shape,t.shape);return r.compileAndRun(l,[s,u],Jl(i.dtype,o.dtype))})),s=o[0],u=o[1],l=this.complex(s,u);return s.dispose(),u.dispose(),l},t.prototype.makeComplexComponentTensorInfo=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},t.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>Fu().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var a=e.map((function(e){return e.dtype})).reduce((function(e,t){return Jl(e,t)})),i=e.map((function(e){return e.shape})),o=Fu().getBool("WEBGL_PACK")?new Vf(e[0].shape,i):new Uf(e[0].shape,i);return this.compileAndRun(o,e,a)},t.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,mp);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=Jl(e.dtype,t.dtype);if(Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,mp,e.dtype);var r=new yp(mp,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.pow=function(e,t){var n=Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wp("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new yp("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),r=Jl(e.dtype,t.dtype);return this.compileAndRun(n,[e,t],r)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(Fu().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,cv,e.dtype);var t=new nv(e.shape,cv);return this.compileAndRun(t,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(Fu().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,dv,e.dtype);var t=new nv(e.shape,dv);return this.compileAndRun(t,[e])},t.prototype.sign=function(e){var t=new nv(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},t.prototype.isNaN=function(e){var t=new nv(e.shape,"return float(isnan(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isInf=function(e){var t=new nv(e.shape,"return float(isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isFinite=function(e){var t=new nv(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.round=function(e){var t=new nv(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(Fu().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,hv,e.dtype);var t=new nv(e.shape,hv);return this.compileAndRun(t,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(Fu().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,fv,e.dtype);var t=new nv(e.shape,fv);return this.compileAndRun(t,[e])},t.prototype.softmax=function(e,t){var n=sl([t],e.shape),r=this.max(e,n),a=kd(r.shape,n),i=this.subtract(e,r.reshape(a)),o=this.exp(i),s=this.sum(o,n).reshape(a);return this.realDivide(o,s)},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(Fu().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var t=new nv(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(t,[e])},t.prototype.log1p=function(e){var t=new nv(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},t.prototype.sqrt=function(e){var t=new nv(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new nv(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},t.prototype.reciprocal=function(e){var t=new nv(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},t.prototype.relu=function(e){var t;return t=Fu().getBool("WEBGL_PACK")?new _v(e.shape,Cv):new nv(e.shape,iv),this.compileAndRun(t,[e])},t.prototype.relu6=function(e){var t;return t=Fu().getBool("WEBGL_PACK")?new _v(e.shape,Ev):new nv(e.shape,ov),this.compileAndRun(t,[e])},t.prototype.prelu=function(e,t){var n=Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wp(bp,e.shape,t.shape):new yp(gp,e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.elu=function(e){if(Fu().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Sv,e.dtype);var t=new nv(e.shape,sv);return this.compileAndRun(t,[e])},t.prototype.eluDer=function(e,t){var n=Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wp("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new yp("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.selu=function(e){var t=new nv(e.shape,uv);return this.compileAndRun(t,[e])},t.prototype.int=function(e){var t=new nv(e.shape,"return float(int(x));");return this.compileAndRun(t,[e],"int32")},t.prototype.clip=function(e,t,n){var r,a=(r=Fu().getBool("WEBGL_PACK_CLIP")?new kp(e.shape):new xp(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,a)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(Fu().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,av,e.dtype);var t=new nv(e.shape,av);return this.compileAndRun(t,[e])},t.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new Cp(e.shape),r=[this.makeComplexComponentTensorInfo(e,t.complexTensors.real),this.makeComplexComponentTensorInfo(e,t.complexTensors.imag)];return this.compileAndRun(n,r)},t.prototype.sigmoid=function(e){var t=new nv(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},t.prototype.softplus=function(e){var t=new nv(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},t.prototype.sin=function(e){var t=new nv(e.shape,pv);return this.compileAndRun(t,[e])},t.prototype.cos=function(e){var t=new nv(e.shape,mv);return this.compileAndRun(t,[e])},t.prototype.tan=function(e){var t=new nv(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},t.prototype.asin=function(e){var t=new nv(e.shape,vv);return this.compileAndRun(t,[e])},t.prototype.acos=function(e){var t=new nv(e.shape,gv);return this.compileAndRun(t,[e])},t.prototype.atan=function(e){var t=new nv(e.shape,yv);return this.compileAndRun(t,[e])},t.prototype.atan2=function(e,t){var n=Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wp("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new yp("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.sinh=function(e){var t=new nv(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.cosh=function(e){var t=new nv(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.tanh=function(e){var t=new nv(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},t.prototype.asinh=function(e){var t=new nv(e.shape,bv);return this.compileAndRun(t,[e])},t.prototype.acosh=function(e){var t=new nv(e.shape,wv);return this.compileAndRun(t,[e])},t.prototype.atanh=function(e){var t=new nv(e.shape,xv);return this.compileAndRun(t,[e])},t.prototype.erf=function(e){var t=new nv(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(t,[e])},t.prototype.step=function(e,t){var n=new nv(e.shape,function(e){return void 0===e&&(e=0),rv+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},t.prototype.conv2dByMatMul=function(e,t,n,r,a,i){var o=e.shape,s=this.texData.get(e.dataId),u=n.inChannels,l=o[0]*o[1]*o[2],c=n.outChannels,d="channelsLast"===n.dataFormat,h=(1===l||1===c)&&u>1e3,f=o[2]%2!=0&&!!s.isPacked;if(h||!Fu().getBool("WEBGL_LAZILY_UNPACK")||!Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!f){var p=d?o[0]*o[1]*o[2]:o[0]*o[2]*o[3],m=this.reshape(e,[1,p,n.inChannels]),v=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:m,b:v,transposeA:!1,transposeB:!1,bias:r,activation:a,preluActivationWeights:i}),n.outShape)}var g=d?o[0]*o[1]*(o[2]+1):o[0]*o[2]*(o[3]+1),y={dataId:e.dataId,shape:[1,g,n.inChannels],dtype:e.dtype},b=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,qu($c(s.shape,y.shape),(function(){return"packed reshape "+s.shape+" to "+y.shape+" isn't free"}));var w=this.reshape(t,[1,n.inChannels,n.outChannels]),x=this.fusedBatchMatMul({a:y,b:w,transposeA:!1,transposeB:!1,bias:r,activation:a,preluActivationWeights:i}),k=this.texData.get(x.dataId);return qu(k.isPacked,(function(){return"batchMatMul result is expected to be packed"})),s.shape=b,k.shape=n.outShape,oc.makeTensorFromDataId(x.dataId,n.outShape,x.dtype)},t.prototype.conv2dWithIm2Row=function(e,t,n,r,a,i){var o=n.filterWidth,s=n.filterHeight,u=n.inChannels,l=n.outWidth,c=n.outHeight,d="channelsLast"===n.dataFormat,h=o*s*u,f=c*l,p=[h,f],m=e.squeeze([0]),v=t.reshape([1,h,-1]),g=new ym(p,m.shape,n),y=this.compileAndRun(g,[m]).reshape([1,p[0],p[1]]),b=null!=r,w=null!=i,x=a?Tv(a,!0):null,k=new Em(y.shape,[1,f,n.outChannels],!0,!1,b,x,w),C=[y,v];r&&C.push(r),w&&C.push(i);var E=this.compileAndRun(k,C);return d?E.reshape([1,c,l,n.outChannels]):E.reshape([1,n.outChannels,c,l])},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,a=e.bias,i=e.activation,o=e.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,a,i,o);if(Fu().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,a,i,o);var s=null!=a,u=null!=o,l=i?Tv(i,!1):null,c=new Mp(r,s,l,u),d=[t,n];return a&&d.push(a),o&&d.push(o),this.compileAndRun(c,d)},t.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(Fu().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new Mp(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerInput=function(e,t,n){var r=new Ip(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerFilter=function(e,t,n){var r=new Ap(n);return this.compileAndRun(r,[e,t])},t.prototype.fusedDepthwiseConv2D=function(e){var t,n=e.input,r=e.filter,a=e.convInfo,i=e.bias,o=e.activation,s=e.preluActivationWeights,u=Fu().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1,l=o?Tv(o,u):null,c=[n,r],d=null!=i,h=null!=s;return d&&c.push(i),h&&c.push(s),u?(t=new Fp(a,d,l,h),this.compileAndRun(t,c)):(t=new Pp(a,d,l,h),this.compileAndRun(t,c))},t.prototype.depthwiseConv2D=function(e,t,n){var r;return Fu().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new Fp(n),this.compileAndRun(r,[e,t])):(r=new Pp(n),this.compileAndRun(r,[e,t]))},t.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new Dp(n);return this.compileAndRun(r,[e,t])},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new Np(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3d=function(e,t,n){var r=new Op(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerInput=function(e,t,n){var r=new Rp(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerFilter=function(e,t,n){var r=new Tp(n);return this.compileAndRun(r,[e,t])},t.prototype.maxPool=function(e,t){var n=new Rm(t,"max",!1);return this.compileAndRun(n,[e])},t.prototype.avgPool=function(e,t){var n=new Rm(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPoolBackprop=function(e,t,n,r){var a=new Rm(r,"max",!0),i=this.compileAndRun(a,[t]),o=new km(r),s=this.compileAndRun(o,[e,i],t.dtype);return i.dispose(),s},t.prototype.avgPoolBackprop=function(e,t,n){var r=new lp(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.cast=function(e,t){return kf(e,t,this)},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),a=0,i=0;i<e.rank;i++)i!==t&&(r[a++]=e.shape[i]);var o=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var u=new Array(n);for(i=0;i<u.length;i++)o[t]=i,u[i]=this.slice(e,o,s).reshape(r);return u},t.prototype.avgPool3d=function(e,t){var n=new Nm(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.avgPool3dBackprop=function(e,t,n){var r=new cp(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.maxPool3d=function(e,t){var n=new Nm(t,"max",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPool3dBackprop=function(e,t,n,r){var a=new Nm(r,"max",!0),i=this.compileAndRun(a,[t]),o=new Cm(r),s=this.compileAndRun(o,[e,i],t.dtype);return i.dispose(),s},t.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId);if(n.isPacked&&!$c(e.shape,t)&&(null===n.texture||!$c(n.shape,t))){var r=this.packedReshape(e,t);return oc.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return Cf(e,t)},t.prototype.resizeBilinear=function(e,t,n,r){var a=Fu().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Fm(e.shape,t,n,r):new Pm(e.shape,t,n,r);return this.compileAndRun(a,[e],"float32")},t.prototype.resizeBilinearBackprop=function(e,t,n){var r=new Om(e,t,n);return this.compileAndRun(r,[e])},t.prototype.resizeNearestNeighbor=function(e,t,n,r){var a=new Bm(e.shape,t,n,r);return this.compileAndRun(a,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new Lm(e,t,n);return this.compileAndRun(r,[e])},t.prototype.multinomial=function(e,t,n,r){var a=t?e:tf(e),i=a.shape[0],o=a.shape[1],s=new Sm(i,o,n),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[a],"int32",u)},t.prototype.oneHot=function(e,t,n,r){var a=new _m(e.size,t,n,r);return this.compileAndRun(a,[e])},t.prototype.diag=function(e){var t=new Wp(e.size);return this.compileAndRun(t,[e])},t.prototype.nonMaxSuppression=function(e,t,n,r,a){return pd("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Nf(e.dataSync(),t.dataSync(),n,r,a)},t.prototype.cropAndResize=function(e,t,n,r,a,i){var o=new Lp(e.shape,t.shape,r,a,i);return this.compileAndRun(o,[e,t,n],"float32")},t.prototype.depthToSpace=function(e,t,n){qu(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));var r=e.shape[0],a="NHWC"===n?e.shape[1]:e.shape[2],i="NHWC"===n?e.shape[2]:e.shape[3],o="NHWC"===n?e.shape[3]:e.shape[1],s=a*t,u=i*t,l=o/(t*t),c=new Vp("NHWC"===n?[r,s,u,l]:[r,l,s,u],t,n);return this.compileAndRun(c,[e])},t.prototype.split=function(e,t,n){return Lf(e,t,n)},t.prototype.scatterND=function(e,t,n){var r=Kh(0,e,n),a=r.sliceRank,i=r.numUpdates,o=r.sliceSize,s=r.strides,u=r.outputSize,l=[u/o,o],c=e.reshape([i,a]),d=t.reshape([i,o]);if(0===u)return Cf(Md([]),n);var h=Pd(0),f=new Um(i,a,c.rank,d.rank,s,l);return this.compileAndRun(f,[d,c,h]).reshape(n)},t.prototype.sparseToDense=function(e,t,n,r){var a=Kh(0,e,n),i=a.sliceRank,o=a.numUpdates,s=a.strides,u=a.outputSize,l=new Um(o,i,e.rank,t.rank,s,[u,1],!1);return this.compileAndRun(l,[t,e,r]).reshape(n)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new Yp("return real * expR - imag * expI;",e.shape,t),a=new Yp("return real * expI + imag * expR;",e.shape,t),i=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag)],o=this.compileAndRun(r,i),s=this.compileAndRun(a,i),u=this.complex(o,s).as2D(e.shape[0],e.shape[1]);return o.dispose(),s.dispose(),u},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],a=Vh(e,t),i=a[0],o=a[1],s=a[2],u=a[3],l=t.reshape([o,r]),c=e.reshape([e.size/s,s]),d=new Qp(r,u,[o,s]);return this.compileAndRun(d,[c,l]).reshape(i)},t.prototype.fill=function(e,t,n){if("string"===(n=n||wl(t))){var r=cl(n,$u(e));return r.fill(t),oc.makeTensor(r,e,n,this)}var a=new qp(e,t),i=a.getCustomSetupFunc(t);return this.compileAndRun(a,[],n,i)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},t.prototype.linspace=function(e,t,n){return Ef(e,t,n)},t.prototype.makeTensorInfo=function(e,t){var n=this.write(null,e,t);return this.texData.get(n).usage=null,{dataId:n,shape:e,dtype:t}},t.prototype.makeOutput=function(e,t){var n=this.makeTensorInfo(e,t).dataId;return oc.makeTensorFromDataId(n,e,t,this)},t.prototype.unpackTensor=function(e){var t=new Av(e.shape);return this.runWebGLProgram(t,[e],e.dtype)},t.prototype.packTensor=function(e){var t=new Am(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,t){var n=[Yc(e.shape)].concat(qc(e.shape)),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[Yc(t)].concat(qc(t)),i=new Mm(a,n),o=this.runWebGLProgram(i,[r],e.dtype,null,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}},t.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype,o=Zc(a);return t=r?new Up(o):new zp(o),{dtype:i,shape:a,dataId:this.runWebGLProgram(t,[{shape:o,dtype:i,dataId:e}],i,null,!0).dataId}},t.prototype.runWebGLProgram=function(e,t,n,r,a){var i=this;void 0===a&&(a=!1);var o=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(o.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===lc.DENSE){var u=gc(e.outputShape);s.texShape=u.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===$u(o.shape))return s.values=ll(o.dtype,0),o;var l=[],c=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=i.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&$u(t.shape)<=Fu().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?i.unpackTensor(t):i.packTensor(t),l.push(t),n=i.texData.get(t.dataId);else if(n.isPacked&&!$c(n.shape,t.shape)){var r=t,a=t.shape;t.shape=n.shape,t=i.packedReshape(t,a),l.push(t),n=i.texData.get(t.dataId),r.shape=a}return i.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(o.dataId);var d,h={shape:o.shape,texData:s,isUniform:!1},f=function(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t}));var a=e.userCode;return e.constructor.name+"_"+r+"_"+a}(e,c,h),p=this.getAndSaveBinary(f,(function(){return function(e,t,n,r){var a=t.userCode,i=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=i.map((function(e){return e.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=Zf(i,s,a,t.packedInputs),l=e.createProgram(u),c=null,d=e.getUniformLocation(l,"NAN",!1);1===Fu().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(l,"INFINITY",!1));for(var h={},f=0;f<t.variableNames.length;f++){var p=t.variableNames[f];h[p]=e.getUniformLocation(l,p,!1),h["offset"+p]=e.getUniformLocation(l,"offset"+p,!1)}return{program:t,source:u,webGLProgram:l,uniformLocations:h,inShapeInfos:o,outShapeInfo:s,infLoc:c,nanLoc:d}}(i.gpgpu,e,c,h)})),m=null!=this.activeTimers;if(m&&(d=this.startTimer()),function(e,t,n,r,a){gm(t.inShapeInfos,n),gm([t.outShapeInfo],[r]);var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i,o[0],o[1]):e.setOutputMatrixTexture(i,o[0],o[1]),e.setProgram(t.webGLProgram),1===Fu().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations["offset"+a];if(null!=i)if(n.isUniform)if($u(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(i,s)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,i,r)})),null!=a&&a(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,p,c,h,r),l.forEach((function(e){return i.disposeData(e.dataId)})),m&&(d=this.endTimer(d),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(d)})),!Fu().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===a){var v=this.unpackTensor(o);return this.disposeData(o.dataId),v}return o},t.prototype.compileAndRun=function(e,t,n,r,a){void 0===a&&(a=!1),n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,a);return oc.makeTensorFromDataId(i.dataId,i.shape,i.dtype)},t.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;this.disposed||(Fu().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=hd((function(){if(!Fu().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=Fu().getBool("DEBUG");Fu().set("DEBUG",!1);var n=e.abs(Pd(1e-8)).dataSync()[0];if(Fu().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,a=n.dtype,i=n.values,o=n.texture,s=n.usage,u=n.isPacked;if(null==o){var l,c=null!=this.activeTimers;c&&(l=Il());var d=n.texShape;if(null==d&&(d=Qc(r,u),n.texShape=d),null!=i){var h=Zc(r),f=void 0,p=d[1],m=d[0],v=i instanceof Uint8Array;u?(p=(t=yc(d[0],d[1]))[0],m=t[1],f=new Xp(h,[m,p],v)):f=new Kp(h,[m,p],v);var g=this.makeTensorInfo([m,p],a);this.texData.get(g.dataId).usage=v?cc.PIXELS:cc.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),p,m,i);var y=this.runWebGLProgram(f,[g],a,null,!0),b=this.texData.get(y.dataId);n.texture=b.texture,n.texShape=b.texShape,n.isPacked=b.isPacked,n.usage=b.usage,this.disposeData(g.dataId),this.texData.delete(y.dataId),n.values=null,c&&(this.uploadWaitMs+=Il()-l)}else{var w=this.acquireTexture(d,s,a,u);n.texture=w}}},t.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},t.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+a+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},t.prototype.computeBytes=function(e,t){return e[0]*e[1]*ml(t)},t}(af);sc()&&oc.registerBackend("webgl",(function(){return new Rv}),2);var Nv=Td({square_:function(e){var t=gd(e,"x","square"),n=[t];return oc.runKernelFunc((function(e,n){return n([t]),e.square(t)}),{x:t},null,"Square",{},n,[])}}),Dv="SquaredDifference",Mv=Td({squaredDifference_:function(e,t){var n,r=gd(e,"a","squaredDifference"),a=gd(t,"b","squaredDifference");n=ec(r,a),r=n[0],a=n[1],lf(r.shape,a.shape);var i={a:r,b:a},o=[r,a];return oc.runKernelFunc((function(e,t){var n=e.squaredDifference(r,a);return t([r,a]),n}),i,(function(e,t){var n=t[0],r=t[1],a=Pd(2);return{a:function(){return e.mul(n.sub(r).mul(a))},b:function(){return e.mul(r.sub(n).mul(a))}}}),Dv,{},o,[])}}),Ov=Td({abs_:function(e){var t=gd(e,"x","abs");return"complex64"===t.dtype?oc.runKernelFunc((function(e){return e.complexAbs(t)}),{$x:t}):oc.runKernelFunc((function(e,n){var r=e.abs(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().step(-1))}}}),"Abs")}}),Pv=Td({acos_:function(e){var t=gd(e,"x","acos");return oc.runKernelFunc((function(e,n){var r=e.acos(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(Pd(1).sub(n.toFloat().square()).sqrt()).neg()}}}))}}),Fv=Td({acosh_:function(e){var t=gd(e,"x","acosh");return oc.runKernelFunc((function(e,n){var r=e.acosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}}))}}),Lv=Td({asin_:function(e){var t=gd(e,"x","asin");return oc.runKernelFunc((function(e,n){var r=e.asin(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(Pd(1).sub(n.toFloat().square()).sqrt())}}}))}}),Bv=Td({asinh_:function(e){var t=gd(e,"x","asinh");return oc.runKernelFunc((function(e,n){var r=e.asinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(Pd(1).add(n.toFloat().square()).sqrt())}}}))}}),jv=Td({atan_:function(e){var t=gd(e,"x","atan");return oc.runKernelFunc((function(e,n){var r=e.atan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}}))}}),zv=Td({atanh_:function(e){var t=gd(e,"x","atanh");return oc.runKernelFunc((function(e,n){var r=e.atanh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(Pd(1).sub(n.toFloat().square()))}}}))}}),Uv=Td({ceil_:function(e){var t=gd(e,"x","ceil");return oc.runKernelFunc((function(e){return e.ceil(t)}),{$x:t},(function(e){return{$x:function(){return Gd(e)}}}))}}),Vv=Td({clipByValue_:function(e,t,n){var r=gd(e,"x","clipByValue");qu(t<=n,(function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."}));var a=[r],i={min:t,max:n};return oc.runKernelFunc((function(e,a){var i=e.clip(r,t,n);return a([r]),i}),{x:r},(function(e,r){var a=r[0];return{x:function(){return e.where(a.greaterEqual(t).logicalAnd(a.lessEqual(n)),Gd(e))}}}),"ClipByValue",i,a)}}),Wv=Td({cos_:function(e){var t=gd(e,"x","cos"),n=[t];return oc.runKernelFunc((function(e,n){var r=e.cos(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().sin().neg().mul(e)}}}),"Cos",{},n)}}),Hv=Td({cosh_:function(e){var t=gd(e,"x","cosh");return oc.runKernelFunc((function(e,n){var r=e.cosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}}))}}),Gv=Td({erf_:function(e){var t=gd(e,"x","erf");return qu("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=t.toFloat()),oc.runKernelFunc((function(e,n){var r=e.erf(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),Kv=Td({exp_:function(e){var t=gd(e,"x","exp");return oc.runKernelFunc((function(e,n){var r=e.exp(t);return n([r]),r}),{x:t},(function(e,t){return{x:function(){return e.mulStrict(t[0])}}}),"Exp",{},[],[!0])}}),Xv=Td({expm1_:function(e){var t=gd(e,"x","expm1");return oc.runKernelFunc((function(e,n){var r=e.expm1(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.exp())}}}))}}),Yv=Td({floor_:function(e){var t=gd(e,"x","floor");return oc.runKernelFunc((function(e){return e.floor(t)}),{$x:t},(function(e){return{$x:function(){return Gd(e)}}}))}}),qv=Td({log_:function(e){var t=gd(e,"x","log"),n=[t];return oc.runKernelFunc((function(e,n){var r=e.log(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.toFloat())}}}),"Log",{},n)}}),Zv=Td({log1p_:function(e){var t=gd(e,"x","log1p");return oc.runKernelFunc((function(e,n){var r=e.log1p(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.add(1))}}}))}}),Qv=Td({logSigmoid_:function(e){var t=gd(e,"x","logSigmoid");return oc.runKernelFunc((function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}}))}}),Jv=Td({neg_:function(e){var t=gd(e,"x","neg"),n=[t];return oc.runKernelFunc((function(e){return e.neg(t)}),{x:t},(function(e){return{x:function(){return e.neg()}}}),"Neg",{},n)}}),$v=Td({reciprocal_:function(e){var t=gd(e,"x","reciprocal");return oc.runKernelFunc((function(e,n){var r=e.reciprocal(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.square().neg())}}}))}}),eg=Td({round_:function(e){var t=gd(e,"x","round");return oc.runKernelFunc((function(e){return e.round(t)}),{$x:t},(function(e){return{$x:function(){return Gd(e)}}}))}}),tg=Td({rsqrt_:function(e){var t=gd(e,"x","rsqrt"),n=[t];return oc.runKernelFunc((function(e,n){var r=e.rsqrt(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},n)}}),ng=Td({sigmoid_:function(e){var t=gd(e,"x","sigmoid");return oc.runKernelFunc((function(e,n){var r=e.sigmoid(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.mul(Pd(1).sub(n)))}}}),"Sigmoid")}}),rg=Td({sign_:function(e){var t=gd(e,"x","sign");return oc.runKernelFunc((function(e){return e.sign(t)}),{$x:t},(function(e){return{$x:function(){return Gd(e)}}}))}}),ag=Td({isNaN_:function(e){var t=gd(e,"x","isNaN");return oc.runKernelFunc((function(e){return e.isNaN(t)}),{$x:t},(function(e){return{$x:function(){return Gd(e)}}}))}}),ig=Td({isInf_:function(e){var t=gd(e,"x","isInf");return oc.runKernelFunc((function(e){return e.isInf(t)}),{$x:t},(function(e){return{$x:function(){return Gd(e)}}}))}}),og=Td({isFinite_:function(e){var t=gd(e,"x","isFinite");return oc.runKernelFunc((function(e){return e.isFinite(t)}),{$x:t},(function(e){return{$x:function(){return Gd(e)}}}))}}),sg=Td({sin_:function(e){var t=gd(e,"x","sin"),n=[t];return oc.runKernelFunc((function(e,n){var r=e.sin(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().cos().mul(e)}}}),"Sin",{},n)}}),ug=Td({sinh_:function(e){var t=gd(e,"x","sinh");return oc.runKernelFunc((function(e,n){var r=e.sinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}}))}}),lg=Td({softplus_:function(e){var t=gd(e,"x","softplus");return oc.runKernelFunc((function(e,n){var r=e.softplus(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.sigmoid())}}}))}}),cg=Td({sqrt_:function(e){var t=gd(e,"x","sqrt");return oc.runKernelFunc((function(e,n){var r=e.sqrt(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}}))}}),dg=Td({step_:function(e,t){void 0===t&&(t=0);var n=gd(e,"x","step");return oc.runKernelFunc((function(e){return e.step(n,t)}),{$x:n},(function(e){return{$x:function(){return Gd(e)}}}))}}),hg=Td({tan_:function(e){var t=gd(e,"x","tan");return oc.runKernelFunc((function(e,n){var r=e.tan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.cos().square())}}}))}}),fg=Td({tanh_:function(e){var t=gd(e,"x","tanh");return oc.runKernelFunc((function(e,n){var r=e.tanh(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return Pd(1).sub(n.square()).mulStrict(e)}}}),"Tanh",{},null,[!0])}});function pg(e,t,n,r,a,i){var o,s,u=gd(e,"x","batchNorm"),l=gd(t,"mean","batchNorm"),c=gd(n,"variance","batchNorm");return null!=a&&(o=gd(a,"scale","batchNorm")),null!=r&&(s=gd(r,"offset","batchNorm")),qu(2===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),qu(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."})),qu(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."})),null!=o&&qu(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."})),null!=s&&qu(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),gg(u,l,c,s,o,i)}function mg(e,t,n,r,a,i){var o,s,u=gd(e,"x","batchNorm"),l=gd(t,"mean","batchNorm"),c=gd(n,"variance","batchNorm");return null!=a&&(o=gd(a,"scale","batchNorm")),null!=r&&(s=gd(r,"offset","batchNorm")),qu(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),qu(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."})),qu(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."})),null!=o&&qu(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."})),null!=s&&qu(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),gg(u,l,c,s,o,i)}function vg(e,t,n,r,a,i){var o,s,u=gd(e,"x","batchNorm"),l=gd(t,"mean","batchNorm"),c=gd(n,"variance","batchNorm");return null!=a&&(o=gd(a,"scale","batchNorm")),null!=r&&(s=gd(r,"offset","batchNorm")),qu(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."})),qu(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."})),qu(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."})),null!=o&&qu(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."})),null!=s&&qu(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),gg(u,l,c,s,o,i)}function gg(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u,l=gd(e,"x","batchNorm"),c=gd(t,"mean","batchNorm"),d=gd(n,"variance","batchNorm");null!=a&&(o=gd(a,"scale","batchNorm")),null!=r&&(s=gd(r,"offset","batchNorm")),qu(c.rank===d.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),qu(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),qu(null==o||c.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),u=0===l.rank||1===l.rank?l.as4D(1,1,1,l.size):2===l.rank?l.as4D(1,1,l.shape[0],l.shape[1]):3===l.rank?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var h=[l,c,d,o];return oc.runKernelFunc((function(e,t){var n=e.batchNormalization(u,yg(c),yg(d),i,yg(o),yg(s));return t([l,c,d,o]),n}),{x:l,mean:c,variance:d,scale:o,offset:s},(function(e,t){var n=t,r=n[0],a=n[1],o=n[2],s=n[3],l=null==s?Pd(1):s,c=uf(a.shape,u.shape),d=[];if(1===a.rank){for(var h=0;h<u.shape.length-1;++h)d.push(u.shape[h]);d.push(1)}var f=r.sub(a),p=e.mul(l),m=tg(o.add(Pd(i))),v=m.mul(m).mul(m).mul(Pd(-.5));return{x:function(){return 1===a.rank?e.mul(Oh(m.as4D(1,1,1,a.shape[0]),d)).mul(l).reshape(r.shape):e.mul(m).mul(l).reshape(r.shape)},mean:function(){var e=m.mul(Pd(-1)).mul(p);return 1===a.rank&&(e=e.sum(c)),e.reshape(a.shape)},variance:function(){var e=v.mul(f).mul(p);return 1===a.rank&&(e=e.sum(c)),e.reshape(a.shape)},scale:function(){var t=f.mul(m),n=e.mul(t);return 1===a.rank&&(n=n.sum(c)),n.reshape(a.shape)},offset:function(){var t=e;return 1===a.rank&&(t=t.sum(c)),t.reshape(a.shape)}}}),"BatchNormalization",{varianceEpsilon:i},h).reshape(l.shape)}function yg(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function bg(){dd("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var wg=Td({batchNormalization2d_:function(e,t,n,r,a,i){return void 0===r&&(r=.001),bg(),pg(e,t,n,i,a,r)}}),xg=Td({batchNormalization3d_:function(e,t,n,r,a,i){return void 0===r&&(r=.001),bg(),mg(e,t,n,i,a,r)}}),kg=Td({batchNormalization4d_:function(e,t,n,r,a,i){return void 0===r&&(r=.001),bg(),vg(e,t,n,i,a,r)}}),Cg=Td({batchNormalization_:function(e,t,n,r,a,i){return void 0===r&&(r=.001),bg(),gg(e,t,n,i,a,r)}}),Eg=Td({batchNorm_:gg}),Sg=Td({batchNorm2d_:pg}),_g=Td({batchNorm3d_:mg}),Ag=Td({batchNorm4d_:vg}),Ig=Td({logicalAnd_:function(e,t){var n=gd(e,"a","logicalAnd","bool"),r=gd(t,"b","logicalAnd","bool");return lf(n.shape,r.shape),oc.runKernelFunc((function(e){return e.logicalAnd(n,r)}),{a:n,b:r},null,"LogicalAnd")}}),Tg=Td({logicalNot_:function(e){var t=gd(e,"x","logicalNot","bool");return oc.runKernelFunc((function(e){return e.logicalNot(t)}),{$x:t})}}),Rg=Td({logicalOr_:function(e,t){var n=gd(e,"a","logicalOr","bool"),r=gd(t,"b","logicalOr","bool");return lf(n.shape,r.shape),oc.runKernelFunc((function(e){return e.logicalOr(n,r)}),{$a:n,$b:r})}}),Ng=Td({logicalXor_:function(e,t){var n=gd(e,"a","logicalXor","bool"),r=gd(t,"b","logicalXor","bool");return lf(n.shape,r.shape),Rg(e,t).logicalAnd(Ig(e,t).logicalNot())}}),Dg=Td({where_:function(e,t,n){var r=gd(t,"a","where"),a=gd(n,"b","where"),i=gd(e,"condition","where","bool");return Zu(r.shape,a.shape,"Error in where: "),1===i.rank?qu(i.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):Zu(i.shape,a.shape,"Error in where: "),oc.runKernelFunc((function(e,t){var n=e.select(i,r,a);return t([i]),n}),{$condition:i,$a:r,$b:a},(function(e,t){var n=t[0];return{$condition:function(){return Gd(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}}))}}),Mg=function(e){return Du(this,void 0,void 0,(function(){var t,n,r;return Mu(this,(function(a){switch(a.label){case 0:return[4,(t=gd(e,"condition","whereAsync","bool")).data()];case 1:return n=a.sent(),r=zf(t.shape,n),e!==t&&t.dispose(),[2,r]}}))}))},Og=Td({add_:function(e,t){var n,r=gd(e,"a","add"),a=gd(t,"b","add");n=ec(r,a),r=n[0],a=n[1];var i=lf(r.shape,a.shape);return oc.runKernelFunc((function(e){return e.add(r,a)}),{a:r,b:a},(function(e){return{a:function(){var t=e,n=uf(r.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=uf(a.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(a.shape)}}}),"Add")}}),Pg=Td({addN_:function(e){qu(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),qu(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length}));var t=e.map((function(e,t){return gd(e,"tensors"+t,"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!el(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return oc.runKernelFunc((function(e){return e.addN(t)}),r,(function(e){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}),"AddN")}}),Fg=Td({addStrict_:function(e,t){var n=gd(e,"a","addStrict"),r=gd(t,"b","addStrict");return Zu(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),Lg=Td({atan2_:function(e,t){var n,r=gd(e,"a","atan2"),a=gd(t,"b","atan2");n=ec(r,a),r=n[0],a=n[1];var i=lf(r.shape,a.shape);return oc.runKernelFunc((function(e,t){var n=e.atan2(r,a);return t([r,a]),n}),{$a:r,$b:a},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=Og(n.square(),r.square()),a=e.mul(r.div(t)),o=uf(n.shape,i);return o.length>0&&(a=a.sum(o)),a.reshape(n.shape)},$b:function(){var t=Og(n.square(),r.square()),a=Jv(e.mul(n.div(t))),o=uf(r.shape,i);return o.length>0&&(a=a.sum(o)),a.reshape(r.shape)}}}))}}),Bg=Td({div_:function(e,t){var n,r=gd(e,"a","div"),a=gd(t,"b","div");if(n=ec(r,a),r=n[0],a=n[1],"int32"===r.dtype&&"int32"===a.dtype)return Ug(r,a);var i=lf(r.shape,a.shape);return oc.runKernelFunc((function(e,t){var n=e.realDivide(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),a=uf(n.shape,i);return a.length>0?t.sum(a).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),a=uf(r.shape,i);a.length>0&&(t=t.sum(a).reshape(r.shape));var o=r.square();return t.div(o.toFloat()).neg()}}}),"Div")}}),jg=Td({divNoNan_:function(e,t){var n,r=gd(e,"a","div"),a=gd(t,"b","div");r=(n=ec(r,a))[0],a=n[1];var i=Bg(r,a),o=Gd(i),s=a.equal(o);return Dg(s,o,i)}}),zg=Td({divStrict_:function(e,t){var n=gd(e,"a","div"),r=gd(t,"b","div");return Zu(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),Ug=Td({floorDiv_:function(e,t){var n,r=gd(e,"a","floorDiv"),a=gd(t,"b","floorDiv");n=ec(r,a),r=n[0],a=n[1];var i=lf(r.shape,a.shape);return oc.runKernelFunc((function(e,t){var n=e.floorDiv(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),a=uf(n.shape,i);return a.length>0?t.sum(a).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),a=uf(r.shape,i);a.length>0&&(t=t.sum(a).reshape(r.shape));var o=r.square();return t.div(o.toFloat()).neg()}}}),"FloorDiv")}}),Vg=Td({maximum_:function(e,t){var n,r=gd(e,"a","maximum"),a=gd(t,"b","maximum");return n=ec(r,a),r=n[0],a=n[1],"bool"===r.dtype&&(r=r.toInt(),a=a.toInt()),lf(r.shape,a.shape),oc.runKernelFunc((function(e,t){var n=e.maximum(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.greaterEqual(r).toFloat())},b:function(){return e.mul(n.less(r).toFloat())}}}),"Maximum")}}),Wg=Td({maximumStrict_:function(e,t){var n=gd(e,"a","maximumStrict"),r=gd(t,"b","maximumStrict");return Zu(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),Hg=Td({minimum_:function(e,t){var n,r=gd(e,"a","minimum"),a=gd(t,"b","minimum");return n=ec(r,a),r=n[0],a=n[1],"bool"===r.dtype&&(r=r.toInt(),a=a.toInt()),lf(r.shape,a.shape),oc.runKernelFunc((function(e,t){var n=e.minimum(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.lessEqual(r).toFloat())},b:function(){return e.mul(n.greater(r).toFloat())}}}),"Minimum")}}),Gg=Td({minimumStrict_:function(e,t){var n=gd(e,"a","minimumStrict"),r=gd(t,"b","minimumStrict");return Zu(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),Kg=Td({mod_:function(e,t){var n,r=gd(e,"a","mod"),a=gd(t,"b","mod");n=ec(r,a),r=n[0],a=n[1];var i=lf(r.shape,a.shape);return oc.runKernelFunc((function(e,t){var n=e.mod(r,a);return t([r,a]),n}),{$a:r,$b:a},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=uf(n.shape,i);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),a=uf(r.shape,i);return a.length>0?t.sum(a).reshape(r.shape):t}}}))}}),Xg=Td({modStrict_:function(e,t){var n=gd(e,"a","modStrict"),r=gd(t,"b","modStrict");return Zu(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Yg=Td({mul_:function(e,t){var n,r=gd(e,"a","mul"),a=gd(t,"b","mul");n=ec(r,a),r=n[0],a=n[1];var i=lf(r.shape,a.shape);return oc.runKernelFunc((function(e,t){var n=e.multiply(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.mul(r.toFloat()),a=uf(n.shape,i);return a.length>0?t.sum(a).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),a=uf(r.shape,i);return a.length>0?t.sum(a).reshape(r.shape):t}}}),"Mul")}}),qg=Td({mulStrict_:function(e,t){var n=gd(e,"a","mul"),r=gd(t,"b","mul");return Zu(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Zg=Td({pow_:function(e,t){var n,r=gd(e,"base","pow"),a=gd(t,"exp","pow");n=ec(r,a),r=n[0],a=n[1];var i=lf(r.shape,a.shape),o=[r,a];return oc.runKernelFunc((function(e,t){var n=e.pow(r,a);return t([r,a,n]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1],a=t[2];return{a:function(){var t=r.toFloat(),a=e.mul(t.mul(n.pow(t.sub(Pd(1))))),o=uf(n.shape,i);return o.length>0&&(a=a.sum(o)),a.reshape(n.shape)},b:function(){var t=n.greater(0),o=n.log().where(t,Gd(n)),s=e.mul(a.mul(o)),u=uf(r.shape,i);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)}}}),"Pow",{},o,[!0])}}),Qg=Td({powStrict_:function(e,t){return Zu(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),Jg=Td({squaredDifferenceStrict_:function(e,t){var n=gd(e,"a","squaredDifferenceStrict"),r=gd(t,"b","squaredDifferenceStrict");return Zu(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),$g=Td({sub_:function(e,t){var n,r=gd(e,"a","sub"),a=gd(t,"b","sub");n=ec(r,a),r=n[0],a=n[1];var i=lf(r.shape,a.shape);return oc.runKernelFunc((function(e){return e.subtract(r,a)}),{a:r,b:a},(function(e){return{a:function(){var t=e,n=uf(r.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=uf(a.shape,i);return n.length>0&&(t=t.sum(n)),t.neg().reshape(a.shape)}}}),"Sub")}}),ey=Td({subStrict_:function(e,t){var n=gd(e,"a","subStrict"),r=gd(t,"b","subStrict");return Zu(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),ty=Td({equal_:function(e,t){var n,r=gd(e,"a","equal"),a=gd(t,"b","equal");return n=ec(r,a),r=n[0],a=n[1],lf(r.shape,a.shape),oc.runKernelFunc((function(e){return e.equal(r,a)}),{$a:r,$b:a})}}),ny=Td({equalStrict_:function(e,t){var n=gd(e,"a","equalStrict"),r=gd(t,"b","equalStrict");return Zu(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),ry=Td({greater_:function(e,t){var n,r=gd(e,"a","greater"),a=gd(t,"b","greater");return n=ec(r,a),r=n[0],a=n[1],lf(r.shape,a.shape),oc.runKernelFunc((function(e){return e.greater(r,a)}),{a:r,b:a},null,"Greater")}}),ay=Td({greaterEqual_:function(e,t){var n,r=gd(e,"a","greaterEqual"),a=gd(t,"b","greaterEqual");return n=ec(r,a),r=n[0],a=n[1],lf(r.shape,a.shape),oc.runKernelFunc((function(e,t){var n=e.greaterEqual(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){return Gd(n)},b:function(){return Gd(r)}}}),"GreaterEqual")}}),iy=Td({greaterEqualStrict_:function(e,t){var n=gd(e,"a","greaterEqualStrict"),r=gd(t,"b","greaterEqualStrict");return Zu(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),oy=Td({greaterStrict_:function(e,t){var n=gd(e,"a","greaterStrict"),r=gd(t,"b","greaterStrict");return Zu(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),sy=Td({less_:function(e,t){var n,r=gd(e,"a","less"),a=gd(t,"b","less");return n=ec(r,a),r=n[0],a=n[1],lf(r.shape,a.shape),oc.runKernelFunc((function(e){return e.less(r,a)}),{a:r,b:a},null,"Less")}}),uy=Td({lessEqual_:function(e,t){var n,r=gd(e,"a","lessEqual"),a=gd(t,"b","lessEqual");return n=ec(r,a),r=n[0],a=n[1],lf(r.shape,a.shape),oc.runKernelFunc((function(e,t){var n=e.lessEqual(r,a);return t([r,a]),n}),{a:r,b:a},null,"LessEqual")}}),ly=Td({lessEqualStrict_:function(e,t){var n=gd(e,"a","lessEqualStrict"),r=gd(t,"b","lessEqualStrict");return Zu(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),cy=Td({lessStrict_:function(e,t){var n=gd(e,"a","lessStrict"),r=gd(t,"b","lessStrict");return Zu(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),dy=Td({notEqual_:function(e,t){var n,r=gd(e,"a","notEqual"),a=gd(t,"b","notEqual");return n=ec(r,a),r=n[0],a=n[1],lf(r.shape,a.shape),oc.runKernelFunc((function(e){return e.notEqual(r,a)}),{a:r,b:a},null,"NotEqual")}}),hy=Td({notEqualStrict_:function(e,t){var n=gd(e,"a","notEqualStrict"),r=gd(t,"b","notEqualStrict");return Zu(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function fy(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function py(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var my=Td({gather_:function(e,t,n){void 0===n&&(n=0);var r=gd(e,"x","gather"),a=gd(t,"indices","gather","int32");n=sl(n,r.shape)[0];var i=function(e,t,n){for(var r=e.shape[n],a=[],i=1,o=1,s=0;s<n;s++)a.push(e.shape[s]),i*=e.shape[s];for(s=0;s<t.rank;s++)a.push(t.shape[s]);for(s=n+1;s<e.rank;s++)a.push(e.shape[s]),o*=e.shape[s];return{batchSize:i,sliceSize:o,dimSize:r,outputShape:a}}(r,a,n);return oc.runKernelFunc((function(e,t){var i=e.gather(r,a.flatten(),n);return t([a]),i}),{x:r,indices:a},(function(e,t){var a=t[0];return{x:function(){var t=r.shape,i=a.size,o=t.slice(0,n),s=o.length,u=t.slice(n,t.length).slice(1),l=u.length,c=fy(0,s),d=fy(s+1,s+1+l),h=py([o,[i],u]),f=e.reshape(h),p=a.reshape([i]),m=py([[s],c,d]),v=f.transpose(m),g=vy(v,p,r.shape[n]),y=Sd(m);return g.transpose(y)},indices:function(){return a}}}),"Gather",{axis:n}).reshape(i.outputShape)}}),vy=Td({unsortedSegmentSum_:function(e,t,n){var r=gd(e,"x","unsortedSegmentSum"),a=gd(t,"segmentIds","unsortedSegmentSum","int32");return qu(tl(n),(function(){return"numSegments must be of dtype int"})),oc.runKernelFunc((function(e,t){var i=e.unsortedSegmentSum(r,a,n);return t([a]),i}),{$x:r},(function(e,t){var n=t[0];return{$x:function(){return function(e,t){for(var n=Vg(t,Gd(t)),r=my(e,n),a=ay(t,Pd(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=gh(a,o+1);a=Ig(a,zd(r.shape,"bool"));var s=Gd(r);return Dg(a,r,s)}(e,n)}}}))}});function gy(e,t,n,r,a,i,o){void 0===i&&(i="NHWC"),qu(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var s=e,u=t,l=!1;3===t.rank&&(l=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),qu(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."})),qu(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank})),qu(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var c="NHWC"===i?s[3]:s[1],d="NHWC"===i?u.shape[3]:u.shape[1];qu(c===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."})),qu(d===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+n.shape[3]+"."})),null!=o&&qu(tl(a),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var h=xf(i),f=hf(s,n.shape,r,1,a,o,!1,h),p=oc.runKernelFunc((function(e,t){var r=e.conv2dDerInput(u,n,f);return t([n,u]),r}),{dy4D:u,filter:n},(function(e,t){var n=t[0],s=t[1];return{dy4D:function(){return xy(e,n,r,a,i,1,o)},filter:function(){return Cy(e,s,n.shape,r,a,i,o)}}}));return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function yy(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function by(e,t,n,r,a){qu(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],l=o.shape[4];qu(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."})),qu(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank})),qu(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),qu(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."})),qu(l===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."}));var c=ff(i,n.shape,r,1,a),d=oc.runKernelFunc((function(e){return e.conv3dDerInput(o,n,c)}),{dy5D:o});return s?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}var wy=Td({conv1d_:function(e,t,n,r,a,i,o){void 0===a&&(a="NWC"),void 0===i&&(i=1);var s=gd(e,"x","conv1d"),u=gd(t,"filter","conv1d"),l=s,c=!1;2===s.rank&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),qu(3===l.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."})),qu(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."})),null!=o&&qu(tl(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."})),qu(l.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."})),qu(wf(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+i+"'"})),qu("NWC"===a,(function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."}));var d=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),h=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),f=xy(h,d,[1,n],r,"NHWC",[1,i],o);return c?f.as2D(f.shape[2],f.shape[3]):f.as3D(f.shape[0],f.shape[2],f.shape[3])}}),xy=Td({conv2d_:function(e,t,n,r,a,i,o){void 0===a&&(a="NHWC"),void 0===i&&(i=[1,1]);var s=gd(e,"x","conv2d"),u=gd(t,"filter","conv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),qu(4===l.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."})),qu(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."})),null!=o&&qu(tl(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var d="NHWC"===a?l.shape[3]:l.shape[1];qu(d===u.shape[2],(function(){return"Error in conv2d: depth of input ("+d+") must match input depth for filter "+u.shape[2]+"."})),qu(wf(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}));var h=xf(a),f=hf(l.shape,u.shape,n,i,r,o,!1,h),p=[u,l],m=oc.runKernelFunc((function(e,t){var n=e.conv2d(l,u,f);return t([u,l]),n}),{x:l,filter:u},(function(e,t){var o=t,s=o[0],u=o[1];return qu(bf(i),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"})),{x:function(){return Ey(u.shape,e,s,n,r,a)},filter:function(){return Cy(u,e,s.shape,n,r,a)}}}),"Conv2D",f,p);return c?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),ky=Td({conv3d_:function(e,t,n,r,a,i){void 0===a&&(a="NDHWC"),void 0===i&&(i=[1,1,1]);var o=gd(e,"x","conv3d"),s=gd(t,"filter","conv3d"),u=o,l=!1;4===o.rank&&(l=!0,u=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),qu(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."})),qu(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),qu(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),qu(function(e,t){return yy(e)||yy(t)}(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),qu("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."}));var c=ff(u.shape,s.shape,n,i,r),d=oc.runKernelFunc((function(e,t){var n=e.conv3d(u,s,c);return t([u,s]),n}),{x:u,$filter:s},(function(e,t){qu(yy(i),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}));var a=t[0],o=t[1];return{x:function(){return by(a.shape,e,o,n,r)},$filter:function(){return function(e,t,n,r,a){var i=e;4===e.rank&&(i=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]));var o=t;4===o.rank&&(o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),qu(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+i.shape+"."})),qu(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+o.shape+"."})),qu(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."})),qu(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input "+i.shape[4]+") must match input depth in filter ("+n[3]+"."})),qu(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+o.shape[4]+") must match output depth for filter ("+n[4]+")."}));var s=ff(i.shape,n,r,1,a);return oc.runKernelFunc((function(e){return e.conv3dDerFilter(i,o,s)}),{x5D:i,dy5D:o})}(a,e,o.shape,n,r)}}}));return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),Cy=Td({conv2dDerFilter_:function(e,t,n,r,a,i,o){void 0===i&&(i="NHWC");var s=e;3===e.rank&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var u=t;3===u.rank&&(u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),qu(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."})),qu(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."})),qu(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var l="NHWC"===i?s.shape[3]:s.shape[1],c="NHWC"===i?u.shape[3]:u.shape[1];qu(l===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."})),qu(c===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."})),null!=o&&qu(tl(a),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var d=xf(i),h=hf(s.shape,n,r,1,a,o,!1,d);return oc.runKernelFunc((function(e){return e.conv2dDerFilter(s,u,h)}),{x4D:s,dy4D:u})}}),Ey=Td({conv2dDerInput_:gy}),Sy=Td({depthwiseConv2d_:function(e,t,n,r,a,i,o){void 0===a&&(a="NHWC"),void 0===i&&(i=[1,1]);var s=gd(e,"x","depthwiseConv2d"),u=gd(t,"filter","depthwiseConv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),qu(4===l.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."})),qu(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."})),qu(l.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."})),null==i&&(i=[1,1]),qu(wf(n,i),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),null!=o&&qu(tl(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var d=hf(l.shape,u.shape,n,i,r,o,!0),h=[l,u],f=oc.runKernelFunc((function(e,t){var n=e.depthwiseConv2D(l,u,d);return t([l,u]),n}),{x:l,filter:u},(function(e,t){qu(bf(i),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"}));var n=t[0],r=t[1];return{x:function(){return _y(n.shape,e,r,d)},filter:function(){return Ay(n,e,r.shape,d)}}}),"DepthwiseConv2dNative",d,h);return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),_y=Td({depthwiseConv2dDerInput_:function(e,t,n,r){var a=t,i=!1;3===t.rank&&(i=!0,a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=oc.runKernelFunc((function(e){return e.depthwiseConv2DDerInput(a,n,r)}),{dy4D:a});return i?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),Ay=Td({depthwiseConv2dDerFilter_:function(e,t,n,r){var a=e;3===e.rank&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=t;return 3===i.rank&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),oc.runKernelFunc((function(e){return e.depthwiseConv2DDerFilter(a,i,r)}),{x4D:a,dy4D:i})}}),Iy=Td({separableConv2d_:function(e,t,n,r,a,i,o){void 0===i&&(i=[1,1]),void 0===o&&(o="NHWC");var s=gd(e,"x","separableConv2d"),u=gd(t,"depthwiseFilter","separableConv2d"),l=gd(n,"pointwiseFilter","separableConv2d"),c=s,d=!1;if(3===s.rank&&(d=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");qu(4===c.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."})),qu(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."})),qu(4===l.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."})),qu(1===l.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."})),qu(1===l.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."}));var h=u.shape[2],f=u.shape[3];qu(l.shape[2]===h*f,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+h*f+", but got "+l.shape[2]+"."}));var p=Sy(c,u,r,a,o,i),m=xy(p,l,1,"valid",o);return d?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),Ty=Td({conv2dTranspose_:function(e,t,n,r,a,i){return gy(n,gd(e,"x","conv2dTranspose"),gd(t,"filter","conv2dTranspose"),r,a,"NHWC",i)}}),Ry=Td({conv3dTranspose_:function(e,t,n,r,a){return by(n,gd(e,"x","conv3dTranspose"),gd(t,"filter","conv3dTranspose"),r,a)}}),Ny=Td({matMul_:function(e,t,n,r){var a;void 0===n&&(n=!1),void 0===r&&(r=!1);var i=gd(e,"a","matMul"),o=gd(t,"b","matMul");a=ec(i,o),i=a[0],o=a[1];var s=n?i.shape[i.rank-2]:i.shape[i.rank-1],u=r?o.shape[o.rank-1]:o.shape[o.rank-2],l=n?i.shape[i.rank-1]:i.shape[i.rank-2],c=r?o.shape[o.rank-2]:o.shape[o.rank-1],d=i.shape.slice(0,-2),h=o.shape.slice(0,-2),f=$u(d),p=$u(h);qu(i.rank>=2&&o.rank>=2&&i.rank===o.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+o.rank+"."})),qu(el(d,h),(function(){return"Error in matMul: outer dimensions ("+d+") and ("+h+") of Tensors with shapes "+i.shape+" and "+o.shape+" must match."})),qu(s===u,(function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+i.shape+" and "+o.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var m=i.shape.slice(0,-2).concat([l,c]),v=n?i.as3D(f,s,l):i.as3D(f,l,s),g=r?o.as3D(p,c,u):o.as3D(p,u,c),y={transposeA:n,transposeB:r};return oc.runKernelFunc((function(e,t){var a=e.batchMatMul(v,g,n,r);return t([v,g]),a}),{a:v,b:g},(function(e,t){var a=t,i=a[0],o=a[1];return n||r?!n&&r?{a:function(){return e.matMul(o,!1,!1)},b:function(){return e.matMul(i,!0,!1)}}:n&&!r?{a:function(){return o.matMul(e,!1,!0)},b:function(){return i.matMul(e,!1,!1)}}:{a:function(){return o.matMul(e,!0,!0)},b:function(){return e.matMul(i,!0,!0)}}:{a:function(){return e.matMul(o,!1,!0)},b:function(){return i.matMul(e,!0,!1)}}}),"BatchMatMul",y).reshape(m)}}),Dy=Td({dot_:function(e,t){var n=gd(e,"t1","dot"),r=gd(t,"t2","dot");qu(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];return qu(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+i+"."})),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),My=Td({outerProduct_:function(e,t){var n=gd(e,"v1","outerProduct"),r=gd(t,"v2","outerProduct");return qu(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),Oy=Td({reverse_:function(e,t){var n=gd(e,"x","reverse");if(0===n.rank)return n.clone();var r=sl(t,n.shape);return oc.runKernelFunc((function(e){return e.reverse(n,r)}),{$x:n},(function(e){return{$x:function(){return e.reverse(r)}}})).reshapeAs(n)}}),Py=Td({reverse1d_:function(e){var t=gd(e,"x","reverse");return qu(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."})),Oy(t,0)}}),Fy=Td({reverse2d_:function(e,t){var n=gd(e,"x","reverse");return qu(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),Oy(n,t)}}),Ly=Td({reverse3d_:function(e,t){var n=gd(e,"x","reverse");return qu(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),Oy(n,t)}}),By=Td({reverse4d_:function(e,t){var n=gd(e,"x","reverse");return qu(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),Oy(n,t)}});function jy(e,t,n,r,a,i){var o=gd(e,"x","maxPool"),s=o,u=!1;3===o.rank&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),null==r&&(r=[1,1]),qu(4===s.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."})),qu(wf(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),null!=i&&qu(tl(a),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."}));var l=cf(s.shape,t,n,r,a,i);if(1===l.filterWidth&&1===l.filterHeight&&el(l.inShape,l.outShape))return o.clone();var c=[s],d=oc.runKernelFunc((function(e,t){var n=e.maxPool(s,l);return t([s,n]),n}),{x:s},(function(e,i){var o=i[0],s=i[1];return{x:function(){return function(e,t,n,r,a,i,o,s){var u=gd(e,"dy","maxPoolBackprop"),l=gd(t,"input","maxPoolBackprop"),c=gd(n,"output","maxPoolBackprop");qu(l.rank===u.rank,(function(){return"Rank of input ("+l.rank+") does not match rank of dy ("+u.rank+")"})),null==i&&(i=[1,1]),qu(wf(a,i),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+i+"'"})),qu(4===u.rank,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."})),qu(4===l.rank,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+l.rank+"."}));var d=cf(l.shape,r,a,i,o,s);return oc.runKernelFunc((function(e){return e.maxPoolBackprop(u,l,c,d)}),{$dy:u,$input:l})}(e,o,s,t,n,r,a)}}}),"MaxPool",l,c);return u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function zy(e,t,n,r,a,i){var o=gd(e,"x","avgPool","float32");null==r&&(r=[1,1]),qu(wf(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var s=o,u=!1;3===o.rank&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),qu(4===s.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."})),null!=i&&qu(tl(a),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."}));var l=cf(s.shape,t,n,r,a,i);if(1===l.filterWidth&&1===l.filterHeight&&el(l.inShape,l.outShape))return o.clone();var c=oc.runKernelFunc((function(e){return e.avgPool(s,l)}),{x:s},(function(e){return{x:function(){return function(e,t,n,r,a,i){var o=gd(e,"dy","avgPoolBackprop"),s=gd(t,"input","avgPoolBackprop");qu(s.rank===o.rank,(function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+o.rank+")"})),null==a&&(a=[1,1]),qu(wf(r,a),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"}));var u=s,l=o,c=!1;3===s.rank&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),qu(4===l.rank,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."})),qu(4===u.rank,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."}));var d=cf(u.shape,n,r,a,i),h=oc.runKernelFunc((function(e){return e.avgPoolBackprop(l,u,d)}),{dy4D:l,input4D:u});return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}(e,s,t,n,r,a)}}}),"AvgPool",l);return c=c.cast(o.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var Uy=Td({maxPool_:function(e,t,n,r,a){return jy(e,t,n,1,r,a)}}),Vy=Td({avgPool_:function(e,t,n,r,a){return zy(e,t,n,1,r,a)}}),Wy=Td({pool_:function(e,t,n,r,a,i){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var o=gd(e,"x","maxPool"),s=o,u=!1;3===o.rank&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),qu(wf(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"}));var l,c=cf(s.shape,t,i,a,r),d=[c.dilationHeight,c.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];var h=1===d[0]&&1===d[1],f=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]}));return[t.map((function(e,t){return[r[t],s[t]]})),t.map((function(e,t){return[0,o[t]]}))]}([c.inHeight,c.inWidth],d,l),p=f[0],m=f[1],v=h?r:"valid",g=h?s:Nh(s,d,p),y=("avg"===n?function(){return zy(g,t,i,1,v)}:function(){return jy(g,t,i,1,v)})(),b=h?y:dh(y,d,m);return u?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),Hy=Td({maxPool3d_:function(e,t,n,r,a,i,o){void 0===i&&(i="NDHWC");var s=gd(e,"x","maxPool3d"),u=s,l=!1;4===s.rank&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==o&&(o=[1,1,1]),qu(5===u.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."})),qu("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i})),qu(wf(n,o),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),null!=a&&qu(tl(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var c=df(u.shape,t,n,o,r,a,i),d=oc.runKernelFunc((function(e,t){var n=e.maxPool3d(u,c);return t([u,n]),n}),{x:u},(function(e,i){var s=i[0],u=i[1];return{x:function(){return function(e,t,n,r,a,i,o,s){var u=gd(e,"dy","maxPool3dBackprop"),l=gd(t,"input","maxPool3dBackprop"),c=gd(n,"output","maxPool3dBackprop"),d=u,h=l,f=c,p=!1;4===l.rank&&(p=!0,d=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),h=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]),f=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3])),qu(5===d.rank,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+d.rank+"."})),qu(5===h.rank,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+h.rank+"."})),qu(5===f.rank,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+f.rank+"."})),null==i&&(i=[1,1,1]),qu(wf(a,i),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+i+"'"})),null!=s&&qu(tl(o),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+o+"."}));var m=df(h.shape,r,a,i,o,s),v=oc.runKernelFunc((function(e){return e.maxPool3dBackprop(d,h,f,m)}),{dy5D:d,input5D:h});return p?v.as4D(v.shape[1],v.shape[2],v.shape[3],v.shape[4]):v}(e,s,u,t,n,o,r,a)}}}));return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),Gy=Td({avgPool3d_:function(e,t,n,r,a,i,o){void 0===i&&(i="NDHWC");var s=gd(e,"x","avgPool3d","float32"),u=s,l=!1;4===s.rank&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==o&&(o=[1,1,1]),qu(5===u.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."})),qu("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i})),qu(wf(n,o),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),null!=a&&qu(tl(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var c=df(u.shape,t,n,o,r,a,i),d=oc.runKernelFunc((function(e){return e.avgPool3d(u,c)}),{x:u},(function(e){return{x:function(){return function(e,t,n,r,a,i,o){var s=gd(e,"dy","avgPool3dBackprop"),u=gd(t,"input","avgPool3dBackprop"),l=s,c=u,d=!1;4===u.rank&&(d=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),qu(5===l.rank,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+l.rank+"."})),qu(5===c.rank,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+c.rank+"."})),null==a&&(a=[1,1,1]),qu(wf(r,a),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"})),null!=o&&qu(tl(i),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."}));var h=df(c.shape,n,r,a,i,o),f=oc.runKernelFunc((function(e){return e.avgPool3dBackprop(l,c,h)}),{dy5D:l,input5D:c});return d?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}(e,u,t,n,o,r,a)}}}));return d=d.cast(u.dtype),l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),Ky=Td({slice_:function(e,t,n){var r,a,i=gd(e,"x","slice");if(0===i.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice()).forEach((function(e){qu(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i.rank).fill(-1):"number"==typeof n?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map((function(e,t){return e>=0?e:(qu(-1===e,(function(){return"Negative size values should be exactly -1 but got "+e+" for the slice() size at index "+t+"."})),i.shape[t]-r[t])})),Xh(i,r,a);var o=i.shape,s={begin:r,size:a};return oc.runKernelFunc((function(e){return e.slice(i,r,a)}),{x:i},(function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],o[n]-r[n]-a[n]]);return{x:function(){return e.pad(t)}}}),"Slice",s)}}),Xy=Td({slice1d_:function(e,t,n){var r=gd(e,"x","slice1d");return qu(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),Ky(r,[t],[n])}}),Yy=Td({slice2d_:function(e,t,n){var r=gd(e,"x","slice2d");return qu(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),Ky(r,t,n)}}),qy=Td({slice3d_:function(e,t,n){var r=gd(e,"x","slice3d");return qu(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),Ky(r,t,n)}}),Zy=Td({slice4d_:function(e,t,n){var r=gd(e,"x","slice4d");return qu(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),Ky(r,t,n)}});function Qy(e,t,n,r,a){return t.rank<n.rank&&(t=t.reshape(kd(t.shape,r))),e.rank<n.rank&&(e=e.reshape(kd(e.shape,r))),{x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==a?r:r.transpose(a)}}}var Jy=Td({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=gd(e,"x","all","bool"),a=sl(t,r.shape),i=a,o=Ed(i,r.rank);null!=o&&(r=r.transpose(o),i=_d(i.length,r.rank));var s=oc.runKernelFunc((function(e){return e.all(r,i)}),{$x:r});if(n){var u=kd(s.shape,a);return s.reshape(u)}return s}}),$y=Td({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=gd(e,"x","any","bool"),a=sl(t,r.shape),i=a,o=Ed(i,r.rank);null!=o&&(r=r.transpose(o),i=_d(i.length,r.rank));var s=oc.runKernelFunc((function(e){return e.any(r,i)}),{$x:r});if(n){var u=kd(s.shape,a);return s.reshape(u)}return s}}),eb=Td({argMax_:function(e,t){void 0===t&&(t=0);var n=gd(e,"x","argMax");null==t&&(t=0);var r=sl(t,n.shape),a=Ed(r,n.rank);null!=a&&(n=n.transpose(a),r=_d(r.length,n.rank));var i={axis:r[0]},o=[n];return oc.runKernelFunc((function(e,t){var a=e.argMax(n,r[0]);return t([n]),a}),{x:n},(function(e,t){var n=t[0];return{x:function(){return Gd(n)}}}),"ArgMax",i,o)}}),tb=Td({argMin_:function(e,t){void 0===t&&(t=0);var n=gd(e,"x","argMin");null==t&&(t=0);var r=sl(t,n.shape),a=Ed(r,n.rank);return null!=a&&(n=n.transpose(a),r=_d(r.length,n.rank)),oc.runKernelFunc((function(e,t){var a=e.argMin(n,r[0]);return t([n]),a}),{$x:n},(function(e,t){var n=t[0];return{$x:function(){return Gd(n)}}}))}}),nb=Td({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=gd(e,"x","logSumExp"),a=sl(t,r.shape),i=r.max(a,!0),o=r.sub(i).exp().sum(a).log(),s=i.reshape(o.shape).add(o);if(n){var u=kd(s.shape,a);return s.reshape(u)}return s}}),rb=Td({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=gd(e,"x","max"),a=r,i=sl(t,r.shape),o=i,s=Ed(o,r.rank);null!=s&&(r=r.transpose(s),o=_d(o.length,r.rank));var u=[r],l=oc.runKernelFunc((function(e,t){var n=e.max(r,o);return t([a,n]),n}),{x:r},(function(e,t){return Qy(e,t[1],t[0],i,s)}),"Max",{axes:o},u,[!0]);if(n){var c=kd(l.shape,i);l=l.reshape(c)}return l}}),ab=Td({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=gd(e,"x","mean"),a=sl(t,r.shape),i=$u(xd(r.shape,a)[1]);return ef((function(e){var r=Pd(i);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return a.forEach((function(e){n[e]=1})),t.reshape(n).mul(zd(e.shape,"float32")).div(i)}}}))(r)}}),ib=Td({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=gd(e,"x","min"),a=r,i=sl(t,r.shape),o=i,s=Ed(o,r.rank);null!=s&&(r=r.transpose(s),o=_d(o.length,r.rank));var u=[r],l=oc.runKernelFunc((function(e,t){var n=e.min(r,o);return t([a,n]),n}),{x:r},(function(e,t){return Qy(e,t[1],t[0],i,s)}),"Min",{axes:o},u,[!0]);if(n){var c=kd(l.shape,i);l=l.reshape(c)}return l}}),ob=Td({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=sl(t,(e=gd(e,"x","moments")).shape),a=e.mean(r,n),i=a.shape;n||(i=kd(a.shape,r));var o=e.toFloat().sub(a.reshape(i)).square();return{mean:a,variance:o.mean(r,n)}}}),sb=Td({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=gd(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var a=sl(t,r.shape);return ef((function(e){var t=Ed(a,e.rank),r=a,i=e;null!=t&&(i=e.transpose(t),r=_d(r.length,e.rank));var o=function(t){var n=e.shape.slice();return a.forEach((function(e){n[e]=1})),t.reshape(n).mul(zd(e.shape,"float32"))},s={axes:r},u=oc.runKernelFunc((function(e){return e.sum(i,r)}),{x:i},(function(e){return{x:function(){return o(e)}}}),"Sum",s);if(n){var l=kd(u.shape,a);u=u.reshape(l)}return{value:u,gradFunc:o}}))(r)}}),ub=Td({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=gd(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var a=sl(t,r.shape),i=Ed(a,r.rank),o=a,s=r;null!=i&&(s=r.transpose(i),o=_d(o.length,r.rank));var u=oc.runKernelFunc((function(e){return e.prod(s,o)}),{permutedX:s});if(n){var l=kd(u.shape,a);u=u.reshape(l)}return u}}),lb=Td({elu_:function(e){var t=gd(e,"x","elu");return oc.runKernelFunc((function(e,n){var r=e.elu(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return oc.runKernelFunc((function(t){return t.eluDer(e,n)}),{dy:e,y:n})}}}))}}),cb=Td({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=gd(e,"x","leakyRelu");return Vg(Pd(t).mul(n),n)}}),db=Td({prelu_:function(e,t){var n=gd(e,"x","prelu"),r=gd(t,"alpha","prelu");return oc.runKernelFunc((function(e,t){var a=e.prelu(n,r);return t([n,r]),a}),{x:n,alpha:r},(function(e,t){var n=t[0],r=t[1],a=n.greater(0);return{x:function(){return Dg(a,e,e.mul(r))},alpha:function(){var t=Dg(a,Gd(e),e.mul(n)),i=uf(r.shape,e.shape);return i.length>0&&(t=t.sum(i)),t.reshape(r.shape)}}}),"Prelu")}}),hb=Td({relu_:function(e){var t=gd(e,"x","relu");return"bool"===t.dtype?t.toInt():oc.runKernelFunc((function(e,n){var r=e.relu(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mulStrict(n.step().toFloat())}}}),"Relu")}}),fb=Td({relu6_:function(e){var t=gd(e,"x","relu6");return"bool"===t.dtype?t.toInt():oc.runKernelFunc((function(e,n){var r=e.relu6(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return e.mulStrict(r.toFloat())}}}),"Relu6")}}),pb=Td({selu_:function(e){var t=gd(e,"x","selu");return oc.runKernelFunc((function(e,n){var r=e.selu(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){var t=n.greater(Pd(0)),r=Pd(ev),a=Pd(tv),i=e.mul(a),o=e.mul(r).mul(n.toFloat().exp());return Dg(t,i,o)}}}))}}),mb=Td({transpose_:function(e,t){var n=gd(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),qu(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."})),t.forEach((function(e){qu(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t}))})),n.rank<=1)return n.clone();var r={perm:t};return oc.runKernelFunc((function(e){return e.transpose(n,t)}),{x:n},(function(e){var n=Sd(t);return{x:function(){return e.transpose(n)}}}),"Transpose",r)}}),vb=Td({localResponseNormalization_:function(e,t,n,r,a){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===a&&(a=.5);var i=gd(e,"x","localResponseNormalization");qu(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+i.rank+"."})),qu(tl(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."}));var o=i,s=!1;3===i.rank&&(s=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var u=oc.runKernelFunc((function(e,i){var s=e.localResponseNormalization4D(o,t,n,r,a);return i([o,s]),s}),{x4D:o},(function(e,i){var o=i[0],s=i[1];return{x4D:function(){return oc.runKernelFunc((function(i){return i.LRNGrad(e,o,s,t,n,r,a)}),{})}}}));return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),gb=Td({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var a=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(Pd(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=gd(e,"x","norm"),t,n),i=a.shape;if(r){var o=sl(n,e.shape);i=kd(a.shape,o)}return a.reshape(i)}}),yb=Td({basicLSTMCell_:function(e,t,n,r,a,i){var o=gd(e,"forgetBias","basicLSTMCell"),s=gd(t,"lstmKernel","basicLSTMCell"),u=gd(n,"lstmBias","basicLSTMCell"),l=gd(r,"data","basicLSTMCell"),c=gd(a,"c","basicLSTMCell"),d=gd(i,"h","basicLSTMCell"),h=l.concat(d,1).matMul(s).add(u),f=h.shape[0],p=h.shape[1]/4,m=[f,p],v=h.slice([0,0],m),g=h.slice([0,p],m),y=h.slice([0,2*p],m),b=h.slice([0,3*p],m),w=v.sigmoid().mulStrict(g.tanh()).addStrict(c.mulStrict(o.add(y).sigmoid())),x=w.tanh().mulStrict(b.sigmoid());return[w,x]}}),bb=Td({multiRNNCell_:function(e,t,n,r){for(var a=gd(t,"data","multiRNNCell"),i=yd(n,"c","multiRNNCell"),o=yd(r,"h","multiRNNCell"),s=a,u=[],l=0;l<e.length;l++){var c=e[l](s,i[l],o[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var d=[],h=[];for(l=0;l<u.length;l+=2)d.push(u[l]),h.push(u[l+1]);return[d,h]}}),wb=Td({movingAverage_:function(e,t,n,r,a){void 0===a&&(a=!0);var i=gd(e,"v","movingAverage"),o=gd(t,"x","movingAverage"),s=gd(n,"decay","movingAverage");tc(i,o),qu(el(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var u=Pd(1),l=u.sub(s),c=o.sub(i).mul(l);if(a){qu(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=gd(r,"step","movingAverage");c=c.div(u.sub(Zg(s,d)))}return i.add(c)}}),xb=Td({stridedSlice_:function(e,t,n,r,a,i,o,s,u){if(void 0===a&&(a=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===u&&(u=0),null==r&&(r=new Array(t.length)),0!==o)throw new Error("ellipsis mask is not yet supported");var l=gd(e,"x","stridedSlice"),c=Yh(s),d=l.shape.slice();c.forEach((function(e){t[e]=0,n[e]=1,d.splice(e,0,1)})),l=l.reshape(d);for(var h=0;h<l.rank;h++)t[h]=Zh(a,t,r,l.shape,h),n[h]=Qh(i,n,r,l.shape,h),r[h]=r[h]||1;var f=Yh(u);f.forEach((function(e){n[e]=t[e]+1,r[e]=1}));var p=qh(t,n,r),m=p.filter((function(e,t){return-1===f.indexOf(t)}));return r.every((function(e){return 1===e}))?Ky(l,t,p).reshape(m):oc.runKernelFunc((function(e){return e.stridedSlice(l,t,n,r)}),{$x:l}).reshape(m)}}),kb=Td({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=gd(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+t);var i=oc.runKernelFunc((function(e){return e.topk(r,t,n)}),{$x:r});return{values:i[0],indices:i[1]}}}),Cb=Td({scatterND_:function(e,t,n){var r=gd(e,"indices","scatterND","int32"),a=gd(t,"updates","scatterND");return Gh(a,r,n),oc.runKernelFunc((function(e){return e.scatterND(r,a,n)}),{indices:r,updates:a},null,"ScatterNd",{shape:n})}}),Eb=Td({fft_:function(e){qu("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return oc.runKernelFunc((function(e){return e.fft(r)}),{input:e}).reshape(e.shape)}}),Sb=Td({ifft_:function(e){qu("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return oc.runKernelFunc((function(e){return e.ifft(r)}),{input:e}).reshape(e.shape)}}),_b=Td({rfft_:function(e,t){qu("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got "+e.dtype}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=e.slice(i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=e.concat(Ud(s),e.shape.length-1),r=t}else n=e;var u=n.zerosLike(),l=Rd(n,u).as2D(a,r),c=Eb(l),d=Math.floor(r/2)+1,h=Nd(c),f=Dd(c),p=h.split([d,r-d],h.shape.length-1),m=f.split([d,r-d],f.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=d,Rd(p[0],m[0]).reshape(v)}}),Ab=Td({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),a=Sb(r);return Nd(a)}var i=[n,2*(t-1)],o=Nd(e).as2D(n,t),s=Dd(e).as2D(n,t),u=o.slice([0,1],[n,t-2]).reverse(1),l=s.slice([0,1],[n,t-2]).reverse(1).mul(Pd(-1)),c=o.concat(u,1),d=s.concat(l,1);return r=Rd(c,d).as2D(i[0],i[1]),a=Sb(r),Nd(a)}}),Ib=Object.freeze({fft:Eb,ifft:Sb,rfft:_b,irfft:Ab}),Tb=Td({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0);var a=gd(e,"sparseIndices","sparseToDense","int32"),i=gd(t,"sparseValues","sparseToDense"),o=gd(r,"defaultValue","sparseToDense",i.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+i+".");var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+a+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,n,o),oc.runKernelFunc((function(e){return e.sparseToDense(a,i,n,o)}),{$sparseIndices:a,$sparseValues:i,$defaultValue:o})}}),Rb=Td({gatherND_:function(e,t){var n=gd(t,"indices","gatherND","int32"),r=gd(e,"x","gatherND");return oc.runKernelFunc((function(e){return e.gatherND(r,n)}),{x:r,indices:n},null,"GatherNd")}}),Nb=Td({diag_:function(e){var t=gd(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return oc.runKernelFunc((function(e){return e.diag(t)}),{$x:t}).reshape(n)}}),Db=Td({dropout_:function(e,t,n,r){var a=gd(e,"x","dropout");if(qu("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."})),qu(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got "+t+"."})),0===t)return e instanceof Wl?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(el(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=Th(i,0,1,"float32",r).add(o).floor().div(o);return a.mul(s)}});function Mb(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return Fd(a,"float32")}var Ob,Pb=Td({hannWindow_:function(e){return Mb(e,.5,.5)}}),Fb=Td({hammingWindow_:function(e){return Mb(e,.54,.46)}}),Lb=Td({frame_:function(e,t,n,r,a){void 0===r&&(r=!1),void 0===a&&(a=0);for(var i=0,o=[];i+t<=e.size;)o.push(Ky(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=Kd([Ky(e,i,t-s),Vd([s],a)]);o.push(u),i+=n}return 0===o.length?Ld([],[0,t]):Kd(o).as2D(o.length,t)}}),Bb=Td({stft_:function(e,t,n,r,a){var i;void 0===a&&(a=Pb),null==r&&(i=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var o=Lb(e,t,n),s=Yg(o,a(t)),u=[],l=0;l<o.shape[0];l++)u.push(_b(s.slice([l,0],[1,t]),r));return Kd(u)}}),jb=Object.freeze({hannWindow:Pb,hammingWindow:Fb,frame:Lb,stft:Bb});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Ob||(Ob={}));var zb=Td({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=Ob.SUM_BY_NONZERO_WEIGHTS);var a=gd(e,"labels","absoluteDifference"),i=gd(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=gd(n,"weights","absoluteDifference")),Zu(a.shape,i.shape,"Error in absoluteDifference: ");var s=a.sub(i).abs();return Ub(s,o,r)}}),Ub=Td({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=Ob.SUM_BY_NONZERO_WEIGHTS);var r=gd(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=gd(t,"weights","computeWeightedLoss"));var i=null==a?r:r.mul(a);if(n===Ob.NONE)return i;if(n===Ob.SUM)return i.sum();if(n===Ob.MEAN){if(null==a)return i.mean();var o=r.size/a.size,s=i.sum().div(a.sum());return o>1?s.div(Pd(o)):s}if(n===Ob.SUM_BY_NONZERO_WEIGHTS){if(null==a)return i.sum().div(Pd(r.size));var u=a.mul(zd(r.shape)).notEqual(Pd(0)).sum().toFloat();return i.sum().div(u)}throw Error("Unknown reduction: "+n)}}),Vb=Td({cosineDistance_:function(e,t,n,r,a){void 0===a&&(a=Ob.SUM_BY_NONZERO_WEIGHTS);var i=gd(e,"labels","cosineDistance"),o=gd(t,"predictions","cosineDistance"),s=null;null!=r&&(s=gd(r,"weights","cosineDistance")),Zu(i.shape,o.shape,"Error in cosineDistance: ");var u=Pd(1).sub(i.mul(o).sum(n,!0));return Ub(u,s,a)}}),Wb=Td({hingeLoss_:function(e,t,n,r){void 0===r&&(r=Ob.SUM_BY_NONZERO_WEIGHTS);var a=gd(e,"labels","hingeLoss"),i=gd(t,"predictions","hingeLoss"),o=null;null!=n&&(o=gd(n,"weights","hingeLoss")),Zu(a.shape,i.shape,"Error in hingeLoss: ");var s=Pd(1);a=Pd(2).mul(a).sub(s);var u=s.sub(a.mul(i)).relu();return Ub(u,o,r)}}),Hb=Td({huberLoss_:function(e,t,n,r,a){void 0===r&&(r=1),void 0===a&&(a=Ob.SUM_BY_NONZERO_WEIGHTS);var i=gd(e,"labels","huberLoss"),o=gd(t,"predictions","huberLoss"),s=null;null!=n&&(s=gd(n,"weights","huberLoss")),Zu(i.shape,o.shape,"Error in huberLoss: ");var u=Pd(r),l=o.sub(i).abs(),c=Hg(l,u),d=l.sub(c),h=Pd(.5).mul(c.square()).add(u.mul(d));return Ub(h,s,a)}}),Gb=Td({logLoss_:function(e,t,n,r,a){void 0===r&&(r=1e-7),void 0===a&&(a=Ob.SUM_BY_NONZERO_WEIGHTS);var i=gd(e,"labels","logLoss"),o=gd(t,"predictions","logLoss"),s=null;null!=n&&(s=gd(n,"weights","logLoss")),Zu(i.shape,o.shape,"Error in logLoss: ");var u=Pd(1),l=Pd(r),c=i.mul(o.add(l).log()).neg().sub(u.sub(i).mul(u.sub(o).add(l).log()));return Ub(c,s,a)}}),Kb=Td({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=Ob.SUM_BY_NONZERO_WEIGHTS);var a=gd(e,"labels","meanSquaredError"),i=gd(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=gd(n,"weights","meanSquaredError")),Zu(a.shape,i.shape,"Error in meanSquaredError: ");var s=a.squaredDifference(i);return Ub(s,o,r)}}),Xb=Td({sigmoidCrossEntropy_:function(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=Ob.SUM_BY_NONZERO_WEIGHTS);var i=gd(e,"multiClassLabels","sigmoidCrossEntropy"),o=gd(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=gd(n,"weights","sigmoidCrossEntropy")),Zu(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Pd(r),l=Pd(1),c=Pd(.5);i=i.mul(l.sub(u)).add(c.mul(u))}var d=function(e,t){var n=gd(e,"labels","sigmoidCrossEntropyWithLogits"),r=gd(t,"logits","sigmoidCrossEntropyWithLogits");Zu(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=r.relu(),i=r.mul(n),o=r.abs().neg().exp().log1p();return a.sub(i).add(o)}(i,o);return Ub(d,s,a)}}),Yb=Td({softmaxCrossEntropy_:function(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=Ob.SUM_BY_NONZERO_WEIGHTS);var i=gd(e,"onehotLabels","softmaxCrossEntropy"),o=gd(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=gd(n,"weights","softmaxCrossEntropy")),Zu(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Pd(r),l=Pd(1),c=Pd(i.shape[1]);i=i.mul(l.sub(u)).add(u.div(c))}var d=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return ef((function(e,t,r){var a=t.logSumExp([n],!0),i=t.toFloat().sub(a);return r([e,i]),{value:i.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],a=t[1],i=kd(e.shape,[n]);return[e.reshape(i).mul(r.toFloat().sub(a.exp())),e.reshape(i).mul(a.exp().sub(r.toFloat()))]}}}))(e,t)}(i,o);return Ub(d,s,a)}}),qb=Object.freeze({get Reduction(){return Ob},absoluteDifference:zb,computeWeightedLoss:Ub,cosineDistance:Vb,hingeLoss:Wb,huberLoss:Hb,logLoss:Gb,meanSquaredError:Kb,sigmoidCrossEntropy:Xb,softmaxCrossEntropy:Yb});function Zb(e,t){return void 0===t&&(t=!1),oc.tidy((function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],a=yh(n),i=e.clone(),o=Ld([[1]],[1,1]),s=o.clone(),u=n>=r?r:n,l=function(e){var t,u=i,l=s,c=a;t=oc.tidy((function(){var t=i.slice([e,e],[n-e,1]),u=t.norm(),l=i.slice([e,e],[1,1]),c=Ld([[-1]]).where(l.greater(0),Ld([[1]])),d=l.sub(c.mul(u)),h=t.div(d);s=1===h.shape[0]?o.clone():o.concat(h.slice([1,0],[h.shape[0]-1,h.shape[1]]),0);var f=c.matMul(d).div(u).neg(),p=i.slice([e,0],[n-e,r]),m=f.mul(s);if(0===e)i=p.sub(m.matMul(s.transpose().matMul(p)));else{var v=p.sub(m.matMul(s.transpose().matMul(p)));i=i.slice([0,0],[e,r]).concat(v,0)}var g=a.slice([0,e],[n,a.shape[1]-e]);if(0===e)a=g.sub(g.matMul(s).matMul(m.transpose()));else{var y=g.sub(g.matMul(s).matMul(m.transpose()));a=a.slice([0,0],[n,e]).concat(y,1)}return[s,i,a]})),s=t[0],i=t[1],a=t[2],fd([u,l,c])},c=0;c<u;++c)l(c);return!t&&n>r&&(a=a.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[a,i]}))}var Qb=Td({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=gd(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var a=r.shape,i=r.shape.slice(-2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+o+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=o),n<0&&(n=s);var u=Wd(0,o,1,"int32").reshape([-1,1]),l=Wd(0,s,1,"int32"),c=$g(u,l),d=Ig(c.lessEqual(Pd(+t,"int32")),c.greaterEqual(Pd(-n,"int32"))),h=Ud([o,s],r.dtype);return Mh(Fh(r.reshape([-1,o,s])).map((function(e){return Dg(d,e,h)}))).reshape(a)}}),Jb=Td({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,qu(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){qu(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"}))},a=1;a<e.length;++a)r(a)}else t=!0,e=Qd(e,e.shape[0],0).map((function(e){return Dh(e,[0])}));qu(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."}));var i=[],o=e,s=function(e){i.push(oc.tidy((function(){var t=o[e];if(e>0)for(var n=0;n<e;++n){var r=sb(i[n].mulStrict(t)).mul(i[n]);t=t.sub(r)}return t.div(gb(t,"euclidean"))})))};for(a=0;a<e.length;++a)s(a);return t?Mh(i,0):i}}),$b=Td({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return Zb(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=Fh(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];return r.forEach((function(e){var n=Zb(e,t),r=n[0],o=n[1];a.push(r),i.push(o)})),[Mh(a,0).reshape(e.shape),Mh(i,0).reshape(e.shape)]}}),ew=Object.freeze({bandPart:Qb,gramSchmidt:Jb,qr:$b});function tw(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),qu(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),qu(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"})),qu(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]})),qu(1===t.rank,(function(){return"scores must be a 1D tensor"})),qu(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]})),qu(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var nw=Td({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=gd(e,"images","resizeBilinear");qu(3===r.rank||4===r.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),qu(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."}));var a=r,i=!1;3===r.rank&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],s=t[1],u=oc.runKernelFunc((function(e,t){return t([a]),e.resizeBilinear(a,o,s,n)}),{x:a},(function(e,t){return{x:function(){return oc.runKernelFunc((function(r){return r.resizeBilinearBackprop(e,t[0],n)}),{})}}}),"ResizeBilinear",{alignCorners:n,newHeight:o,newWidth:s});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),rw=Td({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=gd(e,"images","resizeNearestNeighbor");qu(3===r.rank||4===r.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),qu(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."})),qu("float32"===r.dtype||"int32"===r.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"}));var a=r,i=!1;3===r.rank&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],s=t[1],u=oc.runKernelFunc((function(e,t){return t([a]),e.resizeNearestNeighbor(a,o,s,n)}),{batchImages:a},(function(e,t){return{batchImages:function(){return oc.runKernelFunc((function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)}),{})}}}));return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),aw=Td({nonMaxSuppression_:function(e,t,n,r,a){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY);var i=gd(e,"boxes","nonMaxSuppression"),o=gd(t,"scores","nonMaxSuppression"),s=tw(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return oc.runKernelFunc((function(e){return e.nonMaxSuppression(i,o,n,r,a)}),{boxes:i,scores:o},null,"NonMaxSuppressionV3",u)}}),iw=Td({nonMaxSuppressionWithScore_:function(e,t,n,r,a,i){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),void 0===i&&(i=0);var o=gd(e,"boxes","nonMaxSuppression"),s=gd(t,"scores","nonMaxSuppression"),u=tw(o,s,n,r,a,i),l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},c=oc.runKernel("NonMaxSuppressionV5",{boxes:o,scores:s},l);return{selectedIndices:c[0],selectedScores:c[1]}}}),ow=Td({cropAndResize_:function(e,t,n,r,a,i){var o=gd(e,"image","cropAndResize"),s=gd(t,"boxes","cropAndResize","float32"),u=gd(n,"boxInd","cropAndResize","int32");a=a||"bilinear",i=i||0;var l=s.shape[0];return qu(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."})),qu(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."})),qu(1===u.rank&&u.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."})),qu(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),qu(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),qu("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was "+a})),oc.runKernelFunc((function(e,t){return e.cropAndResize(o,s,u,r,a,i)}),{images:o,boxes:s,boxInd:u},null,"CropAndResize",{method:a,extrapolationValue:i,cropSize:r})}}),sw=Object.freeze({resizeBilinear:nw,resizeNearestNeighbor:rw,nonMaxSuppression:aw,nonMaxSuppressionAsync:function(e,t,n,r,a){return void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),Du(this,void 0,void 0,(function(){var i,o,s,u,l,c,d;return Mu(this,(function(h){switch(h.label){case 0:return i=gd(e,"boxes","nonMaxSuppressionAsync"),o=gd(t,"scores","nonMaxSuppressionAsync"),s=tw(i,o,n,r,a),n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold,[4,Promise.all([i.data(),o.data()])];case 1:return u=h.sent(),l=u[0],c=u[1],d=Nf(l,c,n,r,a),i!==e&&i.dispose(),o!==t&&o.dispose(),[2,d]}}))}))},nonMaxSuppressionWithScore:iw,nonMaxSuppressionWithScoreAsync:function(e,t,n,r,a,i){return void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),void 0===i&&(i=0),Du(this,void 0,void 0,(function(){var o,s,u,l,c,d,h;return Mu(this,(function(f){switch(f.label){case 0:return o=gd(e,"boxes","nonMaxSuppressionAsync"),s=gd(t,"scores","nonMaxSuppressionAsync"),u=tw(o,s,n,r,a,i),n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,i=u.softNmsSigma,[4,Promise.all([o.data(),s.data()])];case 1:return l=f.sent(),c=l[0],d=l[1],h=Df(c,d,n,r,a,i),o!==e&&o.dispose(),s!==t&&s.dispose(),[2,h]}}))}))},cropAndResize:ow}),uw=function(e,t){return!(e>0)||"linear"===t},lw=function(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},cw=function(e,t){var n=t,r=uf(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},dw=function(e,t,n){if("linear"===t)return e;if("relu"===t)return hb(e);if("elu"===t)return lb(e);if("relu6"===t)return fb(e);if("prelu"===t)return db(e,n);throw new Error("Unknown fused activation "+t+".")},hw=Td({fusedMatMul_:function(e){var t,n=e.a,r=e.b,a=e.transposeA,i=void 0!==a&&a,o=e.transposeB,s=void 0!==o&&o,u=e.bias,l=e.activation,c=void 0===l?"linear":l,d=e.preluActivationWeights;if(!1===uw(oc.state.gradientDepth,c)){var h=Ny(n,r,i,s);return null!=u&&(h=Og(h,u)),dw(h,c,d)}var f=gd(n,"a","fused matMul"),p=gd(r,"b","fused matMul");t=ec(f,p),f=t[0],p=t[1];var m=i?f.shape[f.rank-2]:f.shape[f.rank-1],v=s?p.shape[p.rank-1]:p.shape[p.rank-2],g=i?f.shape[f.rank-1]:f.shape[f.rank-2],y=s?p.shape[p.rank-2]:p.shape[p.rank-1],b=f.shape.slice(0,-2),w=p.shape.slice(0,-2),x=$u(b),k=$u(w);qu(f.rank>=2&&p.rank>=2&&f.rank===p.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+f.rank+" and "+p.rank+"."})),qu(el(b,w),(function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+w+") of Tensors with shapes "+f.shape+" and "+p.shape+" must match."})),qu(m===v,(function(){return"Error in fused matMul: inner shapes ("+m+") and ("+v+") of Tensors with shapes "+f.shape+" and "+p.shape+" and transposeA="+i+" and transposeB="+s+" must match."}));var C,E,S=f.shape.slice(0,-2).concat([g,y]),_=i?f.as3D(x,m,g):f.as3D(x,g,m),A=s?p.as3D(k,y,v):p.as3D(k,v,y);null!=u&&lf(S,(C=ec(C=gd(u,"bias","fused matMul"),f)[0]).shape),null!=d&&(E=gd(d,"prelu weights","fused matMul"));var I={a:_,b:A};null!=u&&(I.bias=C),null!=d&&(I.preluActivationWeights=E);var T=[_,A];return oc.runKernelFunc((function(e,t){var n=e.fusedBatchMatMul({a:_,b:A,transposeA:i,transposeB:s,bias:C,activation:c,preluActivationWeights:E});return t([_,A,n]),n}),I,(function(e,t){var n=t[0],r=t[1],a=t[2],o=lw(e,a,c),l={};return null!=u&&(l={bias:function(){return cw(C,o)}}),i||s?!i&&s?Object.assign({a:function(){return o.matMul(r,!1,!1)},b:function(){return o.matMul(n,!0,!1)}},l):i&&!s?Object.assign({a:function(){return r.matMul(o,!1,!0)},b:function(){return n.matMul(o,!1,!1)}},l):Object.assign({a:function(){return r.matMul(o,!0,!0)},b:function(){return o.matMul(n,!0,!0)}},l):Object.assign({a:function(){return o.matMul(r,!1,!0)},b:function(){return n.matMul(o,!0,!1)}},l)}),"_FusedMatMul",{transposeA:i,transposeB:s,activation:c},T,[!0]).reshape(S)}}),fw=Td({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,l=e.dimRoundingMode,c=e.bias,d=e.activation,h=void 0===d?"linear":d,f=e.preluActivationWeights;if(h=h||"linear",!1===uw(oc.state.gradientDepth,h)){var p=xy(t,n,r,a,o,u,l);return null!=c&&(p=Og(p,c)),dw(p,h,f)}var m=gd(t,"x","conv2d"),v=gd(n,"filter","conv2d"),g=m,y=!1;3===m.rank&&(y=!0,g=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),qu(4===g.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."})),qu(4===v.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+v.rank+"."})),null!=l&&qu(tl(a),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+a+"."})),qu(g.shape[3]===v.shape[2],(function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+v.shape[2]+"."})),qu(wf(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),qu("NHWC"===o,(function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."}));var b,w,x=hf(g.shape,v.shape,r,u,a,l);null!=c&&(b=ec(b=gd(c,"bias","fused conv2d"),m)[0],lf(x.outShape,b.shape)),null!=f&&(w=gd(f,"prelu weights","fused conv2d"));var k={x:g,filter:v};null!=c&&(k.bias=b),null!=f&&(k.preluActivationWeights=w);var C=[v,g],E=oc.runKernelFunc((function(e,t){var n=e.fusedConv2d({input:g,filter:v,convInfo:x,bias:b,activation:h,preluActivationWeights:w});return t([v,g,n]),n}),k,(function(e,t){var n=t,i=n[0],o=n[1],s=n[2],l=lw(e,s,h);qu(bf(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"}));var d={};return null!=c&&(d={bias:function(){return cw(b,l)}}),Object.assign({x:function(){return Ey(o.shape,l,i,r,a)},filter:function(){return Cy(o,l,i.shape,r,a)}},d)}),"FusedConv2D",{convInfo:x,activation:h},C,[!0]);return y?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),pw=Td({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,l=e.dimRoundingMode,c=e.bias,d=e.activation,h=void 0===d?"linear":d,f=e.preluActivationWeights;if(!1===uw(oc.state.gradientDepth,h)){var p=Sy(t,n,r,a,o,u,l);return null!=c&&(p=Og(p,c)),dw(p,h,f)}var m=gd(t,"x","depthwiseConv2d"),v=gd(n,"filter","depthwiseConv2d"),g=m,y=!1;3===m.rank&&(y=!0,g=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),qu(4===g.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."})),qu(4===v.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+v.rank+"."})),qu(g.shape[3]===v.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+v.shape[2]+"."})),null==u&&(u=[1,1]),qu(wf(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),null!=l&&qu(tl(a),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+a+"."}));var b,w,x=hf(g.shape,v.shape,r,u,a,l,!0);null!=c&&(b=ec(b=gd(c,"bias","fused conv2d"),m)[0],lf(x.outShape,b.shape)),null!=f&&(w=gd(f,"prelu weights","fused depthwiseConv2d"));var k={x:g,filter:v};null!=c&&(k.bias=b),null!=f&&(k.preluActivationWeights=w);var C=[v,g],E=oc.runKernelFunc((function(e,t){var n=e.fusedDepthwiseConv2D({input:g,filter:v,convInfo:x,bias:b,activation:h,preluActivationWeights:w});return t([v,g,n]),n}),k,(function(e,t){qu(bf(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"}));var n=t[0],r=t[1],a=t[2],i=lw(e,a,h),o={};return null!=c&&(o={bias:function(){return cw(b,i)}}),Object.assign({x:function(){return _y(r.shape,i,n,x)},filter:function(){return Ay(r,i,n.shape,x)}},o)}),"FusedDepthwiseConv2D",{convInfo:x,activation:h},C,[!0]);return y?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),mw=Object.freeze({matMul:hw,conv2d:fw,depthwiseConv2d:pw}),vw=Object.freeze({image:sw,linalg:ew,losses:qb,spectral:Ib,fused:mw,signal:jb,square:Nv,squaredDifference:Mv,conv1d:wy,conv2d:xy,conv3d:ky,depthwiseConv2d:Sy,separableConv2d:Iy,conv2dTranspose:Ty,conv3dTranspose:Ry,op:Td,batchNormalization2d:wg,batchNormalization3d:xg,batchNormalization4d:kg,batchNormalization:Cg,batchNorm:Eg,batchNorm2d:Sg,batchNorm3d:_g,batchNorm4d:Ag,booleanMaskAsync:function(e,t,n){return Du(this,void 0,void 0,(function(){var r,a,i,o,s,u,l,c,d,h,f,p,m;return Mu(this,(function(v){switch(v.label){case 0:for(r=gd(e,"tensor","boolMask"),a=gd(t,"mask","boolMask","bool"),i=null==n?0:n,o=a.rank,s=r.shape,qu(o>0,(function(){return"mask cannot be scalar"})),Zu(s.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=i;l<i+o;l++)u*=s[l];return c=s.slice(0,i).concat([u],s.slice(i+o)),d=r.reshape(c),h=a.reshape([-1]),[4,Mg(h)];case 1:return f=v.sent(),p=f.squeeze([1]),m=my(d,p,i),e!==r&&r.dispose(),t!==a&&a.dispose(),p.dispose(),d.dispose(),h.dispose(),f.dispose(),[2,m]}}))}))},complex:Rd,real:Nd,imag:Dd,concat:Kd,concat1d:Xd,concat2d:Yd,concat3d:qd,concat4d:Zd,split:Qd,matMul:Ny,dot:Dy,outerProduct:My,reverse:Oy,reverse1d:Py,reverse2d:Fy,reverse3d:Ly,reverse4d:By,maxPool:Uy,avgPool:Vy,pool:Wy,maxPool3d:Hy,avgPool3d:Gy,slice:Ky,slice1d:Xy,slice2d:Yy,slice3d:qy,slice4d:Zy,abs:Ov,acos:Pv,acosh:Fv,asin:Lv,asinh:Bv,atan:jv,atanh:zv,ceil:Uv,clipByValue:Vv,cos:Wv,cosh:Hv,erf:Gv,exp:Kv,expm1:Xv,floor:Yv,log:qv,log1p:Zv,logSigmoid:Qv,neg:Jv,reciprocal:$v,round:eg,rsqrt:tg,sigmoid:ng,sign:rg,isNaN:ag,isInf:ig,isFinite:og,sin:sg,sinh:ug,softplus:lg,sqrt:cg,step:dg,tan:hg,tanh:fg,all:Jy,any:$y,argMax:eb,argMin:tb,logSumExp:nb,max:rb,mean:ab,min:ib,moments:ob,sum:sb,prod:ub,equal:ty,equalStrict:ny,greater:ry,greaterEqual:ay,greaterEqualStrict:iy,greaterStrict:oy,less:sy,lessEqual:uy,lessEqualStrict:ly,lessStrict:cy,notEqual:dy,notEqualStrict:hy,add:Og,addN:Pg,addStrict:Fg,atan2:Lg,div:Bg,divNoNan:jg,divStrict:zg,floorDiv:Ug,maximum:Vg,maximumStrict:Wg,minimum:Hg,minimumStrict:Gg,mod:Kg,modStrict:Xg,mul:Yg,mulStrict:qg,pow:Zg,powStrict:Qg,squaredDifferenceStrict:Jg,sub:$g,subStrict:ey,elu:lb,leakyRelu:cb,prelu:db,relu:hb,relu6:fb,selu:pb,logicalAnd:Ig,logicalNot:Tg,logicalOr:Rg,logicalXor:Ng,where:Dg,whereAsync:Mg,buffer:ch,print:function(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},batchToSpaceND:dh,broadcastTo:hh,cast:fh,clone:ph,cumsum:mh,depthToSpace:vh,expandDims:gh,eye:yh,multinomial:bh,oneHot:wh,pad:xh,pad1d:kh,pad2d:Ch,pad3d:Eh,pad4d:Sh,rand:_h,randomNormal:Ah,randomGamma:Ih,randomUniform:Th,reshape:Rh,spaceToBatchND:Nh,squeeze:Dh,stack:Mh,tile:Oh,truncatedNormal:Ph,unstack:Fh,setdiff1dAsync:function(e,t){return Du(this,void 0,void 0,(function(){var n,r,a,i,o,s,u,l,c,d;return Mu(this,(function(h){switch(h.label){case 0:return n=gd(e,"x","setdiff1d"),r=gd(t,"y","setdiff1d"),qu(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),qu(1===n.rank,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),qu(1===r.rank,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return a=h.sent(),[4,r.data()];case 2:for(i=h.sent(),o=new Set(i),s=0,c=0;c<a.length;c++)o.has(a[c])||s++;for(u=new jl([s],n.dtype),l=new jl([s],"int32"),c=0,d=0;c<a.length;c++)o.has(a[c])||(u.values[d]=a[c],l.values[d]=c,d++);return[2,[u.toTensor(),l.toTensor()]]}}))}))},fill:Vd,linspace:function(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return oc.runKernelFunc((function(r){return r.linspace(e,t,n)}),{})},ones:zd,range:Wd,scalar:Pd,tensor:Md,tensor1d:Fd,tensor2d:Ld,tensor3d:Bd,tensor4d:jd,tensor5d:function(e,t,n){if(Qu(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=md(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Od(e,t,r,n)},tensor6d:function(e,t,n){if(Qu(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=md(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Od(e,t=t||r,r,n)},variable:function(e,t,n,r){return void 0===t&&(t=!0),oc.makeVariable(e,t,n,r)},zeros:Ud,onesLike:Hd,zerosLike:Gd,transpose:mb,softmax:tf,logSoftmax:nf,localResponseNormalization:vb,norm:gb,gather:my,unsortedSegmentSum:vy,basicLSTMCell:yb,multiRNNCell:bb,movingAverage:wb,stridedSlice:xb,topk:kb,scatterND:Cb,fft:Eb,ifft:Sb,rfft:_b,irfft:Ab,sparseToDense:Tb,gatherND:Rb,diag:Nb,dropout:Db,hannWindow:Pb,hammingWindow:Fb,frame:Lb,stft:Bb,inTopKAsync:function(e,t,n){return void 0===n&&(n=1),Du(this,void 0,void 0,(function(){var r,a,i,o,s,u,l,c,d,h,f,p,m,v;return Mu(this,(function(g){switch(g.label){case 0:return r=gd(e,"predictions","inTopK"),a=gd(t,"targets","inTopK"),qu(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),qu(r.rank-1===a.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+a.rank})),Zu(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],qu(n>0&&n<=i,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+n})),[4,r.data()];case 1:return o=g.sent(),[4,a.data()];case 2:for(s=g.sent(),u=[o.length/i,i],c=u[1],d=ll("bool",l=u[0]),h=0;h<l;h++){for(f=h*c,p=o.subarray(f,f+c),m=[],v=0;v<p.length;v++)m.push({value:p[v],index:v});for(m.sort((function(e,t){return t.value-e.value})),d[h]=0,v=0;v<n;v++)if(m[v].index===s[h]){d[h]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),[2,Md(d,a.shape,"bool")]}}))}))}});function gw(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&qu("complex64"!==e.dtype,(function(){return t+" does not support complex64 tensors."}))}))}function yw(e,t,n,r){if("linear"===n)return e.linear(t);if("relu"===n)return e.relu(t);if("elu"===n)return e.elu(t);if("relu6"===n)return e.relu6(t);if("prelu"===n)return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var bw=function(e){function t(){var t=e.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new rf(t,oc),t}return Nu(t,e),t.prototype.write=function(e,t,n){this.firstUse&&(this.firstUse=!1,Fu().get("IS_NODE")&&pd("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:e,dtype:n}),r},t.prototype.move=function(e,t,n,r){this.data.set(e,{values:t,dtype:r})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(e){return Du(this,void 0,void 0,(function(){return Mu(this,(function(t){return[2,this.readSync(e)]}))}))},t.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?Sf(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return Nl(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return ch(e.shape,e.dtype,n)},t.prototype.makeOutput=function(e,t,n){var r=this.write(e,t,n);return oc.makeTensorFromDataId(r,t,n,this)},t.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return Du(this,void 0,void 0,(function(){var t;return Mu(this,(function(n){return t=Il(),e(),[2,{kernelMs:Il()-t}]}))}))},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,t){var n=this.makeOutput(null,e.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:oc.keep(e.clone()),imag:oc.keep(t.clone())},n},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(gw(e,"slice"),Jh(e.shape,t,n)){var r=$h(t,e.strides),a=$u(n);return Md(this.readSync(e.dataId).subarray(r,r+a),n,e.dtype)}for(var i=ch(n,e.dtype),o=this.bufferSync(e),s=0;s<i.size;++s){var u=i.indexToLoc(s).map((function(e,n){return e+t[n]}));i.values[s]=o.get.apply(o,u)}return i.toTensor()},t.prototype.stridedSlice=function(e,t,n,r){gw(e,"stridedSlice");var a=qh(t,n,r);if(a.some((function(e){return 0===e})))return Md([],a);for(var i=ch(a,e.dtype),o=this.bufferSync(e),s=0;s<i.size;s++){for(var u=i.indexToLoc(s),l=new Array(u.length),c=0;c<l.length;c++)l[c]=u[c]*r[c]+t[c];i.set.apply(i,[o.get.apply(o,l)].concat(u))}return i.toTensor()},t.prototype.diag=function(e){for(var t=this.readSync(e.dataId),n=ch([e.size,e.size],e.dtype),r=n.values,a=0;a<t.length;a++)r[a*e.size+a]=t[a];return n.toTensor()},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),a=0,i=0;i<e.rank;i++)i!==t&&(r[a++]=e.shape[i]);var o=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var u=new Array(n);for(i=0;i<u.length;i++)o[t]=i,u[i]=this.slice(e,o,s).reshape(r);return u},t.prototype.reverse=function(e,t){gw(e,"reverse");for(var n=ch(e.shape,e.dtype),r=this.bufferSync(e),a=function(a){var i=n.indexToLoc(a),o=i.slice();t.forEach((function(t){return o[t]=e.shape[t]-1-o[t]})),n.set.apply(n,[r.get.apply(r,o)].concat(i))},i=0;i<n.size;i++)a(i);return n.toTensor()},t.prototype.concat=function(e,t){var n=this;if("complex64"===e[0].dtype){var r=e.map((function(e){return Nd(e)})),a=e.map((function(e){return Dd(e)}));return Rd(this.concat(r,t),this.concat(a,t))}var i=e.map((function(e){var n=$u(e.shape.slice(t));return e.as2D(-1,n)})),o=Id(i.map((function(e){return e.shape})),1),s=ch(o,e[0].dtype).values;if(1===i[0].shape[0]){var u=0;i.forEach((function(e){s.set(n.readSync(e.dataId),u),u+=e.size}))}else{var l=0;i.forEach((function(e){for(var t=n.readSync(e.dataId),r=0,a=0;a<e.shape[0];++a)for(var i=a*o[1]+l,u=0;u<e.shape[1];++u)s[i+u]=t[r++];l+=e.shape[1]}))}var c=Id(e.map((function(e){return e.shape})),t);return Md(s,c,e[0].dtype)},t.prototype.neg=function(e){return gw(e,"neg"),this.multiply(Pd(-1),e)},t.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e+n,imag:t+r}})):this.broadcastedBinaryOp(e,t,Jl(e.dtype,t.dtype),(function(e,t){return e+t}))},t.prototype.addN=function(e){var t=this;gw(e,"addN");for(var n=e.map((function(e){return t.readSync(e.dataId)})),r=ch(e[0].shape,e[0].dtype),a=r.values,i=0;i<e.length;i++)for(var o=n[i],s=0;s<a.length;s++)a[s]+=o[s];return r.toTensor()},t.prototype.softmax=function(e,t){var n=sl([t],e.shape),r=this.max(e,n),a=kd(r.shape,n),i=this.subtract(e,r.reshape(a)),o=this.exp(i),s=this.sum(o,n).reshape(a);return this.realDivide(o,s)},t.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e-n,imag:t-r}})):this.broadcastedBinaryOp(e,t,Jl(e.dtype,t.dtype),(function(e,t){return e-t}))},t.prototype.pow=function(e,t){return gw([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.pow(e,t)}))},t.prototype.batchMatMul=function(e,t,n,r){gw([e,t],"matMul");for(var a=n?e.shape[1]:e.shape[2],i=n?e.shape[2]:e.shape[1],o=r?t.shape[1]:t.shape[2],s=e.shape[0],u=this.readSync(e.dataId),l=this.readSync(t.dataId),c=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],d=c[0],h=c[1],f=c[2],p=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],m=p[0],v=p[1],g=p[2],y=i*o,b=ch([s,i,o],e.dtype),w=b.values,x=this.blockSize,k=0;k<s;k++)for(var C=0;C<i;C+=x)for(var E=0;E<o;E+=x)for(var S=0;S<a;S+=x)for(var _=Math.min(C+x,i),A=Math.min(E+x,o),I=Math.min(S+x,a),T=C;T<_;T++)for(var R=E;R<A;R++){for(var N=0,D=S;D<I;D++)N+=u[k*d+T*h+D*f]*l[D*m+R*v+k*g];w[k*y+(T*o+R)]+=N}return b.toTensor()},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.bias,o=e.activation,s=e.preluActivationWeights,u=this.batchMatMul(t,n,r,a);return i&&(u=this.add(u,i)),o&&(u=yw(this,u,o,s)),u},t.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})):this.broadcastedBinaryOp(e,t,Jl(e.dtype,t.dtype),(function(e,t){return e*t}))},t.prototype.realDivide=function(e,t){return gw([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",(function(e,t){return e/t}))},t.prototype.floorDiv=function(e,t){return gw([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",(function(e,t){return Math.floor(e/t)}))},t.prototype.sum=function(e,t){gw(e,"sum"),Cd("sum",t,e.rank);for(var n=xd(e.shape,t),r=n[0],a=n[1],i=Ud(r,Jl(e.dtype,"int32")),o=$u(a),s=this.readSync(i.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*o,d=0,h=0;h<o;++h)d+=u[c+h];s[l]=d}return i},t.prototype.prod=function(e,t){gw(e,"sum");for(var n=xd(e.shape,t),r=n[0],a=n[1],i=Ud(r,Jl(e.dtype,"int32")),o=$u(a),s=this.readSync(i.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*o,d=1,h=0;h<o;++h)d*=u[c+h];s[l]=d}return i},t.prototype.unsortedSegmentSum=function(e,t,n){gw(e,"unsortedSegmentSum");for(var r=[],a=e.rank-t.rank,i=0;i<a;++i)t=t.expandDims(i+1);for(i=0;i<n;++i){var o=Pd(i,"int32"),s=ty(o,t).asType("float32").mul(e).sum(0);r.push(s)}return Mh(r)},t.prototype.argMin=function(e,t){gw(e,"argMin");var n=[t];Cd("argMin",n,e.rank);for(var r=xd(e.shape,n),a=r[0],i=r[1],o=Ud(a,"int32"),s=$u(i),u=this.readSync(o.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var d=c*s,h=l[d],f=0,p=0;p<s;++p){var m=l[d+p];m<h&&(h=m,f=p)}u[c]=f}return o},t.prototype.argMax=function(e,t){gw(e,"argMax");var n=[t];Cd("argMax",n,e.rank);for(var r=xd(e.shape,n),a=r[0],i=r[1],o=Ud(a,"int32"),s=$u(i),u=this.readSync(o.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var d=c*s,h=l[d],f=0,p=0;p<s;++p){var m=l[d+p];m>h&&(h=m,f=p)}u[c]=f}return o},t.prototype.cumsum=function(e,t,n,r){if(gw(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var a=Jl(e.dtype,"int32"),i=Ud(e.shape,a),o=this.readSync(i.dataId),s=this.readSync(e.dataId),u=e.shape[e.rank-1],l=r?function(e,t){return e+u-t-1}:function(e,t){return e+t},c=0;c<s.length;c+=u)for(var d=0;d<u;d++){var h=l(c,d);if(0===d)o[h]=n?0:s[h];else{var f=l(c,d-1);o[h]=n?s[f]+o[f]:s[h]+o[f]}}return i},t.prototype.equal=function(e,t){return gw([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e===t?1:0}))},t.prototype.notEqual=function(e,t){return gw([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e!==t?1:0}))},t.prototype.less=function(e,t){return gw([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<t?1:0}))},t.prototype.lessEqual=function(e,t){return gw([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<=t?1:0}))},t.prototype.greater=function(e,t){return gw([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>t?1:0}))},t.prototype.greaterEqual=function(e,t){return gw([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>=t?1:0}))},t.prototype.logicalNot=function(e){gw(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return this.makeOutput(n,e.shape,"bool")},t.prototype.logicalAnd=function(e,t){return gw([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e&&t}))},t.prototype.logicalOr=function(e,t){return gw([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e||t}))},t.prototype.select=function(e,t,n){gw([e,t,n],"select");for(var r=this.readSync(e.dataId),a=this.readSync(t.dataId),i=this.readSync(n.dataId),o=Ud(t.shape,Jl(t.dtype,n.dtype)),s=this.readSync(o.dataId),u=0,l=0===e.rank||e.rank>1||1===t.rank?1:$u(t.shape.slice(1)),c=0;c<r.length;c++)for(var d=0;d<l;d++)1===r[c]?s[u++]=a[c]:s[u++]=i[c];return o},t.prototype.where=function(e){gw([e],"where");var t=this.readSync(e.dataId);return zf(e.shape,t)},t.prototype.topk=function(e,t,n){return gw(e,"topk"),jf(this.readSync(e.dataId),e.shape,e.dtype,t)},t.prototype.min=function(e,t){gw(e,"min"),Cd("min",t,e.rank);for(var n=xd(e.shape,t),r=n[0],a=n[1],i=Ud(r,e.dtype),o=$u(a),s=this.readSync(i.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*o,d=u[c],h=0;h<o;++h){var f=u[c+h];f<d&&(d=f)}s[l]=d}return i},t.prototype.minimum=function(e,t){return gw([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.min(e,t)}))},t.prototype.mod=function(e,t){return gw([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}))},t.prototype.max=function(e,t){gw(e,"max"),Cd("max",t,e.rank);for(var n=xd(e.shape,t),r=n[0],a=n[1],i=Ud(r,e.dtype),o=$u(a),s=this.readSync(i.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*o,d=u[c],h=0;h<o;++h){var f=u[c+h];f>d&&(d=f)}s[l]=d}return i},t.prototype.maximum=function(e,t){return gw([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.max(e,t)}))},t.prototype.all=function(e,t){gw(e,"all"),Cd("all",t,e.rank);for(var n=xd(e.shape,t),r=n[0],a=n[1],i=Ud(r,e.dtype),o=$u(a),s=this.readSync(i.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*o,d=u[c],h=0;h<o;++h){var f=u[c+h];d=d&&f}s[l]=d}return i},t.prototype.any=function(e,t){gw(e,"any"),Cd("any",t,e.rank);for(var n=xd(e.shape,t),r=n[0],a=n[1],i=Ud(r,e.dtype),o=$u(a),s=this.readSync(i.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*o,d=u[c],h=0;h<o;++h){var f=u[c+h];d=d||f}s[l]=d}return i},t.prototype.squaredDifference=function(e,t){return gw([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e-t;return n*n}))},t.prototype.ceil=function(e){gw(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.floor=function(e){gw(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.sign=function(e){gw(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return this.makeOutput(n,e.shape,"float32")},t.prototype.isNaN=function(e){gw(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isInf=function(e){gw(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isFinite=function(e){gw(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.round=function(e){gw(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=Math.floor(t[r]);t[r]-a<.5?n[r]=Math.floor(t[r]):t[r]-a>.5?n[r]=Math.ceil(t[r]):n[r]=a%2==0?a:a+1}return this.makeOutput(n,e.shape,"float32")},t.prototype.exp=function(e){gw(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.expm1=function(e){gw(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.log=function(e){gw(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.log(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.log1p=function(e){gw(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.log1p(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.sqrt=function(e){gw(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.sqrt(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.rsqrt=function(e){gw(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=1/Math.sqrt(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.reciprocal=function(e){gw(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return this.makeOutput(n,e.shape,"float32")},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){gw(e,"relu");for(var t=Ud(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),a=0;a<r.length;++a)n[a]=Math.max(0,r[a]);return t},t.prototype.relu6=function(e){gw(e,"relu");for(var t=Ud(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),a=0;a<r.length;++a)n[a]=Math.min(Math.max(0,r[a]),6);return t},t.prototype.prelu=function(e,t){return gw([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return e<0?t*e:e}))},t.prototype.elu=function(e){gw(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var a=n[r];t[r]=a>=0?a:Math.exp(a)-1}return this.makeOutput(t,e.shape,"float32")},t.prototype.eluDer=function(e,t){gw([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),a=this.readSync(e.dataId),i=0;i<r.length;++i){var o=r[i];n[i]=o>=1?a[i]:a[i]*(o+1)}return this.makeOutput(n,t.shape,"float32")},t.prototype.selu=function(e){gw(e,"selu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var a=n[r];t[r]=a>=0?1.0507009873554805*a:1.7580993408473768*(Math.exp(a)-1)}return this.makeOutput(t,e.shape,"float32")},t.prototype.clip=function(e,t,n){gw(e,"clip");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),i=0;i<a.length;++i){var o=a[i];r[i]=o>n?n:o<t?t:o}return this.makeOutput(r,e.shape,"float32")},t.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var a=n[2*r],i=n[2*r+1];t[r]=Math.hypot(a,i)}return this.makeOutput(t,e.shape,"float32")},t.prototype.int=function(e){gw(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return this.makeOutput(t,e.shape,"int32")},t.prototype.sigmoid=function(e){gw(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(t,e.shape,"float32")},t.prototype.softplus=function(e){gw(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),a=0;a<r.length;++a){var i,o=r[a]>-t,s=r[a]<t,u=Math.exp(r[a]);i=s?u:o?r[a]:Math.log(1+u),n[a]=i}return this.makeOutput(n,e.shape,"float32")},t.prototype.sin=function(e){gw(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cos=function(e){gw(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tan=function(e){gw(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asin=function(e){gw(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acos=function(e){gw(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan=function(e){gw(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan2=function(e,t){return gw([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.atan2(e,t)}))},t.prototype.sinh=function(e){gw(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cosh=function(e){gw(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tanh=function(e){gw(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=nl(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asinh=function(e){gw(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acosh=function(e){gw(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atanh=function(e){gw(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.erf=function(e){gw(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var a=Math.sign(n[r]),i=Math.abs(n[r]),o=1/(1+.3275911*i);t[r]=a*(1-((((1.061405429*o-1.453152027)*o+1.421413741)*o-.284496736)*o+.254829592)*o*Math.exp(-i*i))}return this.makeOutput(t,e.shape,"float32")},t.prototype.step=function(e,t){void 0===t&&(t=0),gw(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),a=0;a<r.length;++a){var i=r[a];isNaN(i)?n[a]=NaN:n[a]=i>0?1:t}return this.makeOutput(n,e.shape,"float32")},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,a=e.bias,i=e.activation,o=e.preluActivationWeights,s=this.conv2d(t,n,r);return a&&(s=this.add(s,a)),i&&(s=yw(this,s,i,o)),s},t.prototype.conv2d=function(e,t,n){gw([e,t],"conv2d");for(var r=n.filterHeight,a=n.filterWidth,i=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l="channelsLast"===n.dataFormat,c=ch(n.outShape,e.dtype),d=e.strides[0],h=l?e.strides[1]:e.strides[2],f=l?e.strides[2]:1,p=l?1:e.strides[1],m=c.strides[0],v=l?c.strides[1]:c.strides[2],g=l?c.strides[2]:1,y=l?1:c.strides[1],b=this.readSync(e.dataId),w=this.readSync(t.dataId),x=c.values,k=0;k<n.batchSize;++k)for(var C=k*d,E=k*m,S=0;S<n.outHeight;++S)for(var _=E+S*v,A=S*n.strideHeight-u,I=0;I<r;I++){var T=A+I*i;if(!(T<0||T>=n.inHeight))for(var R=I*t.strides[0],N=C+T*h,D=0;D<n.outWidth;++D)for(var M=_+D*g,O=D*n.strideWidth-s,P=0;P<a;P++){var F=O+P*o;if(!(F<0||F>=n.inWidth))for(var L=N+F*f,B=R+P*t.strides[1],j=0;j<n.inChannels;++j){for(var z=b[L+j*p],U=0;U<n.outChannels;++U)x[M+U*y]+=z*w[B+U];B+=n.outChannels}}}return c.toTensor()},t.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,a=n.filterHeight,i=n.filterWidth,o=n.dilationDepth,s=n.dilationHeight,u=n.dilationWidth,l=n.padInfo.front,c=n.padInfo.left,d=n.padInfo.top,h=ch(n.outShape,e.dtype),f=this.readSync(e.dataId),p=this.readSync(t.dataId),m=h.values,v=0;v<n.batchSize;++v)for(var g=v*e.strides[0],y=v*h.strides[0],b=0;b<n.outDepth;++b)for(var w=y+b*h.strides[1],x=b*n.strideDepth-l,k=0;k<r;k++){var C=x+k*o;if(!(C<0||C>=n.inDepth))for(var E=k*t.strides[0],S=g+C*e.strides[1],_=0;_<n.outHeight;++_)for(var A=w+_*h.strides[2],I=_*n.strideHeight-d,T=0;T<a;T++){var R=I+T*s;if(!(R<0||R>=n.inHeight))for(var N=E+T*t.strides[1],D=S+R*e.strides[2],M=0;M<n.outWidth;++M)for(var O=A+M*n.outChannels,P=M*n.strideWidth-c,F=0;F<i;F++){var L=P+F*u;if(!(L<0||L>=n.inWidth))for(var B=N+F*t.strides[2],j=D+L*n.inChannels,z=B,U=0;U<n.inChannels;++U){for(var V=f[j+U],W=0;W<n.outChannels;++W)m[O+W]+=V*p[z+W];z+=n.outChannels}}}}return h.toTensor()},t.prototype.conv2dDerInput=function(e,t,n){gw([e,t],"conv2dDerInput");for(var r=ch(n.inShape,"float32"),a=r.values,i=this.readSync(e.dataId),o=this.readSync(t.dataId),s=t.strides,u=s[0],l=s[1],c=s[2],d=n.batchSize,h=n.filterHeight,f=n.filterWidth,p=n.inChannels,m=n.inHeight,v=n.inWidth,g=n.outChannels,y=n.outHeight,b=n.outWidth,w=n.strideHeight,x=n.strideWidth,k=n.dataFormat,C=h-1-n.padInfo.top,E=f-1-n.padInfo.left,S="channelsLast"===k,_=r.strides[0],A=S?r.strides[1]:r.strides[2],I=S?r.strides[2]:1,T=S?1:r.strides[1],R=e.strides[0],N=S?e.strides[1]:e.strides[2],D=S?e.strides[2]:1,M=S?1:e.strides[1],O=0;O<d;++O)for(var P=0;P<p;++P)for(var F=0;F<m;++F)for(var L=F-C,B=Math.max(0,Math.ceil(L/w)),j=Math.min(y,(h+L)/w),z=0;z<v;++z){for(var U=z-E,V=Math.max(0,Math.ceil(U/x)),W=Math.min(b,(f+U)/x),H=0,G=B;G<j;++G)for(var K=G*w-L,X=V;X<W;++X)for(var Y=R*O+N*G+D*X,q=u*(h-1-K)+l*(f-1-(X*x-U))+c*P,Z=0;Z<g;++Z)H+=i[Y+M*Z]*o[q+Z];a[_*O+A*F+I*z+T*P]=H}return r.toTensor()},t.prototype.conv3dDerInput=function(e,t,n){for(var r=ch(n.inShape,"float32"),a=r.values,i=r.strides,o=i[0],s=i[1],u=i[2],l=i[3],c=this.readSync(e.dataId),d=e.strides,h=d[0],f=d[1],p=d[2],m=d[3],v=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],w=g[2],x=g[3],k=n.batchSize,C=n.filterDepth,E=n.filterHeight,S=n.filterWidth,_=n.inChannels,A=n.inDepth,I=n.inHeight,T=n.inWidth,R=n.outChannels,N=n.outDepth,D=n.outHeight,M=n.outWidth,O=n.strideDepth,P=n.strideHeight,F=n.strideWidth,L=C-1-n.padInfo.front,B=E-1-n.padInfo.top,j=S-1-n.padInfo.left,z=0;z<k;++z)for(var U=0;U<_;++U)for(var V=0;V<A;++V)for(var W=V-L,H=Math.max(0,Math.ceil(W/O)),G=Math.min(N,(C+W)/O),K=0;K<I;++K)for(var X=K-B,Y=Math.max(0,Math.ceil(X/P)),q=Math.min(D,(E+X)/P),Z=0;Z<T;++Z){for(var Q=Z-j,J=Math.max(0,Math.ceil(Q/F)),$=Math.min(M,(S+Q)/F),ee=0,te=H;te<G;++te)for(var ne=te*O-W,re=Y;re<q;++re)for(var ae=re*P-X,ie=J;ie<$;++ie)for(var oe=h*z+f*te+p*re+m*ie,se=y*(C-1-ne)+b*(E-1-ae)+w*(S-1-(ie*F-Q))+x*U,ue=0;ue<R;++ue)ee+=c[oe+ue]*v[se+ue];a[o*z+s*V+u*K+l*Z+U]=ee}return r.toTensor()},t.prototype.conv2dDerFilter=function(e,t,n){gw([e,t],"conv2dDerFilter");for(var r=n.strideHeight,a=n.strideWidth,i=n.filterHeight,o=n.filterWidth,s="channelsLast"===n.dataFormat,u=ch(n.filterShape,"float32"),l=n.padInfo.left,c=n.padInfo.top,d=this.bufferSync(e),h=this.bufferSync(t),f=0;f<i;++f)for(var p=Math.max(0,Math.ceil((c-f)/r)),m=Math.min(n.outHeight,(n.inHeight+c-f)/r),v=0;v<o;++v)for(var g=Math.max(0,Math.ceil((l-v)/a)),y=Math.min(n.outWidth,(n.inWidth+l-v)/a),b=0;b<n.inChannels;++b)for(var w=0;w<n.outChannels;++w){for(var x=0,k=0;k<n.batchSize;++k)for(var C=p;C<m;++C)for(var E=f+C*r-c,S=g;S<y;++S){var _=v+S*a-l;x+=s?d.get(k,E,_,b)*h.get(k,C,S,w):d.get(k,b,E,_)*h.get(k,w,C,S)}u.set(x,f,v,b,w)}return u.toTensor()},t.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,a=n.strideHeight,i=n.strideWidth,o=n.filterDepth,s=n.filterHeight,u=n.filterWidth,l=ch(n.filterShape,"float32"),c=l.values,d=l.strides,h=d[0],f=d[1],p=d[2],m=d[3],v=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],w=g[2],x=g[3],k=this.readSync(e.dataId),C=e.strides,E=C[0],S=C[1],_=C[2],A=C[3],I=n.padInfo.front,T=n.padInfo.left,R=n.padInfo.top,N=0;N<o;++N)for(var D=Math.max(0,Math.ceil((I-N)/r)),M=Math.min(n.outDepth,(n.inDepth+I-N)/r),O=N*h,P=0;P<s;++P)for(var F=Math.max(0,Math.ceil((R-P)/a)),L=Math.min(n.outHeight,(n.inHeight+R-P)/a),B=P*f+O,j=0;j<u;++j)for(var z=Math.max(0,Math.ceil((T-j)/i)),U=Math.min(n.outWidth,(n.inWidth+T-j)/i),V=j*p+B,W=0;W<n.inChannels;++W)for(var H=W*m+V,G=0;G<n.outChannels;++G){for(var K=0,X=0;X<n.batchSize;++X)for(var Y=X*E,q=X*y,Z=D;Z<M;++Z)for(var Q=(N+Z*r-I)*S+Y,J=Z*b+q,$=F;$<L;++$)for(var ee=(P+$*a-R)*_+Q,te=$*w+J,ne=z;ne<U;++ne){var re=ne*x+te;K+=k[(j+ne*i-T)*A+ee+W]*v[re+G]}c[H+G]=K}return l.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var t=e.input,n=e.filter,r=e.convInfo,a=e.bias,i=e.activation,o=e.preluActivationWeights,s=this.depthwiseConv2D(t,n,r);return a&&(s=this.add(s,a)),i&&(s=yw(this,s,i,o)),s},t.prototype.depthwiseConv2D=function(e,t,n){gw([e,t],"depthwiseConv2D");for(var r=n.filterHeight,a=n.filterWidth,i=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=n.outChannels/n.inChannels,c=ch(n.outShape,e.dtype),d=this.readSync(e.dataId),h=this.readSync(t.dataId),f=c.values,p=0;p<n.batchSize;++p)for(var m=p*e.strides[0],v=p*c.strides[0],g=0;g<n.outHeight;++g)for(var y=v+g*c.strides[1],b=g*n.strideHeight-s,w=0;w<r;++w){var x=b+w*i;if(!(x<0||x>=n.inHeight))for(var k=w*t.strides[0],C=m+x*e.strides[1],E=0;E<n.outWidth;++E)for(var S=y+E*c.strides[2],_=E*n.strideWidth-u,A=0;A<a;++A){var I=_+A*o;if(!(I<0||I>=n.inWidth))for(var T=k+A*t.strides[1],R=C+I*n.inChannels,N=S,D=T,M=0;M<n.inChannels;++M){for(var O=d[R+M],P=0;P<l;++P)f[N+P]+=O*h[D+P];N+=l,D+=l}}}return c.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,t,n){gw([e,t],"depthwiseConv2DDerInput");for(var r=ch(n.inShape,"float32"),a=r.values,i=r.strides,o=i[0],s=i[1],u=i[2],l=this.readSync(e.dataId),c=e.strides,d=c[0],h=c[1],f=c[2],p=this.readSync(t.dataId),m=t.strides,v=m[0],g=m[1],y=m[2],b=n.batchSize,w=n.filterHeight,x=n.filterWidth,k=n.inChannels,C=n.inHeight,E=n.inWidth,S=n.outChannels,_=n.outHeight,A=n.outWidth,I=n.strideHeight,T=n.strideWidth,R=w-1-n.padInfo.top,N=x-1-n.padInfo.left,D=S/k,M=0;M<b;++M)for(var O=0;O<k;++O)for(var P=0;P<C;++P)for(var F=P-R,L=Math.max(0,Math.ceil(F/I)),B=Math.min(_,(w+F)/I),j=0;j<E;++j){for(var z=j-N,U=Math.max(0,Math.ceil(z/T)),V=Math.min(A,(x+z)/T),W=0,H=L;H<B;++H)for(var G=H*I-F,K=U;K<V;++K)for(var X=d*M+h*H+f*K,Y=v*(w-1-G)+g*(x-1-(K*T-z))+y*O,q=0;q<D;++q)W+=l[X+(O*D+q)]*p[Y+q];a[o*M+s*P+u*j+O]=W}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){gw([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,a=n.strideWidth,i=n.filterHeight,o=n.filterWidth,s=ch(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=n.outChannels/n.inChannels,d=this.bufferSync(e),h=this.bufferSync(t),f=0;f<i;++f)for(var p=Math.max(0,Math.ceil((l-f)/r)),m=Math.min(n.outHeight,(n.inHeight+l-f)/r),v=0;v<o;++v)for(var g=Math.max(0,Math.ceil((u-v)/a)),y=Math.min(n.outWidth,(n.inWidth+u-v)/a),b=0;b<n.outChannels;++b){for(var w=Math.trunc(b/c),x=b%c,k=0,C=0;C<n.batchSize;++C)for(var E=p;E<m;++E)for(var S=f+E*r-l,_=g;_<y;++_){var A=v+_*a-u;k+=d.get(C,S,A,w)*h.get(C,E,_,b)}s.set(k,f,v,w,x)}return s.toTensor()},t.prototype.tile=function(e,t){return gw(e,"tile"),Bf(this.bufferSync(e),t)},t.prototype.pad=function(e,t,n){gw(e,"pad");var r=t.map((function(t,n){return t[0]+e.shape[n]+t[1]})),a=t.map((function(e){return e[0]})),i=this.bufferSync(e),o=ch(r,e.dtype);0!==n&&o.values.fill(n);for(var s=0;s<e.size;s++){var u=i.indexToLoc(s),l=u.map((function(e,t){return e+a[t]}));o.set.apply(o,[i.get.apply(i,u)].concat(l))}return o.toTensor()},t.prototype.transpose=function(e,t){gw(e,"transpose");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];var a=this.readSync(e.dataId),i=ch(n,e.dtype),o=this.bufferSync(e);for(r=0;r<e.size;++r){for(var s=o.indexToLoc(r),u=new Array(s.length),l=0;l<u.length;l++)u[l]=s[t[l]];var c=i.locToIndex(u);i.values[c]=a[r]}return i.toTensor()},t.prototype.gather=function(e,t,n){gw([e,t],"gather");var r=e.shape.slice(),a=this.readSync(t.dataId);r[n]=a.length;for(var i=ch(r,e.dtype),o=this.bufferSync(e),s=0;s<i.size;++s){var u=i.indexToLoc(s),l=u.slice();l[n]=a[u[n]];var c=o.locToIndex(l);i.values[s]=o.values[c]}return i.toTensor()},t.prototype.batchToSpaceND=function(e,t,n){gw([e],"batchToSpaceND");var r=t.reduce((function(e,t){return e*t})),a=Lh(e.shape,t,r),i=Bh(a.length,t.length),o=jh(e.shape,t,r),s=zh(n,t.length),u=Uh(o,n,t.length);return e.reshape(a).transpose(i).reshape(o).slice(s,u)},t.prototype.spaceToBatchND=function(e,t,n){gw([e],"spaceToBatchND");var r=t.reduce((function(e,t){return e*t})),a=[[0,0]];a.push.apply(a,n);for(var i=1+t.length;i<e.shape.length;++i)a.push([0,0]);var o=e.pad(a),s=Lh(o.shape,t,r,!1),u=Bh(s.length,t.length,!1),l=jh(o.shape,t,r,!1);return o.reshape(s).transpose(u).reshape(l)},t.prototype.pool=function(e,t,n){gw(e,"pool");for(var r=t.strideHeight,a=t.strideWidth,i=t.dilationHeight,o=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=t.padInfo.top,c=t.padInfo.left,d="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,h=this.readSync(e.dataId),f=ch(t.outShape,e.dtype),p=f.values,m=t.outShape[1]*t.outShape[2]*t.outShape[3],v=t.outShape[2]*t.outShape[3],g=t.outShape[3],y=0;y<t.batchSize;++y)for(var b=y*m,w=y*e.strides[0],x=0;x<t.inChannels;++x)for(var k=0;k<t.outHeight;++k)for(var C=k*r-l,E=Math.max(0,C),S=Math.min(t.inHeight,s+C),_=b+k*v,A=0;A<t.outWidth;++A){for(var I=A*a-c,T=Math.max(0,I),R=Math.min(t.inWidth,u+I),N=d,D=0,M=0,O=E;O<S;O+=i){for(var P=w+O*e.strides[1],F=T;F<R;F+=o){var L=h[P+F*e.strides[2]+x];"max"===n&&L>N?N=L:"avg"===n&&(D+=L,M++)}if(isNaN(N))break}p[_+A*g+x]="avg"===n?D/M:N}return f.toTensor()},t.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},t.prototype.maxPoolPositions=function(e,t){for(var n=ch(t.outShape,"int32"),r=t.strideHeight,a=t.strideWidth,i=t.dilationHeight,o=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=t.padInfo.top,c=t.padInfo.left,d=this.bufferSync(e),h=0;h<t.batchSize;++h)for(var f=0;f<t.inChannels;++f)for(var p=0;p<t.outHeight;++p){for(var m=p*r-l,v=m;v<0;)v+=i;for(var g=Math.min(t.inHeight,s+m),y=0;y<t.outWidth;++y){for(var b=y*a-c,w=b;w<0;)w+=o;for(var x=Math.min(t.inWidth,u+b),k=Number.NEGATIVE_INFINITY,C=-1,E=v;E<g;E+=i)for(var S=E-m,_=w;_<x;_+=o){var A=_-b,I=d.get(h,E,_,f);I>k&&(k=I,C=S*u+A)}n.set(C,h,p,y,f)}}return n.toTensor()},t.prototype.maxPoolBackprop=function(e,t,n,r){gw([t,n],"maxPoolBackprop");for(var a=this.maxPoolPositions(t,r),i=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,d=c-1-r.padInfo.left,h=l-1-r.padInfo.top,f=ch(t.shape,"float32"),p=this.bufferSync(a),m=this.bufferSync(e),v=0;v<r.batchSize;++v)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.inHeight;++y)for(var b=0;b<r.inWidth;++b){for(var w=y-h,x=b-d,k=0,C=0;C<l;C+=s){var E=(w+C)/i;if(!(E<0||E>=r.outHeight||Math.floor(E)!==E))for(var S=0;S<c;S+=u){var _=(x+S)/o;if(!(_<0||_>=r.outWidth||Math.floor(_)!==_)){var A=l*c-1-p.get(v,E,_,g)===C*c+S?1:0;0!==A&&(k+=m.get(v,E,_,g)*A)}}}f.set(k,v,y,b,g)}return f.toTensor()},t.prototype.avgPoolBackprop=function(e,t,n){gw([e,t],"avgPoolBackprop");for(var r=n.strideHeight,a=n.strideWidth,i=n.filterHeight,o=n.filterWidth,s=n.dilationHeight,u=n.dilationWidth,l=n.effectiveFilterHeight,c=n.effectiveFilterWidth,d=c-1-n.padInfo.left,h=l-1-n.padInfo.top,f=ch(t.shape,"float32"),p=1/(i*o),m=this.bufferSync(e),v=0;v<n.batchSize;++v)for(var g=0;g<n.inChannels;++g)for(var y=0;y<n.inHeight;++y)for(var b=0;b<n.inWidth;++b){for(var w=y-h,x=b-d,k=0,C=0;C<l;C+=s){var E=(w+C)/r;if(!(E<0||E>=n.outHeight||Math.floor(E)!==E))for(var S=0;S<c;S+=u){var _=(x+S)/a;_<0||_>=n.outWidth||Math.floor(_)!==_||(k+=m.get(v,E,_,g))}}f.set(k*p,v,y,b,g)}return f.toTensor()},t.prototype.pool3d=function(e,t,n){gw(e,"pool3d");for(var r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,f=t.padInfo.top,p=t.padInfo.left,m="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(e.dataId),g=ch(t.outShape,e.dtype),y=g.values,b=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],w=t.outShape[2]*t.outShape[3]*t.outShape[4],x=t.outShape[3]*t.outShape[4],k=t.outShape[4],C=0;C<t.batchSize;++C)for(var E=C*b,S=C*e.strides[0],_=0;_<t.inChannels;++_)for(var A=0;A<t.outDepth;++A){for(var I=A*r-h,T=I;T<0;)T+=o;for(var R=Math.min(t.inDepth,l+I),N=E+A*w,D=0;D<t.outHeight;++D){for(var M=D*a-f,O=M;O<0;)O+=s;for(var P=Math.min(t.inHeight,c+M),F=N+D*x,L=0;L<t.outWidth;++L){for(var B=L*i-p,j=B;j<0;)j+=u;for(var z=Math.min(t.inWidth,d+B),U=F+L*k,V=m,W=0,H=0,G=T;G<R;G+=o){for(var K=S+G*e.strides[1],X=O;X<P;X+=s){for(var Y=K+X*e.strides[2],q=j;q<z;q+=u){var Z=v[Y+q*e.strides[3]+_];if("max"===n&&Z>V?V=Z:"avg"===n&&(W+=Z,H++),isNaN(V))break}if(isNaN(V))break}if(isNaN(V))break}y[U+_]="avg"===n?W/H:V}}}return g.toTensor()},t.prototype.avgPool3d=function(e,t){return gw(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,t,n){gw([e,t],"avgPool3dBackprop");for(var r=n.strideDepth,a=n.strideHeight,i=n.strideWidth,o=n.filterDepth,s=n.filterHeight,u=n.filterWidth,l=n.dilationDepth,c=n.dilationHeight,d=n.dilationWidth,h=n.effectiveFilterDepth,f=n.effectiveFilterHeight,p=n.effectiveFilterWidth,m=h-1-n.padInfo.front,v=p-1-n.padInfo.left,g=f-1-n.padInfo.top,y=ch(t.shape,"float32"),b=1/(o*s*u),w=this.bufferSync(e),x=0;x<n.batchSize;++x)for(var k=0;k<n.inChannels;++k)for(var C=0;C<n.inDepth;++C)for(var E=0;E<n.inHeight;++E)for(var S=0;S<n.inWidth;++S){for(var _=C-m,A=E-g,I=S-v,T=0,R=0;R<h;R+=l){var N=(_+R)/r;if(!(N<0||N>=n.outDepth||Math.floor(N)!==N))for(var D=0;D<f;D+=c){var M=(A+D)/a;if(!(M<0||M>=n.outHeight||Math.floor(M)!==M))for(var O=0;O<p;O+=d){var P=(I+O)/i;P<0||P>=n.outWidth||Math.floor(P)!==P||(T+=w.get(x,N,M,P,k))}}}y.set(T*b,x,C,E,S,k)}return y.toTensor()},t.prototype.maxPool3d=function(e,t){return gw(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,t){for(var n=ch(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,f=t.padInfo.top,p=t.padInfo.left,m=this.bufferSync(e),v=0;v<t.batchSize;++v)for(var g=0;g<t.inChannels;++g)for(var y=0;y<t.outDepth;++y){for(var b=y*r-h,w=b;w<0;)w+=o;for(var x=Math.min(t.inDepth,l+b),k=0;k<t.outHeight;++k){for(var C=k*a-f,E=C;E<0;)E+=s;for(var S=Math.min(t.inHeight,c+C),_=0;_<t.outWidth;++_){for(var A=_*i-p,I=A;I<0;)I+=u;for(var T=Math.min(t.inWidth,d+A),R=Number.NEGATIVE_INFINITY,N=-1,D=w;D<x;D+=o)for(var M=D-b,O=E;O<S;O+=s)for(var P=O-C,F=I;F<T;F+=u){var L=F-A,B=m.get(v,D,O,F,g);B>=R&&(R=B,N=M*c*d+P*c+L)}n.set(N,v,y,k,_,g)}}}return n.toTensor()},t.prototype.maxPool3dBackprop=function(e,t,n,r){gw([t,n],"maxPool3dBackprop");for(var a=this.maxPool3dPositions(t,r),i=r.strideDepth,o=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,h=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=d-1-r.padInfo.front,m=f-1-r.padInfo.left,v=h-1-r.padInfo.top,g=ch(t.shape,"float32"),y=this.bufferSync(a),b=this.bufferSync(e),w=0;w<r.batchSize;++w)for(var x=0;x<r.inChannels;++x)for(var k=0;k<r.inDepth;++k)for(var C=0;C<r.inHeight;++C)for(var E=0;E<r.inWidth;++E){for(var S=k-p,_=C-v,A=E-m,I=0,T=0;T<d;T+=u){var R=(S+T)/i;if(!(R<0||R>=r.outDepth||Math.floor(R)!==R))for(var N=0;N<h;N+=l){var D=(_+N)/o;if(!(D<0||D>=r.outHeight||Math.floor(D)!==D))for(var M=0;M<f;M+=c){var O=(A+M)/s;if(!(O<0||O>=r.outWidth||Math.floor(O)!==O)){var P=d*h*f-1-y.get(w,R,D,O,x)===T*h*f+N*f+M?1:0;0!==P&&(I+=b.get(w,R,D,O,x)*P)}}}}g.set(I,w,k,C,E,x)}return g.toTensor()},t.prototype.cast=function(e,t){return kf(e,t,this)},t.prototype.reshape=function(e,t){return Cf(e,t)},t.prototype.avgPool=function(e,t){return gw(e,"avgPool"),this.pool(e,t,"avg").toFloat()},t.prototype.resizeBilinear=function(e,t,n,r){gw(e,"resizeBilinear");for(var a=e.shape,i=a[0],o=a[1],s=a[2],u=a[3],l=this.readSync(e.dataId),c=new Float32Array($u([i,t,n,u])),d=[r&&t>1?o-1:o,r&&n>1?s-1:s],h=[r&&t>1?t-1:t,r&&n>1?n-1:n],f=0,p=d[0]/h[0],m=d[1]/h[1],v=0;v<i;v++)for(var g=0;g<t;g++)for(var y=p*g,b=Math.floor(y),w=y-b,x=Math.min(o-1,Math.ceil(y)),k=v*e.strides[0]+b*e.strides[1],C=v*e.strides[0]+x*e.strides[1],E=0;E<n;E++)for(var S=m*E,_=Math.floor(S),A=S-_,I=Math.min(s-1,Math.ceil(S)),T=k+_*e.strides[2],R=C+_*e.strides[2],N=k+I*e.strides[2],D=C+I*e.strides[2],M=0;M<u;M++){var O=l[T+M],P=l[R+M],F=O+(l[N+M]-O)*A,L=F+(P+(l[D+M]-P)*A-F)*w;c[f++]=L}return Md(c,[i,t,n,u])},t.prototype.resizeBilinearBackprop=function(e,t,n){gw([e,t],"resizeBilinearBackprop");for(var r=t.shape,a=r[0],i=r[1],o=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],d=new Float32Array(a*i*o*s),h=[n&&l>1?i-1:i,n&&c>1?o-1:o],f=[n&&l>1?l-1:l,n&&c>1?c-1:c],p=h[0]/f[0],m=h[1]/f[1],v=this.readSync(e.dataId),g=0,y=0;y<a;y++)for(var b=y*t.strides[0],w=0;w<l;w++)for(var x=w*p,k=Math.floor(x),C=Math.min(Math.ceil(x),i-1),E=b+k*t.strides[1],S=b+C*t.strides[1],_=x-k,A=1-_,I=0;I<c;I++)for(var T=I*m,R=Math.floor(T),N=Math.min(Math.ceil(T),o-1),D=T-R,M=1-D,O=E+R*t.strides[2],P=E+N*t.strides[2],F=S+R*t.strides[2],L=S+N*t.strides[2],B=A*M,j=A*D,z=_*M,U=_*D,V=0;V<s;V++){var W=v[g++];d[O+V]+=W*B,d[P+V]+=W*j,d[F+V]+=W*z,d[L+V]+=W*U}return jd(d,[a,o,i,s],t.dtype)},t.prototype.resizeNearestNeighbor=function(e,t,n,r){gw(e,"resizeNearestNeighbor");for(var a=e.shape,i=a[0],o=a[1],s=a[2],u=a[3],l=this.readSync(e.dataId),c=new Float32Array(i*t*n*u),d=[r&&t>1?o-1:o,r&&n>1?s-1:s],h=[r&&t>1?t-1:t,r&&n>1?n-1:n],f=d[0]/h[0],p=d[1]/h[1],m=0,v=0;v<i;v++)for(var g=v*e.strides[0],y=0;y<t;y++)for(var b=f*y,w=g+Math.min(o-1,r?Math.round(b):Math.floor(b))*e.strides[1],x=0;x<n;x++)for(var k=p*x,C=w+Math.min(s-1,r?Math.round(k):Math.floor(k))*e.strides[2],E=0;E<u;E++){var S=l[C+E];c[m++]=S}return Md(c,[i,t,n,u],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){gw([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,a=r[0],i=r[1],o=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],d=new Float32Array(a*i*o*s),h=this.readSync(e.dataId),f=[n&&l>1?i-1:i,n&&c>1?o-1:o],p=[n&&l>1?l-1:l,n&&c>1?c-1:c],m=f[0]/p[0],v=f[1]/p[1],g=1/m,y=1/v,b=2*Math.ceil(g)+2,w=2*Math.ceil(y)+2,x=0;x<a;x++)for(var k=x*t.strides[0],C=0;C<i;C++)for(var E=k+C*t.strides[1],S=Math.floor(C*g),_=Math.floor(S-b/2),A=0;A<o;A++)for(var I=E+A*t.strides[2],T=Math.floor(A*y),R=Math.floor(T-w/2),N=0;N<s;N++){for(var D=0,M=0;M<b;M++){var O=M+_;if(!(O<0||O>=l)){var P=k+O*e.strides[1],F=O*m;if(C===Math.min(i-1,n?Math.round(F):Math.floor(F)))for(var L=0;L<w;L++){var B=L+R;if(!(B<0||B>=c)){var j=P+B*e.strides[2],z=B*v;A===Math.min(o-1,n?Math.round(z):Math.floor(z))&&(D+=h[j+N])}}}}d[I+N]=D}return jd(d,t.shape,t.dtype)},t.prototype.batchNormalization=function(e,t,n,r,a,i){gw([e,t,n,a,i],"batchNorm");for(var o=this.readSync(e.dataId),s=this.readSync(t.dataId),u=this.readSync(n.dataId),l=a?this.readSync(a.dataId):new Float32Array([1]),c=i?this.readSync(i.dataId):new Float32Array([0]),d=new Float32Array(o.length),h=c.length,f=l.length,p=u.length,m=s.length,v=0,g=0,y=0,b=0,w=0;w<o.length;++w)d[w]=c[v++]+(o[w]-s[g++])*l[y++]/Math.sqrt(u[b++]+r),v>=h&&(v=0),g>=m&&(g=0),y>=f&&(y=0),b>=p&&(b=0);return jd(d,e.shape)},t.prototype.localResponseNormalization4D=function(e,t,n,r,a){gw(e,"localResponseNormalization4D");var i=e.shape[3],o=i-1,s=this.readSync(e.dataId),u=e.size,l=new Float32Array(u);function c(e){for(var n=e%i,r=e-n+Math.max(0,n-t),a=e-n+Math.min(n+t,o),u=0;r<=a;r++){var l=s[r];u+=l*l}return u}for(var d=0;d<u;d++){var h=c(d),f=s[d]*Math.pow(n+r*h,-a);l[d]=f}return jd(l,e.shape)},t.prototype.LRNGrad=function(e,t,n,r,a,i,o){gw(e,"LRNGrad");for(var s=e.shape[3],u=this.readSync(e.dataId),l=this.readSync(t.dataId),c=this.readSync(n.dataId),d=new Float32Array(e.size),h=e.size,f=0;f<h;f++){for(var p=f%s,m=f-p+Math.max(0,p-r),v=f-p+Math.min(s,p+r+1),g=0,y=m;y<v;y++)g+=Math.pow(l[y],2);for(g=i*g+a,y=m;y<v;y++){var b=-2*i*o*l[y]*c[f]/g;f===y&&(b+=Math.pow(g,-o)),b*=u[f],d[y]+=b}}return jd(d,e.shape)},t.prototype.multinomial=function(e,t,n,r){gw(e,"multinomial");for(var a=t?e:tf(e),i=a.shape[0],o=a.shape[1],s=Ud([i,n],"int32"),u=this.readSync(s.dataId),l=this.readSync(a.dataId),c=0;c<i;++c){var d=c*o,h=new Float32Array(o-1);h[0]=l[d];for(var f=1;f<h.length;++f)h[f]=h[f-1]+l[d+f];for(var p=oh(r.toString()),m=c*n,v=0;v<n;++v){var g=p();u[m+v]=h.length;for(var y=0;y<h.length;y++)if(g<h[y]){u[m+v]=y;break}}}return s},t.prototype.oneHot=function(e,t,n,r){gw(e,"oneHot");var a=new Float32Array(e.size*t);a.fill(r);for(var i=this.readSync(e.dataId),o=0;o<e.size;++o)i[o]>=0&&i[o]<t&&(a[o*t+i[o]]=n);return Ld(a,[e.size,t],"int32")},t.prototype.nonMaxSuppression=function(e,t,n,r,a){return gw(e,"nonMaxSuppression"),Nf(this.readSync(e.dataId),this.readSync(t.dataId),n,r,a)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],a=ch(e.shape,"float32"),i=ch(e.shape,"float32"),o=Nd(e).as2D(n,r),s=Dd(e).as2D(n,r),u=0;u<n;u++)for(var l=o.slice([u,0],[1,r]),c=s.slice([u,0],[1,r]),d=Rd(l,c),h=this.readSync(this.fftImpl(d,t).dataId),f=0;f<r;f++){var p=_f(h,f);a.values[u*r+f]=p.real,i.values[u*r+f]=p.imag}return Rd(a.toTensor(),i.toTensor()).as2D(n,r)},t.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var a=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(a=Rd(Nd(a).div(Pd(r)),Dd(a).div(Pd(r)))),a}var i=this.readSync(e.dataId),o=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(this.fourierTransformByMatmul(i,r,t));return Rd(o.real,o.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return 0==(e&e-1)},t.prototype.fftRadix2=function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),a=t/2,i=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(r),o=Rd(i.real,i.imag).as1D(),s=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(r),u=Rd(s.real,s.imag).as1D();o=this.fftRadix2(o,a,n),u=this.fftRadix2(u,a,n);var l=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}(t,n),c=Rd(l.real,l.imag).mul(u),d=o.add(c),h=o.sub(c),f=Nd(d).concat(Nd(h)),p=Dd(d).concat(Dd(h));return Rd(f,p).as1D()},t.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var u=If(a*s,t,n),l=_f(e,s);i+=l.real*u.real-l.imag*u.imag,o+=l.real*u.imag+l.imag*u.real}n&&(i/=t,o/=t),Af(r,i,o,a)}return r},t.prototype.depthToSpace=function(e,t,n){qu("NHWC"===n,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n})),qu(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));for(var r=e.shape[0],a=e.shape[1],i=e.shape[2],o=e.shape[3],s=a*t,u=i*t,l=o/(t*t),c=this.readSync(e.dataId),d=new Float32Array(r*s*u*l),h=0,f=0;f<r;++f)for(var p=0;p<s;++p)for(var m=Math.floor(p/t),v=p%t,g=0;g<u;++g)for(var y=Math.floor(g/t),b=(v*t+g%t)*l,w=0;w<l;++w){var x=w+b+o*(y+i*(m+a*f));d[h++]=c[x]}return jd(d,[r,s,u,l])},t.prototype.broadcastedBinaryOp=function(e,t,n,r){var a=lf(e.shape,t.shape),i=ch(a,n),o=this.readSync(e.dataId),s=this.readSync(t.dataId),u=sf(e.shape,a),l=sf(t.shape,a),c=i.values;if(u.length+l.length===0)for(var d=0;d<c.length;++d)c[d]=r(o[d%o.length],s[d%s.length]);else{var h=this.bufferSync(e),f=this.bufferSync(t),p=function(n){var a=i.indexToLoc(n),d=a.slice(-e.rank);u.forEach((function(e){return d[e]=0}));var p=h.locToIndex(d),m=a.slice(-t.rank);l.forEach((function(e){return m[e]=0}));var v=f.locToIndex(m);c[n]=r(o[p],s[v])};for(d=0;d<c.length;++d)p(d)}return i.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=lf(e.shape,t.shape),a=ch(r,"float32"),i=ch(r,"float32"),o=this.readSync(e.dataId),s=this.readSync(t.dataId),u=sf(e.shape,r),l=sf(t.shape,r),c=a.values,d=i.values;if(u.length+l.length===0)for(var h=0;h<c.length;h++){var f=h%o.length,p=h%s.length,m=n(o[2*f],o[2*f+1],s[2*p],s[2*p+1]);c[h]=m.real,d[h]=m.imag}else{var v=this.bufferSync(this.data.get(e.dataId).complexTensors.real),g=this.bufferSync(this.data.get(t.dataId).complexTensors.real),y=function(r){var i=a.indexToLoc(r),h=i.slice(-e.rank);u.forEach((function(e){return h[e]=0}));var f=v.locToIndex(h),p=i.slice(-t.rank);l.forEach((function(e){return p[e]=0}));var m=g.locToIndex(p),y=n(o[2*f],o[2*f+1],s[2*m],s[2*m+1]);c[r]=y.real,d[r]=y.imag};for(h=0;h<c.length;h++)y(h)}return this.complex(a.toTensor(),i.toTensor())},t.prototype.split=function(e,t,n){return Lf(e,t,n)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,t,n,r,a,i){for(var o=e.shape,s=o[0],u=o[1],l=o[2],c=o[3],d=t.shape[0],h=r[0],f=r[1],p=ch([d,h,f,c],"float32"),m=this.readSync(t.dataId),v=this.readSync(n.dataId),g=this.readSync(e.dataId),y=e.strides,b=p.strides,w=0;w<d;w++){var x=4*w,k=m[x],C=m[x+1],E=m[x+2],S=m[x+3],_=v[w];if(!(_>=s))for(var A=h>1?(E-k)*(u-1)/(h-1):0,I=f>1?(S-C)*(l-1)/(f-1):0,T=0;T<h;T++){var R=h>1?k*(u-1)+T*A:.5*(k+E)*(u-1);if(R<0||R>u-1)for(var N=0;N<f;N++)for(var D=0;D<c;D++){var M=D+N*b[2]+T*b[1]+w*b[0];p.values[M]=i}else if("bilinear"===a){var O=Math.floor(R),P=Math.ceil(R),F=R-O;for(N=0;N<f;N++)if((G=f>1?C*(l-1)+N*I:.5*(C+S)*(l-1))<0||G>l-1)for(D=0;D<c;D++)M=D+N*b[2]+T*b[1]+w*b[0],p.values[M]=i;else{var L=Math.floor(G),B=Math.ceil(G),j=G-L;for(D=0;D<c;D++){var z=g[M=D+L*y[2]+O*y[1]+_*y[0]],U=g[M=D+B*y[2]+O*y[1]+_*y[0]],V=g[M=D+L*y[2]+P*y[1]+_*y[0]],W=z+(U-z)*j,H=V+(g[M=D+B*y[2]+P*y[1]+_*y[0]]-V)*j;M=D+N*b[2]+T*b[1]+w*b[0],p.values[M]=W+(H-W)*F}}}else for(N=0;N<f;++N){var G;if((G=f>1?C*(l-1)+N*I:.5*(C+S)*(l-1))<0||G>l-1)for(D=0;D<c;D++)M=D+N*b[2]+T*b[1]+w*b[0],p.values[M]=i;else{var K=Math.round(G),X=Math.round(R);for(D=0;D<c;D++){var Y=D+K*y[2]+X*y[1]+_*y[0],q=D+N*b[2]+T*b[1]+w*b[0];p.values[q]=g[Y]}}}}}return p.toTensor()},t.prototype.sparseToDense=function(e,t,n,r){var a=Kh(0,e,n),i=a.sliceRank,o=a.numUpdates,s=a.sliceSize,u=a.strides,l=a.outputSize;return this.scatter(e,t,n,l,s,o,i,u,r,!1)},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],a=Vh(e,t),i=a[0],o=a[1],s=a[2],u=a[3];if(0===o)return Md([],i,e.dtype);for(var l=new jl([o,s],e.dtype),c=this.readSync(t.dataId),d=this.readSync(e.dataId),h=0;h<o;h++){for(var f=[],p=0,m=0;m<r;m++){var v=c[h*r+m];p+=v*u[m],f.push(v)}if(p<0||p>=e.size/s)throw new Error("Invalid indices: "+f+" does not index into "+e.shape);for(var g=0;g<s;g++)l.values[h*s+g]=d[p*s+g]}return l.toTensor().reshape(i)},t.prototype.scatterND=function(e,t,n){var r=Kh(0,e,n),a=r.sliceRank,i=r.numUpdates,o=r.sliceSize,s=r.strides,u=r.outputSize,l=Pd(0);return this.scatter(e,t,n,u,o,i,a,s,l,!0)},t.prototype.fill=function(e,t,n){var r=cl(n=n||wl(t),$u(e));return r.fill(t),oc.makeTensor(r,e,n,this)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var t=cl(e.dtype,$u(e.shape));return this.makeOutput(t,e.shape,e.dtype)},t.prototype.linspace=function(e,t,n){return Ef(e,t,n)},t.prototype.scatter=function(e,t,n,r,a,i,o,s,u,l){var c=[r/a,a],d=this.readSync(e.dataId),h=this.readSync(t.dataId);if(0===r)return Md([],n,t.dtype);var f=new jl(c,t.dtype);f.values.fill(this.readSync(u.dataId)[0]);for(var p=0;p<i;p++){for(var m=[],v=0,g=0;g<o;g++){var y=d[p*o+g];m.push(y),v+=y*s[g]}if(v<0||v>=r/a)throw new Error("Invalid indices: "+m+" does not index into "+n);for(var b=0;b<a;b++)l?f.values[v*a+b]+=h[p*a+b]:f.values[v*a+b]=0===t.rank?h[0]:h[p*a+b]}return f.toTensor().reshape(n)},t}(af);oc.registerBackend("cpu",(function(){return new bw}),1);for(var ww=0,xw=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t,i=a.boxes,o=a.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,h=n;gw(i,"NonMaxSuppressionWithScore");var f=Df(h.data.get(i.dataId).values,h.data.get(o.dataId).values,u,l,c,d);return[f.selectedIndices,f.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;gw(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Dv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=r.a,i=r.b,o=n;gw([a,i],Dv);var s=o.data.get(a.dataId).values,u=o.data.get(i.dataId).values,l=function(e,t,n,r,a,i){var o=lf(e,t),s=o.length,u=Cl(o),l=ll(a,$u(o)),c=e.length,d=t.length,h=Cl(e),f=Cl(t),p=sf(e,o),m=sf(t,o);if(p.length+m.length===0)for(var v=0;v<l.length;++v)l[v]=i(n[v%n.length],r[v%r.length]);else{var g=function(e){var t=Ml(e,s,u),a=t.slice(-c);p.forEach((function(e){return a[e]=0}));var o=Dl(a,c,h),v=t.slice(-d);m.forEach((function(e){return v[e]=0}));var g=Dl(v,d,f);l[e]=i(n[o],r[g])};for(v=0;v<l.length;++v)g(v)}return[l,o]}(a.shape,i.shape,s,u,a.dtype,(function(e,t){var n=e-t;return n*n})),c=l[0],d=l[1];return{dataId:o.write(c,d,a.dtype),shape:d,dtype:a.dtype}}}];ww<xw.length;ww++)Vu(xw[ww]);for(var kw,Cw=function(e){this.variableNames=["A"];var t=Kf(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},Ew=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Kf(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},Sw=0,_w=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,u=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],l=u[0],c=u[1],d=[c,l],h=[c,l,i];(s||o)&&(null==kw&&(kw=document.createElement("canvas").getContext("2d")),kw.canvas.width=l,kw.canvas.height=c,kw.drawImage(a,0,0,l,c),a=kw.canvas);var f=n.makeTensorInfo(d,"int32");n.texData.get(f.dataId).usage=cc.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),a);var p=Fu().getBool("WEBGL_PACK")?new Ew(h):new Cw(h),m=n.runWebGLProgram(p,[f],"int32");return n.disposeData(f.dataId),m}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;pd("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=t,i=a.boxes,o=a.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,h=n,f=Df(h.readSync(i.dataId),h.readSync(o.dataId),u,l,c,d);return[f.selectedIndices,f.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n,i=new nv(r.shape,"return x * x;");return a.runWebGLProgram(i,[r],r.dtype)}},{kernelName:Dv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=r.a,i=r.b,o=n,s=Fu().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wp("return (a - b) * (a - b);",a.shape,i.shape):new yp("return (a - b) * (a - b);",a.shape,i.shape);return o.compileAndRun(s,[a,i])}}];Sw<_w.length;Sw++)Vu(_w[Sw]);for(var Aw=0,Iw=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:Dv,gradFunc:function(e,t){var n=t[0],r=t[1],a=Pd(2);return{a:function(){return Yg(e,Yg(a,$g(n,r)))},b:function(){return Yg(e,Yg(a,$g(r,n)))}}}}];Aw<Iw.length;Aw++)Wu(Iw[Aw]);var Tw=function(){function e(){}return e.prototype.fetch=function(e,t){return fetch(e,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},e}();Fu().get("IS_BROWSER")&&Fu().setPlatform("browser",new Tw);var Rw,Nw=function(){function e(){this.util=n(753),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(e,t){return null!=Fu().global.fetch?Fu().global.fetch(e,t):(null==Rw&&(Rw=n(522)),Rw(e,t))},e.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)},e}();Fu().get("IS_NODE")&&Fu().setPlatform("node",new Nw);var Dw={float32:4,int32:4,uint16:2,uint8:1,bool:1};function Mw(e,t){for(var n={},r=0,a=function(t){var a=t.name,i=t.dtype,o=t.shape,s=$u(o),u=void 0;if("quantization"in t){var l=t.quantization;if("uint8"!==l.dtype&&"uint16"!==l.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+l.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var c=Dw[l.dtype],d=e.slice(r,r+s*c),h="uint8"===l.dtype?new Uint8Array(d):new Uint16Array(d);if("float32"===i)u=Float32Array.from(h,(function(e){return e*l.scale+l.min}));else{if("int32"!==i)throw new Error("Unsupported dtype in weight '"+a+"': "+i);u=Int32Array.from(h,(function(e){return Math.round(e*l.scale+l.min)}))}r+=s*c}else if("string"===i){var f=$u(t.shape);u=[];for(var p=0;p<f;p++){var m=new Uint32Array(e.slice(r,r+4))[0];r+=4;var v=new Uint8Array(e.slice(r,r+m));u.push(v),r+=m}}else{var g=Dw[i];if(d=e.slice(r,r+s*g),"float32"===i)u=new Float32Array(d);else if("int32"===i)u=new Int32Array(d);else{if("bool"!==i)throw new Error("Unsupported dtype in weight '"+a+"': "+i);u=new Uint8Array(d)}r+=s*g}n[a]=Md(u,o,i)},i=0,o=t;i<o.length;i++)a(o[i]);return n}function Ow(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var Pw="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function Fw(e){return Pw?Buffer.byteLength(e):new Blob([e]).size}function Lw(e){var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Bw(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function jw(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Fw(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Fw(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var zw=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a},e}(),Uw="://",Vw=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){qu(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(Uw)&&(t=t.slice(0,t.indexOf(Uw))),qu(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();qu(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '"+t+"'."})),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function Ww(e){if(-1===e.indexOf(Uw))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Vw.getSchemes().join(","));return{scheme:e.split(Uw)[0],path:e.split(Uw)[1]}}function Hw(e,t,n){return void 0===n&&(n=!1),Du(this,void 0,void 0,(function(){var r,a,i,o,s,u,l,c,d;return Mu(this,(function(h){switch(h.label){case 0:return qu(e!==t,(function(){return"Old path and new path are the same: '"+e+"'"})),qu((r=zw.getLoadHandlers(e)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+e+"."})),qu(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."})),a=r[0],qu((i=zw.getSaveHandlers(t)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+t+"."})),qu(i.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."})),o=i[0],s=Ww(e).scheme,u=Ww(e).path,l=s===Ww(e).scheme,[4,a.load()];case 1:return c=h.sent(),n&&l?[4,Vw.getManager(s).removeModel(u)]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,o.save(c)];case 4:return d=h.sent(),!n||l?[3,6]:[4,Vw.getManager(s).removeModel(u)];case 5:h.sent(),h.label=6;case 6:return[2,d.modelArtifactsInfo]}}))}))}var Gw="models_store",Kw="model_info_store";function Xw(){if(!Fu().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Yw(e){var t=e.result;t.createObjectStore(Gw,{keyPath:"modelPath"}),t.createObjectStore(Kw,{keyPath:"modelPath"})}var qw=function(){function e(e){if(this.indexedDB=Xw(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return Du(this,void 0,void 0,(function(){return Mu(this,(function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]}))}))},e.prototype.load=function(){return Du(this,void 0,void 0,(function(){return Mu(this,(function(e){return[2,this.databaseAction(this.modelPath)]}))}))},e.prototype.databaseAction=function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return Yw(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(Gw,"readonly"),s=o.objectStore(Gw).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,l=jw(t),c=i.transaction(Kw,"readwrite"),d=c.objectStore(Kw),h=d.put({modelPath:n.modelPath,modelArtifactsInfo:l});h.onsuccess=function(){var a=(u=i.transaction(Gw,"readwrite")).objectStore(Gw).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l});a.onsuccess=function(){return e({modelArtifactsInfo:l})},a.onerror=function(e){var t=(d=c.objectStore(Kw)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},h.onerror=function(e){return i.close(),r(h.error)},c.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))},e.URL_SCHEME="indexeddb://",e}(),Zw=function(e){return Fu().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(qw.URL_SCHEME)?(t=e.slice(qw.URL_SCHEME.length),new qw(t)):null;var t};zw.registerSaveRouter(Zw),zw.registerLoadRouter(Zw);var Qw=function(){function e(){this.indexedDB=Xw()}return e.prototype.listModels=function(){return Du(this,void 0,void 0,(function(){var e=this;return Mu(this,(function(t){return[2,new Promise((function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return Yw(r)},r.onsuccess=function(){var e=r.result,a=e.transaction(Kw,"readonly"),i=a.objectStore(Kw).getAll();i.onsuccess=function(){for(var e={},n=0,r=i.result;n<r.length;n++){var a=r[n];e[a.modelPath]=a.modelArtifactsInfo}t(e)},i.onerror=function(t){return e.close(),n(i.error)},a.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}}))]}))}))},e.prototype.removeModel=function(e){return Du(this,void 0,void 0,(function(){var t=this;return Mu(this,(function(n){var r;return e=(r=e).startsWith(qw.URL_SCHEME)?r.slice(qw.URL_SCHEME.length):r,[2,new Promise((function(n,r){var a=t.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return Yw(a)},a.onsuccess=function(){var t,i=a.result,o=i.transaction(Kw,"readwrite"),s=o.objectStore(Kw),u=s.get(e);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var a=s.delete(e),o=function(){var a=(t=i.transaction(Gw,"readwrite")).objectStore(Gw).delete(e);a.onsuccess=function(){return n(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==t?i.close():t.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}}))]}))}))},e}();if(Fu().getBool("IS_BROWSER"))try{Vw.registerManager(qw.URL_SCHEME,new Qw)}catch(ql){}var Jw="/",$w="tensorflowjs_models",ex="info",tx="model_topology",nx="weight_specs",rx="weight_data",ax="model_metadata";function ix(e){return{info:[$w,e,ex].join(Jw),topology:[$w,e,tx].join(Jw),weightSpecs:[$w,e,nx].join(Jw),weightData:[$w,e,rx].join(Jw),modelMetadata:[$w,e,ax].join(Jw)}}function ox(e){var t=e.split(Jw);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(Jw)}var sx=function(){function e(e){if(!Fu().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=ix(this.modelPath)}return e.prototype.save=function(e){return Du(this,void 0,void 0,(function(){var t,n,r;return Mu(this,(function(a){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=jw(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(Pw)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]}))}))},e.prototype.load=function(){return Du(this,void 0,void 0,(function(){var e,t,n,r,a,i,o;return Mu(this,(function(s){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null!=(a=this.LS.getItem(this.keys.modelMetadata))&&(i=JSON.parse(a),t.format=i.format,t.generatedBy=i.generatedBy,t.convertedBy=i.convertedBy,t.userDefinedMetadata=i.userDefinedMetadata),null==(o=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(Pw){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}(o),[2,t]}))}))},e.URL_SCHEME="localstorage://",e}(),ux=function(e){return Fu().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(sx.URL_SCHEME)?(t=e.slice(sx.URL_SCHEME.length),new sx(t)):null;var t};zw.registerSaveRouter(ux),zw.registerLoadRouter(ux);var lx=function(){function e(){qu(Fu().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),qu("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return e.prototype.listModels=function(){return Du(this,void 0,void 0,(function(){var e,t,n,r,a,i;return Mu(this,(function(o){for(e={},t=$w+Jw,n=Jw+ex,r=0;r<this.LS.length;++r)(a=this.LS.key(r)).startsWith(t)&&a.endsWith(n)&&(i=ox(a),e[i]=JSON.parse(this.LS.getItem(a)));return[2,e]}))}))},e.prototype.removeModel=function(e){return Du(this,void 0,void 0,(function(){var t,n;return Mu(this,(function(r){var a;if(e=(a=e).startsWith(sx.URL_SCHEME)?a.slice(sx.URL_SCHEME.length):a,t=ix(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]}))}))},e}();if(Fu().getBool("IS_BROWSER"))try{Vw.registerManager(sx.URL_SCHEME,new lx)}catch(ql){}function cx(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var dx=function(){function e(t){if(!Fu().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return e.prototype.save=function(e){return Du(this,void 0,void 0,(function(){var t,n,r,a,i,o;return Mu(this,(function(s){switch(s.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},a=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(i=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,i.href=a,[4,cx((function(){return i.dispatchEvent(new MouseEvent("click"))}))];case 2:return s.sent(),null==e.weightData?[3,4]:((o=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,o.href=t,[4,cx((function(){return o.dispatchEvent(new MouseEvent("click"))}))]);case 3:s.sent(),s.label=4;case 4:return[2,{modelArtifactsInfo:jw(e)}]}}))}))},e.URL_SCHEME="downloads://",e}(),hx=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return Du(this,void 0,void 0,(function(){var e,t,n=this;return Mu(this,(function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise((function(r,a){var i=new FileReader;i.onload=function(i){var o=JSON.parse(i.target.result),s=o.modelTopology;if(null!=s){0===t.length&&r({modelTopology:s});var u=o.weightsManifest;if(null!=u){var l;try{l=n.checkManifestAndWeightFiles(u,t)}catch(e){return void a(e)}var c=[],d=[],h=[];u.forEach((function(e){e.paths.forEach((function(e){d.push(e),h.push(null)})),c.push.apply(c,e.weights)})),u.forEach((function(e){e.paths.forEach((function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,a=d.indexOf(e);h[a]=n,-1===h.indexOf(null)&&r({modelTopology:s,weightSpecs:c,weightData:Lw(h),format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy,userDefinedMetadata:o.userDefinedMetadata})},t.onerror=function(t){return a("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(l[e])}))}))}else a(new Error("weightManifest field is missing from file "+e.name))}else a(new Error("modelTopology field is missing from file "+e.name))},i.onerror=function(t){return a("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},i.readAsText(e)}))]}))}))},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map((function(e){return Bw(e.name)})),a={},i=0,o=e;i<o.length;i++)o[i].paths.forEach((function(e){var i=Bw(e);if(-1!==n.indexOf(i))throw new Error("Duplicate file basename found in weights manifest: '"+i+"'");if(n.push(i),-1===r.indexOf(i))throw new Error("Weight file with basename '"+i+"' is not provided.");a[e]=t[r.indexOf(i)]}));if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return a},e}();function fx(e,t,n,r){!function(e){qu(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){qu(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e})),qu(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t})),qu(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function px(e,t){return Du(this,void 0,void 0,(function(){var n,r,a,i,o,s,u,l,c;return Mu(this,(function(d){switch(d.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?Fu().platform.fetch:t.fetchFunc,r=e.map((function(e){return n(e,t.requestInit,{isBinary:!0})})),a=0,i=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return o=d.sent(),[3,4];case 2:return[4,fx(r,t.onProgress,a,i)];case 3:o=d.sent(),d.label=4;case 4:return s=o.map((function(e){return e.arrayBuffer()})),u=.5,l=1,null!=t.onProgress?[3,6]:[4,Promise.all(s)];case 5:return c=d.sent(),[3,8];case 6:return[4,fx(s,t.onProgress,u,l)];case 7:c=d.sent(),d.label=8;case 8:return[2,c]}}))}))}function mx(e){var t=this;return function(n,r,a){return void 0===r&&(r=""),Du(t,void 0,void 0,(function(){var t,i,o,s,u,l,c,d,h,f;return Mu(this,(function(p){switch(p.label){case 0:if(t=n.map((function(){return!1})),i={},o=null!=a?a.map((function(){return!1})):[],s=[],n.forEach((function(e,n){var r=0;e.weights.forEach((function(e){var u="quantization"in e?e.quantization.dtype:e.dtype,l=Dw[u]*$u(e.shape),c=function(){t[n]=!0,null==i[n]&&(i[n]=[]),i[n].push({manifestEntry:e,groupOffset:r,sizeBytes:l})};null!=a?a.forEach((function(t,n){t===e.name&&(c(),o[n]=!0)})):c(),s.push(e.name),r+=l}))})),!o.every((function(e){return e})))throw u=a.filter((function(e,t){return!o[t]})),new Error("Could not find weights in manifest with names: "+u.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".");return l=t.reduce((function(e,t,n){return t&&e.push(n),e}),[]),c=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;c.push(t)}))})),[4,e(c)];case 1:return d=p.sent(),h={},f=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=d[f+a].byteLength;for(var o=new ArrayBuffer(r),s=new Uint8Array(o),u=0,l=0;l<t;l++){var c=new Uint8Array(d[f+l]);s.set(c,u),u+=c.byteLength}i[e].forEach((function(e){var t=Mw(o.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)h[n]=t[n]})),f+=t})),[2,h]}}))}))}}zw.registerSaveRouter((function(e){return Fu().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(dx.URL_SCHEME)?function(e){return void 0===e&&(e="model"),new dx(e)}(e.slice(dx.URL_SCHEME.length)):null}));var vx=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(qu("function"==typeof t.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=t.fetchFunc):this.fetch=Fu().platform.fetch,qu(null!=e&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&qu(2===e.length,(function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."})),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return Du(this,void 0,void 0,(function(){var t,n,r,a;return Mu(this,(function(i){switch(i.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((a=i.sent()).ok)return[2,{modelArtifactsInfo:jw(e),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}}))}))},e.prototype.load=function(){return Du(this,void 0,void 0,(function(){var e,t,n,r,a,i,o,s,u,l,c,d;return Mu(this,(function(h){switch(h.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=h.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");h.label=2;case 2:return h.trys.push([2,4,,5]),[4,e.json()];case 3:return t=h.sent(),[3,5];case 4:throw h.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,a=t.weightsManifest,i=t.generatedBy,o=t.convertedBy,s=t.format,u=t.userDefinedMetadata,null==r&&null==a)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==a?[3,7]:[4,this.loadWeights(a)];case 6:d=h.sent(),l=d[0],c=d[1],h.label=7;case 7:return[2,{modelTopology:r,weightSpecs:l,weightData:c,userDefinedMetadata:u,generatedBy:i,convertedBy:o,format:s}]}}))}))},e.prototype.loadWeights=function(e){return Du(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,u,l,c,d;return Mu(this,(function(h){switch(h.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],a=n[1],i=this.weightPathPrefix||r,o=[],s=0,u=e;s<u.length;s++)l=u[s],o.push.apply(o,l.weights);return c=[],e.forEach((function(e){e.paths.forEach((function(e){c.push(i+e+a)}))})),[4,px(c,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return d=h.sent(),[2,[o,Lw(d)]]}}))}))},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function gx(e){return null!=e.match(vx.URL_SCHEME_REGEX)}var yx=function(e,t){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every((function(e){return gx(e)})):gx(e))?bx(e,{onProgress:t}):null};function bx(e,t){return new vx(e,t)}zw.registerSaveRouter(yx),zw.registerLoadRouter(yx);var wx,xx=function(){function e(e){this.modelArtifacts=e}return e.prototype.load=function(){return Du(this,void 0,void 0,(function(){return Mu(this,(function(e){return[2,this.modelArtifacts]}))}))},e}(),kx=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return Du(this,void 0,void 0,(function(){return Mu(this,(function(t){return[2,this.saveHandler(e)]}))}))},e}(),Cx=Object.freeze({browserFiles:function(e){return new hx(e)},browserHTTPRequest:function(e,t){return bx(e,t)},concatenateArrayBuffers:Lw,decodeWeights:Mw,encodeWeights:function(e,t){return Du(this,void 0,void 0,(function(){var n,r,a,i,o,s=this;return Mu(this,(function(u){switch(u.label){case 0:for(n=[],r=[],a=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e),i=function(i){var o=a[i],u=Array.isArray(e)?e[i].tensor:e[o];if("float32"!==u.dtype&&"int32"!==u.dtype&&"bool"!==u.dtype&&"string"!==u.dtype)throw new Error("Unsupported dtype in weight '"+o+"': "+u.dtype);var l={name:o,shape:u.shape,dtype:u.dtype};if("string"===u.dtype){var c=new Promise((function(e){return Du(s,void 0,void 0,(function(){var t,n,r,a,i,o,s;return Mu(this,(function(l){switch(l.label){case 0:return[4,u.bytes()];case 1:for(t=l.sent(),n=t.reduce((function(e,t){return e+t.length}),0)+4*t.length,r=new Uint8Array(n),a=0,i=0;i<t.length;i++)o=t[i],s=new Uint8Array(new Uint32Array([o.length]).buffer),r.set(s,a),a+=4,r.set(o,a),a+=o.length;return e(r),[2]}}))}))}));r.push(c)}else r.push(u.data());null!=t&&(l.group=t),n.push(l)},o=0;o<a.length;++o)i(o);return[4,Promise.all(r)];case 1:return[2,{data:Ow(u.sent()),specs:n}]}}))}))},fromMemory:function(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new xx(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new xx({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new xx({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return zw.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:jw,getSaveHandlers:function(e){return zw.getSaveHandlers(e)},http:bx,isHTTPScheme:gx,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),Du(this,void 0,void 0,(function(){return Mu(this,(function(a){return[2,mx((function(e){return px(e,{requestInit:r})}))(e,t,n)]}))}))},registerLoadRouter:function(e){return zw.registerLoadRouter(e)},registerSaveRouter:function(e){return zw.registerSaveRouter(e)},weightsLoaderFactory:mx,withSaveHandler:function(e){return new kx(e)},copyModel:function(e,t){return Du(this,void 0,void 0,(function(){return Mu(this,(function(n){return[2,Hw(e,t,!1)]}))}))},listModels:function(){return Du(this,void 0,void 0,(function(){var e,t,n,r,a,i,o;return Mu(this,(function(s){switch(s.label){case 0:e=Vw.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(a=r[n],[4,Vw.getManager(a).listModels()]):[3,4];case 2:for(o in i=s.sent())t[a+Uw+o]=i[o];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},moveModel:function(e,t){return Du(this,void 0,void 0,(function(){return Mu(this,(function(n){return[2,Hw(e,t,!0)]}))}))},removeModel:function(e){return Du(this,void 0,void 0,(function(){var t;return Mu(this,(function(n){return t=Ww(e),[2,Vw.getManager(t.scheme).removeModel(t.path)]}))}))}}),Ex=Td({confusionMatrix_:function(e,t,n){var r=gd(e,"labels","confusionMatrix"),a=gd(t,"predictions","confusionMatrix");qu(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),qu(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),qu(1===a.rank,(function(){return"Expected the rank of predictions to be 1, but got "+a.rank})),qu(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."})),qu(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var i=wh(r.asType("int32"),n),o=wh(a.asType("int32"),n);return i.transpose().matMul(o).asType("int32")}}),Sx=(Object.freeze({confusionMatrix:Ex}),Td({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else{if(null==e.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(a&&a&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=zu("FromPixels",oc.backendName))return oc.runKernel("FromPixels",{pixels:e},{numChannels:t});var s,u,l=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],c=l[0],d=l[1];if(o?s=e.getContext("2d").getImageData(0,0,c,d).data:r||n?s=e.data:(i||a)&&(null==wx&&(wx=document.createElement("canvas").getContext("2d")),wx.canvas.width=c,wx.canvas.height=d,wx.drawImage(e,0,0,c,d),s=wx.getImageData(0,0,c,d).data),4===t)u=new Int32Array(s);else{var h=c*d;u=new Int32Array(h*t);for(var f=0;f<h;f++)for(var p=0;p<t;++p)u[f*t+p]=s[4*f+p]}return Bd(u,[d,c,t],"int32")}})),_x=Object.freeze({toPixels:function(e,t){return Du(this,void 0,void 0,(function(){var n,r,a,i,o,s,u,l,c,d,h,f,p,m,v,g,y,b,w,x,k,C,E;return Mu(this,(function(S){switch(S.label){case 0:if(n=gd(e,"img","toPixels"),e instanceof Wl||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),a=r[0],i=r[1],(o=2===n.rank?1:n.shape[2])>4||2===o)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,n.data()];case 1:return s=S.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=S.sent(),d=c[0],h=c[1],f=d[0],p=h[0],u.dispose(),l.dispose(),"float32"===n.dtype){if(f<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+f+" - "+p+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(f<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+f+" - "+p+"].")}for(m="float32"===n.dtype?255:1,v=new Uint8ClampedArray(i*a*4),g=0;g<a*i;++g)y=void 0,b=void 0,w=void 0,x=void 0,1===o?(y=s[g]*m,b=s[g]*m,w=s[g]*m,x=255):3===o?(y=s[3*g]*m,b=s[3*g+1]*m,w=s[3*g+2]*m,x=255):4===o&&(y=s[4*g]*m,b=s[4*g+1]*m,w=s[4*g+2]*m,x=s[4*g+3]*m),v[0+(k=4*g)]=Math.round(y),v[k+1]=Math.round(b),v[k+2]=Math.round(w),v[k+3]=Math.round(x);return null!=t&&(t.width=i,t.height=a,C=t.getContext("2d"),E=new ImageData(v,i,a),C.putImageData(E,0,0)),n!==e&&n.dispose(),[2,v]}}))}))},fromPixels:Sx}),Ax=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),Ix=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function Tx(e){qu(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),qu("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),qu(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),Ix.register(e)}Object.freeze({Serializable:Ax,SerializationMap:Ix,registerClass:Tx});function Rx(){return 32===oc.backend.floatPrecision()?.001:.1}function Nx(e,t,n){var r=!0;if((pl(e)||pl(t))&&(r=!1),pl(e)&&pl(t)&&(r=!0),r){var a=e.constructor.name,i=t.constructor.name;if(a!==i)throw new Error("Arrays are of different type. Actual: "+a+". Expected: "+i)}if(Array.isArray(e)&&Array.isArray(t)){var o=md(e),s=md(t);if(!el(o,s))throw new Error("Arrays have different shapes. Actual: ["+o+"]. Expected: ["+s+"]")}var u=pl(e)?e:Ju(e),l=pl(t)?t:Ju(t);if(u.length!==l.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+l.length+".\nActual:   "+u+".\nExpected: "+l+".");for(var c=0;c<l.length;++c){var d=u[c],h=l[c];if(!n(d,h))throw new Error("Arrays differ: actual["+c+"] = "+d+", expected["+c+"] = "+h+".\nActual:   "+u+".\nExpected: "+l+".")}}function Dx(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(e,t,n){return null==n&&(n=Rx()),Nx(e,t,(function(e,t){return Dx(e,t,n)}))},testEpsilon:Rx,expectPromiseToFail:function(e,t){e().then((function(){return t.fail()}),(function(){return t()}))},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return gl(e)||gl(e[0])||gl(t)||gl(t[0])?Nx(e,n,(function(e,t){return e==t})):Nx(e,t,(function(e,t){return Dx(e,t,0)}))},expectNumbersClose:function(e,t,n){if(null==n&&(n=Rx()),!Dx(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),Object.freeze({gpgpu_util:mm,webgl_util:ld,forceHalfFloat:function(){Fu().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:Rv,setWebGLContext:pc,GPGPUContext:vm});var Mx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Nu(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return fd(i),t?a:(a.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return function(e,t){qu(xl(e),(function(){return"The f passed in variableGrads(f) must be a function"})),qu(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof Zl})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],oc.registeredVariables)t.push(oc.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,i=t.length;qu((t=t.filter((function(e){return e.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."}));var o=oc.gradients(e,t,null,!0),s=o.value,u=o.grads;qu(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),qu(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var l={};return t.forEach((function(e,t){null!=u[t]&&(l[e.name]=u[t])})),null!=a&&a.forEach((function(e){return l[e.name]=null})),{value:s,grads:l}}(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&fd(this.iterations_)},t.prototype.saveIterations=function(){return Du(this,void 0,void 0,(function(){return Mu(this,(function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:Pd(this.iterations_,"int32")}]}))}))},t.prototype.getWeights=function(){return Du(this,void 0,void 0,(function(){return Mu(this,(function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},t.prototype.setWeights=function(e){return Du(this,void 0,void 0,(function(){return Mu(this,(function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},t.prototype.extractIterations=function(e){return Du(this,void 0,void 0,(function(){var t;return Mu(this,(function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}}))}))},t}(Ax);Object.defineProperty(Mx,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var Ox=function(e){function t(t,n,r){void 0===r&&(r=null);var a=e.call(this)||this;return a.learningRate=t,a.rho=n,a.epsilon=r,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==r&&(a.epsilon=oc.backend.epsilon()),a}return Nu(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=oc.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:hd((function(){return Gd(a).variable(!1)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:hd((function(){return Gd(a).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;hd((function(){var e=o.mul(t.rho).add(i.square().mul(1-t.rho)),n=s.add(t.epsilon).sqrt().div(o.add(t.epsilon).sqrt()).mul(i),r=s.mul(t.rho).add(n.square().mul(1-t.rho));o.assign(e),s.assign(r);var u=n.mul(-t.learningRate).add(a);a.assign(u)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(fd(this.accumulatedGrads.map((function(e){return e.variable}))),fd(this.accumulatedUpdates.map((function(e){return e.variable}))))},t.prototype.getWeights=function(){return Du(this,void 0,void 0,(function(){var e;return Mu(this,(function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Du(this,void 0,void 0,(function(){var t;return Mu(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedUpdates=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="Adadelta",t}(Mx);Tx(Ox);var Px=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return Nu(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=oc.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:hd((function(){return Vd(a.shape,t.initialAccumulatorValue).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;hd((function(){var e=o.add(i.square());o.assign(e);var n=i.div(e.add(oc.backend.epsilon()).sqrt()).mul(-t.learningRate).add(a);a.assign(n)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&fd(this.accumulatedGrads.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Du(this,void 0,void 0,(function(){return Mu(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Du(this,void 0,void 0,(function(){return Mu(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(Mx);Tx(Px);var Fx=function(e){function t(t,n,r,a){void 0===a&&(a=null);var i=e.call(this)||this;return i.learningRate=t,i.beta1=n,i.beta2=r,i.epsilon=a,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],hd((function(){i.accBeta1=Pd(n).variable(),i.accBeta2=Pd(r).variable()})),null==a&&(i.epsilon=oc.backend.epsilon()),i}return Nu(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);hd((function(){var r=$g(1,t.accBeta1),a=$g(1,t.accBeta2);n.forEach((function(n,i){var o=oc.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:n+"/m",variable:hd((function(){return Gd(o).variable(!1)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:n+"/v",variable:hd((function(){return Gd(o).variable(!1)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,l=t.accumulatedSecondMoment[i].variable,c=u.mul(t.beta1).add(s.mul(1-t.beta1)),d=l.mul(t.beta2).add(s.square().mul(1-t.beta2)),h=c.div(r),f=d.div(a);u.assign(c),l.assign(d);var p=h.div(f.sqrt().add(t.epsilon)).mul(-t.learningRate).add(o);o.assign(p)}})),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&fd(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&fd(this.accumulatedSecondMoment.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Du(this,void 0,void 0,(function(){var e;return Mu(this,(function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Du(this,void 0,void 0,(function(){var t,n=this;return Mu(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),hd((function(){n.accBeta1.assign(Zg(n.beta1,n.iterations_+1)),n.accBeta2.assign(Zg(n.beta2,n.iterations_+1))})),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedSecondMoment=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(Mx);Tx(Fx);var Lx=function(e){function t(t,n,r,a,i){void 0===a&&(a=null),void 0===i&&(i=0);var o=e.call(this)||this;return o.learningRate=t,o.beta1=n,o.beta2=r,o.epsilon=a,o.decay=i,o.accumulatedFirstMoment=[],o.accumulatedWeightedInfNorm=[],hd((function(){o.iteration=Pd(0).variable(),o.accBeta1=Pd(n).variable()})),null==a&&(o.epsilon=oc.backend.epsilon()),o}return Nu(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);hd((function(){var r=$g(1,t.accBeta1),a=Bg(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach((function(n,i){var o=oc.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:n+"/m",variable:Gd(o).variable(!1)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:n+"/v",variable:Gd(o).variable(!1)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,l=t.accumulatedWeightedInfNorm[i].variable,c=u.mul(t.beta1).add(s.mul(1-t.beta1)),d=l.mul(t.beta2),h=s.abs(),f=d.maximum(h);u.assign(c),l.assign(f);var p=a.div(r).mul(c.div(f.add(t.epsilon))).add(o);o.assign(p)}})),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&fd(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&fd(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Du(this,void 0,void 0,(function(){return Mu(this,(function(e){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},t.prototype.setWeights=function(e){return Du(this,void 0,void 0,(function(){return Mu(this,(function(e){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(Mx);Tx(Lx);var Bx=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return Nu(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=oc.registeredVariables[n];hd((function(){var e=t.c.mul(a).add(i);i.assign(e)}))}})),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=function(e){return oc.keep(e)}(Pd(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return Du(this,void 0,void 0,(function(){return Mu(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}}))}))},t.prototype.setWeights=function(e){return Du(this,void 0,void 0,(function(){return Mu(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(Mx);Tx(Bx);var jx=function(e){function t(t,n,r){void 0===r&&(r=!1);var a=e.call(this,t)||this;return a.learningRate=t,a.momentum=n,a.useNesterov=r,a.accumulations=[],a.m=Pd(a.momentum),a}return Nu(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=oc.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:hd((function(){return Gd(a).variable(!1)}))});var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&hd((function(){var e,n=t.m.mul(i).add(o);e=t.useNesterov?t.c.mul(o.add(n.mul(t.m))).add(a):t.c.mul(n).add(a),i.assign(n),a.assign(e)}))})),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&fd(this.accumulations.map((function(e){return e.variable})))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return Du(this,void 0,void 0,(function(){return Mu(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Du(this,void 0,void 0,(function(){return Mu(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="Momentum",t}(Bx);Tx(jx);var zx=function(e){function t(t,n,r,a,i){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===a&&(a=null),void 0===i&&(i=!1);var o=e.call(this)||this;if(o.learningRate=t,o.decay=n,o.momentum=r,o.epsilon=a,o.accumulatedMeanSquares=[],o.accumulatedMoments=[],o.accumulatedMeanGrads=[],o.centered=i,null==a&&(o.epsilon=oc.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.");return o}return Nu(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=oc.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:hd((function(){return Gd(a).variable(!1)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:hd((function(){return Gd(a).variable(!1)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:hd((function(){return Gd(a).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable;hd((function(){var e=o.mul(t.decay).add(i.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,u=n.mul(t.decay).add(i.mul(1-t.decay)),l=s.mul(t.momentum).add(i.mul(t.learningRate).div(e.sub(u.square().add(t.epsilon)).sqrt()));o.assign(e),n.assign(u),s.assign(l);var c=a.sub(l);a.assign(c)}else{var d=o.mul(t.decay).add(i.square().mul(1-t.decay));l=s.mul(t.momentum).add(i.mul(t.learningRate).div(d.add(t.epsilon).sqrt())),o.assign(d),s.assign(l),c=a.sub(l),a.assign(c)}}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&fd(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&fd(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&fd(this.accumulatedMoments.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Du(this,void 0,void 0,(function(){var e;return Mu(this,(function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Du(this,void 0,void 0,(function(){var t;return Mu(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedMoments=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}))),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(Mx);Tx(zx);var Ux=function(){function e(){}return e.sgd=function(e){return new Bx(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new jx(e,t,n)},e.rmsprop=function(e,t,n,r,a){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===a&&(a=!1),new zx(e,t,n,r,a)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new Fx(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new Ox(e,t,n)},e.adamax=function(e,t,n,r,a){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===a&&(a=0),new Lx(e,t,n,r,a)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new Px(e,t)},e}();Ux.sgd,Ux.momentum,Ux.adadelta,Ux.adagrad,Ux.rmsprop,Ux.adamax,Ux.adam,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate&&setImmediate;Wl.prototype.squaredDifference=function(e){return Mv(this,e)},Ul=vw;var Vx=function(e,t){return Vx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Vx(e,t)};function Wx(e,t){function n(){this.constructor=e}Vx(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Hx=function(){return Hx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Hx.apply(this,arguments)};function Gx(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(Nu){i(Nu)}}function s(e){try{u(r.throw(e))}catch(Nu){i(Nu)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function Kx(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(Nu){i=[6,Nu],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function Xx(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,a++)r[a]=i[o];return r}var Yx=function(){function e(e,t){if(!nk(e)||!nk(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function qx(e,t){return e instanceof Wl&&e.shape.length===t}function Zx(e){return qx(e,3)}function Qx(e){return qx(e,4)}function Jx(e){return e%2===0}function $x(e){return e&&e.width&&e.height}function ek(e){return e.reduce((function(e,t){return e.add(t)}),new ak(0,0)).div(new ak(e.length,e.length))}function tk(e,t,n){return Array(e).fill(0).map((function(e,r){return t+r*n}))}function nk(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||0===e}function rk(e){return nk(e)&&0<=e&&e<=1}var ak=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),ik=function(){function e(t,n){void 0===n&&(n=!0);var r=t||{},a=[r.left,r.top,r.right,r.bottom].every(nk),i=[r.x,r.y,r.width,r.height].every(nk);if(!i&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var o=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=o[0],u=o[1],l=o[2],c=o[3];e.assertIsValidBox({x:s,y:u,width:l,height:c},"Box.constructor",n),this._x=s,this._y=u,this._width=l,this._height=c}return e.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(nk)},e.assertIsValidBox=function(t,n,r){if(void 0===r&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new ak(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new ak(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new ak(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new ak(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.round(e)}));return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.floor(e)}));return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,a=t.width,i=t.height,o=Math.abs(a-i);return a<i&&(n-=o/2,a+=o),i<a&&(r-=o/2,i+=o),new e({x:n,y:r,width:a,height:i})},e.prototype.rescale=function(t){var n=$x(t)?t.width:t,r=$x(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n];return new e({x:r[0],y:r[1],width:r[2],height:r[3]})},e.prototype.clipAtImageBorders=function(t,n){var r=this,a=r.x,i=r.y,o=r.right,s=r.bottom,u=Math.max(a,0),l=Math.max(i,0),c=o-u,d=s-l;return new e({x:u,y:l,width:Math.min(c,t-u),height:Math.min(d,n-l)}).floor()},e.prototype.shift=function(t,n){var r=this.width,a=this.height;return new e({x:this.x+t,y:this.y+n,width:r,height:a})},e.prototype.padAtBorders=function(e,t){var n=this.width+1,r=this.height+1,a=n,i=r,o=this.left,s=this.top,u=this.right,l=this.bottom;return u>t&&(a=-u+t+n,u=t),l>e&&(i=-l+e+r,l=e),o<1&&(i=2-o,o=1),s<1&&(i=2-s,s=1),{dy:1,edy:i,dx:1,edx:a,y:s,ey:l,x:o,ex:u,w:n,h:r}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),ok=function(e){function t(t,n,r,a,i){return void 0===i&&(i=!1),e.call(this,{left:t,top:n,right:r,bottom:a},i)||this}return Wx(t,e),t}(ik),sk=function(){function e(e,t,n,r,a){this._imageDims=new Yx(a.width,a.height),this._score=e,this._classScore=t,this._className=n,this._box=new ik(r).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new ik(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),uk=function(e){function t(t,n,r){return e.call(this,t,t,"",n,r)||this}return Wx(t,e),t.prototype.forSize=function(n,r){var a=e.prototype.forSize.call(this,n,r);return new t(a.score,a.relativeBox,a.imageDims)},t}(sk);function lk(e,t,n){void 0===n&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n?r/(e.area+t.area-r):r/Math.min(e.area,t.area)}function ck(e,t,n,r){void 0===r&&(r=!0);for(var a=t.map((function(e,t){return{score:e,boxIndex:t}})).sort((function(e,t){return e.score-t.score})).map((function(e){return e.boxIndex})),i=[],o=function(){var t=a.pop();i.push(t);for(var o=a,s=[],u=0;u<o.length;u++){var l=o[u],c=e[t],d=e[l];s.push(lk(c,d,r))}a=a.filter((function(e,t){return s[t]<=n}))};a.length>0;)o();return i}function dk(e,t){return hd((function(){var n=t[0],r=t[1],a=t[2],i=Vd(Xx(e.shape.slice(0,3),[1]),n),o=Vd(Xx(e.shape.slice(0,3),[1]),r),s=Vd(Xx(e.shape.slice(0,3),[1]),a),u=Kd([i,o,s],3);return $g(e,u)}))}function hk(e){return 1/(1+Math.exp(-e))}var fk,pk=function(e){function t(t,n,r,a,i){return void 0===i&&(i=!1),e.call(this,{x:t,y:n,width:r,height:a},i)||this}return Wx(t,e),t}(ik),mk=function(){function e(e,t,n){void 0===n&&(n=new ak(0,0));var r=t.width,a=t.height;this._imgDims=new Yx(r,a),this._shift=n,this._positions=e.map((function(e){return e.mul(new ak(r,a)).add(n)}))}return Object.defineProperty(e.prototype,"shift",{get:function(){return new ak(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map((function(t){return t.sub(e._shift).div(new ak(e.imageWidth,e.imageHeight))}))},enumerable:!0,configurable:!0}),e.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},e.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new ak(e,t))},e.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},e.prototype.align=function(e,t){if(void 0===t&&(t={}),e){var n=e instanceof uk?e.box.floor():new ik(e);return this.shiftBy(n.x,n.y).align(null,t)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),a=r.useDlibAlignment,i=r.minBoxPadding;return a?this.alignDlib():this.alignMinBbox(i)},e.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],n=e[1],r=e[2],a=function(e){return r.sub(e).magnitude()},i=(a(t)+a(n))/2,o=Math.floor(i/.45),s=ek(e),u=Math.floor(Math.max(0,s.x-.5*o)),l=Math.floor(Math.max(0,s.y-.43*o));return new pk(u,l,Math.min(o,this.imageWidth+u),Math.min(o,this.imageHeight+l))},e.prototype.alignMinBbox=function(e){var t=function(e){var t=e.map((function(e){return e.x})),n=e.map((function(e){return e.y})),r=t.reduce((function(e,t){return t<e?t:e}),1/0),a=n.reduce((function(e,t){return t<e?t:e}),1/0),i=t.reduce((function(e,t){return e<t?t:e}),0),o=n.reduce((function(e,t){return e<t?t:e}),0);return new ok(r,a,i,o)}(this.positions);return t.pad(t.width*e,t.height*e)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),vk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wx(t,e),t.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],ek([e[3],e[4]])]},t}(mk),gk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wx(t,e),t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(ek)},t}(mk),yk=function(){function e(e,t){this._label=e,this._distance=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){return void 0===e&&(e=!0),this.label+(e?" ("+function(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}(this.distance)+")":"")},e}(),bk=function(e){function t(t,n){var r=e.call(this,t)||this;return r._label=n,r}return Wx(t,e),t.assertIsValidLabeledBox=function(e,t){if(ik.assertIsValidBox(e,t),!nk(e.label))throw new Error(t+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(ik),wk=function(){function e(e,t){if("string"!==typeof e)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some((function(e){return!(e instanceof Float32Array)})))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map((function(e){return Array.from(e)}))}},e.fromJSON=function(t){var n=t.descriptors.map((function(e){return new Float32Array(e)}));return new e(t.label,n)},e}();!function(e){function t(t,n,r,a){var i=e.call(this,t,n)||this;return i._score=r,i._classScore=a,i}Wx(t,e),t.assertIsValidPredictedBox=function(e,t){if(bk.assertIsValidLabeledBox(e,t),!rk(e.score)||!rk(e.classScore))throw new Error(t+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(bk);function xk(e,t){var n={detection:t};return Object.assign({},e,n)}function kk(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}function Ck(e){var t="";if(!e)try{e=n(Object(function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(r){t=r.toString()}return{readFile:e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){return e?r(e):n(t)}))}))}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)}}}function Ek(){var e=n.g.Canvas||n.g.HTMLCanvasElement,t=n.g.Image||n.g.HTMLImageElement,r=n.g.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},a=Ck();return Hx({Canvas:e||function(){},CanvasRenderingContext2D:n.g.CanvasRenderingContext2D||function(){},Image:t||function(){},ImageData:n.g.ImageData||function(){},Video:n.g.HTMLVideoElement||function(){},createCanvasElement:function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:r},a)}function Sk(){return"object"===typeof window&&"undefined"!==typeof document&&"undefined"!==typeof HTMLImageElement&&"undefined"!==typeof HTMLCanvasElement&&"undefined"!==typeof HTMLVideoElement&&"undefined"!==typeof ImageData&&"undefined"!==typeof CanvasRenderingContext2D}function _k(){return"object"===typeof n.g&&"undefined"!==typeof process&&!!process.version}function Ak(e){fk=e}function Ik(){Sk()&&Ak(kk()),_k()&&Ak(Ek())}var Tk,Rk={getEnv:function(){if(!fk)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return fk},setEnv:Ak,initialize:Ik,createBrowserEnv:kk,createFileSystem:Ck,createNodejsEnv:Ek,monkeyPatch:function(e){if(fk||Ik(),!fk)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=void 0===t?fk.Canvas:t,r=e.Image,a=void 0===r?fk.Image:r;fk.Canvas=n,fk.Image=a,fk.createCanvasElement=e.createCanvasElement||function(){return new n},fk.createImageElement=e.createImageElement||function(){return new a},fk.ImageData=e.ImageData||fk.ImageData,fk.Video=e.Video||fk.Video,fk.fetch=e.fetch||fk.fetch,fk.readFile=e.readFile||fk.readFile},isBrowser:Sk,isNodejs:_k};function Nk(e){return Rk.isNodejs()||"string"!==typeof e?e:document.getElementById(e)}function Dk(e){var t=Rk.getEnv(),n=t.Canvas;if(e instanceof t.CanvasRenderingContext2D)return e;var r=Nk(e);if(!(r instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var a=r.getContext("2d");if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}Ik(),function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"}(Tk||(Tk={}));var Mk=function(e){void 0===e&&(e={});var t=e.anchorPosition,n=e.backgroundColor,r=e.fontColor,a=e.fontSize,i=e.fontStyle,o=e.padding;this.anchorPosition=t||Tk.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=a||14,this.fontStyle=i||"Georgia",this.padding=o||4},Ok=function(){function e(t,n,r){void 0===r&&(r={}),this.text="string"===typeof t?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new Mk(r)}return e.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map((function(t){return e.measureText(t).width})).reduce((function(e,t){return e<t?t:e}),0)+2*t},e.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,n=e.padding;return this.text.length*t+2*n},e.prototype.getUpperLeft=function(e,t){var n=this.options.anchorPosition,r=n===Tk.BOTTOM_RIGHT||n===Tk.TOP_RIGHT,a=n===Tk.BOTTOM_LEFT||n===Tk.BOTTOM_RIGHT,i=this.measureWidth(e),o=this.measureHeight(),s=r?this.anchor.x-i:this.anchor.x,u=a?this.anchor.y-o:this.anchor.y;if(t){var l=t.width,c=t.height;return{x:Math.max(Math.min(s,l-i),0),y:Math.max(Math.min(u,c-o),0)}}return{x:s,y:u}},e.prototype.draw=function(e){var t=Nk(e),n=Dk(t),r=this.options,a=r.backgroundColor,i=r.fontColor,o=r.fontSize,s=r.fontStyle,u=r.padding;n.font=o+"px "+s;var l=this.measureWidth(n),c=this.measureHeight();n.fillStyle=a;var d=this.getUpperLeft(n,t);n.fillRect(d.x,d.y,l,c),n.fillStyle=i,this.text.forEach((function(e,t){var r=u+d.x,a=u+d.y+(t+1)*o;n.fillText(e,r,a)}))},e}(),Pk=function(e){void 0===e&&(e={});var t=e.boxColor,n=e.lineWidth,r=e.label,a=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;var i={anchorPosition:Tk.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new Mk(Object.assign({},i,a))};!function(){function e(e,t){void 0===t&&(t={}),this.box=new ik(e),this.options=new Pk(t)}e.prototype.draw=function(e){var t=Dk(e),n=this.options,r=n.boxColor,a=n.lineWidth,i=this.box,o=i.x,s=i.y,u=i.width,l=i.height;t.strokeStyle=r,t.lineWidth=a,t.strokeRect(o,s,u,l);var c=this.options.label;c&&new Ok([c],{x:o-a/2,y:s},this.options.drawLabelOptions).draw(e)}}();function Fk(e){var t=Rk.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function Lk(e){var t=Rk.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new Yx(e.naturalWidth,e.naturalHeight):e instanceof r?new Yx(e.videoWidth,e.videoHeight):new Yx(e.width,e.height)}function Bk(e){var t=e.width,n=e.height,r=(0,Rk.getEnv().createCanvasElement)();return r.width=t,r.height=n,r}function jk(e,t){var n=Rk.getEnv().ImageData;if(!(e instanceof n)&&!Fk(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||Lk(e),a=r.width,i=r.height,o=Bk({width:a,height:i});return e instanceof n?Dk(o).putImageData(e,0,0):Dk(o).drawImage(e,0,0,a,i),o}function zk(e,t){return Gx(this,void 0,void 0,(function(){var n,r,a,i,o,s;return Kx(this,(function(u){switch(u.label){case 0:return n=t||Rk.getEnv().createCanvasElement(),r=e.shape.slice(Qx(e)?1:0),a=r[0],i=r[1],o=r[2],s=hd((function(){return e.as3D(a,i,o).toInt()})),[4,_x.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}}))}))}function Uk(e){var t=Rk.getEnv(),n=t.Image,r=t.Canvas,a=t.Video;return e instanceof n||e instanceof r||e instanceof a}var Vk=function(){function e(e,t){var n=this;if(void 0===t&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach((function(e,t){if(Zx(e))return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape);if(Qx(e)){var r=e.shape[0];if(1!==r)throw new Error("NetInput - tf.Tensor4D with batchSize "+r+" passed, but not supported in input array");return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape.slice(1))}var a=e instanceof Rk.getEnv().Canvas?e:jk(e);n._canvases[t]=a,n._inputDimensions[t]=[a.height,a.width,3]}))}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var e=this;return tk(this.batchSize,0,1).map((function(t,n){return e.getReshapedInputDimensions(n)}))},enumerable:!0,configurable:!0}),e.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},e.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},e.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},e.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},e.prototype.getReshapedInputDimensions=function(e){if("number"!==typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return function(e,t){var n=e.width,r=e.height,a=t/Math.max(r,n);return new Yx(Math.round(n*a),Math.round(r*a))}({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)},e.prototype.toBatchTensor=function(e,t){var n=this;return void 0===t&&(t=!0),this._inputSize=e,hd((function(){var r=tk(n.batchSize,0,1).map((function(r){var a=n.getInput(r);if(a instanceof Wl){var i=Qx(a)?a:a.expandDims();return i=function(e,t){return void 0===t&&(t=!1),hd((function(){var n=e.shape.slice(1),r=n[0],a=n[1];if(r===a)return e;var i=Math.abs(r-a),o=Math.round(i*(t?.5:1)),s=r>a?2:1,u=function(t){var n=e.shape.slice();return n[s]=t,Vd(n,0)},l=u(o),c=i-l.shape[s],d=[t&&c?u(c):null,e,l].filter((function(e){return!!e})).map((function(e){return e.toFloat()}));return Kd(d,s)}))}(i,t),i.shape[1]===e&&i.shape[2]===e||(i=sw.resizeBilinear(i,[e,e])),i.as3D(e,e,3)}if(a instanceof Rk.getEnv().Canvas)return _x.fromPixels(function(e,t,n){void 0===n&&(n=!1);var r=Rk.getEnv(),a=r.Image,i=r.Canvas;if(!(e instanceof a||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=Lk(e),s=t/Math.max(o.height,o.width),u=s*o.width,l=s*o.height,c=Bk({width:t,height:t}),d=e instanceof i?e:jk(e),h=Math.abs(u-l)/2,f=n&&u<l?h:0,p=n&&l<u?h:0;return Dk(c).drawImage(d,f,p,u,l),c}(a,e,t));throw new Error("toBatchTensor - at batchIdx "+r+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+a)})),a=Mh(r.map((function(e){return e.toFloat()}))).as4D(n.batchSize,e,e,3);return a}))},e}();function Wk(e){return Gx(this,void 0,void 0,(function(){var t,n,r;return Kx(this,(function(a){switch(a.label){case 0:if(e instanceof Vk)return[2,e];if(!(t=Array.isArray(e)?e:[e]).length)throw new Error("toNetInput - empty array passed as input");return n=function(t){return Array.isArray(e)?" at input index "+t+":":""},(r=t.map(Nk)).forEach((function(e,r){if(!Uk(e)&&!Zx(e)&&!Qx(e)){if("string"===typeof t[r])throw new Error("toNetInput -"+n(r)+" string passed, but could not resolve HTMLElement for element id "+t[r]);throw new Error("toNetInput -"+n(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(Qx(e)){var a=e.shape[0];if(1!==a)throw new Error("toNetInput -"+n(r)+" tf.Tensor4D with batchSize "+a+" passed, but not supported in input array")}})),[4,Promise.all(r.map((function(e){return Uk(e)&&(t=e,new Promise((function(e,n){if(t instanceof Rk.getEnv().Canvas||Fk(t))return e();function r(t){t.currentTarget&&(t.currentTarget.removeEventListener("load",r),t.currentTarget.removeEventListener("error",a),e(t))}function a(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",a),n(e))}t.addEventListener("load",r),t.addEventListener("error",a)})));var t})))];case 1:return a.sent(),[2,new Vk(r,Array.isArray(e))]}}))}))}function Hk(e,t){return Gx(this,void 0,void 0,(function(){var n,r,a,i,o,s;return Kx(this,(function(u){switch(u.label){case 0:return n=Rk.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,Wk(e)];case 1:if((a=u.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return(i=a.getInput(0))instanceof n?(o=i,[3,4]):[3,2];case 2:return[4,zk(i)];case 3:o=u.sent(),u.label=4;case 4:r=o,u.label=5;case 5:return s=Dk(r),[2,t.map((function(e){return e instanceof uk?e.forSize(r.width,r.height).box.floor():e})).map((function(e){return e.clipAtImageBorders(r.width,r.height)})).map((function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=Bk({width:r,height:a});return Dk(i).putImageData(s.getImageData(t,n,r,a),0,0),i}))]}}))}))}function Gk(e,t){return Gx(this,void 0,void 0,(function(){return Kx(this,(function(n){if(!Zx(e)&&!Qx(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Qx(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,hd((function(){var n=e.shape.slice(Qx(e)?1:0),r=n[0],a=n[1],i=n[2],o=t.map((function(e){return e instanceof uk?e.forSize(a,r).box:e})).map((function(e){return e.clipAtImageBorders(a,r)})).map((function(t){var n=t.x,o=t.y,s=t.width,u=t.height;return qy(e.as3D(r,a,i),[o,n,0],[u,s,i])}));return o}))]}))}))}function Kk(e,t){return Gx(this,void 0,void 0,(function(){var n;return Kx(this,(function(r){switch(r.label){case 0:return[4,(0,Rk.getEnv().fetch)(e,t)];case 1:if(!((n=r.sent()).status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}}))}))}function Xk(e){return Gx(this,void 0,void 0,(function(){return Kx(this,(function(t){switch(t.label){case 0:return[4,Kk(e)];case 1:return[2,t.sent().json()]}}))}))}function Yk(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",a=(e=e.replace(r,"")).split("/").filter((function(e){return e})),i=e.endsWith(".json")?a[a.length-1]:n,o=r+(e.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return{modelBaseUri:o=e.startsWith("/")?"/"+o:o,manifestUri:"/"===o?"/"+i:o+"/"+i}}function qk(e,t){return Gx(this,void 0,void 0,(function(){var n,r,a,i;return Kx(this,(function(o){switch(o.label){case 0:return n=Yk(e,t),r=n.manifestUri,a=n.modelBaseUri,[4,Xk(r)];case 1:return i=o.sent(),[2,Cx.loadWeights(i,a)]}}))}))}var Zk=function(){function e(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e);return t.obj[t.objProp]},e.prototype.reassignParamFromPath=function(e,t){var n=this.traversePropertyPath(e),r=n.obj,a=n.objProp;r[a].dispose(),r[a]=t},e.prototype.getParamList=function(){var e=this;return this._paramMappings.map((function(t){var n=t.paramPath;return{path:n,tensor:e.getParamFromPath(n)}}))},e.prototype.getTrainableParams=function(){return this.getParamList().filter((function(e){return e.tensor instanceof Zl}))},e.prototype.getFrozenParams=function(){return this.getParamList().filter((function(e){return!(e.tensor instanceof Zl)}))},e.prototype.variable=function(){var e=this;this.getFrozenParams().forEach((function(t){var n=t.path,r=t.tensor;e.reassignParamFromPath(n,r.variable())}))},e.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach((function(t){var n=t.path,r=t.tensor,a=Md(r.dataSync());r.dispose(),e.reassignParamFromPath(n,a)}))},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.getParamList().forEach((function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()})),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map((function(e){var t=e.tensor;return Array.from(t.dataSync())})).reduce((function(e,t){return e.concat(t)})))},e.prototype.load=function(e){return Gx(this,void 0,void 0,(function(){return Kx(this,(function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.loadFromUri=function(e){return Gx(this,void 0,void 0,(function(){var t;return Kx(this,(function(n){switch(n.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromUri - expected model uri");return[4,qk(e,this.getDefaultModelName())];case 1:return t=n.sent(),this.loadFromWeightMap(t),[2]}}))}))},e.prototype.loadFromDisk=function(e){return Gx(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,u,l,c;return Kx(this,(function(d){switch(d.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromDisk - expected model file path");return t=Rk.getEnv().readFile,n=Yk(e,this.getDefaultModelName()),r=n.manifestUri,a=n.modelBaseUri,i=function(e){return Promise.all(e.map((function(e){return t(e).then((function(e){return e.buffer}))})))},o=Cx.weightsLoaderFactory(i),l=(u=JSON).parse,[4,t(r)];case 1:return s=l.apply(u,[d.sent().toString()]),[4,o(s,a)];case 2:return c=d.sent(),this.loadFromWeightMap(c),[2]}}))}))},e.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.extractWeights=function(e){var t=this.extractParams(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce((function(t,n){if(!t.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property "+n+", for path "+e);return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}}),{nextObj:this.params}),n=t.obj,r=t.objProp;if(!n||!r||!(n[r]instanceof Wl))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:n,objProp:r}},e}();function Qk(e,t,n){return hd((function(){var r=Iy(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=Og(r,t.bias)}))}function Jk(e,t,n){return void 0===n&&(n=!1),hd((function(){var r=hb(n?Og(xy(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):Qk(e,t.conv0,[2,2])),a=Qk(r,t.conv1,[1,1]),i=Qk(hb(Og(r,a)),t.conv2,[1,1]);return hb(Og(r,Og(a,i)))}))}function $k(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!0),hd((function(){var a=hb(n?Og(xy(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):Qk(e,t.conv0,r?[2,2]:[1,1])),i=Qk(a,t.conv1,[1,1]),o=Qk(hb(Og(a,i)),t.conv2,[1,1]),s=Qk(hb(Og(a,Og(i,o))),t.conv3,[1,1]);return hb(Og(a,Og(i,Og(o,s))))}))}function eC(e,t,n,r){return void 0===n&&(n="same"),void 0===r&&(r=!1),hd((function(){var a=Og(xy(e,t.filters,[1,1],n),t.bias);return r?hb(a):a}))}function tC(e,t){Object.keys(e).forEach((function(n){t.some((function(e){return e.originalPath===n}))||e[n].dispose()}))}function nC(e,t){return function(n,r,a,i){var o=jd(e(n*r*a*a),[a,a,n,r]),s=Fd(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:o,bias:s}}}function rC(e,t){return function(n,r,a){var i=Ld(e(n*r),[n,r]),o=Fd(e(r));return t.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:i,bias:o}}}var aC=function(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n};function iC(e,t){return function(n,r,a){var i=jd(e(9*n),[3,3,n,1]),o=jd(e(n*r),[1,1,n,r]),s=Fd(e(r));return t.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new aC(i,o,s)}}function oC(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),a=e(t+"/bias",1);return new aC(n,r,a)}}function sC(e,t){return function(n,r,a){var i=e[n];if(!qx(i,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+i);return t.push({originalPath:n,paramPath:a||n}),i}}function uC(e){var t=e;return{extractWeights:function(e){var n=t.slice(0,e);return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function lC(e,t){var n=nC(e,t),r=iC(e,t);function a(e,t,a,i){return void 0===i&&(i=!1),{conv0:i?n(e,t,3,a+"/conv0"):r(e,t,a+"/conv0"),conv1:r(t,t,a+"/conv1"),conv2:r(t,t,a+"/conv2")}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:function(e,t,n,i){void 0===i&&(i=!1);var o=a(e,t,n,i);return{conv0:o.conv0,conv1:o.conv1,conv2:o.conv2,conv3:r(t,t,n+"/conv3")}}}}function cC(e){return function(t){return{filters:e(t+"/filters",4),bias:e(t+"/bias",1)}}}function dC(e,t){var n=sC(e,t),r=cC(n),a=oC(n);return{extractDenseBlock3Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):a(e+"/conv0"),conv1:a(e+"/conv1"),conv2:a(e+"/conv2")}},extractDenseBlock4Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):a(e+"/conv0"),conv1:a(e+"/conv1"),conv2:a(e+"/conv2"),conv3:a(e+"/conv3")}}}}var hC=function(e){function t(){return e.call(this,"FaceFeatureExtractor")||this}return Wx(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return hd((function(){var n=$k(dk(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Pd(255)),t.dense0,!0);return n=$k(n,t.dense1),n=$k(n,t.dense2),n=$k(n,t.dense3),n=Vy(n,[7,7],[2,2],"valid")}))},t.prototype.forward=function(e){return Gx(this,void 0,void 0,(function(){var t;return Kx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Wk(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=dC(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return tC(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=uC(e),r=n.extractWeights,a=n.getRemainingWeights,i=lC(r,t).extractDenseBlock4Params,o=i(3,32,"dense0",!0),s=i(32,64,"dense1"),u=i(64,128,"dense2"),l=i(128,256,"dense3");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{dense0:o,dense1:s,dense2:u,dense3:l}}}(e)},t}(Zk);function fC(e,t){return hd((function(){return Og(Ny(e,t.weights),t.bias)}))}function pC(e){var t={},n={};return Object.keys(e).forEach((function(r){(r.startsWith("fc")?n:t)[r]=e[r]})),{featureExtractorMap:t,classifierMap:n}}var mC=function(e){function t(t,n){var r=e.call(this,t)||this;return r._faceFeatureExtractor=n,r}return Wx(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return hd((function(){var r=e instanceof Vk?t.faceFeatureExtractor.forwardInput(e):e;return fC(r.as2D(r.shape[0],-1),n.fc)}))},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e,t,n){var r=[],a=uC(e),i=a.extractWeights,o=a.getRemainingWeights,s=rC(i,r)(t,n,"fc");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:s}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(e){var t=pC(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=sC(e,t),r={fc:function(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}("fc")};return tC(e,t),{params:r,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,a=e.slice(0,e.length-r),i=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(i)},t}(Zk),vC=["neutral","happy","sad","angry","fearful","disgusted","surprised"],gC=function(){function e(e){var t=this;if(7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);vC.forEach((function(n,r){t[n]=e[r]}))}return e.prototype.asSortedArray=function(){var e=this;return vC.map((function(t){return{expression:t,probability:e[t]}})).sort((function(e,t){return t.probability-e.probability}))},e}(),yC=function(e){function t(t){return void 0===t&&(t=new hC),e.call(this,"FaceExpressionNet",t)||this}return Wx(t,e),t.prototype.forwardInput=function(e){var t=this;return hd((function(){return tf(t.runNet(e))}))},t.prototype.forward=function(e){return Gx(this,void 0,void 0,(function(){var t;return Kx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Wk(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictExpressions=function(e){return Gx(this,void 0,void 0,(function(){var t,n,r,a,i=this;return Kx(this,(function(o){switch(o.label){case 0:return[4,Wk(e)];case 1:return t=o.sent(),[4,this.forwardInput(t)];case 2:return n=o.sent(),[4,Promise.all(Fh(n).map((function(e){return Gx(i,void 0,void 0,(function(){var t;return Kx(this,(function(n){switch(n.label){case 0:return[4,e.data()];case 1:return t=n.sent(),e.dispose(),[2,t]}}))}))})))];case 3:return r=o.sent(),n.dispose(),a=r.map((function(e){return new gC(e)})),[2,t.isBatchInput?a:a[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(mC);function bC(e,t){var n={expressions:t};return Object.assign({},e,n)}function wC(e){return function(e){return e.detection instanceof uk}(e)&&e.landmarks instanceof mk&&e.unshiftedLandmarks instanceof mk&&e.alignedRect instanceof uk}function xC(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),a=r.align(),i=e.detection.imageDims,o={landmarks:r,unshiftedLandmarks:t,alignedRect:new uk(e.detection.score,a.rescale(i.reverse()),i)};return Object.assign({},e,o)}function kC(e,t,n){if(void 0===n&&(n=!1),e.beginPath(),t.slice(1).forEach((function(n,r){var a=n.x,i=n.y,o=t[r];e.moveTo(o.x,o.y),e.lineTo(a,i)})),n){var r=t[t.length-1],a=t[0];if(!r||!a)return;e.moveTo(r.x,r.y),e.lineTo(a.x,a.y)}e.stroke()}var CC=function(e){void 0===e&&(e={});var t=e.drawLines,n=void 0===t||t,r=e.drawPoints,a=void 0===r||r,i=e.lineWidth,o=e.lineColor,s=e.pointSize,u=e.pointColor;this.drawLines=n,this.drawPoints=a,this.lineWidth=i||1,this.pointSize=s||2,this.lineColor=o||"rgba(0, 255, 255, 1)",this.pointColor=u||"rgba(255, 0, 255, 1)"};!function(){function e(e,t){void 0===t&&(t={}),this.faceLandmarks=e,this.options=new CC(t)}e.prototype.draw=function(e){var t=Dk(e),n=this.options,r=n.drawLines,a=n.drawPoints,i=n.lineWidth,o=n.lineColor,s=n.pointSize,u=n.pointColor;if(r&&this.faceLandmarks instanceof gk&&(t.strokeStyle=o,t.lineWidth=i,kC(t,this.faceLandmarks.getJawOutline()),kC(t,this.faceLandmarks.getLeftEyeBrow()),kC(t,this.faceLandmarks.getRightEyeBrow()),kC(t,this.faceLandmarks.getNose()),kC(t,this.faceLandmarks.getLeftEye(),!0),kC(t,this.faceLandmarks.getRightEye(),!0),kC(t,this.faceLandmarks.getMouth(),!0)),a){t.strokeStyle=u,t.fillStyle=u;this.faceLandmarks.positions.forEach((function(e){t.beginPath(),t.arc(e.x,e.y,s,0,2*Math.PI),t.fill()}))}}}();function EC(e,t){var n=[],r=uC(e),a=r.extractWeights,i=r.getRemainingWeights,o=function(e,t){var n=nC(e,t),r=iC(e,t);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(e,t,a){return{separable_conv0:r(e,t,a+"/separable_conv0"),separable_conv1:r(t,t,a+"/separable_conv1"),expansion_conv:n(e,t,1,a+"/expansion_conv")}},extractMainBlockParams:function(e,t){return{separable_conv0:r(e,e,t+"/separable_conv0"),separable_conv1:r(e,e,t+"/separable_conv1"),separable_conv2:r(e,e,t+"/separable_conv2")}}}}(a,n),s=o.extractConvParams,u=o.extractSeparableConvParams,l=o.extractReductionBlockParams,c=o.extractMainBlockParams,d={conv_in:s(3,32,3,"entry_flow/conv_in"),reduction_block_0:l(32,64,"entry_flow/reduction_block_0"),reduction_block_1:l(64,128,"entry_flow/reduction_block_1")},h={};tk(t,0,1).forEach((function(e){h["main_block_"+e]=c(128,"middle_flow/main_block_"+e)}));var f={reduction_block:l(128,256,"exit_flow/reduction_block"),separable_conv:u(256,512,"exit_flow/separable_conv")};if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{entry_flow:d,middle_flow:h,exit_flow:f}}}function SC(e,t){var n=[],r=function(e,t){var n=sC(e,t),r=cC(n),a=oC(n);return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:function(e){return{separable_conv0:a(e+"/separable_conv0"),separable_conv1:a(e+"/separable_conv1"),expansion_conv:r(e+"/expansion_conv")}},extractMainBlockParams:function(e){return{separable_conv0:a(e+"/separable_conv0"),separable_conv1:a(e+"/separable_conv1"),separable_conv2:a(e+"/separable_conv2")}}}}(e,n),a=r.extractConvParams,i=r.extractSeparableConvParams,o=r.extractReductionBlockParams,s=r.extractMainBlockParams,u={conv_in:a("entry_flow/conv_in"),reduction_block_0:o("entry_flow/reduction_block_0"),reduction_block_1:o("entry_flow/reduction_block_1")},l={};tk(t,0,1).forEach((function(e){l["main_block_"+e]=s("middle_flow/main_block_"+e)}));var c={reduction_block:o("exit_flow/reduction_block"),separable_conv:i("exit_flow/separable_conv")};return tC(e,n),{params:{entry_flow:u,middle_flow:l,exit_flow:c},paramMappings:n}}function _C(e,t,n){return Og(xy(e,t.filters,n,"same"),t.bias)}function AC(e,t,n){void 0===n&&(n=!0);var r=n?hb(e):e;return r=Qk(r,t.separable_conv0,[1,1]),r=Qk(hb(r),t.separable_conv1,[1,1]),r=Uy(r,[3,3],[2,2],"same"),r=Og(r,_C(e,t.expansion_conv,[2,2]))}var IC,TC=function(e){function t(t){var n=e.call(this,"TinyXception")||this;return n._numMainBlocks=t,n}return Wx(t,e),t.prototype.forwardInput=function(e){var t=this,n=this.params;if(!n)throw new Error("TinyXception - load model before inference");return hd((function(){var r=dk(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Pd(256)),a=hb(_C(r,n.entry_flow.conv_in,[2,2]));return a=AC(a,n.entry_flow.reduction_block_0,!1),a=AC(a,n.entry_flow.reduction_block_1),tk(t._numMainBlocks,0,1).forEach((function(e){a=function(e,t){var n=Qk(hb(e),t.separable_conv0,[1,1]);return n=Qk(hb(n),t.separable_conv1,[1,1]),n=Qk(hb(n),t.separable_conv2,[1,1]),Og(n,e)}(a,n.middle_flow["main_block_"+e])})),a=AC(a,n.exit_flow.reduction_block),a=hb(Qk(a,n.exit_flow.separable_conv,[1,1]))}))},t.prototype.forward=function(e){return Gx(this,void 0,void 0,(function(){var t;return Kx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Wk(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(e){return SC(e,this._numMainBlocks)},t.prototype.extractParams=function(e){return EC(e,this._numMainBlocks)},t}(Zk);!function(e){e.FEMALE="female",e.MALE="male"}(IC||(IC={}));var RC=function(e){function t(t){void 0===t&&(t=new TC(2));var n=e.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=t,n}return Wx(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return hd((function(){var r=e instanceof Vk?t.faceFeatureExtractor.forwardInput(e):e,a=Vy(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1);return{age:fC(a,n.fc.age).as1D(),gender:fC(a,n.fc.gender)}}))},t.prototype.forwardInput=function(e){var t=this;return hd((function(){var n=t.runNet(e),r=n.age,a=n.gender;return{age:r,gender:tf(a)}}))},t.prototype.forward=function(e){return Gx(this,void 0,void 0,(function(){var t;return Kx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Wk(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictAgeAndGender=function(e){return Gx(this,void 0,void 0,(function(){var t,n,r,a,i,o,s=this;return Kx(this,(function(u){switch(u.label){case 0:return[4,Wk(e)];case 1:return t=u.sent(),[4,this.forwardInput(t)];case 2:return n=u.sent(),r=Fh(n.age),a=Fh(n.gender),i=r.map((function(e,t){return{ageTensor:e,genderTensor:a[t]}})),[4,Promise.all(i.map((function(e){var t=e.ageTensor,n=e.genderTensor;return Gx(s,void 0,void 0,(function(){var e,r,a,i,o;return Kx(this,(function(s){switch(s.label){case 0:return[4,t.data()];case 1:return e=s.sent()[0],[4,n.data()];case 2:return r=s.sent()[0],i=(a=r>.5)?IC.MALE:IC.FEMALE,o=a?r:1-r,t.dispose(),n.dispose(),[2,{age:e,gender:i,genderProbability:o}]}}))}))})))];case 3:return o=u.sent(),n.age.dispose(),n.gender.dispose(),[2,t.isBatchInput?o:o[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e){var t=[],n=uC(e),r=n.extractWeights,a=n.getRemainingWeights,i=rC(r,t),o=i(512,1,"fc/age"),s=i(512,2,"fc/gender");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{fc:{age:o,gender:s}}}}(e)},t.prototype.extractParamsFromWeigthMap=function(e){var t=pC(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=sC(e,t);function r(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return tC(e,t),{params:a,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)},t}(Zk),NC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wx(t,e),t.prototype.postProcess=function(e,t,n){var r=n.map((function(e){var n=e.width,r=e.height,a=t/Math.max(r,n);return{width:n*a,height:r*a}})),a=r.length;return hd((function(){var n=function(e,t){return Mh([Vd([68],e),Vd([68],t)],1).as2D(1,136).as1D()},i=function(e,t){var n=r[e],a=n.width,i=n.height;return t(a,i)?Math.abs(a-i)/2:0},o=e.mul(Vd([a,136],t)).sub(Mh(Array.from(Array(a),(function(e,t){return n(function(e){return i(e,(function(e,t){return e<t}))}(t),function(e){return i(e,(function(e,t){return t<e}))}(t))})))).div(Mh(Array.from(Array(a),(function(e,t){return n(r[t].width,r[t].height)}))));return o}))},t.prototype.forwardInput=function(e){var t=this;return hd((function(){var n=t.runNet(e);return t.postProcess(n,e.inputSize,e.inputDimensions.map((function(e){return{height:e[0],width:e[1]}})))}))},t.prototype.forward=function(e){return Gx(this,void 0,void 0,(function(){var t;return Kx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Wk(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.detectLandmarks=function(e){return Gx(this,void 0,void 0,(function(){var t,n,r,a=this;return Kx(this,(function(i){switch(i.label){case 0:return[4,Wk(e)];case 1:return t=i.sent(),n=hd((function(){return Fh(a.forwardInput(t))})),[4,Promise.all(n.map((function(e,n){return Gx(a,void 0,void 0,(function(){var r,a,i,o,s;return Kx(this,(function(u){switch(u.label){case 0:return i=(a=Array).from,[4,e.data()];case 1:return r=i.apply(a,[u.sent()]),o=r.filter((function(e,t){return Jx(t)})),s=r.filter((function(e,t){return!Jx(t)})),[2,new gk(Array(68).fill(0).map((function(e,t){return new ak(o[t],s[t])})),{height:t.getInputHeight(n),width:t.getInputWidth(n)})]}}))}))})))];case 2:return r=i.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getClassifierChannelsOut=function(){return 136},t}(mC),DC=function(e){function t(t){return void 0===t&&(t=new hC),e.call(this,"FaceLandmark68Net",t)||this}return Wx(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(NC);var MC=function(e){function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return Wx(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return hd((function(){var n=Jk(dk(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Pd(255)),t.dense0,!0);return n=Jk(n,t.dense1),n=Jk(n,t.dense2),n=Vy(n,[14,14],[2,2],"valid")}))},t.prototype.forward=function(e){return Gx(this,void 0,void 0,(function(){var t;return Kx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Wk(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=dC(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return tC(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=uC(e),r=n.extractWeights,a=n.getRemainingWeights,i=lC(r,t).extractDenseBlock3Params,o=i(3,32,"dense0",!0),s=i(32,64,"dense1"),u=i(64,128,"dense2");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{dense0:o,dense1:s,dense2:u}}}(e)},t}(Zk),OC=function(e){function t(t){return void 0===t&&(t=new MC),e.call(this,"FaceLandmark68TinyNet",t)||this}return Wx(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(NC);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wx(t,e)}(DC);function PC(e,t,n,r,a){void 0===a&&(a="same");var i=t.conv,o=i.filters,s=i.bias,u=xy(e,o,n,a);return u=function(e,t){return Og(Yg(e,t.weights),t.biases)}(u=Og(u,s),t.scale),r?hb(u):u}function FC(e,t){return PC(e,t,[1,1],!1)}function LC(e,t){return PC(e,t,[2,2],!0,"valid")}function BC(e,t){function n(n,r,a,i){var o=function(t,n,r){var a=e(t),i=a.length/(n*r*r);if(i%1!==0)throw new Error("depth has to be an integer: "+i+", weights.length: "+a.length+", numFilters: "+n+", filterSize: "+r);return hd((function(){return mb(jd(a,[n,i,r,r]),[2,3,1,0])}))}(n,r,a),s=Fd(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:o,bias:s}}function r(r,a,i,o){var s=n(r,a,i,o+"/conv"),u=function(n,r){var a=Fd(e(n)),i=Fd(e(n));return t.push({paramPath:r+"/weights"},{paramPath:r+"/biases"}),{weights:a,biases:i}}(a,o+"/scale");return{conv:s,scale:u}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e,t,n,a,i){return void 0===i&&(i=!1),{conv1:r((i?.5:1)*e,t,n,a+"/conv1"),conv2:r(e,t,n,a+"/conv2")}}}}function jC(e,t){var n=sC(e,t);function r(e){var t=n(e+"/conv/filters",4),r=n(e+"/conv/bias",1),a=function(e){return{weights:n(e+"/scale/weights",1),biases:n(e+"/scale/biases",1)}}(e);return{conv:{filters:t,bias:r},scale:a}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e){return{conv1:r(e+"/conv1"),conv2:r(e+"/conv2")}}}}function zC(e){var t=[],n=jC(e,t),r=n.extractConvLayerParams,a=n.extractResidualLayerParams,i=r("conv32_down"),o=a("conv32_1"),s=a("conv32_2"),u=a("conv32_3"),l=a("conv64_down"),c=a("conv64_1"),d=a("conv64_2"),h=a("conv64_3"),f=a("conv128_down"),p=a("conv128_1"),m=a("conv128_2"),v=a("conv256_down"),g=a("conv256_1"),y=a("conv256_2"),b=a("conv256_down_out"),w=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!qx(w,2))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+w);var x={conv32_down:i,conv32_1:o,conv32_2:s,conv32_3:u,conv64_down:l,conv64_1:c,conv64_2:d,conv64_3:h,conv128_down:f,conv128_1:p,conv128_2:m,conv256_down:v,conv256_1:g,conv256_2:y,conv256_down_out:b,fc:w};return tC(e,t),{params:x,paramMappings:t}}function UC(e,t){var n=function(e,t){return PC(e,t,[1,1],!0)}(e,t.conv1);return n=FC(n,t.conv2),n=Og(n,e),n=hb(n)}function VC(e,t){var n=LC(e,t.conv1);n=FC(n,t.conv2);var r=Vy(e,2,2,"valid"),a=Ud(r.shape),i=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){var o=Xx(n.shape);o[1]=1;var s=Ud(o),u=Xx((n=Kd([n,s],1)).shape);u[2]=1;var l=Ud(u);n=Kd([n,l],2)}return r=i?Kd([r,a],3):r,n=Og(r,n),n=hb(n)}var WC=function(e){function t(){return e.call(this,"FaceRecognitionNet")||this}return Wx(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return hd((function(){var n=LC(dk(e.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(Pd(256)),t.conv32_down);n=UC(n=Uy(n,3,2,"valid"),t.conv32_1),n=UC(n,t.conv32_2),n=UC(n,t.conv32_3),n=UC(n=VC(n,t.conv64_down),t.conv64_1),n=UC(n,t.conv64_2),n=UC(n,t.conv64_3),n=UC(n=VC(n,t.conv128_down),t.conv128_1),n=UC(n,t.conv128_2),n=UC(n=VC(n,t.conv256_down),t.conv256_1);var r=(n=VC(n=UC(n,t.conv256_2),t.conv256_down_out)).mean([1,2]);return Ny(r,t.fc)}))},t.prototype.forward=function(e){return Gx(this,void 0,void 0,(function(){var t;return Kx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Wk(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.computeFaceDescriptor=function(e){return Gx(this,void 0,void 0,(function(){var t,n,r,a=this;return Kx(this,(function(i){switch(i.label){case 0:return[4,Wk(e)];case 1:return t=i.sent(),n=hd((function(){return Fh(a.forwardInput(t))})),[4,Promise.all(n.map((function(e){return e.data()})))];case 2:return r=i.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(e){return zC(e)},t.prototype.extractParams=function(e){return function(e){var t=uC(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],i=BC(n,a),o=i.extractConvLayerParams,s=i.extractResidualLayerParams,u=o(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),d=s(9216,32,3,"conv32_3"),h=s(36864,64,3,"conv64_down",!0),f=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),m=s(36864,64,3,"conv64_3"),v=s(147456,128,3,"conv128_down",!0),g=s(147456,128,3,"conv128_1"),y=s(147456,128,3,"conv128_2"),b=s(589824,256,3,"conv256_down",!0),w=s(589824,256,3,"conv256_1"),x=s(589824,256,3,"conv256_2"),k=s(589824,256,3,"conv256_down_out"),C=hd((function(){return mb(Ld(n(32768),[128,256]),[1,0])}));if(a.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{conv32_down:u,conv32_1:l,conv32_2:c,conv32_3:d,conv64_down:h,conv64_1:f,conv64_2:p,conv64_3:m,conv128_down:v,conv128_1:g,conv128_2:y,conv256_down:b,conv256_1:w,conv256_2:x,conv256_down_out:k,fc:C},paramMappings:a}}(e)},t}(Zk);function HC(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var GC=function(){function e(e){var t=void 0===e?{}:e,n=t.minFaceSize,r=t.scaleFactor,a=t.maxNumScales,i=t.scoreThresholds,o=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=a||10,this._scoreThresholds=i||[.6,.7,.7],this._scaleSteps=o,"number"!==typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!==typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!==typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some((function(e){return"number"!==typeof e})))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some((function(e){return"number"!==typeof e}))))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function KC(e,t){function n(n,r,a,i,o){var s=jd(e(n*r*a*a),[a,a,n,r]),u=Fd(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/"+(o?"batch_norm_offset":"bias")}),{filters:s,bias:u}}function r(e,t,r,a){var i=n(e,t,r,a,!0);return{filters:i.filters,batch_norm_offset:i.bias}}function a(n,a,i){var o=function(n,r){var a=jd(e(9*n),[3,3,n,1]),i=Fd(e(n)),o=Fd(e(n)),s=Fd(e(n)),u=Fd(e(n));return t.push({paramPath:r+"/filters"},{paramPath:r+"/batch_norm_scale"},{paramPath:r+"/batch_norm_offset"},{paramPath:r+"/batch_norm_mean"},{paramPath:r+"/batch_norm_variance"}),{filters:a,batch_norm_scale:i,batch_norm_offset:o,batch_norm_mean:s,batch_norm_variance:u}}(n,i+"/depthwise_conv");return{depthwise_conv:o,pointwise_conv:r(n,a,1,i+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:a(32,64,"mobilenetv1/conv_1"),conv_2:a(64,128,"mobilenetv1/conv_2"),conv_3:a(128,128,"mobilenetv1/conv_3"),conv_4:a(128,256,"mobilenetv1/conv_4"),conv_5:a(256,256,"mobilenetv1/conv_5"),conv_6:a(256,512,"mobilenetv1/conv_6"),conv_7:a(512,512,"mobilenetv1/conv_7"),conv_8:a(512,512,"mobilenetv1/conv_8"),conv_9:a(512,512,"mobilenetv1/conv_9"),conv_10:a(512,512,"mobilenetv1/conv_10"),conv_11:a(512,512,"mobilenetv1/conv_11"),conv_12:a(512,1024,"mobilenetv1/conv_12"),conv_13:a(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}function XC(e){var t=[],n=function(e,t){var n=sC(e,t);function r(e,t,r){return{filters:n(e+"/Conv2d_"+t+"_pointwise/weights",4,r+"/filters"),batch_norm_offset:n(e+"/Conv2d_"+t+"_pointwise/convolution_bn_offset",1,r+"/batch_norm_offset")}}function a(e){var t="mobilenetv1/conv_"+e,a="MobilenetV1/Conv2d_"+e+"_depthwise",i=t+"/depthwise_conv",o=t+"/pointwise_conv";return{depthwise_conv:{filters:n(a+"/depthwise_weights",4,i+"/filters"),batch_norm_scale:n(a+"/BatchNorm/gamma",1,i+"/batch_norm_scale"),batch_norm_offset:n(a+"/BatchNorm/beta",1,i+"/batch_norm_offset"),batch_norm_mean:n(a+"/BatchNorm/moving_mean",1,i+"/batch_norm_mean"),batch_norm_variance:n(a+"/BatchNorm/moving_variance",1,i+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",e,o)}}function i(e,t){return{filters:n(e+"/weights",4,t+"/filters"),bias:n(e+"/biases",1,t+"/bias")}}function o(e){return{box_encoding_predictor:i("Prediction/BoxPredictor_"+e+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+e+"/box_encoding_predictor"),class_predictor:i("Prediction/BoxPredictor_"+e+"/ClassPredictor","prediction_layer/box_predictor_"+e+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:o(0),box_predictor_1:o(1),box_predictor_2:o(2),box_predictor_3:o(3),box_predictor_4:o(4),box_predictor_5:o(5)}}}}(e,t),r=n.extractMobilenetV1Params,a=n.extractPredictionLayerParams,i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!Zx(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var o={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:i}};return tC(e,t),{params:o,paramMappings:t}}function YC(e,t,n){return hd((function(){var r=xy(e,t.filters,n,"same");return r=Og(r,t.batch_norm_offset),Vv(r,0,6)}))}function qC(e,t){return hd((function(){var n=null,r=YC(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach((function(e,t){var a=t+1,i=function(e){return[2,4,6,12].some((function(t){return t===e}))?[2,2]:[1,1]}(a);r=function(e,t,n){return hd((function(){var r=Sy(e,t.filters,n,"same");return r=Eg(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,.0010000000474974513),Vv(r,0,6)}))}(r,e.depthwise_conv,i),r=YC(r,e.pointwise_conv,[1,1]),11===a&&(n=r)})),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}}))}function ZC(e,t,n){var r=e.arraySync(),a=Math.min(r[t][0],r[t][2]),i=Math.min(r[t][1],r[t][3]),o=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),u=Math.min(r[n][0],r[n][2]),l=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),d=Math.max(r[n][1],r[n][3]),h=(o-a)*(s-i),f=(c-u)*(d-l);if(h<=0||f<=0)return 0;var p=Math.max(a,u),m=Math.max(i,l),v=Math.min(o,c),g=Math.min(s,d),y=Math.max(v-p,0)*Math.max(g-m,0);return y/(h+f-y)}function QC(e,t){var n=function(e){var t=Fh(mb(e,[1,0])),n=[$g(t[2],t[0]),$g(t[3],t[1])];return{sizes:n,centers:[Og(t[0],Bg(n[0],Pd(2))),Og(t[1],Bg(n[1],Pd(2)))]}}(e),r=n.sizes,a=n.centers,i=Fh(mb(t,[1,0])),o=Bg(Yg(Kv(Bg(i[2],Pd(5))),r[0]),Pd(2)),s=Og(Yg(Bg(i[0],Pd(10)),r[0]),a[0]),u=Bg(Yg(Kv(Bg(i[3],Pd(5))),r[1]),Pd(2)),l=Og(Yg(Bg(i[1],Pd(10)),r[1]),a[1]);return mb(Mh([$g(s,o),$g(l,u),Og(s,o),Og(l,u)]),[1,0])}function JC(e,t){return hd((function(){var n=e.shape[0];return{boxPredictionEncoding:Rh(eC(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:Rh(eC(e,t.class_predictor),[n,-1,3])}}))}var $C=function(){function e(e){var t=void 0===e?{}:e,n=t.minConfidence,r=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!==typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!==typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),eE=function(e){function t(){return e.call(this,"SsdMobilenetv1")||this}return Wx(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return hd((function(){var n=e.toBatchTensor(512,!1).toFloat(),r=qC($g(Yg(n,Pd(.007843137718737125)),Pd(1)),t.mobilenetv1),a=function(e,t,n){return hd((function(){var r=YC(e,n.conv_0,[1,1]),a=YC(r,n.conv_1,[2,2]),i=YC(a,n.conv_2,[1,1]),o=YC(i,n.conv_3,[2,2]),s=YC(o,n.conv_4,[1,1]),u=YC(s,n.conv_5,[2,2]),l=YC(u,n.conv_6,[1,1]),c=YC(l,n.conv_7,[2,2]),d=JC(t,n.box_predictor_0),h=JC(e,n.box_predictor_1),f=JC(a,n.box_predictor_2),p=JC(o,n.box_predictor_3),m=JC(u,n.box_predictor_4),v=JC(c,n.box_predictor_5);return{boxPredictions:Kd([d.boxPredictionEncoding,h.boxPredictionEncoding,f.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding,v.boxPredictionEncoding],1),classPredictions:Kd([d.classPrediction,h.classPrediction,f.classPrediction,p.classPrediction,m.classPrediction,v.classPrediction],1)}}))}(r.out,r.conv11,t.prediction_layer);return function(e,t,n){return hd((function(){var r=e.shape[0],a=QC(Rh(Oh(n.extra_dim,[r,1,1]),[-1,4]),Rh(e,[-1,4]));a=Rh(a,[r,a.shape[0]/r,4]);var i=ng(Ky(t,[0,0,1],[-1,-1,-1])),o=Ky(i,[0,0,0],[-1,-1,1]);return o=Rh(o,[r,o.shape[1]]),{boxes:Fh(a),scores:Fh(o)}}))}(a.boxPredictions,a.classPredictions,t.output_layer)}))},t.prototype.forward=function(e){return Gx(this,void 0,void 0,(function(){var t;return Kx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Wk(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.locateFaces=function(e,t){return void 0===t&&(t={}),Gx(this,void 0,void 0,(function(){var n,r,a,i,o,s,u,l,c,d,h,f,p,m,v,g,y,b,w,x;return Kx(this,(function(k){switch(k.label){case 0:return n=new $C(t),r=n.maxResults,a=n.minConfidence,[4,Wk(e)];case 1:for(i=k.sent(),o=this.forwardInput(i),s=o.boxes,u=o.scores,l=s[0],c=u[0],d=1;d<s.length;d++)s[d].dispose(),u[d].dispose();return p=(f=Array).from,[4,c.data()];case 2:return h=p.apply(f,[k.sent()]),.5,m=function(e,t,n,r,a){var i=e.shape[0],o=Math.min(n,i),s=t.map((function(e,t){return{score:e,boxIndex:t}})).filter((function(e){return e.score>a})).sort((function(e,t){return t.score-e.score})),u=function(e){return e<=r?1:0},l=[];return s.forEach((function(t){if(!(l.length>=o)){for(var n=t.score,r=l.length-1;r>=0;--r){var i=ZC(e,t.boxIndex,l[r]);if(0!==i&&(t.score*=u(i),t.score<=a))break}n===t.score&&l.push(t.boxIndex)}})),l}(l,h,r,.5,a),v=i.getReshapedInputDimensions(0),g=i.inputSize,y=g/v.width,b=g/v.height,w=l.arraySync(),x=m.map((function(e){var t=[Math.max(0,w[e][0]),Math.min(1,w[e][2])].map((function(e){return e*b})),n=t[0],r=t[1],a=[Math.max(0,w[e][1]),Math.min(1,w[e][3])].map((function(e){return e*y})),o=a[0],s=a[1];return new uk(h[e],new pk(o,n,s-o,r-n),{height:i.getInputHeight(0),width:i.getInputWidth(0)})})),l.dispose(),c.dispose(),[2,x]}}))}))},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(e){return XC(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=uC(e),r=n.extractWeights,a=n.getRemainingWeights,i=KC(r,t),o=i.extractMobilenetV1Params,s=i.extractPredictionLayerParams,u=o(),l=s(),c={extra_dim:Bd(r(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:c},paramMappings:t}}(e)},t}(Zk);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Wx(t,e)}(eE);var tE,nE=[new ak(.738768,.874946),new ak(2.42204,2.65704),new ak(4.30971,7.04493),new ak(10.246,4.59428),new ak(12.6868,11.8741)],rE=[new ak(1.603231,2.094468),new ak(6.041143,7.080126),new ak(2.882459,3.518061),new ak(4.266906,5.178857),new ak(9.041765,10.66308)],aE=[117.001,114.697,97.404],iE=function(e){return"number"===typeof e};function oE(e){return hd((function(){var t=Yg(e,Pd(.10000000149011612));return Og(hb($g(e,t)),t)}))}function sE(e,t){return hd((function(){var n=xh(e,[[0,0],[1,1],[1,1],[0,0]]);return n=xy(n,t.conv.filters,[1,1],"valid"),n=$g(n,t.bn.sub),n=Yg(n,t.bn.truediv),oE(n=Og(n,t.conv.bias))}))}function uE(e,t){return hd((function(){var n=xh(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Iy(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),oE(n=Og(n,t.bias))}))}function lE(e,t){var n=nC(e,t);var r=iC(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:function(r,a,i){var o=n(r,a,3,i+"/conv"),s=function(n,r){var a=Fd(e(n)),i=Fd(e(n));return t.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:a,truediv:i}}(a,i+"/bn");return{conv:o,bn:s}},extractSeparableConvParams:r}}function cE(e,t){var n=sC(e,t);function r(e){return{filters:n(e+"/filters",4),bias:n(e+"/bias",1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(e){var t=r(e+"/conv"),a=function(e){return{sub:n(e+"/sub",1),truediv:n(e+"/truediv",1)}}(e+"/bn");return{conv:t,bn:a}},extractSeparableConvParams:oC(n)}}!function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"}(tE||(tE={}));var dE=function(){function e(e){var t=void 0===e?{}:e,n=t.inputSize,r=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!==typeof this._inputSize||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!==typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),hE=function(e){function t(t){var n=e.call(this,"TinyYolov2")||this;return function(e){if(!e)throw new Error("invalid config: "+e);if("boolean"!==typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!iE(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every((function(e){return"string"===typeof e})))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map((function(e){return e||{}})).every((function(e){return iE(e.x)&&iE(e.y)})))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(iE)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}(t),n._config=t,n}return Wx(t,e),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(e,t){var n=sE(e,t.conv0);return n=sE(n=Uy(n,[2,2],[2,2],"same"),t.conv1),n=sE(n=Uy(n,[2,2],[2,2],"same"),t.conv2),n=sE(n=Uy(n,[2,2],[2,2],"same"),t.conv3),n=sE(n=Uy(n,[2,2],[2,2],"same"),t.conv4),n=sE(n=Uy(n,[2,2],[2,2],"same"),t.conv5),n=sE(n=Uy(n,[2,2],[1,1],"same"),t.conv6),eC(n=sE(n,t.conv7),t.conv8,"valid",!1)},t.prototype.runMobilenet=function(e,t){var n=this.config.isFirstLayerConv2d?oE(eC(e,t.conv0,"valid",!1)):uE(e,t.conv0);return n=uE(n=Uy(n,[2,2],[2,2],"same"),t.conv1),n=uE(n=Uy(n,[2,2],[2,2],"same"),t.conv2),n=uE(n=Uy(n,[2,2],[2,2],"same"),t.conv3),n=uE(n=Uy(n,[2,2],[2,2],"same"),t.conv4),n=uE(n=Uy(n,[2,2],[2,2],"same"),t.conv5),n=Uy(n,[2,2],[1,1],"same"),n=t.conv6?uE(n,t.conv6):n,eC(n=t.conv7?uE(n,t.conv7):n,t.conv8,"valid",!1)},t.prototype.forwardInput=function(e,t){var n=this,r=this.params;if(!r)throw new Error("TinyYolov2 - load model before inference");return hd((function(){var a=e.toBatchTensor(t,!1).toFloat();return a=(a=n.config.meanRgb?dk(a,n.config.meanRgb):a).div(Pd(256)),n.config.withSeparableConvs?n.runMobilenet(a,r):n.runTinyYolov2(a,r)}))},t.prototype.forward=function(e,t){return Gx(this,void 0,void 0,(function(){var n;return Kx(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Wk(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent()]}}))}))},t.prototype.detect=function(e,t){return void 0===t&&(t={}),Gx(this,void 0,void 0,(function(){var n,r,a,i,o,s,u,l,c,d,h,f,p,m=this;return Kx(this,(function(v){switch(v.label){case 0:return n=new dE(t),r=n.inputSize,a=n.scoreThreshold,[4,Wk(e)];case 1:return i=v.sent(),[4,this.forwardInput(i,r)];case 2:return o=v.sent(),s=hd((function(){return Fh(o)[0].expandDims()})),u={width:i.getInputWidth(0),height:i.getInputHeight(0)},[4,this.extractBoxes(s,i.getReshapedInputDimensions(0),a)];case 3:return l=v.sent(),o.dispose(),s.dispose(),c=l.map((function(e){return e.box})),d=l.map((function(e){return e.score})),h=l.map((function(e){return e.classScore})),f=l.map((function(e){return m.config.classes[e.label]})),p=ck(c.map((function(e){return e.rescale(r)})),d,this.config.iouThreshold,!0),[2,p.map((function(e){return new sk(d[e],h[e],f[e],c[e],u)}))]}}))}))},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(e){return function(e,t){var n,r=[],a=cE(e,r),i=a.extractConvParams,o=a.extractConvWithBatchNormParams,s=a.extractSeparableConvParams;if(t.withSeparableConvs){var u=t.filterSizes&&t.filterSizes.length||9;n={conv0:t.isFirstLayerConv2d?i("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:u>7?s("conv6"):void 0,conv7:u>8?s("conv7"):void 0,conv8:i("conv8")}}else n={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:i("conv8")};return tC(e,r),{params:n,paramMappings:r}}(e,this.config)},t.prototype.extractParams=function(e){var n=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return function(e,t,n,r){var a,i=uC(e),o=i.extractWeights,s=i.getRemainingWeights,u=[],l=lE(o,u),c=l.extractConvParams,d=l.extractConvWithBatchNormParams,h=l.extractSeparableConvParams;if(t.withSeparableConvs){var f=r[0],p=r[1],m=r[2],v=r[3],g=r[4],y=r[5],b=r[6],w=r[7],x=r[8];a={conv0:t.isFirstLayerConv2d?c(f,p,3,"conv0"):h(f,p,"conv0"),conv1:h(p,m,"conv1"),conv2:h(m,v,"conv2"),conv3:h(v,g,"conv3"),conv4:h(g,y,"conv4"),conv5:h(y,b,"conv5"),conv6:w?h(b,w,"conv6"):void 0,conv7:x?h(w,x,"conv7"):void 0,conv8:c(x||w||b,5*n,1,"conv8")}}else f=r[0],p=r[1],m=r[2],v=r[3],g=r[4],y=r[5],b=r[6],w=r[7],x=r[8],a={conv0:d(f,p,"conv0"),conv1:d(p,m,"conv1"),conv2:d(m,v,"conv2"),conv3:d(v,g,"conv3"),conv4:d(g,y,"conv4"),conv5:d(y,b,"conv5"),conv6:d(b,w,"conv6"),conv7:d(w,x,"conv7"),conv8:c(x,5*n,1,"conv8")};if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{params:a,paramMappings:u}}(e,this.config,this.boxEncodingSize,n)},t.prototype.extractBoxes=function(e,t,n){return Gx(this,void 0,void 0,(function(){var r,a,i,o,s,u,l,c,d,h,f,p,m,v,g,y,b,w,x,k,C,E,S,_,A,I,T,R,N,D=this;return Kx(this,(function(M){switch(M.label){case 0:return r=t.width,a=t.height,i=Math.max(r,a),o=i/r,s=i/a,u=e.shape[1],l=this.config.anchors.length,c=hd((function(){var t=e.reshape([u,u,l,D.boxEncodingSize]);return[t.slice([0,0,0,0],[u,u,l,4]),t.slice([0,0,0,4],[u,u,l,1]),D.withClassScores?tf(t.slice([0,0,0,5],[u,u,l,D.config.classes.length]),3):Pd(0)]})),d=c[0],h=c[1],f=c[2],p=[],[4,h.array()];case 1:return m=M.sent(),[4,d.array()];case 2:v=M.sent(),g=0,M.label=3;case 3:if(!(g<u))return[3,12];y=0,M.label=4;case 4:if(!(y<u))return[3,11];b=0,M.label=5;case 5:return b<l?(w=hk(m[g][y][b][0]),!n||w>n?(x=(y+hk(v[g][y][b][0]))/u*o,k=(g+hk(v[g][y][b][1]))/u*s,C=Math.exp(v[g][y][b][2])*this.config.anchors[b].x/u*o,E=Math.exp(v[g][y][b][3])*this.config.anchors[b].y/u*s,S=x-C/2,_=k-E/2,A={row:g,col:y,anchor:b},this.withClassScores?[4,this.extractPredictedClass(f,A)]:[3,7]):[3,9]):[3,10];case 6:return N=M.sent(),[3,8];case 7:N={classScore:1,label:0},M.label=8;case 8:T=(I=N).classScore,R=I.label,p.push(Hx({box:new ok(S,_,S+C,_+E),score:w,classScore:w*T,label:R},A)),M.label=9;case 9:return b++,[3,5];case 10:return y++,[3,4];case 11:return g++,[3,3];case 12:return d.dispose(),h.dispose(),f.dispose(),[2,p]}}))}))},t.prototype.extractPredictedClass=function(e,t){return Gx(this,void 0,void 0,(function(){var n,r,a,i;return Kx(this,(function(o){switch(o.label){case 0:return n=t.row,r=t.col,a=t.anchor,[4,e.array()];case 1:return i=o.sent(),[2,Array(this.config.classes.length).fill(0).map((function(e,t){return i[n][r][a][t]})).map((function(e,t){return{classScore:e,label:t}})).reduce((function(e,t){return e.classScore>t.classScore?e:t}))]}}))}))},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(Zk),fE=function(e){function t(t){void 0===t&&(t=!0);var n=Object.assign({},{withSeparableConvs:t,iouThreshold:.4,classes:["face"]},t?{anchors:rE,meanRgb:aE}:{anchors:nE,withClassScores:!0});return e.call(this,n)||this}return Wx(t,e),Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return Gx(this,void 0,void 0,(function(){return Kx(this,(function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map((function(e){return new uk(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(hE);var pE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return Wx(t,e),t}(dE),mE=function(){function e(){}return e.prototype.then=function(e){return Gx(this,void 0,void 0,(function(){var t;return Kx(this,(function(n){switch(n.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[n.sent()])]}}))}))},e.prototype.run=function(){return Gx(this,void 0,void 0,(function(){return Kx(this,(function(e){throw new Error("ComposableTask - run is not implemented")}))}))},e}();function vE(e,t){var n={descriptor:t};return Object.assign({},e,n)}function gE(e,t,n,r,a){return void 0===a&&(a=function(e){return e.alignedRect}),Gx(this,void 0,void 0,(function(){var i,o,s,u,l;return Kx(this,(function(c){switch(c.label){case 0:return i=e.map((function(e){return wC(e)?a(e):e.detection})),(s=r)?[3,5]:t instanceof Wl?[4,Gk(t,i)]:[3,2];case 1:return u=c.sent(),[3,4];case 2:return[4,Hk(t,i)];case 3:u=c.sent(),c.label=4;case 4:s=u,c.label=5;case 5:return[4,n(o=s)];case 6:return l=c.sent(),o.forEach((function(e){return e instanceof Wl&&e.dispose()})),[2,l]}}))}))}function yE(e,t,n,r,a){return Gx(this,void 0,void 0,(function(){var i=this;return Kx(this,(function(o){return[2,gE([e],t,(function(e){return Gx(i,void 0,void 0,(function(){return Kx(this,(function(t){return[2,n(e[0])]}))}))}),r,a)]}))}))}function bE(e){var t=uC(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],i=function(e,t){var n=nC(e,t),r=rC(e,t);function a(n,r){var a=Fd(e(n));return t.push({paramPath:r}),a}function i(e,t,r){return void 0===r&&(r=!1),{conv1:n(e[0],e[1],3,t+"/conv1"),prelu1_alpha:a(e[1],t+"/prelu1_alpha"),conv2:n(e[1],e[2],3,t+"/conv2"),prelu2_alpha:a(e[2],t+"/prelu2_alpha"),conv3:n(e[2],e[3],r?2:3,t+"/conv3"),prelu3_alpha:a(e[3],t+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=i([3,10,16,32],"pnet"),t=n(32,2,1,"pnet/conv4_1"),r=n(32,4,1,"pnet/conv4_2");return Hx(Hx({},e),{conv4_1:t,conv4_2:r})},extractRNetParams:function(){var e=i([3,28,48,64],"rnet",!0),t=r(576,128,"rnet/fc1"),n=a(128,"rnet/prelu4_alpha"),o=r(128,2,"rnet/fc2_1"),s=r(128,4,"rnet/fc2_2");return Hx(Hx({},e),{fc1:t,prelu4_alpha:n,fc2_1:o,fc2_2:s})},extractONetParams:function(){var e=i([3,32,64,64],"onet"),t=n(64,128,2,"onet/conv4"),o=a(128,"onet/prelu4_alpha"),s=r(1152,256,"onet/fc1"),u=a(256,"onet/prelu5_alpha"),l=r(256,2,"onet/fc2_1"),c=r(256,4,"onet/fc2_2"),d=r(256,10,"onet/fc2_3");return Hx(Hx({},e),{conv4:t,prelu4_alpha:o,fc1:s,prelu5_alpha:u,fc2_1:l,fc2_2:c,fc2_3:d})}}}(n,a),o=i.extractPNetParams,s=i.extractRNetParams,u=i.extractONetParams,l=o(),c=s(),d=u();if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:c,onet:d},paramMappings:a}}function wE(e){var t=[],n=function(e,t){var n=sC(e,t);function r(e){return{filters:n(e+"/weights",4,e+"/filters"),bias:n(e+"/bias",1)}}function a(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}function i(e){return n(e,1)}function o(e){return{conv1:r(e+"/conv1"),prelu1_alpha:i(e+"/prelu1_alpha"),conv2:r(e+"/conv2"),prelu2_alpha:i(e+"/prelu2_alpha"),conv3:r(e+"/conv3"),prelu3_alpha:i(e+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=o("pnet"),t=r("pnet/conv4_1"),n=r("pnet/conv4_2");return Hx(Hx({},e),{conv4_1:t,conv4_2:n})},extractRNetParams:function(){var e=o("rnet"),t=a("rnet/fc1"),n=i("rnet/prelu4_alpha"),r=a("rnet/fc2_1"),s=a("rnet/fc2_2");return Hx(Hx({},e),{fc1:t,prelu4_alpha:n,fc2_1:r,fc2_2:s})},extractONetParams:function(){var e=o("onet"),t=r("onet/conv4"),n=i("onet/prelu4_alpha"),s=a("onet/fc1"),u=i("onet/prelu5_alpha"),l=a("onet/fc2_1"),c=a("onet/fc2_2"),d=a("onet/fc2_3");return Hx(Hx({},e),{conv4:t,prelu4_alpha:n,fc1:s,prelu5_alpha:u,fc2_1:l,fc2_2:c,fc2_3:d})}}}(e,t),r=n.extractPNetParams,a=n.extractRNetParams,i=n.extractONetParams,o=r(),s=a(),u=i();return tC(e,t),{params:{pnet:o,rnet:s,onet:u},paramMappings:t}}function xE(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}var kE=function(e){function t(t,n,r,a){return e.call(this,{left:t,top:n,right:r,bottom:a},!0)||this}return Wx(t,e),t}(ik);function CE(e){return hd((function(){return Yg($g(e,Pd(127.5)),Pd(.0078125))}))}function EE(e,t){return hd((function(){return Og(hb(e),Yg(t,Jv(hb(Jv(e)))))}))}function SE(e,t,n){return void 0===n&&(n=!1),hd((function(){var r=eC(e,t.conv1,"valid");return r=EE(r,t.prelu1_alpha),r=EE(r=eC(r=Uy(r,n?[2,2]:[3,3],[2,2],"same"),t.conv2,"valid"),t.prelu2_alpha),r=EE(r=eC(r=n?r:Uy(r,[3,3],[2,2],"valid"),t.conv3,"valid"),t.prelu3_alpha)}))}function _E(e,t,n,r,a){a.stage1=[];var i=t.map((function(t){return hd((function(){var n={scale:t},a=function(e,t){return hd((function(){var n=xE(t,e.shape.slice(1)),r=n.height,a=n.width,i=CE(sw.resizeBilinear(e,[r,a]));return mb(i,[0,2,1,3])}))}(e,t),i=Date.now(),o=function(e,t){return hd((function(){var n=SE(e,t,!0),r=eC(n,t.conv4_1,"valid"),a=gh(rb(r,3),3);return{prob:tf($g(r,a),3),regions:eC(n,t.conv4_2,"valid")}}))}(a,r),s=o.prob,u=o.regions;return n.pnet=Date.now()-i,{scoresTensor:Fh(Fh(s,3)[1])[0],regionsTensor:Fh(u)[0],scale:t,statsForScale:n}}))})),o=i.map((function(e){var t=e.scoresTensor,r=e.regionsTensor,i=e.scale,o=e.statsForScale,s=function(e,t,n,r){for(var a=[],i=e.arraySync(),o=0;o<e.shape[0];o++)for(var s=0;s<e.shape[1];s++)i[o][s]>=r&&a.push(new ak(s,o));return a.map((function(e){var r=new ok(Math.round((2*e.y+1)/n),Math.round((2*e.x+1)/n),Math.round((2*e.y+12)/n),Math.round((2*e.x+12)/n)),a=i[e.y][e.x],o=t.arraySync();return{cell:r,score:a,region:new kE(o[e.y][e.x][0],o[e.y][e.x][1],o[e.y][e.x][2],o[e.y][e.x][3])}}))}(t,r,i,n);if(t.dispose(),r.dispose(),!s.length)return a.stage1.push(o),[];var u=Date.now(),l=ck(s.map((function(e){return e.cell})),s.map((function(e){return e.score})),.5);return o.nms=Date.now()-u,o.numBoxes=l.length,a.stage1.push(o),l.map((function(e){return s[e]}))})),s=o.reduce((function(e,t){return e.concat(t)}),[]),u=[],l=[];if(s.length>0){var c=Date.now(),d=ck(s.map((function(e){return e.cell})),s.map((function(e){return e.score})),.7);a.stage1_nms=Date.now()-c,l=d.map((function(e){return s[e].score})),u=d.map((function(e){return s[e]})).map((function(e){var t=e.cell,n=e.region;return new ok(t.left+n.left*t.width,t.top+n.top*t.height,t.right+n.right*t.width,t.bottom+n.bottom*t.height).toSquare().round()}))}return{boxes:u,scores:l}}function AE(e,t,n){var r=n.width,a=n.height;return Gx(this,void 0,void 0,(function(){var n,i,o,s=this;return Kx(this,(function(u){switch(u.label){case 0:return n=Dk(e),[4,Promise.all(t.map((function(t){return Gx(s,void 0,void 0,(function(){var r,a,i,o,s,u,l,c;return Kx(this,(function(d){return r=t.padAtBorders(e.height,e.width),a=r.y,i=r.ey,o=r.x,s=r.ex,u=o-1,l=a-1,c=n.getImageData(u,l,s-u,i-l),[2,Rk.isNodejs()?jk(c):createImageBitmap(c)]}))}))})))];case 1:return i=u.sent(),o=[],i.forEach((function(e){var t=Dk(Bk({width:r,height:a}));t.drawImage(e,0,0,r,a);for(var n=t.getImageData(0,0,r,a).data,i=[],s=0;s<n.length;s+=4)i.push(n[s+2]),i.push(n[s+1]),i.push(n[s]);o.push(i)})),[2,o.map((function(e){return hd((function(){return CE(mb(jd(e,[1,r,a,3]),[0,2,1,3]).toFloat())}))}))]}}))}))}function IE(e,t,n,r,a){return Gx(this,void 0,void 0,(function(){var i,o,s,u,l,c,d,h,f,p,m,v,g,y;return Kx(this,(function(b){switch(b.label){case 0:return i=Date.now(),[4,AE(e,t,{width:24,height:24})];case 1:return o=b.sent(),a.stage2_extractImagePatches=Date.now()-i,i=Date.now(),s=o.map((function(e){var t=function(e,t){return hd((function(){var n=SE(e,t),r=EE(fC(Rh(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu4_alpha),a=fC(r,t.fc2_1),i=gh(rb(a,1),1),o=tf($g(a,i),1),s=fC(r,t.fc2_2);return{scores:Fh(o,1)[1],regions:s}}))}(e,r);return e.dispose(),t})),a.stage2_rnet=Date.now()-i,u=s.length>1?Kd(s.map((function(e){return e.scores}))):s[0].scores,d=(c=Array).from,[4,u.data()];case 2:return l=d.apply(c,[b.sent()]),u.dispose(),h=l.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){return e.idx})),f=h.map((function(e){return t[e]})),p=h.map((function(e){return l[e]})),m=[],v=[],f.length>0&&(i=Date.now(),g=ck(f,p,.7),a.stage2_nms=Date.now()-i,y=g.map((function(e){var t=s[h[e]].regions.arraySync();return new kE(t[0][0],t[0][1],t[0][2],t[0][3])})),v=g.map((function(e){return p[e]})),m=g.map((function(e,t){return f[e].calibrate(y[t])}))),s.forEach((function(e){e.regions.dispose(),e.scores.dispose()})),[2,{boxes:m,scores:v}]}}))}))}function TE(e,t,n,r,a){return Gx(this,void 0,void 0,(function(){var i,o,s,u,l,c,d,h,f,p,m,v,g,y,b;return Kx(this,(function(w){switch(w.label){case 0:return i=Date.now(),[4,AE(e,t,{width:48,height:48})];case 1:return o=w.sent(),a.stage3_extractImagePatches=Date.now()-i,i=Date.now(),s=o.map((function(e){var t=function(e,t){return hd((function(){var n=SE(e,t);n=EE(n=eC(n=Uy(n,[2,2],[2,2],"same"),t.conv4,"valid"),t.prelu4_alpha);var r=EE(fC(Rh(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu5_alpha),a=fC(r,t.fc2_1),i=gh(rb(a,1),1),o=tf($g(a,i),1),s=fC(r,t.fc2_2),u=fC(r,t.fc2_3);return{scores:Fh(o,1)[1],regions:s,points:u}}))}(e,r);return e.dispose(),t})),a.stage3_onet=Date.now()-i,u=s.length>1?Kd(s.map((function(e){return e.scores}))):s[0].scores,d=(c=Array).from,[4,u.data()];case 2:return l=d.apply(c,[w.sent()]),u.dispose(),h=l.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){return e.idx})),f=h.map((function(e){var t=s[e].regions.arraySync();return new kE(t[0][0],t[0][1],t[0][2],t[0][3])})),p=h.map((function(e,n){return t[e].calibrate(f[n])})),m=h.map((function(e){return l[e]})),v=[],g=[],y=[],p.length>0&&(i=Date.now(),b=ck(p,m,.7,!1),a.stage3_nms=Date.now()-i,v=b.map((function(e){return p[e]})),g=b.map((function(e){return m[e]})),y=b.map((function(e,t){return Array(5).fill(0).map((function(n,r){var a=s[e].points.arraySync();return new ak(a[0][r]*(v[t].width+1)+v[t].left,a[0][r+5]*(v[t].height+1)+v[t].top)}))}))),s.forEach((function(e){e.regions.dispose(),e.scores.dispose(),e.points.dispose()})),[2,{boxes:v,scores:g,points:y}]}}))}))}var RE=function(e){function t(){return e.call(this,"Mtcnn")||this}return Wx(t,e),t.prototype.load=function(t){return Gx(this,void 0,void 0,(function(){return Kx(this,(function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,t)]}))}))},t.prototype.loadFromDisk=function(t){return Gx(this,void 0,void 0,(function(){return Kx(this,(function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,t)]}))}))},t.prototype.forwardInput=function(e,t){return void 0===t&&(t={}),Gx(this,void 0,void 0,(function(){var n,r,a,i,o,s,u,l,c,d,h,f,p,m,v,g,y,b,w,x,k;return Kx(this,(function(C){switch(C.label){case 0:if(!(n=this.params))throw new Error("Mtcnn - load model before inference");if(!(r=e.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return a={},i=Date.now(),o=hd((function(){return e=gh(_x.fromPixels(r)).toFloat(),hd((function(){return Mh(Fh(e,3).reverse(),3)}));var e})),s=function(e){return o.dispose(),a.total=Date.now()-i,e},u=o.shape.slice(1),l=u[0],c=u[1],d=new GC(t),h=d.minFaceSize,f=d.scaleFactor,p=d.maxNumScales,m=d.scoreThresholds,v=d.scaleSteps,g=(v||function(e,t,n){for(var r=n[0],a=n[1],i=12/e,o=[],s=Math.min(r,a)*i,u=0;s>=12;)o.push(i*Math.pow(t,u)),s*=t,u+=1;return o}(h,f,[l,c])).filter((function(e){var t=xE(e,[l,c]);return Math.min(t.width,t.height)>12})).slice(0,p),a.scales=g,a.pyramid=g.map((function(e){return xE(e,[l,c])})),y=Date.now(),[4,_E(o,g,m[0],n.pnet,a)];case 1:return b=C.sent(),a.total_stage1=Date.now()-y,b.boxes.length?(a.stage2_numInputBoxes=b.boxes.length,y=Date.now(),[4,IE(r,b.boxes,m[1],n.rnet,a)]):[2,s({results:[],stats:a})];case 2:return w=C.sent(),a.total_stage2=Date.now()-y,w.boxes.length?(a.stage3_numInputBoxes=w.boxes.length,y=Date.now(),[4,TE(r,w.boxes,m[2],n.onet,a)]):[2,s({results:[],stats:a})];case 3:return x=C.sent(),a.total_stage3=Date.now()-y,k=x.boxes.map((function(e,t){return xC(xk({},new uk(x.scores[t],new pk(e.left/c,e.top/l,e.width/c,e.height/l),{height:l,width:c})),new vk(x.points[t].map((function(t){return t.sub(new ak(e.left,e.top)).div(new ak(e.width,e.height))})),{width:e.width,height:e.height}))})),[2,s({results:k,stats:a})]}}))}))},t.prototype.forward=function(e,t){return void 0===t&&(t={}),Gx(this,void 0,void 0,(function(){var n;return Kx(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Wk(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent().results]}}))}))},t.prototype.forwardWithStats=function(e,t){return void 0===t&&(t={}),Gx(this,void 0,void 0,(function(){var n;return Kx(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Wk(e)];case 1:return[2,n.apply(this,[r.sent(),t])]}}))}))},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(e){return wE(e)},t.prototype.extractParams=function(e){return bE(e)},t}(Zk),NE=[new ak(1.603231,2.094468),new ak(6.041143,7.080126),new ak(2.882459,3.518061),new ak(4.266906,5.178857),new ak(9.041765,10.66308)],DE=[117.001,114.697,97.404],ME=function(e){function t(){var t={withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:NE,meanRgb:DE,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e.call(this,t)||this}return Wx(t,e),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return Gx(this,void 0,void 0,(function(){return Kx(this,(function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map((function(e){return new uk(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(hE),OE={ssdMobilenetv1:new eE,tinyFaceDetector:new ME,tinyYolov2:new fE,mtcnn:new RE,faceLandmark68Net:new DC,faceLandmark68TinyNet:new OC,faceRecognitionNet:new WC,faceExpressionNet:new yC,ageGenderNet:new RC};function PE(e,t){var n={age:t};return Object.assign({},e,n)}var FE=function(e){function t(t,n,r){var a=e.call(this)||this;return a.parentTask=t,a.input=n,a.extractedFaces=r,a}return Wx(t,e),t}(mE),LE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wx(t,e),t.prototype.run=function(){return Gx(this,void 0,void 0,(function(){var e,t,n=this;return Kx(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,gE(e=r.sent(),this.input,(function(e){return Gx(n,void 0,void 0,(function(){return Kx(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return OE.faceExpressionNet.predictExpressions(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){return bC(e,t[n])}))]}}))}))},t.prototype.withAgeAndGender=function(){return new VE(this,this.input)},t}(FE),BE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wx(t,e),t.prototype.run=function(){return Gx(this,void 0,void 0,(function(){var e,t;return Kx(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,yE(e,this.input,(function(e){return OE.faceExpressionNet.predictExpressions(e)}),this.extractedFaces)]:[2];case 2:return t=n.sent(),[2,bC(e,t)]}}))}))},t.prototype.withAgeAndGender=function(){return new WE(this,this.input)},t}(FE),jE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wx(t,e),t.prototype.withAgeAndGender=function(){return new HE(this,this.input)},t.prototype.withFaceDescriptors=function(){return new XE(this,this.input)},t}(LE),zE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wx(t,e),t.prototype.withAgeAndGender=function(){return new GE(this,this.input)},t.prototype.withFaceDescriptor=function(){return new YE(this,this.input)},t}(BE),UE=function(e){function t(t,n,r){var a=e.call(this)||this;return a.parentTask=t,a.input=n,a.extractedFaces=r,a}return Wx(t,e),t}(mE),VE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wx(t,e),t.prototype.run=function(){return Gx(this,void 0,void 0,(function(){var e,t,n=this;return Kx(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,gE(e=r.sent(),this.input,(function(e){return Gx(n,void 0,void 0,(function(){return Kx(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return OE.ageGenderNet.predictAgeAndGender(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){var r=t[n],a=r.age;return PE(HC(e,r.gender,r.genderProbability),a)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new LE(this,this.input)},t}(UE),WE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wx(t,e),t.prototype.run=function(){return Gx(this,void 0,void 0,(function(){var e,t,n,r,a;return Kx(this,(function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return(e=i.sent())?[4,yE(e,this.input,(function(e){return OE.ageGenderNet.predictAgeAndGender(e)}),this.extractedFaces)]:[2];case 2:return t=i.sent(),n=t.age,r=t.gender,a=t.genderProbability,[2,PE(HC(e,r,a),n)]}}))}))},t.prototype.withFaceExpressions=function(){return new BE(this,this.input)},t}(UE),HE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wx(t,e),t.prototype.withFaceExpressions=function(){return new jE(this,this.input)},t.prototype.withFaceDescriptors=function(){return new XE(this,this.input)},t}(VE),GE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wx(t,e),t.prototype.withFaceExpressions=function(){return new zE(this,this.input)},t.prototype.withFaceDescriptor=function(){return new YE(this,this.input)},t}(WE),KE=function(e){function t(t,n){var r=e.call(this)||this;return r.parentTask=t,r.input=n,r}return Wx(t,e),t}(mE),XE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wx(t,e),t.prototype.run=function(){return Gx(this,void 0,void 0,(function(){var e;return Kx(this,(function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return[4,gE(e=t.sent(),this.input,(function(e){return Promise.all(e.map((function(e){return OE.faceRecognitionNet.computeFaceDescriptor(e)})))}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))];case 2:return[2,t.sent().map((function(t,n){return vE(e[n],t)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new jE(this,this.input)},t.prototype.withAgeAndGender=function(){return new HE(this,this.input)},t}(KE),YE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wx(t,e),t.prototype.run=function(){return Gx(this,void 0,void 0,(function(){var e,t;return Kx(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,yE(e,this.input,(function(e){return OE.faceRecognitionNet.computeFaceDescriptor(e)}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))]:[2];case 2:return t=n.sent(),[2,vE(e,t)]}}))}))},t.prototype.withFaceExpressions=function(){return new zE(this,this.input)},t.prototype.withAgeAndGender=function(){return new GE(this,this.input)},t}(KE),qE=function(e){function t(t,n,r){var a=e.call(this)||this;return a.parentTask=t,a.input=n,a.useTinyLandmarkNet=r,a}return Wx(t,e),Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?OE.faceLandmark68TinyNet:OE.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(mE),ZE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wx(t,e),t.prototype.run=function(){return Gx(this,void 0,void 0,(function(){var e,t,n,r,a,i=this;return Kx(this,(function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),t=e.map((function(e){return e.detection})),this.input instanceof Wl?[4,Gk(this.input,t)]:[3,3];case 2:return r=o.sent(),[3,5];case 3:return[4,Hk(this.input,t)];case 4:r=o.sent(),o.label=5;case 5:return n=r,[4,Promise.all(n.map((function(e){return i.landmarkNet.detectLandmarks(e)})))];case 6:return a=o.sent(),n.forEach((function(e){return e instanceof Wl&&e.dispose()})),[2,e.map((function(e,t){return xC(e,a[t])}))]}}))}))},t.prototype.withFaceExpressions=function(){return new jE(this,this.input)},t.prototype.withAgeAndGender=function(){return new HE(this,this.input)},t.prototype.withFaceDescriptors=function(){return new XE(this,this.input)},t}(qE),QE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wx(t,e),t.prototype.run=function(){return Gx(this,void 0,void 0,(function(){var e,t,n,r,a;return Kx(this,(function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return(e=i.sent())?(t=e.detection,this.input instanceof Wl?[4,Gk(this.input,[t])]:[3,3]):[2];case 2:return r=i.sent(),[3,5];case 3:return[4,Hk(this.input,[t])];case 4:r=i.sent(),i.label=5;case 5:return n=r,[4,this.landmarkNet.detectLandmarks(n[0])];case 6:return a=i.sent(),n.forEach((function(e){return e instanceof Wl&&e.dispose()})),[2,xC(e,a)]}}))}))},t.prototype.withFaceExpressions=function(){return new zE(this,this.input)},t.prototype.withAgeAndGender=function(){return new GE(this,this.input)},t.prototype.withFaceDescriptor=function(){return new YE(this,this.input)},t}(qE),JE=function(e){function t(t,n){void 0===n&&(n=new $C);var r=e.call(this)||this;return r.input=t,r.options=n,r}return Wx(t,e),t}(mE),$E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wx(t,e),t.prototype.run=function(){return Gx(this,void 0,void 0,(function(){var e,t,n,r;return Kx(this,(function(a){switch(a.label){case 0:return t=(e=this).input,(n=e.options)instanceof GC?[4,OE.mtcnn.forward(t,n)]:[3,2];case 1:return[2,a.sent().map((function(e){return e.detection}))];case 2:if(r=n instanceof pE?function(e){return OE.tinyFaceDetector.locateFaces(e,n)}:n instanceof $C?function(e){return OE.ssdMobilenetv1.locateFaces(e,n)}:n instanceof dE?function(e){return OE.tinyYolov2.locateFaces(e,n)}:null,!r)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,r(t)]}}))}))},t.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise((function(t){return Gx(e,void 0,void 0,(function(){var e;return Kx(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e.map((function(e){return xk({},e)})))]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new ZE(this.runAndExtendWithFaceDetections(),this.input,e)},t.prototype.withFaceExpressions=function(){return new LE(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new VE(this.runAndExtendWithFaceDetections(),this.input)},t}(JE),eS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wx(t,e),t.prototype.run=function(){return Gx(this,void 0,void 0,(function(){var e,t;return Kx(this,(function(n){switch(n.label){case 0:return[4,new $E(this.input,this.options)];case 1:return e=n.sent(),t=e[0],e.forEach((function(e){e.score>t.score&&(t=e)})),[2,t]}}))}))},t.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise((function(t){return Gx(e,void 0,void 0,(function(){var e;return Kx(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e?xk({},e):void 0)]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new QE(this.runAndExtendWithFaceDetection(),this.input,e)},t.prototype.withFaceExpressions=function(){return new BE(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new WE(this.runAndExtendWithFaceDetection(),this.input)},t}(JE);function tS(e,t){return void 0===t&&(t=new $C),new eS(e,t)}var nS=function(){function e(e,t){void 0===t&&(t=.6),this._distanceThreshold=t;var n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var r=1,a=function(){return"person "+r++};this._labeledDescriptors=n.map((function(e){if(e instanceof wk)return e;if(e instanceof Float32Array)return new wk(a(),[e]);if(e.descriptor&&e.descriptor instanceof Float32Array)return new wk(a(),[e.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")}))}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(e,t){return t.map((function(t){return function(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map((function(e,t){return e-r[t]})).reduce((function(e,t){return e+Math.pow(t,2)}),0))}(t,e)})).reduce((function(e,t){return e+t}),0)/(t.length||1)},e.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map((function(n){var r=n.descriptors,a=n.label;return new yk(a,t.computeMeanDistance(e,r))})).reduce((function(e,t){return e.distance<t.distance?e:t}))},e.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new yk("unknown",t.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map((function(e){return e.toJSON()}))}},e.fromJSON=function(t){var n=t.labeledDescriptors.map((function(e){return wk.fromJSON(e)}));return new e(n,t.distanceThreshold)},e}();var rS=n(3970);var aS=function(){var t=(0,e.useContext)(Pe),r=new b,a=r.getFaceRecognition(t.language),i=r.getFaceRecognitionPeople(t.language),o=r.getDialogs(t.language),s=(0,e.useState)(!1),u=(0,w.Z)(s,2),l=u[0],c=u[1],d=(0,e.useState)(!1),h=(0,w.Z)(d,2),f=h[0],p=h[1],m=pe(),v=!1;(0,e.useEffect)((function(){var e="/models";Promise.all([OE.ssdMobilenetv1.loadFromUri(e),OE.faceLandmark68Net.loadFromUri(e),OE.faceRecognitionNet.loadFromUri(e)]).then(v=!0),document.getElementById("native_camera").addEventListener("change",(function(){var e=document.getElementById("native_camera").files[0],t=window.URL.createObjectURL(e);document.getElementById("person_picture").src=t,x()}))}),[]);var g=function(){c(!1)},y=function(){p(!1)},x=function(){var e=Do(Ro().mark((function e(){var r,a,o,s,u,l;return Ro().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=23;break}return r=document.getElementById("person_picture"),e.next=4,(d=r,h=void 0,void 0===h&&(h=new $C),new $E(d,h)).withFaceLandmarks().withFaceDescriptors();case 4:if(0!==(a=e.sent).length){e.next=9;break}return y(),c(!0),e.abrupt("return");case 9:return e.next=11,Promise.all(i.map(function(){var e=Do(Ro().mark((function e(t){var r,a,i,o;return Ro().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(9977)("./img".concat(t.img)),(a=document.createElement("img")).src=r,e.next=5,tS(a).withFaceLandmarks().withFaceDescriptor();case 5:return i=e.sent,o=[i.descriptor],e.abrupt("return",new wk(t.name,o));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).catch((function(e){y(),c(!0)}));case 11:if(o=e.sent,.6,s=new nS(o,.6),u=a.map((function(e){return s.findBestMatch(e.descriptor)})),"unknown"!==u[0].label){e.next=19;break}return y(),c(!0),e.abrupt("return");case 19:l=k(u[0].label),t.setImageRecognitionName(u[0].label),t.setImageRecognitionImg(l),m("/image_recognition_result");case 23:case"end":return e.stop()}var d,h}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e){for(var t=0;t<i.length;t++)if(i[t].name===e)return i[t].img};return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mo,{header:a.face_recognition}),(0,Le.jsxs)(Ki,{open:f,onClose:y,disableTypography:!0,children:[(0,Le.jsxs)($i,{className:"flex align-items-primary",children:[(0,Le.jsx)(rS.Z,{className:"color-secondary"}),(0,Le.jsx)("h3",{children:o.wait})]}),(0,Le.jsx)(ro,{children:(0,Le.jsx)(Qi,{children:o.recognition_wait_label})})]}),(0,Le.jsxs)(Ki,{disableTypography:!0,open:l,onClose:g,children:[(0,Le.jsx)($i,{children:o.no_face_detected}),(0,Le.jsx)(ro,{children:(0,Le.jsx)(Qi,{children:o.try_again_label})}),(0,Le.jsx)(to,{children:(0,Le.jsx)(Io,{className:"color-secondary",onClick:g,children:o.close_label})})]}),(0,Le.jsxs)("div",{className:"flex content-container background-secondary padding-secondary border-radius-primary box-shadow",children:[(0,Le.jsx)("h2",{className:"text-medium",children:a.title}),(0,Le.jsx)("p",{className:"margin-top-secondary margin-bottom-primary",children:a.label}),(0,Le.jsxs)("div",{className:"flex-secondary margin-bottom-primary",children:[(0,Le.jsx)("span",{className:"margin-right-secondary font-weight-primary text-medium",children:"1."}),(0,Le.jsx)("span",{children:a.step_1})]}),(0,Le.jsxs)("div",{className:"flex-secondary margin-bottom-primary",children:[(0,Le.jsx)("span",{className:"margin-right-secondary font-weight-primary text-medium",children:"2."}),(0,Le.jsx)("span",{children:a.step_2})]}),(0,Le.jsxs)("div",{className:"flex-secondary margin-bottom-primary",children:[(0,Le.jsx)("span",{className:"margin-right-secondary font-weight-primary text-medium",children:"3."}),(0,Le.jsx)("span",{children:a.step_3})]}),(0,Le.jsxs)("div",{className:"flex-secondary margin-bottom-primary",children:[(0,Le.jsx)("span",{className:"margin-right-secondary font-weight-primary text-medium",children:"4."}),(0,Le.jsx)("span",{children:a.step_4})]}),(0,Le.jsxs)("div",{className:"center-text margin-primary ",children:[(0,Le.jsx)("label",{htmlFor:"native_camera",className:"text-medium button align-self-primary background-primary font-weight-primary color-primary cursor-primary",children:a.button}),(0,Le.jsx)("input",{id:"native_camera",type:"file",accept:"image/*",capture:"environment",className:"display-none",onClick:function(){return p(!0)}})]}),(0,Le.jsx)("img",{id:"person_picture",src:"",className:"display-none",alt:"person_picture"})]})]})};var iS=function(){var t=(0,e.useContext)(Pe),r=new b,a=r.getFaceRecognition(t.language),i=(r.getFaceRecognitionPeople(t.language),(0,e.useState)("")),o=(0,w.Z)(i,2);return o[0],o[1],(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Mo,{header:a.face_recognition}),(0,Le.jsxs)("div",{className:"flex content-container background-secondary center-text padding-secondary box-shadow border-radius-primary",children:[(0,Le.jsxs)("div",{className:"font-size-third medieval-first-letter",children:[(0,Le.jsx)("div",{className:"flex-secondary align-items-primary",children:(0,Le.jsx)("h2",{className:"margin-right-primary margin-left-primary",children:t.image_name})}),(0,Le.jsx)("div",{className:"margin-top-secondary",children:(0,Le.jsx)("img",{src:n(9977)("./img".concat(t.image_img)),alt:"castle",className:"page-image"})})]}),(0,Le.jsxs)("div",{className:"flex-secondary padding-bottom-primary padding-top-primary align-items-primary",children:[(0,Le.jsx)(Me,{to:"/image_recognition",className:"flex round-item background-fourth margin-right-secondary",children:(0,Le.jsx)(Wo.Z,{className:"round-item-content color-primary margin-top-third cursor-primary"})}),(0,Le.jsx)("p",{className:"text-medium font-weight-primary",children:a.button_back})]})]})]})},oS=function(e){l(n,e);var t=m(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).setLanguage=function(e){r.setState({language:e}),localStorage.setItem("language",JSON.stringify(e))},r.setHouse=function(e){r.setState({house:e}),localStorage.setItem("house",JSON.stringify(e))},r.setTour=function(e){r.setState({tour:e}),localStorage.setItem("tour",JSON.stringify(e))},r.setRoom=function(e){r.setState({room:e}),localStorage.setItem("room",JSON.stringify(e))},r.setOwner=function(e){r.setState({owner:e}),localStorage.setItem("owner",JSON.stringify(e))},r.setGalleryTour=function(e){r.setState({gallery_tour:e}),localStorage.setItem("gallery_tour",JSON.stringify(e))},r.setImageRecognitionName=function(e){r.setState({image_name:e}),localStorage.setItem("image_name",JSON.stringify(e))},r.setImageRecognitionImg=function(e){r.setState({image_img:e}),localStorage.setItem("image_img",JSON.stringify(e))},r.setFontSize=function(e){var t=document.getElementById("body");"d"===e?(t.classList.value="",t.classList.add("font-size-default"),localStorage.setItem("fontSize",JSON.stringify(e))):"m"===e?(t.classList.value="",t.classList.add("font-size-medium"),localStorage.setItem("fontSize",JSON.stringify(e))):"l"===e?(t.classList.value="",t.classList.add("font-size-large"),localStorage.setItem("fontSize",JSON.stringify(e))):console.log("Wrong value of font size.")},r.state={language:null!==localStorage.getItem("language")?JSON.parse(localStorage.getItem("language")):"en",setLanguage:r.setLanguage,tour:null!==localStorage.getItem("tour")?JSON.parse(localStorage.getItem("tour")):"castle",setTour:r.setTour,room:null!==localStorage.getItem("room")?JSON.parse(localStorage.getItem("room")):"1",setRoom:r.setRoom,house:null!==localStorage.getItem("house")?JSON.parse(localStorage.getItem("house")):"Redernov\xe9",setHouse:r.setHouse,owner:null!==localStorage.getItem("owner")?JSON.parse(localStorage.getItem("owner")):"1",setOwner:r.setOwner,fontSize:null!==localStorage.getItem("fontSize")?JSON.parse(localStorage.getItem("fontSize")):"d",setFontSize:r.setFontSize,gallery_tour:null!==localStorage.getItem("gallery_tour")?JSON.parse(localStorage.getItem("gallery_tour")):"",setGalleryTour:r.setGalleryTour,image_name:null!==localStorage.getItem("image_name")?JSON.parse(localStorage.getItem("image_name")):"",setImageRecognitionName:r.setImageRecognitionName,image_img:null!==localStorage.getItem("image_img")?JSON.parse(localStorage.getItem("image_img")):"",setImageRecognitionImg:r.setImageRecognitionImg},r}return s(n,[{key:"componentDidMount",value:function(){var e=null!==localStorage.getItem("fontSize")?JSON.parse(localStorage.getItem("fontSize")):"d";this.setFontSize(e)}},{key:"render",value:function(){var e=(new b).getRotateLabel(this.state.language);return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)("span",{id:"rotate_message",className:"font-weight-primary text-medium",children:e.rotate}),(0,Le.jsx)("div",{id:"content",children:(0,Le.jsx)(De,{onUpdate:function(){return console.log("updated")},children:(0,Le.jsxs)(Pe.Provider,{value:this.state,children:[(0,Le.jsx)(fs,{}),(0,Le.jsxs)(Se,{children:[(0,Le.jsx)(Ce,{path:"/",element:(0,Le.jsx)(To,{})}),(0,Le.jsx)(Ce,{path:"/tours",element:(0,Le.jsx)(Bo,{})}),(0,Le.jsx)(Ce,{path:"/contact",element:(0,Le.jsx)(zo,{})}),(0,Le.jsx)(Ce,{path:"/rooms",element:(0,Le.jsx)(jo,{})}),(0,Le.jsx)(Ce,{path:"/room",element:(0,Le.jsx)(Go,{})}),(0,Le.jsx)(Ce,{path:"/history",element:(0,Le.jsx)(Ko,{})}),(0,Le.jsx)(Ce,{path:"/history_overview",element:(0,Le.jsx)(Yo,{})}),(0,Le.jsx)(Ce,{path:"/houses",element:(0,Le.jsx)(qo,{})}),(0,Le.jsx)(Ce,{path:"/owners",element:(0,Le.jsx)(Zo,{})}),(0,Le.jsx)(Ce,{path:"/owner",element:(0,Le.jsx)(Qo,{})}),(0,Le.jsx)(Ce,{path:"/rooms_overview",element:(0,Le.jsx)(Uo,{})}),(0,Le.jsx)(Ce,{path:"/settings",element:(0,Le.jsx)(Jo,{})}),(0,Le.jsx)(Ce,{path:"/other",element:(0,Le.jsx)(is,{})}),(0,Le.jsx)(Ce,{path:"/about_app",element:(0,Le.jsx)(ss,{})}),(0,Le.jsx)(Ce,{path:"/where_to_next",element:(0,Le.jsx)(ls,{})}),(0,Le.jsx)(Ce,{path:"/gallery",element:(0,Le.jsx)(cs,{})}),(0,Le.jsx)(Ce,{path:"/gallery_rooms",element:(0,Le.jsx)(ds,{})}),(0,Le.jsx)(Ce,{path:"/scan_room",element:(0,Le.jsx)(Tu,{})}),(0,Le.jsx)(Ce,{path:"/image_recognition",element:(0,Le.jsx)(aS,{})}),(0,Le.jsx)(Ce,{path:"/image_recognition_result",element:(0,Le.jsx)(iS,{})})]})]})})})]})}}]),n}(e.Component),sS=oS,uS=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function lS(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var cS=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))},dS=r.createRoot(document.getElementById("root"));window.deferredPrompt=null,window.installBannerDisplayed=!window.matchMedia("(display-mode: standalone)").matches,window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),window.deferredPrompt=e})),window.json_response=null,dS.render((0,Le.jsx)(e.StrictMode,{children:(0,Le.jsx)(sS,{})})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");uS?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):lS(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):lS(t,e)}))}}(),cS()}()}();
//# sourceMappingURL=main.e256294c.js.map