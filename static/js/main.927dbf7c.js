/*! For license information please see main.927dbf7c.js.LICENSE.txt */
!function(){var e={9212:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)([(0,o.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,o.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");t.Z=a},7394:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBack");t.Z=a},8264:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");t.Z=a},1334:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-11-4 2.03 2.71L16 11l4 5H8l3-4zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z"}),"Collections");t.Z=a},7961:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"}),"Help");t.Z=a},3742:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M9 4v1.38c-.83-.33-1.72-.5-2.61-.5-1.79 0-3.58.68-4.95 2.05l3.33 3.33h1.11v1.11c.86.86 1.98 1.31 3.11 1.36V15H6v3c0 1.1.9 2 2 2h10c1.66 0 3-1.34 3-3V4H9zm-1.11 6.41V8.26H5.61L4.57 7.22a5.07 5.07 0 0 1 1.82-.34c1.34 0 2.59.52 3.54 1.46l1.41 1.41-.2.2c-.51.51-1.19.8-1.92.8-.47 0-.93-.12-1.33-.34zM19 17c0 .55-.45 1-1 1s-1-.45-1-1v-2h-6v-2.59c.57-.23 1.1-.57 1.56-1.03l.2-.2L15.59 14H17v-1.41l-6-5.97V6h8v11z"}),"HistoryEdu");t.Z=a},3970:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"m6 2 .01 6L10 12l-3.99 4.01L6 22h12v-6l-4-4 4-3.99V2H6zm10 14.5V20H8v-3.5l4-4 4 4z"}),"HourglassTop");t.Z=a},5878:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");t.Z=a},5172:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");t.Z=a},3229:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"}),"LocalPhone");t.Z=a},4941:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M14 6v15H3v-2h2V3h9v1h5v15h2v2h-4V6h-3zm-4 5v2h2v-2h-2z"}),"MeetingRoom");t.Z=a},9065:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M12 2C8.14 2 5 5.14 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7zm.88 13.75h-1.75V14h1.75v1.75zm0-2.87h-1.75c0-2.84 2.62-2.62 2.62-4.38 0-.96-.79-1.75-1.75-1.75s-1.75.79-1.75 1.75H8.5C8.5 6.57 10.07 5 12 5s3.5 1.57 3.5 3.5c0 2.19-2.62 2.41-2.62 4.38z"}),"NotListedLocation");t.Z=a},8456:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}),"OpenInNew");t.Z=a},2237:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M12 12.25c1.24 0 2.25-1.01 2.25-2.25S13.24 7.75 12 7.75 9.75 8.76 9.75 10s1.01 2.25 2.25 2.25zm4.5 4c0-1.5-3-2.25-4.5-2.25s-4.5.75-4.5 2.25V17h9v-.75zM19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"}),"Portrait");t.Z=a},1542:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M15 21h-2v-2h2v2zm-2-7h-2v5h2v-5zm8-2h-2v4h2v-4zm-2-2h-2v2h2v-2zM7 12H5v2h2v-2zm-2-2H3v2h2v-2zm7-5h2V3h-2v2zm-7.5-.5v3h3v-3h-3zM9 9H3V3h6v6zm-4.5 7.5v3h3v-3h-3zM9 21H3v-6h6v6zm7.5-16.5v3h3v-3h-3zM21 9h-6V3h6v6zm-2 10v-3h-4v2h2v3h4v-2h-2zm-2-7h-4v2h4v-2zm-4-2H7v2h2v2h2v-2h2v-2zm1-1V7h-2V5h-2v4h4zM6.75 5.25h-1.5v1.5h1.5v-1.5zm0 12h-1.5v1.5h1.5v-1.5zm12-12h-1.5v1.5h1.5v-1.5z"}),"QrCode2");t.Z=a},7122:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}),"Settings");t.Z=a},5649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(7568)},7568:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return s},createChainedFunction:function(){return u},createSvgIcon:function(){return br},debounce:function(){return wr},deprecatedPropType:function(){return xr},isMuiElement:function(){return _r},ownerDocument:function(){return Er},ownerWindow:function(){return Sr},requirePropFactory:function(){return Ar},setRef:function(){return Ir},unstable_ClassNameGenerator:function(){return Xr},unstable_useEnhancedEffect:function(){return Tr},unstable_useId:function(){return Dr},unsupportedProp:function(){return Mr},useControlled:function(){return Pr},useEventCallback:function(){return Fr},useForkRef:function(){return Lr},useIsFocusVisible:function(){return Kr}});var r=function(e){return e},i=function(){var e=r;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=r}}}();function o(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function a(e){if("string"!==typeof e)throw new Error(o(7));return e.charAt(0).toUpperCase()+e.slice(1)}var s=a;var u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))},l=n(7462),c=n(2791),d=n.t(c,2),h=n(3366),f=n(8182);function p(e,t){var n=(0,l.Z)({},t);return Object.keys(e).forEach((function(r){if(r.toString().match(/^(components|slots)$/))n[r]=(0,l.Z)({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){var i=e[r]||{},o=t[r];n[r]={},o&&Object.keys(o)?i&&Object.keys(i)?(n[r]=(0,l.Z)({},o),Object.keys(i).forEach((function(e){n[r][e]=p(i[e],o[e])}))):n[r]=o:n[r]=i}else void 0===n[r]&&(n[r]=e[r])})),n}function m(e){var t=e.theme,n=e.name,r=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?p(t.components[n].defaultProps,r):r}function g(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function v(e){if(!g(e))return e;var t={};return Object.keys(e).forEach((function(n){t[n]=v(e[n])})),t}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?(0,l.Z)({},e):e;return g(e)&&g(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(g(t[i])&&i in e&&g(e[i])?r[i]=y(e[i],t[i],n):n.clone?r[i]=g(t[i])?v(t[i]):t[i]:r[i]=t[i])})),r}var b=n(4942),w=["values","unit","step"];function x(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,r=e.unit,i=void 0===r?"px":r,o=e.step,a=void 0===o?5:o,s=(0,h.Z)(e,w),u=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return(0,l.Z)({},e,(0,b.Z)({},t.key,t.val))}),{})}(n),c=Object.keys(u);function d(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function f(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-a/100).concat(i,")")}function p(e,t){var r=c.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[c[r]]?n[c[r]]:t)-a/100).concat(i,")")}return(0,l.Z)({keys:c,values:u,up:d,down:f,between:p,only:function(e){return c.indexOf(e)+1<c.length?p(e,c[c.indexOf(e)+1]):d(e)},not:function(e){var t=c.indexOf(e);return 0===t?d(c[1]):t===c.length-1?f(c[t]):p(e,c[c.indexOf(e)+1]).replace("@media","@media not all and")},unit:i},s)}var _={borderRadius:4},C=n(885),E={xs:0,sm:600,md:900,lg:1200,xl:1536},S={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(E[e],"px)")}};function A(e,t,n){var r=e.theme||{};if(Array.isArray(t)){var i=r.breakpoints||S;return t.reduce((function(e,r,o){return e[i.up(i.keys[o])]=n(t[o]),e}),{})}if("object"===typeof t){var o=r.breakpoints||S;return Object.keys(t).reduce((function(e,r){if(-1!==Object.keys(o.values||E).indexOf(r)){e[o.up(r)]=n(t[r],r)}else{var i=r;e[i]=t[i]}return e}),{})}return n(t)}function k(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function I(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function R(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){var r="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=r)return r}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function T(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:R(e,n)||i,t&&(r=t(r,i,e)),r}var N=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,i=e.themeKey,o=e.transform,s=function(e){if(null==e[t])return null;var n=e[t],s=R(e.theme,i)||{};return A(e,n,(function(e){var n=T(s,o,e);return e===n&&"string"===typeof e&&(n=T(s,o,"".concat(t).concat("default"===e?"":a(e)),e)),!1===r?n:(0,b.Z)({},r,n)}))};return s.propTypes={},s.filterProps=[t],s};var O=function(e,t){return t?y(e,t,{clone:!1}):e};var D={m:"margin",p:"padding"},M={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},P={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},F=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!P[e])return[e];e=P[e]}var t=e.split(""),n=(0,C.Z)(t,2),r=n[0],i=n[1],o=D[r],a=M[i]||"";return Array.isArray(a)?a.map((function(e){return o+e})):[o+a]})),B=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],L=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],z=[].concat(B,L);function j(e,t,n,r){var i,o=null!=(i=R(e,t,!1))?i:n;return"number"===typeof o?function(e){return"string"===typeof e?e:o*e}:Array.isArray(o)?function(e){return"string"===typeof e?e:o[e]}:"function"===typeof o?o:function(){}}function W(e){return j(e,"spacing",8)}function H(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function V(e,t,n,r){if(-1===t.indexOf(n))return null;var i=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=H(t,n),e}),{})}}(F(n),r);return A(e,e[n],i)}function G(e,t){var n=W(e.theme);return Object.keys(e).map((function(r){return V(e,t,r,n)})).reduce(O,{})}function U(e){return G(e,B)}function K(e){return G(e,L)}function X(e){return G(e,z)}U.propTypes={},U.filterProps=B,K.propTypes={},K.filterProps=L,X.propTypes={},X.filterProps=z;function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=W({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=0===n.length?[1]:n;return i.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var q=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?O(t,r[n](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i};function Y(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var J=N({prop:"border",themeKey:"borders",transform:Y}),Q=N({prop:"borderTop",themeKey:"borders",transform:Y}),$=N({prop:"borderRight",themeKey:"borders",transform:Y}),ee=N({prop:"borderBottom",themeKey:"borders",transform:Y}),te=N({prop:"borderLeft",themeKey:"borders",transform:Y}),ne=N({prop:"borderColor",themeKey:"palette"}),re=N({prop:"borderTopColor",themeKey:"palette"}),ie=N({prop:"borderRightColor",themeKey:"palette"}),oe=N({prop:"borderBottomColor",themeKey:"palette"}),ae=N({prop:"borderLeftColor",themeKey:"palette"}),se=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=j(e.theme,"shape.borderRadius",4);return A(e,e.borderRadius,(function(e){return{borderRadius:H(t,e)}}))}return null};se.propTypes={},se.filterProps=["borderRadius"];q(J,Q,$,ee,te,ne,re,ie,oe,ae,se);var ue=function(e){if(void 0!==e.gap&&null!==e.gap){var t=j(e.theme,"spacing",8);return A(e,e.gap,(function(e){return{gap:H(t,e)}}))}return null};ue.propTypes={},ue.filterProps=["gap"];var le=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=j(e.theme,"spacing",8);return A(e,e.columnGap,(function(e){return{columnGap:H(t,e)}}))}return null};le.propTypes={},le.filterProps=["columnGap"];var ce=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=j(e.theme,"spacing",8);return A(e,e.rowGap,(function(e){return{rowGap:H(t,e)}}))}return null};ce.propTypes={},ce.filterProps=["rowGap"];q(ue,le,ce,N({prop:"gridColumn"}),N({prop:"gridRow"}),N({prop:"gridAutoFlow"}),N({prop:"gridAutoColumns"}),N({prop:"gridAutoRows"}),N({prop:"gridTemplateColumns"}),N({prop:"gridTemplateRows"}),N({prop:"gridTemplateAreas"}),N({prop:"gridArea"}));function de(e,t){return"grey"===t?t:e}q(N({prop:"color",themeKey:"palette",transform:de}),N({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:de}),N({prop:"backgroundColor",themeKey:"palette",transform:de}));function he(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var fe=N({prop:"width",transform:he}),pe=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return A(e,e.maxWidth,(function(t){var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||E[t]||he(t)}}))}return null};pe.filterProps=["maxWidth"];var me=N({prop:"minWidth",transform:he}),ge=N({prop:"height",transform:he}),ve=N({prop:"maxHeight",transform:he}),ye=N({prop:"minHeight",transform:he}),be=(N({prop:"size",cssProperty:"width",transform:he}),N({prop:"size",cssProperty:"height",transform:he}),q(fe,pe,me,ge,ve,ye,N({prop:"boxSizing"})),{border:{themeKey:"borders",transform:Y},borderTop:{themeKey:"borders",transform:Y},borderRight:{themeKey:"borders",transform:Y},borderBottom:{themeKey:"borders",transform:Y},borderLeft:{themeKey:"borders",transform:Y},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:se},color:{themeKey:"palette",transform:de},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:de},backgroundColor:{themeKey:"palette",transform:de},p:{style:K},pt:{style:K},pr:{style:K},pb:{style:K},pl:{style:K},px:{style:K},py:{style:K},padding:{style:K},paddingTop:{style:K},paddingRight:{style:K},paddingBottom:{style:K},paddingLeft:{style:K},paddingX:{style:K},paddingY:{style:K},paddingInline:{style:K},paddingInlineStart:{style:K},paddingInlineEnd:{style:K},paddingBlock:{style:K},paddingBlockStart:{style:K},paddingBlockEnd:{style:K},m:{style:U},mt:{style:U},mr:{style:U},mb:{style:U},ml:{style:U},mx:{style:U},my:{style:U},margin:{style:U},marginTop:{style:U},marginRight:{style:U},marginBottom:{style:U},marginLeft:{style:U},marginX:{style:U},marginY:{style:U},marginInline:{style:U},marginInlineStart:{style:U},marginInlineEnd:{style:U},marginBlock:{style:U},marginBlockStart:{style:U},marginBlockEnd:{style:U},displayPrint:{cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:ue},rowGap:{style:ce},columnGap:{style:le},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:he},maxWidth:{style:pe},minWidth:{transform:he},height:{transform:he},maxHeight:{transform:he},minHeight:{transform:he},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});var we=function(){function e(e,t,n,r){var i,o=(i={},(0,b.Z)(i,e,t),(0,b.Z)(i,"theme",n),i),s=r[e];if(!s)return(0,b.Z)({},e,t);var u=s.cssProperty,l=void 0===u?e:u,c=s.themeKey,d=s.transform,h=s.style;if(null==t)return null;var f=R(n,c)||{};if(h)return h(o);return A(o,t,(function(t){var n=T(f,d,t);return t===n&&"string"===typeof t&&(n=T(f,d,"".concat(e).concat("default"===t?"":a(t)),t)),!1===l?n:(0,b.Z)({},l,n)}))}return function t(n){var r,i=n||{},o=i.sx,a=i.theme,s=void 0===a?{}:a;if(!o)return null;var u=null!=(r=s.unstable_sxConfig)?r:be;function l(n){var r=n;if("function"===typeof n)r=n(s);else if("object"!==typeof n)return n;if(!r)return null;var i=k(s.breakpoints),o=Object.keys(i),a=i;return Object.keys(r).forEach((function(n){var i,o,l=(i=r[n],o=s,"function"===typeof i?i(o):i);if(null!==l&&void 0!==l)if("object"===typeof l)if(u[n])a=O(a,e(n,l,s,u));else{var c=A({theme:s},l,(function(e){return(0,b.Z)({},n,e)}));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}(c,l)?a=O(a,c):a[n]=t({sx:l,theme:s})}else a=O(a,e(n,l,s,u))})),I(o,a)}return Array.isArray(o)?o.map(l):l(o)}}();we.filterProps=["sx"];var xe=we,_e=["breakpoints","palette","spacing","shape"];var Ce=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,o=e.spacing,a=e.shape,s=void 0===a?{}:a,u=(0,h.Z)(e,_e),c=x(n),d=Z(o),f=y({breakpoints:c,direction:"ltr",components:{},palette:(0,l.Z)({mode:"light"},i),spacing:d,shape:(0,l.Z)({},_,s)},u),p=arguments.length,m=new Array(p>1?p-1:0),g=1;g<p;g++)m[g-1]=arguments[g];return(f=m.reduce((function(e,t){return y(e,t)}),f)).unstable_sxConfig=(0,l.Z)({},be,null==u?void 0:u.unstable_sxConfig),f.unstable_sx=function(e){return xe({sx:e,theme:this})},f};var Ee=c.createContext(null);function Se(){return c.useContext(Ee)}function Ae(e){return 0===Object.keys(e).length}var ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Se();return!t||Ae(t)?e:t},Ie=Ce();var Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie;return ke(e)};function Te(e,t){var n;return(0,l.Z)({toolbar:(n={minHeight:56},(0,b.Z)(n,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),(0,b.Z)(n,e.up("sm"),{minHeight:64}),n)},t)}function Ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function Oe(e){if(e.type)return e;if("#"===e.charAt(0))return Oe(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(o(9,e));var r,i=e.substring(t+1,e.length-1);if("color"===n){if(r=(i=i.split(" ")).shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(o(10,r))}else i=i.split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)})),colorSpace:r}}function De(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function Me(e){var t="hsl"===(e=Oe(e)).type||"hsla"===e.type?Oe(function(e){var t=(e=Oe(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),De({type:s,values:u})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Pe(e,t){if(e=Oe(e),t=Ne(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return De(e)}function Fe(e,t){if(e=Oe(e),t=Ne(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return De(e)}var Be={black:"#000",white:"#fff"},Le={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},ze={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},je={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},We={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},He={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Ve={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Ge={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Ue=["mode","contrastThreshold","tonalOffset"],Ke={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Be.white,default:Be.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Xe={text:{primary:Be.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Be.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Ze(e,t,n,r){var i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Fe(e.main,i):"dark"===t&&(e.dark=Pe(e.main,o)))}function qe(e){var t=e.mode,n=void 0===t?"light":t,r=e.contrastThreshold,i=void 0===r?3:r,a=e.tonalOffset,s=void 0===a?.2:a,u=(0,h.Z)(e,Ue),c=e.primary||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:He[200],light:He[50],dark:He[400]}:{main:He[700],light:He[400],dark:He[800]}}(n),d=e.secondary||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:ze[200],light:ze[50],dark:ze[400]}:{main:ze[500],light:ze[300],dark:ze[700]}}(n),f=e.error||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:je[500],light:je[300],dark:je[700]}:{main:je[700],light:je[400],dark:je[800]}}(n),p=e.info||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:Ve[400],light:Ve[300],dark:Ve[700]}:{main:Ve[700],light:Ve[500],dark:Ve[900]}}(n),m=e.success||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:Ge[400],light:Ge[300],dark:Ge[700]}:{main:Ge[800],light:Ge[500],dark:Ge[900]}}(n),g=e.warning||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";return"dark"===e?{main:We[400],light:We[300],dark:We[700]}:{main:"#ed6c02",light:We[500],dark:We[900]}}(n);function v(e){var t=function(e,t){var n=Me(e),r=Me(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,Xe.text.primary)>=i?Xe.text.primary:Ke.text.primary;return t}var b=function(e){var t=e.color,n=e.name,r=e.mainShade,i=void 0===r?500:r,a=e.lightShade,u=void 0===a?300:a,c=e.darkShade,d=void 0===c?700:c;if(!(t=(0,l.Z)({},t)).main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(o(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error(o(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return Ze(t,"light",u,s),Ze(t,"dark",d,s),t.contrastText||(t.contrastText=v(t.main)),t},w={dark:Xe,light:Ke};return y((0,l.Z)({common:(0,l.Z)({},Be),mode:n,primary:b({color:c,name:"primary"}),secondary:b({color:d,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:b({color:f,name:"error"}),warning:b({color:g,name:"warning"}),info:b({color:p,name:"info"}),success:b({color:m,name:"success"}),grey:Le,contrastThreshold:i,getContrastText:v,augmentColor:b,tonalOffset:s},w[n]),u)}var Ye=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var Je={textTransform:"uppercase"},Qe='"Roboto", "Helvetica", "Arial", sans-serif';function $e(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,i=void 0===r?Qe:r,o=n.fontSize,a=void 0===o?14:o,s=n.fontWeightLight,u=void 0===s?300:s,c=n.fontWeightRegular,d=void 0===c?400:c,f=n.fontWeightMedium,p=void 0===f?500:f,m=n.fontWeightBold,g=void 0===m?700:m,v=n.htmlFontSize,b=void 0===v?16:v,w=n.allVariants,x=n.pxToRem,_=(0,h.Z)(n,Ye);var C=a/14,E=x||function(e){return"".concat(e/b*C,"rem")},S=function(e,t,n,r,o){return(0,l.Z)({fontFamily:i,fontWeight:e,fontSize:E(t),lineHeight:n},i===Qe?{letterSpacing:"".concat((a=r/t,Math.round(1e5*a)/1e5),"em")}:{},o,w);var a},A={h1:S(u,96,1.167,-1.5),h2:S(u,60,1.2,-.5),h3:S(d,48,1.167,0),h4:S(d,34,1.235,.25),h5:S(d,24,1.334,0),h6:S(p,20,1.6,.15),subtitle1:S(d,16,1.75,.15),subtitle2:S(p,14,1.57,.1),body1:S(d,16,1.5,.15),body2:S(d,14,1.43,.15),button:S(p,14,1.75,.4,Je),caption:S(d,12,1.66,.4),overline:S(d,12,2.66,1,Je)};return y((0,l.Z)({htmlFontSize:b,pxToRem:E,fontFamily:i,fontSize:a,fontWeightLight:u,fontWeightRegular:d,fontWeightMedium:p,fontWeightBold:g},A),_,{clone:!1})}function et(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var tt=["none",et(0,2,1,-1,0,1,1,0,0,1,3,0),et(0,3,1,-2,0,2,2,0,0,1,5,0),et(0,3,3,-2,0,3,4,0,0,1,8,0),et(0,2,4,-1,0,4,5,0,0,1,10,0),et(0,3,5,-1,0,5,8,0,0,1,14,0),et(0,3,5,-1,0,6,10,0,0,1,18,0),et(0,4,5,-2,0,7,10,1,0,2,16,1),et(0,5,5,-3,0,8,10,1,0,3,14,2),et(0,5,6,-3,0,9,12,1,0,3,16,2),et(0,6,6,-3,0,10,14,1,0,4,18,3),et(0,6,7,-4,0,11,15,1,0,4,20,3),et(0,7,8,-4,0,12,17,2,0,5,22,4),et(0,7,8,-4,0,13,19,2,0,5,24,4),et(0,7,9,-4,0,14,21,2,0,5,26,4),et(0,8,9,-5,0,15,22,2,0,6,28,5),et(0,8,10,-5,0,16,24,2,0,6,30,5),et(0,8,11,-5,0,17,26,2,0,6,32,5),et(0,9,11,-5,0,18,28,2,0,7,34,6),et(0,9,12,-6,0,19,29,2,0,7,36,6),et(0,10,13,-6,0,20,31,3,0,8,38,7),et(0,10,13,-6,0,21,33,3,0,8,40,7),et(0,10,14,-6,0,22,35,3,0,8,42,7),et(0,11,14,-7,0,23,36,3,0,9,44,8),et(0,11,15,-7,0,24,38,3,0,9,46,8)],nt=["duration","easing","delay"],rt={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},it={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function ot(e){return"".concat(Math.round(e),"ms")}function at(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function st(e){var t=(0,l.Z)({},rt,e.easing),n=(0,l.Z)({},it,e.duration);return(0,l.Z)({getAutoHeightDuration:at,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.duration,o=void 0===i?n.standard:i,a=r.easing,s=void 0===a?t.easeInOut:a,u=r.delay,l=void 0===u?0:u;(0,h.Z)(r,nt);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof o?o:ot(o)," ").concat(s," ").concat("string"===typeof l?l:ot(l))})).join(",")}},e,{easing:t,duration:n})}var ut={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},lt=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function ct(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.transitions,s=void 0===a?{}:a,u=e.typography,c=void 0===u?{}:u,d=(0,h.Z)(e,lt);if(e.vars)throw new Error(o(18));var f=qe(i),p=Ce(e),m=y(p,{mixins:Te(p.breakpoints,n),palette:f,shadows:tt.slice(),typography:$e(f,c),transitions:st(s),zIndex:(0,l.Z)({},ut)});m=y(m,d);for(var g=arguments.length,v=new Array(g>1?g-1:0),b=1;b<g;b++)v[b-1]=arguments[b];return(m=v.reduce((function(e,t){return y(e,t)}),m)).unstable_sxConfig=(0,l.Z)({},be,null==d?void 0:d.unstable_sxConfig),m.unstable_sx=function(e){return xe({sx:e,theme:this})},m}var dt=ct();function ht(e){return function(e){var t=e.props,n=e.name,r=e.defaultTheme;return m({theme:Re(r),name:n,props:t})}({props:e.props,name:e.name,defaultTheme:dt})}var ft=n(2982);var pt=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},mt=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,gt=pt((function(e){return mt.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var vt=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),yt=Math.abs,bt=String.fromCharCode,wt=Object.assign;function xt(e){return e.trim()}function _t(e,t,n){return e.replace(t,n)}function Ct(e,t){return e.indexOf(t)}function Et(e,t){return 0|e.charCodeAt(t)}function St(e,t,n){return e.slice(t,n)}function At(e){return e.length}function kt(e){return e.length}function It(e,t){return t.push(e),e}var Rt=1,Tt=1,Nt=0,Ot=0,Dt=0,Mt="";function Pt(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:Rt,column:Tt,length:a,return:""}}function Ft(e,t){return wt(Pt("",null,null,"",null,null,0),e,{length:-e.length},t)}function Bt(){return Dt=Ot>0?Et(Mt,--Ot):0,Tt--,10===Dt&&(Tt=1,Rt--),Dt}function Lt(){return Dt=Ot<Nt?Et(Mt,Ot++):0,Tt++,10===Dt&&(Tt=1,Rt++),Dt}function zt(){return Et(Mt,Ot)}function jt(){return Ot}function Wt(e,t){return St(Mt,e,t)}function Ht(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Vt(e){return Rt=Tt=1,Nt=At(Mt=e),Ot=0,[]}function Gt(e){return Mt="",e}function Ut(e){return xt(Wt(Ot-1,Zt(91===e?e+2:40===e?e+1:e)))}function Kt(e){for(;(Dt=zt())&&Dt<33;)Lt();return Ht(e)>2||Ht(Dt)>3?"":" "}function Xt(e,t){for(;--t&&Lt()&&!(Dt<48||Dt>102||Dt>57&&Dt<65||Dt>70&&Dt<97););return Wt(e,jt()+(t<6&&32==zt()&&32==Lt()))}function Zt(e){for(;Lt();)switch(Dt){case e:return Ot;case 34:case 39:34!==e&&39!==e&&Zt(Dt);break;case 40:41===e&&Zt(e);break;case 92:Lt()}return Ot}function qt(e,t){for(;Lt()&&e+Dt!==57&&(e+Dt!==84||47!==zt()););return"/*"+Wt(t,Ot-1)+"*"+bt(47===e?e:Lt())}function Yt(e){for(;!Ht(zt());)Lt();return Wt(e,Ot)}var Jt="-ms-",Qt="-moz-",$t="-webkit-",en="comm",tn="rule",nn="decl",rn="@keyframes";function on(e,t){for(var n="",r=kt(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function an(e,t,n,r){switch(e.type){case"@import":case nn:return e.return=e.return||e.value;case en:return"";case rn:return e.return=e.value+"{"+on(e.children,r)+"}";case tn:e.value=e.props.join(",")}return At(n=on(e.children,r))?e.return=e.value+"{"+n+"}":""}function sn(e){return Gt(un("",null,null,null,[""],e=Vt(e),0,[0],e))}function un(e,t,n,r,i,o,a,s,u){for(var l=0,c=0,d=a,h=0,f=0,p=0,m=1,g=1,v=1,y=0,b="",w=i,x=o,_=r,C=b;g;)switch(p=y,y=Lt()){case 40:if(108!=p&&58==Et(C,d-1)){-1!=Ct(C+=_t(Ut(y),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:C+=Ut(y);break;case 9:case 10:case 13:case 32:C+=Kt(p);break;case 92:C+=Xt(jt()-1,7);continue;case 47:switch(zt()){case 42:case 47:It(cn(qt(Lt(),jt()),t,n),u);break;default:C+="/"}break;case 123*m:s[l++]=At(C)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+c:f>0&&At(C)-d&&It(f>32?dn(C+";",r,n,d-1):dn(_t(C," ","")+";",r,n,d-2),u);break;case 59:C+=";";default:if(It(_=ln(C,t,n,l,c,i,s,b,w=[],x=[],d),o),123===y)if(0===c)un(C,t,_,_,w,o,d,s,x);else switch(99===h&&110===Et(C,3)?100:h){case 100:case 109:case 115:un(e,_,_,r&&It(ln(e,_,_,0,0,i,s,b,i,w=[],d),x),i,x,d,s,r?w:x);break;default:un(C,_,_,_,[""],x,0,s,x)}}l=c=f=0,m=v=1,b=C="",d=a;break;case 58:d=1+At(C),f=p;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==Bt())continue;switch(C+=bt(y),y*m){case 38:v=c>0?1:(C+="\f",-1);break;case 44:s[l++]=(At(C)-1)*v,v=1;break;case 64:45===zt()&&(C+=Ut(Lt())),h=zt(),c=d=At(b=C+=Yt(jt())),y++;break;case 45:45===p&&2==At(C)&&(m=0)}}return o}function ln(e,t,n,r,i,o,a,s,u,l,c){for(var d=i-1,h=0===i?o:[""],f=kt(h),p=0,m=0,g=0;p<r;++p)for(var v=0,y=St(e,d+1,d=yt(m=a[p])),b=e;v<f;++v)(b=xt(m>0?h[v]+" "+y:_t(y,/&\f/g,h[v])))&&(u[g++]=b);return Pt(e,t,n,0===i?tn:s,u,l,c)}function cn(e,t,n){return Pt(e,t,n,en,bt(Dt),St(e,2,-2),0)}function dn(e,t,n,r){return Pt(e,t,n,nn,St(e,0,r),St(e,r+1,-1),r)}var hn=function(e,t,n){for(var r=0,i=0;r=i,i=zt(),38===r&&12===i&&(t[n]=1),!Ht(i);)Lt();return Wt(e,Ot)},fn=function(e,t){return Gt(function(e,t){var n=-1,r=44;do{switch(Ht(r)){case 0:38===r&&12===zt()&&(t[n]=1),e[n]+=hn(Ot-1,t,n);break;case 2:e[n]+=Ut(r);break;case 4:if(44===r){e[++n]=58===zt()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=bt(r)}}while(r=Lt());return e}(Vt(e),t))},pn=new WeakMap,mn=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||pn.get(n))&&!r){pn.set(e,!0);for(var i=[],o=fn(t,i),a=n.props,s=0,u=0;s<o.length;s++)for(var l=0;l<a.length;l++,u++)e.props[u]=i[s]?o[s].replace(/&\f/g,a[l]):a[l]+" "+o[s]}}},gn=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function vn(e,t){switch(function(e,t){return 45^Et(e,0)?(((t<<2^Et(e,0))<<2^Et(e,1))<<2^Et(e,2))<<2^Et(e,3):0}(e,t)){case 5103:return $t+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return $t+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return $t+e+Qt+e+Jt+e+e;case 6828:case 4268:return $t+e+Jt+e+e;case 6165:return $t+e+Jt+"flex-"+e+e;case 5187:return $t+e+_t(e,/(\w+).+(:[^]+)/,$t+"box-$1$2"+Jt+"flex-$1$2")+e;case 5443:return $t+e+Jt+"flex-item-"+_t(e,/flex-|-self/,"")+e;case 4675:return $t+e+Jt+"flex-line-pack"+_t(e,/align-content|flex-|-self/,"")+e;case 5548:return $t+e+Jt+_t(e,"shrink","negative")+e;case 5292:return $t+e+Jt+_t(e,"basis","preferred-size")+e;case 6060:return $t+"box-"+_t(e,"-grow","")+$t+e+Jt+_t(e,"grow","positive")+e;case 4554:return $t+_t(e,/([^-])(transform)/g,"$1"+$t+"$2")+e;case 6187:return _t(_t(_t(e,/(zoom-|grab)/,$t+"$1"),/(image-set)/,$t+"$1"),e,"")+e;case 5495:case 3959:return _t(e,/(image-set\([^]*)/,$t+"$1$`$1");case 4968:return _t(_t(e,/(.+:)(flex-)?(.*)/,$t+"box-pack:$3"+Jt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+$t+e+e;case 4095:case 3583:case 4068:case 2532:return _t(e,/(.+)-inline(.+)/,$t+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(At(e)-1-t>6)switch(Et(e,t+1)){case 109:if(45!==Et(e,t+4))break;case 102:return _t(e,/(.+:)(.+)-([^]+)/,"$1"+$t+"$2-$3$1"+Qt+(108==Et(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Ct(e,"stretch")?vn(_t(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Et(e,t+1))break;case 6444:switch(Et(e,At(e)-3-(~Ct(e,"!important")&&10))){case 107:return _t(e,":",":"+$t)+e;case 101:return _t(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+$t+(45===Et(e,14)?"inline-":"")+"box$3$1"+$t+"$2$3$1"+Jt+"$2box$3")+e}break;case 5936:switch(Et(e,t+11)){case 114:return $t+e+Jt+_t(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return $t+e+Jt+_t(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return $t+e+Jt+_t(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return $t+e+Jt+e+e}return e}var yn=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case nn:e.return=vn(e.value,e.length);break;case rn:return on([Ft(e,{value:_t(e.value,"@","@"+$t)})],r);case tn:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return on([Ft(e,{props:[_t(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return on([Ft(e,{props:[_t(t,/:(plac\w+)/,":"+$t+"input-$1")]}),Ft(e,{props:[_t(t,/:(plac\w+)/,":-moz-$1")]}),Ft(e,{props:[_t(t,/:(plac\w+)/,Jt+"input-$1")]})],r)}return""}))}}],bn=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||yn;var i,o,a={},s=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;s.push(e)}));var u,l,c=[an,(l=function(e){u.insert(e)},function(e){e.root||(e=e.return)&&l(e)})],d=function(e){var t=kt(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}([mn,gn].concat(r,c));o=function(e,t,n,r){u=n,on(sn(e?e+"{"+t.styles+"}":t.styles),d),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new vt({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:o};return h.sheet.hydrate(s),h};var wn=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},xn={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},_n=/[A-Z]|^ms/g,Cn=/_EMO_([^_]+?)_([^]*?)_EMO_/g,En=function(e){return 45===e.charCodeAt(1)},Sn=function(e){return null!=e&&"boolean"!==typeof e},An=pt((function(e){return En(e)?e:e.replace(_n,"-$&").toLowerCase()})),kn=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Cn,(function(e,t,n){return Rn={name:t,styles:n,next:Rn},t}))}return 1===xn[e]||En(e)||"number"!==typeof t||0===t?t:t+"px"};function In(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Rn={name:n.name,styles:n.styles,next:Rn},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Rn={name:r.name,styles:r.styles,next:Rn},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=In(e,t,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a)null!=t&&void 0!==t[a]?r+=o+"{"+t[a]+"}":Sn(a)&&(r+=An(o)+":"+kn(o,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=In(e,t,a);switch(o){case"animation":case"animationName":r+=An(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var u=0;u<a.length;u++)Sn(a[u])&&(r+=An(o)+":"+kn(o,a[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=Rn,o=n(e);return Rn=i,In(e,t,o)}}if(null==t)return n;var a=t[n];return void 0!==a?a:n}var Rn,Tn=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Nn=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Rn=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=In(n,t,o)):i+=o[0];for(var a=1;a<e.length;a++)i+=In(n,t,e[a]),r&&(i+=o[a]);Tn.lastIndex=0;for(var s,u="";null!==(s=Tn.exec(i));)u+="-"+s[1];return{name:wn(i)+u,styles:i,next:Rn}},On=!!d.useInsertionEffect&&d.useInsertionEffect,Dn=On||function(e){return e()},Mn=(On||c.useLayoutEffect,(0,c.createContext)("undefined"!==typeof HTMLElement?bn({key:"css"}):null));Mn.Provider;var Pn=function(e){return(0,c.forwardRef)((function(t,n){var r=(0,c.useContext)(Mn);return e(t,r,n)}))},Fn=(0,c.createContext)({});function Bn(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var Ln=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},zn=gt,jn=function(e){return"theme"!==e},Wn=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?zn:jn},Hn=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},Vn=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;Ln(t,n,r);Dn((function(){return function(e,t,n){Ln(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)}));return null},Gn=function e(t,n){var r,i,o=t.__emotion_real===t,a=o&&t.__emotion_base||t;void 0!==n&&(r=n.label,i=n.target);var s=Hn(t,n,o),u=s||Wn(a),d=!u("as");return function(){var h=arguments,f=o&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&f.push("label:"+r+";"),null==h[0]||void 0===h[0].raw)f.push.apply(f,h);else{0,f.push(h[0][0]);for(var p=h.length,m=1;m<p;m++)f.push(h[m],h[0][m])}var g=Pn((function(e,t,n){var r=d&&e.as||a,o="",l=[],h=e;if(null==e.theme){for(var p in h={},e)h[p]=e[p];h.theme=(0,c.useContext)(Fn)}"string"===typeof e.className?o=Bn(t.registered,l,e.className):null!=e.className&&(o=e.className+" ");var m=Nn(f.concat(l),t.registered,h);o+=t.key+"-"+m.name,void 0!==i&&(o+=" "+i);var g=d&&void 0===s?Wn(r):u,v={};for(var y in e)d&&"as"===y||g(y)&&(v[y]=e[y]);return v.className=o,v.ref=n,(0,c.createElement)(c.Fragment,null,(0,c.createElement)(Vn,{cache:t,serialized:m,isStringTag:"string"===typeof r}),(0,c.createElement)(r,v))}));return g.displayName=void 0!==r?r:"Styled("+("string"===typeof a?a:a.displayName||a.name||"Component")+")",g.defaultProps=t.defaultProps,g.__emotion_real=g,g.__emotion_base=a,g.__emotion_styles=f,g.__emotion_forwardProp=s,Object.defineProperty(g,"toString",{value:function(){return"."+i}}),g.withComponent=function(t,r){return e(t,(0,l.Z)({},n,r,{shouldForwardProp:Hn(g,r,!0)})).apply(void 0,f)},g}},Un=Gn.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Un[e]=Un(e)}));var Kn=Un;function Xn(e,t){return Kn(e,t)}var Zn=function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},qn=["variant"];function Yn(e){return 0===e.length}function Jn(e){var t=e.variant,n=(0,h.Z)(e,qn),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?Yn(r)?e[t]:a(e[t]):"".concat(Yn(r)?t:a(t)).concat(a(e[t].toString()))})),r}var Qn=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],$n=["theme"],er=["theme"];function tr(e){return 0===Object.keys(e).length}function nr(e){return"string"===typeof e&&e.charCodeAt(0)>96}var rr=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},ir=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=Jn(e.props);r[t]=e.style})),r},or=function(e,t,n,r){var i,o,a=e.ownerState,s=void 0===a?{}:a,u=[],l=null==n||null==(i=n.components)||null==(o=i[r])?void 0:o.variants;return l&&l.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&u.push(t[Jn(n.props)])})),u};function ar(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var sr=Ce();var ur=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?sr:t,r=e.rootShouldForwardProp,i=void 0===r?ar:r,o=e.slotShouldForwardProp,a=void 0===o?ar:o,s=function(e){var t=tr(e.theme)?n:e.theme;return xe((0,l.Z)({},e,{theme:t}))};return s.__mui_systemSx=!0,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Zn(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var r,o=t.name,u=t.slot,c=t.skipVariantsResolver,d=t.skipSx,f=t.overridesResolver,p=(0,h.Z)(t,Qn),m=void 0!==c?c:u&&"Root"!==u||!1,g=d||!1;var v=ar;"Root"===u?v=i:u?v=a:nr(e)&&(v=void 0);var y=Xn(e,(0,l.Z)({shouldForwardProp:v,label:r},p)),b=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var a=r?r.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,i=(0,h.Z)(t,$n);return e((0,l.Z)({theme:tr(r)?n:r},i))}:e})):[],u=e;o&&f&&a.push((function(e){var t=tr(e.theme)?n:e.theme,r=rr(o,t);if(r){var i={};return Object.entries(r).forEach((function(n){var r=(0,C.Z)(n,2),o=r[0],a=r[1];i[o]="function"===typeof a?a((0,l.Z)({},e,{theme:t})):a})),f(e,i)}return null})),o&&!m&&a.push((function(e){var t=tr(e.theme)?n:e.theme;return or(e,ir(o,t),t,o)})),g||a.push(s);var c=a.length-r.length;if(Array.isArray(e)&&c>0){var d=new Array(c).fill("");(u=[].concat((0,ft.Z)(e),(0,ft.Z)(d))).raw=[].concat((0,ft.Z)(e.raw),(0,ft.Z)(d))}else"function"===typeof e&&e.__emotion_real!==e&&(u=function(t){var r=t.theme,i=(0,h.Z)(t,er);return e((0,l.Z)({theme:tr(r)?n:r},i))});var p=y.apply(void 0,[u].concat((0,ft.Z)(a)));return p};return y.withConfig&&(b.withConfig=y.withConfig),b}}({defaultTheme:dt,rootShouldForwardProp:function(e){return ar(e)&&"classes"!==e}}),lr=ur,cr={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function dr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r=cr[t];return r?"".concat(n,"-").concat(r):"".concat(i.generate(e),"-").concat(t)}function hr(e){return dr("MuiSvgIcon",e)}!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r={};t.forEach((function(t){r[t]=dr(e,t,n)}))}("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var fr=n(184),pr=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],mr=function(e){var t=e.color,n=e.fontSize,r=e.classes;return function(e,t,n){var r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){return r&&(e.push(t(r)),n&&n[r]&&e.push(n[r])),e}),[]).join(" ")})),r}({root:["root","inherit"!==t&&"color".concat(s(t)),"fontSize".concat(s(n))]},hr,r)},gr=lr("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat(s(n.color))],t["fontSize".concat(s(n.fontSize))]]}})((function(e){var t,n,r,i,o,a,s,u,l,c,d,h,f,p,m,g,v,y=e.theme,b=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=y.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=y.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(o=y.typography)||null==(a=o.pxToRem)?void 0:a.call(o,20))||"1.25rem",medium:(null==(s=y.typography)||null==(u=s.pxToRem)?void 0:u.call(s,24))||"1.5rem",large:(null==(l=y.typography)||null==(c=l.pxToRem)?void 0:c.call(l,35))||"2.1875rem"}[b.fontSize],color:null!=(d=null==(h=(y.vars||y).palette)||null==(f=h[b.color])?void 0:f.main)?d:{action:null==(p=(y.vars||y).palette)||null==(m=p.action)?void 0:m.active,disabled:null==(g=(y.vars||y).palette)||null==(v=g.action)?void 0:v.disabled,inherit:void 0}[b.color]}})),vr=c.forwardRef((function(e,t){var n=ht({props:e,name:"MuiSvgIcon"}),r=n.children,i=n.className,o=n.color,a=void 0===o?"inherit":o,s=n.component,u=void 0===s?"svg":s,c=n.fontSize,d=void 0===c?"medium":c,p=n.htmlColor,m=n.inheritViewBox,g=void 0!==m&&m,v=n.titleAccess,y=n.viewBox,b=void 0===y?"0 0 24 24":y,w=(0,h.Z)(n,pr),x=(0,l.Z)({},n,{color:a,component:u,fontSize:d,instanceFontSize:e.fontSize,inheritViewBox:g,viewBox:b}),_={};g||(_.viewBox=b);var C=mr(x);return(0,fr.jsxs)(gr,(0,l.Z)({as:u,className:(0,f.Z)(C.root,i),focusable:"false",color:p,"aria-hidden":!v||void 0,role:v?"img":void 0,ref:t},_,w,{ownerState:x,children:[r,v?(0,fr.jsx)("title",{children:v}):null]}))}));vr.muiName="SvgIcon";var yr=vr;function br(e,t){function n(n,r){return(0,fr.jsx)(yr,(0,l.Z)({"data-testid":"".concat(t,"Icon"),ref:r},n,{children:e}))}return n.muiName=yr.muiName,c.memo(c.forwardRef(n))}var wr=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=function(){e.apply(r,o)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r};var xr=function(e,t){return function(){return null}};var _r=function(e,t){return c.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)};function Cr(e){return e&&e.ownerDocument||document}var Er=Cr;var Sr=function(e){return Cr(e).defaultView||window};var Ar=function(e,t){return function(){return null}};function kr(e,t){"function"===typeof e?e(t):e&&(e.current=t)}var Ir=kr,Rr="undefined"!==typeof window?c.useLayoutEffect:c.useEffect,Tr=Rr,Nr=0;var Or=d.useId;var Dr=function(e){if(void 0!==Or){var t=Or();return null!=e?e:t}return function(e){var t=c.useState(e),n=(0,C.Z)(t,2),r=n[0],i=n[1],o=e||r;return c.useEffect((function(){null==r&&i("mui-".concat(Nr+=1))}),[r]),o}(e)};var Mr=function(e,t,n,r,i){return null};var Pr=function(e){var t=e.controlled,n=e.default,r=(e.name,e.state,c.useRef(void 0!==t).current),i=c.useState(n),o=(0,C.Z)(i,2),a=o[0],s=o[1];return[r?t:a,c.useCallback((function(e){r||s(e)}),[])]};var Fr=function(e){var t=c.useRef(e);return Rr((function(){t.current=e})),c.useCallback((function(){return t.current.apply(void 0,arguments)}),[])};var Br,Lr=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo((function(){return t.every((function(e){return null==e}))?null:function(e){t.forEach((function(t){kr(t,e)}))}}),t)},zr=!0,jr=!1,Wr={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Hr(e){e.metaKey||e.altKey||e.ctrlKey||(zr=!0)}function Vr(){zr=!1}function Gr(){"hidden"===this.visibilityState&&jr&&(zr=!0)}function Ur(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return zr||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!Wr[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var Kr=function(){var e=c.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",Hr,!0),t.addEventListener("mousedown",Vr,!0),t.addEventListener("pointerdown",Vr,!0),t.addEventListener("touchstart",Vr,!0),t.addEventListener("visibilitychange",Gr,!0))}),[]),t=c.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!Ur(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(jr=!0,window.clearTimeout(Br),Br=window.setTimeout((function(){jr=!1}),100),t.current=!1,!0)},ref:e}},Xr={configure:function(e){i.configure(e)}}},8182:function(e,t,n){"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}t.Z=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}},2110:function(e,t,n){"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var a=c(n);d&&(a=a.concat(d(n)));for(var s=u(t),m=u(n),g=0;g<a.length;++g){var v=a[g];if(!o[v]&&(!r||!r[v])&&(!m||!m[v])&&(!s||!s[v])){var y=h(n,v);try{l(t,v,y)}catch(b){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case d:case o:case s:case a:case f:return e;default:switch(e=e&&e.$$typeof){case l:case h:case g:case m:case u:return e;default:return t}}case i:return t}}}function _(e){return x(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=f,t.isAsyncMode=function(e){return _(e)||x(e)===c},t.isConcurrentMode=_,t.isContextConsumer=function(e){return x(e)===l},t.isContextProvider=function(e){return x(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===h},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===a},t.isSuspense=function(e){return x(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===s||e===a||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===u||e.$$typeof===l||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===v)},t.typeOf=x},8309:function(e,t,n){"use strict";e.exports=n(746)},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),k=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var F,B=Object.assign;function L(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var z=!1;function j(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var u="\n"+i[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=a&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function W(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case _:return"Portal";case S:return"Profiler";case E:return"StrictMode";case R:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function U(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=U(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=U(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function q(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){J(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function oe(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Ce=null,Ee=null;function Se(e){if(e=bi(e)){if("function"!==typeof _e)throw Error(o(280));var t=e.stateNode;t&&(t=xi(t),_e(e.stateNode,e.type,t))}}function Ae(e){Ce?Ee?Ee.push(e):Ee=[e]:Ce=e}function ke(){if(Ce){var e=Ce,t=Ee;if(Ee=Ce=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ie(e,t){return e(t)}function Re(){}var Te=!1;function Ne(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ie(e,t,n)}finally{Te=!1,(null!==Ce||null!==Ee)&&(Re(),ke())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var De=!1;if(c)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){De=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ce){De=!1}function Pe(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Fe=!1,Be=null,Le=!1,ze=null,je={onError:function(e){Fe=!0,Be=e}};function We(e,t,n,r,i,o,a,s,u){Fe=!1,Be=null,Pe.apply(je,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(He(e)!==e)throw Error(o(188))}function Ue(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ge(i),e;if(a===r)return Ge(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Xe=i.unstable_scheduleCallback,Ze=i.unstable_cancelCallback,qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Qe=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=dt(s):0!==(o&=a)&&(r=dt(o))}else 0!==(a=n&~i)?r=dt(a):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,_t,Ct,Et,St,At=!1,kt=[],It=null,Rt=null,Tt=null,Nt=new Map,Ot=new Map,Dt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Ft(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Bt(e){var t=yi(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void St(e.priority,(function(){Ct(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function zt(e,t,n){Lt(e)&&n.delete(t)}function jt(){At=!1,null!==It&&Lt(It)&&(It=null),null!==Rt&&Lt(Rt)&&(Rt=null),null!==Tt&&Lt(Tt)&&(Tt=null),Nt.forEach(zt),Ot.forEach(zt)}function Wt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Ht(e){function t(t){return Wt(t,e)}if(0<kt.length){Wt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Wt(It,e),null!==Rt&&Wt(Rt,e),null!==Tt&&Wt(Tt,e),Nt.forEach(t),Ot.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Bt(n),null===n.blockedOn&&Dt.shift()}var Vt=w.ReactCurrentBatchConfig,Gt=!0;function Ut(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=1,Xt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function Kt(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=4,Xt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function Xt(e,t,n,r){if(Gt){var i=qt(e,t,n,r);if(null===i)Gr(e,t,r,Zt,n),Pt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Ft(It,e,t,n,r,i),!0;case"dragenter":return Rt=Ft(Rt,e,t,n,r,i),!0;case"mouseover":return Tt=Ft(Tt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Nt.set(o,Ft(Nt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ot.set(o,Ft(Ot.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&xt(o),null===(o=qt(e,t,n,r))&&Gr(e,t,r,Zt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Zt=null;function qt(e,t,n,r){if(Zt=null,null!==(e=yi(e=xe(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Qt=null,$t=null;function en(){if($t)return $t;var e,t,n=Qt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(ln),dn=B({},ln,{view:0,detail:0}),hn=on(dn),fn=B({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(an=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=an=0,un=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),mn=on(B({},fn,{dataTransfer:0})),gn=on(B({},dn,{relatedTarget:0})),vn=on(B({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=B({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),wn=on(B({},ln,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function Sn(){return En}var An=B({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=on(An),In=on(B({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=on(B({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Tn=on(B({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=B({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(Nn),Dn=[9,13,27,32],Mn=c&&"CompositionEvent"in window,Pn=null;c&&"documentMode"in document&&(Pn=document.documentMode);var Fn=c&&"TextEvent"in window&&!Pn,Bn=c&&(!Mn||Pn&&8<Pn&&11>=Pn),Ln=String.fromCharCode(32),zn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Un(e,t,n,r){Ae(r),0<(t=Kr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Xn=null;function Zn(e){Lr(e,0)}function qn(e){if(X(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(c){var Qn;if(c){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Qn=$n}else Qn=!1;Jn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Xn=Kn=null)}function nr(e){if("value"===e.propertyName&&qn(Xn)){var t=[];Un(t,Xn,e,xe(e)),Ne(Zn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qn(Xn)}function or(e,t){if("click"===e)return qn(t)}function ar(e,t){if("input"===e||"change"===e)return qn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var a=cr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Z(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Cr={},Er={};function Sr(e){if(Cr[e])return Cr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Cr[e]=n[t];return e}c&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Ar=Sr("animationend"),kr=Sr("animationiteration"),Ir=Sr("animationstart"),Rr=Sr("transitionend"),Tr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Tr.set(e,t),u(t,[e])}for(var Dr=0;Dr<Nr.length;Dr++){var Mr=Nr[Dr];Or(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Or(Ar,"onAnimationEnd"),Or(kr,"onAnimationIteration"),Or(Ir,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Rr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Br(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,l){if(We.apply(this,arguments),Fe){if(!Fe)throw Error(o(198));var c=Be;Fe=!1,Be=null,Le||(Le=!0,ze=c)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Br(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Br(i,s,l),o=u}}}if(Le)throw e=ze,Le=!1,ze=null,e}function zr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Wr="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[Wr]){e[Wr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Wr]||(t[Wr]=!0,jr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Yt(t)){case 1:var i=Ut;break;case 4:i=Kt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=yi(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}Ne((function(){var r=o,i=xe(n),a=[];e:{var s=Tr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=kn;break;case"focusin":l="focus",u=gn;break;case"focusout":l="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Rn;break;case Ar:case kr:case Ir:u=vn;break;case Rr:u=Tn;break;case"scroll":u=hn;break;case"wheel":u=On;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Oe(p,h))&&c.push(Ur(p,m,f)))),d)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(d=He(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==u?s:wi(u),f=null==l?s:wi(l),(s=new c(m,p+"leave",u,n,i)).target=d,s.relatedTarget=f,m=null,yi(i)===r&&((c=new c(h,p+"enter",l,n,i)).target=f,c.relatedTarget=d,m=c),d=m,u&&l)e:{for(h=l,p=0,f=c=u;f;f=Xr(f))p++;for(f=0,m=h;m;m=Xr(m))f++;for(;0<p-f;)c=Xr(c),p--;for(;0<f-p;)h=Xr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Xr(c),h=Xr(h)}c=null}else c=null;null!==u&&Zr(a,s,u,c,!1),null!==l&&null!==d&&Zr(a,d,l,c,!0)}if("select"===(u=(s=r?wi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Yn;else if(Gn(s))if(Jn)g=ar;else{g=ir;var v=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Un(a,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?wi(r):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(a,n,i)}var y;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?jn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Bn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(y=en()):(Qt="value"in(Jt=i)?Jt.value:Jt.textContent,Hn=!0)),0<(v=Kr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=Wn(n))&&(b.data=y))),(y=Fn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(zn=!0,Ln);case"textInput":return(e=t.data)===Ln&&zn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Mn&&jn(e,t)?(e=en(),$t=Qt=Jt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Lr(a,t)}))}function Ur(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Oe(e,n))&&r.unshift(Ur(e,o,i)),null!=(o=Oe(e,t))&&r.push(Ur(e,o,i))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Oe(n,o))&&a.unshift(Ur(n,u,s)):i||null!=(u=Oe(n,o))&&a.push(Ur(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(qr,"\n").replace(Yr,"")}function Qr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ht(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ht(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[hi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xi(e){return e[fi]||null}var _i=[],Ci=-1;function Ei(e){return{current:e}}function Si(e){0>Ci||(e.current=_i[Ci],_i[Ci]=null,Ci--)}function Ai(e,t){Ci++,_i[Ci]=e.current,e.current=t}var ki={},Ii=Ei(ki),Ri=Ei(!1),Ti=ki;function Ni(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Si(Ri),Si(Ii)}function Mi(e,t,n){if(Ii.current!==ki)throw Error(o(168));Ai(Ii,t),Ai(Ri,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,V(e)||"Unknown",i));return B({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Ti=Ii.current,Ai(Ii,e),Ai(Ri,Ri.current),!0}function Bi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Pi(e,t,Ti),r.__reactInternalMemoizedMergedChildContext=e,Si(Ri),Si(Ii),Ai(Ii,e)):Si(Ri),Ai(Ri,n)}var Li=null,zi=!1,ji=!1;function Wi(e){null===Li?Li=[e]:Li.push(e)}function Hi(){if(!ji&&null!==Li){ji=!0;var e=0,t=bt;try{var n=Li;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Li=null,zi=!1}catch(i){throw null!==Li&&(Li=Li.slice(e+1)),Xe($e,Hi),i}finally{bt=t,ji=!1}}return null}var Vi=[],Gi=0,Ui=null,Ki=0,Xi=[],Zi=0,qi=null,Yi=1,Ji="";function Qi(e,t){Vi[Gi++]=Ki,Vi[Gi++]=Ui,Ui=e,Ki=t}function $i(e,t,n){Xi[Zi++]=Yi,Xi[Zi++]=Ji,Xi[Zi++]=qi,qi=e;var r=Yi;e=Ji;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Yi=1<<32-at(t)+i|n<<i|r,Ji=o+e}else Yi=1<<o|n<<i|r,Ji=e}function eo(e){null!==e.return&&(Qi(e,1),$i(e,1,0))}function to(e){for(;e===Ui;)Ui=Vi[--Gi],Vi[Gi]=null,Ki=Vi[--Gi],Vi[Gi]=null;for(;e===qi;)qi=Xi[--Zi],Xi[Zi]=null,Ji=Xi[--Zi],Xi[Zi]=null,Yi=Xi[--Zi],Xi[Zi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Nl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==qi?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function uo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function lo(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(uo(e))throw Error(o(418));t=li(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(uo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return co(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(uo(e))throw fo(),Error(o(418));for(;t;)ao(e,t),t=li(t.nextSibling)}if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?li(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=li(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=w.ReactCurrentBatchConfig;function vo(e,t){if(e&&e.defaultProps){for(var n in t=B({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=Ei(null),bo=null,wo=null,xo=null;function _o(){xo=wo=bo=null}function Co(e){var t=yo.current;Si(yo),e._currentValue=t}function Eo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function So(e,t){bo=e,xo=wo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Ao(e){var t=e._currentValue;if(xo!==e)if(e={context:e,memoizedValue:t,next:null},null===wo){if(null===bo)throw Error(o(308));wo=e,bo.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return t}var ko=null;function Io(e){null===ko?ko=[e]:ko.push(e)}function Ro(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Io(t)):(n.next=i.next,i.next=n),t.interleaved=n,To(e,r)}function To(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var No=!1;function Oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Do(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Po(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Iu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,To(e,n)}return null===(i=r.interleaved)?(t.next=t,Io(r)):(t.next=i.next,i.next=t),r.interleaved=t,To(e,n)}function Fo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Lo(e,t,n,r){var i=e.updateQueue;No=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===a?o=l:a.next=l,a=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==o){var d=i.baseState;for(a=0,c=l=u=null,s=o;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=B({},d,h);break e;case 2:No=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=f,u=d):c=c.next=f,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(u=d),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Fu|=a,e.lanes=a,e.memoizedState=d}}function zo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var jo=(new r.Component).refs;function Wo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:B({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ho={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),o=Mo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Po(e,o,i))&&(nl(t,e,i,r),Fo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),o=Mo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Po(e,o,i))&&(nl(t,e,i,r),Fo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),i=Mo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Po(e,i,r))&&(nl(t,e,r,n),Fo(t,e,r))}};function Vo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,o))}function Go(e,t,n){var r=!1,i=ki,o=t.contextType;return"object"===typeof o&&null!==o?o=Ao(o):(i=Oi(t)?Ti:Ii.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):ki),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ho,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Uo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ho.enqueueReplaceState(t,t.state,null)}function Ko(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=jo,Oo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Ao(o):(o=Oi(t)?Ti:Ii.current,i.context=Ni(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Wo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ho.enqueueReplaceState(i,i.state,null),Lo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Xo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===jo&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Zo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qo(e){return(0,e._init)(e._payload)}function Yo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dl(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Bl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var o=n.type;return o===C?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&qo(o)===t.type)?((r=i(t,n.props)).ref=Xo(e,t,n),r.return=e,r):((r=Ml(n.type,n.key,n.props,null,e.mode,r)).ref=Xo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ll(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Pl(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Ml(t.type,t.key,t.props,null,e.mode,n)).ref=Xo(e,null,t),n.return=e,n;case _:return(t=Ll(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Pl(t,e.mode,n,null)).return=e,t;Zo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?l(e,t,n,r):null;case _:return n.key===i?c(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||P(n))return null!==i?null:d(e,t,n,r,null);Zo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||P(r))return d(t,e=e.get(n)||null,r,i,null);Zo(t,r)}return null}function m(i,o,s,u){for(var l=null,c=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,s[m],u);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),o=a(v,o,m),null===c?l=v:c.sibling=v,c=v,d=g}if(m===s.length)return n(i,d),io&&Qi(i,m),l;if(null===d){for(;m<s.length;m++)null!==(d=h(i,s[m],u))&&(o=a(d,o,m),null===c?l=d:c.sibling=d,c=d);return io&&Qi(i,m),l}for(d=r(i,d);m<s.length;m++)null!==(g=p(d,i,m,s[m],u))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=a(g,o,m),null===c?l=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(i,e)})),io&&Qi(i,m),l}function g(i,s,u,l){var c=P(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var d=c=null,m=s,g=s=0,v=null,y=u.next();null!==m&&!y.done;g++,y=u.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(i,m,y.value,l);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),s=a(b,s,g),null===d?c=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),io&&Qi(i,g),c;if(null===m){for(;!y.done;g++,y=u.next())null!==(y=h(i,y.value,l))&&(s=a(y,s,g),null===d?c=y:d.sibling=y,d=y);return io&&Qi(i,g),c}for(m=r(i,m);!y.done;g++,y=u.next())null!==(y=p(m,i,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),io&&Qi(i,g),c}return function e(r,o,a,u){if("object"===typeof a&&null!==a&&a.type===C&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var l=a.key,c=o;null!==c;){if(c.key===l){if((l=a.type)===C){if(7===c.tag){n(r,c.sibling),(o=i(c,a.props.children)).return=r,r=o;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===O&&qo(l)===c.type){n(r,c.sibling),(o=i(c,a.props)).ref=Xo(r,c,a),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===C?((o=Pl(a.props.children,r.mode,u,a.key)).return=r,r=o):((u=Ml(a.type,a.key,a.props,null,r.mode,u)).ref=Xo(r,o,a),u.return=r,r=u)}return s(r);case _:e:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Ll(a,r.mode,u)).return=r,r=o}return s(r);case O:return e(r,o,(c=a._init)(a._payload),u)}if(te(a))return m(r,o,a,u);if(P(a))return g(r,o,a,u);Zo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Bl(a,r.mode,u)).return=r,r=o),s(r)):n(r,o)}}var Jo=Yo(!0),Qo=Yo(!1),$o={},ea=Ei($o),ta=Ei($o),na=Ei($o);function ra(e){if(e===$o)throw Error(o(174));return e}function ia(e,t){switch(Ai(na,t),Ai(ta,e),Ai(ea,$o),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(ea),Ai(ea,t)}function oa(){Si(ea),Si(ta),Si(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=ue(t,e.type);t!==n&&(Ai(ta,e),Ai(ea,n))}function sa(e){ta.current===e&&(Si(ea),Si(ta))}var ua=Ei(0);function la(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ca=[];function da(){for(var e=0;e<ca.length;e++)ca[e]._workInProgressVersionPrimary=null;ca.length=0}var ha=w.ReactCurrentDispatcher,fa=w.ReactCurrentBatchConfig,pa=0,ma=null,ga=null,va=null,ya=!1,ba=!1,wa=0,xa=0;function _a(){throw Error(o(321))}function Ca(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Ea(e,t,n,r,i,a){if(pa=a,ma=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ha.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ba){a=0;do{if(ba=!1,wa=0,25<=a)throw Error(o(301));a+=1,va=ga=null,t.updateQueue=null,ha.current=ls,e=n(r,i)}while(ba)}if(ha.current=as,t=null!==ga&&null!==ga.next,pa=0,va=ga=ma=null,ya=!1,t)throw Error(o(300));return e}function Sa(){var e=0!==wa;return wa=0,e}function Aa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===va?ma.memoizedState=va=e:va=va.next=e,va}function ka(){if(null===ga){var e=ma.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===va?ma.memoizedState:va.next;if(null!==t)va=t,ga=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===va?ma.memoizedState=va=e:va=va.next=e}return va}function Ia(e,t){return"function"===typeof t?t(e):t}function Ra(e){var t=ka(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ga,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var u=s=null,l=null,c=a;do{var d=c.lane;if((pa&d)===d)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=h,s=r):l=l.next=h,ma.lanes|=d,Fu|=d}c=c.next}while(null!==c&&c!==a);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(ws=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,ma.lanes|=a,Fu|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ta(e){var t=ka(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(ws=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Na(){}function Oa(e,t){var n=ma,r=ka(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,ws=!0),r=r.queue,Ga(Pa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==va&&1&va.memoizedState.tag){if(n.flags|=2048,za(9,Ma.bind(null,n,r,i,t),void 0,null),null===Ru)throw Error(o(349));0!==(30&pa)||Da(n,t,i)}return i}function Da(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ma(e,t,n,r){t.value=n,t.getSnapshot=r,Fa(t)&&Ba(e)}function Pa(e,t,n){return n((function(){Fa(t)&&Ba(e)}))}function Fa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ba(e){var t=To(e,1);null!==t&&nl(t,e,1,-1)}function La(e){var t=Aa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,ma,e),[t.memoizedState,e]}function za(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ja(){return ka().memoizedState}function Wa(e,t,n,r){var i=Aa();ma.flags|=e,i.memoizedState=za(1|t,n,void 0,void 0===r?null:r)}function Ha(e,t,n,r){var i=ka();r=void 0===r?null:r;var o=void 0;if(null!==ga){var a=ga.memoizedState;if(o=a.destroy,null!==r&&Ca(r,a.deps))return void(i.memoizedState=za(t,n,o,r))}ma.flags|=e,i.memoizedState=za(1|t,n,o,r)}function Va(e,t){return Wa(8390656,8,e,t)}function Ga(e,t){return Ha(2048,8,e,t)}function Ua(e,t){return Ha(4,2,e,t)}function Ka(e,t){return Ha(4,4,e,t)}function Xa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ha(4,4,Xa.bind(null,t,e),n)}function qa(){}function Ya(e,t){var n=ka();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ca(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ja(e,t){var n=ka();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ca(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qa(e,t,n){return 0===(21&pa)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),ma.lanes|=n,Fu|=n,e.baseState=!0),t)}function $a(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=fa.transition;fa.transition={};try{e(!1),t()}finally{bt=n,fa.transition=r}}function es(){return ka().memoizedState}function ts(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ro(e,t,n,r))){nl(n,e,r,el()),os(n,t,r)}}function ns(e,t,n){var r=tl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var u=t.interleaved;return null===u?(i.next=i,Io(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ro(e,t,i,r))&&(nl(n,e,r,i=el()),os(n,t,r))}}function rs(e){var t=e.alternate;return e===ma||null!==t&&t===ma}function is(e,t){ba=ya=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function os(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var as={readContext:Ao,useCallback:_a,useContext:_a,useEffect:_a,useImperativeHandle:_a,useInsertionEffect:_a,useLayoutEffect:_a,useMemo:_a,useReducer:_a,useRef:_a,useState:_a,useDebugValue:_a,useDeferredValue:_a,useTransition:_a,useMutableSource:_a,useSyncExternalStore:_a,useId:_a,unstable_isNewReconciler:!1},ss={readContext:Ao,useCallback:function(e,t){return Aa().memoizedState=[e,void 0===t?null:t],e},useContext:Ao,useEffect:Va,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Wa(4194308,4,Xa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wa(4,2,e,t)},useMemo:function(e,t){var n=Aa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Aa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,ma,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Aa().memoizedState=e},useState:La,useDebugValue:qa,useDeferredValue:function(e){return Aa().memoizedState=e},useTransition:function(){var e=La(!1),t=e[0];return e=$a.bind(null,e[1]),Aa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ma,i=Aa();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ru)throw Error(o(349));0!==(30&pa)||Da(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Va(Pa.bind(null,r,a,e),[e]),r.flags|=2048,za(9,Ma.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Aa(),t=Ru.identifierPrefix;if(io){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-at(Yi)-1)).toString(32)+n),0<(n=wa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ao,useCallback:Ya,useContext:Ao,useEffect:Ga,useImperativeHandle:Za,useInsertionEffect:Ua,useLayoutEffect:Ka,useMemo:Ja,useReducer:Ra,useRef:ja,useState:function(){return Ra(Ia)},useDebugValue:qa,useDeferredValue:function(e){return Qa(ka(),ga.memoizedState,e)},useTransition:function(){return[Ra(Ia)[0],ka().memoizedState]},useMutableSource:Na,useSyncExternalStore:Oa,useId:es,unstable_isNewReconciler:!1},ls={readContext:Ao,useCallback:Ya,useContext:Ao,useEffect:Ga,useImperativeHandle:Za,useInsertionEffect:Ua,useLayoutEffect:Ka,useMemo:Ja,useReducer:Ta,useRef:ja,useState:function(){return Ta(Ia)},useDebugValue:qa,useDeferredValue:function(e){var t=ka();return null===ga?t.memoizedState=e:Qa(t,ga.memoizedState,e)},useTransition:function(){return[Ta(Ia)[0],ka().memoizedState]},useMutableSource:Na,useSyncExternalStore:Oa,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Mo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gu||(Gu=!0,Uu=r),hs(0,t)},n}function ms(e,t,n){(n=Mo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Ku?Ku=new Set([this]):Ku.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sl.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Mo(-1,1)).tag=2,Po(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bs=w.ReactCurrentOwner,ws=!1;function xs(e,t,n,r){t.child=null===e?Qo(t,null,n,r):Jo(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var o=t.ref;return So(t,i),r=Ea(e,t,n,r,o,i),n=Sa(),null===e||ws?(io&&n&&eo(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function Cs(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Ol(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ml(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Es(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(a,r)&&e.ref===t.ref)return Gs(e,t,i)}return t.flags|=1,(e=Dl(o,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(ur(o,r)&&e.ref===t.ref){if(ws=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Gs(e,t,i);0!==(131072&e.flags)&&(ws=!0)}}return ks(e,t,n,r,i)}function Ss(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(Du,Ou),Ou|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ai(Du,Ou),Ou|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ai(Du,Ou),Ou|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ai(Du,Ou),Ou|=r;return xs(e,t,i,n),t.child}function As(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ks(e,t,n,r,i){var o=Oi(n)?Ti:Ii.current;return o=Ni(t,o),So(t,i),n=Ea(e,t,n,r,o,i),r=Sa(),null===e||ws?(io&&r&&eo(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function Is(e,t,n,r,i){if(Oi(n)){var o=!0;Fi(t)}else o=!1;if(So(t,i),null===t.stateNode)Vs(e,t),Go(t,n,r),Ko(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ao(l):l=Ni(t,l=Oi(n)?Ti:Ii.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==l)&&Uo(t,a,r,l),No=!1;var h=t.memoizedState;a.state=h,Lo(t,r,a,i),u=t.memoizedState,s!==r||h!==u||Ri.current||No?("function"===typeof c&&(Wo(t,n,c,r),u=t.memoizedState),(s=No||Vo(t,n,s,r,h,u,l))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Do(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:vo(t.type,s),a.props=l,d=t.pendingProps,h=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ao(u):u=Ni(t,u=Oi(n)?Ti:Ii.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==u)&&Uo(t,a,r,u),No=!1,h=t.memoizedState,a.state=h,Lo(t,r,a,i);var p=t.memoizedState;s!==d||h!==p||Ri.current||No?("function"===typeof f&&(Wo(t,n,f,r),p=t.memoizedState),(l=No||Vo(t,n,l,r,h,p,u)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Rs(e,t,n,r,o,i)}function Rs(e,t,n,r,i,o){As(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Bi(t,n,!1),Gs(e,t,o);r=t.stateNode,bs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Jo(t,e.child,null,o),t.child=Jo(t,null,s,o)):xs(e,t,s,o),t.memoizedState=r.state,i&&Bi(t,n,!0),t.child}function Ts(e){var t=e.stateNode;t.pendingContext?Mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mi(0,t.context,!1),ia(e,t.containerInfo)}function Ns(e,t,n,r,i){return po(),mo(i),t.flags|=256,xs(e,t,n,r),t.child}var Os,Ds,Ms,Ps={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bs(e,t,n){var r,i=t.pendingProps,a=ua.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ai(ua,1&a),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Fl(u,i,0,null),e=Pl(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Ps,e):Ls(t,u));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,zs(e,t,s,r=ds(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Fl({mode:"visible",children:r.children},i,0,null),(a=Pl(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Jo(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ps,a);if(0===(1&t.mode))return zs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,zs(e,t,s,r=ds(a=Error(o(419)),r,void 0))}if(u=0!==(s&e.childLanes),ws||u){if(null!==(r=Ru)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,To(e,i),nl(r,e,i,-1))}return ml(),zs(e,t,s,r=ds(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=kl.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=li(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Xi[Zi++]=Yi,Xi[Zi++]=Ji,Xi[Zi++]=qi,Yi=e.id,Ji=e.overflow,qi=t),t=Ls(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,a,n);if(s){s=i.fallback,u=t.mode,r=(a=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Dl(a,l)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Dl(r,s):(s=Pl(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Fs(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ps,i}return e=(s=e.child).sibling,i=Dl(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ls(e,t){return(t=Fl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,r){return null!==r&&mo(r),Jo(t,e.child,null,n),(e=Ls(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function js(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Eo(e.return,t,n)}function Ws(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Hs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&js(e,n,t);else if(19===e.tag)js(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ai(ua,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===la(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ws(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===la(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ws(t,!0,n,null,o);break;case"together":Ws(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Dl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Us(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Oi(t.type)&&Di(),Ks(t),null;case 3:return r=t.stateNode,oa(),Si(Ri),Si(Ii),da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(al(oo),oo=null))),Ks(t),null;case 5:sa(t);var i=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ks(t),null}if(e=ra(ea.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Pr.length;i++)zr(Pr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Y(r,a),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},zr("invalid",r);break;case"textarea":ie(r,a),zr("invalid",r)}for(var u in ye(n,a),i=null,a)if(a.hasOwnProperty(u)){var l=a[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,l,e),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&zr("scroll",r)}switch(n){case"input":K(r),$(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hi]=t,e[fi]=r,Os(e,t),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pr.length;i++)zr(Pr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":Y(e,r),i=q(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=B({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(a in ye(n,i),l=i)if(l.hasOwnProperty(a)){var c=l[a];"style"===a?ge(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&zr("scroll",e):null!=c&&b(e,a,c,u))}switch(n){case"input":K(e),$(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Ms(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ea.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ks(t),null;case 13:if(Si(ua),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),a=!1}else null!==oo&&(al(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ua.current)?0===Mu&&(Mu=3):ml())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return oa(),null===e&&Hr(t.stateNode.containerInfo),Ks(t),null;case 10:return Co(t.type._context),Ks(t),null;case 19:if(Si(ua),null===(a=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(u=a.rendering))if(r)Us(a,!1);else{if(0!==Mu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=la(e))){for(t.flags|=128,Us(a,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ai(ua,1&ua.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Hu&&(t.flags|=128,r=!0,Us(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=la(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Us(a,!0),null===a.tail&&"hidden"===a.tailMode&&!u.alternate&&!io)return Ks(t),null}else 2*Je()-a.renderingStartTime>Hu&&1073741824!==n&&(t.flags|=128,r=!0,Us(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=a.last)?n.sibling=u:t.child=u,a.last=u)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=ua.current,Ai(ua,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ou)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Zs(e,t){switch(to(t),t.tag){case 1:return Oi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oa(),Si(Ri),Si(Ii),da(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(Si(ua),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(ua),null;case 4:return oa(),null;case 10:return Co(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ra(ea.current);var o,a=null;switch(n){case"input":i=q(e,i),r=q(e,r),a=[];break;case"select":i=B({},i,{value:void 0}),r=B({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(o in u)!u.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&u[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(a=a||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&zr("scroll",e),a||u===l||(a=[])):(a=a||[]).push(c,l))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Ms=function(e,t,n,r){n!==r&&(t.flags|=4)};var qs=!1,Ys=!1,Js="function"===typeof WeakSet?WeakSet:Set,Qs=null;function $s(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){El(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){El(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&eu(t,n,o)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function au(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||au(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var cu=null,du=!1;function hu(e,t,n){for(n=n.child;null!==n;)fu(e,t,n),n=n.sibling}function fu(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ys||$s(n,t);case 6:var r=cu,i=du;cu=null,hu(e,t,n),du=i,null!==(cu=r)&&(du?(e=cu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(du?(e=cu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Ht(e)):ui(cu,n.stateNode));break;case 4:r=cu,i=du,cu=n.stateNode.containerInfo,du=!0,hu(e,t,n),cu=r,du=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&eu(n,t,a),i=i.next}while(i!==r)}hu(e,t,n);break;case 1:if(!Ys&&($s(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){El(n,t,s)}hu(e,t,n);break;case 21:hu(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,hu(e,t,n),Ys=r):hu(e,t,n);break;default:hu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Il.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,du=!1;break e;case 3:case 4:cu=u.stateNode.containerInfo,du=!0;break e}u=u.return}if(null===cu)throw Error(o(160));fu(a,s,i),cu=null,du=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){El(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gu(t,e),t=t.sibling}function gu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),vu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(g){El(e,e.return,g)}try{nu(5,e,e.return)}catch(g){El(e,e.return,g)}}break;case 1:mu(t,e),vu(e),512&r&&null!==n&&$s(n,n.return);break;case 5:if(mu(t,e),vu(e),512&r&&null!==n&&$s(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){El(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===a.type&&null!=a.name&&J(i,a),be(u,s);var c=be(u,a);for(s=0;s<l.length;s+=2){var d=l[s],h=l[s+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,c)}switch(u){case"input":Q(i,a);break;case"textarea":oe(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){El(e,e.return,g)}}break;case 6:if(mu(t,e),vu(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){El(e,e.return,g)}}break;case 3:if(mu(t,e),vu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){El(e,e.return,g)}break;case 4:default:mu(t,e),vu(e);break;case 13:mu(t,e),vu(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Wu=Je())),4&r&&pu(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(c=Ys)||d,mu(t,e),Ys=c):mu(t,e),vu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Qs=e,d=e.child;null!==d;){for(h=Qs=d;null!==Qs;){switch(p=(f=Qs).child,f.tag){case 0:case 11:case 14:case 15:nu(4,f,f.return);break;case 1:$s(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){El(r,n,g)}}break;case 5:$s(f,f.return);break;case 22:if(null!==f.memoizedState){xu(h);continue}}null!==p?(p.return=f,Qs=p):xu(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(u=h.stateNode,s=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=me("display",s))}catch(g){El(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){El(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mu(t,e),vu(e),4&r&&pu(e);case 21:}}function vu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(au(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),lu(e,su(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;uu(e,su(e),a);break;default:throw Error(o(161))}}catch(s){El(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yu(e,t,n){Qs=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Qs;){var i=Qs,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||qs;if(!a){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Ys;s=qs;var l=Ys;if(qs=a,(Ys=u)&&!l)for(Qs=i;null!==Qs;)u=(a=Qs).child,22===a.tag&&null!==a.memoizedState?_u(i):null!==u?(u.return=a,Qs=u):_u(i);for(;null!==o;)Qs=o,bu(o,t,n),o=o.sibling;Qs=i,qs=s,Ys=l}wu(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Qs=o):wu(e)}}function wu(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:vo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&zo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zo(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(o(163))}Ys||512&t.flags&&iu(t)}catch(f){El(t,t.return,f)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function xu(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function _u(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){El(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){El(t,i,u)}}var o=t.return;try{iu(t)}catch(u){El(t,o,u)}break;case 5:var a=t.return;try{iu(t)}catch(u){El(t,a,u)}}}catch(u){El(t,t.return,u)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var Cu,Eu=Math.ceil,Su=w.ReactCurrentDispatcher,Au=w.ReactCurrentOwner,ku=w.ReactCurrentBatchConfig,Iu=0,Ru=null,Tu=null,Nu=0,Ou=0,Du=Ei(0),Mu=0,Pu=null,Fu=0,Bu=0,Lu=0,zu=null,ju=null,Wu=0,Hu=1/0,Vu=null,Gu=!1,Uu=null,Ku=null,Xu=!1,Zu=null,qu=0,Yu=0,Ju=null,Qu=-1,$u=0;function el(){return 0!==(6&Iu)?Je():-1!==Qu?Qu:Qu=Je()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Iu)&&0!==Nu?Nu&-Nu:null!==go.transition?(0===$u&&($u=mt()),$u):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nl(e,t,n,r){if(50<Yu)throw Yu=0,Ju=null,Error(o(185));vt(e,n,r),0!==(2&Iu)&&e===Ru||(e===Ru&&(0===(2&Iu)&&(Bu|=n),4===Mu&&sl(e,Nu)),rl(e,r),1===n&&0===Iu&&0===(1&t.mode)&&(Hu=Je()+500,zi&&Hi()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,u=i[a];-1===u?0!==(s&n)&&0===(s&r)||(i[a]=ft(s,t)):u<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ht(e,e===Ru?Nu:0);if(0===r)null!==n&&Ze(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ze(n),1===t)0===e.tag?function(e){zi=!0,Wi(e)}(ul.bind(null,e)):Wi(ul.bind(null,e)),ai((function(){0===(6&Iu)&&Hi()})),n=null;else{switch(wt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rl(n,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function il(e,t){if(Qu=-1,$u=0,0!==(6&Iu))throw Error(o(327));var n=e.callbackNode;if(_l()&&e.callbackNode!==n)return null;var r=ht(e,e===Ru?Nu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gl(e,r);else{t=r;var i=Iu;Iu|=2;var a=pl();for(Ru===e&&Nu===t||(Vu=null,Hu=Je()+500,hl(e,t));;)try{yl();break}catch(u){fl(e,u)}_o(),Su.current=a,Iu=i,null!==Tu?t=0:(Ru=null,Nu=0,t=Mu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ol(e,i))),1===t)throw n=Pu,hl(e,0),sl(e,r),rl(e,Je()),n;if(6===t)sl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gl(e,r))&&(0!==(a=pt(e))&&(r=a,t=ol(e,a))),1===t))throw n=Pu,hl(e,0),sl(e,r),rl(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:xl(e,ju,Vu);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=Wu+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xl.bind(null,e,ju,Vu),t);break}xl(e,ju,Vu);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){e.timeoutHandle=ri(xl.bind(null,e,ju,Vu),r);break}xl(e,ju,Vu);break;default:throw Error(o(329))}}}return rl(e,Je()),e.callbackNode===n?il.bind(null,e):null}function ol(e,t){var n=zu;return e.current.memoizedState.isDehydrated&&(hl(e,t).flags|=256),2!==(e=gl(e,t))&&(t=ju,ju=n,null!==t&&al(t)),e}function al(e){null===ju?ju=e:ju.push.apply(ju,e)}function sl(e,t){for(t&=~Lu,t&=~Bu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function ul(e){if(0!==(6&Iu))throw Error(o(327));_l();var t=ht(e,0);if(0===(1&t))return rl(e,Je()),null;var n=gl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Pu,hl(e,0),sl(e,t),rl(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xl(e,ju,Vu),rl(e,Je()),null}function ll(e,t){var n=Iu;Iu|=1;try{return e(t)}finally{0===(Iu=n)&&(Hu=Je()+500,zi&&Hi())}}function cl(e){null!==Zu&&0===Zu.tag&&0===(6&Iu)&&_l();var t=Iu;Iu|=1;var n=ku.transition,r=bt;try{if(ku.transition=null,bt=1,e)return e()}finally{bt=r,ku.transition=n,0===(6&(Iu=t))&&Hi()}}function dl(){Ou=Du.current,Si(Du)}function hl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Tu)for(n=Tu.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:oa(),Si(Ri),Si(Ii),da();break;case 5:sa(r);break;case 4:oa();break;case 13:case 19:Si(ua);break;case 10:Co(r.type._context);break;case 22:case 23:dl()}n=n.return}if(Ru=e,Tu=e=Dl(e.current,null),Nu=Ou=t,Mu=0,Pu=null,Lu=Bu=Fu=0,ju=zu=null,null!==ko){for(t=0;t<ko.length;t++)if(null!==(r=(n=ko[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}ko=null}return e}function fl(e,t){for(;;){var n=Tu;try{if(_o(),ha.current=as,ya){for(var r=ma.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ya=!1}if(pa=0,va=ga=ma=null,ba=!1,wa=0,Au.current=null,null===n||null===n.return){Mu=1,Pu=t,Tu=null;break}e:{var a=e,s=n.return,u=n,l=t;if(t=Nu,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,d=u,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=vs(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&gs(a,c,t),l=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){gs(a,c,t),ml();break e}l=Error(o(426))}else if(io&&1&u.mode){var v=vs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ys(v,s,u,0,t),mo(cs(l,u));break e}}a=l=cs(l,u),4!==Mu&&(Mu=2),null===zu?zu=[a]:zu.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bo(a,ps(0,l,t));break e;case 1:u=l;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ku||!Ku.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Bo(a,ms(a,u,t));break e}}a=a.return}while(null!==a)}wl(n)}catch(w){t=w,Tu===n&&null!==n&&(Tu=n=n.return);continue}break}}function pl(){var e=Su.current;return Su.current=as,null===e?as:e}function ml(){0!==Mu&&3!==Mu&&2!==Mu||(Mu=4),null===Ru||0===(268435455&Fu)&&0===(268435455&Bu)||sl(Ru,Nu)}function gl(e,t){var n=Iu;Iu|=2;var r=pl();for(Ru===e&&Nu===t||(Vu=null,hl(e,t));;)try{vl();break}catch(i){fl(e,i)}if(_o(),Iu=n,Su.current=r,null!==Tu)throw Error(o(261));return Ru=null,Nu=0,Mu}function vl(){for(;null!==Tu;)bl(Tu)}function yl(){for(;null!==Tu&&!qe();)bl(Tu)}function bl(e){var t=Cu(e.alternate,e,Ou);e.memoizedProps=e.pendingProps,null===t?wl(e):Tu=t,Au.current=null}function wl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xs(n,t,Ou)))return void(Tu=n)}else{if(null!==(n=Zs(n,t)))return n.flags&=32767,void(Tu=n);if(null===e)return Mu=6,void(Tu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tu=t);Tu=t=e}while(null!==t);0===Mu&&(Mu=5)}function xl(e,t,n){var r=bt,i=ku.transition;try{ku.transition=null,bt=1,function(e,t,n,r){do{_l()}while(null!==Zu);if(0!==(6&Iu))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Ru&&(Tu=Ru=null,Nu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xu||(Xu=!0,Rl(tt,(function(){return _l(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=ku.transition,ku.transition=null;var s=bt;bt=1;var u=Iu;Iu|=4,Au.current=null,function(e,t){if(ei=Gt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var s=0,u=-1,l=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(u=s+i),h!==a||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===i&&(u=s),f===a&&++d===r&&(l=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:vo(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(x){El(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}m=tu,tu=!1}(e,n),gu(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,yu(n,e,i),Ye(),Iu=u,bt=s,ku.transition=a}else e.current=n;if(Xu&&(Xu=!1,Zu=e,qu=i),a=e.pendingLanes,0===a&&(Ku=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gu)throw Gu=!1,e=Uu,Uu=null,e;0!==(1&qu)&&0!==e.tag&&_l(),a=e.pendingLanes,0!==(1&a)?e===Ju?Yu++:(Yu=0,Ju=e):Yu=0,Hi()}(e,t,n,r)}finally{ku.transition=i,bt=r}return null}function _l(){if(null!==Zu){var e=wt(qu),t=ku.transition,n=bt;try{if(ku.transition=null,bt=16>e?16:e,null===Zu)var r=!1;else{if(e=Zu,Zu=null,qu=0,0!==(6&Iu))throw Error(o(331));var i=Iu;for(Iu|=4,Qs=e.current;null!==Qs;){var a=Qs,s=a.child;if(0!==(16&Qs.flags)){var u=a.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Qs=c;null!==Qs;){var d=Qs;switch(d.tag){case 0:case 11:case 15:nu(8,d,a)}var h=d.child;if(null!==h)h.return=d,Qs=h;else for(;null!==Qs;){var f=(d=Qs).sibling,p=d.return;if(ou(d),d===c){Qs=null;break}if(null!==f){f.return=p,Qs=f;break}Qs=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Qs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(a=Qs).flags))switch(a.tag){case 0:case 11:case 15:nu(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Qs=y;break e}Qs=a.return}}var b=e.current;for(Qs=b;null!==Qs;){var w=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Qs=w;else e:for(s=b;null!==Qs;){if(0!==(2048&(u=Qs).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(_){El(u,u.return,_)}if(u===s){Qs=null;break e}var x=u.sibling;if(null!==x){x.return=u.return,Qs=x;break e}Qs=u.return}}if(Iu=i,Hi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{bt=n,ku.transition=t}}return!1}function Cl(e,t,n){e=Po(e,t=ps(0,t=cs(n,t),1),1),t=el(),null!==e&&(vt(e,1,t),rl(e,t))}function El(e,t,n){if(3===e.tag)Cl(e,e,n);else for(;null!==t;){if(3===t.tag){Cl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ku||!Ku.has(r))){t=Po(t,e=ms(t,e=cs(n,e),1),1),e=el(),null!==t&&(vt(t,1,e),rl(t,e));break}}t=t.return}}function Sl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Ru===e&&(Nu&n)===n&&(4===Mu||3===Mu&&(130023424&Nu)===Nu&&500>Je()-Wu?hl(e,0):Lu|=n),rl(e,t)}function Al(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=el();null!==(e=To(e,t))&&(vt(e,t,n),rl(e,n))}function kl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Al(e,n)}function Il(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Al(e,n)}function Rl(e,t){return Xe(e,t)}function Tl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nl(e,t,n,r){return new Tl(e,t,n,r)}function Ol(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dl(e,t){var n=e.alternate;return null===n?((n=Nl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ml(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Ol(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case C:return Pl(n.children,i,a,t);case E:s=8,i|=8;break;case S:return(e=Nl(12,n,t,2|i)).elementType=S,e.lanes=a,e;case R:return(e=Nl(13,n,t,i)).elementType=R,e.lanes=a,e;case T:return(e=Nl(19,n,t,i)).elementType=T,e.lanes=a,e;case D:return Fl(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case k:s=9;break e;case I:s=11;break e;case N:s=14;break e;case O:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Nl(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Pl(e,t,n,r){return(e=Nl(7,e,r,t)).lanes=n,e}function Fl(e,t,n,r){return(e=Nl(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Bl(e,t,n){return(e=Nl(6,e,null,t)).lanes=n,e}function Ll(e,t,n){return(t=Nl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jl(e,t,n,r,i,o,a,s,u){return e=new zl(e,t,n,s,u),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Nl(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(o),e}function Wl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Hl(e){if(!e)return ki;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Pi(e,n,t)}return t}function Vl(e,t,n,r,i,o,a,s,u){return(e=jl(n,r,!0,e,0,o,0,s,u)).context=Hl(null),n=e.current,(o=Mo(r=el(),i=tl(n))).callback=void 0!==t&&null!==t?t:null,Po(n,o,i),e.current.lanes=i,vt(e,i,r),rl(e,r),e}function Gl(e,t,n,r){var i=t.current,o=el(),a=tl(i);return n=Hl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Mo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Po(i,t,a))&&(nl(e,i,a,o),Fo(e,i,a)),a}function Ul(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xl(e,t){Kl(e,t),(e=e.alternate)&&Kl(e,t)}Cu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)ws=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ws=!1,function(e,t,n){switch(t.tag){case 3:Ts(t),po();break;case 5:aa(t);break;case 1:Oi(t.type)&&Fi(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ai(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ai(ua,1&ua.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Bs(e,t,n):(Ai(ua,1&ua.current),null!==(e=Gs(e,t,n))?e.sibling:null);Ai(ua,1&ua.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Hs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Gs(e,t,n)}(e,t,n);ws=0!==(131072&e.flags)}else ws=!1,io&&0!==(1048576&t.flags)&&$i(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vs(e,t),e=t.pendingProps;var i=Ni(t,Ii.current);So(t,n),i=Ea(null,t,r,e,i,n);var a=Sa();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(a=!0,Fi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oo(t),i.updater=Ho,t.stateNode=i,i._reactInternals=t,Ko(t,r,e,n),t=Rs(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),xs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ol(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===N)return 14}return 2}(r),e=vo(r,e),i){case 0:t=ks(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=Cs(null,t,r,vo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 3:e:{if(Ts(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Do(e,t),Lo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ns(e,t,r,n,i=cs(Error(o(423)),t));break e}if(r!==i){t=Ns(e,t,r,n,i=cs(Error(o(424)),t));break e}for(ro=li(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Qo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Gs(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&lo(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),As(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&lo(t),null;case 13:return Bs(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Jo(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ai(yo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ri.current){t=Gs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var u=a.dependencies;if(null!==u){s=a.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=Mo(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Eo(a.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Eo(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,So(t,n),r=r(i=Ao(i)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return i=vo(r=t.type,t.pendingProps),Cs(e,t,r,i=vo(r.type,i),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vo(r,i),Vs(e,t),t.tag=1,Oi(r)?(e=!0,Fi(t)):e=!1,So(t,n),Go(t,r,i),Ko(t,r,i,n),Rs(null,t,r,!0,e,n);case 19:return Hs(e,t,n);case 22:return Ss(e,t,n)}throw Error(o(156,t.tag))};var Zl="function"===typeof reportError?reportError:function(e){console.error(e)};function ql(e){this._internalRoot=e}function Yl(e){this._internalRoot=e}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $l(){}function ec(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Ul(a);s.call(e)}}Gl(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Ul(a);o.call(e)}}var a=Vl(t,r,e,0,null,!1,0,"",$l);return e._reactRootContainer=a,e[pi]=a.current,Hr(8===e.nodeType?e.parentNode:e),cl(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Ul(u);s.call(e)}}var u=jl(e,0,!1,null,0,!1,0,"",$l);return e._reactRootContainer=u,e[pi]=u.current,Hr(8===e.nodeType?e.parentNode:e),cl((function(){Gl(t,u,n,r)})),u}(n,t,e,i,r);return Ul(a)}Yl.prototype.render=ql.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Gl(e,t,null,null)},Yl.prototype.unmount=ql.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl((function(){Gl(null,e,null,null)})),t[pi]=null}},Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Bt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,Je()),0===(6&Iu)&&(Hu=Je()+500,Hi()))}break;case 13:cl((function(){var t=To(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Xl(e,1)}},_t=function(e){if(13===e.tag){var t=To(e,134217728);if(null!==t)nl(t,e,134217728,el());Xl(e,134217728)}},Ct=function(e){if(13===e.tag){var t=tl(e),n=To(e,t);if(null!==n)nl(n,e,t,el());Xl(e,t)}},Et=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(o(90));X(r),Q(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=ll,Re=cl;var tc={usingClientEntryPoint:!1,Events:[bi,wi,xi,Ae,ke,ll]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ue(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),ot=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jl(t))throw Error(o(200));return Wl(e,t,null,n)},t.createRoot=function(e,t){if(!Jl(e))throw Error(o(299));var n=!1,r="",i=Zl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Hr(8===e.nodeType?e.parentNode:e),new ql(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ue(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!Ql(t))throw Error(o(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jl(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Zl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vl(t,null,e,1,null!=n?n:null,i,0,a,s),e[pi]=t.current,Hr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yl(t)},t.render=function(e,t,n){if(!Ql(t))throw Error(o(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ql(e))throw Error(o(40));return!!e._reactRootContainer&&(cl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ql(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:o,_owner:s.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,C={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(o[i]=t[i]);var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===o[i]&&(o[i]=u[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:C.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return a=a(u=e),e=""===o?"."+I(u,0):o,x(a)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),R(a,t,i,"",(function(e){return e}))):null!=a&&(A(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(k,"$&/")+"/")+e)),t.push(a)),1;if(u=0,o=""===o?".":o+":",x(e))for(var l=0;l<e.length;l++){var c=o+I(s=e[l],l);u+=R(s,t,i,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=R(s=s.value,t,i,c=o+I(s,l++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function T(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},D={transition:null},M={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:D,ReactCurrentOwner:C};t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=C.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)_.call(t,l)&&!E.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>o(u,n))l<i&&0>o(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>o(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function x(e){if(g=!1,w(e),!m)if(null!==r(l))m=!0,D(_);else{var t=r(c);null!==t&&M(x,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,y(A),A=-1),p=!0;var o=f;try{for(w(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!R());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(l)&&i(l),w(n)}else i(l);h=r(l)}if(null!==h)var u=!0;else{var d=r(c);null!==d&&M(x,d.startTime-n),u=!1}return u}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,E=!1,S=null,A=-1,k=5,I=-1;function R(){return!(t.unstable_now()-I<k)}function T(){if(null!==S){var e=t.unstable_now();I=e;var n=!0;try{n=S(!0,e)}finally{n?C():(E=!1,S=null)}}else E=!1}if("function"===typeof b)C=function(){b(T)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,O=N.port2;N.port1.onmessage=T,C=function(){O.postMessage(null)}}else C=function(){v(T,0)};function D(e){S=e,E||(E=!0,C())}function M(e,n){A=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(l)&&e===r(c)&&(g?(y(A),A=-1):g=!0,M(x,o-a))):(e.sortIndex=s,n(l,e),m||p||(m=!0,D(_))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},1668:function(e,t,n){var r={"./audio/kcd.mp3":3569};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=1668},9977:function(e,t,n){var r={"./img/armory/hrad-35.jpg":3658,"./img/armory/hrad-36.jpg":4466,"./img/armory/hrad-37.jpg":4599,"./img/armory/hrad-38.jpg":4847,"./img/armory/hrad-39.jpg":7630,"./img/armory/hrad-40.jpg":7987,"./img/armory/hrad-41.jpg":1037,"./img/armory/hrad-42.jpg":353,"./img/castle/albrecht.jpg":221,"./img/castle/castle.jpg":9543,"./img/castle/dolni_nadvori.jpg":2378,"./img/castle/eduard.jpg":827,"./img/castle/hradni_nadvori.jpg":3363,"./img/castle/jidelna.jpg":2857,"./img/castle/lovecky_salon.jpg":4134,"./img/castle/nositka.jpg":942,"./img/castle/obrazarna.jpg":7896,"./img/castle/piano.jpg":1533,"./img/castle/postroje.jpg":8956,"./img/castle/pred_kapli.jpg":8669,"./img/castle/prvni_hradni.jpg":250,"./img/castle/rytirsky_sal.jpg":8222,"./img/castle/uniformy.jpg":4332,"./img/castle/vezeni.jpg":3654,"./img/castle/vrchnostenska.jpg":6173,"./img/castle/zbrojnice1.jpg":8617,"./img/castle/zbrojnice2.jpg":5581,"./img/chateau/chateau.jpg":9233,"./img/chateau/chodba.jpg":9549,"./img/chateau/detsky_pokoj.jpg":5044,"./img/chateau/dolni_nadvori.jpg":3752,"./img/chateau/erbovni_sal.jpg":6023,"./img/chateau/jidelna.jpg":3487,"./img/chateau/kaple.jpg":535,"./img/chateau/knihovna.jpg":6581,"./img/chateau/koupelna.jpg":228,"./img/chateau/kuchyne.jpg":453,"./img/chateau/kvetinovy_salon.jpg":9453,"./img/chateau/lokajna.jpg":1640,"./img/chateau/loznice.jpg":5114,"./img/chateau/loznice_damske1.jpg":6410,"./img/chateau/loznice_dcer_podkrovi.jpg":710,"./img/chateau/loznice_klotildy.jpg":4191,"./img/chateau/modry_salon.jpg":1419,"./img/chateau/panska_chodba.jpg":6268,"./img/chateau/podkrovi.jpg":2105,"./img/chateau/pokoj_dcer_2.jpg":2387,"./img/chateau/pokoj_sluzebnych_podkrovi.jpg":2999,"./img/chateau/pokoj_vychovatelky.jpg":6538,"./img/chateau/pracovna.jpg":2103,"./img/chateau/prevlekarna.jpg":1485,"./img/chateau/prevlekarna_salon.jpg":261,"./img/chateau/prijimaci_salon.jpg":5895,"./img/chateau/pripravna.jpg":4146,"./img/chateau/salon_damske.jpg":384,"./img/chateau/spizirna.jpg":6483,"./img/chateau/stanovy_salon.bak.jpg":1963,"./img/chateau/stanovy_salon.jpg":9401,"./img/chateau/ucebna.jpg":6373,"./img/chateau/umyvarna.jpg":8060,"./img/coat_of_arms/albrecht.png":3146,"./img/coat_of_arms/biberstejnove.png":599,"./img/coat_of_arms/clamgallasove.png":9329,"./img/coat_of_arms/gallasove.png":5688,"./img/coat_of_arms/redernove.png":8584,"./img/coat_of_arms/ronovci.png":7049,"./img/history/history.jpg":7218,"./img/history/houses.jpg":6903,"./img/homepage_afternoon.jpg":2347,"./img/homepage_evening.jpg":2964,"./img/homepage_morning.jpg":4610,"./img/homepage_night.jpg":7693,"./img/icons/icon-128.png":345,"./img/icons/icon-256.png":5920,"./img/icons/icon-48.png":9485,"./img/icons/icon-512.png":6344,"./img/icons/icon-64.png":9771,"./img/icons/maskable-icon-192.png":295,"./img/other/map.png":5913,"./img/people/albrecht_valdstejn.jpg":7695,"./img/people/antonin_pankrac_gallas.jpg":5619,"./img/people/clotilda_clamgallas_mladsi.jpg":2411,"./img/people/eduard_clamgallas.jpg":2134,"./img/people/filip_josef_gallas.jpg":2789,"./img/people/frantisek_clamgallas.jpg":5648,"./img/people/frantisek_ferdinand_gallas.jpg":4361,"./img/people/jan_vaclav_gallas.jpg":7862,"./img/people/katerina_redern.jpg":5130,"./img/people/kristian_filip_clamgallas.jpg":9565,"./img/people/kristian_krystof_clamgallas.jpg":2881,"./img/people/krystof_redern.jpg":7377,"./img/people/matyas_gallas.jpg":8865,"./img/people/melchior_redern.jpg":6497,"./img/people/vilem_clamgallas.jpg":2856,"./img/where_to_next/grabstejn.jpg":878};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=9977},3569:function(e,t,n){"use strict";e.exports=n.p+"static/media/kcd.c641e6bdef1eca0b740e.mp3"},3658:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-35.2bfad008d6033eed7ea3.jpg"},4466:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-36.db49515035148f07c7b9.jpg"},4599:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-37.749fdba6fa140097af25.jpg"},4847:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-38.fa79ca865aff7f135a36.jpg"},7630:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-39.64e78e553cf61632f4ef.jpg"},7987:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-40.bdfbf1871d9d64526f3e.jpg"},1037:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-41.392028f0865b5f097a25.jpg"},353:function(e,t,n){"use strict";e.exports=n.p+"static/media/hrad-42.77b26be7a647f838c213.jpg"},221:function(e,t,n){"use strict";e.exports=n.p+"static/media/albrecht.52e4e95f70f162da3a97.jpg"},9543:function(e,t,n){"use strict";e.exports=n.p+"static/media/castle.cff1eda313709fa912cb.jpg"},2378:function(e,t,n){"use strict";e.exports=n.p+"static/media/dolni_nadvori.ab1bcdd3190ec903fa16.jpg"},827:function(e,t,n){"use strict";e.exports=n.p+"static/media/eduard.c9568e15e7201d0bd007.jpg"},3363:function(e,t,n){"use strict";e.exports=n.p+"static/media/hradni_nadvori.30ef0a54665ce1689081.jpg"},2857:function(e,t,n){"use strict";e.exports=n.p+"static/media/jidelna.382baccc82eae9caa119.jpg"},4134:function(e,t,n){"use strict";e.exports=n.p+"static/media/lovecky_salon.34f62c573dbcdf8a3b2d.jpg"},942:function(e,t,n){"use strict";e.exports=n.p+"static/media/nositka.4bb512471877a10b717e.jpg"},7896:function(e,t,n){"use strict";e.exports=n.p+"static/media/obrazarna.3bf9fa26d9ff4efc0e03.jpg"},1533:function(e,t,n){"use strict";e.exports=n.p+"static/media/piano.0f223e921120c44daafb.jpg"},8956:function(e,t,n){"use strict";e.exports=n.p+"static/media/postroje.ac78bd95e093040ac007.jpg"},8669:function(e,t,n){"use strict";e.exports=n.p+"static/media/pred_kapli.cc658c370ce9b4be4235.jpg"},250:function(e,t,n){"use strict";e.exports=n.p+"static/media/prvni_hradni.56e9c328b2f0dac6402c.jpg"},8222:function(e,t,n){"use strict";e.exports=n.p+"static/media/rytirsky_sal.471b7508238a3c76ecbe.jpg"},4332:function(e,t,n){"use strict";e.exports=n.p+"static/media/uniformy.a35a62cef7db5781cd6c.jpg"},3654:function(e,t,n){"use strict";e.exports=n.p+"static/media/vezeni.0bbdda7a86b127bb1f10.jpg"},6173:function(e,t,n){"use strict";e.exports=n.p+"static/media/vrchnostenska.c0e8380c02bce3867b79.jpg"},8617:function(e,t,n){"use strict";e.exports=n.p+"static/media/zbrojnice1.257e7edfc5bd4b1343b8.jpg"},5581:function(e,t,n){"use strict";e.exports=n.p+"static/media/zbrojnice2.70af679ac8c7e4223ced.jpg"},9233:function(e,t,n){"use strict";e.exports=n.p+"static/media/chateau.738dae2d061e04fa2599.jpg"},9549:function(e,t,n){"use strict";e.exports=n.p+"static/media/chodba.6ce06674c26fd941fb33.jpg"},5044:function(e,t,n){"use strict";e.exports=n.p+"static/media/detsky_pokoj.3ab328d9af482898196a.jpg"},3752:function(e,t,n){"use strict";e.exports=n.p+"static/media/dolni_nadvori.ab1bcdd3190ec903fa16.jpg"},6023:function(e,t,n){"use strict";e.exports=n.p+"static/media/erbovni_sal.aaa2ea1ab59e930f1e0e.jpg"},3487:function(e,t,n){"use strict";e.exports=n.p+"static/media/jidelna.a17cc410a92ba16dd9ec.jpg"},535:function(e,t,n){"use strict";e.exports=n.p+"static/media/kaple.28bd1da13db35622e397.jpg"},6581:function(e,t,n){"use strict";e.exports=n.p+"static/media/knihovna.78491cccf8b375facf9c.jpg"},228:function(e,t,n){"use strict";e.exports=n.p+"static/media/koupelna.4387f78c59f2755238a7.jpg"},453:function(e,t,n){"use strict";e.exports=n.p+"static/media/kuchyne.b70d43b19c8d9b68d5eb.jpg"},9453:function(e,t,n){"use strict";e.exports=n.p+"static/media/kvetinovy_salon.281beacfb67e51be263a.jpg"},1640:function(e,t,n){"use strict";e.exports=n.p+"static/media/lokajna.97cc51804b3b5b4ce98b.jpg"},5114:function(e,t,n){"use strict";e.exports=n.p+"static/media/loznice.f29b59a80cf39369942f.jpg"},6410:function(e,t,n){"use strict";e.exports=n.p+"static/media/loznice_damske1.723e22b671d43e1d9c0b.jpg"},710:function(e,t,n){"use strict";e.exports=n.p+"static/media/loznice_dcer_podkrovi.67dc992d308e5bc3611b.jpg"},4191:function(e,t,n){"use strict";e.exports=n.p+"static/media/loznice_klotildy.df160399755373d5796e.jpg"},1419:function(e,t,n){"use strict";e.exports=n.p+"static/media/modry_salon.9972d82cc11a328be74e.jpg"},6268:function(e,t,n){"use strict";e.exports=n.p+"static/media/panska_chodba.ba14bf784edf0af6238c.jpg"},2105:function(e,t,n){"use strict";e.exports=n.p+"static/media/podkrovi.9b99e2f97de64b30d2bd.jpg"},2387:function(e,t,n){"use strict";e.exports=n.p+"static/media/pokoj_dcer_2.1615da7c44288081c1d9.jpg"},2999:function(e,t,n){"use strict";e.exports=n.p+"static/media/pokoj_sluzebnych_podkrovi.363d755e58fbbf35022a.jpg"},6538:function(e,t,n){"use strict";e.exports=n.p+"static/media/pokoj_vychovatelky.ec8a8ebf474119bd4cdb.jpg"},2103:function(e,t,n){"use strict";e.exports=n.p+"static/media/pracovna.20bd670ecd462e4a14f5.jpg"},1485:function(e,t,n){"use strict";e.exports=n.p+"static/media/prevlekarna.7759a97615f47ec5e22f.jpg"},261:function(e,t,n){"use strict";e.exports=n.p+"static/media/prevlekarna_salon.67e34710441c671087dc.jpg"},5895:function(e,t,n){"use strict";e.exports=n.p+"static/media/prijimaci_salon.939c716778037542bfc4.jpg"},4146:function(e,t,n){"use strict";e.exports=n.p+"static/media/pripravna.73bfd7115f7168370c37.jpg"},384:function(e,t,n){"use strict";e.exports=n.p+"static/media/salon_damske.fd75ff8dfac88f10bef2.jpg"},6483:function(e,t,n){"use strict";e.exports=n.p+"static/media/spizirna.3d2b4af4319f97427817.jpg"},1963:function(e,t,n){"use strict";e.exports=n.p+"static/media/stanovy_salon.bak.7b67f8cd229ecc0f8db7.jpg"},9401:function(e,t,n){"use strict";e.exports=n.p+"static/media/stanovy_salon.9de783749b39a1b5af7a.jpg"},6373:function(e,t,n){"use strict";e.exports=n.p+"static/media/ucebna.588409a945ad3fedda9b.jpg"},8060:function(e,t,n){"use strict";e.exports=n.p+"static/media/umyvarna.052e6f26d4daeb2b511f.jpg"},3146:function(e,t,n){"use strict";e.exports=n.p+"static/media/albrecht.5e56006308a26c4c322b.png"},599:function(e,t,n){"use strict";e.exports=n.p+"static/media/biberstejnove.4603f4cf7203a58151a7.png"},9329:function(e,t,n){"use strict";e.exports=n.p+"static/media/clamgallasove.8e265acfc48203be2f18.png"},5688:function(e,t,n){"use strict";e.exports=n.p+"static/media/gallasove.5f3744c90f4f77454888.png"},8584:function(e,t,n){"use strict";e.exports=n.p+"static/media/redernove.82709b824f3fe8741d85.png"},7049:function(e,t,n){"use strict";e.exports=n.p+"static/media/ronovci.eebd686af2d2c8ee0a78.png"},7218:function(e,t,n){"use strict";e.exports=n.p+"static/media/history.d962ae0c2aa5f1750769.jpg"},6903:function(e,t,n){"use strict";e.exports=n.p+"static/media/houses.07f914a0dd3dd7af8ad3.jpg"},2347:function(e,t,n){"use strict";e.exports=n.p+"static/media/homepage_afternoon.7f63db193c0d93dd12b8.jpg"},2964:function(e,t,n){"use strict";e.exports=n.p+"static/media/homepage_evening.8c72f255b8838e80a20b.jpg"},4610:function(e,t,n){"use strict";e.exports=n.p+"static/media/homepage_morning.30a834f1f8c139dc55c9.jpg"},7693:function(e,t,n){"use strict";e.exports=n.p+"static/media/homepage_night.369b2625991d94b487cd.jpg"},345:function(e,t,n){"use strict";e.exports=n.p+"static/media/icon-128.987b6916ad8cabc59e8a.png"},5920:function(e,t,n){"use strict";e.exports=n.p+"static/media/icon-256.a582b8fbf057d003d7af.png"},9485:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAqCSURBVGhD1Zp3aFVpE8bHWGPvGnvvFVTsqKy7uljYtaNiRxFB/UcQVD4bKqyuiA1BxRYVwbXFvjZsid1YEruxxhp7Esv95jc5b/aam8SErxgfuOSec8953ynPMzPnkGw+RUxMjCQkJMiPhipVqog5EBkZKfXq1fNO/xhQs+XWrVsSxEFQUJBky5YtQx+Q2vn/98fZbA5kBtAtKyHTDmQ1rWTagc+fP3vfsgYy5cCHDx/k9u3b3lHWQKYcePTokezfv987yhrIlAOVK1eWNm3aeEdZA5lygNoLjbISMi3i+Ph471vWQKYcmPvHH7Jw4UKJi4vzznx/ZNgBqBN56ZKcO3dO1q5d6539/siwA2/fvpWSJUtK/fr1EYN3NguAYe7SpUv8SRdHjhzxNW7cGMt9efLk8V29etX75fvhxo0bvgxnoGDBgpKoY0SBAgUkMTFRypUr5/3yfZFhB2JjY3UOSjTj3SSYFZAhB96/fy9nzpyR+IR4+fTpk81D4eHh3q8ZByX4y5cv9v3jx4/SvHlzGT9+vJw4cUIWLFgg/fr1S15XGSLPnz+37+kCLn1LAw8fPvTt3r3b17ZtW19wcLDpoHPnzj51xLvi24iIiPAtW7bM1717dzt+9+6dL3fu3LYWH82ofUJDQ+33nTt3+kaNGuWbNWuWTx3xaRDtvD8yrAEiR+ShjTpgf9UhuXDhgndF2lDxy986Pz179kzU6ORhMEeOHEZFB7XH/rpOf/36dXny5IlMnDhRSpQoIfPmzbPzKfFNB169eiWXL1+Ww4cP2yxEKXUa2L59u3dVIK5duybLly83Q+NV/Ggoe/bsRiE+aCl//vze1UnAiadPn4pm3K7FacD1W7duldmzZ9uxP+yZGAPr1q3rnfoH8BROnoqIkHD90AuioqLk5s2b9jtOEJlx48bZsT9WrFghw4YNk127dsnLly/l/Pnz0qRJE5kzZ44ZVqhQISlatKjpCaOLFSsmr1+/lrx588q9e/csEzjk3/WbNm0qSkXvSMyOdDNA9HQV2aV0OX78uN2svPV+TXIgrZcBRBC6lS9f3oxq1KiRbNy40YwYNGiQtGvXTlq1amXCVT3ZOjVq1LD9eOqDbmTfgb1SE3W6DthNL17I48eP7RgdvNBjh5o1a0qpUqW8o69BdKEYThD5kJAQ6yG5cuUyh4gwTl69csX4vmPHDtNUjEafe+g7/O7oSjYy7QCA93CStEIF5wzIly+fGZoa0ArR575Tp07ZKxCi7C9cKMk1OOWMLlOmjBkMnaAX/Md4QGZSPtKm64AzlnTzqVWrlpQtW9YiWbp0ablz547s27fPrkkJogzPixcvbl27WrVqUrVqVSlcuLDpIUiNJDAInCr35s0bc/Lu3buWHZzKmTOnt1oSYEDKlwppihgOEjmiPGHCBDl79qxFJSUwasOGDUYTf2hvkXLqLIZ90QjGPo6V4LzBcl6nWY4LaAXKoQaiM6JMZKlUvLbBcCf806dPmy2A7LEewQHpiph6Xb16dVvgwYMHlu7UwCJdunSxDVMiSDn8Qs/fv39fihQtYmu81KpCFh9pdmfMmCEjR4604rB+/XoZPXq0LFq0SG7euGEltmLFijJ16lQrn61bt/6Kfg6pOoD6iciBAwesYcHLmlohqBJQp0KFCvZeEp47ge3ds8e7OwlEFaeI6rp16yyD3bp1k7Fjx9p5mhQRxjkaFTRjT6jzSjPN+W3btsnOsJ1Gtc6dOsn8P/+0df0R4ACLwDMW0pHZhEdTIpLoAF0gTK6Bqzwf4FBUdLS3wj+gsqxcudJKMBRDD4C5CoPZA2AsgQBEuU6dOhKt66Gh5y+em9bW6EMUevMvrSDAAQyk/G3ZssVSd0I3R3iUS6KPQ/CexgMliDAUIwv8ddBnBtm7d68NbJRe1oQuVC2GQ34HGEw2Ha8JDF2aoBFMtAmN0R8l3QXBIcABuuL06dPN0969e0shNb5hw4ZWTumgvFZhw44dO1oDatCggRl48uRJi5SDEzA8ZlMqDcYQVaILfWiKBGeFjhzQFWdwgGrE9WSIbOAQ5ZYg+jdSkP1fCoyGz4BmQYMqoZsSYcYJIoYRbM4G1GyMp7t2/Okn664I7xflKVkCOXVzKhgVqkePHkYzBjsaWrSOI1QggsS6RJvMI1yMpYKxL2MENGZPqhVjCI44oKUAByhZVJ+ZM2fKxchIuxnhsHBJFdu16Gv2hg7+swFphlJERx85rUc4cB7DCQg8JyOsw3k0AA0RN45Q49kHLbCmA0HEBtig47V3Ngk4oMPO17iirR0KjRg+XMrr5nD1rW6cT6NDBHfv2W0UwlGiTd1m4GPTTpoBtOAESbqhECBbOr9bRbt48aLRDuM5P3ToUNPPsWPHTPj0ARytVKmSBQqdpZxcHQI0wCa8//zt99/MUFJcVqMFp5s1a2YipAoRRSILTYjswYMHZfXq1baxP4gqTmEIemnRooWNDEWKFDF+YyyGQzVoQyb4SxCoXGPGjLG/KbuyQ4ADffr0MW/j4xNs4xzajBiqEnVRhHzo0CHZo72hQ4cOxk8qFYJkBJgyZYosXbrUOL1q1SqZPHmyTJo0SfJphcHxTZs2mWHV1HlqP1HHQYoDRrMP4Br2JhhHjx61TKYMjEOAAywEWAzhZNdPIY1YXhUu54gEkccZHjK6du1q0SSyZGjJkiXWuDZv3mydlugiaCoLhvFmQ78Ytz9rtKEe97IOWcJwpwUqkaMk31NDgAMOCAvx4Pl7XThB/7IYmmCWWR8aanW9ZcuWVh4RJM5jEJHlXkYMokfVwrjBgwfLff3tnRpPMGrVrm0PSIt1fFi8eLFllz0ARsP9AQMG2Pe0HvADHHAL4DFCJeJf1Ci4ac7oOcrqZ43ScBU6WaLCMNPf0rmIeyipe3S0QJAcU99pVDF3Y+z+qKhoux7DyB70JCMu4oAs8HwwZMgQ6zGME6khwAFXwogm/Js7d65lgx6A+HLTQXUTV+9xDEPgNIMa971WUTsQeWdom7ZtJFZnoDx5cltmMIoqRgNMi+PYwx7fdMCJibbN/MJ7mjVaVcJ2hEnPXr1MqEQ72BsBMIqNeSammvB4CDCYTkuHZfirXq26nUfY8+fPt+mV7PGSmJIN1TCS/dMCWUmLQtYHmPqo8SxIZUFweM0cc0vHavjNNYjUp4a/UwoBMgLfiTqNsG/fvlbje/XsKU20O4eFhRmVGImnTZuWTA9KL2sSBBzOCKAYTqYcqe2BhuhR7xEbPYCqwyzPTS61OPSrjg/MRpTRUqVK64S4xqZRxMmYzBsIMki26A1lQsrIufPnkivbfwIM93+YAckPNDzu0TvjXsaZoXHKeYRLdNywVlsrxua//rIRoLmWvfCIcJtYKZX0glCtSmSO14RUGIx+8DApO/8NEH0q3ogRI6xUMy8By8DAgQOTH06gEmC4YkYKKR0id+7ekV9+/llO6xzPQMU8T5du37696YZqQyfmfrLGjILwHWX+V2AUMQeYLCmNrhpQziifpM1xDmNo6f3797dnAkTFMMci/LMINfsjZVazxm8IE4e4n3vJLEWA73wA59w17jg1cA0fMusvdvqGOeAd/4AQ+TeNPt5p+r+iYgAAAABJRU5ErkJggg=="},6344:function(e,t,n){"use strict";e.exports=n.p+"static/media/icon-512.1bff783033e4814f3101.png"},9771:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAABAqSURBVHhe5dt3rFXVtgbwiUgVFQsqxYING4pcO3YFu9FYYr2CXaP+YzTWcKPGPKNeEks0Gr3YrrE8e++NIhYUAUUEVJCOoNIF7pu/wZ7ew7n7HOAQ33snjGRlr73OWnPN8Y1vfGPMuaHJv7Kl1dgCgI8++ig1bdq0cmn1sBkzZqSjjz46JQAMHjzYx2plI4YPj881KoA02JYsWVI5a5y2ygCM/vbbylnjtFUGYN68eZWzxmmrDMDi1T0Ffv/998pZ47RVAiCLaFowf37lW+O0VQJg2LBh6ZJLLw0gGqutEgDrr79+OuSQQ1KTJk0qVxqfrRIAnTp1SltttVXlW+O0VdaAuXPnVr41TltlAFbrKiD606dPr3xrnNZgAH766ad0zjnnpLvuuis9+uijlauNzxoMwJdffpnWXXfdtHjx4nTttddWrjY+azAArVu3Tptssklac8010+zZsxttL9AgAAjf999/HyzYa8890zbbbJOGDBlS+WvjsgYBwNm2bdumb/NS+KMBA9LHH3+cjjnmmLRw4cLKHY3HGgSA5gftLYU32GCDuLbLLruk5s2bx3ljsgYBQPhowKJFiyIdtMJrrNFgOfk/tQbN+pdffkmPPfZYmjJlSvrtt98CgFmzZgUwf4bNnDnzT+s4GwTA8OHD09prr5223nrrP6L/3XffxURX1ejInDlzKt+W2kUXXRQLr+OPPz69/PLL6e67706HH3546tChQ3rggQcqdy3dnyTOK7NPudIAiPj222+fOm+xRWrZsmUcIo8Bd955Z+WulTdldGAW1OeefTYdcMAB6b333qv8Zem2m1R77rnnYiv70rwEf/3114OBpRP1+eabb6Ynn3wyHXfccaFRK2INAkAFWKtNm6DlOuusE5N33HjjjRGBlTFsGjhwYHr44YfTogxkk8wme/ZKbLFWrVot02eUc590iLnn008/jfR88cUXQ5R79OiRbrrppvh7XbbSAIiGSU+aNClSoFmzZqlFixaRBo6akVsR44QfZTbccMMAc+rUqcGomnsMa621VuXsP01AmAqEERMnTozvY8eODWC/+uqr+F6XrRQA+v/hecDPP/88KLn55pvHxOWtvOMM9GvncG3joHTRQrsXmBz5atiwyGv5jsKiK7W03DUZUNN+/vnnNHr06JgboH799dfKX5baBx98kLbI6fr+++9Xrixr8dOYRmbP3NHVZ14A4U8/+SQN/eKLoJoooeqIESMqd+UB8zX0e+ONN1K7du0qV5e1H3/4IZ173nnprbfeSs8//3yw6Jtvvkk//vhjOuyww9LTTz+dXnvttWDGBhmMlpnezh0FGBGfP39+BGDsmLE5fRbFd5o0YcKEypv+bf948B+pd5/elW8pjcxz3mHHHVecASUCEzIQX3/9dYiQ3xTpQU1zX0y80iBVs9k56p5zLwcACziAAWTatGmpS5cuEZQtc9PlniuuuCLtv//+sf7Ydttt01577RVMAd6Mn2dEamLD5MwmVjOF2LTp0ypny9oKA4CGHH42qzSES8lbsGBBfBbz4p133rnexkjK0I0jjzwyde7cOXXr1i3Ufb/99gsKc3LjjTdOJ598cgCBwq+++mrMYdNOndLizICxY8akHzKTMEfUy5glUUrAChBSqZqtMABtsupvtNFGcVgBMpQrolOsV69eMdH6DDgXXnhhuvnmm9O8XEna5NzVWYr8kqwPACGwUvOLnG7eTWOsPWbl1BsxcmT6JCs+FnFQ7tuflBYcN77rjgKEsavZSokgx1SAUaNGxcAGrQ0AugKpPqP2hFDpmpFpyyE6MiKP3StrgHqurmPXpptumsbkaO+9994hutJFihFLAACKw7SBoJpXEeTiPBOsarbCAKDbgQcemNq3bx8v7d69e4idc/mOfo7HH388vfTSS/+RGjUNkCIusiamoqD+wQcfHHmty+OMNOuS892947NAdt1pp7R/ThPPEEwp+UkWZSn5S6Y4YAo7a1spl7VthQCQX5999lnU+IMOOihEKEpijpjoqAheLG9FDPXqWxdwvCykrCx77LNPjNl2vfWixW6ehc3yWkPUv/9D4eBbb7+d/t6vX3r+hRfS/HnzQ/wAuV5mgWfaZ0bQgpLzta2uznC5ZRCdoGzSVPaqq64KNkyePLleJ7fbbrv0Qp6szZLahpqaFPcAT4RF27gYgD0ABiYn6YLO0xwADbxFGbxxueucMGF8dm5OapavY8U3OT2HDh0a4lgzBbCKkBYrZbA6X2qY9pIoGdy5nKeoy1twmMCxxx4bTZNcr2miVJ7nLBahr3RSFSysvAcwSq60ognjx4+PFOiaqwwBlTbyX6U4L/cVk3JQOmYmSFXjaX7efffdeK4uqzcFUL/k55dZjW+//faYPPpRXhMUEZPwQp/FnKPuS7kzrMs8I585jU2DBw9OO+ywQyy2TjnllHCG6Inohx9+GOuMbrvuGmW2LMJE2acxBOnW225LN9xwQzBUuloc3XHHHZEm1axeANDQBN/O+af7u/LKK1P3PIF999037ZPztmfPnqH41NmkTN6BMSbYsWPH9HEde4WzMuVVEYqv/r/zzjsholKiUHdKXhcYY2oGoRh2uFZynfOCoASOGzcu0sR8bNs988wzsTLkvKV0NasTABNRZjjjJaJgwgMHDUqvvPJKiCLKoqoXW3xIDZS1ANm1264hiuhdLV2WZCdFysTVcDX+iCOOCDoXJlF5k++85ZbxnS1ZvLQf8Fyxrl27Bs0xREqZ0x577BHlGlO11ffdd1/l7mWtKgDaSqpJNNDy3HPPjXNVwGqtTBBAaCwa0qFEj8OTp0yOicRCpMoK0YQdyqplNcEE3tlnnx3PdOzQMQAljvoG5r3tNmq3TJ/h3RgwJAu5ccyHkBJs41toSaO6epOqAHhoYqb/WWedFfVTj75TrsEU/YzTT0/XXHNNOvHEE+Mll112WTo9X5OzmhUOiah7Rd9Yo3LEaioyEyF56hn5a+IES96u0SQ3NnNmR5ltm6sAEeWoQ0piG6d9xwTgK4PMvViLlZzWMLl20kknxd9rW9O/ZZPrJl1MZP/rlluCTot+XxTtbSlB/k2QwUVZLrqGHftlXdh9992jnpdNEiKIwnLbKq+mSav/zqu+IbnEnnHGGZFevXr2in9xMnzE8LTZZpsF2wYMGBD/EEPpk3KW20qoqkCgzUOlcZ9zoOyTQdUyWybzSyr9rW/ftGGN1an3tcsAVQXAQOrsqaeeGq3td3mg+RkMEdecqM9AKhsV+vndsvMmbRxdIoePOuqopSBk8HpmEGsakIz94IMPRkmj4PL/ncwCnaUl85w8rndZHDlUpXKILjYQW4ECKPMpbeU/ZmDW1VdfnY7OjVVNqxcAEe7+l7/ENRuQSpAooLSXySlNS6eOnSJHx+dmBDioaUJyF2McomTpWvsfUogUwCh2++yciZaSC9hpOcKuobiVIjZQdi0yNtCpaIjygW3Gq200YcssoDU3TosVAKp2gpoYKGOAmi+iclM0OM9M0gLmuuuuC2oC8frrr/9DoTljclLihBNOqNoRMpECgqoCXF3nnNzZdezUMTSCkAKX496hBIs8oIima2XL3Jxrm6aIttS2ejdE5PX555+fLr/88tiGziSJCAJjvdyv75gf5JCyw0noE0uTKgsma31C179//yibTGrVNvrgeZESccZ5XaelMKc4rKvbOzNJ78GMrU0uO8bFeQDZPNH6spKmdVlVAFCXMClJrbOC6sWpqWoAABNWkqi/kiUS8pYIyjumsbEjKx10kNWiwIzFCSVLNQCeyavtGGexo+mKJXQGEMOAQeCAXxNUYwEDvbFXIAuodVlVAAiO1RgjfgvzoMTFYK1atQyKezlAMES7S9GJGmBuyRXkiSeeiElLGUJ45plnxn6iaKI2ZX7ooYciWgBQ7kRUZyj6AAdGx6xDABYU76Q5aE9rlEv5X5x0joUO9zFj12dVAWDykXmRiZk459q0WTuivH5mQstMXy/fJddd3RrRRHeO77bbbjHxYiZ96mmnRW/uhw/tb+/evWMD1NjTc3WhPSgLNCAZh4Y4F1XRlYYs1g9L/r0WYBig7GKFa8ayfVaf1QmAgZmOcHbOby8mRM5NhkOYwTiQ3x06YDfYT1noe8EFF8S5f0qDknQDfR//5z+zxpwXgHqPcWkMpecAhrlmx/mRRx4JfXAfAHbK+nNbXvBgA2A4WuYKAGVa2pVr+oH6rM79AOqsLouiAmM4OQXdFnmCPMYSDJCnJnRFXiwdlEVQeRFF6TFv7rw0c9bMAJKDUkt6EFJO2xp3YJW8VlEmZD3w7w4igtlBPYJmR5ktoleT2sVZcwF8nz590jG5dNpeM66SXduWuy1eaEUAm2bHqSwnvZwuiLZrv2aEZ2bEx+TJ0Y4+WTjdYzIzps9I474fF2DOmjkrNV2jaZQs0VXurPONY1xpRnB1eZzHDlXA6k8aAmOTvLiywFI5OF2OYuasMqlaPXI1wAQdo6auLltuClDemrVWKjj014RJe8lZ1C3NTnHSjxVliTt12tTUvEXzP8SpjC99FmZAgYBVdonktxWlKHMe0Bg1Ma8r0N53ANVlxvasMX0KUF1WdRQDiAybmx0RCesBC6LyCzCBKosULwJKqcVSRTMj5/+a1Z9hRWhIrb05kV2Qn1NRqH6HfFjNGVcpxAipoRkq8zJOtZ6ithnDMwJYly2zJYZCRATt1HEbCqOyMo/MOrB7VvXxlR0e0fE3kxAJosUxTKAZFiz+AcWtt94aDCnRphmDBg2KqALHdX2F93Lq/vvvjyU3IFDdRoxx5bBP7ytjrYiVe6VCXRYAqLuiB+kpmWL26iGPbtCz1CVAJqHhcc2gJlkigeqqA4cwg2ECEbJwsj9oTXHJJZdEa41BFimjvx0da4x+/frFdnqJGmA9ZzyAzMi5/FNuixtiywWAcxyWqyavGdHUoLZKIOJ2hJhIcZZDTz31VCi0Tg9zOIcNhRnu46jlst/8/F7/93yvtbtcNzGgeq6kT4maMdDeUayAs7JW0rmahQZwGtKUWDMjchyanwWEoHGy7PdxUI5qSZUyP3HbD3SP9YMfTRnHUZ2jKEydrSi75O8EDb2B5EfL4vzyrCHOMyldqlptCwDkrh8jKPTQXG+ttbGhWXaW0gODMyjp3MT9KuQTE/TurntJ6SmUvtNy59e3b99ofqRHdHiTJqffcqsKIKXwf8PsPQqu3aeLL7449KmkUwAQOZdB0HbumJXeZga6WdmV1hMVOcmwwM9YaAoUANIGOe0X3UMPPTSaoHvvvTcqiA2KSfmFLVu0jKbIRgeA6orKn2FS1zzuueeeWOhZyLHoBP3ag+ra3G8rqyxrfdeKyFUzrJACcpuwAVLjQc2BQjeIXKvWrf4QSany/8GkvKAGAPJW2SuNA0cwAMVFmzO+O5j7UNj/F6IHOi2VQ60XVX8bOXJkVAvPYlG8rPK8nKcz7vV3Zkx/9937Hcyn+xzmUw73C06ZazUr173LeWGcZ/zLk765YwwA4upqaSn9DwXv6wwyGhhhAAAAAElFTkSuQmCC"},295:function(e,t,n){"use strict";e.exports=n.p+"static/media/maskable-icon-192.2be9a4a0fb28eafccac1.png"},5913:function(e,t,n){"use strict";e.exports=n.p+"static/media/map.795bc53df3e14b58b803.png"},7695:function(e,t,n){"use strict";e.exports=n.p+"static/media/albrecht_valdstejn.fb06fd8f0d6dac7479b1.jpg"},5619:function(e,t,n){"use strict";e.exports=n.p+"static/media/antonin_pankrac_gallas.17a8d04e7b0a0d7a04cf.jpg"},2411:function(e,t,n){"use strict";e.exports=n.p+"static/media/clotilda_clamgallas_mladsi.aa59ee50eb9d976d243c.jpg"},2134:function(e,t,n){"use strict";e.exports=n.p+"static/media/eduard_clamgallas.9a6f04b84d8873f91801.jpg"},2789:function(e,t,n){"use strict";e.exports=n.p+"static/media/filip_josef_gallas.c7866f9998473bbe1e87.jpg"},5648:function(e,t,n){"use strict";e.exports=n.p+"static/media/frantisek_clamgallas.57da83e13eb15406d92c.jpg"},4361:function(e,t,n){"use strict";e.exports=n.p+"static/media/frantisek_ferdinand_gallas.4928950668ab95fb27a7.jpg"},7862:function(e,t,n){"use strict";e.exports=n.p+"static/media/jan_vaclav_gallas.08394af058fc1a9bbf90.jpg"},5130:function(e,t,n){"use strict";e.exports=n.p+"static/media/katerina_redern.daafc19167232be25acb.jpg"},9565:function(e,t,n){"use strict";e.exports=n.p+"static/media/kristian_filip_clamgallas.6b65fb349d01ec4b1932.jpg"},2881:function(e,t,n){"use strict";e.exports=n.p+"static/media/kristian_krystof_clamgallas.753f3886a7f6f510ecb8.jpg"},7377:function(e,t,n){"use strict";e.exports=n.p+"static/media/krystof_redern.e2eb4f6a54efc68f7379.jpg"},8865:function(e,t,n){"use strict";e.exports=n.p+"static/media/matyas_gallas.06ab2e206727ce0b8300.jpg"},6497:function(e,t,n){"use strict";e.exports=n.p+"static/media/melchior_redern.923657121e584e1cd91c.jpg"},2856:function(e,t,n){"use strict";e.exports=n.p+"static/media/vilem_clamgallas.dde460b9badc7445f31a.jpg"},878:function(e,t,n){"use strict";e.exports=n.p+"static/media/grabstejn.7440ae2e7c07ff15232a.jpg"},4902:function(){},522:function(){},753:function(){},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9142);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},7462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},885:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(181);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2982:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var i=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){a[e]=function(){return r[e]}}));return a.default=function(){return r},n.d(o,a),o}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".8b87e823.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="frydlant-audio-guide:";n.l=function(r,i,o,a){if(e[r])e[r].push(i);else{var s,u;if(void 0!==o)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,o,a=r[0],s=r[1],u=r[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);l<a.length;l++)o=a[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkfrydlant_audio_guide=self.webpackChunkfrydlant_audio_guide||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e=n(2791),t=n.t(e,2),r=n(1250);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(9142);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,o.Z)(r.key),r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(v){return!1}}var h=n(1002);function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if(t&&("object"===(0,h.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function m(e){var t=d();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}var g=function(e,t){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function v(e,t){function n(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function y(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function b(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var w=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags||(this.flags[e]=this.evaluateFlag(e)),this.flags[e]},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return x(n,t[0],t[1]),t.join("=")})),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=n[0],i=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,i)}))}},e}();function x(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function _(){return C}var C=null,E=new Map,S=new Map;function A(e,t){var n=T(e,t);return E.get(n)}function k(e){for(var t=E.entries(),n=[];;){var r=t.next(),i=r.done,o=r.value;if(i)break;var a=o[0],s=o[1];a.split("_")[0]===e&&n.push(s)}return n}function I(e){var t=e.kernelName,n=e.backendName,r=T(t,n);if(E.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");E.set(r,e)}function R(e){var t=e.kernelName;S.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),S.set(t,e)}function T(e,t){return t+"_"+e}function N(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function O(e,t,n){return Math.max(e,Math.min(t,n))}function D(e){return e%2==0?e:e+1}function M(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function P(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function F(e,t,n){void 0===n&&(n=""),P(j(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))}function B(e){P(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function L(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),Array.isArray(e)||ee(e)&&!n)for(var r=0;r<e.length;++r)L(e[r],t,n);else t.push(e);return t}function z(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function j(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function W(e){return e%1==0}function H(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function V(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function G(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function U(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise((function(r,i){var o=0;!function a(){if(e())r();else{o++;var s=t(o);null!=n&&o>=n?i():setTimeout(a,s)}}()}))}function K(e,t){for(var n=1,r=-1,i=0;i<e.length;++i)if(e[i]>=0)n*=e[i];else if(-1===e[i]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(e[i]<0)throw Error("Shapes can not be < 0. Found "+e[i]+" at dim "+i);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var o=e.slice();return o[r]=t/n,o}function X(e,t){var n=t.length;return P((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e})),P(e.every((function(e){return W(e)})),(function(){return"All values in axis param must be integers but got axis "+e})),e.map((function(e){return e<0?n+e:e}))}function Z(e,t){for(var n=[],r=[],i=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||i?null:X(t,e).sort(),a=0,s=0;s<e.length;++s){if(null!=o){if(o[a]===s&&1!==e[s])throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(null==o[a]||o[a]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),o[a]<=s&&a++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function q(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function Y(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function J(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function Q(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function $(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function ee(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function te(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function ne(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function re(e){return"string"==typeof e||e instanceof String}function ie(e){return"boolean"==typeof e}function oe(e){return"number"==typeof e}function ae(e){return Array.isArray(e)?ae(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":oe(e)?"float32":re(e)?"string":ie(e)?"bool":"float32"}function se(e){return!!(e&&e.constructor&&e.call&&e.apply)}function ue(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function le(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function ce(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=L(e)),n&&J(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),i=0;i<r.length;++i)0!==Math.round(e[i])&&(r[i]=1);return r}throw new Error("Unknown data type "+t)}function de(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function e(t,n,r){var i=new Array;if(1===n.length)for(var o=n[0],a=0;a<o;a++)i[a]=r[t+a];else{o=n[0];var s=n.slice(1),u=s.reduce((function(e,t){return e*t}));for(a=0;a<o;a++)i[a]=e(t+a*u,s,r)}return i}(0,e,t)}function he(e,t){for(var n=fe(e,t),r=0;r<n.length;r++)n[r]=1;return n}function fe(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function pe(){return _().platform.now()}function me(e){e.forEach((function(t){P(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."}))}))}function ge(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",_().platform.encode(e,t)}function ve(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",_().platform.decode(e,t)}function ye(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],i=0;i<e.length-1;++i)r+=n[i]*e[i];return r}function be(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),i=0;i<r.length-1;++i)r[i]=Math.floor(e/n[i]),e-=r[i]*n[i];return r[r.length-1]=e,r}Object.freeze({shuffle:N,clamp:O,nearestLargerEven:D,sum:M,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var i=Number(e[r])-Number(t[r]);n+=i*i}return n},assert:P,assertShapesMatch:F,assertNonNull:B,flatten:L,sizeFromShape:z,isScalarShape:function(e){return 0===e.length},arraysEqual:j,isInt:W,tanh:H,sizeToSquarishShape:V,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return N(t),t},rightPad:G,repeatedTry:U,inferFromImplicitShape:K,parseAxisParam:X,squeezeShape:Z,getTypedArrayFromDType:q,getArrayFromDType:Y,checkConversionForErrors:J,isValidDtype:Q,hasEncodingLoss:$,isTypedArray:ee,bytesPerElement:te,bytesFromStringArray:ne,isString:re,isBoolean:ie,isNumber:oe,inferDtype:ae,isFunction:se,nearestDivisor:ue,computeStrides:le,toTypedArray:ce,toNestedArray:de,makeOnesTypedArray:he,makeZerosTypedArray:fe,now:pe,assertNonNegativeIntegerDimensions:me,fetch:function(e,t){return _().platform.fetch(e,t)},encodeString:ge,decodeString:ve,locToIndex:ye,indexToLoc:be});var we=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new xe)}return e.prototype.profileKernel=function(e,t,n){var r,i=this,o=this.backendTimer.time((function(){r=n()}));return r.forEach((function(n){n.data().then((function(r){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var i=e[r];if(isNaN(i)||!isFinite(i))return console.warn("Found "+i+" in the result of '"+n+"'"),!0}}(r,n.dtype,e),o.then((function(o){var a="";null!=o.getExtraProfileInfo&&(a=o.getExtraProfileInfo()),i.logger.logKernelProfile(e,n,r,o.kernelMs,t,a)}))}))})),r},e}(),xe=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,i,o){var a="number"==typeof r?G(r+"ms",9):r.error,s=G(e,25),u=t.rank,l=t.size,c=G(t.shape.toString(),14),d="";for(var h in i){var f=i[h].shape||t.shape,p=f.length;d+=h+": "+p+"D "+(p>0?f:"")+" "}console.log("%c"+s+"\t%c"+a+"\t%c"+u+"D "+c+"\t%c"+l+"\t%c"+d+"\t%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}();function _e(e,t,n){return G(Array.isArray(e)?parseFloat(e[0].toFixed(7))+" + "+parseFloat(e[1].toFixed(7))+"j":re(e)?"'"+e+"'":"bool"===n?Ce(e):parseFloat(e.toFixed(7)).toString(),t)}function Ce(e){return 0===e?"false":"true"}function Ee(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Se=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=z(e),null!=n){var i=n.length;P(i===this.size,(function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+r.size+"'."}))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||Y(t,this.size),this.strides=le(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),P(n.length===this.rank,(function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"}));var i=this.locToIndex(n);this.values[i]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=0,r=0,i=e;r<i.length;r++){var o=i[r];if(o<0||o>=this.shape[n]){var a="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(a)}n++}for(var s=e[e.length-1],u=0;u<e.length-1;++u)s+=this.strides[u]*e[u];return this.values[s]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Ae().makeTensor(this.values,this.shape,this.dtype)},e}(),Ae=null,ke=null,Ie=null,Re=function(){function e(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=z(e),this.strides=le(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),P(1===this.size,(function(){return"The array must have only 1 element."})),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),this.reshape([e,t,n,r,i])},e.prototype.asType=function(e){return this.throwIfDisposed(),ke.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return y(this,void 0,void 0,(function(){var e;return b(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,ke.buffer(this.shape,this.dtype,e)]}}))}))},e.prototype.bufferSync=function(){return ke.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return y(this,void 0,void 0,(function(){var e;return b(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,de(this.shape,e)]}}))}))},e.prototype.arraySync=function(){return de(this.shape,this.dataSync())},e.prototype.data=function(){return y(this,void 0,void 0,(function(){var e,t;return b(this,(function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=Ae().read(this.dataId),"string"!==this.dtype?[3,2]:[4,e];case 1:t=n.sent();try{return[2,t.map((function(e){return ve(e)}))]}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,e]}}))}))},e.prototype.dataSync=function(){this.throwIfDisposed();var e=Ae().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return ve(e)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},e.prototype.bytes=function(){return y(this,void 0,void 0,(function(){var e;return b(this,(function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,Ae().read(this.dataId)];case 1:return e=t.sent(),"string"===this.dtype?[2,e]:[2,new Uint8Array(e.buffer)]}}))}))},e.prototype.dispose=function(){this.isDisposed||(Ae().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),ke.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),ke.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),ke.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),ke.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),ke.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),ke.clone(this)},e.prototype.oneHot=function(e,t,n){return this.throwIfDisposed(),ke.oneHot(this,e,t,n)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var i=le(t),o=function(e,t,n,r){var i=z(t),o=r[r.length-1],a=new Array(o).fill(0),s=t.length,u="complex64"===n?Ee(e):e;if(s>1)for(var l=0;l<i/o;l++)for(var c=l*o,d=0;d<o;d++)a[d]=Math.max(a[d],_e(u[c+d],0,n).length);return a}(e,t,n,i),a=t.length,s=function e(t,n,r,i,o,a){void 0===a&&(a=!0);var s="complex64"===r?2:1,u=n[0],l=n.length;if(0===l)return"complex64"===r?[_e(Ee(t)[0],0,r)]:"bool"===r?[Ce(t[0])]:[t[0].toString()];if(1===l){if(u>20){var c=3*s,d=Array.from(t.slice(0,c)),h=Array.from(t.slice((u-3)*s,u*s));return"complex64"===r&&(d=Ee(d),h=Ee(h)),["["+d.map((function(e,t){return _e(e,o[t],r)})).join(", ")+", ..., "+h.map((function(e,t){return _e(e,o[u-3+t],r)})).join(", ")+"]"]}return["["+("complex64"===r?Ee(t):Array.from(t)).map((function(e,t){return _e(e,o[t],r)})).join(", ")+"]"]}var f=n.slice(1),p=i.slice(1),m=i[0]*s,g=[];if(u>20){for(var v=0;v<3;v++){var y=(b=v*m)+m;g.push.apply(g,e(t.slice(b,y),f,r,p,o,!1))}for(g.push("..."),v=u-3;v<u;v++)y=(b=v*m)+m,g.push.apply(g,e(t.slice(b,y),f,r,p,o,v===u-1))}else for(v=0;v<u;v++){var b;y=(b=v*m)+m,g.push.apply(g,e(t.slice(b,y),f,r,p,o,v===u-1))}var w=2===l?",":"";for(g[0]="["+g[0]+w,v=1;v<g.length-1;v++)g[v]=" "+g[v]+w;var x=",\n";for(v=2;v<l;v++)x+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(a?"":x),g}(e,t,n,i,o),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+a),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),ke.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),ke.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),ke.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),ke.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),ke.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),ke.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),ke.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),ke.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),ke.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),ke.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),ke.unstack(this,e)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),ke.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,i){return void 0===n&&(n=.001),Ie("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,i,r,n)},e.prototype.batchNorm=function(e,t,n,r,i){return void 0===i&&(i=.001),this.throwIfDisposed(),ke.batchNorm(this,e,t,n,r,i)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),ke.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),ke.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),ke.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),ke.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),ke.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),ke.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),ke.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),ke.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),ke.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),ke.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),ke.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),ke.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),ke.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),ke.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),ke.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),ke.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),ke.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),ke.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),ke.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),ke.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),ke.div(this,e)},e.prototype.divNoNan=function(e){return this.throwIfDisposed(),ke.divNoNan(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),ke.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),ke.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),ke.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),ke.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),ke.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),ke.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),ke.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),ke.modStrict(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),ke.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),ke.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),ke.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),ke.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),ke.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),ke.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),ke.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),ke.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),ke.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),ke.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),ke.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),ke.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),ke.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),ke.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),ke.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),ke.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),ke.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),ke.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),ke.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),ke.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),ke.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),ke.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),ke.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),ke.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),ke.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),ke.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),ke.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),ke.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),ke.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),ke.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),ke.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),ke.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),ke.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),ke.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),ke.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),ke.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),ke.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),ke.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),ke.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),ke.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),ke.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),ke.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),ke.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),ke.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),ke.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),ke.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),ke.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),ke.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),ke.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),ke.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),ke.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),ke.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),ke.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),ke.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),ke.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),ke.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),ke.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),ke.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),ke.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),ke.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),ke.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),ke.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),ke.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),ke.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),ke.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),ke.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,i,o){return void 0===r&&(r="NWC"),void 0===i&&(i=1),this.throwIfDisposed(),ke.conv1d(this,e,t,n,r,i,o)},e.prototype.conv2d=function(e,t,n,r,i,o){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),ke.conv2d(this,e,t,n,r,i,o)},e.prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),ke.conv2dTranspose(this,e,t,n,r,i)},e.prototype.depthwiseConv2D=function(e,t,n,r,i,o){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),ke.depthwiseConv2d(this,e,t,n,r,i,o)},e.prototype.separableConv2d=function(e,t,n,r,i,o){return void 0===i&&(i=[1,1]),void 0===o&&(o="NHWC"),this.throwIfDisposed(),ke.separableConv2d(this,e,t,n,r,i,o)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),ke.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),ke.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),ke.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,i){return this.throwIfDisposed(),ke.pool(this,e,t,n,r,i)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),Ae().makeVariable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),ke.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),ke.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),ke.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),ke.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,i,o,a,s){return void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),this.throwIfDisposed(),ke.stridedSlice(this,e,t,n,r,i,o,a,s)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),ke.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),ke.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),ke.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),ke.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),ke.spectral.irfft(this)},e}();Object.defineProperty(Re,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var Te,Ne,Oe,De,Me,Pe,Fe=function(e){function t(t,n,r,i){var o=e.call(this,t.shape,t.dtype,t.dataId,i)||this;return o.trainable=n,o.name=r,o}return v(t,e),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!j(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");Ae().disposeTensor(this),this.dataId=e.dataId,Ae().incRef(this,null)},t.prototype.dispose=function(){Ae().disposeVariable(this),this.isDisposedInternal=!0},t}(Re);Object.defineProperty(Fe,Symbol.hasInstance,{value:function(e){return e instanceof Re&&null!=e.assign&&e.assign instanceof Function}}),(Pe=Te||(Te={})).R0="R0",Pe.R1="R1",Pe.R2="R2",Pe.R3="R3",Pe.R4="R4",Pe.R5="R5",Pe.R6="R6",function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Ne||(Ne={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Oe||(Oe={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(De||(De={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Me||(Me={}));var Be={float32:De,int32:Ne,bool:Oe,complex64:Me};function Le(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return Be[e][t]}function ze(e){return Le(e,"int32")}function je(e,t){if(e.dtype===t.dtype)return[e,t];var n=Le(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function We(e,t){P(e.dtype===t.dtype,(function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"}))}function He(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof Re)n.push(t);else if(i=t,Array.isArray(i)||"object"==typeof i){var i,o=t;for(var a in o){var s=o[a];r.has(s)||(r.add(s),e(s,n,r))}}}(e,t,new Set),t}Object.freeze({makeTypesMatch:je,assertTypesMatch:We,isTensorInList:function(e,t){return t.some((function(t){return t.id===e.id}))},getTensorsInContainer:He});var Ve,Ge=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),Ue=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Ge}return e.prototype.ready=function(){return y(this,void 0,void 0,(function(){var e,t,n;return b(this,(function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then((function(){}))];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return y(this,void 0,void 0,(function(){var t,n,r;return b(this,(function(i){switch(i.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=i.sent(),[3,3];case 2:r=n,i.label=3;case 3:if(!r)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new we(this.backendInstance),[2,!0]}}))}))},e.prototype.setupRegisteredKernels=function(){var e=this;k(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))},e.prototype.disposeRegisteredKernels=function(e){var t=this;k(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))},e.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var i=++this.pendingBackendInitId,o=r.then((function(n){return!(i<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return!(i<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),!1)}));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),i=r.success,o=r.asyncInit;if(o||i)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,i=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,i,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(e,t){var n,r=this,i=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=e}return this.scopedRun((function(){return r.startScope(i)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){return e.toFloat()}}}),[]),t},e.prototype.runKernel=function(e,t,n,r,i){return this.runKernelFunc(null,t,null,e,n,r,i)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(e,t,n){var r=this.backend.numDataIds(),i=0;n.forEach((function(e){i+="complex64"===e.dtype?3:1}));var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=r-t-i-o;if(a>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+a+" data ids) after running '"+e+"'")},e.prototype.runKernelFunc=function(e,t,n,r,i,o,a){var s,u=this;void 0===o&&(o=[]),void 0===a&&(a=[]);var l=[],c=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var d,h=function(e){c&&(l=e.map((function(e){return u.keep(u.clone(e))})))},f=this.state.numBytes,p=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var m,g=A(r,this.backendName);return d=null!=g?function(){var e=u.backend.numDataIds();m=g.kernelFunc({inputs:t,attrs:i,backend:u.backend});var n=Array.isArray(m)?m:[m];u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,e,n);var s=n.map((function(e){var t=e.dataId,n=e.shape,r=e.dtype;return u.makeTensorFromDataId(t,n,r)})),l=s.filter((function(e,t){return a[t]}));return h((o||[]).slice().concat(l)),s}:function(){var t=u.backend.numDataIds();m=u.tidy((function(){return e(u.backend,h)}));var n=Array.isArray(m)?m:[m];return u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,t,n),n},this.scopedRun((function(){return u.state.kernelDepth++}),(function(){return u.state.kernelDepth--}),(function(){s=u.ENV.getBool("DEBUG")?u.profiler.profileKernel(r,t,(function(){return d()})):d()})),c&&this.addTapeNode(r,t,s,n,l),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-f,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-p,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map((function(e){return t[e].shape})),outputShapes:s.map((function(e){return e.shape}))}),Array.isArray(m)?s:s[0]},e.prototype.makeTensor=function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var i=e;"string"===n&&re(e[0])&&(i=e.map((function(e){return ge(e)})));var o=r.write(i,t,n),a=new Re(t,n,o,this.nextTensorId());if(this.incRef(a,r),"string"===n){var s=this.state.tensorInfo.get(o),u=ne(i);this.state.numBytes+=u-s.bytes,s.bytes=u}return a},e.prototype.makeTensorFromDataId=function(e,t,n,r){var i=new Re(t,n=n||"float32",e,this.nextTensorId());return this.incRef(i,r),i},e.prototype.makeVariable=function(e,t,n,r){void 0===t&&(t=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.asType(r));var i=new Fe(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.incRef=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*te(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Fe||this.track(e)},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return y(this,void 0,void 0,(function(){var t,n;return b(this,(function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]}))}))},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n,r,i){var o=this,a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:i},s=function(e){return S.get(e)}(e);null!=s&&(r=s.gradFunc),null!=r&&(a.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],i=fe(r.size,r.dtype);return o.makeTensor(i,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],i)}),this.state.activeTape.push(a)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=He(e),r=new Set(n.map((function(e){return e.id}))),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i];o.kept||r.has(o.id)||o.dispose()}var a=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==a.id||t.track(e)}))},e.prototype.gradients=function(e,t,n,r){var i=this;if(void 0===r&&(r=!1),P(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var o=this.scopedRun((function(){return i.startTape()}),(function(){return i.endTape()}),(function(){return i.tidy("forward",e)}));P(o instanceof Re,(function(){return"The result y returned by f() must be a tensor."}));var a=function(e,t,n){for(var r={},i={},o=0;o<t.length;o++)r[t[o].id]=!0;for(o=0;o<e.length;o++){var a=(p=e[o]).inputs;for(var s in a){for(var u=a[s],l=!1,c=0;c<t.length;c++)if(r[u.id]){p.outputs.forEach((function(e){return r[e.id]=!0})),l=!0,i[p.id]=!0;break}if(l)break}}var d={};d[n.id]=!0;var h={};for(o=e.length-1;o>=0;o--)for(a=(p=e[o]).inputs,c=0;c<p.outputs.length;c++)if(d[p.outputs[c].id]){for(var s in a)d[a[s].id]=!0,h[p.id]=!0;break}var f=[];for(o=0;o<e.length;o++){var p;if(i[(p=e[o]).id]&&h[p.id]){var m={};for(var s in p.inputs){var g=p.inputs[s];r[g.id]&&(m[s]=g)}var v=Object.assign({},p);v.inputs=m,v.outputs=p.outputs,f.push(v)}}return f}(this.state.activeTape,t,o);if(!r&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e,r,s={};s[o.id]=null==n?(r=he(z(e=o.shape),"float32"),Ke.makeTensor(r,e,"float32")):n,function(e,t,n){for(var r=function(r){var i=t[r],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+i.kernelName+".");var a=i.gradient(o),s=function(t){if(!(t in a))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(a)+".");var r=n((function(){return a[t]()}));if("float32"!==r.dtype)throw new Error("Error in gradient for op "+i.kernelName+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'");var o=i.inputs[t];if(!j(r.shape,o.shape))throw new Error("Error in gradient for op "+i.kernelName+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+o.shape+"'");if(null==e[o.id])e[o.id]=r;else{var s=e[o.id];e[o.id]=s.add(r),s.dispose()}};for(var u in i.inputs)s(u)},i=t.length-1;i>=0;i--)r(i)}(s,a,(function(e){return i.tidy(e)}));var u=t.map((function(e){return s[e.id]}));return 0===i.state.gradientDepth&&(i.state.activeTape.forEach((function(e){for(var t=0,n=e.saved;t<n.length;t++)n[t].dispose()})),i.state.activeTape=null),{value:o,grads:u}}))},e.prototype.customGrad=function(e){var t=this;return P(se(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];P(r.every((function(e){return e instanceof Re})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};return r.forEach((function(e,t){o[t]=e})),t.runKernelFunc((function(t,i){return P((n=e.apply(void 0,r.concat([i]))).value instanceof Re,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),P(se(n.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),n.value}),o,(function(e,t){var i=n.gradFunc(e,t),o=Array.isArray(i)?i:[i];P(o.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),P(o.every((function(e){return e instanceof Re})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var a={};return o.forEach((function(e,t){a[t]=function(){return e}})),a}))}},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.time=function(e){return y(this,void 0,void 0,(function(){var t,n;return b(this,(function(r){switch(r.label){case 0:return t=pe(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=pe()-t,[2,n]}}))}))},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Ge,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),Ke=function(){var e=function(){if(null==Ve){var e=void 0;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}Ve=e}return Ve}();if(null==e._tfengine){var t=new w(e);e._tfengine=new Ue(t)}return function(e){C=e}(e._tfengine.ENV),Ae=function(){return e._tfengine},e._tfengine}();function Xe(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var Ze=_();Ze.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Ze.registerFlag("IS_BROWSER",(function(){return Xe()})),Ze.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),Ze.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Ze.registerFlag("PROD",(function(){return!1})),Ze.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Ze.getBool("DEBUG")})),Ze.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Ze.registerFlag("IS_TEST",(function(){return!1}));var qe,Ye,Je,Qe={},$e={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function et(e,t){Qe[e]=t}function tt(e){e in Qe||(Qe[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete Qe[e]}),!1),1===e?t.getContext("webgl",$e)||t.getContext("experimental-webgl",$e):t.getContext("webgl2",$e)}(e));var t=Qe[e];return t.isContextLost()?(delete Qe[e],tt(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Qe[e])}function nt(e,t){return[t,e]}function rt(e){var t=z(e);return V(Math.ceil(t/4))}function it(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function ot(e,t){var n,r,i,o,a,s,u,l,c,d=e;return 2===_().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,i=d.RGBA16F,o=d.RGBA32F,a=d.RED,s=4,u=1,l=d.HALF_FLOAT,c=d.FLOAT):(n=e.RGBA,r=e.RGBA,i=e.RGBA,o=d.RGBA,a=e.RGBA,s=4,u=4,l=null!=t?t.HALF_FLOAT_OES:null,c=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function at(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+ut(e,t))}(e),r}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(qe||(qe={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Ye||(Ye={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Je||(Je={}));function st(e){return!!(_().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function ut(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function lt(e,t,n){return Ot(e,t,(function(){return e.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function ct(e,t,n){var r=Ot(e,t,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(at(e,t,(function(){return e.shaderSource(r,n)})),at(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function dt(e,t,n){var r=Ot(e,t,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(at(e,t,(function(){return e.shaderSource(r,n)})),at(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=pt.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],i=e.split("\n"),o=i.length.toString().length+2,a=i.map((function(e,t){return G((t+1).toString(),o)+e})),s=0,u=0;u<a.length;u++)s=Math.max(a[u].length,s);var l=a.slice(0,r-1),c=a.slice(r-1,r),d=a.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+G(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var ht,ft,pt=/ERROR: [0-9]+:([0-9]+):/g;function mt(e,t){return Ot(e,t,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function gt(e,t,n){if(at(e,t,(function(){return e.linkProgram(n)})),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function vt(e,t,n){if(at(e,t,(function(){return e.validateProgram(n)})),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function yt(e,t,n){var r=Ot(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return at(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),at(e,t,(function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function bt(e,t,n){var r=Ot(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return at(e,t,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)})),at(e,t,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function wt(e,t){return Ot(e,t,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function xt(e,t){var n=_().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function _t(e,t){return Ot(e,t,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function Ct(e,t,n,r,i,o,a,s){var u=e.getAttribLocation(n,r);return-1!==u&&(at(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,i)})),at(e,t,(function(){return e.vertexAttribPointer(u,o,e.FLOAT,!1,a,s)})),at(e,t,(function(){return e.enableVertexAttribArray(u)})),!0)}function Et(e,t,n,r){Dt(e,r),at(e,t,(function(){return e.activeTexture(e.TEXTURE0+r)})),at(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)}))}function St(e,t,n,r){return Ot(e,t,(function(){return e.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function At(e,t,n){return e.getUniformLocation(t,n)}function kt(e,t,n,r,i,o){at(e,t,(function(){return Et(e,t,r,o)})),at(e,t,(function(){return e.uniform1i(i,o)}))}function It(e,t,n,r){at(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)})),at(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}))}function Rt(e,t,n){at(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),at(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Tt(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Nt(e,t))}function Nt(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function Ot(e,t,n,r){var i=at(e,t,(function(){return n()}));if(null==i)throw new Error(r);return i}function Dt(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function Mt(e,t){return void 0===t&&(t=2),z(e.slice(0,e.length-t))}function Pt(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Ft(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[Mt(e)].concat(Pt(e))),t}function Bt(e,t){var n;void 0===t&&(t=!1);var r=_().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?D(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var i=Z(e);e=i.newShape}var o=z(e);if(e.length<=1&&o<=r)return[1,o];if(2===e.length&&e[0]<=r&&e[1]<=r)return e;if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var a=Mt(e),s=2,u=2;return e.length&&(s=(n=Pt(e))[0],u=n[1]),V(o=a*(s/2)*(u/2)).map((function(e){return 2*e}))}return V(o)}function Lt(e){return e%2==0}function zt(e,t){if(j(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(Lt(n)&&Lt(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Lt(e[0])&&Lt(t[0])}function jt(e){if(null==ht){var t=tt(e);ht=t.getParameter(t.MAX_TEXTURE_SIZE)}return ht}function Wt(e){if(null==ft){var t=tt(e);ft=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ft)}function Ht(e){if(0===e)return 0;var t=tt(e);return Vt(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Vt(t,"EXT_disjoint_timer_query")?1:0}function Vt(e,t){return null!=e.getExtension(t)}function Gt(e){try{if(null!=tt(e))return!0}catch(e){return!1}return!1}function Ut(e){if(0===e)return!1;var t=tt(e);if(1===e){if(!Vt(t,"OES_texture_float"))return!1}else if(!Vt(t,"EXT_color_buffer_float"))return!1;return Xt(t)}function Kt(e){if(0===e)return!1;var t=tt(e);if(1!==e){if(Vt(t,"EXT_color_buffer_float"))return Xt(t);if(Vt(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(e,t){var n=ot(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),o}(t,n)}return!1}return!!Vt(t,"OES_texture_float")&&!!Vt(t,"WEBGL_color_buffer_float")&&Xt(t)}function Xt(e){var t=ot(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),i}function Zt(e){return 2===e&&null!=tt(e).fenceSync}var qt=Object.freeze({callAndCheck:at,canBeRepresented:st,getWebGLErrorMessage:ut,getExtensionOrThrow:lt,createVertexShader:ct,createFragmentShader:dt,createProgram:mt,linkProgram:gt,validateProgram:vt,createStaticVertexBuffer:yt,createStaticIndexBuffer:bt,getNumChannels:function(){return 2===_().getNumber("WEBGL_VERSION")?1:4},createTexture:wt,validateTextureSize:xt,createFramebuffer:_t,bindVertexBufferToProgramAttribute:Ct,bindTextureUnit:Et,unbindTextureUnit:function(e,t,n){Dt(e,n),at(e,t,(function(){return e.activeTexture(e.TEXTURE0+n)})),at(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))},getProgramUniformLocationOrThrow:St,getProgramUniformLocation:At,bindTextureToProgramUniformSampler:kt,bindCanvasToFramebuffer:function(e,t){at(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),at(e,t,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),at(e,t,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))},bindColorTextureToFramebuffer:It,unbindColorTextureFromFramebuffer:Rt,validateFramebuffer:Tt,getFramebufferErrorMessage:Nt,getBatchDim:Mt,getRowsCols:Pt,getShapeAs3D:Ft,getTextureShapeFromLogicalShape:Bt,isReshapeFree:zt,getWebGLMaxTextureSize:jt,resetMaxTextureSize:function(){ht=null},resetMaxTexturesInShader:function(){ft=null},getMaxTexturesInShader:Wt,getWebGLDisjointQueryTimerVersion:Ht,hasExtension:Vt,isWebGLVersionEnabled:Gt,isCapableOfRenderingToFloatTexture:Ut,isDownloadFloatTextureEnabled:Kt,isWebGLFenceEnabled:Zt}),Yt=_();function Jt(e){_().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Qt(e,t){return Ke.tidy(e,t)}function $t(e){He(e).forEach((function(e){return e.dispose()}))}function en(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];_().getBool("IS_TEST")||console.warn.apply(console,e)}function tn(e,t){var n=e;if(ee(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||ee(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&_().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||ee(t)){P(n.length>0,(function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"})),P(t.length===n[0],(function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"}));for(var i=n.slice(1),o=0;o<t.length;++o)e(t[o],i,r.concat(o))}else P(0===n.length,(function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"}))}(e,r,[]),r}function nn(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function rn(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof Re)return nn(r,e.dtype,t,n),e;var i=ae(e);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),nn(r,i,t,n),null==e||!ee(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var o=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+o+"'")}var a=tn(e,i);ee(e)||Array.isArray(e)||(e=[e]);var s="string"!==i?ce(e,i,_().getBool("DEBUG")):L(e,[],!0);return Ke.makeTensor(s,a,i)}function on(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map((function(e,r){return rn(e,t+"["+r+"]",n)}),r)}function an(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function sn(e,t,n){for(var r=e.length+t.length,i=[],o=0,a=0,s=0;s<r;s++)-1===n.indexOf(s)?i.push(e[o++]):i.push(t[a++]);return i}function un(e,t){for(var n=[],r=e.length,i=0;i<r;i++)-1===t.indexOf(i)&&n.push(e[i]);return[n,t.map((function(t){return e[t]}))]}function ln(e,t){return sn(e,t.map((function(e){return 1})),t)}function cn(e,t,n){P(an(t,n),(function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."}))}function dn(e,t){if(an(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function hn(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function fn(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function pn(e,t){var n=e[0].length;e.forEach((function(e,t){P(e.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"}))})),P(t>=0&&t<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=e[0];e.forEach((function(e,i){for(var o=0;o<n;o++)P(o===t||e[o]===r[o],(function(){return"Error in concat"+n+"D: Shape of tensors["+i+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."}))}))}function mn(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function gn(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Ke.startScope(n);try{var i=r.apply(void 0,e);return i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Ke.endScope(i),i}catch(e){throw Ke.endScope(null),e}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}Yt.registerFlag("HAS_WEBGL",(function(){return Yt.getNumber("WEBGL_VERSION")>0})),Yt.registerFlag("WEBGL_VERSION",(function(){return Gt(2)?2:Gt(1)?1:0})),Yt.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===Yt.get("WEBGL_VERSION")})),Yt.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),Yt.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),Yt.registerFlag("WEBGL_PACK",(function(){return Yt.getBool("HAS_WEBGL")})),Yt.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return Yt.getBool("WEBGL_PACK")})),Yt.registerFlag("WEBGL_PACK_CLIP",(function(){return Yt.getBool("WEBGL_PACK")})),Yt.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),Yt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return Yt.getBool("WEBGL_PACK")})),Yt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return Yt.getBool("WEBGL_PACK")})),Yt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return Yt.getBool("WEBGL_PACK")})),Yt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return Yt.getBool("WEBGL_PACK")})),Yt.registerFlag("WEBGL_PACK_REDUCE",(function(){return Yt.getBool("WEBGL_PACK")})),Yt.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return Yt.getBool("WEBGL_PACK")})),Yt.registerFlag("WEBGL_CONV_IM2COL",(function(){return Yt.getBool("WEBGL_PACK")})),Yt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return jt(Yt.getNumber("WEBGL_VERSION"))})),Yt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return Wt(Yt.getNumber("WEBGL_VERSION"))})),Yt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=Yt.getNumber("WEBGL_VERSION");return 0===e?0:Ht(e)})),Yt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return Yt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e})),Yt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return Ut(Yt.getNumber("WEBGL_VERSION"))})),Yt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!Yt.getBool("WEBGL_FORCE_F16_TEXTURES")&&Yt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),Yt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return Kt(Yt.getNumber("WEBGL_VERSION"))})),Yt.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return Zt(Yt.getNumber("WEBGL_VERSION"))})),Yt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return Yt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Ie=Jt;var vn=gn({complex_:function(e,t){var n=rn(e,"real","complex"),r=rn(t,"imag","complex");return F(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),Ke.runKernelFunc((function(e){return e.complex(n,r)}),{$real:n,$imag:r})}}),yn=gn({real_:function(e){var t=rn(e,"input","real");return Ke.runKernelFunc((function(e){return e.real(t)}),{$input:t})}}),bn=gn({imag_:function(e){var t=rn(e,"input","imag");return Ke.runKernelFunc((function(e){return e.imag(t)}),{$input:t})}});function wn(e,t,n){return xn(e,t,tn(e,n),n)}function xn(e,t,n,r){if(null==r&&(r=ae(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ee(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){me(t);var i=z(t),o=z(n);P(i===o,(function(){return"Based on the provided shape, ["+t+"], the tensor should have "+i+" values but has "+o}));for(var a=0;a<n.length;++a){var s=n[a],u=a!==n.length-1||s!==z(t.slice(a));P(n[a]===t[a]||!u,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "}))}}return ee(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?ce(e,r,_().getBool("DEBUG")):L(e,[],!0),Ke.makeTensor(e,t,r)}function _n(e,t){if((ee(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&ee(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return xn(e,[],[],t)}function Cn(e,t){B(e);var n=tn(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return xn(e,null,n,t)}function En(e,t,n){if(B(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=tn(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return xn(e,t,r,n)}function Sn(e,t,n){if(B(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=tn(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return xn(e,t,r,n)}function An(e,t,n){if(B(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=tn(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return xn(e,t,r,n)}function kn(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=kn(e,"float32"),r=In(e,"float32");return vn(n,r)}var i=he(z(e),t);return Ke.makeTensor(i,e,t)}function In(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=In(e,"float32"),r=In(e,"float32");return vn(n,r)}var i=fe(z(e),t);return Ke.makeTensor(i,e,t)}function Rn(e,t,n){return Ke.runKernelFunc((function(r){return r.fill(e,t,n)}),{})}function Tn(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return In([0],r);var i=fe(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),i[0]=e;for(var o=1;o<i.length;o++)i[o]=i[o-1]+n;return Cn(i,r)}var Nn=gn({onesLike_:function(e){var t=rn(e,"x","onesLike");if("complex64"===t.dtype){var n=Nn(yn(t)),r=On(bn(t));return vn(n,r)}return Ke.runKernelFunc((function(e){return e.onesLike(t)}),{$x:t},(function(e,t){return{$x:function(){return On(e)}}}))}}),On=gn({zerosLike_:function(e){var t=rn(e,"x","zerosLike");return Ke.runKernelFunc((function(e){return e.zerosLike(t)}),{$x:t},(function(e,t){return{$x:function(){return On(e)}}}))}}),Dn=gn({concat_:function(e,t){void 0===t&&(t=0),P(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=on(e,"tensors","concat");"complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+e.dtype+". ")})),t=X(t,n[0].shape)[0];var r=mn(n.map((function(e){return e.shape})),t);if(0===z(r))return wn([],r);if(1===(n=n.filter((function(e){return e.size>0}))).length)return n[0];var i=n.map((function(e){return e.shape}));pn(i,t);var o=n,a={axis:t};return Ke.runKernelFunc((function(e){return e.concat(n,t)}),o,(function(e){var n=i.map((function(e){return e[t]}));return Ln(e,n,t).map((function(e){return function(){return e}}))}),"Concat",a)}}),Mn=gn({concat1d_:function(e){return Dn(e,0)}}),Pn=gn({concat2d_:function(e,t){return Dn(e,t)}}),Fn=gn({concat3d_:function(e,t){return Dn(e,t)}}),Bn=gn({concat4d_:function(e,t){return Dn(e,t)}}),Ln=gn({split_:function(e,t,n){void 0===n&&(n=0);var r,i=rn(e,"x","split");return n=X(n,i.shape)[0],"number"==typeof t?(P(i.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(i.shape[n]/t)):(P(i.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t),Ke.runKernelFunc((function(e){return e.split(i,r,n)}),{$x:i},(function(e){return{$x:function(){return Dn(e,n)}}}))}});function zn(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self&&self;var jn=zn((function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var n=new r(e),o=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,o&&("object"==typeof o&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.alea=o}(0,e)})),Wn=zn((function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,o&&("object"==typeof o&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.xor128=o}(0,e)})),Hn=zn((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,o&&("object"==typeof o&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.xorwow=o}(0,e)})),Vn=zn((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,o&&(o.x&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.xorshift7=o}(0,e)})),Gn=zn((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,o=t.i;return t.w=r=r+1640531527|0,n=i[o+34&127],e=i[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,i,o,a,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),i=0,o=-32;o<u;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(a=a+1640531527|0,i=0==(n=s[127&o]^=r+a)?i+1:0);for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,o=512;o>0;--o)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;e.w=a,e.X=s,e.i=i}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,o&&(o.X&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.xor4096=o}(0,e)})),Un=zn((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,o&&("object"==typeof o&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.tychei=o}(0,e)})),Kn=zn((function(e){!function(t,r){var i,o=this,a=256,s="random",u=r.pow(a,6),l=r.pow(2,52),c=2*l,d=255;function h(e,n,d){var h=[],v=m(function e(t,n){var r,i=[],o=typeof t;if(n&&"object"==o)for(r in t)try{i.push(e(t[r],n-1))}catch(e){}return i.length?i:"string"==o?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,g(t)]:null==e?function(){try{var e;return i&&(e=i.randomBytes)?e=e(a):(e=new Uint8Array(a),(o.crypto||o.msCrypto).getRandomValues(e)),g(e)}catch(e){var n=o.navigator,r=n&&n.plugins;return[+new Date,o,r,o.screen,g(t)]}}():e,3),h),y=new f(h),b=function(){for(var e=y.g(6),t=u,n=0;e<l;)e=(e+n)*a,t*=a,n=y.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,m(g(y.S),t),(n.pass||d||function(e,t,n,i){return i&&(i.S&&p(i,y),e.state=function(){return p(y,{})}),n?(r[s]=e,t):e})(b,v,"global"in n?n.global:this==r,n.state)}function f(e){var t,n=e.length,r=this,i=0,o=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);i<a;)s[i]=i++;for(i=0;i<a;i++)s[i]=s[o=d&o+e[i%n]+(t=s[i])],s[o]=t;(r.g=function(e){for(var t,n=0,i=r.i,o=r.j,s=r.S;e--;)t=s[i=d&i+1],n=n*a+s[d&(s[i]=s[o=d&o+t])+(s[o]=t)];return r.i=i,r.j=o,n})(a)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){for(var n,r=e+"",i=0;i<r.length;)t[d&i]=d&(n^=19*t[d&i])+r.charCodeAt(i++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(r["seed"+s]=h,m(r.random(),t),e.exports){e.exports=h;try{i=n(4902)}catch(e){}}}([],Math)}));Kn.alea=jn,Kn.xor128=Wn,Kn.xorwow=Hn,Kn.xorshift7=Vn,Kn.xor4096=Gn,Kn.tychei=Un;var Xn=Kn.alea,Zn=function(){function e(e,t,n,r,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=Xn(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var i=void 0,o=void 0,a=void 0;do{a=(i=2*this.random()-1)*i+(o=2*this.random()-1)*o}while(a>=1||0===a);var s=Math.sqrt(-2*Math.log(a)/a);t=this.mean+this.stdDev*i*s,n=this.mean+this.stdDev*o*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),qn=function(){function e(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;var i=r||Math.random();this.randu=Xn(i.toString()),this.randn=new Zn(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var e,t,n,r,i,o;;){do{r=this.randn.nextValue(),o=1+this.c*r}while(o<=0);if(o*=o*o,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-o+Math.log(o)),(i=this.randu())<t||Math.log(i)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},e.prototype.convertValue=function(e){return"float32"===this.dtype?e:Math.round(e)},e}(),Yn=function(){function e(e,t,n,r){var i=this;if(void 0===e&&(e=0),void 0===t&&(t=1),this.canReturnFloat=function(){return null==i.dtype||"float32"===i.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=Xn(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function Jn(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",me(e),new Se(e,t,n)}var Qn=gn({batchToSpaceND_:function(e,t,n){var r=rn(e,"x","batchToSpaceND"),i=t.reduce((function(e,t){return e*t}));return P(r.rank>=1+t.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length})),P(n.length===t.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length})),P(r.shape[0]%i==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+i})),Ke.runKernelFunc((function(e){return e.batchToSpaceND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}}))}}),$n=gn({broadcastTo_:function(e,t){var n=rn(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var i=n.shape.slice();i.length<t.length;)i.unshift(1);n=n.reshape(i)}for(var o=Array.from(t),a=t.length-1;a>=0;a--)if(n.shape[a]===t[a])o[a]=1;else if(1!==n.shape[a])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var s=o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));return 0===s.length?n.clone():Ke.runKernelFunc((function(e){return e.tile(n,o)}),{input:n},(function(e){return{input:function(){return e.sum(s,!0)}}}))}}),er=gn({cast_:function(e,t){var n=rn(e,"x","cast");if(!Q(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={dtype:t};return Ke.runKernelFunc((function(e){return e.cast(n,t)}),{x:n},(function(e){return{x:function(){return e.clone()}}}),"Cast",r)}}),tr=gn({clone_:function(e){var t=rn(e,"x","clone",null);return Ke.runKernelFunc((function(){return Ke.makeTensorFromDataId(t.dataId,t.shape,t.dtype)}),{$x:t},(function(e){return{$x:function(){return e.toFloat()}}}))}}),nr=gn({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var i=rn(e,"x","cumsum"),o=dn([t|=0],i.rank),a=i;null!=o&&(a=i.transpose(o));var s=fn(1,i.rank)[0],u=Ke.runKernelFunc((function(e){return e.cumsum(a,s,n,r)}),{permutedX:a},(function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}}));return null!=o&&(u=u.transpose(o)),u}}),rr=gn({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=rn(e,"x","depthToSpace"),i="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],a="NHWC"===n?r.shape[3]:r.shape[1];return P(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+t+"  for depthToSpace with input shape\n      "+r.shape})),P(o*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+t+" for depthToSpace with input shape\n          "+r.shape})),P(a%(t*t)==0,(function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+a+" for depthToSpace with input shape "+r.shape})),Ke.runKernelFunc((function(e){return e.depthToSpace(r,t,n)}),{$x:r})}}),ir=gn({expandDims_:function(e,t){void 0===t&&(t=0);var n=rn(e,"x","expandDims",null);P(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return t<0&&(P(-(n.rank+1)<=t,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),t=n.rank+t+1),r.splice(t,0,1),vr(n,r)}}),or=gn({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var i=Jn([e,t],r),o=e<=t?e:t,a=0;a<o;++a)i.set(1,a,a);var s=i.toTensor().as2D(e,t);if(null==n)return s;if(1===n.length)return xr(ir(s,0),[n[0],1,1]);if(2===n.length)return xr(ir(ir(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return xr(ir(ir(ir(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),ar=gn({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var i=rn(e,"logits","multinomial"),o=i.size,a=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);n=n||Math.random();var s=1===a?i.as2D(1,-1):i,u=Ke.runKernelFunc((function(e){return e.multinomial(s,r,t,n)}),{logits2D:s});return 1===a?u.as1D():u}}),sr=gn({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var i=rn(e,"indices","oneHot","int32"),o=i.shape.concat([t]);return i=i.flatten(),Ke.runKernelFunc((function(e){return e.oneHot(i,t,n,r)}),{$indices:i},(function(e){return{$indices:function(){return In(i.shape,"float32")}}})).reshape(o)}}),ur=gn({pad_:function(e,t,n){void 0===n&&(n=0);var r=rn(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i={paddings:t,constantValue:n};return Ke.runKernelFunc((function(e){return e.pad(r,t,n)}),{x:r},(function(e){var n=t.map((function(e){return e[0]}));return{x:function(){return e.slice(n,r.shape)}}}),"PadV2",i)}}),lr=gn({pad1d_:function(e,t,n){return void 0===n&&(n=0),P(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),ur(e,[t],n)}}),cr=gn({pad2d_:function(e,t,n){return void 0===n&&(n=0),P(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),ur(e,t,n)}}),dr=gn({pad3d_:function(e,t,n){return void 0===n&&(n=0),P(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),ur(e,t,n)}}),hr=gn({pad4d_:function(e,t,n){return void 0===n&&(n=0),P(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),ur(e,t,n)}}),fr=gn({rand_:function(e,t,n){var r=z(e),i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(var o=0;o<r;o++)i[o]=t();return Ke.makeTensor(i,e,n)}}),pr=gn({randomNormal_:function(e,t,n,r,i){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var o=new Zn(t,n,r,!1,i),a=Jn(e,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),mr=gn({randomGamma_:function(e,t,n,r,i){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var o=new qn(t,n,r,i),a=Jn(e,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),gr=gn({randomUniform_:function(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var o=Jn(e,r),a=new Yn(t,n,null,i),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),vr=gn({reshape_:function(e,t){var n=rn(e,"x","reshape",null);t=K(t,n.size),P(n.size===z(t),(function(){return"new shape and old shape must have the same number of elements."}));var r={shape:t};return Ke.runKernelFunc((function(e){return e.reshape(n,t)}),{x:n},(function(e){return{x:function(){return e.reshape(n.shape)}}}),"Reshape",r)}}),yr=gn({spaceToBatchND_:function(e,t,n){var r=rn(e,"x","spaceToBatchND");return P(r.rank>=1+t.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length})),P(n.length===t.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length})),P(r.shape.reduce((function(e,r,i){return i>0&&i<=t.length?e&&(r+n[i-1][0]+n[i-1][1])%t[i-1]==0:e}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()})),Ke.runKernelFunc((function(e){return e.spaceToBatchND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}}))}}),br=gn({squeeze_:function(e,t){var n=rn(e,"x","squeeze");return vr(n,Z(n.shape,t).newShape)}}),wr=gn({stack_:function(e,t){void 0===t&&(t=0);var n=on(e,"tensors","stack");if(P(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),1===n.length)return n[0].expandDims(t);var r=n[0].rank,i=n[0].shape,o=n[0].dtype;P(t<=r,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(e){F(i,e.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(e){P(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var a=n.map((function(e){return e.expandDims(t)}));return Dn(a,t)}}),xr=gn({tile_:function(e,t){var n=rn(e,"x","tile",null);P(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."}));var r=[n],i={reps:t};return Ke.runKernelFunc((function(e,r){var i=e.tile(n,t);return r([n]),i}),{x:n},(function(e,n){var r=n[0];return{x:function(){var n=On(r);if(1===r.rank)for(var i=0;i<t[0];++i)n=n.add(e.slice([i*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(i=0;i<t[0];++i)for(var o=0;o<t[1];++o)n=n.add(e.slice([i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(i=0;i<t[0];++i)for(o=0;o<t[1];++o)for(var a=0;a<t[2];++a)n=n.add(e.slice([i*r.shape[0],o*r.shape[1],a*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(i=0;i<t[0];++i)for(o=0;o<t[1];++o)for(a=0;a<t[2];++a)for(var s=0;s<t[3];++s)n=n.add(e.slice([i*r.shape[0],o*r.shape[1],a*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}}),"Tile",i,r)}}),_r=gn({truncatedNormal_:function(e,t,n,r,i){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var o=new Zn(t,n,r,!0,i),a=Jn(e,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),Cr=gn({unstack_:function(e,t){void 0===t&&(t=0),t=t||0;var n=rn(e,"x","unstack");P(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),t<0&&(t+=n.shape.length);var r={axis:t};return Ke.runKernelFunc((function(e){return e.unstack(n,t)}),{x:n},(function(e){return{x:function(){return wr(e,t)}}}),"Unpack",r)}});function Er(e,t,n,r){void 0===r&&(r=!0);var i=[];if(r)(i=i.concat(t.slice(0))).push(e[0]/n),i=i.concat(e.slice(1));else{i=i.concat(e[0]);for(var o=t.length,a=0;a<o;++a)i=i.concat([e[a+1]/t[a],t[a]]);i=i.concat(e.slice(o+1))}return i}function Sr(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var i=t+1;i<e;++i)i<=2*t?(r.push(i),r.push(i-(t+1))):r.push(i)}else{var o=[],a=[];for(i=1;i<e;++i)i>=2*t+1||i%2==1?a.push(i):o.push(i);r.push.apply(r,o),r.push(0),r.push.apply(r,a)}return r}function Ar(e,t,n,r){void 0===r&&(r=!0);var i=[];r?i.push(e[0]/n):i.push(e[0]*n);for(var o=1;o<e.length;++o)o<=t.length?r?i.push(t[o-1]*e[o]):i.push(e[o]/t[o-1]):i.push(e[o]);return i}function kr(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Ir(e,t,n){for(var r=e.slice(0,1),i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1]);return r}function Rr(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],i=1,o=0;o<n.length-1;++o)i*=n[o];var a=e.shape,s=n.slice();s.pop();var u=1;for(o=r;o<e.rank;++o)u*=a[o],s.push(a[o]);var l=le(e.shape).map((function(e){return e/u})).concat([1]).slice(0,r);return[s,i,u,l]}Object.freeze({prepareAndValidate:Rr});function Tr(e){return e<=30?e:ue(e,Math.floor(Math.sqrt(e)))}function Nr(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+i+".";if(n.rank<i)throw new Error(o+" update.rank < "+i+". ");if(e.length<r+(n.rank-i))throw new Error(o+" Output shape length < "+(r+(n.rank-i)));if(n.rank!==i+e.length-r)throw new Error(o+" update.rank != "+(i+e.length-r));for(var a=0;a<i;++a)if(n.shape[a]!==t.shape[a])throw new Error(o+" updates.shape["+a+"] ("+n.shape[a]+") != indices.shape["+a+"] ("+t.shape[a]+").");for(a=0;a<n.rank-i;++a)if(n.shape[a+i]!==e[a+r])throw new Error(o+" updates.shape["+(a+i)+"] ("+n.shape[a+i]+") != shape["+(a+i)+"] ("+e[a+i]+")")}function Or(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}Nr(n,t,e)}function Dr(e,t,n){for(var r=t.shape.length,i=r>1?t.shape[r-1]:1,o=n.length,a=1,s=i;s<o;++s)a*=n[s];var u=i<1?1:i;return{sliceRank:i,numUpdates:z(t.shape)/u,sliceSize:a,strides:le(n.slice(0,i)).concat([1]),outputSize:z(n)}}Object.freeze({validateUpdateShape:Nr,validateInput:Or,calculateShapes:Dr});function Mr(e,t,n){P(e.rank===t.length,(function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."})),P(e.rank===n.length,(function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."}));for(var r=function(r){P(t[r]+n[r]<=e.shape[r],(function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"}))},i=0;i<e.rank;++i)r(i)}function Pr(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Fr(e,t,n){for(var r=[],i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i]);return r}function Br(e,t,n,r,i){var o=t[i],a=n[i]||1;(e&1<<i||null==o)&&(o=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[i];return o<0&&(o+=s),O(0,o,s-1)}function Lr(e,t,n,r,i){var o=t[i],a=n[i]||1;(e&1<<i||null==o)&&(o=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[i];return o<0&&(o+=s),a>0?O(0,o,s):O(-1,o,s-1)}function zr(e,t,n){for(var r=n.length,i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function jr(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}Object.freeze({assertParamsValid:Mr,maskToAxes:Pr,computeOutShape:Fr,startForAxis:Br,stopForAxis:Lr,isSliceContinous:zr,computeFlatOffset:jr});function Wr(e){return Ke.customGrad(e)}var Hr=gn({softmax_:function(e,t){void 0===t&&(t=-1);var n=rn(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return Ke.runKernelFunc((function(e,r){var i=e.softmax(n,t);return r([i]),i}),{logits:n},(function(e,n){var r=n[0],i=e.mul(r);return{logits:function(){return i.sub(i.sum([t],!0).mul(r))}}}),"Softmax",{dim:t},[],[!0])}}),Vr=gn({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=rn(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return Wr((function(e,n){var r=e.max(t,!0),i=e.sub(r),o=i.toFloat().sub(i.exp().sum(t,!0).log());return n([o]),{value:o,gradFunc:function(e,n){var r=n[0].exp();return e.sub(e.sum(t,!0).mul(r))}}}))(n)}}),Gr=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),Ur=function(){function e(){}return e.prototype.time=function(e){return Kr("time")},e.prototype.read=function(e){return Kr("read")},e.prototype.readSync=function(e){return Kr("readSync")},e.prototype.numDataIds=function(){return Kr("numDataIds")},e.prototype.disposeData=function(e){return Kr("disposeData")},e.prototype.write=function(e,t,n){return Kr("write")},e.prototype.move=function(e,t,n,r){return Kr("move")},e.prototype.memory=function(){return Kr("memory")},e.prototype.floatPrecision=function(){return Kr("floatPrecision")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){return Kr("batchMatMul")},e.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,Kr("fusedBatchMatMul")},e.prototype.slice=function(e,t,n){return Kr("slice")},e.prototype.stridedSlice=function(e,t,n,r){return Kr("stridedSlice")},e.prototype.unstack=function(e,t){return Kr("unstack")},e.prototype.reverse=function(e,t){return Kr("reverse")},e.prototype.concat=function(e,t){return Kr("concat")},e.prototype.neg=function(e){return Kr("neg")},e.prototype.add=function(e,t){return Kr("add")},e.prototype.addN=function(e){return Kr("addN")},e.prototype.subtract=function(e,t){return Kr("subtract")},e.prototype.multiply=function(e,t){return Kr("multiply")},e.prototype.realDivide=function(e,t){return Kr("realDivide")},e.prototype.floorDiv=function(e,t){return Kr("floorDiv")},e.prototype.sum=function(e,t){return Kr("sum")},e.prototype.prod=function(e,t){return Kr("prod")},e.prototype.unsortedSegmentSum=function(e,t,n){return Kr("unsortedSegmentSum")},e.prototype.argMin=function(e,t){return Kr("argMin")},e.prototype.argMax=function(e,t){return Kr("argMax")},e.prototype.equal=function(e,t){return Kr("equal")},e.prototype.notEqual=function(e,t){return Kr("notEqual")},e.prototype.less=function(e,t){return Kr("less")},e.prototype.lessEqual=function(e,t){return Kr("lessEqual")},e.prototype.greater=function(e,t){return Kr("greater")},e.prototype.greaterEqual=function(e,t){return Kr("greaterEqual")},e.prototype.logicalNot=function(e){return Kr("logicalNot")},e.prototype.logicalAnd=function(e,t){return Kr("logicalAnd")},e.prototype.logicalOr=function(e,t){return Kr("logicalOr")},e.prototype.where=function(e){return Kr("where")},e.prototype.select=function(e,t,n){return Kr("select")},e.prototype.topk=function(e,t,n){return Kr("topk")},e.prototype.min=function(e,t){return Kr("min")},e.prototype.minimum=function(e,t){return Kr("minimum")},e.prototype.mod=function(e,t){return Kr("mod")},e.prototype.max=function(e,t){return Kr("max")},e.prototype.maximum=function(e,t){return Kr("maximum")},e.prototype.all=function(e,t){return Kr("all")},e.prototype.any=function(e,t){return Kr("any")},e.prototype.squaredDifference=function(e,t){return Kr("squaredDifference")},e.prototype.ceil=function(e){return Kr("ceil")},e.prototype.floor=function(e){return Kr("floor")},e.prototype.round=function(e){return Kr("round")},e.prototype.sign=function(e){return Kr("sign")},e.prototype.isNaN=function(e){return Kr("isNaN")},e.prototype.isInf=function(e){return Kr("isInf")},e.prototype.isFinite=function(e){return Kr("isFinite")},e.prototype.pow=function(e,t){return Kr("pow")},e.prototype.exp=function(e){return Kr("exp")},e.prototype.expm1=function(e){return Kr("expm1")},e.prototype.softmax=function(e,t){return Kr("softmax")},e.prototype.log=function(e){return Kr("log")},e.prototype.log1p=function(e){return Kr("log1p")},e.prototype.sqrt=function(e){return Kr("sqrt")},e.prototype.rsqrt=function(e){return Kr("rsqrt")},e.prototype.square=function(e){return Kr("square")},e.prototype.reciprocal=function(e){return Kr("reciprocal")},e.prototype.relu=function(e){return Kr("relu")},e.prototype.relu6=function(e){return Kr("relu6")},e.prototype.prelu=function(e,t){return Kr("prelu")},e.prototype.elu=function(e){return Kr("elu")},e.prototype.eluDer=function(e,t){return Kr("eluDer")},e.prototype.selu=function(e){return Kr("selu")},e.prototype.int=function(e){return Kr("int")},e.prototype.clip=function(e,t,n){return Kr("clip")},e.prototype.abs=function(e){return Kr("abs")},e.prototype.complexAbs=function(e){return Kr("complexAbs")},e.prototype.sigmoid=function(e){return Kr("sigmoid")},e.prototype.softplus=function(e){return Kr("softplus")},e.prototype.sin=function(e){return Kr("sin")},e.prototype.cos=function(e){return Kr("cos")},e.prototype.tan=function(e){return Kr("tan")},e.prototype.asin=function(e){return Kr("asin")},e.prototype.acos=function(e){return Kr("acos")},e.prototype.atan=function(e){return Kr("atan")},e.prototype.atan2=function(e,t){return Kr("atan2")},e.prototype.sinh=function(e){return Kr("sinh")},e.prototype.cosh=function(e){return Kr("cosh")},e.prototype.tanh=function(e){return Kr("tanh")},e.prototype.asinh=function(e){return Kr("asinh")},e.prototype.acosh=function(e){return Kr("acosh")},e.prototype.atanh=function(e){return Kr("atanh")},e.prototype.erf=function(e){return Kr("erf")},e.prototype.step=function(e,t){return Kr("step")},e.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,Kr("fusedConv2d")},e.prototype.conv2d=function(e,t,n){return Kr("conv2d")},e.prototype.conv2dDerInput=function(e,t,n){return Kr("conv2dDerInput")},e.prototype.conv2dDerFilter=function(e,t,n){return Kr("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,Kr("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(e,t,n){return Kr("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){return Kr("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){return Kr("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(e,t,n){return Kr("conv3d")},e.prototype.conv3dDerInput=function(e,t,n){return Kr("conv3dDerInput")},e.prototype.conv3dDerFilter=function(e,t,n){return Kr("conv3dDerFilter")},e.prototype.maxPool=function(e,t){return Kr("maxPool")},e.prototype.maxPoolBackprop=function(e,t,n,r){return Kr("maxPoolBackprop")},e.prototype.avgPool=function(e,t){return Kr("avgPool")},e.prototype.avgPoolBackprop=function(e,t,n){return Kr("avgPoolBackprop")},e.prototype.avgPool3d=function(e,t){return Kr("avgPool3d")},e.prototype.avgPool3dBackprop=function(e,t,n){return Kr("avgPool3dBackprop")},e.prototype.maxPool3d=function(e,t){return Kr("maxPool3d")},e.prototype.maxPool3dBackprop=function(e,t,n,r){return Kr("maxPool3dBackprop")},e.prototype.reshape=function(e,t){return Kr("reshape")},e.prototype.cast=function(e,t){return Kr("cast")},e.prototype.tile=function(e,t){return Kr("tile")},e.prototype.pad=function(e,t,n){return Kr("pad")},e.prototype.transpose=function(e,t){return Kr("transpose")},e.prototype.gather=function(e,t,n){return Kr("gather")},e.prototype.gatherND=function(e,t){return Kr("gatherND")},e.prototype.scatterND=function(e,t,n){return Kr("scatterND")},e.prototype.batchToSpaceND=function(e,t,n){return Kr("batchToSpaceND")},e.prototype.spaceToBatchND=function(e,t,n){return Kr("spaceToBatchND")},e.prototype.resizeBilinear=function(e,t,n,r){return Kr("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(e,t,n){return Kr("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){return Kr("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){return Kr("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(e,t,n,r,i,o){return Kr("batchNormalization")},e.prototype.localResponseNormalization4D=function(e,t,n,r,i){return Kr("localResponseNormalization4D")},e.prototype.LRNGrad=function(e,t,n,r,i,o,a){return Kr("LRNGrad")},e.prototype.multinomial=function(e,t,n,r){return Kr("multinomial")},e.prototype.oneHot=function(e,t,n,r){return Kr("oneHot")},e.prototype.cumsum=function(e,t,n,r){return Kr("cumsum")},e.prototype.nonMaxSuppression=function(e,t,n,r,i){return Kr("nonMaxSuppression")},e.prototype.fft=function(e){return Kr("fft")},e.prototype.ifft=function(e){return Kr("ifft")},e.prototype.complex=function(e,t){return Kr("complex")},e.prototype.real=function(e){return Kr("real")},e.prototype.imag=function(e){return Kr("imag")},e.prototype.cropAndResize=function(e,t,n,r,i,o){return Kr("cropAndResize")},e.prototype.depthToSpace=function(e,t,n){return Kr("depthToSpace")},e.prototype.split=function(e,t,n){return Kr("split")},e.prototype.sparseToDense=function(e,t,n,r){return Kr("sparseToDense")},e.prototype.diag=function(e){return Kr("diag")},e.prototype.fill=function(e,t,n){return Kr("fill")},e.prototype.onesLike=function(e){return Kr("onesLike")},e.prototype.zerosLike=function(e){return Kr("zerosLike")},e.prototype.linspace=function(e,t,n){return Kr("linspace")},e.prototype.dispose=function(){return Kr("dispose")},e}();function Kr(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Xr(e,t){for(var n=e.length,r=[],i=0;i<n;i++){var o=n-1-i,a=e[o]||1;(t[t.length-1-i]||1)>1&&1===a&&r.unshift(o)}return r}function Zr(e,t){for(var n=[],r=0;r<t.length;r++){var i=e[e.length-r-1],o=t.length-r-1,a=t[o];(null==i||1===i&&a>1)&&n.unshift(o)}return n}function qr(e,t){for(var n=[],r=Math.max(e.length,t.length),i=0;i<r;i++){var o=e[e.length-i-1];null==o&&(o=1);var a=t[t.length-i-1];if(null==a&&(a=1),1===o)n.unshift(a);else if(1===a)n.unshift(o);else{if(o!==a)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(o)}}return n}function Yr(e,t,n,r,i,o,a){void 0===a&&(a="channelsLast");var s,u=ti(t),l=u[0],c=u[1];if("channelsLast"===a)s=[l,c,e[3],e[3]];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);s=[l,c,e[1],e[1]]}return Qr(e,s,n,r,i,o,!1,a)}function Jr(e,t,n,r,i,o,a){void 0===a&&(a="NDHWC");var s,u,l=ni(t),c=l[0],d=l[1],h=l[2];if("NDHWC"===a)u="channelsLast",s=[c,d,h,e[4],e[4]];else{if("NCDHW"!==a)throw new Error("Unknown dataFormat "+a);u="channelsFirst",s=[c,d,h,e[1],e[1]]}return $r(e,s,n,r,i,!1,u,o)}function Qr(e,t,n,r,i,o,a,s){void 0===a&&(a=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],h=u[3];if("channelsLast"===s)l=e[0],c=e[1],d=e[2],h=e[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);l=e[0],h=e[1],c=e[2],d=e[3]}var f,p=t[0],m=t[1],g=t[3],v=ti(n),y=v[0],b=v[1],w=ti(r),x=w[0],_=w[1],C=ri(p,x),E=ri(m,_),S=function(e,t,n,r,i,o,a,s){var u,l,c;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var d=function(e,t,n,r,i){null==r&&(r=ei(e,t,n));var o=e[1],a=ii((e[0]-t+2*r)/n+1,i);P(W(a),(function(){return"The output # of rows ("+a+") must be an integer. Change the stride and/or zero pad parameters"}));var s=ii((o-t+2*r)/n+1,i);return P(W(s),(function(){return"The output # of columns ("+s+") must be an integer. Change the stride and/or zero pad parameters"})),[a,s]}([t,n],o,r,e,s);l=d[0],c=d[1]}else if("same"===e){l=Math.ceil(t/r),c=Math.ceil(n/i);var h=Math.max(0,(l-1)*r+o-t),f=Math.max(0,(c-1)*i+a-n),p=Math.floor(h/2),m=h-p,g=Math.floor(f/2);u={top:p,bottom:m,left:g,right:f-g,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);u={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-o+1)/r),c=Math.ceil((n-a+1)/i)}return{padInfo:u,outHeight:l,outWidth:c}}(i,c,d,y,b,C,E,o),A=S.padInfo,k=S.outHeight,I=S.outWidth,R=a?g*h:g;return"channelsFirst"===s?f=[l,R,k,I]:"channelsLast"===s&&(f=[l,k,I,R]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:d,inChannels:h,outHeight:k,outWidth:I,outChannels:R,padInfo:A,strideHeight:y,strideWidth:b,filterHeight:p,filterWidth:m,effectiveFilterHeight:C,effectiveFilterWidth:E,dilationHeight:x,dilationWidth:_,inShape:e,outShape:f,filterShape:t}}function $r(e,t,n,r,i,o,a,s){void 0===o&&(o=!1),void 0===a&&(a="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],h=u[3],f=u[4];if("channelsLast"===a)l=e[0],c=e[1],d=e[2],h=e[3],f=e[4];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);l=e[0],f=e[1],c=e[2],d=e[3],h=e[4]}var p,m=t[0],g=t[1],v=t[2],y=t[4],b=ni(n),w=b[0],x=b[1],_=b[2],C=ni(r),E=C[0],S=C[1],A=C[2],k=ri(m,E),I=ri(g,S),R=ri(v,A),T=function(e,t,n,r,i,o,a,s,u,l,c){var d,h,f,p;if("number"==typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,i,o){null==i&&(i=ei(e,t,r));var a=e[1],s=e[2],u=ii((e[0]-t+2*i)/r+1,o);P(W(u),(function(){return"The output # of depths ("+u+") must be an integer. Change the stride and/or zero pad parameters"}));var l=ii((a-t+2*i)/r+1,o);P(W(l),(function(){return"The output # of rows ("+l+") must be an integer. Change the stride and/or zero pad parameters"}));var c=ii((s-t+2*i)/r+1,o);return P(W(c),(function(){return"The output # of columns ("+c+") must be an integer. Change the stride and/or zero pad parameters"})),[u,l,c,1]}([t,n,r,1],s,0,i,e,c);h=m[0],f=m[1],p=m[2]}else if("same"===e){var g=((h=Math.ceil(t/i))-1)*i+s-t,v=((f=Math.ceil(n/o))-1)*o+u-n,y=((p=Math.ceil(r/a))-1)*a+l-r,b=Math.floor(g/2),w=g-b,x=Math.floor(v/2),_=v-x,C=Math.floor(y/2);d={top:x,bottom:_,left:C,right:y-C,front:b,back:w,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((t-s+1)/i),f=Math.ceil((n-u+1)/o),p=Math.ceil((r-l+1)/a)}return{padInfo:d,outDepth:h,outHeight:f,outWidth:p}}(i,c,d,h,w,x,_,k,I,R,s),N=T.padInfo,O=T.outDepth,D=T.outHeight,M=T.outWidth,F=o?y*f:y;return"channelsFirst"===a?p=[l,F,O,D,M]:"channelsLast"===a&&(p=[l,O,D,M,F]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:d,inWidth:h,inChannels:f,outDepth:O,outHeight:D,outWidth:M,outChannels:F,padInfo:N,strideDepth:w,strideHeight:x,strideWidth:_,filterDepth:m,filterHeight:g,filterWidth:v,effectiveFilterDepth:k,effectiveFilterHeight:I,effectiveFilterWidth:R,dilationDepth:E,dilationHeight:S,dilationWidth:A,inShape:e,outShape:p,filterShape:t}}function ei(e,t,n,r){void 0===r&&(r=1);var i=ri(t,r);return Math.floor((e[0]*(n-1)-n+i)/2)}function ti(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function ni(e){return"number"==typeof e?[e,e,e]:e}function ri(e,t){return t<=1?e:e+(e-1)*(t-1)}function ii(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function oi(e){var t=ti(e),n=t[0],r=t[1],i=t[2];return 1===n&&1===r&&1===i}function ai(e,t){return oi(e)||oi(t)}function si(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function ui(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=In(e.shape),i=e.toFloat(),o=n.complex(i,r);return r.dispose(),i.dispose(),o}if(!$(e.dtype,t))return Ke.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){var a=n.real(e);return o=a.cast(t),a.dispose(),o}if("int32"===t)return n.int(e);if("bool"===t){var s=_n(0,e.dtype);return o=n.notEqual(e,s),s.dispose(),o}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function li(e,t){return Ke.makeTensorFromDataId(e.dataId,t,e.dtype)}function ci(e,t,n){var r=(t-e)/(n-1),i=fe(n,"float32");i[0]=e;for(var o=1;o<i.length;o++)i[o]=i[o-1]+r;return Cn(i,"float32")}Object.freeze({castTensor:ui,reshapeTensor:li,linspaceImpl:ci,upcastType:Le,axesAreInnerMostDims:an,combineLocations:sn,computeOutAndReduceShapes:un,expandShapeToKeepDim:ln,assertAxesAreInnerMostDims:cn,getAxesPermutation:dn,getUndoAxesPermutation:hn,getInnerMostAxes:fn,getBroadcastDims:Xr,getReductionAxes:Zr,assertAndGetBroadcastShape:qr,assertParamsConsistent:pn,computeOutShape:mn,computePool2DInfo:Yr,computePool3DInfo:Jr,computeConv2DInfo:Qr,computeConv3DInfo:$r,computeDefaultPad:ei,tupleValuesAreOne:oi,eitherStridesOrDilationsAreOne:ai,convertConv2DDataFormat:si,PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:Tr});function di(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function hi(e,t){return{real:e[2*t],imag:e[2*t+1]}}function fi(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function pi(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function mi(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,i=e.length,o=0,a=!1;r<i;){var s=n(t,e[o=r+(i-r>>>1)]);s>0?r=o+1:(i=o,a=!s)}return a?r:-r-1}(e,t,n||gi)}(e,t,n),i=r<0?-(r+1):r;e.splice(i,0,t)}function gi(e,t){return e>t?1:e<t?-1:0}function vi(e,t,n,r,i){return bi(e,t,n,r,i,0).selectedIndices}function yi(e,t,n,r,i,o){var a=bi(e,t,n,r,i,o,!0);return a.numValidOutputs.dispose(),{selectedIndices:a.selectedIndices,selectedScores:a.selectedScores}}function bi(e,t,n,r,i,o,a,s){void 0===a&&(a=!1),void 0===s&&(s=!1);for(var u=Array.from(t).map((function(e,t){return{score:e,boxIndex:t,suppressBeginIndex:0}})).filter((function(e){return e.score>i})).sort(_i),l=o>0?-.5/o:0,c=[],d=[];c.length<n&&u.length>0;){var h=u.pop(),f=h.score,p=h.boxIndex,m=h.suppressBeginIndex;if(f<i)break;for(var g=!1,v=c.length-1;v>=m;--v){var y=wi(e,p,c[v]);if(y>=r){g=!0;break}if(h.score=h.score*xi(r,l,y),h.score<=i)break}h.suppressBeginIndex=c.length,g||(h.score===f?(c.push(p),d.push(h.score)):h.score>i&&mi(u,h,_i))}var b=c.length;return s&&(c.fill(0,b),d.fill(0,b)),{selectedIndices:Cn(c,"int32"),selectedScores:Cn(d,"float32"),numValidOutputs:_n(b,"int32")}}function wi(e,t,n){var r=e.subarray(4*t,4*t+4),i=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),f=(s-o)*(u-a),p=(d-l)*(h-c);if(f<=0||p<=0)return 0;var m=Math.max(o,l),g=Math.max(a,c),v=Math.min(s,d),y=Math.min(u,h),b=Math.max(v-m,0)*Math.max(y-g,0);return b/(f+p-b)}function xi(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function _i(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function Ci(e,t,n){var r=new Array(e.rank).fill(0),i=e.shape.slice();return t.map((function(t){i[n]=t;var o=e.slice(r,i);return r[n]+=t,o}))}function Ei(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var i=Jn(n,e.dtype);for(r=0;r<i.values.length;++r){for(var o=i.indexToLoc(r),a=new Array(e.rank),s=0;s<a.length;s++)a[s]=o[s]%e.shape[s];var u=e.locToIndex(a);i.values[r]=e.values[u]}return i.toTensor()}function Si(e,t,n,r,i){for(var o=t[t.length-1],a=[e.length/o,o],s=a[0],u=a[1],l=q(n,s*r),c=q("int32",s*r),d=0;d<s;d++){for(var h=d*u,f=e.subarray(h,h+u),p=[],m=0;m<f.length;m++)p.push({value:f[m],index:m});p.sort((function(e,t){return t.value-e.value}));var g=d*r,v=l.subarray(g,g+r),y=c.subarray(g,g+r);for(m=0;m<r;m++)v[m]=p[m].value,y[m]=p[m].index}var b=t.slice();return b[b.length-1]=r,[wn(l,b,n),wn(c,b,"int32")]}function Ai(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var i=Jn(e,"int32"),o=Jn([n.length,e.length],"int32");for(r=0;r<n.length;r++){var a=i.indexToLoc(n[r]),s=r*e.length;o.values.set(a,s)}return o.toTensor()}var ki=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},Ii=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},Ri=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,i=e.batchSize,o=e.inSize,a=Math.ceil(o/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];var s="max"===t?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function Ti(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return e+"."+t}))}function Ni(e,t){return 1===t?[e]:Ti(e,t)}function Oi(){var e,t,n,r,i,o,a,s,u,l;return 2===_().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",i="texture",o="outputColor",a="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",a="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function Di(e,t,n){void 0===n&&(n="index");var r=le(t);return r.map((function(t,i){return"int "+e[i]+" = "+n+" / "+t+"; "+(i===r.length-1?"int "+e[i+1]+" = "+n+" - "+e[i]+" * "+t:"index -= "+e[i]+" * "+t)+";"})).join("")}function Mi(e){var t=le(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var Pi="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function Fi(e,t,n,r){var i=[];e.forEach((function(e){var t=z(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?i.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(i.push("uniform sampler2D "+e.name+";"),i.push("uniform int offset"+e.name+";"))}));var o,a,s=i.join("\n"),u=e.map((function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?Li(e):Bi(e);var i=e.shapeInfo.logicalShape,o=t.logicalShape;return i.length<=o.length&&(r+=n?function(e,t){var n,r=e.name,i=r.charAt(0).toUpperCase()+r.slice(1),o="get"+i+"AtOutCoords",a=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=Xr(e.shapeInfo.logicalShape,t.logicalShape),l=Ui(s),c=s-a,d=["x","y","z","w","u","v"];n=0===a?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords."+d[e+c]+" = 0;"})).join("\n");var h;h=s<2&&a>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+d[t+c]})).join(", ");var f="return outputValue;",p=1===z(e.shapeInfo.logicalShape),m=1===z(t.logicalShape);if(1!==a||p||m){if(p&&!m)f=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var g=a-2,v=a-1;u.indexOf(g)>-1&&u.indexOf(v)>-1?f="return vec4(outputValue.x);":u.indexOf(g)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(v)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+o+"() {\n      "+l+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+i+"("+h+");\n      "+f+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=t.texShape,a=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&j(a,o))return"\n      float "+i+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var l,c=Ui(u),d=Xr(e.shapeInfo.logicalShape,t.logicalShape),h=u-s,f=["x","y","z","w","u","v"];l=0===s?"":u<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords."+f[e+h]+" = 0;"})).join("\n");var p;return p=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+f[t+h]})).join(", "),"\n    float "+i+"() {\n      "+c+" coords = getOutputCoords();\n      "+l+"\n      return get"+r+"("+p+");\n    }\n  "}(e,t)),r}(e,t,r)})).join("\n"),l=t.texShape,c=Oi(),d=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+e.texture2D+"(textureSampler, uv).r;\n    }\n  "}(c),h=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+e.defineSpecialNaN+"\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+zi+"\n    "+ji+"\n    "+Wi+"\n  "}(c);return t.isPacked?(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(j(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=(o=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+i[0]+", "+i[1]+"));\n      int index = resTexRC.x * "+i[1]+" + resTexRC.y;\n\n      int b = index / "+a+";\n      index -= b * "+a+";\n\n      int r = 2 * (index / "+o+");\n      int c = imod(index, "+o+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),i=r*Math.ceil(e[e.length-2]/2),o=i,a="",s="b, r, c",u=2;u<e.length-1;u++)a="\n      int b"+u+" = index / "+(o*=e[e.length-u-1])+";\n      index -= b"+u+" * "+o+";\n    "+a,s="b"+u+", "+s;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+a+"\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+s+");\n    }\n  "}(e,t)}var n,r,i,o,a}(t.logicalShape,l),a=function(e){return"\n    void setOutput(vec4 val) {\n      "+e.output+" = val;\n    }\n  "}(c)):(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return j(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=Di(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=Di(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=Di(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=Di(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,l),a=function(e){return"\n    void setOutput(float val) {\n      "+e.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(c)),r&&(h+=Hi),[h,d,a,s,o,u,n].join("\n")}function Bi(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,i=r[0],o=r[1];if(1===i&&1===o)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var a=e.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+a[0]+", "+a[1]+", "+Vi(t)+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+Gi(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,i=r[0],o=r[1];if(1===o&&1===i)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var a=Vi(t);return 1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+a+") + 0.5) / "+i+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+a+") + 0.5) / "+o+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+i+", "+o+", index + "+a+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape;if(null!=i&&j(t,i)){var o=i[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+i[1]+".0, "+o+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var a=Z(t),s=a.newShape,u=a.keptDims,l=s;if(l.length<t.length)return"\n      "+Bi(Ki(e,l))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+Xi(["row","col"],u)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+t[1]+", 1)));\n        "+Gi(e)+"\n      }\n    ";var c=i[0],d=i[1],h=Vi(n);return 1===d?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+c+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===c?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+d+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+t[1]+" + col + "+h+";\n    vec2 uv = uvFromFlat("+c+", "+d+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[1]*t[2],o=t[2],a=Z(t),s=a.newShape,u=a.keptDims,l=s;if(l.length<t.length)return"\n        "+Bi(Ki(e,l))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+Xi(["row","col","depth"],u)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+i+", "+o+", 1)));\n        "+Gi(e)+"\n      }\n    ";var c=e.shapeInfo.texShape,d=c[0],h=c[1],f=e.shapeInfo.flatOffset;return h===i&&null==f?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+o+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+h+".0, "+d+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":h===o&&null==f?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+t[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+h+".0, "+d+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+i+" + col * "+o+" + depth + "+Vi(n)+";\n        vec2 uv = uvFromFlat("+d+", "+h+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[3],o=t[2]*i,a=t[1]*o,s=Z(t),u=s.newShape,l=s.keptDims;if(u.length<t.length)return"\n      "+Bi(Ki(e,u))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+Xi(["row","col","depth","depth2"],l)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+a+", "+o+", "+i+", 1)));\n        "+Gi(e)+"\n      }\n    ";var c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],f=d[1];return f===a&&null==c?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+o+", "+i+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+f+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":f===i&&null==c?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+t[1]*t[2]+", "+t[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+f+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+a+" + col * "+o+" +\n          depth * "+i+" + depth2;\n      vec2 uv = uvFromFlat("+h+", "+f+", index + "+Vi(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[4],o=t[3]*i,a=t[2]*o,s=t[1]*a,u=Z(t),l=u.newShape,c=u.keptDims;if(l.length<t.length)return"\n      "+Bi(Ki(e,l))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+Xi(["row","col","depth","depth2","depth3"],c)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+a+", "+o+", "+i+")) +\n          depth3;\n        "+Gi(e)+"\n      }\n    ";var d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,f=h[0],p=h[1];return p===s&&null==d?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+a+", "+o+", "+i+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":p===i&&null==d?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]+",\n               "+t[2]*t[3]+", "+t[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+a+" + depth * "+o+" +\n          depth2 * "+i+" + depth3 + "+Vi(n)+";\n      vec2 uv = uvFromFlat("+f+", "+p+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=Z(t),o=i.newShape,a=i.keptDims;if(o.length<t.length)return"\n      "+Bi(Ki(e,o))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+Xi(["row","col","depth","depth2","depth3","depth4"],a)+");\n      }\n    ";var s=t[5],u=t[4]*s,l=t[3]*u,c=t[2]*l,d=t[1]*c;if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+d+", "+c+", "+l+", "+u+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+s+", 1)));\n        "+Gi(e)+"\n      }\n    ";var h=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,p=f[0],m=f[1];return m===d&&null==h?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+c+", "+l+", "+u+", "+s+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":m===s&&null==h?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]*t[4]+",\n               "+t[2]*t[3]*t[4]+",\n               "+t[3]*t[4]+",\n               "+t[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+d+" + col * "+c+" + depth * "+l+" +\n          depth2 * "+u+" + depth3 * "+s+" + depth4 + "+Vi(n)+";\n      vec2 uv = uvFromFlat("+p+", "+m+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function Li(e){var t;switch(e.shapeInfo.logicalShape.length){case 0:return"\n    vec4 "+("get"+(t=e.name).charAt(0).toUpperCase()+t.slice(1))+"() {\n      return "+Oi().texture2D+"("+t+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=Oi();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+i[0]+", "+i[1]+", index);\n      return "+o.texture2D+"("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,o=i[0],a=i[1],s=Oi();if(null!=i&&j(t,i))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+a+".0, "+o+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    ";var u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(t[1]/2)+", "+u[0]+", "+u[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===t[0])return"\n        "+Li(Ki(e,t.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+Xi(["b","row","col"],[1,2])+");\n        }\n      ";var a=o[0],s=o[1],u=Math.ceil(t[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+a+", "+s+", "+u*Math.ceil(t[1]/2)+", "+u+", b, row, col);\n      return "+Oi().texture2D+"("+n+", uv);\n    }\n  "}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],s=a[0],u=a[1],l=Math.ceil(t[n-1]/2),c=l*Math.ceil(t[n-2]/2),d="int b, int row, int col",h="b * "+c+" + (row / 2) * "+l+" + (col / 2)",f=2;f<n-1;f++)d="int b"+f+", "+d,h="b"+f+" * "+(c*=t[n-f-1])+" + "+h;return"\n    vec4 "+i+"("+d+") {\n      int index = "+h+";\n      int texR = index / "+u+";\n      int texC = index - texR * "+u+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+", "+s+");\n      return "+Oi().texture2D+"("+r+", uv);\n    }\n  "}(e)}}var zi="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ji="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Wi="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Hi="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Vi(e){return"offset"+e}function Gi(e){var t=e.name,n=z(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function Ui(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function Ki(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Xi(e,t){return t.map((function(t){return e[t]})).join(", ")}var Zi=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,P(e.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var i=e[e.length-1],o=Math.ceil(i/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var a,s,u=this.outputShape,l=u.length,c=Ui(l),d=Ni("coords",l);if(1===o){var h=Ui(s=l+1);a="\n        "+h+" sourceLocR = "+h+"("+d.join()+", 0);\n        ++"+d[l-1]+";\n        "+h+" sourceLocG = "+h+"("+d.join()+", 0);\n        ++"+d[l-2]+";\n        "+h+" sourceLocA = "+h+"("+d.join()+", 0);\n        --"+d[l-1]+";\n        "+h+" sourceLocB = "+h+"("+d.join()+", 0);\n        --"+d[l-2]+";"}else s=l,a="\n        "+c+" sourceLocR = coords;\n        ++"+d[l-1]+";\n        "+c+" sourceLocG = coords;\n        ++"+d[l-2]+";\n        "+c+" sourceLocA = coords;\n        --"+d[l-1]+";\n        "+c+" sourceLocB = coords;\n        --"+d[l-2]+";";var f=["x","y","z","w","u","v"].slice(0,s),p="."+f[s-1],m=f.map((function(e){return"int "+e})),g=Ni("sourceLocR",s-1).concat("inIdx.r"),v=Ni("sourceLocG",s-1).concat("inIdx.g"),y=Ni("sourceLocB",s-1).concat("inIdx.b"),b=Ni("sourceLocA",s-1).concat("inIdx.a"),w="max"===n?"greaterThan":"lessThan",x=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+v.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+b.join()+")));",_="vec4(\n            getAChannel("+g.join()+"),\n            hasNextCol ? getAChannel("+v.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+b.join()+") : 0.)",C=r?"":"\n      float getBestIndicesAChannel("+m.join()+") {\n        return getChannel(getBestIndicesA("+f.join()+"),\n                                          vec2("+f.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+m.join()+") {\n        return getChannel(getA("+f.join()+"),\n                               vec2("+f.slice(-2).join()+"));\n      }\n      "+C+"\n      void main() {\n        "+c+" coords = getOutputCoords();\n        bool hasNextCol = "+d[l-1]+" < "+(u[l-1]-1)+";\n        bool hasNextRow = "+d[l-2]+" < "+(u[l-2]-1)+";\n        "+a+"\n        ivec4 srcIdx = ivec4(sourceLocR"+p+", sourceLocG"+p+",\n          sourceLocB"+p+", sourceLocA"+p+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+_+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+x+"\n          vec4 candidate = "+_+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+w+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},qi=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=s-1-e.padInfo.top,c=u-1-e.padInfo.left,d=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+l+", "+c+");\n      const float avgMultiplier = float("+d+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n            wR += "+o+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+u+";\n            wC+= "+a+") {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Yi=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=c-1-e.padInfo.front,p=d-1-e.padInfo.top,m=h-1-e.padInfo.left,g=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3("+f+", "+p+", "+m+");\n      const float avgMultiplier = float("+g+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+c+";\n            wD += "+s+") {\n          float dyD = float(dyDCorner + wD) / "+i+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+d+";\n              wR += "+u+") {\n            float dyR = float(dyRCorner + wR) / "+o+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+h+";\n                wC += "+l+") {\n              float dyC = float(dyCCorner + wC) / "+a+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ji=function(e,t,n,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],qr(e,t),qr(e,n);var a="0.0";null!=r&&(qr(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";null!=i&&(qr(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+a+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+o+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},Qi=function(e,t,n,r,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],qr(e,t),qr(e,n);var a="vec4(0.0)";null!=r&&(qr(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=i&&(qr(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+a+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+o+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},$i=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=qr(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},eo="return a + b;",to="return a - b;",no="return a * b;",ro="return (a < 0.) ? b * a : a;",io=function(e,t,n){this.variableNames=["A","B"],this.outputShape=qr(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},oo="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",ao=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=qr(t,n);var i=this.outputShape.length,o="";if(r)if(0===i||1===z(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o="\n          "+Ui(i)+" coords = getOutputCoords();\n        ",1===i)o+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var a=Ni("coords",i);o+="\n            bool nextRowOutOfBounds =\n              ("+a[i-2]+" + 1) >= "+this.outputShape[i-2]+";\n            bool nextColOutOfBounds =\n              ("+a[i-1]+" + 1) >= "+this.outputShape[i-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+o+"\n\n        setOutput(result);\n      }\n    "},so=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),uo=function(){function e(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),lo=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},co=function(e){this.outputShape=[],this.outputShape=mn(e,1),this.variableNames=e.map((function(e,t){return"T"+t}));var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var i=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+i+"));")}var o=t.length,a=t[t.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+a+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},ho=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=mn(e,t);var n=this.outputShape,r=n.length,i=Ui(r),o=Ni("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((function(e,t){return"T"+t}));var s=new Array(e.length-1);s[0]=e[0][t];for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][t];var l=a[t],c=a.slice(-2),d=a.join(),h="if ("+l+" < "+s[0]+") {\n        return getChannel(\n            getT0("+d+"), vec2("+c.join()+"));\n        }";for(u=1;u<s.length;u++){var f=s[u-1];h+="\n        if ("+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+") {\n          return getChannel(\n            getT"+u+"("+fo(a,l,f)+"),\n            vec2("+fo(c,l,f)+"));\n        }"}var p=s.length,m=s[s.length-1];h+="\n        return getChannel(\n          getT"+p+"("+fo(a,l,m)+"),\n          vec2("+fo(c,l,m)+"));",this.userCode="\n      float getValue("+a.map((function(e){return"int "+e}))+") {\n        "+h+"\n      }\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+o+"), 0., 0., 0.);\n\n        "+o[r-1]+" = "+o[r-1]+" + 1;\n        if ("+o[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+o+");\n        }\n\n        "+o[r-2]+" = "+o[r-2]+" + 1;\n        if ("+o[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+o+");\n        }\n\n        "+o[r-1]+" = "+o[r-1]+" - 1;\n        if ("+o[r-2]+" < "+n[r-2]+" &&\n            "+o[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+o+");\n        }\n        setOutput(result);\n      }\n    "};function fo(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?e+" - "+n:e})).join()}var po=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,o="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              if ("+o+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},mo=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o="channelsLast"===e.dataFormat,a=t-1-e.padInfo.top,s=n-1-e.padInfo.left,u=o?1:2,l=o?2:3,c=o?3:1;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+c+"];\n\n        ivec2 dyCorner = ivec2(coords["+u+"], coords["+l+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n\n              if ("+o+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},go=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+i+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+o+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+a+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},vo=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=t-1-e.padInfo.front,u=n-1-e.padInfo.top,l=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+s+", "+u+", "+l+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+i+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+o+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+a+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},yo=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+o+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},bo=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=t-1-e.padInfo.top,a=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},wo=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var i=e.padInfo.top,o=e.padInfo.left,a=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4,p="channelsLast"===e.dataFormat,m=p?1:2,g=p?2:3,v=p?3:1,y="",b="";n&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",b="result = activation(result);");var w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+y+"\n\n      const ivec2 strides = ivec2("+a+", "+s+");\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+v+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+m+"], coords["+g+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+c+"; wR++) {\n          int xR = xRCorner + wR * "+u+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+d+"; wC++) {\n            int xC = xCCorner + wC * "+l+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+h+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+p+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===f)+") {\n\n              if ("+p+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+h+") *\n                    getW(wR, wC, "+h+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+h+", xR, xC) *\n                    getW(wR, wC, "+h+", d2);\n              }\n\n            } else if ("+(2===f)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2)\n              );\n\n              if ("+p+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===f)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2),\n                getW(wR, wC, "+h+" + 2, d2)\n              );\n\n              if ("+p+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1),\n                  getX(batch, xR, xC, "+h+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC),\n                  getX(batch, "+h+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+w+"\n        "+b+"\n        setOutput(result);\n      }\n    "},xo=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterDepth,d=e.filterHeight,h=e.filterWidth,f=4*Math.floor(e.inChannels/4),p=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+i+", "+o+", "+a+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+c+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+d+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+h+"; wC++) {\n              int xC = xCCorner + wC * "+l+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+f+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===p)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+f+") *\n                  getW(wF, wR, wC, "+f+", d2);\n              } else if ("+(2===p)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+f+"),\n                  getX(batch, xF, xR, xC, "+f+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+f+", d2),\n                  getW(wF, wR, wC, "+f+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===p)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+f+"),\n                  getX(batch, xF, xR, xC, "+f+" + 1),\n                  getX(batch, xF, xR, xC, "+f+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+f+", d2),\n                  getW(wF, wR, wC, "+f+" + 1, d2),\n                  getW(wF, wR, wC, "+f+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},_o=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var i=e.inHeight,o=e.inWidth,a=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,p=e.outChannels/e.inChannels,m="",g="";n&&(m=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",g="result = activation(result);");var v=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+m+"\n\n      const ivec2 strides = ivec2("+u+", "+l+");\n      const ivec2 pads = ivec2("+a+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+p+";\n        int q = d2 - d1 * "+p+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+h+"; wR++) {\n          int xR = xRCorner + wR * "+c+";\n\n          if (xR < 0 || xR >= "+i+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC++) {\n            int xC = xCCorner + wC * "+d+";\n\n            if (xC < 0 || xC >= "+o+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+v+"\n        "+g+"\n        setOutput(result);\n      }\n    "},Co=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var i=e.inHeight,o=e.inWidth,a=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,p=f,m="int xR; int xC; int xCOffset;",g=0;g<h;g++)for(var v=0;v<f;v++)m+="\n          vec4 xTexelR"+g+"C"+2*v+" = vec4(0.);\n          vec4 wR"+g+"C"+v+" = vec4(0.);\n          vec4 xR"+g+"C"+v+" = vec4(0.);";for(g=0;g<h;g++)for(var y=0;y<p;y++){if(m+="\n          xR = xRCorner + "+g*c+";\n          xC = xCCorner + "+(v=2*y)*d+";\n        ",1===l){if(v<f&&(m+=s%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+o+") {\n                    xTexelR"+g+"C"+v+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+o+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+o+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+g+"C"+v+" = vec4(previous.zw, xTexelR"+g+"C"+v+".xy);\n                } else {\n                  xR"+g+"C"+v+" = vec4(0, 0, xTexelR"+g+"C"+v+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+i+" && xC >= 0 && xC < "+o+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                xR"+g+"C"+v+" = xTexelR"+g+"C"+v+";\n              ",v+1<f)){var b=s%2==0?D(d):d;d%2==0&&s%2==1||d%2!=0&&s%2!=1?(m+="\n                  xCOffset = xC + "+s%2+" + "+b+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+o+") {\n                    xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",d>1&&(m+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+i+" &&\n                      xCOffset >= 0 && xCOffset < "+o+") {\n                      xTexelR"+g+"C"+v+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+g+"C"+v+" = vec4(0.);\n                    }\n                  "),m+="\n                  xR"+g+"C"+(v+1)+" = vec4(\n                    xTexelR"+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+".xy);\n                "):m+="\n                  xCOffset = xC + "+b+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+o+") {\n                    xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+g+"C"+(v+1)+" = xTexelR"+g+"C"+(v+2)+";\n                "}}else v<f&&(m+="\n              if(xR >= 0 && xR < "+i+") {\n            ",s%2==1?(m+="\n                xCOffset = xC + 1 - "+l+";\n                if(xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+o+") {\n                  xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+g+"C"+(v+2)+" = vec4(0.);\n                }\n\n                xR"+g+"C"+v+" = vec4(\n                  xTexelR"+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+".zw);\n              ",v+1<f&&(m+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+l+";\n                  if(xCOffset >= 0 && xCOffset < "+o+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+g+"C"+(v+1)+" = vec4(xTexelR"+g+"C"+(v+2)+".xy, final.xy);\n                ")):(m+="\n                if(xC >= 0 && xC < "+o+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+l+";\n                if(xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+g+"C"+(v+2)+" = vec4(0.);\n                }\n\n                xR"+g+"C"+v+" = vec4(\n                  xTexelR"+g+"C"+v+".xy, xTexelR"+g+"C"+(v+2)+".xy);\n              ",v+1<f&&(m+="\n                  xR"+g+"C"+(v+1)+" = vec4(\n                    xTexelR"+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+".zw);\n                ")),m+="}");v<f&&(m+="\n            vec4 wTexelR"+g+"C"+v+" = getW("+g+", "+v+", d1, q);\n            wR"+g+"C"+v+" = vec4(wTexelR"+g+"C"+v+".xz, wTexelR"+g+"C"+v+".xz);\n          ",v+1<f&&(m+="\n              vec4 wTexelR"+g+"C"+(v+1)+" = getW("+g+", "+(v+1)+", d1, q);\n              wR"+g+"C"+(v+1)+" =\n                vec4(wTexelR"+g+"C"+(v+1)+".xz, wTexelR"+g+"C"+(v+1)+".xz);"))}for(g=0;g<h;g++)for(v=0;v<f;v++)m+="dotProd += xR"+g+"C"+v+" * wR"+g+"C"+v+";";var w="",x="";n&&(w=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",x="result = activation(result);");var _=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+w+"\n\n      const ivec2 strides = ivec2("+u+", "+l+");\n      const ivec2 pads = ivec2("+a+", "+s+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+m+"\n\n        vec4 result = dotProd;\n        "+_+"\n        "+x+"\n        setOutput(result);\n      }\n    "},Eo=function(e,t,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=e[0],a=e[1],s=e[2],u=e[3],l=t[0],c=n[0],d=n[1];this.outputShape=[l,c,d,u];var h="bilinear"===r?1:0,f=[a-1+".0",s-1+".0"],p=f[0],m=f[1],g=c>1?[""+(a-1)/(c-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],v=g[0],y=g[1],b=g[2],w=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],x=w[0],_=w[1],C=w[2];this.userCode="\n      const float height_ratio = float("+v+");\n      const float width_ratio = float("+x+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+o+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+_+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+p+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n        float in_x = "+C+";\n        if( in_x < 0.0 || in_x > "+m+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+h+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},So=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,i=e[e.length-1],o=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+i+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+Ui(r)+" coords = getOutputCoords();\n        int end = "+Ao(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+i+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+o+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+Ao(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function Ao(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var ko=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=qe.DENSE;var t=rt(e),n=Oi();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Di(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},Io=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=qe.DENSE;var t=rt(e),n=Oi();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Di(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},Ro=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),To=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},No=function(e){this.variableNames=["A"],this.outTexUsage=Ye.DOWNLOAD;var t=Oi();this.outputShape=e,this.userCode="\n      "+Pi+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},Oo=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Ye.DOWNLOAD;var t=Oi();this.outputShape=e,this.userCode="\n      "+Pi+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},Do=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=Oi(),i=t[0],o=t[1];this.outputShape=e;var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      "+Mi(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+o+";\n        int c = imod(flatIndex, "+o+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+o+".0, "+i+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+a+", 0., 0., 0.);\n      }\n    "},Mo=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Oi(),i=t[0],o=t[1];this.outputShape=e;var a="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;a+="\n          localCoords = coords;\n          if(localCoords[2] + "+l+" < "+e[2]+") {\n            localCoords[2] += "+l+";\n            if(localCoords[1] + "+u+" < "+e[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+o+";\n              c = imod(flatIndex, "+o+");\n              uv = (vec2(c, r) + halfCR) / vec2("+o+".0, "+i+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+c+"] = values[0];\n              } else if(offset == 1) {\n                result["+c+"] = values[1];\n              } else if(offset == 2) {\n                result["+c+"] = values[2];\n              } else {\n                result["+c+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+Mi(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+a+"\n\n        "+r.output+" = "+s+";\n      }\n    "},Po=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+i+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+o+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},Fo=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),Bo=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var i=Ui(this.rank),o=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],o=0;o<e.length;o++)o===t?i.push("int(getIndices("+r[o]+"))"):i.push(""+r[o]);return i.join()}(e,n);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "},Lo=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=Ui(t.length),i=Ui(n.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+i+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+o+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function zo(e,t){var n=Oi();return ct(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function jo(e,t){return yt(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Wo(e,t){return bt(e,t,new Uint16Array([0,1,2,2,1,3]))}function Ho(e,t,n,r,i,o,a){xt(n,r);var s=wt(e,t),u=e.TEXTURE_2D;return at(e,t,(function(){return e.bindTexture(u,s)})),at(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),at(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),at(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)})),at(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)})),at(e,t,(function(){return e.texImage2D(u,0,i,n,r,0,o,a,null)})),at(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),s}function Vo(e,t,n,r,i){var o=nt(n,r);return Ho(e,t,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,e.FLOAT)}function Go(e,t,n,r,i){var o=nt(n,r);return Ho(e,t,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function Uo(e,t,n,r,i){var o=nt(n,r);return Ho(e,t,o[0],o[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function Ko(e,t,n,r,i){var o=it(n,r);return Ho(e,t,o[0],o[1],i.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function Xo(e,t,n,r,i){var o=it(n,r);return Ho(e,t,o[0],o[1],i.internalFormatPackedHalfFloat,e.RGBA,i.textureTypeHalfFloat)}function Zo(e,t,n,r){return at(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),Ct(e,t,n,"clipSpacePos",r,3,20,0)&&Ct(e,t,n,"uv",r,2,20,12)}function qo(e,t,n,r,i,o,a){var s,u,l;at(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),o instanceof Uint8Array?(s=new Uint8Array(r*i*4),u=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(r*i*4),u=e.FLOAT,l=a.internalFormatPackedFloat),s.set(o),at(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,l,r,i,0,e.RGBA,u,s)})),at(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function Yo(e,t,n,r){at(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),r.data instanceof Uint8Array?at(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)})):at(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})),at(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function Jo(e,t,n,r,i){var o=e.createBuffer();at(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,o)}));var a=16*n*r;return at(e,t,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)})),at(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)})),at(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),o}function Qo(e,t,n){var r=e,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function $o(e,t,n,r,i){var o=nt(n,r),a=o[0],s=o[1],u=new Uint8Array(n*r*4);return at(e,t,(function(){return e.readPixels(0,0,a,s,i.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}function ea(e,t,n,r,i,o,a,s){var u=e,l=new Float32Array(function(e,t){var n=it(e,t);return n[0]*n[1]*4}(o,a));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function ta(e,t,n,r){var i=new Float32Array(n*r*4);return at(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,i)})),i}var na=Object.freeze({createVertexShader:zo,createVertexBuffer:jo,createIndexBuffer:Wo,createFloat32MatrixTexture:Vo,createFloat16MatrixTexture:Go,createUnsignedBytesMatrixTexture:Uo,createPackedMatrixTexture:Ko,createFloat16PackedMatrixTexture:Xo,bindVertexProgramAttributeStreams:Zo,uploadDenseMatrixToTexture:qo,uploadPixelDataToTexture:Yo,createBufferFromOutputTexture:Jo,downloadFloat32MatrixFromBuffer:Qo,downloadByteEncodedFloatMatrixFromOutputTexture:$o,downloadPackedMatrixFromBuffer:ea,downloadMatrixFromPackedOutputTexture:ta}),ra=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=_().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,et(t,e)):this.gl=tt(t);var n="WEBGL_color_buffer_float";if(1===_().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=lt(this.gl,this.debug,"OES_texture_float"),Vt(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=lt(this.gl,this.debug,"OES_texture_half_float");else if(_().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Vt(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=lt(this.gl,this.debug,"EXT_color_buffer_half_float");else if(_().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Vt(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Vt(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=jo(this.gl,this.debug),this.indexBuffer=Wo(this.gl,this.debug),this.framebuffer=_t(this.gl,this.debug),this.textureConfig=ot(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return _().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;at(t,this.debug,(function(){return t.finish()})),at(t,this.debug,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),at(t,this.debug,(function(){return t.deleteFramebuffer(e.framebuffer)})),at(t,this.debug,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),at(t,this.debug,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),at(t,this.debug,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),Vo(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),Go(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),Uo(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),Yo(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),qo(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),Xo(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),Ko(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Rt(this.gl,this.debug,this.framebuffer),this.outputTexture=null),at(this.gl,this.debug,(function(){return t.gl.deleteTexture(e)}))},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return $o(r.gl,r.debug,t,n,r.textureConfig)}))},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,i,o){return ea(this.gl,e,0,0,0,i,o,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return Qo(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=Jo(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(_().getBool("WEBGL_FENCE_API_ENABLED")){var i=e,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=i.clientWaitSync(o,0,0);return e===i.ALREADY_SIGNALED||e===i.CONDITION_SATISFIED},t=o}else _().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return ta(r.gl,r.debug,t,n)}))},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=dt(t,this.debug,e),r=zo(t,this.debug),i=mt(t,this.debug);return at(t,this.debug,(function(){return t.attachShader(i,r)})),at(t,this.debug,(function(){return t.attachShader(i,n)})),gt(t,this.debug,i),this.debug&&vt(t,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=Zo(t,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&at(this.gl,this.debug,(function(){return t.gl.deleteProgram(e)}))},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&vt(this.gl,this.debug,this.program),at(this.gl,this.debug,(function(){return t.gl.useProgram(e)}))},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?St(this.gl,this.debug,e,t):At(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),at(this.gl,this.debug,(function(){return n.gl.getAttribLocation(e,t)}))},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),kt(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=it(t,n),i=r[0],o=r[1];this.setOutputMatrixTextureDriver(e,i,o)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&vt(this.gl,this.debug,this.program),Tt(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),at(e,this.debug,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),at(this.gl,this.debug,(function(){return e.gl.finish()}))},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=lt(this.gl,this.debug,2===_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),i=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if(2!==_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return y(this,void 0,void 0,(function(){var t=this;return b(this,(function(n){switch(n.label){case 0:return[4,U((function(){return t.disposed||t.isQueryAvailable(e,_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return n.sent(),[2,this.getQueryTime(e,_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||U((function(){return n.pollItems(),0===n.itemsToPoll.length}))},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),It(this.gl,this.debug,e,this.framebuffer),this.debug&&Tt(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(It(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Tt(this.gl)):Rt(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;It(r,this.debug,e,this.framebuffer),this.debug&&Tt(r),this.outputTexture=e,at(r,this.debug,(function(){return r.viewport(0,0,t,n)})),at(r,this.debug,(function(){return r.scissor(0,0,t,n)}))},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var i=this;this.throwIfDisposed(),at(this.gl,this.debug,(function(){return i.gl.scissor(e,t,n,r)}))},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function ia(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach((function(e,n){var r=e.logicalShape,i=t[n],o=i.shape;if(!j(r,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+o+" must match");if(!e.isUniform||!i.isUniform){var a=e.texShape,s=i.isUniform?null:i.texData.texShape;if(!j(a,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+s+" must match")}}))}var oa=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,i=n.inChannels,o=n.strideWidth,a=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,d=n.dataFormat,h=s.left,f=s.top,p=i*r,m=Oi(),g="channelsLast"===d,v=g?0:1,y=g?1:2,b="",w=0;w<=1;w++)for(var x=0;x<=1;x++)b+="\n          blockIndex = rc.y + "+x+";\n          pos = rc.x + "+w+";\n\n          if(blockIndex < "+e[1]+" && pos < "+e[0]+") {\n            offsetY = int(blockIndex / ("+u+")) * "+a+" - "+f+";\n            d0 = offsetY + "+c+" * (pos / "+p+");\n\n            if(d0 < "+t[v]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+u+".) * "+o+". - "+h+".);\n              d1 = offsetX + "+l+" * (int(mod(float(pos), "+p+".) / "+i+".));\n\n              if(d1 < "+t[y]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+i+".));\n\n                if ("+g+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*w+x)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*w+x)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+b+"\n\n        "+m.output+" = result;\n      }\n    "},aa=function(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[];var o,a=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";o=.5===i?"inversesqrt("+u+")":1===i?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+a+"; j <= "+a+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+o+";\n        setOutput(val);\n      }\n    "},sa=function(e,t,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+i+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+i+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},ua=function(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,a=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";o=.5===i?"inversesqrt("+u+")":1===i?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+a+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+a+"; j <= "+a+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+s+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+o+";\n        setOutput(result);\n      }\n    "},la=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=i-1-e.padInfo.top,s=o-1-e.padInfo.left,u=i*o-1;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+i+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+o+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+u+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+o+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ca=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterDepth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=s-1-e.padInfo.front,d=u-1-e.padInfo.top,h=l-1-e.padInfo.left,f=s*u*l-1;this.userCode="\n      const ivec3 pads = ivec3("+c+", "+d+", "+h+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+s+";\n           wD += "+i+") {\n          float dyD = float(dyDCorner + wD) / "+t+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+o+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+l+";\n                wC += "+a+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+f+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+u+" * "+l+" +\n                  wR * "+l+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},da=function(e,t,n,r,i,o,a){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===o&&(o=null),void 0===a&&(a=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var s=n?e[1]:e[2],u=Math.ceil(s/2),l=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",d=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],f="",p="";o&&(f=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+o+"\n        }":"vec4 activation(vec4 x) {\n          "+o+"\n        }",p="result = activation(result);");var m=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+f+"\n\n      const float sharedDimension = "+u+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+u+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+l+");\n          vec4 b = getMatrixB(rc.x, "+c+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+d[0]+" * "+h[0]+");\n          result += ("+d[1]+" * "+h[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+m+"\n\n        "+p+"\n\n        setOutput(result);\n      }\n    "},ha=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),fa=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},pa=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=Ni("rc",t),r=Ui(t),i=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",i=e-2;i<e;i++)r+=n[i]+" >= "+t[i],i<e-1&&(r+="||");return r}(t,e,n),o=function(e,t,n,r){if(1===e)return"";var i=r.slice(-2);return"\n    int r = "+i[0]+";\n    int c = "+i[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),a=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var i=0;i<=1;i++){for(var o=(0===r?"r":"rp1")+", "+(0===i?"c":"cp1"),a=2;a<e;a++)o=t[t.length-1-a]+","+o;n.push(o)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+i+") {\n            setOutput(vec4(0));\n          } else {\n            "+o+"\n\n            setOutput(vec4("+a+"));\n          }\n        }\n      "}},ma=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));var r=e.length,i=Ui(r),o=t.map((function(e){return e[0]})).join(","),a=t.map((function(t,n){return t[0]+e[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+i+" start = "+i+"("+o+");\n      "+i+" end = "+i+"("+a+");\n\n      void main() {\n        "+i+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+i+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+o+";\n        int end = "+a+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},ga=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));for(var r=e.length,i=Ui(r),o=t.map((function(e){return e[0]})).join(","),a=t.map((function(t,n){return t[0]+e[n]})).join(","),s=Ni("rc",r),u=Ni("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=1===r?"source":"vec2("+u.slice(-2).join()+")",d=[i+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+l+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+l+") {"],h=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",f="",p=0,m=1===r?2:4;p<m;p++)f+="\n        "+d[p]+"\n        if ("+h+") {\n          result["+p+"] = float("+n+");\n        } else {\n          "+i+" source = rc - start;\n          result["+p+"] = getChannel(getX("+u.join()+"), "+c+");\n        }\n      ";f+=1===r?"} ":"}}",this.userCode="\n      const "+i+" start = "+i+"("+o+");\n      const "+i+" end = "+i+"("+a+");\n\n      void main() {\n        "+i+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+f+"\n        setOutput(result);\n      }\n    "},va=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,i=e.strideHeight,o=e.strideWidth,a=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=e.padInfo.top,d=e.padInfo.left;this.outputShape=e.outShape;var h="avg"===t,f="0.0";if(h||(f="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+i+", "+o+");\n        const ivec2 pads = ivec2("+c+", "+d+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+a+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+l+";\n                wC += "+s+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+l+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var p=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(p="avgValue / count");var m=4*Math.floor(r/4),g=r%4,v="\n      if ("+h+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+i+", "+o+");\n      const ivec2 pads = ivec2("+c+", "+d+");\n      const float initializationValue = "+f+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+f+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+u+";\n            wR += "+a+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+m+"; wC += 4) {\n            int xC = xCCorner + wC * "+s+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              getValue(batch, xR, xC + 3 * "+s+", d)\n            );\n\n            "+v+"\n          }\n\n          int xC = xCCorner + "+m+";\n          if ("+(1===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+v+"\n          } else if ("+(2===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+v+"\n          } else if ("+(3===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              initializationValue\n            );\n\n            "+v+"\n          }\n        }\n        setOutput("+p+");\n      }\n    "}},ya=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=e.padInfo.front,p=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;var g="avg"===t,v="0.0";if(g||(v="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+i+", "+o+", "+a+");\n        const ivec3 pads = ivec3("+f+", "+p+", "+m+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+c+";\n              wD += "+s+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+d+";\n                wR += "+u+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+h+";\n                  wC += "+l+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+d+" * "+h+" +\n                      wR * "+h+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var y=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(y="avgValue / count");var b=4*Math.floor(r/4),w=r%4,x="\n      if ("+g+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+i+", "+o+", "+a+");\n      const ivec3 pads = ivec3("+f+", "+p+", "+m+");\n      const float initializationValue = "+v+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+v+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+c+";\n            wD += "+s+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+d+";\n            wR += "+u+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+b+"; wC += 4) {\n              int xC = xCCorner + wC * "+l+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+l+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+l+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+l+", ch)\n              );\n\n              "+x+"\n            }\n\n            int xC = xCCorner + "+b+";\n            if ("+(1===w)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+x+"\n            } else if ("+(2===w)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+l+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+x+"\n            } else if ("+(3===w)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+l+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+l+", ch),\n                initializationValue\n              );\n\n              "+x+"\n            }\n          }\n          setOutput("+y+");\n        }\n      }\n    "}},ba=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,i=e.inSize,o=Math.ceil(i/n);this.outputShape=[r,o];var a="0.0",s="";"prod"===t?a="1.0":"min"===t?(a="1.0 / 1e-20",s="min"):"max"===t&&(a="-1.0 / 1e-20",s="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?u="sumValue":"prod"===t?u="prodValue":"all"===t?u="allValue":"any"===t&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,d="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",h="vec4";"all"===t?(a="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===t&&(a="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var f="";i%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+a+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+f+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+a+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+d+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+d+"\n        } else if ("+(2===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+d+"\n        } else if ("+(3===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+d+"\n        }\n        setOutput("+u+");\n      }\n    "},wa=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),n+="\n        "+i+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+Di(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+Mi(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},xa=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,i=r[1],o=r[2],a=e.shape,s=a[1],u=a[2],l=[n&&s>1?i-1:i,n&&u>1?o-1:o],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],d=l[0]/c[0],h=l[1]/c[1],f=1/d,p=1/h,m=2*Math.ceil(f)+2,g=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+d+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+f+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(i-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(o-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},_a=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var i=e[0],o=e[1],a=e[2],s=e[3];this.outputShape=[i,t,n,s];var u=[r&&t>1?o-1:o,r&&n>1?a-1:a],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+a+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},Ca=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=e[0],o=e[1],a=e[2],s=e[3];this.outputShape=[i,t,n,s];var u=[r&&t>1?o-1:o,r&&n>1?a-1:a],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+",\n          "+u[1]/l[1]+");\n      const vec3 inputShapeRC = vec3("+o+".0, "+a+".0,\n                                     "+a+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(s-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},Ea=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,i=r[1],o=r[2],a=e.shape,s=a[1],u=a[2],l=[n&&s>1?i-1:i,n&&u>1?o-1:o],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],d=l[0]/c[0],h=l[1]/c[1],f=1/d,p=1/h,m=2*Math.ceil(f)+2,g=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+d+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+f+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+l[0]+") *\n                (float(dyR) / float("+c[0]+"));\n\n            float sourceFracCol =\n                float("+l[1]+") *\n                  (float(dyC) / float("+c[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Sa=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var i=e[0],o=e[1],a=e[2],s=e[3];this.outputShape=[i,t,n,s];var u=[r&&t>1?o-1:o,r&&n>1?a-1:a],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+a+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+c+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},Aa=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map((function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)})).join(","),i=Ui(n);this.userCode="\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},ka=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=Ni("rc",n),i=r[n-1]+" + 1 < "+this.outputShape[n-1],o=r[n-2]+" + 1 < "+this.outputShape[n-2],a=Ui(n);function s(n){var r=e.map((function(r,i){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(i,n)}));return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+i+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+a+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(e){return s(e)}(r.slice())+";\n          if("+i+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())+";\n          }\n          if("+o+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            if("+i+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},Ia=function(e,t,n,r,i,o,a){void 0===a&&(a=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=Ui(i.length),u=Ui(o.length),l="";1===n?l="i":2===n&&(l="i, j");var c="getIndices("+l+")",d="";1===r?d="i":2===r&&(d="i, coords[1]");var h="getUpdates("+d+")",f=t>1?"strides[j]":"strides";this.userCode="\n        "+s+" strides = "+s+"("+i+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+c+");\n              flattenedIndex += index * "+f+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+h+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},Ra=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,i=e.inSize,o=e.numSegments,a=o*Math.ceil(i/n);this.outputShape=[r,a];var s=4*Math.floor(n/4),u=n%4,l="\n        sumValue += dot(values, segFilter);\n    ",c="";i%n>0&&(c="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      ");var d="";i%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+d+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+o+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+o+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+l+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+l+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+l+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+l+"\n        }\n        setOutput(sumValue);\n      }\n    "},Ta=function(e,t,n){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)i="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],u=0;u<t.length;u++)s.push(""+o[u]),u<e&&a.push(""+o[u]);r=a.join(),i=s.join()}var l=Ui(n);this.userCode="\n      void main() {\n        "+l+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+i+"));\n        } else {\n          setOutput(getB("+i+"));\n        }\n      }\n    "},Na=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=Ui(this.rank),r="uniform int start["+this.rank+"];",i=function(e){if(1===e)return"sourceLoc";if(e<=6)return Oa.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map((function(e,t){return"sourceLoc."+Oa[t]+" = start["+t+"] + coords."+Oa[t]+";"})).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+i+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Oa=["x","y","z","w","u","v"],Da=function(){function e(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=Ui(this.rank),n=Ni("coords",this.rank),r=Ni("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",o="getChannel(getSource("+r.join()+"), "+i+")",a="\n      result.x = "+o+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+o+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+o+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+o+";\n        }\n      }\n    ",u=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map((function(e,t){return"start["+t+"]"})).join()+");":e.map((function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"})).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+u+"\n        vec4 result = vec4(0.);\n        "+a+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Ma=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,i=Ui(n.length),o=Ui(n.length),a="";if(1===r)a="coords * strides + begin";else{var s=0;a=n.map((function(e,t){return s++,1===n.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(s-1)+"] * strides["+t+"] + begin["+t+"]"})).join(",")}this.userCode="\n      "+i+" begin = "+i+"("+e+");\n      "+i+" strides = "+i+"("+t+");\n\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+a+"));\n      }\n    "},Pa=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,i=Fa(t,n),o=Ba(e,i,n);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var a=this.freeTextures[o].shift();return this.usedTextures[o].push(a),a}return this.numUsedTextures++,this.log(),i===Je.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===Je.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===Je.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===Je.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===Je.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var i=Ba(t,Fa(n,r),r);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(e),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[i],a=o.indexOf(e);if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(a,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var t in this.usedTextures)this.usedTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function Fa(e,t){if(e===Ye.UPLOAD)return Je.PACKED_2X2_FLOAT32;if(e===Ye.RENDER||null==e)return function(e){return _().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Je.PACKED_2X2_FLOAT32:Je.UNPACKED_FLOAT32:e?Je.PACKED_2X2_FLOAT16:Je.UNPACKED_FLOAT16}(t);if(e===Ye.DOWNLOAD||e===Ye.PIXELS)return Je.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function Ba(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var La=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var i=Ui(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],i=0;i<e.length;i++)r.push("imod("+n[i]+", "+e[i]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "},za=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var i=Ui(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),i=0;i<e.length;i++)r[e[i]]=n[i];return r.join()}(t);this.userCode="\n    void main() {\n      "+i+" resRC = getOutputCoords();\n      setOutput(getA("+o+"));\n    }\n    "},ja=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=Ui(this.rank),o=Ti("rc",this.rank),a=new Array(this.rank);for(r=0;r<t.length;r++)a[t[r]]=o[r];var s="vec2("+a.slice(-2).join()+")",u="++"+o[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+a.join()+"), "+s+")";this.userCode="\n    void main() {\n      "+i+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+l+";\n      if("+u+") {\n        result[1] = "+l+";\n      }\n      --"+o[this.rank-1]+";\n      if(++"+o[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+l+";\n        if("+u+") {\n          result[3] = "+l+";\n        }\n      }\n      setOutput(result);\n    }\n    "},Wa=1.7580993408473768,Ha=1.0507009873554805,Va=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Ga="if (isnan(x)) return x;",Ua="return abs(x);",Ka=Ga+"\n  return (x < 0.0) ? 0.0 : x;\n",Xa=Ga+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Za="return (x >= 0.0) ? x : (exp(x) - 1.0);",qa="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+Wa+";\n  float scale = "+Ha+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",Ya="return -x;",Ja="return ceil(x);",Qa="return floor(x);",$a="return exp(x);",es="return exp(x) - 1.0;",ts=Ga+"\n  return sin(x);\n",ns=Ga+"\n  return cos(x);\n",rs=Ga+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",is=Ga+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",os=Ga+"\n  return atan(x);\n",as=Ga+"return log(x + sqrt(x * x + 1.0));",ss=Ga+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",us=Ga+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",ls="return x;",cs="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",ds="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",hs="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",fs=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},ps=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=Ni("rc",t),r=Ui(t),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),o=n.slice(-2),a=t<=1?"rc":"vec2("+o.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+i+");\n\n        setOutput(getChannel(packedInput, "+a+"));\n      }\n    "},ms={};function gs(e,t){if(void 0===t&&(t=!1),"linear"===e)return"return x;";if("relu"===e)return t?cs:Ka;if("elu"===e)return t?hs:Za;if("relu6"===e)return t?ds:Xa;if("prelu"===e)return t?oo:ro;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var vs=function(e){function t(t){var n,r=e.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!_().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){var i=tt(_().getNumber("WEBGL_VERSION"));r.binaryCache=((n=_().getNumber("WEBGL_VERSION"))in ms||(ms[n]={}),ms[n]),r.gpgpu=new ra(i),r.canvas=i.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=t,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=t.gl.canvas;return r.textureManager=new Pa(r.gpgpu),r.numMBBeforeWarning=null==_().global.screen?1024:_().global.screen.height*_().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new Gr(r,Ke),r}return v(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(e,t,n){if(_().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:Ye.UPLOAD}),r},t.prototype.move=function(e,t,n,r){if(_().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:Ye.UPLOAD})},t.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,i=t.complexTensors,o=t.slice,a=t.shape,s=t.isPacked;if(null!=o){var u;u=s?new fs(a,ls):new Va(a,ls);var l=this.runWebGLProgram(u,[{dataId:e,shape:a,dtype:r}],r),c=this.readSync(l.dataId);return this.disposeData(l.dataId),c}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,h,f=null!=this.activeTimers;return f&&(d=pe()),h="complex64"===r?di(i.real.dataSync(),i.imag.dataSync()):this.getValuesFromTexture(e),f&&(this.downloadWaitMs+=pe()-d),this.convertAndCacheOnCPU(e,h)},t.prototype.read=function(e){return y(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,l,c,d,h,f,p,m,g,v,y,w,x,C,E;return b(this,(function(b){switch(b.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise((function(e){return t.push(e)}))];if(n=this.texData.get(e),r=n.values,i=n.shape,o=n.slice,a=n.dtype,s=n.complexTensors,u=n.isPacked,null!=o)return void 0,l=u?new fs(i,ls):new Va(i,ls),c=this.runWebGLProgram(l,[{dataId:e,shape:i,dtype:a}],a),d=this.read(c.dataId),this.disposeData(c.dataId),[2,d];if(null!=r)return[2,this.convertAndCacheOnCPU(e)];if(!_().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===_().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return h=null,"complex64"!==a&&_().get("WEBGL_BUFFER_SUPPORTED")&&(f=this.decode(e),p=this.texData.get(f.dataId),h=(E=this.gpgpu).createBufferFromTexture.apply(E,[p.texture].concat(rt(i)))),this.pendingRead.set(e,[]),"complex64"===a?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:b.sent(),b.label=2;case 2:return"complex64"!==a?[3,4]:[4,Promise.all([s.real.data(),s.imag.data()])];case 3:return g=b.sent(),v=g[0],y=g[1],m=di(v,y),[3,5];case 4:null==h?m=this.getValuesFromTexture(e):(w=z(i),m=this.gpgpu.downloadFloat32MatrixFromBuffer(h,w)),b.label=5;case 5:return null!=f&&this.disposeData(f.dataId),x=this.convertAndCacheOnCPU(e,m),C=this.pendingRead.get(e),this.pendingRead.delete(e),C.forEach((function(e){return e(x)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,x]}}))}))},t.prototype.checkNumericalProblems=function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!st(n)){if(_().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},t.prototype.getValuesFromTexture=function(e){var t,n=this.texData.get(e),r=n.shape,i=n.dtype,o=n.isPacked,a=z(r);if(_().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s=this.decode(e),u=this.texData.get(s.dataId),l=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[u.texture].concat(rt(r))).subarray(0,a);return this.disposeData(s.dataId),l}var c=_().getBool("WEBGL_PACK")&&!0===o,d=c?Ft(r):r,h=c?new Oo(d):new No(d),f=this.runWebGLProgram(h,[{shape:d,dtype:i,dataId:e}],"float32"),p=this.texData.get(f.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture,p.texShape[0],p.texShape[1]).subarray(0,a);return this.disposeData(f.dataId),m},t.prototype.time=function(e){return y(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return b(this,(function(u){switch(u.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),i=L(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=L(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=t,r&&(this.programTimersStack=null),a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},_().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(i)]:[3,2];case 1:return s=u.sent(),a.kernelMs=M(s),a.getExtraProfileInfo=function(){return s.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return e.name+": "+e.ms})).join(", ")},[3,3];case 2:a.kernelMs={error:"WebGL query timers are not supported in this environment."},u.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,a]}}))}))},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return _().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:pe(),endMs:null}},t.prototype.endTimer=function(e){return _().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=pe(),e)},t.prototype.getQueryTime=function(e){return y(this,void 0,void 0,(function(){var t;return b(this,(function(n){return _().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]}))}))},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,i=t.texShape,o=t.usage,a=t.isPacked,s=t.slice,u=s&&s.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,o,a)));var c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return _().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Ke.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,t){var n=this;return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every((function(e){return null==n.texData.get(e.dataId).texture&&e.size<t}))},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,t){var n=this.makeOutput(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:Ke.keep(e.clone()),imag:Ke.keep(t.clone())},n},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===z(n))return wn([],n,e.dtype);var r=this.texData.get(e.dataId).isPacked,i=zr(e.shape,t,n);if(r||!i){var o=_().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Da(n):new Na(n),a=o.getCustomSetupFunc(t);return this.compileAndRun(o,[e],null,a)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},t.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),i=this.makeOutput(n,e.dtype),o=this.texData.get(i.dataId);Object.assign(o,r),o.shape=n,o.dtype=e.dtype;var a=jr(t,e.strides);r.slice&&(a+=r.slice.flatOffset),o.slice={flatOffset:a,origDataId:r.slice&&r.slice.origDataId||e.dataId};var s=this.dataRefCount.get(o.slice.origDataId)||1;return this.dataRefCount.set(o.slice.origDataId,s+1),i},t.prototype.stridedSlice=function(e,t,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r);var i=Fr(t,n,r);if(i.some((function(e){return 0===e})))return wn([],i);var o=new Ma(t,r,i);return this.compileAndRun(o,[e])},t.prototype.reverse=function(e,t){var n=_().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ka(e.shape,t):new Aa(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.concat=function(e,t){if("complex64"===e[0].dtype){var n=e.map((function(e){return yn(e)})),r=e.map((function(e){return bn(e)}));return vn(this.concat(n,t),this.concat(r,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>_().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(e.length/2),o=this.concat(e.slice(0,i),t),a=this.concat(e.slice(i),t);return this.concat([o,a],t)}if(_().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var s=new ho(e.map((function(e){return e.shape})),t);return this.compileAndRun(s,e)}var u=mn(e.map((function(e){return e.shape})),t),l=e.map((function(e){return e.as2D(-1,z(e.shape.slice(t)))})),c=new co(l.map((function(e){return e.shape})));return this.compileAndRun(c,l).reshape(u)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(_().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Ya,e.dtype);var t=new Va(e.shape,Ya);return this.compileAndRun(t,[e])},t.prototype.batchMatMul=function(e,t,n,r){var i=n?e.shape[2]:e.shape[1],o=r?t.shape[1]:t.shape[2],a=n?e.shape[1]:e.shape[2],s=e.shape[0];if((1===i||1===o)&&a>1e3){n&&(e=e.transpose([0,2,1])),r&&(t=t.transpose([0,2,1]));var u=1===o?e:e.as3D(s,a,1),l=1===o?2:1,c=1===o?t.as3D(s,1,a):t;return this.multiply(u,c).sum(l,!0)}var d=Le(e.dtype,t.dtype),h=new da(e.shape,[s,i,o],n,r);return this.compileAndRun(h,[e,t],d)},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,i=e.transposeB,o=e.bias,a=e.activation,s=e.preluActivationWeights,u=r?t.shape[2]:t.shape[1],l=i?n.shape[1]:n.shape[2],c=t.shape[0],d=Le(t.dtype,n.dtype),h=null!=o,f=null!=s,p=a?gs(a,!0):null,m=new da(t.shape,[c,u,l],r,i,h,p,f),g=[t,n];return o&&g.push(o),s&&g.push(s),this.compileAndRun(m,g,d)},t.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),i=new $i("return areal * breal - aimag * bimag;",e.shape,t.shape),o=new $i("return areal * bimag + aimag * breal;",e.shape,t.shape),a=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag),this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)],s=this.compileAndRun(i,a),u=this.compileAndRun(o,a),l=this.complex(s,u);return s.dispose(),u.dispose(),l}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(_().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,no,e.dtype);var c=new io(no,e.shape,t.shape);return this.compileAndRun(c,[e,t],e.dtype)},t.prototype.batchNormalization=function(e,t,n,r,i,o){var a=[e,t,n],s=null;null!=o&&(s=o.shape,a.push(o));var u=null;if(null!=i&&(u=i.shape,a.push(i)),_().getBool("WEBGL_PACK_NORMALIZATION")){var l=new Qi(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(l,a)}var c=new Ji(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(c,a)},t.prototype.localResponseNormalization4D=function(e,t,n,r,i){var o=_().getBool("WEBGL_PACK_NORMALIZATION")?new ua(e.shape,t,n,r,i):new aa(e.shape,t,n,r,i);return this.compileAndRun(o,[e])},t.prototype.LRNGrad=function(e,t,n,r,i,o,a){var s=new sa(t.shape,r,i,o,a);return this.compileAndRun(s,[t,n,e])},t.prototype.tile=function(e,t){if("string"===e.dtype){var n=this.readSync(e.dataId).map((function(e){return ve(e)}));return Ei(Jn(e.shape,e.dtype,n),t)}var r=new La(e.shape,t);return this.compileAndRun(r,[e])},t.prototype.pad=function(e,t,n){var r=_().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ga(e.shape,t,n):new ma(e.shape,t,n);return this.compileAndRun(r,[e])},t.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t);var n=_().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ja(e.shape,t):new za(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new Bo(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},t.prototype.batchToSpaceND=function(e,t,n){P(e.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),i=Er(e.shape,t,r),o=Sr(i.length,t.length),a=Ar(e.shape,t,r),s=kr(n,t.length),u=Ir(a,n,t.length);return e.reshape(i).transpose(o).reshape(a).slice(s,u)},t.prototype.spaceToBatchND=function(e,t,n){P(e.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),i=[[0,0]];i.push.apply(i,n);for(var o=1+t.length;o<e.shape.length;++o)i.push([0,0]);var a=e.pad(i),s=Er(a.shape,t,r,!1),u=Sr(s.length,t.length,!1),l=Ar(a.shape,t,r,!1);return a.reshape(s).transpose(u).reshape(l)},t.prototype.reduce=function(e,t,n){var r=e.shape[0],i=e.shape[1],o=Tr(i),a=new ba({windowSize:o,inSize:i,batchSize:r},t),s=this.compileAndRun(a,[e],n);return 1===s.shape[1]?s:this.reduce(s,t,n)},t.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],i=e.shape[1];null!=n&&(r=n.shape[0],i=n.shape[1]);var o=Tr(i),a=new Ri({windowSize:o,inSize:i,batchSize:r},t,null==n),s=[e];null!=n&&s.push(n);var u=this.compileAndRun(a,s,"int32");return 1===u.shape[1]?u:this.argReduce(e,t,u)},t.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n.shape:e.shape,i=Tr(r[r.length-1]),o=new Zi(r,i,t,null==n),a=null==n?[e]:[e,n],s=this.compileAndRun(o,a,"int32");return s.rank===e.rank?this.argReducePacked(e,t,s):s},t.prototype.sum=function(e,t){cn("sum",t,e.rank);var n=un(e.shape,t),r=n[0],i=z(n[1]),o=e.as2D(-1,i),a=ze(e.dtype);return this.reduce(o,"sum",a).reshape(r)},t.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=un(e.shape,t),r=n[0],i=z(n[1]),o=e.as2D(-1,i),a=ze(e.dtype);return this.reduce(o,"prod",a).reshape(r)},t.prototype.unsortedSegmentSum=function(e,t,n){var r=0,i=dn([r],e.rank),o=e;null!=i&&(o=e.transpose(i),r=fn(1,e.rank)[0]);var a=function(e,t,n){for(var r=[],i=e.length,o=0;o<i;o++)o!==t?r.push(e[o]):r.push(n);return r}(o.shape,r,n),s=z([o.shape[r]]),u=o.as2D(-1,s),l=ze(e.dtype),c=this.segOpCompute(u,"unsortedSegmentSum",t,l,n).reshape(a);return null!=i&&(c=c.transpose(hn(i))),c},t.prototype.segOpCompute=function(e,t,n,r,i){var o=e.shape[0],a=e.shape[1],s=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=ue(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=ue(e,n+1);return n}(a,i),u=new Ra({windowSize:s,inSize:a,batchSize:o,numSegments:i},t),l=this.compileAndRun(u,[e,n],r);return l.shape[1]===i?l:(n=Tn(0,i).tile([a/s]),this.segOpCompute(l,t,n,r,i))},t.prototype.argMinMaxReduce=function(e,t,n){var r=[t];if(cn("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!_().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var i=un(e.shape,r),o=i[0],a=z(i[1]),s=e.as2D(-1,a);return this.argReduce(s,n).reshape(o)}return this.argReducePacked(e,n)},t.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},t.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},t.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var i=new So(e.shape,n,r);return this.compileAndRun(i,[e])},t.prototype.equal=function(e,t){if(_().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new io("return float(a == b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.notEqual=function(e,t){if(_().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new io("return float(a != b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(_().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new io("return float(a < b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.lessEqual=function(e,t){if(_().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new io("return float(a <= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(_().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new io("return float(a > b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greaterEqual=function(e,t){if(_().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new io("return float(a >= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalNot=function(e){var t=new Va(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},t.prototype.logicalAnd=function(e,t){if(_().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new io("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalOr=function(e,t){if(_().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new io("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.select=function(e,t,n){var r=new Ta(e.rank,t.shape,t.rank);return this.compileAndRun(r,[e,t,n],Le(t.dtype,n.dtype))},t.prototype.where=function(e){en("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Ai(e.shape,t)},t.prototype.topk=function(e,t,n){return Si(e.dataSync(),e.shape,e.dtype,t)},t.prototype.min=function(e,t){cn("min",t,e.rank);var n=un(e.shape,t),r=n[0],i=z(n[1]),o=e.as2D(-1,i);return this.reduce(o,"min",o.dtype).reshape(r)},t.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=_().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ao("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new io("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.mod=function(e,t){var n=_().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ao("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new io("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);cn("max",t,e.rank);var n=un(e.shape,t),r=n[0],i=z(n[1]),o=e.as2D(-1,i);return this.reduce(o,"max",o.dtype).reshape(r)},t.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=_().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ao("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new io("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.all=function(e,t){cn("all",t,e.rank);var n=un(e.shape,t),r=n[0],i=z(n[1]),o=e.as2D(-1,i);return this.reduce(o,"all",o.dtype).reshape(r)},t.prototype.any=function(e,t){cn("any",t,e.rank);var n=un(e.shape,t),r=n[0],i=z(n[1]),o=e.as2D(-1,i);return this.reduce(o,"any",o.dtype).reshape(r)},t.prototype.realDivide=function(e,t){if(_().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var n=new io("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape);return this.compileAndRun(n,[e,t],"float32")},t.prototype.floorDiv=function(e,t){if(_().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new io("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape);return this.compileAndRun(n,[e,t],"int32")},t.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,eo);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=Le(e.dtype,t.dtype);if(_().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,eo,n);var r=new io(eo,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.packedUnaryOp=function(e,t,n){var r=new fs(e.shape,t);return this.compileAndRun(r,[e],n)},t.prototype.packedBinaryOp=function(e,t,n,r,i){void 0===i&&(i=!1);var o=new ao(n,e.shape,t.shape,i);return this.compileAndRun(o,[e,t],r)},t.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,i=this.texData.get(e.dataId),o=this.texData.get(t.dataId),a=[[i.complexTensors.real,o.complexTensors.real],[i.complexTensors.imag,o.complexTensors.imag]].map((function(i){var o=i[0],a=i[1],s=r.makeComplexComponentTensorInfo(e,o),u=r.makeComplexComponentTensorInfo(t,a),l=new io(n,e.shape,t.shape);return r.compileAndRun(l,[s,u],Le(o.dtype,a.dtype))})),s=a[0],u=a[1],l=this.complex(s,u);return s.dispose(),u.dispose(),l},t.prototype.makeComplexComponentTensorInfo=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},t.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>_().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var i=e.map((function(e){return e.dtype})).reduce((function(e,t){return Le(e,t)})),o=e.map((function(e){return e.shape})),a=_().getBool("WEBGL_PACK")?new Ii(e[0].shape,o):new ki(e[0].shape,o);return this.compileAndRun(a,e,i)},t.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,to);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=Le(e.dtype,t.dtype);if(_().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,to,e.dtype);var r=new io(to,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.pow=function(e,t){var n=_().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ao("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new io("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),r=Le(e.dtype,t.dtype);return this.compileAndRun(n,[e,t],r)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(_().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Ja,e.dtype);var t=new Va(e.shape,Ja);return this.compileAndRun(t,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(_().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Qa,e.dtype);var t=new Va(e.shape,Qa);return this.compileAndRun(t,[e])},t.prototype.sign=function(e){var t=new Va(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},t.prototype.isNaN=function(e){var t=new Va(e.shape,"return float(isnan(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isInf=function(e){var t=new Va(e.shape,"return float(isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isFinite=function(e){var t=new Va(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.round=function(e){var t=new Va(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(_().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,$a,e.dtype);var t=new Va(e.shape,$a);return this.compileAndRun(t,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(_().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,es,e.dtype);var t=new Va(e.shape,es);return this.compileAndRun(t,[e])},t.prototype.softmax=function(e,t){var n=X([t],e.shape),r=this.max(e,n),i=ln(r.shape,n),o=this.subtract(e,r.reshape(i)),a=this.exp(o),s=this.sum(a,n).reshape(i);return this.realDivide(a,s)},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(_().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var t=new Va(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(t,[e])},t.prototype.log1p=function(e){var t=new Va(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},t.prototype.sqrt=function(e){var t=new Va(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new Va(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},t.prototype.reciprocal=function(e){var t=new Va(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},t.prototype.relu=function(e){var t;return t=_().getBool("WEBGL_PACK")?new fs(e.shape,cs):new Va(e.shape,Ka),this.compileAndRun(t,[e])},t.prototype.relu6=function(e){var t;return t=_().getBool("WEBGL_PACK")?new fs(e.shape,ds):new Va(e.shape,Xa),this.compileAndRun(t,[e])},t.prototype.prelu=function(e,t){var n=_().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ao(oo,e.shape,t.shape):new io(ro,e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.elu=function(e){if(_().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,hs,e.dtype);var t=new Va(e.shape,Za);return this.compileAndRun(t,[e])},t.prototype.eluDer=function(e,t){var n=_().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ao("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new io("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.selu=function(e){var t=new Va(e.shape,qa);return this.compileAndRun(t,[e])},t.prototype.int=function(e){var t=new Va(e.shape,"return float(int(x));");return this.compileAndRun(t,[e],"int32")},t.prototype.clip=function(e,t,n){var r,i=(r=_().getBool("WEBGL_PACK_CLIP")?new uo(e.shape):new so(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,i)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(_().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Ua,e.dtype);var t=new Va(e.shape,Ua);return this.compileAndRun(t,[e])},t.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new lo(e.shape),r=[this.makeComplexComponentTensorInfo(e,t.complexTensors.real),this.makeComplexComponentTensorInfo(e,t.complexTensors.imag)];return this.compileAndRun(n,r)},t.prototype.sigmoid=function(e){var t=new Va(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},t.prototype.softplus=function(e){var t=new Va(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},t.prototype.sin=function(e){var t=new Va(e.shape,ts);return this.compileAndRun(t,[e])},t.prototype.cos=function(e){var t=new Va(e.shape,ns);return this.compileAndRun(t,[e])},t.prototype.tan=function(e){var t=new Va(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},t.prototype.asin=function(e){var t=new Va(e.shape,rs);return this.compileAndRun(t,[e])},t.prototype.acos=function(e){var t=new Va(e.shape,is);return this.compileAndRun(t,[e])},t.prototype.atan=function(e){var t=new Va(e.shape,os);return this.compileAndRun(t,[e])},t.prototype.atan2=function(e,t){var n=_().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ao("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new io("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.sinh=function(e){var t=new Va(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.cosh=function(e){var t=new Va(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.tanh=function(e){var t=new Va(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},t.prototype.asinh=function(e){var t=new Va(e.shape,as);return this.compileAndRun(t,[e])},t.prototype.acosh=function(e){var t=new Va(e.shape,ss);return this.compileAndRun(t,[e])},t.prototype.atanh=function(e){var t=new Va(e.shape,us);return this.compileAndRun(t,[e])},t.prototype.erf=function(e){var t=new Va(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(t,[e])},t.prototype.step=function(e,t){var n=new Va(e.shape,function(e){return void 0===e&&(e=0),Ga+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},t.prototype.conv2dByMatMul=function(e,t,n,r,i,o){var a=e.shape,s=this.texData.get(e.dataId),u=n.inChannels,l=a[0]*a[1]*a[2],c=n.outChannels,d="channelsLast"===n.dataFormat,h=(1===l||1===c)&&u>1e3,f=a[2]%2!=0&&!!s.isPacked;if(h||!_().getBool("WEBGL_LAZILY_UNPACK")||!_().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!f){var p=d?a[0]*a[1]*a[2]:a[0]*a[2]*a[3],m=this.reshape(e,[1,p,n.inChannels]),g=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:m,b:g,transposeA:!1,transposeB:!1,bias:r,activation:i,preluActivationWeights:o}),n.outShape)}var v=d?a[0]*a[1]*(a[2]+1):a[0]*a[2]*(a[3]+1),y={dataId:e.dataId,shape:[1,v,n.inChannels],dtype:e.dtype},b=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,P(zt(s.shape,y.shape),(function(){return"packed reshape "+s.shape+" to "+y.shape+" isn't free"}));var w=this.reshape(t,[1,n.inChannels,n.outChannels]),x=this.fusedBatchMatMul({a:y,b:w,transposeA:!1,transposeB:!1,bias:r,activation:i,preluActivationWeights:o}),C=this.texData.get(x.dataId);return P(C.isPacked,(function(){return"batchMatMul result is expected to be packed"})),s.shape=b,C.shape=n.outShape,Ke.makeTensorFromDataId(x.dataId,n.outShape,x.dtype)},t.prototype.conv2dWithIm2Row=function(e,t,n,r,i,o){var a=n.filterWidth,s=n.filterHeight,u=n.inChannels,l=n.outWidth,c=n.outHeight,d="channelsLast"===n.dataFormat,h=a*s*u,f=c*l,p=[h,f],m=e.squeeze([0]),g=t.reshape([1,h,-1]),v=new oa(p,m.shape,n),y=this.compileAndRun(v,[m]).reshape([1,p[0],p[1]]),b=null!=r,w=null!=o,x=i?gs(i,!0):null,_=new da(y.shape,[1,f,n.outChannels],!0,!1,b,x,w),C=[y,g];r&&C.push(r),w&&C.push(o);var E=this.compileAndRun(_,C);return d?E.reshape([1,c,l,n.outChannels]):E.reshape([1,n.outChannels,c,l])},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,i=e.bias,o=e.activation,a=e.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,i,o,a);if(_().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,i,o,a);var s=null!=i,u=null!=a,l=o?gs(o,!1):null,c=new wo(r,s,l,u),d=[t,n];return i&&d.push(i),a&&d.push(a),this.compileAndRun(c,d)},t.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(_().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new wo(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerInput=function(e,t,n){var r=new mo(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerFilter=function(e,t,n){var r=new po(n);return this.compileAndRun(r,[e,t])},t.prototype.fusedDepthwiseConv2D=function(e){var t,n=e.input,r=e.filter,i=e.convInfo,o=e.bias,a=e.activation,s=e.preluActivationWeights,u=_().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1,l=a?gs(a,u):null,c=[n,r],d=null!=o,h=null!=s;return d&&c.push(o),h&&c.push(s),u?(t=new Co(i,d,l,h),this.compileAndRun(t,c)):(t=new _o(i,d,l,h),this.compileAndRun(t,c))},t.prototype.depthwiseConv2D=function(e,t,n){var r;return _().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new Co(n),this.compileAndRun(r,[e,t])):(r=new _o(n),this.compileAndRun(r,[e,t]))},t.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new bo(n);return this.compileAndRun(r,[e,t])},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new yo(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3d=function(e,t,n){var r=new xo(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerInput=function(e,t,n){var r=new vo(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerFilter=function(e,t,n){var r=new go(n);return this.compileAndRun(r,[e,t])},t.prototype.maxPool=function(e,t){var n=new va(t,"max",!1);return this.compileAndRun(n,[e])},t.prototype.avgPool=function(e,t){var n=new va(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPoolBackprop=function(e,t,n,r){var i=new va(r,"max",!0),o=this.compileAndRun(i,[t]),a=new la(r),s=this.compileAndRun(a,[e,o],t.dtype);return o.dispose(),s},t.prototype.avgPoolBackprop=function(e,t,n){var r=new qi(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.cast=function(e,t){return ui(e,t,this)},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),i=0,o=0;o<e.rank;o++)o!==t&&(r[i++]=e.shape[o]);var a=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var u=new Array(n);for(o=0;o<u.length;o++)a[t]=o,u[o]=this.slice(e,a,s).reshape(r);return u},t.prototype.avgPool3d=function(e,t){var n=new ya(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.avgPool3dBackprop=function(e,t,n){var r=new Yi(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.maxPool3d=function(e,t){var n=new ya(t,"max",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPool3dBackprop=function(e,t,n,r){var i=new ya(r,"max",!0),o=this.compileAndRun(i,[t]),a=new ca(r),s=this.compileAndRun(a,[e,o],t.dtype);return o.dispose(),s},t.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId);if(n.isPacked&&!zt(e.shape,t)&&(null===n.texture||!zt(n.shape,t))){var r=this.packedReshape(e,t);return Ke.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return li(e,t)},t.prototype.resizeBilinear=function(e,t,n,r){var i=_().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Ca(e.shape,t,n,r):new _a(e.shape,t,n,r);return this.compileAndRun(i,[e],"float32")},t.prototype.resizeBilinearBackprop=function(e,t,n){var r=new xa(e,t,n);return this.compileAndRun(r,[e])},t.prototype.resizeNearestNeighbor=function(e,t,n,r){var i=new Sa(e.shape,t,n,r);return this.compileAndRun(i,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new Ea(e,t,n);return this.compileAndRun(r,[e])},t.prototype.multinomial=function(e,t,n,r){var i=t?e:Hr(e),o=i.shape[0],a=i.shape[1],s=new ha(o,a,n),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[i],"int32",u)},t.prototype.oneHot=function(e,t,n,r){var i=new fa(e.size,t,n,r);return this.compileAndRun(i,[e])},t.prototype.diag=function(e){var t=new To(e.size);return this.compileAndRun(t,[e])},t.prototype.nonMaxSuppression=function(e,t,n,r,i){return en("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),vi(e.dataSync(),t.dataSync(),n,r,i)},t.prototype.cropAndResize=function(e,t,n,r,i,o){var a=new Eo(e.shape,t.shape,r,i,o);return this.compileAndRun(a,[e,t,n],"float32")},t.prototype.depthToSpace=function(e,t,n){P(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));var r=e.shape[0],i="NHWC"===n?e.shape[1]:e.shape[2],o="NHWC"===n?e.shape[2]:e.shape[3],a="NHWC"===n?e.shape[3]:e.shape[1],s=i*t,u=o*t,l=a/(t*t),c=new Ro("NHWC"===n?[r,s,u,l]:[r,l,s,u],t,n);return this.compileAndRun(c,[e])},t.prototype.split=function(e,t,n){return Ci(e,t,n)},t.prototype.scatterND=function(e,t,n){var r=Dr(0,e,n),i=r.sliceRank,o=r.numUpdates,a=r.sliceSize,s=r.strides,u=r.outputSize,l=[u/a,a],c=e.reshape([o,i]),d=t.reshape([o,a]);if(0===u)return li(wn([]),n);var h=_n(0),f=new Ia(o,i,c.rank,d.rank,s,l);return this.compileAndRun(f,[d,c,h]).reshape(n)},t.prototype.sparseToDense=function(e,t,n,r){var i=Dr(0,e,n),o=i.sliceRank,a=i.numUpdates,s=i.strides,u=i.outputSize,l=new Ia(a,o,e.rank,t.rank,s,[u,1],!1);return this.compileAndRun(l,[t,e,r]).reshape(n)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new Po("return real * expR - imag * expI;",e.shape,t),i=new Po("return real * expI + imag * expR;",e.shape,t),o=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag)],a=this.compileAndRun(r,o),s=this.compileAndRun(i,o),u=this.complex(a,s).as2D(e.shape[0],e.shape[1]);return a.dispose(),s.dispose(),u},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],i=Rr(e,t),o=i[0],a=i[1],s=i[2],u=i[3],l=t.reshape([a,r]),c=e.reshape([e.size/s,s]),d=new Lo(r,u,[a,s]);return this.compileAndRun(d,[c,l]).reshape(o)},t.prototype.fill=function(e,t,n){if("string"===(n=n||ae(t))){var r=Y(n,z(e));return r.fill(t),Ke.makeTensor(r,e,n,this)}var i=new Fo(e,t),o=i.getCustomSetupFunc(t);return this.compileAndRun(i,[],n,o)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},t.prototype.linspace=function(e,t,n){return ci(e,t,n)},t.prototype.makeTensorInfo=function(e,t){var n=this.write(null,e,t);return this.texData.get(n).usage=null,{dataId:n,shape:e,dtype:t}},t.prototype.makeOutput=function(e,t){var n=this.makeTensorInfo(e,t).dataId;return Ke.makeTensorFromDataId(n,e,t,this)},t.prototype.unpackTensor=function(e){var t=new ps(e.shape);return this.runWebGLProgram(t,[e],e.dtype)},t.prototype.packTensor=function(e){var t=new pa(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,t){var n=[Mt(e.shape)].concat(Pt(e.shape)),r={dtype:e.dtype,shape:n,dataId:e.dataId},i=[Mt(t)].concat(Pt(t)),o=new wa(i,n),a=this.runWebGLProgram(o,[r],e.dtype,null,!0);return{dataId:a.dataId,shape:t,dtype:a.dtype}},t.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,i=n.shape,o=n.dtype,a=Ft(i);return t=r?new Io(a):new ko(a),{dtype:o,shape:i,dataId:this.runWebGLProgram(t,[{shape:a,dtype:o,dataId:e}],o,null,!0).dataId}},t.prototype.runWebGLProgram=function(e,t,n,r,i){var o=this;void 0===i&&(i=!1);var a=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(a.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===qe.DENSE){var u=rt(e.outputShape);s.texShape=u.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===z(a.shape))return s.values=q(a.dtype,0),a;var l=[],c=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=o.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&z(t.shape)<=_().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?o.unpackTensor(t):o.packTensor(t),l.push(t),n=o.texData.get(t.dataId);else if(n.isPacked&&!zt(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=o.packedReshape(t,i),l.push(t),n=o.texData.get(t.dataId),r.shape=i}return o.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(a.dataId);var d,h={shape:a.shape,texData:s,isUniform:!1},f=function(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t}));var i=e.userCode;return e.constructor.name+"_"+r+"_"+i}(e,c,h),p=this.getAndSaveBinary(f,(function(){return function(e,t,n,r){var i=t.userCode,o=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),a=o.map((function(e){return e.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=Fi(o,s,i,t.packedInputs),l=e.createProgram(u),c=null,d=e.getUniformLocation(l,"NAN",!1);1===_().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(l,"INFINITY",!1));for(var h={},f=0;f<t.variableNames.length;f++){var p=t.variableNames[f];h[p]=e.getUniformLocation(l,p,!1),h["offset"+p]=e.getUniformLocation(l,"offset"+p,!1)}return{program:t,source:u,webGLProgram:l,uniformLocations:h,inShapeInfos:a,outShapeInfo:s,infLoc:c,nanLoc:d}}(o.gpgpu,e,c,h)})),m=null!=this.activeTimers;if(m&&(d=this.startTimer()),function(e,t,n,r,i){ia(t.inShapeInfos,n),ia([t.outShapeInfo],[r]);var o=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o,a[0],a[1]):e.setOutputMatrixTexture(o,a[0],a[1]),e.setProgram(t.webGLProgram),1===_().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var i=t.program.variableNames[r],o=t.uniformLocations[i],a=t.uniformLocations["offset"+i];if(null!=o)if(n.isUniform)if(z(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(o,s)}else null!=n.texData.slice&&null!=a&&e.gl.uniform1i(a,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,o,r)})),null!=i&&i(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,p,c,h,r),l.forEach((function(e){return o.disposeData(e.dataId)})),m&&(d=this.endTimer(d),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(d)})),!_().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===i){var g=this.unpackTensor(a);return this.disposeData(a.dataId),g}return a},t.prototype.compileAndRun=function(e,t,n,r,i){void 0===i&&(i=!1),n=n||t[0].dtype;var o=this.runWebGLProgram(e,t,n,r,i);return Ke.makeTensorFromDataId(o.dataId,o.shape,o.dtype)},t.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;this.disposed||(_().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Qt((function(){if(!_().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=_().getBool("DEBUG");_().set("DEBUG",!1);var n=e.abs(_n(1e-8)).dataSync()[0];if(_().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,i=n.dtype,o=n.values,a=n.texture,s=n.usage,u=n.isPacked;if(null==a){var l,c=null!=this.activeTimers;c&&(l=pe());var d=n.texShape;if(null==d&&(d=Bt(r,u),n.texShape=d),null!=o){var h=Ft(r),f=void 0,p=d[1],m=d[0],g=o instanceof Uint8Array;u?(p=(t=it(d[0],d[1]))[0],m=t[1],f=new Mo(h,[m,p],g)):f=new Do(h,[m,p],g);var v=this.makeTensorInfo([m,p],i);this.texData.get(v.dataId).usage=g?Ye.PIXELS:Ye.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,m,o);var y=this.runWebGLProgram(f,[v],i,null,!0),b=this.texData.get(y.dataId);n.texture=b.texture,n.texShape=b.texShape,n.isPacked=b.isPacked,n.usage=b.usage,this.disposeData(v.dataId),this.texData.delete(y.dataId),n.values=null,c&&(this.uploadWaitMs+=pe()-l)}else{var w=this.acquireTexture(d,s,i,u);n.texture=w}}},t.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},t.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+i+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},t.prototype.computeBytes=function(e,t){return e[0]*e[1]*te(t)},t}(Ur);Xe()&&Ke.registerBackend("webgl",(function(){return new vs}),2);var ys=gn({square_:function(e){var t=rn(e,"x","square"),n=[t];return Ke.runKernelFunc((function(e,n){return n([t]),e.square(t)}),{x:t},null,"Square",{},n,[])}}),bs="SquaredDifference",ws=gn({squaredDifference_:function(e,t){var n,r=rn(e,"a","squaredDifference"),i=rn(t,"b","squaredDifference");n=je(r,i),r=n[0],i=n[1],qr(r.shape,i.shape);var o={a:r,b:i},a=[r,i];return Ke.runKernelFunc((function(e,t){var n=e.squaredDifference(r,i);return t([r,i]),n}),o,(function(e,t){var n=t[0],r=t[1],i=_n(2);return{a:function(){return e.mul(n.sub(r).mul(i))},b:function(){return e.mul(r.sub(n).mul(i))}}}),bs,{},a,[])}}),xs=gn({abs_:function(e){var t=rn(e,"x","abs");return"complex64"===t.dtype?Ke.runKernelFunc((function(e){return e.complexAbs(t)}),{$x:t}):Ke.runKernelFunc((function(e,n){var r=e.abs(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().step(-1))}}}),"Abs")}}),_s=gn({acos_:function(e){var t=rn(e,"x","acos");return Ke.runKernelFunc((function(e,n){var r=e.acos(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(_n(1).sub(n.toFloat().square()).sqrt()).neg()}}}))}}),Cs=gn({acosh_:function(e){var t=rn(e,"x","acosh");return Ke.runKernelFunc((function(e,n){var r=e.acosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}}))}}),Es=gn({asin_:function(e){var t=rn(e,"x","asin");return Ke.runKernelFunc((function(e,n){var r=e.asin(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(_n(1).sub(n.toFloat().square()).sqrt())}}}))}}),Ss=gn({asinh_:function(e){var t=rn(e,"x","asinh");return Ke.runKernelFunc((function(e,n){var r=e.asinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(_n(1).add(n.toFloat().square()).sqrt())}}}))}}),As=gn({atan_:function(e){var t=rn(e,"x","atan");return Ke.runKernelFunc((function(e,n){var r=e.atan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}}))}}),ks=gn({atanh_:function(e){var t=rn(e,"x","atanh");return Ke.runKernelFunc((function(e,n){var r=e.atanh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(_n(1).sub(n.toFloat().square()))}}}))}}),Is=gn({ceil_:function(e){var t=rn(e,"x","ceil");return Ke.runKernelFunc((function(e){return e.ceil(t)}),{$x:t},(function(e){return{$x:function(){return On(e)}}}))}}),Rs=gn({clipByValue_:function(e,t,n){var r=rn(e,"x","clipByValue");P(t<=n,(function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."}));var i=[r],o={min:t,max:n};return Ke.runKernelFunc((function(e,i){var o=e.clip(r,t,n);return i([r]),o}),{x:r},(function(e,r){var i=r[0];return{x:function(){return e.where(i.greaterEqual(t).logicalAnd(i.lessEqual(n)),On(e))}}}),"ClipByValue",o,i)}}),Ts=gn({cos_:function(e){var t=rn(e,"x","cos"),n=[t];return Ke.runKernelFunc((function(e,n){var r=e.cos(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().sin().neg().mul(e)}}}),"Cos",{},n)}}),Ns=gn({cosh_:function(e){var t=rn(e,"x","cosh");return Ke.runKernelFunc((function(e,n){var r=e.cosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}}))}}),Os=gn({erf_:function(e){var t=rn(e,"x","erf");return P("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=t.toFloat()),Ke.runKernelFunc((function(e,n){var r=e.erf(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),Ds=gn({exp_:function(e){var t=rn(e,"x","exp");return Ke.runKernelFunc((function(e,n){var r=e.exp(t);return n([r]),r}),{x:t},(function(e,t){return{x:function(){return e.mulStrict(t[0])}}}),"Exp",{},[],[!0])}}),Ms=gn({expm1_:function(e){var t=rn(e,"x","expm1");return Ke.runKernelFunc((function(e,n){var r=e.expm1(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.exp())}}}))}}),Ps=gn({floor_:function(e){var t=rn(e,"x","floor");return Ke.runKernelFunc((function(e){return e.floor(t)}),{$x:t},(function(e){return{$x:function(){return On(e)}}}))}}),Fs=gn({log_:function(e){var t=rn(e,"x","log"),n=[t];return Ke.runKernelFunc((function(e,n){var r=e.log(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.toFloat())}}}),"Log",{},n)}}),Bs=gn({log1p_:function(e){var t=rn(e,"x","log1p");return Ke.runKernelFunc((function(e,n){var r=e.log1p(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.add(1))}}}))}}),Ls=gn({logSigmoid_:function(e){var t=rn(e,"x","logSigmoid");return Ke.runKernelFunc((function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}}))}}),zs=gn({neg_:function(e){var t=rn(e,"x","neg"),n=[t];return Ke.runKernelFunc((function(e){return e.neg(t)}),{x:t},(function(e){return{x:function(){return e.neg()}}}),"Neg",{},n)}}),js=gn({reciprocal_:function(e){var t=rn(e,"x","reciprocal");return Ke.runKernelFunc((function(e,n){var r=e.reciprocal(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.square().neg())}}}))}}),Ws=gn({round_:function(e){var t=rn(e,"x","round");return Ke.runKernelFunc((function(e){return e.round(t)}),{$x:t},(function(e){return{$x:function(){return On(e)}}}))}}),Hs=gn({rsqrt_:function(e){var t=rn(e,"x","rsqrt"),n=[t];return Ke.runKernelFunc((function(e,n){var r=e.rsqrt(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},n)}}),Vs=gn({sigmoid_:function(e){var t=rn(e,"x","sigmoid");return Ke.runKernelFunc((function(e,n){var r=e.sigmoid(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.mul(_n(1).sub(n)))}}}),"Sigmoid")}}),Gs=gn({sign_:function(e){var t=rn(e,"x","sign");return Ke.runKernelFunc((function(e){return e.sign(t)}),{$x:t},(function(e){return{$x:function(){return On(e)}}}))}}),Us=gn({isNaN_:function(e){var t=rn(e,"x","isNaN");return Ke.runKernelFunc((function(e){return e.isNaN(t)}),{$x:t},(function(e){return{$x:function(){return On(e)}}}))}}),Ks=gn({isInf_:function(e){var t=rn(e,"x","isInf");return Ke.runKernelFunc((function(e){return e.isInf(t)}),{$x:t},(function(e){return{$x:function(){return On(e)}}}))}}),Xs=gn({isFinite_:function(e){var t=rn(e,"x","isFinite");return Ke.runKernelFunc((function(e){return e.isFinite(t)}),{$x:t},(function(e){return{$x:function(){return On(e)}}}))}}),Zs=gn({sin_:function(e){var t=rn(e,"x","sin"),n=[t];return Ke.runKernelFunc((function(e,n){var r=e.sin(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().cos().mul(e)}}}),"Sin",{},n)}}),qs=gn({sinh_:function(e){var t=rn(e,"x","sinh");return Ke.runKernelFunc((function(e,n){var r=e.sinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}}))}}),Ys=gn({softplus_:function(e){var t=rn(e,"x","softplus");return Ke.runKernelFunc((function(e,n){var r=e.softplus(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.sigmoid())}}}))}}),Js=gn({sqrt_:function(e){var t=rn(e,"x","sqrt");return Ke.runKernelFunc((function(e,n){var r=e.sqrt(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}}))}}),Qs=gn({step_:function(e,t){void 0===t&&(t=0);var n=rn(e,"x","step");return Ke.runKernelFunc((function(e){return e.step(n,t)}),{$x:n},(function(e){return{$x:function(){return On(e)}}}))}}),$s=gn({tan_:function(e){var t=rn(e,"x","tan");return Ke.runKernelFunc((function(e,n){var r=e.tan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.cos().square())}}}))}}),eu=gn({tanh_:function(e){var t=rn(e,"x","tanh");return Ke.runKernelFunc((function(e,n){var r=e.tanh(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return _n(1).sub(n.square()).mulStrict(e)}}}),"Tanh",{},null,[!0])}});function tu(e,t,n,r,i,o){var a,s,u=rn(e,"x","batchNorm"),l=rn(t,"mean","batchNorm"),c=rn(n,"variance","batchNorm");return null!=i&&(a=rn(i,"scale","batchNorm")),null!=r&&(s=rn(r,"offset","batchNorm")),P(2===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),P(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."})),P(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."})),null!=a&&P(2===a.rank||1===a.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."})),null!=s&&P(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),iu(u,l,c,s,a,o)}function nu(e,t,n,r,i,o){var a,s,u=rn(e,"x","batchNorm"),l=rn(t,"mean","batchNorm"),c=rn(n,"variance","batchNorm");return null!=i&&(a=rn(i,"scale","batchNorm")),null!=r&&(s=rn(r,"offset","batchNorm")),P(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),P(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."})),P(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."})),null!=a&&P(3===a.rank||1===a.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."})),null!=s&&P(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),iu(u,l,c,s,a,o)}function ru(e,t,n,r,i,o){var a,s,u=rn(e,"x","batchNorm"),l=rn(t,"mean","batchNorm"),c=rn(n,"variance","batchNorm");return null!=i&&(a=rn(i,"scale","batchNorm")),null!=r&&(s=rn(r,"offset","batchNorm")),P(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."})),P(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."})),P(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."})),null!=a&&P(4===a.rank||1===a.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."})),null!=s&&P(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),iu(u,l,c,s,a,o)}function iu(e,t,n,r,i,o){null==o&&(o=.001);var a,s,u,l=rn(e,"x","batchNorm"),c=rn(t,"mean","batchNorm"),d=rn(n,"variance","batchNorm");null!=i&&(a=rn(i,"scale","batchNorm")),null!=r&&(s=rn(r,"offset","batchNorm")),P(c.rank===d.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),P(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),P(null==a||c.rank===a.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),u=0===l.rank||1===l.rank?l.as4D(1,1,1,l.size):2===l.rank?l.as4D(1,1,l.shape[0],l.shape[1]):3===l.rank?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var h=[l,c,d,a];return Ke.runKernelFunc((function(e,t){var n=e.batchNormalization(u,ou(c),ou(d),o,ou(a),ou(s));return t([l,c,d,a]),n}),{x:l,mean:c,variance:d,scale:a,offset:s},(function(e,t){var n=t,r=n[0],i=n[1],a=n[2],s=n[3],l=null==s?_n(1):s,c=Zr(i.shape,u.shape),d=[];if(1===i.rank){for(var h=0;h<u.shape.length-1;++h)d.push(u.shape[h]);d.push(1)}var f=r.sub(i),p=e.mul(l),m=Hs(a.add(_n(o))),g=m.mul(m).mul(m).mul(_n(-.5));return{x:function(){return 1===i.rank?e.mul(xr(m.as4D(1,1,1,i.shape[0]),d)).mul(l).reshape(r.shape):e.mul(m).mul(l).reshape(r.shape)},mean:function(){var e=m.mul(_n(-1)).mul(p);return 1===i.rank&&(e=e.sum(c)),e.reshape(i.shape)},variance:function(){var e=g.mul(f).mul(p);return 1===i.rank&&(e=e.sum(c)),e.reshape(i.shape)},scale:function(){var t=f.mul(m),n=e.mul(t);return 1===i.rank&&(n=n.sum(c)),n.reshape(i.shape)},offset:function(){var t=e;return 1===i.rank&&(t=t.sum(c)),t.reshape(i.shape)}}}),"BatchNormalization",{varianceEpsilon:o},h).reshape(l.shape)}function ou(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function au(){Jt("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var su=gn({batchNormalization2d_:function(e,t,n,r,i,o){return void 0===r&&(r=.001),au(),tu(e,t,n,o,i,r)}}),uu=gn({batchNormalization3d_:function(e,t,n,r,i,o){return void 0===r&&(r=.001),au(),nu(e,t,n,o,i,r)}}),lu=gn({batchNormalization4d_:function(e,t,n,r,i,o){return void 0===r&&(r=.001),au(),ru(e,t,n,o,i,r)}}),cu=gn({batchNormalization_:function(e,t,n,r,i,o){return void 0===r&&(r=.001),au(),iu(e,t,n,o,i,r)}}),du=gn({batchNorm_:iu}),hu=gn({batchNorm2d_:tu}),fu=gn({batchNorm3d_:nu}),pu=gn({batchNorm4d_:ru}),mu=gn({logicalAnd_:function(e,t){var n=rn(e,"a","logicalAnd","bool"),r=rn(t,"b","logicalAnd","bool");return qr(n.shape,r.shape),Ke.runKernelFunc((function(e){return e.logicalAnd(n,r)}),{a:n,b:r},null,"LogicalAnd")}}),gu=gn({logicalNot_:function(e){var t=rn(e,"x","logicalNot","bool");return Ke.runKernelFunc((function(e){return e.logicalNot(t)}),{$x:t})}}),vu=gn({logicalOr_:function(e,t){var n=rn(e,"a","logicalOr","bool"),r=rn(t,"b","logicalOr","bool");return qr(n.shape,r.shape),Ke.runKernelFunc((function(e){return e.logicalOr(n,r)}),{$a:n,$b:r})}}),yu=gn({logicalXor_:function(e,t){var n=rn(e,"a","logicalXor","bool"),r=rn(t,"b","logicalXor","bool");return qr(n.shape,r.shape),vu(e,t).logicalAnd(mu(e,t).logicalNot())}}),bu=gn({where_:function(e,t,n){var r=rn(t,"a","where"),i=rn(n,"b","where"),o=rn(e,"condition","where","bool");return F(r.shape,i.shape,"Error in where: "),1===o.rank?P(o.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):F(o.shape,i.shape,"Error in where: "),Ke.runKernelFunc((function(e,t){var n=e.select(o,r,i);return t([o]),n}),{$condition:o,$a:r,$b:i},(function(e,t){var n=t[0];return{$condition:function(){return On(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}}))}}),wu=function(e){return y(this,void 0,void 0,(function(){var t,n,r;return b(this,(function(i){switch(i.label){case 0:return[4,(t=rn(e,"condition","whereAsync","bool")).data()];case 1:return n=i.sent(),r=Ai(t.shape,n),e!==t&&t.dispose(),[2,r]}}))}))},xu=gn({add_:function(e,t){var n,r=rn(e,"a","add"),i=rn(t,"b","add");n=je(r,i),r=n[0],i=n[1];var o=qr(r.shape,i.shape);return Ke.runKernelFunc((function(e){return e.add(r,i)}),{a:r,b:i},(function(e){return{a:function(){var t=e,n=Zr(r.shape,o);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=Zr(i.shape,o);return n.length>0&&(t=t.sum(n)),t.reshape(i.shape)}}}),"Add")}}),_u=gn({addN_:function(e){P(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),P(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length}));var t=e.map((function(e,t){return rn(e,"tensors"+t,"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!j(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return Ke.runKernelFunc((function(e){return e.addN(t)}),r,(function(e){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}),"AddN")}}),Cu=gn({addStrict_:function(e,t){var n=rn(e,"a","addStrict"),r=rn(t,"b","addStrict");return F(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),Eu=gn({atan2_:function(e,t){var n,r=rn(e,"a","atan2"),i=rn(t,"b","atan2");n=je(r,i),r=n[0],i=n[1];var o=qr(r.shape,i.shape);return Ke.runKernelFunc((function(e,t){var n=e.atan2(r,i);return t([r,i]),n}),{$a:r,$b:i},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=xu(n.square(),r.square()),i=e.mul(r.div(t)),a=Zr(n.shape,o);return a.length>0&&(i=i.sum(a)),i.reshape(n.shape)},$b:function(){var t=xu(n.square(),r.square()),i=zs(e.mul(n.div(t))),a=Zr(r.shape,o);return a.length>0&&(i=i.sum(a)),i.reshape(r.shape)}}}))}}),Su=gn({div_:function(e,t){var n,r=rn(e,"a","div"),i=rn(t,"b","div");if(n=je(r,i),r=n[0],i=n[1],"int32"===r.dtype&&"int32"===i.dtype)return Iu(r,i);var o=qr(r.shape,i.shape);return Ke.runKernelFunc((function(e,t){var n=e.realDivide(r,i);return t([r,i]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),i=Zr(n.shape,o);return i.length>0?t.sum(i).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),i=Zr(r.shape,o);i.length>0&&(t=t.sum(i).reshape(r.shape));var a=r.square();return t.div(a.toFloat()).neg()}}}),"Div")}}),Au=gn({divNoNan_:function(e,t){var n,r=rn(e,"a","div"),i=rn(t,"b","div");r=(n=je(r,i))[0],i=n[1];var o=Su(r,i),a=On(o),s=i.equal(a);return bu(s,a,o)}}),ku=gn({divStrict_:function(e,t){var n=rn(e,"a","div"),r=rn(t,"b","div");return F(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),Iu=gn({floorDiv_:function(e,t){var n,r=rn(e,"a","floorDiv"),i=rn(t,"b","floorDiv");n=je(r,i),r=n[0],i=n[1];var o=qr(r.shape,i.shape);return Ke.runKernelFunc((function(e,t){var n=e.floorDiv(r,i);return t([r,i]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),i=Zr(n.shape,o);return i.length>0?t.sum(i).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),i=Zr(r.shape,o);i.length>0&&(t=t.sum(i).reshape(r.shape));var a=r.square();return t.div(a.toFloat()).neg()}}}),"FloorDiv")}}),Ru=gn({maximum_:function(e,t){var n,r=rn(e,"a","maximum"),i=rn(t,"b","maximum");return n=je(r,i),r=n[0],i=n[1],"bool"===r.dtype&&(r=r.toInt(),i=i.toInt()),qr(r.shape,i.shape),Ke.runKernelFunc((function(e,t){var n=e.maximum(r,i);return t([r,i]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.greaterEqual(r).toFloat())},b:function(){return e.mul(n.less(r).toFloat())}}}),"Maximum")}}),Tu=gn({maximumStrict_:function(e,t){var n=rn(e,"a","maximumStrict"),r=rn(t,"b","maximumStrict");return F(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),Nu=gn({minimum_:function(e,t){var n,r=rn(e,"a","minimum"),i=rn(t,"b","minimum");return n=je(r,i),r=n[0],i=n[1],"bool"===r.dtype&&(r=r.toInt(),i=i.toInt()),qr(r.shape,i.shape),Ke.runKernelFunc((function(e,t){var n=e.minimum(r,i);return t([r,i]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.lessEqual(r).toFloat())},b:function(){return e.mul(n.greater(r).toFloat())}}}),"Minimum")}}),Ou=gn({minimumStrict_:function(e,t){var n=rn(e,"a","minimumStrict"),r=rn(t,"b","minimumStrict");return F(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),Du=gn({mod_:function(e,t){var n,r=rn(e,"a","mod"),i=rn(t,"b","mod");n=je(r,i),r=n[0],i=n[1];var o=qr(r.shape,i.shape);return Ke.runKernelFunc((function(e,t){var n=e.mod(r,i);return t([r,i]),n}),{$a:r,$b:i},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=Zr(n.shape,o);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),i=Zr(r.shape,o);return i.length>0?t.sum(i).reshape(r.shape):t}}}))}}),Mu=gn({modStrict_:function(e,t){var n=rn(e,"a","modStrict"),r=rn(t,"b","modStrict");return F(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Pu=gn({mul_:function(e,t){var n,r=rn(e,"a","mul"),i=rn(t,"b","mul");n=je(r,i),r=n[0],i=n[1];var o=qr(r.shape,i.shape);return Ke.runKernelFunc((function(e,t){var n=e.multiply(r,i);return t([r,i]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.mul(r.toFloat()),i=Zr(n.shape,o);return i.length>0?t.sum(i).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),i=Zr(r.shape,o);return i.length>0?t.sum(i).reshape(r.shape):t}}}),"Mul")}}),Fu=gn({mulStrict_:function(e,t){var n=rn(e,"a","mul"),r=rn(t,"b","mul");return F(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Bu=gn({pow_:function(e,t){var n,r=rn(e,"base","pow"),i=rn(t,"exp","pow");n=je(r,i),r=n[0],i=n[1];var o=qr(r.shape,i.shape),a=[r,i];return Ke.runKernelFunc((function(e,t){var n=e.pow(r,i);return t([r,i,n]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1],i=t[2];return{a:function(){var t=r.toFloat(),i=e.mul(t.mul(n.pow(t.sub(_n(1))))),a=Zr(n.shape,o);return a.length>0&&(i=i.sum(a)),i.reshape(n.shape)},b:function(){var t=n.greater(0),a=n.log().where(t,On(n)),s=e.mul(i.mul(a)),u=Zr(r.shape,o);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)}}}),"Pow",{},a,[!0])}}),Lu=gn({powStrict_:function(e,t){return F(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),zu=gn({squaredDifferenceStrict_:function(e,t){var n=rn(e,"a","squaredDifferenceStrict"),r=rn(t,"b","squaredDifferenceStrict");return F(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),ju=gn({sub_:function(e,t){var n,r=rn(e,"a","sub"),i=rn(t,"b","sub");n=je(r,i),r=n[0],i=n[1];var o=qr(r.shape,i.shape);return Ke.runKernelFunc((function(e){return e.subtract(r,i)}),{a:r,b:i},(function(e){return{a:function(){var t=e,n=Zr(r.shape,o);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=Zr(i.shape,o);return n.length>0&&(t=t.sum(n)),t.neg().reshape(i.shape)}}}),"Sub")}}),Wu=gn({subStrict_:function(e,t){var n=rn(e,"a","subStrict"),r=rn(t,"b","subStrict");return F(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Hu=gn({equal_:function(e,t){var n,r=rn(e,"a","equal"),i=rn(t,"b","equal");return n=je(r,i),r=n[0],i=n[1],qr(r.shape,i.shape),Ke.runKernelFunc((function(e){return e.equal(r,i)}),{$a:r,$b:i})}}),Vu=gn({equalStrict_:function(e,t){var n=rn(e,"a","equalStrict"),r=rn(t,"b","equalStrict");return F(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Gu=gn({greater_:function(e,t){var n,r=rn(e,"a","greater"),i=rn(t,"b","greater");return n=je(r,i),r=n[0],i=n[1],qr(r.shape,i.shape),Ke.runKernelFunc((function(e){return e.greater(r,i)}),{a:r,b:i},null,"Greater")}}),Uu=gn({greaterEqual_:function(e,t){var n,r=rn(e,"a","greaterEqual"),i=rn(t,"b","greaterEqual");return n=je(r,i),r=n[0],i=n[1],qr(r.shape,i.shape),Ke.runKernelFunc((function(e,t){var n=e.greaterEqual(r,i);return t([r,i]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1];return{a:function(){return On(n)},b:function(){return On(r)}}}),"GreaterEqual")}}),Ku=gn({greaterEqualStrict_:function(e,t){var n=rn(e,"a","greaterEqualStrict"),r=rn(t,"b","greaterEqualStrict");return F(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),Xu=gn({greaterStrict_:function(e,t){var n=rn(e,"a","greaterStrict"),r=rn(t,"b","greaterStrict");return F(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),Zu=gn({less_:function(e,t){var n,r=rn(e,"a","less"),i=rn(t,"b","less");return n=je(r,i),r=n[0],i=n[1],qr(r.shape,i.shape),Ke.runKernelFunc((function(e){return e.less(r,i)}),{a:r,b:i},null,"Less")}}),qu=gn({lessEqual_:function(e,t){var n,r=rn(e,"a","lessEqual"),i=rn(t,"b","lessEqual");return n=je(r,i),r=n[0],i=n[1],qr(r.shape,i.shape),Ke.runKernelFunc((function(e,t){var n=e.lessEqual(r,i);return t([r,i]),n}),{a:r,b:i},null,"LessEqual")}}),Yu=gn({lessEqualStrict_:function(e,t){var n=rn(e,"a","lessEqualStrict"),r=rn(t,"b","lessEqualStrict");return F(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),Ju=gn({lessStrict_:function(e,t){var n=rn(e,"a","lessStrict"),r=rn(t,"b","lessStrict");return F(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),Qu=gn({notEqual_:function(e,t){var n,r=rn(e,"a","notEqual"),i=rn(t,"b","notEqual");return n=je(r,i),r=n[0],i=n[1],qr(r.shape,i.shape),Ke.runKernelFunc((function(e){return e.notEqual(r,i)}),{a:r,b:i},null,"NotEqual")}}),$u=gn({notEqualStrict_:function(e,t){var n=rn(e,"a","notEqualStrict"),r=rn(t,"b","notEqualStrict");return F(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function el(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function tl(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var nl=gn({gather_:function(e,t,n){void 0===n&&(n=0);var r=rn(e,"x","gather"),i=rn(t,"indices","gather","int32");n=X(n,r.shape)[0];var o=function(e,t,n){for(var r=e.shape[n],i=[],o=1,a=1,s=0;s<n;s++)i.push(e.shape[s]),o*=e.shape[s];for(s=0;s<t.rank;s++)i.push(t.shape[s]);for(s=n+1;s<e.rank;s++)i.push(e.shape[s]),a*=e.shape[s];return{batchSize:o,sliceSize:a,dimSize:r,outputShape:i}}(r,i,n);return Ke.runKernelFunc((function(e,t){var o=e.gather(r,i.flatten(),n);return t([i]),o}),{x:r,indices:i},(function(e,t){var i=t[0];return{x:function(){var t=r.shape,o=i.size,a=t.slice(0,n),s=a.length,u=t.slice(n,t.length).slice(1),l=u.length,c=el(0,s),d=el(s+1,s+1+l),h=tl([a,[o],u]),f=e.reshape(h),p=i.reshape([o]),m=tl([[s],c,d]),g=f.transpose(m),v=rl(g,p,r.shape[n]),y=hn(m);return v.transpose(y)},indices:function(){return i}}}),"Gather",{axis:n}).reshape(o.outputShape)}}),rl=gn({unsortedSegmentSum_:function(e,t,n){var r=rn(e,"x","unsortedSegmentSum"),i=rn(t,"segmentIds","unsortedSegmentSum","int32");return P(W(n),(function(){return"numSegments must be of dtype int"})),Ke.runKernelFunc((function(e,t){var o=e.unsortedSegmentSum(r,i,n);return t([i]),o}),{$x:r},(function(e,t){var n=t[0];return{$x:function(){return function(e,t){for(var n=Ru(t,On(t)),r=nl(e,n),i=Uu(t,_n(0,"int32")),o=r.rank-i.rank,a=0;a<o;++a)i=ir(i,a+1);i=mu(i,kn(r.shape,"bool"));var s=On(r);return bu(i,r,s)}(e,n)}}}))}});function il(e,t,n,r,i,o,a){void 0===o&&(o="NHWC"),P(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var s=e,u=t,l=!1;3===t.rank&&(l=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),P(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."})),P(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank})),P(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var c="NHWC"===o?s[3]:s[1],d="NHWC"===o?u.shape[3]:u.shape[1];P(c===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."})),P(d===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+n.shape[3]+"."})),null!=a&&P(W(i),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."}));var h=si(o),f=Qr(s,n.shape,r,1,i,a,!1,h),p=Ke.runKernelFunc((function(e,t){var r=e.conv2dDerInput(u,n,f);return t([n,u]),r}),{dy4D:u,filter:n},(function(e,t){var n=t[0],s=t[1];return{dy4D:function(){return ul(e,n,r,i,o,1,a)},filter:function(){return cl(e,s,n.shape,r,i,o,a)}}}));return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function ol(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],i=t[2];return 1===n&&1===r&&1===i}function al(e,t,n,r,i){P(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var o=e,a=t,s=!1;4===t.rank&&(s=!0,a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),o=[1,e[0],e[1],e[2],e[3]]);var u=o[4],l=a.shape[4];P(5===o.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."})),P(5===a.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank})),P(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),P(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."})),P(l===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."}));var c=$r(o,n.shape,r,1,i),d=Ke.runKernelFunc((function(e){return e.conv3dDerInput(a,n,c)}),{dy5D:a});return s?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}var sl=gn({conv1d_:function(e,t,n,r,i,o,a){void 0===i&&(i="NWC"),void 0===o&&(o=1);var s=rn(e,"x","conv1d"),u=rn(t,"filter","conv1d"),l=s,c=!1;2===s.rank&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),P(3===l.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."})),P(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."})),null!=a&&P(W(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."})),P(l.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."})),P(ai(n,o),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+o+"'"})),P("NWC"===i,(function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."}));var d=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),h=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),f=ul(h,d,[1,n],r,"NHWC",[1,o],a);return c?f.as2D(f.shape[2],f.shape[3]):f.as3D(f.shape[0],f.shape[2],f.shape[3])}}),ul=gn({conv2d_:function(e,t,n,r,i,o,a){void 0===i&&(i="NHWC"),void 0===o&&(o=[1,1]);var s=rn(e,"x","conv2d"),u=rn(t,"filter","conv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),P(4===l.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."})),P(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."})),null!=a&&P(W(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var d="NHWC"===i?l.shape[3]:l.shape[1];P(d===u.shape[2],(function(){return"Error in conv2d: depth of input ("+d+") must match input depth for filter "+u.shape[2]+"."})),P(ai(n,o),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}));var h=si(i),f=Qr(l.shape,u.shape,n,o,r,a,!1,h),p=[u,l],m=Ke.runKernelFunc((function(e,t){var n=e.conv2d(l,u,f);return t([u,l]),n}),{x:l,filter:u},(function(e,t){var a=t,s=a[0],u=a[1];return P(oi(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"})),{x:function(){return dl(u.shape,e,s,n,r,i)},filter:function(){return cl(u,e,s.shape,n,r,i)}}}),"Conv2D",f,p);return c?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),ll=gn({conv3d_:function(e,t,n,r,i,o){void 0===i&&(i="NDHWC"),void 0===o&&(o=[1,1,1]);var a=rn(e,"x","conv3d"),s=rn(t,"filter","conv3d"),u=a,l=!1;4===a.rank&&(l=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),P(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."})),P(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),P(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),P(function(e,t){return ol(e)||ol(t)}(n,o),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),P("NDHWC"===i,(function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."}));var c=$r(u.shape,s.shape,n,o,r),d=Ke.runKernelFunc((function(e,t){var n=e.conv3d(u,s,c);return t([u,s]),n}),{x:u,$filter:s},(function(e,t){P(ol(o),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}));var i=t[0],a=t[1];return{x:function(){return al(i.shape,e,a,n,r)},$filter:function(){return function(e,t,n,r,i){var o=e;4===e.rank&&(o=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]));var a=t;4===a.rank&&(a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),P(5===o.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+o.shape+"."})),P(5===a.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+a.shape+"."})),P(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."})),P(o.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input "+o.shape[4]+") must match input depth in filter ("+n[3]+"."})),P(a.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+a.shape[4]+") must match output depth for filter ("+n[4]+")."}));var s=$r(o.shape,n,r,1,i);return Ke.runKernelFunc((function(e){return e.conv3dDerFilter(o,a,s)}),{x5D:o,dy5D:a})}(i,e,a.shape,n,r)}}}));return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),cl=gn({conv2dDerFilter_:function(e,t,n,r,i,o,a){void 0===o&&(o="NHWC");var s=e;3===e.rank&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var u=t;3===u.rank&&(u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),P(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."})),P(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."})),P(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var l="NHWC"===o?s.shape[3]:s.shape[1],c="NHWC"===o?u.shape[3]:u.shape[1];P(l===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."})),P(c===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."})),null!=a&&P(W(i),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."}));var d=si(o),h=Qr(s.shape,n,r,1,i,a,!1,d);return Ke.runKernelFunc((function(e){return e.conv2dDerFilter(s,u,h)}),{x4D:s,dy4D:u})}}),dl=gn({conv2dDerInput_:il}),hl=gn({depthwiseConv2d_:function(e,t,n,r,i,o,a){void 0===i&&(i="NHWC"),void 0===o&&(o=[1,1]);var s=rn(e,"x","depthwiseConv2d"),u=rn(t,"filter","depthwiseConv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),P(4===l.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."})),P(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."})),P(l.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."})),null==o&&(o=[1,1]),P(ai(n,o),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),null!=a&&P(W(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var d=Qr(l.shape,u.shape,n,o,r,a,!0),h=[l,u],f=Ke.runKernelFunc((function(e,t){var n=e.depthwiseConv2D(l,u,d);return t([l,u]),n}),{x:l,filter:u},(function(e,t){P(oi(o),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"}));var n=t[0],r=t[1];return{x:function(){return fl(n.shape,e,r,d)},filter:function(){return pl(n,e,r.shape,d)}}}),"DepthwiseConv2dNative",d,h);return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),fl=gn({depthwiseConv2dDerInput_:function(e,t,n,r){var i=t,o=!1;3===t.rank&&(o=!0,i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=Ke.runKernelFunc((function(e){return e.depthwiseConv2DDerInput(i,n,r)}),{dy4D:i});return o?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),pl=gn({depthwiseConv2dDerFilter_:function(e,t,n,r){var i=e;3===e.rank&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var o=t;return 3===o.rank&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Ke.runKernelFunc((function(e){return e.depthwiseConv2DDerFilter(i,o,r)}),{x4D:i,dy4D:o})}}),ml=gn({separableConv2d_:function(e,t,n,r,i,o,a){void 0===o&&(o=[1,1]),void 0===a&&(a="NHWC");var s=rn(e,"x","separableConv2d"),u=rn(t,"depthwiseFilter","separableConv2d"),l=rn(n,"pointwiseFilter","separableConv2d"),c=s,d=!1;if(3===s.rank&&(d=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===a)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");P(4===c.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."})),P(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."})),P(4===l.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."})),P(1===l.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."})),P(1===l.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."}));var h=u.shape[2],f=u.shape[3];P(l.shape[2]===h*f,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+h*f+", but got "+l.shape[2]+"."}));var p=hl(c,u,r,i,a,o),m=ul(p,l,1,"valid",a);return d?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),gl=gn({conv2dTranspose_:function(e,t,n,r,i,o){return il(n,rn(e,"x","conv2dTranspose"),rn(t,"filter","conv2dTranspose"),r,i,"NHWC",o)}}),vl=gn({conv3dTranspose_:function(e,t,n,r,i){return al(n,rn(e,"x","conv3dTranspose"),rn(t,"filter","conv3dTranspose"),r,i)}}),yl=gn({matMul_:function(e,t,n,r){var i;void 0===n&&(n=!1),void 0===r&&(r=!1);var o=rn(e,"a","matMul"),a=rn(t,"b","matMul");i=je(o,a),o=i[0],a=i[1];var s=n?o.shape[o.rank-2]:o.shape[o.rank-1],u=r?a.shape[a.rank-1]:a.shape[a.rank-2],l=n?o.shape[o.rank-1]:o.shape[o.rank-2],c=r?a.shape[a.rank-2]:a.shape[a.rank-1],d=o.shape.slice(0,-2),h=a.shape.slice(0,-2),f=z(d),p=z(h);P(o.rank>=2&&a.rank>=2&&o.rank===a.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+a.rank+"."})),P(j(d,h),(function(){return"Error in matMul: outer dimensions ("+d+") and ("+h+") of Tensors with shapes "+o.shape+" and "+a.shape+" must match."})),P(s===u,(function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+o.shape+" and "+a.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var m=o.shape.slice(0,-2).concat([l,c]),g=n?o.as3D(f,s,l):o.as3D(f,l,s),v=r?a.as3D(p,c,u):a.as3D(p,u,c),y={transposeA:n,transposeB:r};return Ke.runKernelFunc((function(e,t){var i=e.batchMatMul(g,v,n,r);return t([g,v]),i}),{a:g,b:v},(function(e,t){var i=t,o=i[0],a=i[1];return n||r?!n&&r?{a:function(){return e.matMul(a,!1,!1)},b:function(){return e.matMul(o,!0,!1)}}:n&&!r?{a:function(){return a.matMul(e,!1,!0)},b:function(){return o.matMul(e,!1,!1)}}:{a:function(){return a.matMul(e,!0,!0)},b:function(){return e.matMul(o,!0,!0)}}:{a:function(){return e.matMul(a,!1,!0)},b:function(){return o.matMul(e,!0,!1)}}}),"BatchMatMul",y).reshape(m)}}),bl=gn({dot_:function(e,t){var n=rn(e,"t1","dot"),r=rn(t,"t2","dot");P(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var i=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];return P(i===o,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."})),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),wl=gn({outerProduct_:function(e,t){var n=rn(e,"v1","outerProduct"),r=rn(t,"v2","outerProduct");return P(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),xl=gn({reverse_:function(e,t){var n=rn(e,"x","reverse");if(0===n.rank)return n.clone();var r=X(t,n.shape);return Ke.runKernelFunc((function(e){return e.reverse(n,r)}),{$x:n},(function(e){return{$x:function(){return e.reverse(r)}}})).reshapeAs(n)}}),_l=gn({reverse1d_:function(e){var t=rn(e,"x","reverse");return P(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."})),xl(t,0)}}),Cl=gn({reverse2d_:function(e,t){var n=rn(e,"x","reverse");return P(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),xl(n,t)}}),El=gn({reverse3d_:function(e,t){var n=rn(e,"x","reverse");return P(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),xl(n,t)}}),Sl=gn({reverse4d_:function(e,t){var n=rn(e,"x","reverse");return P(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),xl(n,t)}});function Al(e,t,n,r,i,o){var a=rn(e,"x","maxPool"),s=a,u=!1;3===a.rank&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),null==r&&(r=[1,1]),P(4===s.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."})),P(ai(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),null!=o&&P(W(i),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."}));var l=Yr(s.shape,t,n,r,i,o);if(1===l.filterWidth&&1===l.filterHeight&&j(l.inShape,l.outShape))return a.clone();var c=[s],d=Ke.runKernelFunc((function(e,t){var n=e.maxPool(s,l);return t([s,n]),n}),{x:s},(function(e,o){var a=o[0],s=o[1];return{x:function(){return function(e,t,n,r,i,o,a,s){var u=rn(e,"dy","maxPoolBackprop"),l=rn(t,"input","maxPoolBackprop"),c=rn(n,"output","maxPoolBackprop");P(l.rank===u.rank,(function(){return"Rank of input ("+l.rank+") does not match rank of dy ("+u.rank+")"})),null==o&&(o=[1,1]),P(ai(i,o),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+o+"'"})),P(4===u.rank,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."})),P(4===l.rank,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+l.rank+"."}));var d=Yr(l.shape,r,i,o,a,s);return Ke.runKernelFunc((function(e){return e.maxPoolBackprop(u,l,c,d)}),{$dy:u,$input:l})}(e,a,s,t,n,r,i)}}}),"MaxPool",l,c);return u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function kl(e,t,n,r,i,o){var a=rn(e,"x","avgPool","float32");null==r&&(r=[1,1]),P(ai(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var s=a,u=!1;3===a.rank&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),P(4===s.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."})),null!=o&&P(W(i),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."}));var l=Yr(s.shape,t,n,r,i,o);if(1===l.filterWidth&&1===l.filterHeight&&j(l.inShape,l.outShape))return a.clone();var c=Ke.runKernelFunc((function(e){return e.avgPool(s,l)}),{x:s},(function(e){return{x:function(){return function(e,t,n,r,i,o){var a=rn(e,"dy","avgPoolBackprop"),s=rn(t,"input","avgPoolBackprop");P(s.rank===a.rank,(function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+a.rank+")"})),null==i&&(i=[1,1]),P(ai(r,i),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"}));var u=s,l=a,c=!1;3===s.rank&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),l=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),P(4===l.rank,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."})),P(4===u.rank,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."}));var d=Yr(u.shape,n,r,i,o),h=Ke.runKernelFunc((function(e){return e.avgPoolBackprop(l,u,d)}),{dy4D:l,input4D:u});return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}(e,s,t,n,r,i)}}}),"AvgPool",l);return c=c.cast(a.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var Il=gn({maxPool_:function(e,t,n,r,i){return Al(e,t,n,1,r,i)}}),Rl=gn({avgPool_:function(e,t,n,r,i){return kl(e,t,n,1,r,i)}}),Tl=gn({pool_:function(e,t,n,r,i,o){null==i&&(i=[1,1]),null==o&&(o=1),0===r&&(r="valid");var a=rn(e,"x","maxPool"),s=a,u=!1;3===a.rank&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),P(ai(o,i),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"}));var l,c=Yr(s.shape,t,o,i,r),d=[c.dilationHeight,c.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),i=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],i[t]]}))}([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];var h=1===d[0]&&1===d[1],f=function(e,t,n){var r=n.map((function(e){return e[0]})),i=n.map((function(e){return e[1]})),o=e.concat(r,i),a=t.map((function(e,t){return(e-o[t]%e)%e})),s=i.map((function(e,t){return e+a[t]}));return[t.map((function(e,t){return[r[t],s[t]]})),t.map((function(e,t){return[0,a[t]]}))]}([c.inHeight,c.inWidth],d,l),p=f[0],m=f[1],g=h?r:"valid",v=h?s:yr(s,d,p),y=("avg"===n?function(){return kl(v,t,o,1,g)}:function(){return Al(v,t,o,1,g)})(),b=h?y:Qn(y,d,m);return u?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),Nl=gn({maxPool3d_:function(e,t,n,r,i,o,a){void 0===o&&(o="NDHWC");var s=rn(e,"x","maxPool3d"),u=s,l=!1;4===s.rank&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==a&&(a=[1,1,1]),P(5===u.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."})),P("NDHWC"===o,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o})),P(ai(n,a),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),null!=i&&P(W(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var c=Jr(u.shape,t,n,a,r,i,o),d=Ke.runKernelFunc((function(e,t){var n=e.maxPool3d(u,c);return t([u,n]),n}),{x:u},(function(e,o){var s=o[0],u=o[1];return{x:function(){return function(e,t,n,r,i,o,a,s){var u=rn(e,"dy","maxPool3dBackprop"),l=rn(t,"input","maxPool3dBackprop"),c=rn(n,"output","maxPool3dBackprop"),d=u,h=l,f=c,p=!1;4===l.rank&&(p=!0,d=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),h=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]),f=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3])),P(5===d.rank,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+d.rank+"."})),P(5===h.rank,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+h.rank+"."})),P(5===f.rank,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+f.rank+"."})),null==o&&(o=[1,1,1]),P(ai(i,o),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+o+"'"})),null!=s&&P(W(a),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+a+"."}));var m=Jr(h.shape,r,i,o,a,s),g=Ke.runKernelFunc((function(e){return e.maxPool3dBackprop(d,h,f,m)}),{dy5D:d,input5D:h});return p?g.as4D(g.shape[1],g.shape[2],g.shape[3],g.shape[4]):g}(e,s,u,t,n,a,r,i)}}}));return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),Ol=gn({avgPool3d_:function(e,t,n,r,i,o,a){void 0===o&&(o="NDHWC");var s=rn(e,"x","avgPool3d","float32"),u=s,l=!1;4===s.rank&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==a&&(a=[1,1,1]),P(5===u.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."})),P("NDHWC"===o,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o})),P(ai(n,a),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),null!=i&&P(W(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var c=Jr(u.shape,t,n,a,r,i,o),d=Ke.runKernelFunc((function(e){return e.avgPool3d(u,c)}),{x:u},(function(e){return{x:function(){return function(e,t,n,r,i,o,a){var s=rn(e,"dy","avgPool3dBackprop"),u=rn(t,"input","avgPool3dBackprop"),l=s,c=u,d=!1;4===u.rank&&(d=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),P(5===l.rank,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+l.rank+"."})),P(5===c.rank,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+c.rank+"."})),null==i&&(i=[1,1,1]),P(ai(r,i),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"})),null!=a&&P(W(o),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var h=Jr(c.shape,n,r,i,o,a),f=Ke.runKernelFunc((function(e){return e.avgPool3dBackprop(l,c,h)}),{dy5D:l,input5D:c});return d?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}(e,u,t,n,a,r,i)}}}));return d=d.cast(u.dtype),l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),Dl=gn({slice_:function(e,t,n){var r,i,o=rn(e,"x","slice");if(0===o.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(new Array(o.rank-1).fill(0)):t.length<o.rank?t.concat(new Array(o.rank-t.length).fill(0)):t.slice()).forEach((function(e){P(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),i=(i=null==n?new Array(o.rank).fill(-1):"number"==typeof n?[n].concat(new Array(o.rank-1).fill(-1)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(-1)):n).map((function(e,t){return e>=0?e:(P(-1===e,(function(){return"Negative size values should be exactly -1 but got "+e+" for the slice() size at index "+t+"."})),o.shape[t]-r[t])})),Mr(o,r,i);var a=o.shape,s={begin:r,size:i};return Ke.runKernelFunc((function(e){return e.slice(o,r,i)}),{x:o},(function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],a[n]-r[n]-i[n]]);return{x:function(){return e.pad(t)}}}),"Slice",s)}}),Ml=gn({slice1d_:function(e,t,n){var r=rn(e,"x","slice1d");return P(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),Dl(r,[t],[n])}}),Pl=gn({slice2d_:function(e,t,n){var r=rn(e,"x","slice2d");return P(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),Dl(r,t,n)}}),Fl=gn({slice3d_:function(e,t,n){var r=rn(e,"x","slice3d");return P(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),Dl(r,t,n)}}),Bl=gn({slice4d_:function(e,t,n){var r=rn(e,"x","slice4d");return P(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),Dl(r,t,n)}});function Ll(e,t,n,r,i){return t.rank<n.rank&&(t=t.reshape(ln(t.shape,r))),e.rank<n.rank&&(e=e.reshape(ln(e.shape,r))),{x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==i?r:r.transpose(i)}}}var zl=gn({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=rn(e,"x","all","bool"),i=X(t,r.shape),o=i,a=dn(o,r.rank);null!=a&&(r=r.transpose(a),o=fn(o.length,r.rank));var s=Ke.runKernelFunc((function(e){return e.all(r,o)}),{$x:r});if(n){var u=ln(s.shape,i);return s.reshape(u)}return s}}),jl=gn({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=rn(e,"x","any","bool"),i=X(t,r.shape),o=i,a=dn(o,r.rank);null!=a&&(r=r.transpose(a),o=fn(o.length,r.rank));var s=Ke.runKernelFunc((function(e){return e.any(r,o)}),{$x:r});if(n){var u=ln(s.shape,i);return s.reshape(u)}return s}}),Wl=gn({argMax_:function(e,t){void 0===t&&(t=0);var n=rn(e,"x","argMax");null==t&&(t=0);var r=X(t,n.shape),i=dn(r,n.rank);null!=i&&(n=n.transpose(i),r=fn(r.length,n.rank));var o={axis:r[0]},a=[n];return Ke.runKernelFunc((function(e,t){var i=e.argMax(n,r[0]);return t([n]),i}),{x:n},(function(e,t){var n=t[0];return{x:function(){return On(n)}}}),"ArgMax",o,a)}}),Hl=gn({argMin_:function(e,t){void 0===t&&(t=0);var n=rn(e,"x","argMin");null==t&&(t=0);var r=X(t,n.shape),i=dn(r,n.rank);return null!=i&&(n=n.transpose(i),r=fn(r.length,n.rank)),Ke.runKernelFunc((function(e,t){var i=e.argMin(n,r[0]);return t([n]),i}),{$x:n},(function(e,t){var n=t[0];return{$x:function(){return On(n)}}}))}}),Vl=gn({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=rn(e,"x","logSumExp"),i=X(t,r.shape),o=r.max(i,!0),a=r.sub(o).exp().sum(i).log(),s=o.reshape(a.shape).add(a);if(n){var u=ln(s.shape,i);return s.reshape(u)}return s}}),Gl=gn({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=rn(e,"x","max"),i=r,o=X(t,r.shape),a=o,s=dn(a,r.rank);null!=s&&(r=r.transpose(s),a=fn(a.length,r.rank));var u=[r],l=Ke.runKernelFunc((function(e,t){var n=e.max(r,a);return t([i,n]),n}),{x:r},(function(e,t){return Ll(e,t[1],t[0],o,s)}),"Max",{axes:a},u,[!0]);if(n){var c=ln(l.shape,o);l=l.reshape(c)}return l}}),Ul=gn({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=rn(e,"x","mean"),i=X(t,r.shape),o=z(un(r.shape,i)[1]);return Wr((function(e){var r=_n(o);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return i.forEach((function(e){n[e]=1})),t.reshape(n).mul(kn(e.shape,"float32")).div(o)}}}))(r)}}),Kl=gn({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=rn(e,"x","min"),i=r,o=X(t,r.shape),a=o,s=dn(a,r.rank);null!=s&&(r=r.transpose(s),a=fn(a.length,r.rank));var u=[r],l=Ke.runKernelFunc((function(e,t){var n=e.min(r,a);return t([i,n]),n}),{x:r},(function(e,t){return Ll(e,t[1],t[0],o,s)}),"Min",{axes:a},u,[!0]);if(n){var c=ln(l.shape,o);l=l.reshape(c)}return l}}),Xl=gn({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=X(t,(e=rn(e,"x","moments")).shape),i=e.mean(r,n),o=i.shape;n||(o=ln(i.shape,r));var a=e.toFloat().sub(i.reshape(o)).square();return{mean:i,variance:a.mean(r,n)}}}),Zl=gn({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=rn(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var i=X(t,r.shape);return Wr((function(e){var t=dn(i,e.rank),r=i,o=e;null!=t&&(o=e.transpose(t),r=fn(r.length,e.rank));var a=function(t){var n=e.shape.slice();return i.forEach((function(e){n[e]=1})),t.reshape(n).mul(kn(e.shape,"float32"))},s={axes:r},u=Ke.runKernelFunc((function(e){return e.sum(o,r)}),{x:o},(function(e){return{x:function(){return a(e)}}}),"Sum",s);if(n){var l=ln(u.shape,i);u=u.reshape(l)}return{value:u,gradFunc:a}}))(r)}}),ql=gn({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=rn(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var i=X(t,r.shape),o=dn(i,r.rank),a=i,s=r;null!=o&&(s=r.transpose(o),a=fn(a.length,r.rank));var u=Ke.runKernelFunc((function(e){return e.prod(s,a)}),{permutedX:s});if(n){var l=ln(u.shape,i);u=u.reshape(l)}return u}}),Yl=gn({elu_:function(e){var t=rn(e,"x","elu");return Ke.runKernelFunc((function(e,n){var r=e.elu(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return Ke.runKernelFunc((function(t){return t.eluDer(e,n)}),{dy:e,y:n})}}}))}}),Jl=gn({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=rn(e,"x","leakyRelu");return Ru(_n(t).mul(n),n)}}),Ql=gn({prelu_:function(e,t){var n=rn(e,"x","prelu"),r=rn(t,"alpha","prelu");return Ke.runKernelFunc((function(e,t){var i=e.prelu(n,r);return t([n,r]),i}),{x:n,alpha:r},(function(e,t){var n=t[0],r=t[1],i=n.greater(0);return{x:function(){return bu(i,e,e.mul(r))},alpha:function(){var t=bu(i,On(e),e.mul(n)),o=Zr(r.shape,e.shape);return o.length>0&&(t=t.sum(o)),t.reshape(r.shape)}}}),"Prelu")}}),$l=gn({relu_:function(e){var t=rn(e,"x","relu");return"bool"===t.dtype?t.toInt():Ke.runKernelFunc((function(e,n){var r=e.relu(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mulStrict(n.step().toFloat())}}}),"Relu")}}),ec=gn({relu6_:function(e){var t=rn(e,"x","relu6");return"bool"===t.dtype?t.toInt():Ke.runKernelFunc((function(e,n){var r=e.relu6(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return e.mulStrict(r.toFloat())}}}),"Relu6")}}),tc=gn({selu_:function(e){var t=rn(e,"x","selu");return Ke.runKernelFunc((function(e,n){var r=e.selu(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){var t=n.greater(_n(0)),r=_n(Wa),i=_n(Ha),o=e.mul(i),a=e.mul(r).mul(n.toFloat().exp());return bu(t,o,a)}}}))}}),nc=gn({transpose_:function(e,t){var n=rn(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),P(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."})),t.forEach((function(e){P(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t}))})),n.rank<=1)return n.clone();var r={perm:t};return Ke.runKernelFunc((function(e){return e.transpose(n,t)}),{x:n},(function(e){var n=hn(t);return{x:function(){return e.transpose(n)}}}),"Transpose",r)}}),rc=gn({localResponseNormalization_:function(e,t,n,r,i){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=.5);var o=rn(e,"x","localResponseNormalization");P(4===o.rank||3===o.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+o.rank+"."})),P(W(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."}));var a=o,s=!1;3===o.rank&&(s=!0,a=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var u=Ke.runKernelFunc((function(e,o){var s=e.localResponseNormalization4D(a,t,n,r,i);return o([a,s]),s}),{x4D:a},(function(e,o){var a=o[0],s=o[1];return{x4D:function(){return Ke.runKernelFunc((function(o){return o.LRNGrad(e,a,s,t,n,r,i)}),{})}}}));return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),ic=gn({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var i=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(_n(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=rn(e,"x","norm"),t,n),o=i.shape;if(r){var a=X(n,e.shape);o=ln(i.shape,a)}return i.reshape(o)}}),oc=gn({basicLSTMCell_:function(e,t,n,r,i,o){var a=rn(e,"forgetBias","basicLSTMCell"),s=rn(t,"lstmKernel","basicLSTMCell"),u=rn(n,"lstmBias","basicLSTMCell"),l=rn(r,"data","basicLSTMCell"),c=rn(i,"c","basicLSTMCell"),d=rn(o,"h","basicLSTMCell"),h=l.concat(d,1).matMul(s).add(u),f=h.shape[0],p=h.shape[1]/4,m=[f,p],g=h.slice([0,0],m),v=h.slice([0,p],m),y=h.slice([0,2*p],m),b=h.slice([0,3*p],m),w=g.sigmoid().mulStrict(v.tanh()).addStrict(c.mulStrict(a.add(y).sigmoid())),x=w.tanh().mulStrict(b.sigmoid());return[w,x]}}),ac=gn({multiRNNCell_:function(e,t,n,r){for(var i=rn(t,"data","multiRNNCell"),o=on(n,"c","multiRNNCell"),a=on(r,"h","multiRNNCell"),s=i,u=[],l=0;l<e.length;l++){var c=e[l](s,o[l],a[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var d=[],h=[];for(l=0;l<u.length;l+=2)d.push(u[l]),h.push(u[l+1]);return[d,h]}}),sc=gn({movingAverage_:function(e,t,n,r,i){void 0===i&&(i=!0);var o=rn(e,"v","movingAverage"),a=rn(t,"x","movingAverage"),s=rn(n,"decay","movingAverage");We(o,a),P(j(o.shape,a.shape),(function(){return"Shape mismatch in v and x"}));var u=_n(1),l=u.sub(s),c=a.sub(o).mul(l);if(i){P(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=rn(r,"step","movingAverage");c=c.div(u.sub(Bu(s,d)))}return o.add(c)}}),uc=gn({stridedSlice_:function(e,t,n,r,i,o,a,s,u){if(void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),null==r&&(r=new Array(t.length)),0!==a)throw new Error("ellipsis mask is not yet supported");var l=rn(e,"x","stridedSlice"),c=Pr(s),d=l.shape.slice();c.forEach((function(e){t[e]=0,n[e]=1,d.splice(e,0,1)})),l=l.reshape(d);for(var h=0;h<l.rank;h++)t[h]=Br(i,t,r,l.shape,h),n[h]=Lr(o,n,r,l.shape,h),r[h]=r[h]||1;var f=Pr(u);f.forEach((function(e){n[e]=t[e]+1,r[e]=1}));var p=Fr(t,n,r),m=p.filter((function(e,t){return-1===f.indexOf(t)}));return r.every((function(e){return 1===e}))?Dl(l,t,p).reshape(m):Ke.runKernelFunc((function(e){return e.stridedSlice(l,t,n,r)}),{$x:l}).reshape(m)}}),lc=gn({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=rn(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(t>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+t);var o=Ke.runKernelFunc((function(e){return e.topk(r,t,n)}),{$x:r});return{values:o[0],indices:o[1]}}}),cc=gn({scatterND_:function(e,t,n){var r=rn(e,"indices","scatterND","int32"),i=rn(t,"updates","scatterND");return Or(i,r,n),Ke.runKernelFunc((function(e){return e.scatterND(r,i,n)}),{indices:r,updates:i},null,"ScatterNd",{shape:n})}}),dc=gn({fft_:function(e){P("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return Ke.runKernelFunc((function(e){return e.fft(r)}),{input:e}).reshape(e.shape)}}),hc=gn({ifft_:function(e){P("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return Ke.runKernelFunc((function(e){return e.ifft(r)}),{input:e}).reshape(e.shape)}}),fc=gn({rfft_:function(e,t){P("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got "+e.dtype}));var n,r=e.shape[e.shape.length-1],i=e.size/r;if(null!=t&&t<r){var o=e.shape.map((function(e){return 0})),a=e.shape.map((function(e){return e}));a[e.shape.length-1]=t,n=e.slice(o,a),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=e.concat(In(s),e.shape.length-1),r=t}else n=e;var u=n.zerosLike(),l=vn(n,u).as2D(i,r),c=dc(l),d=Math.floor(r/2)+1,h=yn(c),f=bn(c),p=h.split([d,r-d],h.shape.length-1),m=f.split([d,r-d],f.shape.length-1),g=n.shape.slice();return g[n.shape.length-1]=d,vn(p[0],m[0]).reshape(g)}}),pc=gn({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),i=hc(r);return yn(i)}var o=[n,2*(t-1)],a=yn(e).as2D(n,t),s=bn(e).as2D(n,t),u=a.slice([0,1],[n,t-2]).reverse(1),l=s.slice([0,1],[n,t-2]).reverse(1).mul(_n(-1)),c=a.concat(u,1),d=s.concat(l,1);return r=vn(c,d).as2D(o[0],o[1]),i=hc(r),yn(i)}}),mc=Object.freeze({fft:dc,ifft:hc,rfft:fc,irfft:pc}),gc=gn({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0);var i=rn(e,"sparseIndices","sparseToDense","int32"),o=rn(t,"sparseValues","sparseToDense"),a=rn(r,"defaultValue","sparseToDense",o.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var i=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(n.length!==o)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+o+".");var a=t.size;if(0!==t.rank&&(1!==t.rank||a!==i))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+i+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,n,a),Ke.runKernelFunc((function(e){return e.sparseToDense(i,o,n,a)}),{$sparseIndices:i,$sparseValues:o,$defaultValue:a})}}),vc=gn({gatherND_:function(e,t){var n=rn(t,"indices","gatherND","int32"),r=rn(e,"x","gatherND");return Ke.runKernelFunc((function(e){return e.gatherND(r,n)}),{x:r,indices:n},null,"GatherNd")}}),yc=gn({diag_:function(e){var t=rn(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return Ke.runKernelFunc((function(e){return e.diag(t)}),{$x:t}).reshape(n)}}),bc=gn({dropout_:function(e,t,n,r){var i=rn(e,"x","dropout");if(P("float32"===i.dtype,(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."})),P(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got "+t+"."})),0===t)return e instanceof Re?i.clone():i;var o=function(e,t){if(null==t)return e.shape.slice();if(j(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(i,n),a=1-t,s=gr(o,0,1,"float32",r).add(a).floor().div(a);return i.mul(s)}});function wc(e,t,n){for(var r=1-e%2,i=new Float32Array(e),o=0;o<e;++o){var a=2*Math.PI*o/(e+r-1);i[o]=t-n*Math.cos(a)}return Cn(i,"float32")}var xc,_c=gn({hannWindow_:function(e){return wc(e,.5,.5)}}),Cc=gn({hammingWindow_:function(e){return wc(e,.54,.46)}}),Ec=gn({frame_:function(e,t,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=0);for(var o=0,a=[];o+t<=e.size;)a.push(Dl(e,o,t)),o+=n;if(r)for(;o<e.size;){var s=o+t-e.size,u=Dn([Dl(e,o,t-s),Rn([s],i)]);a.push(u),o+=n}return 0===a.length?En([],[0,t]):Dn(a).as2D(a.length,t)}}),Sc=gn({stft_:function(e,t,n,r,i){var o;void 0===i&&(i=_c),null==r&&(o=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var a=Ec(e,t,n),s=Pu(a,i(t)),u=[],l=0;l<a.shape[0];l++)u.push(fc(s.slice([l,0],[1,t]),r));return Dn(u)}}),Ac=Object.freeze({hannWindow:_c,hammingWindow:Cc,frame:Ec,stft:Sc});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(xc||(xc={}));var kc=gn({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=xc.SUM_BY_NONZERO_WEIGHTS);var i=rn(e,"labels","absoluteDifference"),o=rn(t,"predictions","absoluteDifference"),a=null;null!=n&&(a=rn(n,"weights","absoluteDifference")),F(i.shape,o.shape,"Error in absoluteDifference: ");var s=i.sub(o).abs();return Ic(s,a,r)}}),Ic=gn({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=xc.SUM_BY_NONZERO_WEIGHTS);var r=rn(e,"losses","computeWeightedLoss"),i=null;null!=t&&(i=rn(t,"weights","computeWeightedLoss"));var o=null==i?r:r.mul(i);if(n===xc.NONE)return o;if(n===xc.SUM)return o.sum();if(n===xc.MEAN){if(null==i)return o.mean();var a=r.size/i.size,s=o.sum().div(i.sum());return a>1?s.div(_n(a)):s}if(n===xc.SUM_BY_NONZERO_WEIGHTS){if(null==i)return o.sum().div(_n(r.size));var u=i.mul(kn(r.shape)).notEqual(_n(0)).sum().toFloat();return o.sum().div(u)}throw Error("Unknown reduction: "+n)}}),Rc=gn({cosineDistance_:function(e,t,n,r,i){void 0===i&&(i=xc.SUM_BY_NONZERO_WEIGHTS);var o=rn(e,"labels","cosineDistance"),a=rn(t,"predictions","cosineDistance"),s=null;null!=r&&(s=rn(r,"weights","cosineDistance")),F(o.shape,a.shape,"Error in cosineDistance: ");var u=_n(1).sub(o.mul(a).sum(n,!0));return Ic(u,s,i)}}),Tc=gn({hingeLoss_:function(e,t,n,r){void 0===r&&(r=xc.SUM_BY_NONZERO_WEIGHTS);var i=rn(e,"labels","hingeLoss"),o=rn(t,"predictions","hingeLoss"),a=null;null!=n&&(a=rn(n,"weights","hingeLoss")),F(i.shape,o.shape,"Error in hingeLoss: ");var s=_n(1);i=_n(2).mul(i).sub(s);var u=s.sub(i.mul(o)).relu();return Ic(u,a,r)}}),Nc=gn({huberLoss_:function(e,t,n,r,i){void 0===r&&(r=1),void 0===i&&(i=xc.SUM_BY_NONZERO_WEIGHTS);var o=rn(e,"labels","huberLoss"),a=rn(t,"predictions","huberLoss"),s=null;null!=n&&(s=rn(n,"weights","huberLoss")),F(o.shape,a.shape,"Error in huberLoss: ");var u=_n(r),l=a.sub(o).abs(),c=Nu(l,u),d=l.sub(c),h=_n(.5).mul(c.square()).add(u.mul(d));return Ic(h,s,i)}}),Oc=gn({logLoss_:function(e,t,n,r,i){void 0===r&&(r=1e-7),void 0===i&&(i=xc.SUM_BY_NONZERO_WEIGHTS);var o=rn(e,"labels","logLoss"),a=rn(t,"predictions","logLoss"),s=null;null!=n&&(s=rn(n,"weights","logLoss")),F(o.shape,a.shape,"Error in logLoss: ");var u=_n(1),l=_n(r),c=o.mul(a.add(l).log()).neg().sub(u.sub(o).mul(u.sub(a).add(l).log()));return Ic(c,s,i)}}),Dc=gn({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=xc.SUM_BY_NONZERO_WEIGHTS);var i=rn(e,"labels","meanSquaredError"),o=rn(t,"predictions","meanSquaredError"),a=null;null!=n&&(a=rn(n,"weights","meanSquaredError")),F(i.shape,o.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(o);return Ic(s,a,r)}}),Mc=gn({sigmoidCrossEntropy_:function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=xc.SUM_BY_NONZERO_WEIGHTS);var o=rn(e,"multiClassLabels","sigmoidCrossEntropy"),a=rn(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=rn(n,"weights","sigmoidCrossEntropy")),F(o.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=_n(r),l=_n(1),c=_n(.5);o=o.mul(l.sub(u)).add(c.mul(u))}var d=function(e,t){var n=rn(e,"labels","sigmoidCrossEntropyWithLogits"),r=rn(t,"logits","sigmoidCrossEntropyWithLogits");F(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var i=r.relu(),o=r.mul(n),a=r.abs().neg().exp().log1p();return i.sub(o).add(a)}(o,a);return Ic(d,s,i)}}),Pc=gn({softmaxCrossEntropy_:function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=xc.SUM_BY_NONZERO_WEIGHTS);var o=rn(e,"onehotLabels","softmaxCrossEntropy"),a=rn(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=rn(n,"weights","softmaxCrossEntropy")),F(o.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var u=_n(r),l=_n(1),c=_n(o.shape[1]);o=o.mul(l.sub(u)).add(u.div(c))}var d=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return Wr((function(e,t,r){var i=t.logSumExp([n],!0),o=t.toFloat().sub(i);return r([e,o]),{value:o.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],i=t[1],o=ln(e.shape,[n]);return[e.reshape(o).mul(r.toFloat().sub(i.exp())),e.reshape(o).mul(i.exp().sub(r.toFloat()))]}}}))(e,t)}(o,a);return Ic(d,s,i)}}),Fc=Object.freeze({get Reduction(){return xc},absoluteDifference:kc,computeWeightedLoss:Ic,cosineDistance:Rc,hingeLoss:Tc,huberLoss:Nc,logLoss:Oc,meanSquaredError:Dc,sigmoidCrossEntropy:Mc,softmaxCrossEntropy:Pc});function Bc(e,t){return void 0===t&&(t=!1),Ke.tidy((function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],i=or(n),o=e.clone(),a=En([[1]],[1,1]),s=a.clone(),u=n>=r?r:n,l=function(e){var t,u=o,l=s,c=i;t=Ke.tidy((function(){var t=o.slice([e,e],[n-e,1]),u=t.norm(),l=o.slice([e,e],[1,1]),c=En([[-1]]).where(l.greater(0),En([[1]])),d=l.sub(c.mul(u)),h=t.div(d);s=1===h.shape[0]?a.clone():a.concat(h.slice([1,0],[h.shape[0]-1,h.shape[1]]),0);var f=c.matMul(d).div(u).neg(),p=o.slice([e,0],[n-e,r]),m=f.mul(s);if(0===e)o=p.sub(m.matMul(s.transpose().matMul(p)));else{var g=p.sub(m.matMul(s.transpose().matMul(p)));o=o.slice([0,0],[e,r]).concat(g,0)}var v=i.slice([0,e],[n,i.shape[1]-e]);if(0===e)i=v.sub(v.matMul(s).matMul(m.transpose()));else{var y=v.sub(v.matMul(s).matMul(m.transpose()));i=i.slice([0,0],[n,e]).concat(y,1)}return[s,o,i]})),s=t[0],o=t[1],i=t[2],$t([u,l,c])},c=0;c<u;++c)l(c);return!t&&n>r&&(i=i.slice([0,0],[n,r]),o=o.slice([0,0],[r,r])),[i,o]}))}var Lc=gn({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=rn(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,o=r.shape.slice(-2),a=o[0],s=o[1];if(!(t<=a))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+a+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=a),n<0&&(n=s);var u=Tn(0,a,1,"int32").reshape([-1,1]),l=Tn(0,s,1,"int32"),c=ju(u,l),d=mu(c.lessEqual(_n(+t,"int32")),c.greaterEqual(_n(-n,"int32"))),h=In([a,s],r.dtype);return wr(Cr(r.reshape([-1,a,s])).map((function(e){return bu(d,e,h)}))).reshape(i)}}),zc=gn({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,P(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){P(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"}))},i=1;i<e.length;++i)r(i)}else t=!0,e=Ln(e,e.shape[0],0).map((function(e){return br(e,[0])}));P(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."}));var o=[],a=e,s=function(e){o.push(Ke.tidy((function(){var t=a[e];if(e>0)for(var n=0;n<e;++n){var r=Zl(o[n].mulStrict(t)).mul(o[n]);t=t.sub(r)}return t.div(ic(t,"euclidean"))})))};for(i=0;i<e.length;++i)s(i);return t?wr(o,0):o}}),jc=gn({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return Bc(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=Cr(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],o=[];return r.forEach((function(e){var n=Bc(e,t),r=n[0],a=n[1];i.push(r),o.push(a)})),[wr(i,0).reshape(e.shape),wr(o,0).reshape(e.shape)]}}),Wc=Object.freeze({bandPart:Lc,gramSchmidt:zc,qr:jc});function Hc(e,t,n,r,i,o){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==o&&(o=0);var a=e.shape[0];return n=Math.min(n,a),P(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),P(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"})),P(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]})),P(1===t.rank,(function(){return"scores must be a 1D tensor"})),P(t.shape[0]===a,(function(){return"scores has incompatible shape with boxes. Expected "+a+", but was "+t.shape[0]})),P(0<=o&&o<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+o+"'"})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o}}var Vc=gn({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=rn(e,"images","resizeBilinear");P(3===r.rank||4===r.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),P(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."}));var i=r,o=!1;3===r.rank&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=t[0],s=t[1],u=Ke.runKernelFunc((function(e,t){return t([i]),e.resizeBilinear(i,a,s,n)}),{x:i},(function(e,t){return{x:function(){return Ke.runKernelFunc((function(r){return r.resizeBilinearBackprop(e,t[0],n)}),{})}}}),"ResizeBilinear",{alignCorners:n,newHeight:a,newWidth:s});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Gc=gn({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=rn(e,"images","resizeNearestNeighbor");P(3===r.rank||4===r.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),P(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."})),P("float32"===r.dtype||"int32"===r.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"}));var i=r,o=!1;3===r.rank&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=t[0],s=t[1],u=Ke.runKernelFunc((function(e,t){return t([i]),e.resizeNearestNeighbor(i,a,s,n)}),{batchImages:i},(function(e,t){return{batchImages:function(){return Ke.runKernelFunc((function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)}),{})}}}));return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Uc=gn({nonMaxSuppression_:function(e,t,n,r,i){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY);var o=rn(e,"boxes","nonMaxSuppression"),a=rn(t,"scores","nonMaxSuppression"),s=Hc(o,a,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return Ke.runKernelFunc((function(e){return e.nonMaxSuppression(o,a,n,r,i)}),{boxes:o,scores:a},null,"NonMaxSuppressionV3",u)}}),Kc=gn({nonMaxSuppressionWithScore_:function(e,t,n,r,i,o){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===o&&(o=0);var a=rn(e,"boxes","nonMaxSuppression"),s=rn(t,"scores","nonMaxSuppression"),u=Hc(a,s,n,r,i,o),l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:i=u.scoreThreshold,softNmsSigma:o=u.softNmsSigma},c=Ke.runKernel("NonMaxSuppressionV5",{boxes:a,scores:s},l);return{selectedIndices:c[0],selectedScores:c[1]}}}),Xc=gn({cropAndResize_:function(e,t,n,r,i,o){var a=rn(e,"image","cropAndResize"),s=rn(t,"boxes","cropAndResize","float32"),u=rn(n,"boxInd","cropAndResize","int32");i=i||"bilinear",o=o||0;var l=s.shape[0];return P(4===a.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."})),P(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."})),P(1===u.rank&&u.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."})),P(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),P(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),P("bilinear"===i||"nearest"===i,(function(){return"method must be bilinear or nearest, but was "+i})),Ke.runKernelFunc((function(e,t){return e.cropAndResize(a,s,u,r,i,o)}),{images:a,boxes:s,boxInd:u},null,"CropAndResize",{method:i,extrapolationValue:o,cropSize:r})}}),Zc=Object.freeze({resizeBilinear:Vc,resizeNearestNeighbor:Gc,nonMaxSuppression:Uc,nonMaxSuppressionAsync:function(e,t,n,r,i){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),y(this,void 0,void 0,(function(){var o,a,s,u,l,c,d;return b(this,(function(h){switch(h.label){case 0:return o=rn(e,"boxes","nonMaxSuppressionAsync"),a=rn(t,"scores","nonMaxSuppressionAsync"),s=Hc(o,a,n,r,i),n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,[4,Promise.all([o.data(),a.data()])];case 1:return u=h.sent(),l=u[0],c=u[1],d=vi(l,c,n,r,i),o!==e&&o.dispose(),a!==t&&a.dispose(),[2,d]}}))}))},nonMaxSuppressionWithScore:Kc,nonMaxSuppressionWithScoreAsync:function(e,t,n,r,i,o){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===o&&(o=0),y(this,void 0,void 0,(function(){var a,s,u,l,c,d,h;return b(this,(function(f){switch(f.label){case 0:return a=rn(e,"boxes","nonMaxSuppressionAsync"),s=rn(t,"scores","nonMaxSuppressionAsync"),u=Hc(a,s,n,r,i,o),n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,o=u.softNmsSigma,[4,Promise.all([a.data(),s.data()])];case 1:return l=f.sent(),c=l[0],d=l[1],h=yi(c,d,n,r,i,o),a!==e&&a.dispose(),s!==t&&s.dispose(),[2,h]}}))}))},cropAndResize:Xc}),qc=function(e,t){return!(e>0)||"linear"===t},Yc=function(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},Jc=function(e,t){var n=t,r=Zr(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},Qc=function(e,t,n){if("linear"===t)return e;if("relu"===t)return $l(e);if("elu"===t)return Yl(e);if("relu6"===t)return ec(e);if("prelu"===t)return Ql(e,n);throw new Error("Unknown fused activation "+t+".")},$c=gn({fusedMatMul_:function(e){var t,n=e.a,r=e.b,i=e.transposeA,o=void 0!==i&&i,a=e.transposeB,s=void 0!==a&&a,u=e.bias,l=e.activation,c=void 0===l?"linear":l,d=e.preluActivationWeights;if(!1===qc(Ke.state.gradientDepth,c)){var h=yl(n,r,o,s);return null!=u&&(h=xu(h,u)),Qc(h,c,d)}var f=rn(n,"a","fused matMul"),p=rn(r,"b","fused matMul");t=je(f,p),f=t[0],p=t[1];var m=o?f.shape[f.rank-2]:f.shape[f.rank-1],g=s?p.shape[p.rank-1]:p.shape[p.rank-2],v=o?f.shape[f.rank-1]:f.shape[f.rank-2],y=s?p.shape[p.rank-2]:p.shape[p.rank-1],b=f.shape.slice(0,-2),w=p.shape.slice(0,-2),x=z(b),_=z(w);P(f.rank>=2&&p.rank>=2&&f.rank===p.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+f.rank+" and "+p.rank+"."})),P(j(b,w),(function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+w+") of Tensors with shapes "+f.shape+" and "+p.shape+" must match."})),P(m===g,(function(){return"Error in fused matMul: inner shapes ("+m+") and ("+g+") of Tensors with shapes "+f.shape+" and "+p.shape+" and transposeA="+o+" and transposeB="+s+" must match."}));var C,E,S=f.shape.slice(0,-2).concat([v,y]),A=o?f.as3D(x,m,v):f.as3D(x,v,m),k=s?p.as3D(_,y,g):p.as3D(_,g,y);null!=u&&qr(S,(C=je(C=rn(u,"bias","fused matMul"),f)[0]).shape),null!=d&&(E=rn(d,"prelu weights","fused matMul"));var I={a:A,b:k};null!=u&&(I.bias=C),null!=d&&(I.preluActivationWeights=E);var R=[A,k];return Ke.runKernelFunc((function(e,t){var n=e.fusedBatchMatMul({a:A,b:k,transposeA:o,transposeB:s,bias:C,activation:c,preluActivationWeights:E});return t([A,k,n]),n}),I,(function(e,t){var n=t[0],r=t[1],i=t[2],a=Yc(e,i,c),l={};return null!=u&&(l={bias:function(){return Jc(C,a)}}),o||s?!o&&s?Object.assign({a:function(){return a.matMul(r,!1,!1)},b:function(){return a.matMul(n,!0,!1)}},l):o&&!s?Object.assign({a:function(){return r.matMul(a,!1,!0)},b:function(){return n.matMul(a,!1,!1)}},l):Object.assign({a:function(){return r.matMul(a,!0,!0)},b:function(){return a.matMul(n,!0,!0)}},l):Object.assign({a:function(){return a.matMul(r,!1,!0)},b:function(){return n.matMul(a,!0,!1)}},l)}),"_FusedMatMul",{transposeA:o,transposeB:s,activation:c},R,[!0]).reshape(S)}}),ed=gn({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,i=e.pad,o=e.dataFormat,a=void 0===o?"NHWC":o,s=e.dilations,u=void 0===s?[1,1]:s,l=e.dimRoundingMode,c=e.bias,d=e.activation,h=void 0===d?"linear":d,f=e.preluActivationWeights;if(h=h||"linear",!1===qc(Ke.state.gradientDepth,h)){var p=ul(t,n,r,i,a,u,l);return null!=c&&(p=xu(p,c)),Qc(p,h,f)}var m=rn(t,"x","conv2d"),g=rn(n,"filter","conv2d"),v=m,y=!1;3===m.rank&&(y=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),P(4===v.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+v.rank+"."})),P(4===g.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+g.rank+"."})),null!=l&&P(W(i),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+i+"."})),P(v.shape[3]===g.shape[2],(function(){return"Error in conv2d: depth of input ("+v.shape[3]+") must match input depth for filter "+g.shape[2]+"."})),P(ai(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),P("NHWC"===a,(function(){return"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported."}));var b,w,x=Qr(v.shape,g.shape,r,u,i,l);null!=c&&(b=je(b=rn(c,"bias","fused conv2d"),m)[0],qr(x.outShape,b.shape)),null!=f&&(w=rn(f,"prelu weights","fused conv2d"));var _={x:v,filter:g};null!=c&&(_.bias=b),null!=f&&(_.preluActivationWeights=w);var C=[g,v],E=Ke.runKernelFunc((function(e,t){var n=e.fusedConv2d({input:v,filter:g,convInfo:x,bias:b,activation:h,preluActivationWeights:w});return t([g,v,n]),n}),_,(function(e,t){var n=t,o=n[0],a=n[1],s=n[2],l=Yc(e,s,h);P(oi(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"}));var d={};return null!=c&&(d={bias:function(){return Jc(b,l)}}),Object.assign({x:function(){return dl(a.shape,l,o,r,i)},filter:function(){return cl(a,l,o.shape,r,i)}},d)}),"FusedConv2D",{convInfo:x,activation:h},C,[!0]);return y?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),td=gn({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,i=e.pad,o=e.dataFormat,a=void 0===o?"NHWC":o,s=e.dilations,u=void 0===s?[1,1]:s,l=e.dimRoundingMode,c=e.bias,d=e.activation,h=void 0===d?"linear":d,f=e.preluActivationWeights;if(!1===qc(Ke.state.gradientDepth,h)){var p=hl(t,n,r,i,a,u,l);return null!=c&&(p=xu(p,c)),Qc(p,h,f)}var m=rn(t,"x","depthwiseConv2d"),g=rn(n,"filter","depthwiseConv2d"),v=m,y=!1;3===m.rank&&(y=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),P(4===v.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+v.rank+"."})),P(4===g.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+g.rank+"."})),P(v.shape[3]===g.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+v.shape[3]+") must match the inChannels dimension in filter "+g.shape[2]+"."})),null==u&&(u=[1,1]),P(ai(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),null!=l&&P(W(i),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+i+"."}));var b,w,x=Qr(v.shape,g.shape,r,u,i,l,!0);null!=c&&(b=je(b=rn(c,"bias","fused conv2d"),m)[0],qr(x.outShape,b.shape)),null!=f&&(w=rn(f,"prelu weights","fused depthwiseConv2d"));var _={x:v,filter:g};null!=c&&(_.bias=b),null!=f&&(_.preluActivationWeights=w);var C=[g,v],E=Ke.runKernelFunc((function(e,t){var n=e.fusedDepthwiseConv2D({input:v,filter:g,convInfo:x,bias:b,activation:h,preluActivationWeights:w});return t([g,v,n]),n}),_,(function(e,t){P(oi(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"}));var n=t[0],r=t[1],i=t[2],o=Yc(e,i,h),a={};return null!=c&&(a={bias:function(){return Jc(b,o)}}),Object.assign({x:function(){return fl(r.shape,o,n,x)},filter:function(){return pl(r,o,n.shape,x)}},a)}),"FusedDepthwiseConv2D",{convInfo:x,activation:h},C,[!0]);return y?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),nd=Object.freeze({matMul:$c,conv2d:ed,depthwiseConv2d:td}),rd=Object.freeze({image:Zc,linalg:Wc,losses:Fc,spectral:mc,fused:nd,signal:Ac,square:ys,squaredDifference:ws,conv1d:sl,conv2d:ul,conv3d:ll,depthwiseConv2d:hl,separableConv2d:ml,conv2dTranspose:gl,conv3dTranspose:vl,op:gn,batchNormalization2d:su,batchNormalization3d:uu,batchNormalization4d:lu,batchNormalization:cu,batchNorm:du,batchNorm2d:hu,batchNorm3d:fu,batchNorm4d:pu,booleanMaskAsync:function(e,t,n){return y(this,void 0,void 0,(function(){var r,i,o,a,s,u,l,c,d,h,f,p,m;return b(this,(function(g){switch(g.label){case 0:for(r=rn(e,"tensor","boolMask"),i=rn(t,"mask","boolMask","bool"),o=null==n?0:n,a=i.rank,s=r.shape,P(a>0,(function(){return"mask cannot be scalar"})),F(s.slice(o,o+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=o;l<o+a;l++)u*=s[l];return c=s.slice(0,o).concat([u],s.slice(o+a)),d=r.reshape(c),h=i.reshape([-1]),[4,wu(h)];case 1:return f=g.sent(),p=f.squeeze([1]),m=nl(d,p,o),e!==r&&r.dispose(),t!==i&&i.dispose(),p.dispose(),d.dispose(),h.dispose(),f.dispose(),[2,m]}}))}))},complex:vn,real:yn,imag:bn,concat:Dn,concat1d:Mn,concat2d:Pn,concat3d:Fn,concat4d:Bn,split:Ln,matMul:yl,dot:bl,outerProduct:wl,reverse:xl,reverse1d:_l,reverse2d:Cl,reverse3d:El,reverse4d:Sl,maxPool:Il,avgPool:Rl,pool:Tl,maxPool3d:Nl,avgPool3d:Ol,slice:Dl,slice1d:Ml,slice2d:Pl,slice3d:Fl,slice4d:Bl,abs:xs,acos:_s,acosh:Cs,asin:Es,asinh:Ss,atan:As,atanh:ks,ceil:Is,clipByValue:Rs,cos:Ts,cosh:Ns,erf:Os,exp:Ds,expm1:Ms,floor:Ps,log:Fs,log1p:Bs,logSigmoid:Ls,neg:zs,reciprocal:js,round:Ws,rsqrt:Hs,sigmoid:Vs,sign:Gs,isNaN:Us,isInf:Ks,isFinite:Xs,sin:Zs,sinh:qs,softplus:Ys,sqrt:Js,step:Qs,tan:$s,tanh:eu,all:zl,any:jl,argMax:Wl,argMin:Hl,logSumExp:Vl,max:Gl,mean:Ul,min:Kl,moments:Xl,sum:Zl,prod:ql,equal:Hu,equalStrict:Vu,greater:Gu,greaterEqual:Uu,greaterEqualStrict:Ku,greaterStrict:Xu,less:Zu,lessEqual:qu,lessEqualStrict:Yu,lessStrict:Ju,notEqual:Qu,notEqualStrict:$u,add:xu,addN:_u,addStrict:Cu,atan2:Eu,div:Su,divNoNan:Au,divStrict:ku,floorDiv:Iu,maximum:Ru,maximumStrict:Tu,minimum:Nu,minimumStrict:Ou,mod:Du,modStrict:Mu,mul:Pu,mulStrict:Fu,pow:Bu,powStrict:Lu,squaredDifferenceStrict:zu,sub:ju,subStrict:Wu,elu:Yl,leakyRelu:Jl,prelu:Ql,relu:$l,relu6:ec,selu:tc,logicalAnd:mu,logicalNot:gu,logicalOr:vu,logicalXor:yu,where:bu,whereAsync:wu,buffer:Jn,print:function(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},batchToSpaceND:Qn,broadcastTo:$n,cast:er,clone:tr,cumsum:nr,depthToSpace:rr,expandDims:ir,eye:or,multinomial:ar,oneHot:sr,pad:ur,pad1d:lr,pad2d:cr,pad3d:dr,pad4d:hr,rand:fr,randomNormal:pr,randomGamma:mr,randomUniform:gr,reshape:vr,spaceToBatchND:yr,squeeze:br,stack:wr,tile:xr,truncatedNormal:_r,unstack:Cr,setdiff1dAsync:function(e,t){return y(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l,c,d;return b(this,(function(h){switch(h.label){case 0:return n=rn(e,"x","setdiff1d"),r=rn(t,"y","setdiff1d"),P(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),P(1===n.rank,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),P(1===r.rank,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return i=h.sent(),[4,r.data()];case 2:for(o=h.sent(),a=new Set(o),s=0,c=0;c<i.length;c++)a.has(i[c])||s++;for(u=new Se([s],n.dtype),l=new Se([s],"int32"),c=0,d=0;c<i.length;c++)a.has(i[c])||(u.values[d]=i[c],l.values[d]=c,d++);return[2,[u.toTensor(),l.toTensor()]]}}))}))},fill:Rn,linspace:function(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return Ke.runKernelFunc((function(r){return r.linspace(e,t,n)}),{})},ones:kn,range:Tn,scalar:_n,tensor:wn,tensor1d:Cn,tensor2d:En,tensor3d:Sn,tensor4d:An,tensor5d:function(e,t,n){if(B(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=tn(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return xn(e,t,r,n)},tensor6d:function(e,t,n){if(B(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=tn(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return xn(e,t=t||r,r,n)},variable:function(e,t,n,r){return void 0===t&&(t=!0),Ke.makeVariable(e,t,n,r)},zeros:In,onesLike:Nn,zerosLike:On,transpose:nc,softmax:Hr,logSoftmax:Vr,localResponseNormalization:rc,norm:ic,gather:nl,unsortedSegmentSum:rl,basicLSTMCell:oc,multiRNNCell:ac,movingAverage:sc,stridedSlice:uc,topk:lc,scatterND:cc,fft:dc,ifft:hc,rfft:fc,irfft:pc,sparseToDense:gc,gatherND:vc,diag:yc,dropout:bc,hannWindow:_c,hammingWindow:Cc,frame:Ec,stft:Sc,inTopKAsync:function(e,t,n){return void 0===n&&(n=1),y(this,void 0,void 0,(function(){var r,i,o,a,s,u,l,c,d,h,f,p,m,g;return b(this,(function(v){switch(v.label){case 0:return r=rn(e,"predictions","inTopK"),i=rn(t,"targets","inTopK"),P(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),P(r.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank})),F(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],P(n>0&&n<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+n})),[4,r.data()];case 1:return a=v.sent(),[4,i.data()];case 2:for(s=v.sent(),u=[a.length/o,o],c=u[1],d=q("bool",l=u[0]),h=0;h<l;h++){for(f=h*c,p=a.subarray(f,f+c),m=[],g=0;g<p.length;g++)m.push({value:p[g],index:g});for(m.sort((function(e,t){return t.value-e.value})),d[h]=0,g=0;g<n;g++)if(m[g].index===s[h]){d[h]=1;break}}return e!==r&&r.dispose(),t!==i&&i.dispose(),[2,wn(d,i.shape,"bool")]}}))}))}});function id(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&P("complex64"!==e.dtype,(function(){return t+" does not support complex64 tensors."}))}))}function od(e,t,n,r){if("linear"===n)return e.linear(t);if("relu"===n)return e.relu(t);if("elu"===n)return e.elu(t);if("relu6"===n)return e.relu6(t);if("prelu"===n)return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var ad=function(e){function t(){var t=e.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new Gr(t,Ke),t}return v(t,e),t.prototype.write=function(e,t,n){this.firstUse&&(this.firstUse=!1,_().get("IS_NODE")&&en("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:e,dtype:n}),r},t.prototype.move=function(e,t,n,r){this.data.set(e,{values:t,dtype:r})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(e){return y(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this.readSync(e)]}))}))},t.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?di(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return ve(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return Jn(e.shape,e.dtype,n)},t.prototype.makeOutput=function(e,t,n){var r=this.write(e,t,n);return Ke.makeTensorFromDataId(r,t,n,this)},t.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return y(this,void 0,void 0,(function(){var t;return b(this,(function(n){return t=pe(),e(),[2,{kernelMs:pe()-t}]}))}))},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,t){var n=this.makeOutput(null,e.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:Ke.keep(e.clone()),imag:Ke.keep(t.clone())},n},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(id(e,"slice"),zr(e.shape,t,n)){var r=jr(t,e.strides),i=z(n);return wn(this.readSync(e.dataId).subarray(r,r+i),n,e.dtype)}for(var o=Jn(n,e.dtype),a=this.bufferSync(e),s=0;s<o.size;++s){var u=o.indexToLoc(s).map((function(e,n){return e+t[n]}));o.values[s]=a.get.apply(a,u)}return o.toTensor()},t.prototype.stridedSlice=function(e,t,n,r){id(e,"stridedSlice");var i=Fr(t,n,r);if(i.some((function(e){return 0===e})))return wn([],i);for(var o=Jn(i,e.dtype),a=this.bufferSync(e),s=0;s<o.size;s++){for(var u=o.indexToLoc(s),l=new Array(u.length),c=0;c<l.length;c++)l[c]=u[c]*r[c]+t[c];o.set.apply(o,[a.get.apply(a,l)].concat(u))}return o.toTensor()},t.prototype.diag=function(e){for(var t=this.readSync(e.dataId),n=Jn([e.size,e.size],e.dtype),r=n.values,i=0;i<t.length;i++)r[i*e.size+i]=t[i];return n.toTensor()},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),i=0,o=0;o<e.rank;o++)o!==t&&(r[i++]=e.shape[o]);var a=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var u=new Array(n);for(o=0;o<u.length;o++)a[t]=o,u[o]=this.slice(e,a,s).reshape(r);return u},t.prototype.reverse=function(e,t){id(e,"reverse");for(var n=Jn(e.shape,e.dtype),r=this.bufferSync(e),i=function(i){var o=n.indexToLoc(i),a=o.slice();t.forEach((function(t){return a[t]=e.shape[t]-1-a[t]})),n.set.apply(n,[r.get.apply(r,a)].concat(o))},o=0;o<n.size;o++)i(o);return n.toTensor()},t.prototype.concat=function(e,t){var n=this;if("complex64"===e[0].dtype){var r=e.map((function(e){return yn(e)})),i=e.map((function(e){return bn(e)}));return vn(this.concat(r,t),this.concat(i,t))}var o=e.map((function(e){var n=z(e.shape.slice(t));return e.as2D(-1,n)})),a=mn(o.map((function(e){return e.shape})),1),s=Jn(a,e[0].dtype).values;if(1===o[0].shape[0]){var u=0;o.forEach((function(e){s.set(n.readSync(e.dataId),u),u+=e.size}))}else{var l=0;o.forEach((function(e){for(var t=n.readSync(e.dataId),r=0,i=0;i<e.shape[0];++i)for(var o=i*a[1]+l,u=0;u<e.shape[1];++u)s[o+u]=t[r++];l+=e.shape[1]}))}var c=mn(e.map((function(e){return e.shape})),t);return wn(s,c,e[0].dtype)},t.prototype.neg=function(e){return id(e,"neg"),this.multiply(_n(-1),e)},t.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e+n,imag:t+r}})):this.broadcastedBinaryOp(e,t,Le(e.dtype,t.dtype),(function(e,t){return e+t}))},t.prototype.addN=function(e){var t=this;id(e,"addN");for(var n=e.map((function(e){return t.readSync(e.dataId)})),r=Jn(e[0].shape,e[0].dtype),i=r.values,o=0;o<e.length;o++)for(var a=n[o],s=0;s<i.length;s++)i[s]+=a[s];return r.toTensor()},t.prototype.softmax=function(e,t){var n=X([t],e.shape),r=this.max(e,n),i=ln(r.shape,n),o=this.subtract(e,r.reshape(i)),a=this.exp(o),s=this.sum(a,n).reshape(i);return this.realDivide(a,s)},t.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e-n,imag:t-r}})):this.broadcastedBinaryOp(e,t,Le(e.dtype,t.dtype),(function(e,t){return e-t}))},t.prototype.pow=function(e,t){return id([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.pow(e,t)}))},t.prototype.batchMatMul=function(e,t,n,r){id([e,t],"matMul");for(var i=n?e.shape[1]:e.shape[2],o=n?e.shape[2]:e.shape[1],a=r?t.shape[1]:t.shape[2],s=e.shape[0],u=this.readSync(e.dataId),l=this.readSync(t.dataId),c=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],d=c[0],h=c[1],f=c[2],p=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],m=p[0],g=p[1],v=p[2],y=o*a,b=Jn([s,o,a],e.dtype),w=b.values,x=this.blockSize,_=0;_<s;_++)for(var C=0;C<o;C+=x)for(var E=0;E<a;E+=x)for(var S=0;S<i;S+=x)for(var A=Math.min(C+x,o),k=Math.min(E+x,a),I=Math.min(S+x,i),R=C;R<A;R++)for(var T=E;T<k;T++){for(var N=0,O=S;O<I;O++)N+=u[_*d+R*h+O*f]*l[O*m+T*g+_*v];w[_*y+(R*a+T)]+=N}return b.toTensor()},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,i=e.transposeB,o=e.bias,a=e.activation,s=e.preluActivationWeights,u=this.batchMatMul(t,n,r,i);return o&&(u=this.add(u,o)),a&&(u=od(this,u,a,s)),u},t.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})):this.broadcastedBinaryOp(e,t,Le(e.dtype,t.dtype),(function(e,t){return e*t}))},t.prototype.realDivide=function(e,t){return id([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",(function(e,t){return e/t}))},t.prototype.floorDiv=function(e,t){return id([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",(function(e,t){return Math.floor(e/t)}))},t.prototype.sum=function(e,t){id(e,"sum"),cn("sum",t,e.rank);for(var n=un(e.shape,t),r=n[0],i=n[1],o=In(r,Le(e.dtype,"int32")),a=z(i),s=this.readSync(o.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*a,d=0,h=0;h<a;++h)d+=u[c+h];s[l]=d}return o},t.prototype.prod=function(e,t){id(e,"sum");for(var n=un(e.shape,t),r=n[0],i=n[1],o=In(r,Le(e.dtype,"int32")),a=z(i),s=this.readSync(o.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*a,d=1,h=0;h<a;++h)d*=u[c+h];s[l]=d}return o},t.prototype.unsortedSegmentSum=function(e,t,n){id(e,"unsortedSegmentSum");for(var r=[],i=e.rank-t.rank,o=0;o<i;++o)t=t.expandDims(o+1);for(o=0;o<n;++o){var a=_n(o,"int32"),s=Hu(a,t).asType("float32").mul(e).sum(0);r.push(s)}return wr(r)},t.prototype.argMin=function(e,t){id(e,"argMin");var n=[t];cn("argMin",n,e.rank);for(var r=un(e.shape,n),i=r[0],o=r[1],a=In(i,"int32"),s=z(o),u=this.readSync(a.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var d=c*s,h=l[d],f=0,p=0;p<s;++p){var m=l[d+p];m<h&&(h=m,f=p)}u[c]=f}return a},t.prototype.argMax=function(e,t){id(e,"argMax");var n=[t];cn("argMax",n,e.rank);for(var r=un(e.shape,n),i=r[0],o=r[1],a=In(i,"int32"),s=z(o),u=this.readSync(a.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var d=c*s,h=l[d],f=0,p=0;p<s;++p){var m=l[d+p];m>h&&(h=m,f=p)}u[c]=f}return a},t.prototype.cumsum=function(e,t,n,r){if(id(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var i=Le(e.dtype,"int32"),o=In(e.shape,i),a=this.readSync(o.dataId),s=this.readSync(e.dataId),u=e.shape[e.rank-1],l=r?function(e,t){return e+u-t-1}:function(e,t){return e+t},c=0;c<s.length;c+=u)for(var d=0;d<u;d++){var h=l(c,d);if(0===d)a[h]=n?0:s[h];else{var f=l(c,d-1);a[h]=n?s[f]+a[f]:s[h]+a[f]}}return o},t.prototype.equal=function(e,t){return id([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e===t?1:0}))},t.prototype.notEqual=function(e,t){return id([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e!==t?1:0}))},t.prototype.less=function(e,t){return id([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<t?1:0}))},t.prototype.lessEqual=function(e,t){return id([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<=t?1:0}))},t.prototype.greater=function(e,t){return id([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>t?1:0}))},t.prototype.greaterEqual=function(e,t){return id([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>=t?1:0}))},t.prototype.logicalNot=function(e){id(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return this.makeOutput(n,e.shape,"bool")},t.prototype.logicalAnd=function(e,t){return id([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e&&t}))},t.prototype.logicalOr=function(e,t){return id([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e||t}))},t.prototype.select=function(e,t,n){id([e,t,n],"select");for(var r=this.readSync(e.dataId),i=this.readSync(t.dataId),o=this.readSync(n.dataId),a=In(t.shape,Le(t.dtype,n.dtype)),s=this.readSync(a.dataId),u=0,l=0===e.rank||e.rank>1||1===t.rank?1:z(t.shape.slice(1)),c=0;c<r.length;c++)for(var d=0;d<l;d++)1===r[c]?s[u++]=i[c]:s[u++]=o[c];return a},t.prototype.where=function(e){id([e],"where");var t=this.readSync(e.dataId);return Ai(e.shape,t)},t.prototype.topk=function(e,t,n){return id(e,"topk"),Si(this.readSync(e.dataId),e.shape,e.dtype,t)},t.prototype.min=function(e,t){id(e,"min"),cn("min",t,e.rank);for(var n=un(e.shape,t),r=n[0],i=n[1],o=In(r,e.dtype),a=z(i),s=this.readSync(o.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*a,d=u[c],h=0;h<a;++h){var f=u[c+h];f<d&&(d=f)}s[l]=d}return o},t.prototype.minimum=function(e,t){return id([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.min(e,t)}))},t.prototype.mod=function(e,t){return id([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}))},t.prototype.max=function(e,t){id(e,"max"),cn("max",t,e.rank);for(var n=un(e.shape,t),r=n[0],i=n[1],o=In(r,e.dtype),a=z(i),s=this.readSync(o.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*a,d=u[c],h=0;h<a;++h){var f=u[c+h];f>d&&(d=f)}s[l]=d}return o},t.prototype.maximum=function(e,t){return id([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.max(e,t)}))},t.prototype.all=function(e,t){id(e,"all"),cn("all",t,e.rank);for(var n=un(e.shape,t),r=n[0],i=n[1],o=In(r,e.dtype),a=z(i),s=this.readSync(o.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*a,d=u[c],h=0;h<a;++h){var f=u[c+h];d=d&&f}s[l]=d}return o},t.prototype.any=function(e,t){id(e,"any"),cn("any",t,e.rank);for(var n=un(e.shape,t),r=n[0],i=n[1],o=In(r,e.dtype),a=z(i),s=this.readSync(o.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*a,d=u[c],h=0;h<a;++h){var f=u[c+h];d=d||f}s[l]=d}return o},t.prototype.squaredDifference=function(e,t){return id([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e-t;return n*n}))},t.prototype.ceil=function(e){id(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.floor=function(e){id(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.sign=function(e){id(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return this.makeOutput(n,e.shape,"float32")},t.prototype.isNaN=function(e){id(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isInf=function(e){id(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isFinite=function(e){id(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.round=function(e){id(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=Math.floor(t[r]);t[r]-i<.5?n[r]=Math.floor(t[r]):t[r]-i>.5?n[r]=Math.ceil(t[r]):n[r]=i%2==0?i:i+1}return this.makeOutput(n,e.shape,"float32")},t.prototype.exp=function(e){id(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.expm1=function(e){id(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.log=function(e){id(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=Math.log(i)}return this.makeOutput(n,e.shape,"float32")},t.prototype.log1p=function(e){id(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=Math.log1p(i)}return this.makeOutput(n,e.shape,"float32")},t.prototype.sqrt=function(e){id(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=Math.sqrt(i)}return this.makeOutput(n,e.shape,"float32")},t.prototype.rsqrt=function(e){id(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=1/Math.sqrt(i)}return this.makeOutput(n,e.shape,"float32")},t.prototype.reciprocal=function(e){id(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return this.makeOutput(n,e.shape,"float32")},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){id(e,"relu");for(var t=In(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.max(0,r[i]);return t},t.prototype.relu6=function(e){id(e,"relu");for(var t=In(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.min(Math.max(0,r[i]),6);return t},t.prototype.prelu=function(e,t){return id([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return e<0?t*e:e}))},t.prototype.elu=function(e){id(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=n[r];t[r]=i>=0?i:Math.exp(i)-1}return this.makeOutput(t,e.shape,"float32")},t.prototype.eluDer=function(e,t){id([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=this.readSync(e.dataId),o=0;o<r.length;++o){var a=r[o];n[o]=a>=1?i[o]:i[o]*(a+1)}return this.makeOutput(n,t.shape,"float32")},t.prototype.selu=function(e){id(e,"selu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=n[r];t[r]=i>=0?1.0507009873554805*i:1.7580993408473768*(Math.exp(i)-1)}return this.makeOutput(t,e.shape,"float32")},t.prototype.clip=function(e,t,n){id(e,"clip");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var a=i[o];r[o]=a>n?n:a<t?t:a}return this.makeOutput(r,e.shape,"float32")},t.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var i=n[2*r],o=n[2*r+1];t[r]=Math.hypot(i,o)}return this.makeOutput(t,e.shape,"float32")},t.prototype.int=function(e){id(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return this.makeOutput(t,e.shape,"int32")},t.prototype.sigmoid=function(e){id(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(t,e.shape,"float32")},t.prototype.softplus=function(e){id(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i){var o,a=r[i]>-t,s=r[i]<t,u=Math.exp(r[i]);o=s?u:a?r[i]:Math.log(1+u),n[i]=o}return this.makeOutput(n,e.shape,"float32")},t.prototype.sin=function(e){id(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cos=function(e){id(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tan=function(e){id(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asin=function(e){id(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acos=function(e){id(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan=function(e){id(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan2=function(e,t){return id([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.atan2(e,t)}))},t.prototype.sinh=function(e){id(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cosh=function(e){id(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tanh=function(e){id(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=H(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asinh=function(e){id(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acosh=function(e){id(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atanh=function(e){id(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.erf=function(e){id(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=Math.sign(n[r]),o=Math.abs(n[r]),a=1/(1+.3275911*o);t[r]=i*(1-((((1.061405429*a-1.453152027)*a+1.421413741)*a-.284496736)*a+.254829592)*a*Math.exp(-o*o))}return this.makeOutput(t,e.shape,"float32")},t.prototype.step=function(e,t){void 0===t&&(t=0),id(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i){var o=r[i];isNaN(o)?n[i]=NaN:n[i]=o>0?1:t}return this.makeOutput(n,e.shape,"float32")},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,i=e.bias,o=e.activation,a=e.preluActivationWeights,s=this.conv2d(t,n,r);return i&&(s=this.add(s,i)),o&&(s=od(this,s,o,a)),s},t.prototype.conv2d=function(e,t,n){id([e,t],"conv2d");for(var r=n.filterHeight,i=n.filterWidth,o=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l="channelsLast"===n.dataFormat,c=Jn(n.outShape,e.dtype),d=e.strides[0],h=l?e.strides[1]:e.strides[2],f=l?e.strides[2]:1,p=l?1:e.strides[1],m=c.strides[0],g=l?c.strides[1]:c.strides[2],v=l?c.strides[2]:1,y=l?1:c.strides[1],b=this.readSync(e.dataId),w=this.readSync(t.dataId),x=c.values,_=0;_<n.batchSize;++_)for(var C=_*d,E=_*m,S=0;S<n.outHeight;++S)for(var A=E+S*g,k=S*n.strideHeight-u,I=0;I<r;I++){var R=k+I*o;if(!(R<0||R>=n.inHeight))for(var T=I*t.strides[0],N=C+R*h,O=0;O<n.outWidth;++O)for(var D=A+O*v,M=O*n.strideWidth-s,P=0;P<i;P++){var F=M+P*a;if(!(F<0||F>=n.inWidth))for(var B=N+F*f,L=T+P*t.strides[1],z=0;z<n.inChannels;++z){for(var j=b[B+z*p],W=0;W<n.outChannels;++W)x[D+W*y]+=j*w[L+W];L+=n.outChannels}}}return c.toTensor()},t.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,i=n.filterHeight,o=n.filterWidth,a=n.dilationDepth,s=n.dilationHeight,u=n.dilationWidth,l=n.padInfo.front,c=n.padInfo.left,d=n.padInfo.top,h=Jn(n.outShape,e.dtype),f=this.readSync(e.dataId),p=this.readSync(t.dataId),m=h.values,g=0;g<n.batchSize;++g)for(var v=g*e.strides[0],y=g*h.strides[0],b=0;b<n.outDepth;++b)for(var w=y+b*h.strides[1],x=b*n.strideDepth-l,_=0;_<r;_++){var C=x+_*a;if(!(C<0||C>=n.inDepth))for(var E=_*t.strides[0],S=v+C*e.strides[1],A=0;A<n.outHeight;++A)for(var k=w+A*h.strides[2],I=A*n.strideHeight-d,R=0;R<i;R++){var T=I+R*s;if(!(T<0||T>=n.inHeight))for(var N=E+R*t.strides[1],O=S+T*e.strides[2],D=0;D<n.outWidth;++D)for(var M=k+D*n.outChannels,P=D*n.strideWidth-c,F=0;F<o;F++){var B=P+F*u;if(!(B<0||B>=n.inWidth))for(var L=N+F*t.strides[2],z=O+B*n.inChannels,j=L,W=0;W<n.inChannels;++W){for(var H=f[z+W],V=0;V<n.outChannels;++V)m[M+V]+=H*p[j+V];j+=n.outChannels}}}}return h.toTensor()},t.prototype.conv2dDerInput=function(e,t,n){id([e,t],"conv2dDerInput");for(var r=Jn(n.inShape,"float32"),i=r.values,o=this.readSync(e.dataId),a=this.readSync(t.dataId),s=t.strides,u=s[0],l=s[1],c=s[2],d=n.batchSize,h=n.filterHeight,f=n.filterWidth,p=n.inChannels,m=n.inHeight,g=n.inWidth,v=n.outChannels,y=n.outHeight,b=n.outWidth,w=n.strideHeight,x=n.strideWidth,_=n.dataFormat,C=h-1-n.padInfo.top,E=f-1-n.padInfo.left,S="channelsLast"===_,A=r.strides[0],k=S?r.strides[1]:r.strides[2],I=S?r.strides[2]:1,R=S?1:r.strides[1],T=e.strides[0],N=S?e.strides[1]:e.strides[2],O=S?e.strides[2]:1,D=S?1:e.strides[1],M=0;M<d;++M)for(var P=0;P<p;++P)for(var F=0;F<m;++F)for(var B=F-C,L=Math.max(0,Math.ceil(B/w)),z=Math.min(y,(h+B)/w),j=0;j<g;++j){for(var W=j-E,H=Math.max(0,Math.ceil(W/x)),V=Math.min(b,(f+W)/x),G=0,U=L;U<z;++U)for(var K=U*w-B,X=H;X<V;++X)for(var Z=T*M+N*U+O*X,q=u*(h-1-K)+l*(f-1-(X*x-W))+c*P,Y=0;Y<v;++Y)G+=o[Z+D*Y]*a[q+Y];i[A*M+k*F+I*j+R*P]=G}return r.toTensor()},t.prototype.conv3dDerInput=function(e,t,n){for(var r=Jn(n.inShape,"float32"),i=r.values,o=r.strides,a=o[0],s=o[1],u=o[2],l=o[3],c=this.readSync(e.dataId),d=e.strides,h=d[0],f=d[1],p=d[2],m=d[3],g=this.readSync(t.dataId),v=t.strides,y=v[0],b=v[1],w=v[2],x=v[3],_=n.batchSize,C=n.filterDepth,E=n.filterHeight,S=n.filterWidth,A=n.inChannels,k=n.inDepth,I=n.inHeight,R=n.inWidth,T=n.outChannels,N=n.outDepth,O=n.outHeight,D=n.outWidth,M=n.strideDepth,P=n.strideHeight,F=n.strideWidth,B=C-1-n.padInfo.front,L=E-1-n.padInfo.top,z=S-1-n.padInfo.left,j=0;j<_;++j)for(var W=0;W<A;++W)for(var H=0;H<k;++H)for(var V=H-B,G=Math.max(0,Math.ceil(V/M)),U=Math.min(N,(C+V)/M),K=0;K<I;++K)for(var X=K-L,Z=Math.max(0,Math.ceil(X/P)),q=Math.min(O,(E+X)/P),Y=0;Y<R;++Y){for(var J=Y-z,Q=Math.max(0,Math.ceil(J/F)),$=Math.min(D,(S+J)/F),ee=0,te=G;te<U;++te)for(var ne=te*M-V,re=Z;re<q;++re)for(var ie=re*P-X,oe=Q;oe<$;++oe)for(var ae=h*j+f*te+p*re+m*oe,se=y*(C-1-ne)+b*(E-1-ie)+w*(S-1-(oe*F-J))+x*W,ue=0;ue<T;++ue)ee+=c[ae+ue]*g[se+ue];i[a*j+s*H+u*K+l*Y+W]=ee}return r.toTensor()},t.prototype.conv2dDerFilter=function(e,t,n){id([e,t],"conv2dDerFilter");for(var r=n.strideHeight,i=n.strideWidth,o=n.filterHeight,a=n.filterWidth,s="channelsLast"===n.dataFormat,u=Jn(n.filterShape,"float32"),l=n.padInfo.left,c=n.padInfo.top,d=this.bufferSync(e),h=this.bufferSync(t),f=0;f<o;++f)for(var p=Math.max(0,Math.ceil((c-f)/r)),m=Math.min(n.outHeight,(n.inHeight+c-f)/r),g=0;g<a;++g)for(var v=Math.max(0,Math.ceil((l-g)/i)),y=Math.min(n.outWidth,(n.inWidth+l-g)/i),b=0;b<n.inChannels;++b)for(var w=0;w<n.outChannels;++w){for(var x=0,_=0;_<n.batchSize;++_)for(var C=p;C<m;++C)for(var E=f+C*r-c,S=v;S<y;++S){var A=g+S*i-l;x+=s?d.get(_,E,A,b)*h.get(_,C,S,w):d.get(_,b,E,A)*h.get(_,w,C,S)}u.set(x,f,g,b,w)}return u.toTensor()},t.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,i=n.strideHeight,o=n.strideWidth,a=n.filterDepth,s=n.filterHeight,u=n.filterWidth,l=Jn(n.filterShape,"float32"),c=l.values,d=l.strides,h=d[0],f=d[1],p=d[2],m=d[3],g=this.readSync(t.dataId),v=t.strides,y=v[0],b=v[1],w=v[2],x=v[3],_=this.readSync(e.dataId),C=e.strides,E=C[0],S=C[1],A=C[2],k=C[3],I=n.padInfo.front,R=n.padInfo.left,T=n.padInfo.top,N=0;N<a;++N)for(var O=Math.max(0,Math.ceil((I-N)/r)),D=Math.min(n.outDepth,(n.inDepth+I-N)/r),M=N*h,P=0;P<s;++P)for(var F=Math.max(0,Math.ceil((T-P)/i)),B=Math.min(n.outHeight,(n.inHeight+T-P)/i),L=P*f+M,z=0;z<u;++z)for(var j=Math.max(0,Math.ceil((R-z)/o)),W=Math.min(n.outWidth,(n.inWidth+R-z)/o),H=z*p+L,V=0;V<n.inChannels;++V)for(var G=V*m+H,U=0;U<n.outChannels;++U){for(var K=0,X=0;X<n.batchSize;++X)for(var Z=X*E,q=X*y,Y=O;Y<D;++Y)for(var J=(N+Y*r-I)*S+Z,Q=Y*b+q,$=F;$<B;++$)for(var ee=(P+$*i-T)*A+J,te=$*w+Q,ne=j;ne<W;++ne){var re=ne*x+te;K+=_[(z+ne*o-R)*k+ee+V]*g[re+U]}c[G+U]=K}return l.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var t=e.input,n=e.filter,r=e.convInfo,i=e.bias,o=e.activation,a=e.preluActivationWeights,s=this.depthwiseConv2D(t,n,r);return i&&(s=this.add(s,i)),o&&(s=od(this,s,o,a)),s},t.prototype.depthwiseConv2D=function(e,t,n){id([e,t],"depthwiseConv2D");for(var r=n.filterHeight,i=n.filterWidth,o=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=n.outChannels/n.inChannels,c=Jn(n.outShape,e.dtype),d=this.readSync(e.dataId),h=this.readSync(t.dataId),f=c.values,p=0;p<n.batchSize;++p)for(var m=p*e.strides[0],g=p*c.strides[0],v=0;v<n.outHeight;++v)for(var y=g+v*c.strides[1],b=v*n.strideHeight-s,w=0;w<r;++w){var x=b+w*o;if(!(x<0||x>=n.inHeight))for(var _=w*t.strides[0],C=m+x*e.strides[1],E=0;E<n.outWidth;++E)for(var S=y+E*c.strides[2],A=E*n.strideWidth-u,k=0;k<i;++k){var I=A+k*a;if(!(I<0||I>=n.inWidth))for(var R=_+k*t.strides[1],T=C+I*n.inChannels,N=S,O=R,D=0;D<n.inChannels;++D){for(var M=d[T+D],P=0;P<l;++P)f[N+P]+=M*h[O+P];N+=l,O+=l}}}return c.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,t,n){id([e,t],"depthwiseConv2DDerInput");for(var r=Jn(n.inShape,"float32"),i=r.values,o=r.strides,a=o[0],s=o[1],u=o[2],l=this.readSync(e.dataId),c=e.strides,d=c[0],h=c[1],f=c[2],p=this.readSync(t.dataId),m=t.strides,g=m[0],v=m[1],y=m[2],b=n.batchSize,w=n.filterHeight,x=n.filterWidth,_=n.inChannels,C=n.inHeight,E=n.inWidth,S=n.outChannels,A=n.outHeight,k=n.outWidth,I=n.strideHeight,R=n.strideWidth,T=w-1-n.padInfo.top,N=x-1-n.padInfo.left,O=S/_,D=0;D<b;++D)for(var M=0;M<_;++M)for(var P=0;P<C;++P)for(var F=P-T,B=Math.max(0,Math.ceil(F/I)),L=Math.min(A,(w+F)/I),z=0;z<E;++z){for(var j=z-N,W=Math.max(0,Math.ceil(j/R)),H=Math.min(k,(x+j)/R),V=0,G=B;G<L;++G)for(var U=G*I-F,K=W;K<H;++K)for(var X=d*D+h*G+f*K,Z=g*(w-1-U)+v*(x-1-(K*R-j))+y*M,q=0;q<O;++q)V+=l[X+(M*O+q)]*p[Z+q];i[a*D+s*P+u*z+M]=V}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){id([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,i=n.strideWidth,o=n.filterHeight,a=n.filterWidth,s=Jn(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=n.outChannels/n.inChannels,d=this.bufferSync(e),h=this.bufferSync(t),f=0;f<o;++f)for(var p=Math.max(0,Math.ceil((l-f)/r)),m=Math.min(n.outHeight,(n.inHeight+l-f)/r),g=0;g<a;++g)for(var v=Math.max(0,Math.ceil((u-g)/i)),y=Math.min(n.outWidth,(n.inWidth+u-g)/i),b=0;b<n.outChannels;++b){for(var w=Math.trunc(b/c),x=b%c,_=0,C=0;C<n.batchSize;++C)for(var E=p;E<m;++E)for(var S=f+E*r-l,A=v;A<y;++A){var k=g+A*i-u;_+=d.get(C,S,k,w)*h.get(C,E,A,b)}s.set(_,f,g,w,x)}return s.toTensor()},t.prototype.tile=function(e,t){return id(e,"tile"),Ei(this.bufferSync(e),t)},t.prototype.pad=function(e,t,n){id(e,"pad");var r=t.map((function(t,n){return t[0]+e.shape[n]+t[1]})),i=t.map((function(e){return e[0]})),o=this.bufferSync(e),a=Jn(r,e.dtype);0!==n&&a.values.fill(n);for(var s=0;s<e.size;s++){var u=o.indexToLoc(s),l=u.map((function(e,t){return e+i[t]}));a.set.apply(a,[o.get.apply(o,u)].concat(l))}return a.toTensor()},t.prototype.transpose=function(e,t){id(e,"transpose");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];var i=this.readSync(e.dataId),o=Jn(n,e.dtype),a=this.bufferSync(e);for(r=0;r<e.size;++r){for(var s=a.indexToLoc(r),u=new Array(s.length),l=0;l<u.length;l++)u[l]=s[t[l]];var c=o.locToIndex(u);o.values[c]=i[r]}return o.toTensor()},t.prototype.gather=function(e,t,n){id([e,t],"gather");var r=e.shape.slice(),i=this.readSync(t.dataId);r[n]=i.length;for(var o=Jn(r,e.dtype),a=this.bufferSync(e),s=0;s<o.size;++s){var u=o.indexToLoc(s),l=u.slice();l[n]=i[u[n]];var c=a.locToIndex(l);o.values[s]=a.values[c]}return o.toTensor()},t.prototype.batchToSpaceND=function(e,t,n){id([e],"batchToSpaceND");var r=t.reduce((function(e,t){return e*t})),i=Er(e.shape,t,r),o=Sr(i.length,t.length),a=Ar(e.shape,t,r),s=kr(n,t.length),u=Ir(a,n,t.length);return e.reshape(i).transpose(o).reshape(a).slice(s,u)},t.prototype.spaceToBatchND=function(e,t,n){id([e],"spaceToBatchND");var r=t.reduce((function(e,t){return e*t})),i=[[0,0]];i.push.apply(i,n);for(var o=1+t.length;o<e.shape.length;++o)i.push([0,0]);var a=e.pad(i),s=Er(a.shape,t,r,!1),u=Sr(s.length,t.length,!1),l=Ar(a.shape,t,r,!1);return a.reshape(s).transpose(u).reshape(l)},t.prototype.pool=function(e,t,n){id(e,"pool");for(var r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=t.padInfo.top,c=t.padInfo.left,d="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,h=this.readSync(e.dataId),f=Jn(t.outShape,e.dtype),p=f.values,m=t.outShape[1]*t.outShape[2]*t.outShape[3],g=t.outShape[2]*t.outShape[3],v=t.outShape[3],y=0;y<t.batchSize;++y)for(var b=y*m,w=y*e.strides[0],x=0;x<t.inChannels;++x)for(var _=0;_<t.outHeight;++_)for(var C=_*r-l,E=Math.max(0,C),S=Math.min(t.inHeight,s+C),A=b+_*g,k=0;k<t.outWidth;++k){for(var I=k*i-c,R=Math.max(0,I),T=Math.min(t.inWidth,u+I),N=d,O=0,D=0,M=E;M<S;M+=o){for(var P=w+M*e.strides[1],F=R;F<T;F+=a){var B=h[P+F*e.strides[2]+x];"max"===n&&B>N?N=B:"avg"===n&&(O+=B,D++)}if(isNaN(N))break}p[A+k*v+x]="avg"===n?O/D:N}return f.toTensor()},t.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},t.prototype.maxPoolPositions=function(e,t){for(var n=Jn(t.outShape,"int32"),r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=t.padInfo.top,c=t.padInfo.left,d=this.bufferSync(e),h=0;h<t.batchSize;++h)for(var f=0;f<t.inChannels;++f)for(var p=0;p<t.outHeight;++p){for(var m=p*r-l,g=m;g<0;)g+=o;for(var v=Math.min(t.inHeight,s+m),y=0;y<t.outWidth;++y){for(var b=y*i-c,w=b;w<0;)w+=a;for(var x=Math.min(t.inWidth,u+b),_=Number.NEGATIVE_INFINITY,C=-1,E=g;E<v;E+=o)for(var S=E-m,A=w;A<x;A+=a){var k=A-b,I=d.get(h,E,A,f);I>_&&(_=I,C=S*u+k)}n.set(C,h,p,y,f)}}return n.toTensor()},t.prototype.maxPoolBackprop=function(e,t,n,r){id([t,n],"maxPoolBackprop");for(var i=this.maxPoolPositions(t,r),o=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,d=c-1-r.padInfo.left,h=l-1-r.padInfo.top,f=Jn(t.shape,"float32"),p=this.bufferSync(i),m=this.bufferSync(e),g=0;g<r.batchSize;++g)for(var v=0;v<r.inChannels;++v)for(var y=0;y<r.inHeight;++y)for(var b=0;b<r.inWidth;++b){for(var w=y-h,x=b-d,_=0,C=0;C<l;C+=s){var E=(w+C)/o;if(!(E<0||E>=r.outHeight||Math.floor(E)!==E))for(var S=0;S<c;S+=u){var A=(x+S)/a;if(!(A<0||A>=r.outWidth||Math.floor(A)!==A)){var k=l*c-1-p.get(g,E,A,v)===C*c+S?1:0;0!==k&&(_+=m.get(g,E,A,v)*k)}}}f.set(_,g,y,b,v)}return f.toTensor()},t.prototype.avgPoolBackprop=function(e,t,n){id([e,t],"avgPoolBackprop");for(var r=n.strideHeight,i=n.strideWidth,o=n.filterHeight,a=n.filterWidth,s=n.dilationHeight,u=n.dilationWidth,l=n.effectiveFilterHeight,c=n.effectiveFilterWidth,d=c-1-n.padInfo.left,h=l-1-n.padInfo.top,f=Jn(t.shape,"float32"),p=1/(o*a),m=this.bufferSync(e),g=0;g<n.batchSize;++g)for(var v=0;v<n.inChannels;++v)for(var y=0;y<n.inHeight;++y)for(var b=0;b<n.inWidth;++b){for(var w=y-h,x=b-d,_=0,C=0;C<l;C+=s){var E=(w+C)/r;if(!(E<0||E>=n.outHeight||Math.floor(E)!==E))for(var S=0;S<c;S+=u){var A=(x+S)/i;A<0||A>=n.outWidth||Math.floor(A)!==A||(_+=m.get(g,E,A,v))}}f.set(_*p,g,y,b,v)}return f.toTensor()},t.prototype.pool3d=function(e,t,n){id(e,"pool3d");for(var r=t.strideDepth,i=t.strideHeight,o=t.strideWidth,a=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,f=t.padInfo.top,p=t.padInfo.left,m="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=this.readSync(e.dataId),v=Jn(t.outShape,e.dtype),y=v.values,b=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],w=t.outShape[2]*t.outShape[3]*t.outShape[4],x=t.outShape[3]*t.outShape[4],_=t.outShape[4],C=0;C<t.batchSize;++C)for(var E=C*b,S=C*e.strides[0],A=0;A<t.inChannels;++A)for(var k=0;k<t.outDepth;++k){for(var I=k*r-h,R=I;R<0;)R+=a;for(var T=Math.min(t.inDepth,l+I),N=E+k*w,O=0;O<t.outHeight;++O){for(var D=O*i-f,M=D;M<0;)M+=s;for(var P=Math.min(t.inHeight,c+D),F=N+O*x,B=0;B<t.outWidth;++B){for(var L=B*o-p,z=L;z<0;)z+=u;for(var j=Math.min(t.inWidth,d+L),W=F+B*_,H=m,V=0,G=0,U=R;U<T;U+=a){for(var K=S+U*e.strides[1],X=M;X<P;X+=s){for(var Z=K+X*e.strides[2],q=z;q<j;q+=u){var Y=g[Z+q*e.strides[3]+A];if("max"===n&&Y>H?H=Y:"avg"===n&&(V+=Y,G++),isNaN(H))break}if(isNaN(H))break}if(isNaN(H))break}y[W+A]="avg"===n?V/G:H}}}return v.toTensor()},t.prototype.avgPool3d=function(e,t){return id(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,t,n){id([e,t],"avgPool3dBackprop");for(var r=n.strideDepth,i=n.strideHeight,o=n.strideWidth,a=n.filterDepth,s=n.filterHeight,u=n.filterWidth,l=n.dilationDepth,c=n.dilationHeight,d=n.dilationWidth,h=n.effectiveFilterDepth,f=n.effectiveFilterHeight,p=n.effectiveFilterWidth,m=h-1-n.padInfo.front,g=p-1-n.padInfo.left,v=f-1-n.padInfo.top,y=Jn(t.shape,"float32"),b=1/(a*s*u),w=this.bufferSync(e),x=0;x<n.batchSize;++x)for(var _=0;_<n.inChannels;++_)for(var C=0;C<n.inDepth;++C)for(var E=0;E<n.inHeight;++E)for(var S=0;S<n.inWidth;++S){for(var A=C-m,k=E-v,I=S-g,R=0,T=0;T<h;T+=l){var N=(A+T)/r;if(!(N<0||N>=n.outDepth||Math.floor(N)!==N))for(var O=0;O<f;O+=c){var D=(k+O)/i;if(!(D<0||D>=n.outHeight||Math.floor(D)!==D))for(var M=0;M<p;M+=d){var P=(I+M)/o;P<0||P>=n.outWidth||Math.floor(P)!==P||(R+=w.get(x,N,D,P,_))}}}y.set(R*b,x,C,E,S,_)}return y.toTensor()},t.prototype.maxPool3d=function(e,t){return id(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,t){for(var n=Jn(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,o=t.strideWidth,a=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,f=t.padInfo.top,p=t.padInfo.left,m=this.bufferSync(e),g=0;g<t.batchSize;++g)for(var v=0;v<t.inChannels;++v)for(var y=0;y<t.outDepth;++y){for(var b=y*r-h,w=b;w<0;)w+=a;for(var x=Math.min(t.inDepth,l+b),_=0;_<t.outHeight;++_){for(var C=_*i-f,E=C;E<0;)E+=s;for(var S=Math.min(t.inHeight,c+C),A=0;A<t.outWidth;++A){for(var k=A*o-p,I=k;I<0;)I+=u;for(var R=Math.min(t.inWidth,d+k),T=Number.NEGATIVE_INFINITY,N=-1,O=w;O<x;O+=a)for(var D=O-b,M=E;M<S;M+=s)for(var P=M-C,F=I;F<R;F+=u){var B=F-k,L=m.get(g,O,M,F,v);L>=T&&(T=L,N=D*c*d+P*c+B)}n.set(N,g,y,_,A,v)}}}return n.toTensor()},t.prototype.maxPool3dBackprop=function(e,t,n,r){id([t,n],"maxPool3dBackprop");for(var i=this.maxPool3dPositions(t,r),o=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,h=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=d-1-r.padInfo.front,m=f-1-r.padInfo.left,g=h-1-r.padInfo.top,v=Jn(t.shape,"float32"),y=this.bufferSync(i),b=this.bufferSync(e),w=0;w<r.batchSize;++w)for(var x=0;x<r.inChannels;++x)for(var _=0;_<r.inDepth;++_)for(var C=0;C<r.inHeight;++C)for(var E=0;E<r.inWidth;++E){for(var S=_-p,A=C-g,k=E-m,I=0,R=0;R<d;R+=u){var T=(S+R)/o;if(!(T<0||T>=r.outDepth||Math.floor(T)!==T))for(var N=0;N<h;N+=l){var O=(A+N)/a;if(!(O<0||O>=r.outHeight||Math.floor(O)!==O))for(var D=0;D<f;D+=c){var M=(k+D)/s;if(!(M<0||M>=r.outWidth||Math.floor(M)!==M)){var P=d*h*f-1-y.get(w,T,O,M,x)===R*h*f+N*f+D?1:0;0!==P&&(I+=b.get(w,T,O,M,x)*P)}}}}v.set(I,w,_,C,E,x)}return v.toTensor()},t.prototype.cast=function(e,t){return ui(e,t,this)},t.prototype.reshape=function(e,t){return li(e,t)},t.prototype.avgPool=function(e,t){return id(e,"avgPool"),this.pool(e,t,"avg").toFloat()},t.prototype.resizeBilinear=function(e,t,n,r){id(e,"resizeBilinear");for(var i=e.shape,o=i[0],a=i[1],s=i[2],u=i[3],l=this.readSync(e.dataId),c=new Float32Array(z([o,t,n,u])),d=[r&&t>1?a-1:a,r&&n>1?s-1:s],h=[r&&t>1?t-1:t,r&&n>1?n-1:n],f=0,p=d[0]/h[0],m=d[1]/h[1],g=0;g<o;g++)for(var v=0;v<t;v++)for(var y=p*v,b=Math.floor(y),w=y-b,x=Math.min(a-1,Math.ceil(y)),_=g*e.strides[0]+b*e.strides[1],C=g*e.strides[0]+x*e.strides[1],E=0;E<n;E++)for(var S=m*E,A=Math.floor(S),k=S-A,I=Math.min(s-1,Math.ceil(S)),R=_+A*e.strides[2],T=C+A*e.strides[2],N=_+I*e.strides[2],O=C+I*e.strides[2],D=0;D<u;D++){var M=l[R+D],P=l[T+D],F=M+(l[N+D]-M)*k,B=F+(P+(l[O+D]-P)*k-F)*w;c[f++]=B}return wn(c,[o,t,n,u])},t.prototype.resizeBilinearBackprop=function(e,t,n){id([e,t],"resizeBilinearBackprop");for(var r=t.shape,i=r[0],o=r[1],a=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],d=new Float32Array(i*o*a*s),h=[n&&l>1?o-1:o,n&&c>1?a-1:a],f=[n&&l>1?l-1:l,n&&c>1?c-1:c],p=h[0]/f[0],m=h[1]/f[1],g=this.readSync(e.dataId),v=0,y=0;y<i;y++)for(var b=y*t.strides[0],w=0;w<l;w++)for(var x=w*p,_=Math.floor(x),C=Math.min(Math.ceil(x),o-1),E=b+_*t.strides[1],S=b+C*t.strides[1],A=x-_,k=1-A,I=0;I<c;I++)for(var R=I*m,T=Math.floor(R),N=Math.min(Math.ceil(R),a-1),O=R-T,D=1-O,M=E+T*t.strides[2],P=E+N*t.strides[2],F=S+T*t.strides[2],B=S+N*t.strides[2],L=k*D,z=k*O,j=A*D,W=A*O,H=0;H<s;H++){var V=g[v++];d[M+H]+=V*L,d[P+H]+=V*z,d[F+H]+=V*j,d[B+H]+=V*W}return An(d,[i,a,o,s],t.dtype)},t.prototype.resizeNearestNeighbor=function(e,t,n,r){id(e,"resizeNearestNeighbor");for(var i=e.shape,o=i[0],a=i[1],s=i[2],u=i[3],l=this.readSync(e.dataId),c=new Float32Array(o*t*n*u),d=[r&&t>1?a-1:a,r&&n>1?s-1:s],h=[r&&t>1?t-1:t,r&&n>1?n-1:n],f=d[0]/h[0],p=d[1]/h[1],m=0,g=0;g<o;g++)for(var v=g*e.strides[0],y=0;y<t;y++)for(var b=f*y,w=v+Math.min(a-1,r?Math.round(b):Math.floor(b))*e.strides[1],x=0;x<n;x++)for(var _=p*x,C=w+Math.min(s-1,r?Math.round(_):Math.floor(_))*e.strides[2],E=0;E<u;E++){var S=l[C+E];c[m++]=S}return wn(c,[o,t,n,u],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){id([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,i=r[0],o=r[1],a=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],d=new Float32Array(i*o*a*s),h=this.readSync(e.dataId),f=[n&&l>1?o-1:o,n&&c>1?a-1:a],p=[n&&l>1?l-1:l,n&&c>1?c-1:c],m=f[0]/p[0],g=f[1]/p[1],v=1/m,y=1/g,b=2*Math.ceil(v)+2,w=2*Math.ceil(y)+2,x=0;x<i;x++)for(var _=x*t.strides[0],C=0;C<o;C++)for(var E=_+C*t.strides[1],S=Math.floor(C*v),A=Math.floor(S-b/2),k=0;k<a;k++)for(var I=E+k*t.strides[2],R=Math.floor(k*y),T=Math.floor(R-w/2),N=0;N<s;N++){for(var O=0,D=0;D<b;D++){var M=D+A;if(!(M<0||M>=l)){var P=_+M*e.strides[1],F=M*m;if(C===Math.min(o-1,n?Math.round(F):Math.floor(F)))for(var B=0;B<w;B++){var L=B+T;if(!(L<0||L>=c)){var z=P+L*e.strides[2],j=L*g;k===Math.min(a-1,n?Math.round(j):Math.floor(j))&&(O+=h[z+N])}}}}d[I+N]=O}return An(d,t.shape,t.dtype)},t.prototype.batchNormalization=function(e,t,n,r,i,o){id([e,t,n,i,o],"batchNorm");for(var a=this.readSync(e.dataId),s=this.readSync(t.dataId),u=this.readSync(n.dataId),l=i?this.readSync(i.dataId):new Float32Array([1]),c=o?this.readSync(o.dataId):new Float32Array([0]),d=new Float32Array(a.length),h=c.length,f=l.length,p=u.length,m=s.length,g=0,v=0,y=0,b=0,w=0;w<a.length;++w)d[w]=c[g++]+(a[w]-s[v++])*l[y++]/Math.sqrt(u[b++]+r),g>=h&&(g=0),v>=m&&(v=0),y>=f&&(y=0),b>=p&&(b=0);return An(d,e.shape)},t.prototype.localResponseNormalization4D=function(e,t,n,r,i){id(e,"localResponseNormalization4D");var o=e.shape[3],a=o-1,s=this.readSync(e.dataId),u=e.size,l=new Float32Array(u);function c(e){for(var n=e%o,r=e-n+Math.max(0,n-t),i=e-n+Math.min(n+t,a),u=0;r<=i;r++){var l=s[r];u+=l*l}return u}for(var d=0;d<u;d++){var h=c(d),f=s[d]*Math.pow(n+r*h,-i);l[d]=f}return An(l,e.shape)},t.prototype.LRNGrad=function(e,t,n,r,i,o,a){id(e,"LRNGrad");for(var s=e.shape[3],u=this.readSync(e.dataId),l=this.readSync(t.dataId),c=this.readSync(n.dataId),d=new Float32Array(e.size),h=e.size,f=0;f<h;f++){for(var p=f%s,m=f-p+Math.max(0,p-r),g=f-p+Math.min(s,p+r+1),v=0,y=m;y<g;y++)v+=Math.pow(l[y],2);for(v=o*v+i,y=m;y<g;y++){var b=-2*o*a*l[y]*c[f]/v;f===y&&(b+=Math.pow(v,-a)),b*=u[f],d[y]+=b}}return An(d,e.shape)},t.prototype.multinomial=function(e,t,n,r){id(e,"multinomial");for(var i=t?e:Hr(e),o=i.shape[0],a=i.shape[1],s=In([o,n],"int32"),u=this.readSync(s.dataId),l=this.readSync(i.dataId),c=0;c<o;++c){var d=c*a,h=new Float32Array(a-1);h[0]=l[d];for(var f=1;f<h.length;++f)h[f]=h[f-1]+l[d+f];for(var p=Xn(r.toString()),m=c*n,g=0;g<n;++g){var v=p();u[m+g]=h.length;for(var y=0;y<h.length;y++)if(v<h[y]){u[m+g]=y;break}}}return s},t.prototype.oneHot=function(e,t,n,r){id(e,"oneHot");var i=new Float32Array(e.size*t);i.fill(r);for(var o=this.readSync(e.dataId),a=0;a<e.size;++a)o[a]>=0&&o[a]<t&&(i[a*t+o[a]]=n);return En(i,[e.size,t],"int32")},t.prototype.nonMaxSuppression=function(e,t,n,r,i){return id(e,"nonMaxSuppression"),vi(this.readSync(e.dataId),this.readSync(t.dataId),n,r,i)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],i=Jn(e.shape,"float32"),o=Jn(e.shape,"float32"),a=yn(e).as2D(n,r),s=bn(e).as2D(n,r),u=0;u<n;u++)for(var l=a.slice([u,0],[1,r]),c=s.slice([u,0],[1,r]),d=vn(l,c),h=this.readSync(this.fftImpl(d,t).dataId),f=0;f<r;f++){var p=hi(h,f);i.values[u*r+f]=p.real,o.values[u*r+f]=p.imag}return vn(i.toTensor(),o.toTensor()).as2D(n,r)},t.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var i=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(i=vn(yn(i).div(_n(r)),bn(i).div(_n(r)))),i}var o=this.readSync(e.dataId),a=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(this.fourierTransformByMatmul(o,r,t));return vn(a.real,a.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return 0==(e&e-1)},t.prototype.fftRadix2=function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),i=t/2,o=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),i=0;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}(r),a=vn(o.real,o.imag).as1D(),s=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),i=2;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}(r),u=vn(s.real,s.imag).as1D();a=this.fftRadix2(a,i,n),u=this.fftRadix2(u,i,n);var l=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),i=0;i<Math.ceil(e/2);i++){var o=(t?2:-2)*Math.PI*(i/e);n[i]=Math.cos(o),r[i]=Math.sin(o)}return{real:n,imag:r}}(t,n),c=vn(l.real,l.imag).mul(u),d=a.add(c),h=a.sub(c),f=yn(d).concat(yn(h)),p=bn(d).concat(bn(h));return vn(f,p).as1D()},t.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),i=0;i<t;i++){for(var o=0,a=0,s=0;s<t;s++){var u=pi(i*s,t,n),l=hi(e,s);o+=l.real*u.real-l.imag*u.imag,a+=l.real*u.imag+l.imag*u.real}n&&(o/=t,a/=t),fi(r,o,a,i)}return r},t.prototype.depthToSpace=function(e,t,n){P("NHWC"===n,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n})),P(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));for(var r=e.shape[0],i=e.shape[1],o=e.shape[2],a=e.shape[3],s=i*t,u=o*t,l=a/(t*t),c=this.readSync(e.dataId),d=new Float32Array(r*s*u*l),h=0,f=0;f<r;++f)for(var p=0;p<s;++p)for(var m=Math.floor(p/t),g=p%t,v=0;v<u;++v)for(var y=Math.floor(v/t),b=(g*t+v%t)*l,w=0;w<l;++w){var x=w+b+a*(y+o*(m+i*f));d[h++]=c[x]}return An(d,[r,s,u,l])},t.prototype.broadcastedBinaryOp=function(e,t,n,r){var i=qr(e.shape,t.shape),o=Jn(i,n),a=this.readSync(e.dataId),s=this.readSync(t.dataId),u=Xr(e.shape,i),l=Xr(t.shape,i),c=o.values;if(u.length+l.length===0)for(var d=0;d<c.length;++d)c[d]=r(a[d%a.length],s[d%s.length]);else{var h=this.bufferSync(e),f=this.bufferSync(t),p=function(n){var i=o.indexToLoc(n),d=i.slice(-e.rank);u.forEach((function(e){return d[e]=0}));var p=h.locToIndex(d),m=i.slice(-t.rank);l.forEach((function(e){return m[e]=0}));var g=f.locToIndex(m);c[n]=r(a[p],s[g])};for(d=0;d<c.length;++d)p(d)}return o.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=qr(e.shape,t.shape),i=Jn(r,"float32"),o=Jn(r,"float32"),a=this.readSync(e.dataId),s=this.readSync(t.dataId),u=Xr(e.shape,r),l=Xr(t.shape,r),c=i.values,d=o.values;if(u.length+l.length===0)for(var h=0;h<c.length;h++){var f=h%a.length,p=h%s.length,m=n(a[2*f],a[2*f+1],s[2*p],s[2*p+1]);c[h]=m.real,d[h]=m.imag}else{var g=this.bufferSync(this.data.get(e.dataId).complexTensors.real),v=this.bufferSync(this.data.get(t.dataId).complexTensors.real),y=function(r){var o=i.indexToLoc(r),h=o.slice(-e.rank);u.forEach((function(e){return h[e]=0}));var f=g.locToIndex(h),p=o.slice(-t.rank);l.forEach((function(e){return p[e]=0}));var m=v.locToIndex(p),y=n(a[2*f],a[2*f+1],s[2*m],s[2*m+1]);c[r]=y.real,d[r]=y.imag};for(h=0;h<c.length;h++)y(h)}return this.complex(i.toTensor(),o.toTensor())},t.prototype.split=function(e,t,n){return Ci(e,t,n)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,t,n,r,i,o){for(var a=e.shape,s=a[0],u=a[1],l=a[2],c=a[3],d=t.shape[0],h=r[0],f=r[1],p=Jn([d,h,f,c],"float32"),m=this.readSync(t.dataId),g=this.readSync(n.dataId),v=this.readSync(e.dataId),y=e.strides,b=p.strides,w=0;w<d;w++){var x=4*w,_=m[x],C=m[x+1],E=m[x+2],S=m[x+3],A=g[w];if(!(A>=s))for(var k=h>1?(E-_)*(u-1)/(h-1):0,I=f>1?(S-C)*(l-1)/(f-1):0,R=0;R<h;R++){var T=h>1?_*(u-1)+R*k:.5*(_+E)*(u-1);if(T<0||T>u-1)for(var N=0;N<f;N++)for(var O=0;O<c;O++){var D=O+N*b[2]+R*b[1]+w*b[0];p.values[D]=o}else if("bilinear"===i){var M=Math.floor(T),P=Math.ceil(T),F=T-M;for(N=0;N<f;N++)if((U=f>1?C*(l-1)+N*I:.5*(C+S)*(l-1))<0||U>l-1)for(O=0;O<c;O++)D=O+N*b[2]+R*b[1]+w*b[0],p.values[D]=o;else{var B=Math.floor(U),L=Math.ceil(U),z=U-B;for(O=0;O<c;O++){var j=v[D=O+B*y[2]+M*y[1]+A*y[0]],W=v[D=O+L*y[2]+M*y[1]+A*y[0]],H=v[D=O+B*y[2]+P*y[1]+A*y[0]],V=j+(W-j)*z,G=H+(v[D=O+L*y[2]+P*y[1]+A*y[0]]-H)*z;D=O+N*b[2]+R*b[1]+w*b[0],p.values[D]=V+(G-V)*F}}}else for(N=0;N<f;++N){var U;if((U=f>1?C*(l-1)+N*I:.5*(C+S)*(l-1))<0||U>l-1)for(O=0;O<c;O++)D=O+N*b[2]+R*b[1]+w*b[0],p.values[D]=o;else{var K=Math.round(U),X=Math.round(T);for(O=0;O<c;O++){var Z=O+K*y[2]+X*y[1]+A*y[0],q=O+N*b[2]+R*b[1]+w*b[0];p.values[q]=v[Z]}}}}}return p.toTensor()},t.prototype.sparseToDense=function(e,t,n,r){var i=Dr(0,e,n),o=i.sliceRank,a=i.numUpdates,s=i.sliceSize,u=i.strides,l=i.outputSize;return this.scatter(e,t,n,l,s,a,o,u,r,!1)},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],i=Rr(e,t),o=i[0],a=i[1],s=i[2],u=i[3];if(0===a)return wn([],o,e.dtype);for(var l=new Se([a,s],e.dtype),c=this.readSync(t.dataId),d=this.readSync(e.dataId),h=0;h<a;h++){for(var f=[],p=0,m=0;m<r;m++){var g=c[h*r+m];p+=g*u[m],f.push(g)}if(p<0||p>=e.size/s)throw new Error("Invalid indices: "+f+" does not index into "+e.shape);for(var v=0;v<s;v++)l.values[h*s+v]=d[p*s+v]}return l.toTensor().reshape(o)},t.prototype.scatterND=function(e,t,n){var r=Dr(0,e,n),i=r.sliceRank,o=r.numUpdates,a=r.sliceSize,s=r.strides,u=r.outputSize,l=_n(0);return this.scatter(e,t,n,u,a,o,i,s,l,!0)},t.prototype.fill=function(e,t,n){var r=Y(n=n||ae(t),z(e));return r.fill(t),Ke.makeTensor(r,e,n,this)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var t=Y(e.dtype,z(e.shape));return this.makeOutput(t,e.shape,e.dtype)},t.prototype.linspace=function(e,t,n){return ci(e,t,n)},t.prototype.scatter=function(e,t,n,r,i,o,a,s,u,l){var c=[r/i,i],d=this.readSync(e.dataId),h=this.readSync(t.dataId);if(0===r)return wn([],n,t.dtype);var f=new Se(c,t.dtype);f.values.fill(this.readSync(u.dataId)[0]);for(var p=0;p<o;p++){for(var m=[],g=0,v=0;v<a;v++){var y=d[p*a+v];m.push(y),g+=y*s[v]}if(g<0||g>=r/i)throw new Error("Invalid indices: "+m+" does not index into "+n);for(var b=0;b<i;b++)l?f.values[g*i+b]+=h[p*i+b]:f.values[g*i+b]=0===t.rank?h[0]:h[p*i+b]}return f.toTensor().reshape(n)},t}(Ur);Ke.registerBackend("cpu",(function(){return new ad}),1);for(var sd=0,ud=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t,o=i.boxes,a=i.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,h=n;id(o,"NonMaxSuppressionWithScore");var f=yi(h.data.get(o.dataId).values,h.data.get(a.dataId).values,u,l,c,d);return[f.selectedIndices,f.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,i=n;id(r,"square");for(var o=i.data.get(r.dataId).values,a=new Float32Array(o.length),s=0;s<o.length;++s){var u=o[s];a[s]=u*u}return{dataId:i.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:bs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,i=r.a,o=r.b,a=n;id([i,o],bs);var s=a.data.get(i.dataId).values,u=a.data.get(o.dataId).values,l=function(e,t,n,r,i,o){var a=qr(e,t),s=a.length,u=le(a),l=q(i,z(a)),c=e.length,d=t.length,h=le(e),f=le(t),p=Xr(e,a),m=Xr(t,a);if(p.length+m.length===0)for(var g=0;g<l.length;++g)l[g]=o(n[g%n.length],r[g%r.length]);else{var v=function(e){var t=be(e,s,u),i=t.slice(-c);p.forEach((function(e){return i[e]=0}));var a=ye(i,c,h),g=t.slice(-d);m.forEach((function(e){return g[e]=0}));var v=ye(g,d,f);l[e]=o(n[a],r[v])};for(g=0;g<l.length;++g)v(g)}return[l,a]}(i.shape,o.shape,s,u,i.dtype,(function(e,t){var n=e-t;return n*n})),c=l[0],d=l[1];return{dataId:a.write(c,d,i.dtype),shape:d,dtype:i.dtype}}}];sd<ud.length;sd++)I(ud[sd]);for(var ld,cd=function(e){this.variableNames=["A"];var t=Oi(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},dd=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Oi(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},hd=0,fd=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.pixels,o=r.numChannels,a="undefined"!=typeof HTMLVideoElement&&i instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement,u=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],l=u[0],c=u[1],d=[c,l],h=[c,l,o];(s||a)&&(null==ld&&(ld=document.createElement("canvas").getContext("2d")),ld.canvas.width=l,ld.canvas.height=c,ld.drawImage(i,0,0,l,c),i=ld.canvas);var f=n.makeTensorInfo(d,"int32");n.texData.get(f.dataId).usage=Ye.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),i);var p=_().getBool("WEBGL_PACK")?new dd(h):new cd(h),m=n.runWebGLProgram(p,[f],"int32");return n.disposeData(f.dataId),m}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;en("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=t,o=i.boxes,a=i.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,h=n,f=yi(h.readSync(o.dataId),h.readSync(a.dataId),u,l,c,d);return[f.selectedIndices,f.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,i=n,o=new Va(r.shape,"return x * x;");return i.runWebGLProgram(o,[r],r.dtype)}},{kernelName:bs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,i=r.a,o=r.b,a=n,s=_().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ao("return (a - b) * (a - b);",i.shape,o.shape):new io("return (a - b) * (a - b);",i.shape,o.shape);return a.compileAndRun(s,[i,o])}}];hd<fd.length;hd++)I(fd[hd]);for(var pd=0,md=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:bs,gradFunc:function(e,t){var n=t[0],r=t[1],i=_n(2);return{a:function(){return Pu(e,Pu(i,ju(n,r)))},b:function(){return Pu(e,Pu(i,ju(r,n)))}}}}];pd<md.length;pd++)R(md[pd]);var gd=function(){function e(){}return e.prototype.fetch=function(e,t){return fetch(e,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},e}();_().get("IS_BROWSER")&&_().setPlatform("browser",new gd);var vd,yd=function(){function e(){this.util=n(753),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(e,t){return null!=_().global.fetch?_().global.fetch(e,t):(null==vd&&(vd=n(522)),vd(e,t))},e.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)},e}();_().get("IS_NODE")&&_().setPlatform("node",new yd);var bd={float32:4,int32:4,uint16:2,uint8:1,bool:1};function wd(e,t){for(var n={},r=0,i=function(t){var i=t.name,o=t.dtype,a=t.shape,s=z(a),u=void 0;if("quantization"in t){var l=t.quantization;if("uint8"!==l.dtype&&"uint16"!==l.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+l.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var c=bd[l.dtype],d=e.slice(r,r+s*c),h="uint8"===l.dtype?new Uint8Array(d):new Uint16Array(d);if("float32"===o)u=Float32Array.from(h,(function(e){return e*l.scale+l.min}));else{if("int32"!==o)throw new Error("Unsupported dtype in weight '"+i+"': "+o);u=Int32Array.from(h,(function(e){return Math.round(e*l.scale+l.min)}))}r+=s*c}else if("string"===o){var f=z(t.shape);u=[];for(var p=0;p<f;p++){var m=new Uint32Array(e.slice(r,r+4))[0];r+=4;var g=new Uint8Array(e.slice(r,r+m));u.push(g),r+=m}}else{var v=bd[o];if(d=e.slice(r,r+s*v),"float32"===o)u=new Float32Array(d);else if("int32"===o)u=new Int32Array(d);else{if("bool"!==o)throw new Error("Unsupported dtype in weight '"+i+"': "+o);u=new Uint8Array(d)}r+=s*v}n[i]=wn(u,a,o)},o=0,a=t;o<a.length;o++)i(a[o]);return n}function xd(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)}));var r=new Uint8Array(t),i=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),i),i+=e.byteLength})),r.buffer}var _d="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function Cd(e){return _d?Buffer.byteLength(e):new Blob([e]).size}function Ed(e){var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Sd(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Ad(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Cd(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Cd(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var kd=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var i=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&i.push(n)})),i},e}(),Id="://",Rd=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){P(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(Id)&&(t=t.slice(0,t.indexOf(Id))),P(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();P(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '"+t+"'."})),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function Td(e){if(-1===e.indexOf(Id))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Rd.getSchemes().join(","));return{scheme:e.split(Id)[0],path:e.split(Id)[1]}}function Nd(e,t,n){return void 0===n&&(n=!1),y(this,void 0,void 0,(function(){var r,i,o,a,s,u,l,c,d;return b(this,(function(h){switch(h.label){case 0:return P(e!==t,(function(){return"Old path and new path are the same: '"+e+"'"})),P((r=kd.getLoadHandlers(e)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+e+"."})),P(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."})),i=r[0],P((o=kd.getSaveHandlers(t)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+t+"."})),P(o.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."})),a=o[0],s=Td(e).scheme,u=Td(e).path,l=s===Td(e).scheme,[4,i.load()];case 1:return c=h.sent(),n&&l?[4,Rd.getManager(s).removeModel(u)]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,a.save(c)];case 4:return d=h.sent(),!n||l?[3,6]:[4,Rd.getManager(s).removeModel(u)];case 5:h.sent(),h.label=6;case 6:return[2,d.modelArtifactsInfo]}}))}))}var Od="models_store",Dd="model_info_store";function Md(){if(!_().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Pd(e){var t=e.result;t.createObjectStore(Od,{keyPath:"modelPath"}),t.createObjectStore(Dd,{keyPath:"modelPath"})}var Fd=function(){function e(e){if(this.indexedDB=Md(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return y(this,void 0,void 0,(function(){return b(this,(function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]}))}))},e.prototype.load=function(){return y(this,void 0,void 0,(function(){return b(this,(function(e){return[2,this.databaseAction(this.modelPath)]}))}))},e.prototype.databaseAction=function(e,t){var n=this;return new Promise((function(e,r){var i=n.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return Pd(i)},i.onsuccess=function(){var o=i.result;if(null==t){var a=o.transaction(Od,"readonly"),s=a.objectStore(Od).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return o.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return o.close(),r(s.error)},a.oncomplete=function(){return o.close()}}else{var u,l=Ad(t),c=o.transaction(Dd,"readwrite"),d=c.objectStore(Dd),h=d.put({modelPath:n.modelPath,modelArtifactsInfo:l});h.onsuccess=function(){var i=(u=o.transaction(Od,"readwrite")).objectStore(Od).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l});i.onsuccess=function(){return e({modelArtifactsInfo:l})},i.onerror=function(e){var t=(d=c.objectStore(Dd)).delete(n.modelPath);t.onsuccess=function(){return o.close(),r(i.error)},t.onerror=function(e){return o.close(),r(i.error)}}},h.onerror=function(e){return o.close(),r(h.error)},c.oncomplete=function(){null==u?o.close():u.oncomplete=function(){return o.close()}}}},i.onerror=function(e){return r(i.error)}}))},e.URL_SCHEME="indexeddb://",e}(),Bd=function(e){return _().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Fd.URL_SCHEME)?(t=e.slice(Fd.URL_SCHEME.length),new Fd(t)):null;var t};kd.registerSaveRouter(Bd),kd.registerLoadRouter(Bd);var Ld=function(){function e(){this.indexedDB=Md()}return e.prototype.listModels=function(){return y(this,void 0,void 0,(function(){var e=this;return b(this,(function(t){return[2,new Promise((function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return Pd(r)},r.onsuccess=function(){var e=r.result,i=e.transaction(Dd,"readonly"),o=i.objectStore(Dd).getAll();o.onsuccess=function(){for(var e={},n=0,r=o.result;n<r.length;n++){var i=r[n];e[i.modelPath]=i.modelArtifactsInfo}t(e)},o.onerror=function(t){return e.close(),n(o.error)},i.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}}))]}))}))},e.prototype.removeModel=function(e){return y(this,void 0,void 0,(function(){var t=this;return b(this,(function(n){var r;return e=(r=e).startsWith(Fd.URL_SCHEME)?r.slice(Fd.URL_SCHEME.length):r,[2,new Promise((function(n,r){var i=t.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return Pd(i)},i.onsuccess=function(){var t,o=i.result,a=o.transaction(Dd,"readwrite"),s=a.objectStore(Dd),u=s.get(e);u.onsuccess=function(){if(null==u.result)return o.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var i=s.delete(e),a=function(){var i=(t=o.transaction(Od,"readwrite")).objectStore(Od).delete(e);i.onsuccess=function(){return n(u.result.modelArtifactsInfo)},i.onerror=function(e){return r(u.error)}};i.onsuccess=a,i.onerror=function(e){return a(),o.close(),r(u.error)}},u.onerror=function(e){return o.close(),r(u.error)},a.oncomplete=function(){null==t?o.close():t.oncomplete=function(){return o.close()}}},i.onerror=function(e){return r(i.error)}}))]}))}))},e}();if(_().getBool("IS_BROWSER"))try{Rd.registerManager(Fd.URL_SCHEME,new Ld)}catch(Pe){}var zd="/",jd="tensorflowjs_models",Wd="info",Hd="model_topology",Vd="weight_specs",Gd="weight_data",Ud="model_metadata";function Kd(e){return{info:[jd,e,Wd].join(zd),topology:[jd,e,Hd].join(zd),weightSpecs:[jd,e,Vd].join(zd),weightData:[jd,e,Gd].join(zd),modelMetadata:[jd,e,Ud].join(zd)}}function Xd(e){var t=e.split(zd);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(zd)}var Zd=function(){function e(e){if(!_().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Kd(this.modelPath)}return e.prototype.save=function(e){return y(this,void 0,void 0,(function(){var t,n,r;return b(this,(function(i){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=Ad(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(_d)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,i=t.length;r<i;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]}))}))},e.prototype.load=function(){return y(this,void 0,void 0,(function(){var e,t,n,r,i,o,a;return b(this,(function(s){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),t.format=o.format,t.generatedBy=o.generatedBy,t.convertedBy=o.convertedBy,t.userDefinedMetadata=o.userDefinedMetadata),null==(a=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(_d){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r.set([n.charCodeAt(i)],i);return r.buffer}(a),[2,t]}))}))},e.URL_SCHEME="localstorage://",e}(),qd=function(e){return _().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Zd.URL_SCHEME)?(t=e.slice(Zd.URL_SCHEME.length),new Zd(t)):null;var t};kd.registerSaveRouter(qd),kd.registerLoadRouter(qd);var Yd=function(){function e(){P(_().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),P("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return e.prototype.listModels=function(){return y(this,void 0,void 0,(function(){var e,t,n,r,i,o;return b(this,(function(a){for(e={},t=jd+zd,n=zd+Wd,r=0;r<this.LS.length;++r)(i=this.LS.key(r)).startsWith(t)&&i.endsWith(n)&&(o=Xd(i),e[o]=JSON.parse(this.LS.getItem(i)));return[2,e]}))}))},e.prototype.removeModel=function(e){return y(this,void 0,void 0,(function(){var t,n;return b(this,(function(r){var i;if(e=(i=e).startsWith(Zd.URL_SCHEME)?i.slice(Zd.URL_SCHEME.length):i,t=Kd(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]}))}))},e}();if(_().getBool("IS_BROWSER"))try{Rd.registerManager(Zd.URL_SCHEME,new Yd)}catch(Pe){}function Jd(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var Qd=function(){function e(t){if(!_().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return e.prototype.save=function(e){return y(this,void 0,void 0,(function(){var t,n,r,i,o,a;return b(this,(function(s){switch(s.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(o=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,[4,Jd((function(){return o.dispatchEvent(new MouseEvent("click"))}))];case 2:return s.sent(),null==e.weightData?[3,4]:((a=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,a.href=t,[4,Jd((function(){return a.dispatchEvent(new MouseEvent("click"))}))]);case 3:s.sent(),s.label=4;case 4:return[2,{modelArtifactsInfo:Ad(e)}]}}))}))},e.URL_SCHEME="downloads://",e}(),$d=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return y(this,void 0,void 0,(function(){var e,t,n=this;return b(this,(function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise((function(r,i){var o=new FileReader;o.onload=function(o){var a=JSON.parse(o.target.result),s=a.modelTopology;if(null!=s){0===t.length&&r({modelTopology:s});var u=a.weightsManifest;if(null!=u){var l;try{l=n.checkManifestAndWeightFiles(u,t)}catch(e){return void i(e)}var c=[],d=[],h=[];u.forEach((function(e){e.paths.forEach((function(e){d.push(e),h.push(null)})),c.push.apply(c,e.weights)})),u.forEach((function(e){e.paths.forEach((function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,i=d.indexOf(e);h[i]=n,-1===h.indexOf(null)&&r({modelTopology:s,weightSpecs:c,weightData:Ed(h),format:a.format,generatedBy:a.generatedBy,convertedBy:a.convertedBy,userDefinedMetadata:a.userDefinedMetadata})},t.onerror=function(t){return i("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(l[e])}))}))}else i(new Error("weightManifest field is missing from file "+e.name))}else i(new Error("modelTopology field is missing from file "+e.name))},o.onerror=function(t){return i("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},o.readAsText(e)}))]}))}))},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map((function(e){return Sd(e.name)})),i={},o=0,a=e;o<a.length;o++)a[o].paths.forEach((function(e){var o=Sd(e);if(-1!==n.indexOf(o))throw new Error("Duplicate file basename found in weights manifest: '"+o+"'");if(n.push(o),-1===r.indexOf(o))throw new Error("Weight file with basename '"+o+"' is not provided.");i[e]=t[r.indexOf(o)]}));if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return i},e}();function eh(e,t,n,r){!function(e){P(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){P(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e})),P(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t})),P(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t}))}(n=null==n?0:n,r=null==r?1:r);var i=0;return Promise.all(e.map((function(o){return o.then((function(o){var a=n+ ++i/e.length*(r-n);return t(a),o})),o})))}function th(e,t){return y(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l,c;return b(this,(function(d){switch(d.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?_().platform.fetch:t.fetchFunc,r=e.map((function(e){return n(e,t.requestInit,{isBinary:!0})})),i=0,o=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return a=d.sent(),[3,4];case 2:return[4,eh(r,t.onProgress,i,o)];case 3:a=d.sent(),d.label=4;case 4:return s=a.map((function(e){return e.arrayBuffer()})),u=.5,l=1,null!=t.onProgress?[3,6]:[4,Promise.all(s)];case 5:return c=d.sent(),[3,8];case 6:return[4,eh(s,t.onProgress,u,l)];case 7:c=d.sent(),d.label=8;case 8:return[2,c]}}))}))}function nh(e){var t=this;return function(n,r,i){return void 0===r&&(r=""),y(t,void 0,void 0,(function(){var t,o,a,s,u,l,c,d,h,f;return b(this,(function(p){switch(p.label){case 0:if(t=n.map((function(){return!1})),o={},a=null!=i?i.map((function(){return!1})):[],s=[],n.forEach((function(e,n){var r=0;e.weights.forEach((function(e){var u="quantization"in e?e.quantization.dtype:e.dtype,l=bd[u]*z(e.shape),c=function(){t[n]=!0,null==o[n]&&(o[n]=[]),o[n].push({manifestEntry:e,groupOffset:r,sizeBytes:l})};null!=i?i.forEach((function(t,n){t===e.name&&(c(),a[n]=!0)})):c(),s.push(e.name),r+=l}))})),!a.every((function(e){return e})))throw u=i.filter((function(e,t){return!a[t]})),new Error("Could not find weights in manifest with names: "+u.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".");return l=t.reduce((function(e,t,n){return t&&e.push(n),e}),[]),c=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;c.push(t)}))})),[4,e(c)];case 1:return d=p.sent(),h={},f=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,i=0;i<t;i++)r+=d[f+i].byteLength;for(var a=new ArrayBuffer(r),s=new Uint8Array(a),u=0,l=0;l<t;l++){var c=new Uint8Array(d[f+l]);s.set(c,u),u+=c.byteLength}o[e].forEach((function(e){var t=wd(a.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)h[n]=t[n]})),f+=t})),[2,h]}}))}))}}kd.registerSaveRouter((function(e){return _().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Qd.URL_SCHEME)?function(e){return void 0===e&&(e="model"),new Qd(e)}(e.slice(Qd.URL_SCHEME.length)):null}));var rh=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(P("function"==typeof t.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=t.fetchFunc):this.fetch=_().platform.fetch,P(null!=e&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&P(2===e.length,(function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."})),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return y(this,void 0,void 0,(function(){var t,n,r,i;return b(this,(function(o){switch(o.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((i=o.sent()).ok)return[2,{modelArtifactsInfo:Ad(e),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}}))}))},e.prototype.load=function(){return y(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u,l,c,d;return b(this,(function(h){switch(h.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=h.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");h.label=2;case 2:return h.trys.push([2,4,,5]),[4,e.json()];case 3:return t=h.sent(),[3,5];case 4:throw h.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,i=t.weightsManifest,o=t.generatedBy,a=t.convertedBy,s=t.format,u=t.userDefinedMetadata,null==r&&null==i)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==i?[3,7]:[4,this.loadWeights(i)];case 6:d=h.sent(),l=d[0],c=d[1],h.label=7;case 7:return[2,{modelTopology:r,weightSpecs:l,weightData:c,userDefinedMetadata:u,generatedBy:o,convertedBy:a,format:s}]}}))}))},e.prototype.loadWeights=function(e){return y(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,l,c,d;return b(this,(function(h){switch(h.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],i=n[1],o=this.weightPathPrefix||r,a=[],s=0,u=e;s<u.length;s++)l=u[s],a.push.apply(a,l.weights);return c=[],e.forEach((function(e){e.paths.forEach((function(e){c.push(o+e+i)}))})),[4,th(c,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return d=h.sent(),[2,[a,Ed(d)]]}}))}))},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function ih(e){return null!=e.match(rh.URL_SCHEME_REGEX)}var oh=function(e,t){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every((function(e){return ih(e)})):ih(e))?ah(e,{onProgress:t}):null};function ah(e,t){return new rh(e,t)}kd.registerSaveRouter(oh),kd.registerLoadRouter(oh);var sh,uh=function(){function e(e){this.modelArtifacts=e}return e.prototype.load=function(){return y(this,void 0,void 0,(function(){return b(this,(function(e){return[2,this.modelArtifacts]}))}))},e}(),lh=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return y(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this.saveHandler(e)]}))}))},e}(),ch=Object.freeze({browserFiles:function(e){return new $d(e)},browserHTTPRequest:function(e,t){return ah(e,t)},concatenateArrayBuffers:Ed,decodeWeights:wd,encodeWeights:function(e,t){return y(this,void 0,void 0,(function(){var n,r,i,o,a,s=this;return b(this,(function(u){switch(u.label){case 0:for(n=[],r=[],i=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e),o=function(o){var a=i[o],u=Array.isArray(e)?e[o].tensor:e[a];if("float32"!==u.dtype&&"int32"!==u.dtype&&"bool"!==u.dtype&&"string"!==u.dtype)throw new Error("Unsupported dtype in weight '"+a+"': "+u.dtype);var l={name:a,shape:u.shape,dtype:u.dtype};if("string"===u.dtype){var c=new Promise((function(e){return y(s,void 0,void 0,(function(){var t,n,r,i,o,a,s;return b(this,(function(l){switch(l.label){case 0:return[4,u.bytes()];case 1:for(t=l.sent(),n=t.reduce((function(e,t){return e+t.length}),0)+4*t.length,r=new Uint8Array(n),i=0,o=0;o<t.length;o++)a=t[o],s=new Uint8Array(new Uint32Array([a.length]).buffer),r.set(s,i),i+=4,r.set(a,i),i+=a.length;return e(r),[2]}}))}))}));r.push(c)}else r.push(u.data());null!=t&&(l.group=t),n.push(l)},a=0;a<i.length;++a)o(a);return[4,Promise.all(r)];case 1:return[2,{data:xd(u.sent()),specs:n}]}}))}))},fromMemory:function(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new uh(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new uh({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new uh({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return kd.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:Ad,getSaveHandlers:function(e){return kd.getSaveHandlers(e)},http:ah,isHTTPScheme:ih,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),y(this,void 0,void 0,(function(){return b(this,(function(i){return[2,nh((function(e){return th(e,{requestInit:r})}))(e,t,n)]}))}))},registerLoadRouter:function(e){return kd.registerLoadRouter(e)},registerSaveRouter:function(e){return kd.registerSaveRouter(e)},weightsLoaderFactory:nh,withSaveHandler:function(e){return new lh(e)},copyModel:function(e,t){return y(this,void 0,void 0,(function(){return b(this,(function(n){return[2,Nd(e,t,!1)]}))}))},listModels:function(){return y(this,void 0,void 0,(function(){var e,t,n,r,i,o,a;return b(this,(function(s){switch(s.label){case 0:e=Rd.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(i=r[n],[4,Rd.getManager(i).listModels()]):[3,4];case 2:for(a in o=s.sent())t[i+Id+a]=o[a];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},moveModel:function(e,t){return y(this,void 0,void 0,(function(){return b(this,(function(n){return[2,Nd(e,t,!0)]}))}))},removeModel:function(e){return y(this,void 0,void 0,(function(){var t;return b(this,(function(n){return t=Td(e),[2,Rd.getManager(t.scheme).removeModel(t.path)]}))}))}}),dh=gn({confusionMatrix_:function(e,t,n){var r=rn(e,"labels","confusionMatrix"),i=rn(t,"predictions","confusionMatrix");P(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),P(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),P(1===i.rank,(function(){return"Expected the rank of predictions to be 1, but got "+i.rank})),P(r.shape[0]===i.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."})),P(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var o=sr(r.asType("int32"),n),a=sr(i.asType("int32"),n);return o.transpose().matMul(a).asType("int32")}}),hh=(Object.freeze({confusionMatrix:dh}),gn({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,i=!1,o=!1,a=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)i=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)o=!0;else{if(null==e.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);a=!0}if(i&&i&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=A("FromPixels",Ke.backendName))return Ke.runKernel("FromPixels",{pixels:e},{numChannels:t});var s,u,l=i?[e.videoWidth,e.videoHeight]:[e.width,e.height],c=l[0],d=l[1];if(a?s=e.getContext("2d").getImageData(0,0,c,d).data:r||n?s=e.data:(o||i)&&(null==sh&&(sh=document.createElement("canvas").getContext("2d")),sh.canvas.width=c,sh.canvas.height=d,sh.drawImage(e,0,0,c,d),s=sh.getImageData(0,0,c,d).data),4===t)u=new Int32Array(s);else{var h=c*d;u=new Int32Array(h*t);for(var f=0;f<h;f++)for(var p=0;p<t;++p)u[f*t+p]=s[4*f+p]}return Sn(u,[d,c,t],"int32")}})),fh=Object.freeze({toPixels:function(e,t){return y(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l,c,d,h,f,p,m,g,v,y,w,x,_,C,E,S;return b(this,(function(b){switch(b.label){case 0:if(n=rn(e,"img","toPixels"),e instanceof Re||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),i=r[0],o=r[1],(a=2===n.rank?1:n.shape[2])>4||2===a)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return[4,n.data()];case 1:return s=b.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=b.sent(),d=c[0],h=c[1],f=d[0],p=h[0],u.dispose(),l.dispose(),"float32"===n.dtype){if(f<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+f+" - "+p+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(f<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+f+" - "+p+"].")}for(m="float32"===n.dtype?255:1,g=new Uint8ClampedArray(o*i*4),v=0;v<i*o;++v)y=void 0,w=void 0,x=void 0,_=void 0,1===a?(y=s[v]*m,w=s[v]*m,x=s[v]*m,_=255):3===a?(y=s[3*v]*m,w=s[3*v+1]*m,x=s[3*v+2]*m,_=255):4===a&&(y=s[4*v]*m,w=s[4*v+1]*m,x=s[4*v+2]*m,_=s[4*v+3]*m),g[0+(C=4*v)]=Math.round(y),g[C+1]=Math.round(w),g[C+2]=Math.round(x),g[C+3]=Math.round(_);return null!=t&&(t.width=o,t.height=i,E=t.getContext("2d"),S=new ImageData(g,o,i),E.putImageData(S,0,0)),n!==e&&n.dispose(),[2,g]}}))}))},fromPixels:hh}),ph=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),mh=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function gh(e){P(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),P("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),P(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),mh.register(e)}Object.freeze({Serializable:ph,SerializationMap:mh,registerClass:gh});function vh(){return 32===Ke.backend.floatPrecision()?.001:.1}function yh(e,t,n){var r=!0;if((ee(e)||ee(t))&&(r=!1),ee(e)&&ee(t)&&(r=!0),r){var i=e.constructor.name,o=t.constructor.name;if(i!==o)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+o)}if(Array.isArray(e)&&Array.isArray(t)){var a=tn(e),s=tn(t);if(!j(a,s))throw new Error("Arrays have different shapes. Actual: ["+a+"]. Expected: ["+s+"]")}var u=ee(e)?e:L(e),l=ee(t)?t:L(t);if(u.length!==l.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+l.length+".\nActual:   "+u+".\nExpected: "+l+".");for(var c=0;c<l.length;++c){var d=u[c],h=l[c];if(!n(d,h))throw new Error("Arrays differ: actual["+c+"] = "+d+", expected["+c+"] = "+h+".\nActual:   "+u+".\nExpected: "+l+".")}}function bh(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(e,t,n){return null==n&&(n=vh()),yh(e,t,(function(e,t){return bh(e,t,n)}))},testEpsilon:vh,expectPromiseToFail:function(e,t){e().then((function(){return t.fail()}),(function(){return t()}))},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return re(e)||re(e[0])||re(t)||re(t[0])?yh(e,n,(function(e,t){return e==t})):yh(e,t,(function(e,t){return bh(e,t,0)}))},expectNumbersClose:function(e,t,n){if(null==n&&(n=vh()),!bh(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),Object.freeze({gpgpu_util:na,webgl_util:qt,forceHalfFloat:function(){_().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:vs,setWebGLContext:et,GPGPUContext:ra});var wh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),i=r.value,o=r.grads;if(null!=n){var a=n.map((function(e){return{name:e.name,tensor:o[e.name]}}));this.applyGradients(a)}else this.applyGradients(o);return $t(o),t?i:(i.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return function(e,t){P(se(e),(function(){return"The f passed in variableGrads(f) must be a function"})),P(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof Fe})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],Ke.registeredVariables)t.push(Ke.registeredVariables[r]);var i=n?t.filter((function(e){return!e.trainable})):null,o=t.length;P((t=t.filter((function(e){return e.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."}));var a=Ke.gradients(e,t,null,!0),s=a.value,u=a.grads;P(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),P(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var l={};return t.forEach((function(e,t){null!=u[t]&&(l[e.name]=u[t])})),null!=i&&i.forEach((function(e){return l[e.name]=null})),{value:s,grads:l}}(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&$t(this.iterations_)},t.prototype.saveIterations=function(){return y(this,void 0,void 0,(function(){return b(this,(function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:_n(this.iterations_,"int32")}]}))}))},t.prototype.getWeights=function(){return y(this,void 0,void 0,(function(){return b(this,(function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},t.prototype.setWeights=function(e){return y(this,void 0,void 0,(function(){return b(this,(function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},t.prototype.extractIterations=function(e){return y(this,void 0,void 0,(function(){var t;return b(this,(function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}}))}))},t}(ph);Object.defineProperty(wh,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var xh=function(e){function t(t,n,r){void 0===r&&(r=null);var i=e.call(this)||this;return i.learningRate=t,i.rho=n,i.epsilon=r,i.accumulatedGrads=[],i.accumulatedUpdates=[],null==r&&(i.epsilon=Ke.backend.epsilon()),i}return v(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=Ke.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:Qt((function(){return On(i).variable(!1)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:Qt((function(){return On(i).variable(!1)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var a=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;Qt((function(){var e=a.mul(t.rho).add(o.square().mul(1-t.rho)),n=s.add(t.epsilon).sqrt().div(a.add(t.epsilon).sqrt()).mul(o),r=s.mul(t.rho).add(n.square().mul(1-t.rho));a.assign(e),s.assign(r);var u=n.mul(-t.learningRate).add(i);i.assign(u)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&($t(this.accumulatedGrads.map((function(e){return e.variable}))),$t(this.accumulatedUpdates.map((function(e){return e.variable}))))},t.prototype.getWeights=function(){return y(this,void 0,void 0,(function(){var e;return b(this,(function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return y(this,void 0,void 0,(function(){var t;return b(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedUpdates=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="Adadelta",t}(wh);gh(xh);var _h=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return v(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=Ke.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:Qt((function(){return Rn(i.shape,t.initialAccumulatorValue).variable(!1)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var a=t.accumulatedGrads[r].variable;Qt((function(){var e=a.add(o.square());a.assign(e);var n=o.div(e.add(Ke.backend.epsilon()).sqrt()).mul(-t.learningRate).add(i);i.assign(n)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&$t(this.accumulatedGrads.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return y(this,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return y(this,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(wh);gh(_h);var Ch=function(e){function t(t,n,r,i){void 0===i&&(i=null);var o=e.call(this)||this;return o.learningRate=t,o.beta1=n,o.beta2=r,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],Qt((function(){o.accBeta1=_n(n).variable(),o.accBeta2=_n(r).variable()})),null==i&&(o.epsilon=Ke.backend.epsilon()),o}return v(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Qt((function(){var r=ju(1,t.accBeta1),i=ju(1,t.accBeta2);n.forEach((function(n,o){var a=Ke.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:n+"/m",variable:Qt((function(){return On(a).variable(!1)}))}),null==t.accumulatedSecondMoment[o]&&(t.accumulatedSecondMoment[o]={originalName:n+"/v",variable:Qt((function(){return On(a).variable(!1)}))});var s=Array.isArray(e)?e[o].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[o].variable,l=t.accumulatedSecondMoment[o].variable,c=u.mul(t.beta1).add(s.mul(1-t.beta1)),d=l.mul(t.beta2).add(s.square().mul(1-t.beta2)),h=c.div(r),f=d.div(i);u.assign(c),l.assign(d);var p=h.div(f.sqrt().add(t.epsilon)).mul(-t.learningRate).add(a);a.assign(p)}})),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&$t(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&$t(this.accumulatedSecondMoment.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return y(this,void 0,void 0,(function(){var e;return b(this,(function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return y(this,void 0,void 0,(function(){var t,n=this;return b(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),Qt((function(){n.accBeta1.assign(Bu(n.beta1,n.iterations_+1)),n.accBeta2.assign(Bu(n.beta2,n.iterations_+1))})),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedSecondMoment=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(wh);gh(Ch);var Eh=function(e){function t(t,n,r,i,o){void 0===i&&(i=null),void 0===o&&(o=0);var a=e.call(this)||this;return a.learningRate=t,a.beta1=n,a.beta2=r,a.epsilon=i,a.decay=o,a.accumulatedFirstMoment=[],a.accumulatedWeightedInfNorm=[],Qt((function(){a.iteration=_n(0).variable(),a.accBeta1=_n(n).variable()})),null==i&&(a.epsilon=Ke.backend.epsilon()),a}return v(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Qt((function(){var r=ju(1,t.accBeta1),i=Su(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach((function(n,o){var a=Ke.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:n+"/m",variable:On(a).variable(!1)}),null==t.accumulatedWeightedInfNorm[o]&&(t.accumulatedWeightedInfNorm[o]={originalName:n+"/v",variable:On(a).variable(!1)});var s=Array.isArray(e)?e[o].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[o].variable,l=t.accumulatedWeightedInfNorm[o].variable,c=u.mul(t.beta1).add(s.mul(1-t.beta1)),d=l.mul(t.beta2),h=s.abs(),f=d.maximum(h);u.assign(c),l.assign(f);var p=i.div(r).mul(c.div(f.add(t.epsilon))).add(a);a.assign(p)}})),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&$t(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&$t(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return y(this,void 0,void 0,(function(){return b(this,(function(e){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},t.prototype.setWeights=function(e){return y(this,void 0,void 0,(function(){return b(this,(function(e){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(wh);gh(Eh);var Sh=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return v(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=Ke.registeredVariables[n];Qt((function(){var e=t.c.mul(i).add(o);o.assign(e)}))}})),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=function(e){return Ke.keep(e)}(_n(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return y(this,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}}))}))},t.prototype.setWeights=function(e){return y(this,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(wh);gh(Sh);var Ah=function(e){function t(t,n,r){void 0===r&&(r=!1);var i=e.call(this,t)||this;return i.learningRate=t,i.momentum=n,i.useNesterov=r,i.accumulations=[],i.m=_n(i.momentum),i}return v(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=Ke.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:Qt((function(){return On(i).variable(!1)}))});var o=t.accumulations[r].variable,a=Array.isArray(e)?e[r].tensor:e[n];null!=a&&Qt((function(){var e,n=t.m.mul(o).add(a);e=t.useNesterov?t.c.mul(a.add(n.mul(t.m))).add(i):t.c.mul(n).add(i),o.assign(n),i.assign(e)}))})),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&$t(this.accumulations.map((function(e){return e.variable})))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return y(this,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return y(this,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="Momentum",t}(Sh);gh(Ah);var kh=function(e){function t(t,n,r,i,o){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===i&&(i=null),void 0===o&&(o=!1);var a=e.call(this)||this;if(a.learningRate=t,a.decay=n,a.momentum=r,a.epsilon=i,a.accumulatedMeanSquares=[],a.accumulatedMoments=[],a.accumulatedMeanGrads=[],a.centered=o,null==i&&(a.epsilon=Ke.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.");return a}return v(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=Ke.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:Qt((function(){return On(i).variable(!1)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:Qt((function(){return On(i).variable(!1)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:Qt((function(){return On(i).variable(!1)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var a=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable;Qt((function(){var e=a.mul(t.decay).add(o.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,u=n.mul(t.decay).add(o.mul(1-t.decay)),l=s.mul(t.momentum).add(o.mul(t.learningRate).div(e.sub(u.square().add(t.epsilon)).sqrt()));a.assign(e),n.assign(u),s.assign(l);var c=i.sub(l);i.assign(c)}else{var d=a.mul(t.decay).add(o.square().mul(1-t.decay));l=s.mul(t.momentum).add(o.mul(t.learningRate).div(d.add(t.epsilon).sqrt())),a.assign(d),s.assign(l),c=i.sub(l),i.assign(c)}}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&$t(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&$t(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&$t(this.accumulatedMoments.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return y(this,void 0,void 0,(function(){var e;return b(this,(function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return y(this,void 0,void 0,(function(){var t;return b(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedMoments=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}))),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(wh);gh(kh);var Ih=function(){function e(){}return e.sgd=function(e){return new Sh(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new Ah(e,t,n)},e.rmsprop=function(e,t,n,r,i){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===i&&(i=!1),new kh(e,t,n,r,i)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new Ch(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new xh(e,t,n)},e.adamax=function(e,t,n,r,i){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===i&&(i=0),new Eh(e,t,n,r,i)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new _h(e,t)},e}();Ih.sgd,Ih.momentum,Ih.adadelta,Ih.adagrad,Ih.rmsprop,Ih.adamax,Ih.adam,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate&&setImmediate;Re.prototype.squaredDifference=function(e){return ws(this,e)},ke=rd;var Rh=function(e,t){return Rh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Rh(e,t)};function Th(e,t){function n(){this.constructor=e}Rh(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Nh=function(){return Nh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Nh.apply(this,arguments)};function Oh(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(v){o(v)}}function s(e){try{u(r.throw(e))}catch(v){o(v)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function Dh(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(v){o=[6,v],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Mh(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var Ph=function(){function e(e,t){if(!Vh(e)||!Vh(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function Fh(e,t){return e instanceof Re&&e.shape.length===t}function Bh(e){return Fh(e,3)}function Lh(e){return Fh(e,4)}function zh(e){return e%2===0}function jh(e){return e&&e.width&&e.height}function Wh(e){return e.reduce((function(e,t){return e.add(t)}),new Uh(0,0)).div(new Uh(e.length,e.length))}function Hh(e,t,n){return Array(e).fill(0).map((function(e,r){return t+r*n}))}function Vh(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||0===e}function Gh(e){return Vh(e)&&0<=e&&e<=1}var Uh=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),Kh=function(){function e(t,n){void 0===n&&(n=!0);var r=t||{},i=[r.left,r.top,r.right,r.bottom].every(Vh),o=[r.x,r.y,r.width,r.height].every(Vh);if(!o&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var a=o?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=a[0],u=a[1],l=a[2],c=a[3];e.assertIsValidBox({x:s,y:u,width:l,height:c},"Box.constructor",n),this._x=s,this._y=u,this._width=l,this._height=c}return e.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(Vh)},e.assertIsValidBox=function(t,n,r){if(void 0===r&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new Uh(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new Uh(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new Uh(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new Uh(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.round(e)}));return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.floor(e)}));return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,i=t.width,o=t.height,a=Math.abs(i-o);return i<o&&(n-=a/2,i+=a),o<i&&(r-=a/2,o+=a),new e({x:n,y:r,width:i,height:o})},e.prototype.rescale=function(t){var n=jh(t)?t.width:t,r=jh(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n];return new e({x:r[0],y:r[1],width:r[2],height:r[3]})},e.prototype.clipAtImageBorders=function(t,n){var r=this,i=r.x,o=r.y,a=r.right,s=r.bottom,u=Math.max(i,0),l=Math.max(o,0),c=a-u,d=s-l;return new e({x:u,y:l,width:Math.min(c,t-u),height:Math.min(d,n-l)}).floor()},e.prototype.shift=function(t,n){var r=this.width,i=this.height;return new e({x:this.x+t,y:this.y+n,width:r,height:i})},e.prototype.padAtBorders=function(e,t){var n=this.width+1,r=this.height+1,i=n,o=r,a=this.left,s=this.top,u=this.right,l=this.bottom;return u>t&&(i=-u+t+n,u=t),l>e&&(o=-l+e+r,l=e),a<1&&(o=2-a,a=1),s<1&&(o=2-s,s=1),{dy:1,edy:o,dx:1,edx:i,y:s,ey:l,x:a,ex:u,w:n,h:r}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),Xh=function(e){function t(t,n,r,i,o){return void 0===o&&(o=!1),e.call(this,{left:t,top:n,right:r,bottom:i},o)||this}return Th(t,e),t}(Kh),Zh=function(){function e(e,t,n,r,i){this._imageDims=new Ph(i.width,i.height),this._score=e,this._classScore=t,this._className=n,this._box=new Kh(r).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new Kh(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),qh=function(e){function t(t,n,r){return e.call(this,t,t,"",n,r)||this}return Th(t,e),t.prototype.forSize=function(n,r){var i=e.prototype.forSize.call(this,n,r);return new t(i.score,i.relativeBox,i.imageDims)},t}(Zh);function Yh(e,t,n){void 0===n&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n?r/(e.area+t.area-r):r/Math.min(e.area,t.area)}function Jh(e,t,n,r){void 0===r&&(r=!0);for(var i=t.map((function(e,t){return{score:e,boxIndex:t}})).sort((function(e,t){return e.score-t.score})).map((function(e){return e.boxIndex})),o=[],a=function(){var t=i.pop();o.push(t);for(var a=i,s=[],u=0;u<a.length;u++){var l=a[u],c=e[t],d=e[l];s.push(Yh(c,d,r))}i=i.filter((function(e,t){return s[t]<=n}))};i.length>0;)a();return o}function Qh(e,t){return Qt((function(){var n=t[0],r=t[1],i=t[2],o=Rn(Mh(e.shape.slice(0,3),[1]),n),a=Rn(Mh(e.shape.slice(0,3),[1]),r),s=Rn(Mh(e.shape.slice(0,3),[1]),i),u=Dn([o,a,s],3);return ju(e,u)}))}function $h(e){return 1/(1+Math.exp(-e))}var ef,tf=function(e){function t(t,n,r,i,o){return void 0===o&&(o=!1),e.call(this,{x:t,y:n,width:r,height:i},o)||this}return Th(t,e),t}(Kh),nf=function(){function e(e,t,n){void 0===n&&(n=new Uh(0,0));var r=t.width,i=t.height;this._imgDims=new Ph(r,i),this._shift=n,this._positions=e.map((function(e){return e.mul(new Uh(r,i)).add(n)}))}return Object.defineProperty(e.prototype,"shift",{get:function(){return new Uh(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map((function(t){return t.sub(e._shift).div(new Uh(e.imageWidth,e.imageHeight))}))},enumerable:!0,configurable:!0}),e.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},e.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new Uh(e,t))},e.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},e.prototype.align=function(e,t){if(void 0===t&&(t={}),e){var n=e instanceof qh?e.box.floor():new Kh(e);return this.shiftBy(n.x,n.y).align(null,t)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),i=r.useDlibAlignment,o=r.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(o)},e.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],n=e[1],r=e[2],i=function(e){return r.sub(e).magnitude()},o=(i(t)+i(n))/2,a=Math.floor(o/.45),s=Wh(e),u=Math.floor(Math.max(0,s.x-.5*a)),l=Math.floor(Math.max(0,s.y-.43*a));return new tf(u,l,Math.min(a,this.imageWidth+u),Math.min(a,this.imageHeight+l))},e.prototype.alignMinBbox=function(e){var t=function(e){var t=e.map((function(e){return e.x})),n=e.map((function(e){return e.y})),r=t.reduce((function(e,t){return t<e?t:e}),1/0),i=n.reduce((function(e,t){return t<e?t:e}),1/0),o=t.reduce((function(e,t){return e<t?t:e}),0),a=n.reduce((function(e,t){return e<t?t:e}),0);return new Xh(r,i,o,a)}(this.positions);return t.pad(t.width*e,t.height*e)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),rf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Th(t,e),t.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],Wh([e[3],e[4]])]},t}(nf),of=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Th(t,e),t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(Wh)},t}(nf),af=function(){function e(e,t){this._label=e,this._distance=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){return void 0===e&&(e=!0),this.label+(e?" ("+function(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}(this.distance)+")":"")},e}(),sf=function(e){function t(t,n){var r=e.call(this,t)||this;return r._label=n,r}return Th(t,e),t.assertIsValidLabeledBox=function(e,t){if(Kh.assertIsValidBox(e,t),!Vh(e.label))throw new Error(t+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(Kh),uf=function(){function e(e,t){if("string"!==typeof e)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some((function(e){return!(e instanceof Float32Array)})))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map((function(e){return Array.from(e)}))}},e.fromJSON=function(t){var n=t.descriptors.map((function(e){return new Float32Array(e)}));return new e(t.label,n)},e}();!function(e){function t(t,n,r,i){var o=e.call(this,t,n)||this;return o._score=r,o._classScore=i,o}Th(t,e),t.assertIsValidPredictedBox=function(e,t){if(sf.assertIsValidLabeledBox(e,t),!Gh(e.score)||!Gh(e.classScore))throw new Error(t+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(sf);function lf(e,t){var n={detection:t};return Object.assign({},e,n)}function cf(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}function df(e){var t="";if(!e)try{e=n(Object(function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(r){t=r.toString()}return{readFile:e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){return e?r(e):n(t)}))}))}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)}}}function hf(){var e=n.g.Canvas||n.g.HTMLCanvasElement,t=n.g.Image||n.g.HTMLImageElement,r=n.g.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=df();return Nh({Canvas:e||function(){},CanvasRenderingContext2D:n.g.CanvasRenderingContext2D||function(){},Image:t||function(){},ImageData:n.g.ImageData||function(){},Video:n.g.HTMLVideoElement||function(){},createCanvasElement:function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:r},i)}function ff(){return"object"===typeof window&&"undefined"!==typeof document&&"undefined"!==typeof HTMLImageElement&&"undefined"!==typeof HTMLCanvasElement&&"undefined"!==typeof HTMLVideoElement&&"undefined"!==typeof ImageData&&"undefined"!==typeof CanvasRenderingContext2D}function pf(){return"object"===typeof n.g&&"undefined"!==typeof process&&!!process.version}function mf(e){ef=e}function gf(){ff()&&mf(cf()),pf()&&mf(hf())}var vf,yf={getEnv:function(){if(!ef)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return ef},setEnv:mf,initialize:gf,createBrowserEnv:cf,createFileSystem:df,createNodejsEnv:hf,monkeyPatch:function(e){if(ef||gf(),!ef)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=void 0===t?ef.Canvas:t,r=e.Image,i=void 0===r?ef.Image:r;ef.Canvas=n,ef.Image=i,ef.createCanvasElement=e.createCanvasElement||function(){return new n},ef.createImageElement=e.createImageElement||function(){return new i},ef.ImageData=e.ImageData||ef.ImageData,ef.Video=e.Video||ef.Video,ef.fetch=e.fetch||ef.fetch,ef.readFile=e.readFile||ef.readFile},isBrowser:ff,isNodejs:pf};function bf(e){return yf.isNodejs()||"string"!==typeof e?e:document.getElementById(e)}function wf(e){var t=yf.getEnv(),n=t.Canvas;if(e instanceof t.CanvasRenderingContext2D)return e;var r=bf(e);if(!(r instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=r.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}gf(),function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"}(vf||(vf={}));var xf=function(e){void 0===e&&(e={});var t=e.anchorPosition,n=e.backgroundColor,r=e.fontColor,i=e.fontSize,o=e.fontStyle,a=e.padding;this.anchorPosition=t||vf.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=i||14,this.fontStyle=o||"Georgia",this.padding=a||4},_f=function(){function e(t,n,r){void 0===r&&(r={}),this.text="string"===typeof t?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new xf(r)}return e.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map((function(t){return e.measureText(t).width})).reduce((function(e,t){return e<t?t:e}),0)+2*t},e.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,n=e.padding;return this.text.length*t+2*n},e.prototype.getUpperLeft=function(e,t){var n=this.options.anchorPosition,r=n===vf.BOTTOM_RIGHT||n===vf.TOP_RIGHT,i=n===vf.BOTTOM_LEFT||n===vf.BOTTOM_RIGHT,o=this.measureWidth(e),a=this.measureHeight(),s=r?this.anchor.x-o:this.anchor.x,u=i?this.anchor.y-a:this.anchor.y;if(t){var l=t.width,c=t.height;return{x:Math.max(Math.min(s,l-o),0),y:Math.max(Math.min(u,c-a),0)}}return{x:s,y:u}},e.prototype.draw=function(e){var t=bf(e),n=wf(t),r=this.options,i=r.backgroundColor,o=r.fontColor,a=r.fontSize,s=r.fontStyle,u=r.padding;n.font=a+"px "+s;var l=this.measureWidth(n),c=this.measureHeight();n.fillStyle=i;var d=this.getUpperLeft(n,t);n.fillRect(d.x,d.y,l,c),n.fillStyle=o,this.text.forEach((function(e,t){var r=u+d.x,i=u+d.y+(t+1)*a;n.fillText(e,r,i)}))},e}(),Cf=function(e){void 0===e&&(e={});var t=e.boxColor,n=e.lineWidth,r=e.label,i=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;var o={anchorPosition:vf.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new xf(Object.assign({},o,i))};!function(){function e(e,t){void 0===t&&(t={}),this.box=new Kh(e),this.options=new Cf(t)}e.prototype.draw=function(e){var t=wf(e),n=this.options,r=n.boxColor,i=n.lineWidth,o=this.box,a=o.x,s=o.y,u=o.width,l=o.height;t.strokeStyle=r,t.lineWidth=i,t.strokeRect(a,s,u,l);var c=this.options.label;c&&new _f([c],{x:a-i/2,y:s},this.options.drawLabelOptions).draw(e)}}();function Ef(e){var t=yf.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function Sf(e){var t=yf.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new Ph(e.naturalWidth,e.naturalHeight):e instanceof r?new Ph(e.videoWidth,e.videoHeight):new Ph(e.width,e.height)}function Af(e){var t=e.width,n=e.height,r=(0,yf.getEnv().createCanvasElement)();return r.width=t,r.height=n,r}function kf(e,t){var n=yf.getEnv().ImageData;if(!(e instanceof n)&&!Ef(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||Sf(e),i=r.width,o=r.height,a=Af({width:i,height:o});return e instanceof n?wf(a).putImageData(e,0,0):wf(a).drawImage(e,0,0,i,o),a}function If(e,t){return Oh(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Dh(this,(function(u){switch(u.label){case 0:return n=t||yf.getEnv().createCanvasElement(),r=e.shape.slice(Lh(e)?1:0),i=r[0],o=r[1],a=r[2],s=Qt((function(){return e.as3D(i,o,a).toInt()})),[4,fh.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}}))}))}function Rf(e){var t=yf.getEnv(),n=t.Image,r=t.Canvas,i=t.Video;return e instanceof n||e instanceof r||e instanceof i}var Tf=function(){function e(e,t){var n=this;if(void 0===t&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach((function(e,t){if(Bh(e))return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape);if(Lh(e)){var r=e.shape[0];if(1!==r)throw new Error("NetInput - tf.Tensor4D with batchSize "+r+" passed, but not supported in input array");return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape.slice(1))}var i=e instanceof yf.getEnv().Canvas?e:kf(e);n._canvases[t]=i,n._inputDimensions[t]=[i.height,i.width,3]}))}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var e=this;return Hh(this.batchSize,0,1).map((function(t,n){return e.getReshapedInputDimensions(n)}))},enumerable:!0,configurable:!0}),e.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},e.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},e.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},e.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},e.prototype.getReshapedInputDimensions=function(e){if("number"!==typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return function(e,t){var n=e.width,r=e.height,i=t/Math.max(r,n);return new Ph(Math.round(n*i),Math.round(r*i))}({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)},e.prototype.toBatchTensor=function(e,t){var n=this;return void 0===t&&(t=!0),this._inputSize=e,Qt((function(){var r=Hh(n.batchSize,0,1).map((function(r){var i=n.getInput(r);if(i instanceof Re){var o=Lh(i)?i:i.expandDims();return o=function(e,t){return void 0===t&&(t=!1),Qt((function(){var n=e.shape.slice(1),r=n[0],i=n[1];if(r===i)return e;var o=Math.abs(r-i),a=Math.round(o*(t?.5:1)),s=r>i?2:1,u=function(t){var n=e.shape.slice();return n[s]=t,Rn(n,0)},l=u(a),c=o-l.shape[s],d=[t&&c?u(c):null,e,l].filter((function(e){return!!e})).map((function(e){return e.toFloat()}));return Dn(d,s)}))}(o,t),o.shape[1]===e&&o.shape[2]===e||(o=Zc.resizeBilinear(o,[e,e])),o.as3D(e,e,3)}if(i instanceof yf.getEnv().Canvas)return fh.fromPixels(function(e,t,n){void 0===n&&(n=!1);var r=yf.getEnv(),i=r.Image,o=r.Canvas;if(!(e instanceof i||e instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var a=Sf(e),s=t/Math.max(a.height,a.width),u=s*a.width,l=s*a.height,c=Af({width:t,height:t}),d=e instanceof o?e:kf(e),h=Math.abs(u-l)/2,f=n&&u<l?h:0,p=n&&l<u?h:0;return wf(c).drawImage(d,f,p,u,l),c}(i,e,t));throw new Error("toBatchTensor - at batchIdx "+r+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+i)})),i=wr(r.map((function(e){return e.toFloat()}))).as4D(n.batchSize,e,e,3);return i}))},e}();function Nf(e){return Oh(this,void 0,void 0,(function(){var t,n,r;return Dh(this,(function(i){switch(i.label){case 0:if(e instanceof Tf)return[2,e];if(!(t=Array.isArray(e)?e:[e]).length)throw new Error("toNetInput - empty array passed as input");return n=function(t){return Array.isArray(e)?" at input index "+t+":":""},(r=t.map(bf)).forEach((function(e,r){if(!Rf(e)&&!Bh(e)&&!Lh(e)){if("string"===typeof t[r])throw new Error("toNetInput -"+n(r)+" string passed, but could not resolve HTMLElement for element id "+t[r]);throw new Error("toNetInput -"+n(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(Lh(e)){var i=e.shape[0];if(1!==i)throw new Error("toNetInput -"+n(r)+" tf.Tensor4D with batchSize "+i+" passed, but not supported in input array")}})),[4,Promise.all(r.map((function(e){return Rf(e)&&(t=e,new Promise((function(e,n){if(t instanceof yf.getEnv().Canvas||Ef(t))return e();function r(t){t.currentTarget&&(t.currentTarget.removeEventListener("load",r),t.currentTarget.removeEventListener("error",i),e(t))}function i(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",i),n(e))}t.addEventListener("load",r),t.addEventListener("error",i)})));var t})))];case 1:return i.sent(),[2,new Tf(r,Array.isArray(e))]}}))}))}function Of(e,t){return Oh(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Dh(this,(function(u){switch(u.label){case 0:return n=yf.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,Nf(e)];case 1:if((i=u.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return(o=i.getInput(0))instanceof n?(a=o,[3,4]):[3,2];case 2:return[4,If(o)];case 3:a=u.sent(),u.label=4;case 4:r=a,u.label=5;case 5:return s=wf(r),[2,t.map((function(e){return e instanceof qh?e.forSize(r.width,r.height).box.floor():e})).map((function(e){return e.clipAtImageBorders(r.width,r.height)})).map((function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=Af({width:r,height:i});return wf(o).putImageData(s.getImageData(t,n,r,i),0,0),o}))]}}))}))}function Df(e,t){return Oh(this,void 0,void 0,(function(){return Dh(this,(function(n){if(!Bh(e)&&!Lh(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Lh(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Qt((function(){var n=e.shape.slice(Lh(e)?1:0),r=n[0],i=n[1],o=n[2],a=t.map((function(e){return e instanceof qh?e.forSize(i,r).box:e})).map((function(e){return e.clipAtImageBorders(i,r)})).map((function(t){var n=t.x,a=t.y,s=t.width,u=t.height;return Fl(e.as3D(r,i,o),[a,n,0],[u,s,o])}));return a}))]}))}))}function Mf(e,t){return Oh(this,void 0,void 0,(function(){var n;return Dh(this,(function(r){switch(r.label){case 0:return[4,(0,yf.getEnv().fetch)(e,t)];case 1:if(!((n=r.sent()).status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}}))}))}function Pf(e){return Oh(this,void 0,void 0,(function(){return Dh(this,(function(t){switch(t.label){case 0:return[4,Mf(e)];case 1:return[2,t.sent().json()]}}))}))}function Ff(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",i=(e=e.replace(r,"")).split("/").filter((function(e){return e})),o=e.endsWith(".json")?i[i.length-1]:n,a=r+(e.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return{modelBaseUri:a=e.startsWith("/")?"/"+a:a,manifestUri:"/"===a?"/"+o:a+"/"+o}}function Bf(e,t){return Oh(this,void 0,void 0,(function(){var n,r,i,o;return Dh(this,(function(a){switch(a.label){case 0:return n=Ff(e,t),r=n.manifestUri,i=n.modelBaseUri,[4,Pf(r)];case 1:return o=a.sent(),[2,ch.loadWeights(o,i)]}}))}))}var Lf=function(){function e(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e);return t.obj[t.objProp]},e.prototype.reassignParamFromPath=function(e,t){var n=this.traversePropertyPath(e),r=n.obj,i=n.objProp;r[i].dispose(),r[i]=t},e.prototype.getParamList=function(){var e=this;return this._paramMappings.map((function(t){var n=t.paramPath;return{path:n,tensor:e.getParamFromPath(n)}}))},e.prototype.getTrainableParams=function(){return this.getParamList().filter((function(e){return e.tensor instanceof Fe}))},e.prototype.getFrozenParams=function(){return this.getParamList().filter((function(e){return!(e.tensor instanceof Fe)}))},e.prototype.variable=function(){var e=this;this.getFrozenParams().forEach((function(t){var n=t.path,r=t.tensor;e.reassignParamFromPath(n,r.variable())}))},e.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach((function(t){var n=t.path,r=t.tensor,i=wn(r.dataSync());r.dispose(),e.reassignParamFromPath(n,i)}))},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.getParamList().forEach((function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()})),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map((function(e){var t=e.tensor;return Array.from(t.dataSync())})).reduce((function(e,t){return e.concat(t)})))},e.prototype.load=function(e){return Oh(this,void 0,void 0,(function(){return Dh(this,(function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.loadFromUri=function(e){return Oh(this,void 0,void 0,(function(){var t;return Dh(this,(function(n){switch(n.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromUri - expected model uri");return[4,Bf(e,this.getDefaultModelName())];case 1:return t=n.sent(),this.loadFromWeightMap(t),[2]}}))}))},e.prototype.loadFromDisk=function(e){return Oh(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,l,c;return Dh(this,(function(d){switch(d.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromDisk - expected model file path");return t=yf.getEnv().readFile,n=Ff(e,this.getDefaultModelName()),r=n.manifestUri,i=n.modelBaseUri,o=function(e){return Promise.all(e.map((function(e){return t(e).then((function(e){return e.buffer}))})))},a=ch.weightsLoaderFactory(o),l=(u=JSON).parse,[4,t(r)];case 1:return s=l.apply(u,[d.sent().toString()]),[4,a(s,i)];case 2:return c=d.sent(),this.loadFromWeightMap(c),[2]}}))}))},e.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.extractWeights=function(e){var t=this.extractParams(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce((function(t,n){if(!t.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property "+n+", for path "+e);return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}}),{nextObj:this.params}),n=t.obj,r=t.objProp;if(!n||!r||!(n[r]instanceof Re))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:n,objProp:r}},e}();function zf(e,t,n){return Qt((function(){var r=ml(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=xu(r,t.bias)}))}function jf(e,t,n){return void 0===n&&(n=!1),Qt((function(){var r=$l(n?xu(ul(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):zf(e,t.conv0,[2,2])),i=zf(r,t.conv1,[1,1]),o=zf($l(xu(r,i)),t.conv2,[1,1]);return $l(xu(r,xu(i,o)))}))}function Wf(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!0),Qt((function(){var i=$l(n?xu(ul(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):zf(e,t.conv0,r?[2,2]:[1,1])),o=zf(i,t.conv1,[1,1]),a=zf($l(xu(i,o)),t.conv2,[1,1]),s=zf($l(xu(i,xu(o,a))),t.conv3,[1,1]);return $l(xu(i,xu(o,xu(a,s))))}))}function Hf(e,t,n,r){return void 0===n&&(n="same"),void 0===r&&(r=!1),Qt((function(){var i=xu(ul(e,t.filters,[1,1],n),t.bias);return r?$l(i):i}))}function Vf(e,t){Object.keys(e).forEach((function(n){t.some((function(e){return e.originalPath===n}))||e[n].dispose()}))}function Gf(e,t){return function(n,r,i,o){var a=An(e(n*r*i*i),[i,i,n,r]),s=Cn(e(r));return t.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:a,bias:s}}}function Uf(e,t){return function(n,r,i){var o=En(e(n*r),[n,r]),a=Cn(e(r));return t.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:o,bias:a}}}var Kf=function(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n};function Xf(e,t){return function(n,r,i){var o=An(e(9*n),[3,3,n,1]),a=An(e(n*r),[1,1,n,r]),s=Cn(e(r));return t.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new Kf(o,a,s)}}function Zf(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),i=e(t+"/bias",1);return new Kf(n,r,i)}}function qf(e,t){return function(n,r,i){var o=e[n];if(!Fh(o,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+o);return t.push({originalPath:n,paramPath:i||n}),o}}function Yf(e){var t=e;return{extractWeights:function(e){var n=t.slice(0,e);return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function Jf(e,t){var n=Gf(e,t),r=Xf(e,t);function i(e,t,i,o){return void 0===o&&(o=!1),{conv0:o?n(e,t,3,i+"/conv0"):r(e,t,i+"/conv0"),conv1:r(t,t,i+"/conv1"),conv2:r(t,t,i+"/conv2")}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:function(e,t,n,o){void 0===o&&(o=!1);var a=i(e,t,n,o);return{conv0:a.conv0,conv1:a.conv1,conv2:a.conv2,conv3:r(t,t,n+"/conv3")}}}}function Qf(e){return function(t){return{filters:e(t+"/filters",4),bias:e(t+"/bias",1)}}}function $f(e,t){var n=qf(e,t),r=Qf(n),i=Zf(n);return{extractDenseBlock3Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):i(e+"/conv0"),conv1:i(e+"/conv1"),conv2:i(e+"/conv2")}},extractDenseBlock4Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):i(e+"/conv0"),conv1:i(e+"/conv1"),conv2:i(e+"/conv2"),conv3:i(e+"/conv3")}}}}var ep=function(e){function t(){return e.call(this,"FaceFeatureExtractor")||this}return Th(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return Qt((function(){var n=Wf(Qh(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(_n(255)),t.dense0,!0);return n=Wf(n,t.dense1),n=Wf(n,t.dense2),n=Wf(n,t.dense3),n=Rl(n,[7,7],[2,2],"valid")}))},t.prototype.forward=function(e){return Oh(this,void 0,void 0,(function(){var t;return Dh(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Nf(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=$f(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return Vf(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=Yf(e),r=n.extractWeights,i=n.getRemainingWeights,o=Jf(r,t).extractDenseBlock4Params,a=o(3,32,"dense0",!0),s=o(32,64,"dense1"),u=o(64,128,"dense2"),l=o(128,256,"dense3");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{dense0:a,dense1:s,dense2:u,dense3:l}}}(e)},t}(Lf);function tp(e,t){return Qt((function(){return xu(yl(e,t.weights),t.bias)}))}function np(e){var t={},n={};return Object.keys(e).forEach((function(r){(r.startsWith("fc")?n:t)[r]=e[r]})),{featureExtractorMap:t,classifierMap:n}}var rp=function(e){function t(t,n){var r=e.call(this,t)||this;return r._faceFeatureExtractor=n,r}return Th(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return Qt((function(){var r=e instanceof Tf?t.faceFeatureExtractor.forwardInput(e):e;return tp(r.as2D(r.shape[0],-1),n.fc)}))},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e,t,n){var r=[],i=Yf(e),o=i.extractWeights,a=i.getRemainingWeights,s=Uf(o,r)(t,n,"fc");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:r,params:{fc:s}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(e){var t=np(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=qf(e,t),r={fc:function(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}("fc")};return Vf(e,t),{params:r,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,i=e.slice(0,e.length-r),o=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(o)},t}(Lf),ip=["neutral","happy","sad","angry","fearful","disgusted","surprised"],op=function(){function e(e){var t=this;if(7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);ip.forEach((function(n,r){t[n]=e[r]}))}return e.prototype.asSortedArray=function(){var e=this;return ip.map((function(t){return{expression:t,probability:e[t]}})).sort((function(e,t){return t.probability-e.probability}))},e}(),ap=function(e){function t(t){return void 0===t&&(t=new ep),e.call(this,"FaceExpressionNet",t)||this}return Th(t,e),t.prototype.forwardInput=function(e){var t=this;return Qt((function(){return Hr(t.runNet(e))}))},t.prototype.forward=function(e){return Oh(this,void 0,void 0,(function(){var t;return Dh(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Nf(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictExpressions=function(e){return Oh(this,void 0,void 0,(function(){var t,n,r,i,o=this;return Dh(this,(function(a){switch(a.label){case 0:return[4,Nf(e)];case 1:return t=a.sent(),[4,this.forwardInput(t)];case 2:return n=a.sent(),[4,Promise.all(Cr(n).map((function(e){return Oh(o,void 0,void 0,(function(){var t;return Dh(this,(function(n){switch(n.label){case 0:return[4,e.data()];case 1:return t=n.sent(),e.dispose(),[2,t]}}))}))})))];case 3:return r=a.sent(),n.dispose(),i=r.map((function(e){return new op(e)})),[2,t.isBatchInput?i:i[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(rp);function sp(e,t){var n={expressions:t};return Object.assign({},e,n)}function up(e){return function(e){return e.detection instanceof qh}(e)&&e.landmarks instanceof nf&&e.unshiftedLandmarks instanceof nf&&e.alignedRect instanceof qh}function lp(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),i=r.align(),o=e.detection.imageDims,a={landmarks:r,unshiftedLandmarks:t,alignedRect:new qh(e.detection.score,i.rescale(o.reverse()),o)};return Object.assign({},e,a)}function cp(e,t,n){if(void 0===n&&(n=!1),e.beginPath(),t.slice(1).forEach((function(n,r){var i=n.x,o=n.y,a=t[r];e.moveTo(a.x,a.y),e.lineTo(i,o)})),n){var r=t[t.length-1],i=t[0];if(!r||!i)return;e.moveTo(r.x,r.y),e.lineTo(i.x,i.y)}e.stroke()}var dp=function(e){void 0===e&&(e={});var t=e.drawLines,n=void 0===t||t,r=e.drawPoints,i=void 0===r||r,o=e.lineWidth,a=e.lineColor,s=e.pointSize,u=e.pointColor;this.drawLines=n,this.drawPoints=i,this.lineWidth=o||1,this.pointSize=s||2,this.lineColor=a||"rgba(0, 255, 255, 1)",this.pointColor=u||"rgba(255, 0, 255, 1)"};!function(){function e(e,t){void 0===t&&(t={}),this.faceLandmarks=e,this.options=new dp(t)}e.prototype.draw=function(e){var t=wf(e),n=this.options,r=n.drawLines,i=n.drawPoints,o=n.lineWidth,a=n.lineColor,s=n.pointSize,u=n.pointColor;if(r&&this.faceLandmarks instanceof of&&(t.strokeStyle=a,t.lineWidth=o,cp(t,this.faceLandmarks.getJawOutline()),cp(t,this.faceLandmarks.getLeftEyeBrow()),cp(t,this.faceLandmarks.getRightEyeBrow()),cp(t,this.faceLandmarks.getNose()),cp(t,this.faceLandmarks.getLeftEye(),!0),cp(t,this.faceLandmarks.getRightEye(),!0),cp(t,this.faceLandmarks.getMouth(),!0)),i){t.strokeStyle=u,t.fillStyle=u;this.faceLandmarks.positions.forEach((function(e){t.beginPath(),t.arc(e.x,e.y,s,0,2*Math.PI),t.fill()}))}}}();function hp(e,t){var n=[],r=Yf(e),i=r.extractWeights,o=r.getRemainingWeights,a=function(e,t){var n=Gf(e,t),r=Xf(e,t);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(e,t,i){return{separable_conv0:r(e,t,i+"/separable_conv0"),separable_conv1:r(t,t,i+"/separable_conv1"),expansion_conv:n(e,t,1,i+"/expansion_conv")}},extractMainBlockParams:function(e,t){return{separable_conv0:r(e,e,t+"/separable_conv0"),separable_conv1:r(e,e,t+"/separable_conv1"),separable_conv2:r(e,e,t+"/separable_conv2")}}}}(i,n),s=a.extractConvParams,u=a.extractSeparableConvParams,l=a.extractReductionBlockParams,c=a.extractMainBlockParams,d={conv_in:s(3,32,3,"entry_flow/conv_in"),reduction_block_0:l(32,64,"entry_flow/reduction_block_0"),reduction_block_1:l(64,128,"entry_flow/reduction_block_1")},h={};Hh(t,0,1).forEach((function(e){h["main_block_"+e]=c(128,"middle_flow/main_block_"+e)}));var f={reduction_block:l(128,256,"exit_flow/reduction_block"),separable_conv:u(256,512,"exit_flow/separable_conv")};if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:n,params:{entry_flow:d,middle_flow:h,exit_flow:f}}}function fp(e,t){var n=[],r=function(e,t){var n=qf(e,t),r=Qf(n),i=Zf(n);return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:function(e){return{separable_conv0:i(e+"/separable_conv0"),separable_conv1:i(e+"/separable_conv1"),expansion_conv:r(e+"/expansion_conv")}},extractMainBlockParams:function(e){return{separable_conv0:i(e+"/separable_conv0"),separable_conv1:i(e+"/separable_conv1"),separable_conv2:i(e+"/separable_conv2")}}}}(e,n),i=r.extractConvParams,o=r.extractSeparableConvParams,a=r.extractReductionBlockParams,s=r.extractMainBlockParams,u={conv_in:i("entry_flow/conv_in"),reduction_block_0:a("entry_flow/reduction_block_0"),reduction_block_1:a("entry_flow/reduction_block_1")},l={};Hh(t,0,1).forEach((function(e){l["main_block_"+e]=s("middle_flow/main_block_"+e)}));var c={reduction_block:a("exit_flow/reduction_block"),separable_conv:o("exit_flow/separable_conv")};return Vf(e,n),{params:{entry_flow:u,middle_flow:l,exit_flow:c},paramMappings:n}}function pp(e,t,n){return xu(ul(e,t.filters,n,"same"),t.bias)}function mp(e,t,n){void 0===n&&(n=!0);var r=n?$l(e):e;return r=zf(r,t.separable_conv0,[1,1]),r=zf($l(r),t.separable_conv1,[1,1]),r=Il(r,[3,3],[2,2],"same"),r=xu(r,pp(e,t.expansion_conv,[2,2]))}var gp,vp=function(e){function t(t){var n=e.call(this,"TinyXception")||this;return n._numMainBlocks=t,n}return Th(t,e),t.prototype.forwardInput=function(e){var t=this,n=this.params;if(!n)throw new Error("TinyXception - load model before inference");return Qt((function(){var r=Qh(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(_n(256)),i=$l(pp(r,n.entry_flow.conv_in,[2,2]));return i=mp(i,n.entry_flow.reduction_block_0,!1),i=mp(i,n.entry_flow.reduction_block_1),Hh(t._numMainBlocks,0,1).forEach((function(e){i=function(e,t){var n=zf($l(e),t.separable_conv0,[1,1]);return n=zf($l(n),t.separable_conv1,[1,1]),n=zf($l(n),t.separable_conv2,[1,1]),xu(n,e)}(i,n.middle_flow["main_block_"+e])})),i=mp(i,n.exit_flow.reduction_block),i=$l(zf(i,n.exit_flow.separable_conv,[1,1]))}))},t.prototype.forward=function(e){return Oh(this,void 0,void 0,(function(){var t;return Dh(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Nf(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(e){return fp(e,this._numMainBlocks)},t.prototype.extractParams=function(e){return hp(e,this._numMainBlocks)},t}(Lf);!function(e){e.FEMALE="female",e.MALE="male"}(gp||(gp={}));var yp=function(e){function t(t){void 0===t&&(t=new vp(2));var n=e.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=t,n}return Th(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return Qt((function(){var r=e instanceof Tf?t.faceFeatureExtractor.forwardInput(e):e,i=Rl(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1);return{age:tp(i,n.fc.age).as1D(),gender:tp(i,n.fc.gender)}}))},t.prototype.forwardInput=function(e){var t=this;return Qt((function(){var n=t.runNet(e),r=n.age,i=n.gender;return{age:r,gender:Hr(i)}}))},t.prototype.forward=function(e){return Oh(this,void 0,void 0,(function(){var t;return Dh(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Nf(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictAgeAndGender=function(e){return Oh(this,void 0,void 0,(function(){var t,n,r,i,o,a,s=this;return Dh(this,(function(u){switch(u.label){case 0:return[4,Nf(e)];case 1:return t=u.sent(),[4,this.forwardInput(t)];case 2:return n=u.sent(),r=Cr(n.age),i=Cr(n.gender),o=r.map((function(e,t){return{ageTensor:e,genderTensor:i[t]}})),[4,Promise.all(o.map((function(e){var t=e.ageTensor,n=e.genderTensor;return Oh(s,void 0,void 0,(function(){var e,r,i,o,a;return Dh(this,(function(s){switch(s.label){case 0:return[4,t.data()];case 1:return e=s.sent()[0],[4,n.data()];case 2:return r=s.sent()[0],o=(i=r>.5)?gp.MALE:gp.FEMALE,a=i?r:1-r,t.dispose(),n.dispose(),[2,{age:e,gender:o,genderProbability:a}]}}))}))})))];case 3:return a=u.sent(),n.age.dispose(),n.gender.dispose(),[2,t.isBatchInput?a:a[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e){var t=[],n=Yf(e),r=n.extractWeights,i=n.getRemainingWeights,o=Uf(r,t),a=o(512,1,"fc/age"),s=o(512,2,"fc/gender");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{fc:{age:a,gender:s}}}}(e)},t.prototype.extractParamsFromWeigthMap=function(e){var t=np(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=qf(e,t);function r(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}var i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Vf(e,t),{params:i,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)},t}(Lf),bp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Th(t,e),t.prototype.postProcess=function(e,t,n){var r=n.map((function(e){var n=e.width,r=e.height,i=t/Math.max(r,n);return{width:n*i,height:r*i}})),i=r.length;return Qt((function(){var n=function(e,t){return wr([Rn([68],e),Rn([68],t)],1).as2D(1,136).as1D()},o=function(e,t){var n=r[e],i=n.width,o=n.height;return t(i,o)?Math.abs(i-o)/2:0},a=e.mul(Rn([i,136],t)).sub(wr(Array.from(Array(i),(function(e,t){return n(function(e){return o(e,(function(e,t){return e<t}))}(t),function(e){return o(e,(function(e,t){return t<e}))}(t))})))).div(wr(Array.from(Array(i),(function(e,t){return n(r[t].width,r[t].height)}))));return a}))},t.prototype.forwardInput=function(e){var t=this;return Qt((function(){var n=t.runNet(e);return t.postProcess(n,e.inputSize,e.inputDimensions.map((function(e){return{height:e[0],width:e[1]}})))}))},t.prototype.forward=function(e){return Oh(this,void 0,void 0,(function(){var t;return Dh(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Nf(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.detectLandmarks=function(e){return Oh(this,void 0,void 0,(function(){var t,n,r,i=this;return Dh(this,(function(o){switch(o.label){case 0:return[4,Nf(e)];case 1:return t=o.sent(),n=Qt((function(){return Cr(i.forwardInput(t))})),[4,Promise.all(n.map((function(e,n){return Oh(i,void 0,void 0,(function(){var r,i,o,a,s;return Dh(this,(function(u){switch(u.label){case 0:return o=(i=Array).from,[4,e.data()];case 1:return r=o.apply(i,[u.sent()]),a=r.filter((function(e,t){return zh(t)})),s=r.filter((function(e,t){return!zh(t)})),[2,new of(Array(68).fill(0).map((function(e,t){return new Uh(a[t],s[t])})),{height:t.getInputHeight(n),width:t.getInputWidth(n)})]}}))}))})))];case 2:return r=o.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getClassifierChannelsOut=function(){return 136},t}(rp),wp=function(e){function t(t){return void 0===t&&(t=new ep),e.call(this,"FaceLandmark68Net",t)||this}return Th(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(bp);var xp=function(e){function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return Th(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Qt((function(){var n=jf(Qh(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(_n(255)),t.dense0,!0);return n=jf(n,t.dense1),n=jf(n,t.dense2),n=Rl(n,[14,14],[2,2],"valid")}))},t.prototype.forward=function(e){return Oh(this,void 0,void 0,(function(){var t;return Dh(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Nf(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=$f(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return Vf(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=Yf(e),r=n.extractWeights,i=n.getRemainingWeights,o=Jf(r,t).extractDenseBlock3Params,a=o(3,32,"dense0",!0),s=o(32,64,"dense1"),u=o(64,128,"dense2");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{dense0:a,dense1:s,dense2:u}}}(e)},t}(Lf),_p=function(e){function t(t){return void 0===t&&(t=new xp),e.call(this,"FaceLandmark68TinyNet",t)||this}return Th(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(bp);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Th(t,e)}(wp);function Cp(e,t,n,r,i){void 0===i&&(i="same");var o=t.conv,a=o.filters,s=o.bias,u=ul(e,a,n,i);return u=function(e,t){return xu(Pu(e,t.weights),t.biases)}(u=xu(u,s),t.scale),r?$l(u):u}function Ep(e,t){return Cp(e,t,[1,1],!1)}function Sp(e,t){return Cp(e,t,[2,2],!0,"valid")}function Ap(e,t){function n(n,r,i,o){var a=function(t,n,r){var i=e(t),o=i.length/(n*r*r);if(o%1!==0)throw new Error("depth has to be an integer: "+o+", weights.length: "+i.length+", numFilters: "+n+", filterSize: "+r);return Qt((function(){return nc(An(i,[n,o,r,r]),[2,3,1,0])}))}(n,r,i),s=Cn(e(r));return t.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:a,bias:s}}function r(r,i,o,a){var s=n(r,i,o,a+"/conv"),u=function(n,r){var i=Cn(e(n)),o=Cn(e(n));return t.push({paramPath:r+"/weights"},{paramPath:r+"/biases"}),{weights:i,biases:o}}(i,a+"/scale");return{conv:s,scale:u}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e,t,n,i,o){return void 0===o&&(o=!1),{conv1:r((o?.5:1)*e,t,n,i+"/conv1"),conv2:r(e,t,n,i+"/conv2")}}}}function kp(e,t){var n=qf(e,t);function r(e){var t=n(e+"/conv/filters",4),r=n(e+"/conv/bias",1),i=function(e){return{weights:n(e+"/scale/weights",1),biases:n(e+"/scale/biases",1)}}(e);return{conv:{filters:t,bias:r},scale:i}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e){return{conv1:r(e+"/conv1"),conv2:r(e+"/conv2")}}}}function Ip(e){var t=[],n=kp(e,t),r=n.extractConvLayerParams,i=n.extractResidualLayerParams,o=r("conv32_down"),a=i("conv32_1"),s=i("conv32_2"),u=i("conv32_3"),l=i("conv64_down"),c=i("conv64_1"),d=i("conv64_2"),h=i("conv64_3"),f=i("conv128_down"),p=i("conv128_1"),m=i("conv128_2"),g=i("conv256_down"),v=i("conv256_1"),y=i("conv256_2"),b=i("conv256_down_out"),w=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!Fh(w,2))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+w);var x={conv32_down:o,conv32_1:a,conv32_2:s,conv32_3:u,conv64_down:l,conv64_1:c,conv64_2:d,conv64_3:h,conv128_down:f,conv128_1:p,conv128_2:m,conv256_down:g,conv256_1:v,conv256_2:y,conv256_down_out:b,fc:w};return Vf(e,t),{params:x,paramMappings:t}}function Rp(e,t){var n=function(e,t){return Cp(e,t,[1,1],!0)}(e,t.conv1);return n=Ep(n,t.conv2),n=xu(n,e),n=$l(n)}function Tp(e,t){var n=Sp(e,t.conv1);n=Ep(n,t.conv2);var r=Rl(e,2,2,"valid"),i=In(r.shape),o=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){var a=Mh(n.shape);a[1]=1;var s=In(a),u=Mh((n=Dn([n,s],1)).shape);u[2]=1;var l=In(u);n=Dn([n,l],2)}return r=o?Dn([r,i],3):r,n=xu(r,n),n=$l(n)}var Np=function(e){function t(){return e.call(this,"FaceRecognitionNet")||this}return Th(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return Qt((function(){var n=Sp(Qh(e.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(_n(256)),t.conv32_down);n=Rp(n=Il(n,3,2,"valid"),t.conv32_1),n=Rp(n,t.conv32_2),n=Rp(n,t.conv32_3),n=Rp(n=Tp(n,t.conv64_down),t.conv64_1),n=Rp(n,t.conv64_2),n=Rp(n,t.conv64_3),n=Rp(n=Tp(n,t.conv128_down),t.conv128_1),n=Rp(n,t.conv128_2),n=Rp(n=Tp(n,t.conv256_down),t.conv256_1);var r=(n=Tp(n=Rp(n,t.conv256_2),t.conv256_down_out)).mean([1,2]);return yl(r,t.fc)}))},t.prototype.forward=function(e){return Oh(this,void 0,void 0,(function(){var t;return Dh(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Nf(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.computeFaceDescriptor=function(e){return Oh(this,void 0,void 0,(function(){var t,n,r,i=this;return Dh(this,(function(o){switch(o.label){case 0:return[4,Nf(e)];case 1:return t=o.sent(),n=Qt((function(){return Cr(i.forwardInput(t))})),[4,Promise.all(n.map((function(e){return e.data()})))];case 2:return r=o.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(e){return Ip(e)},t.prototype.extractParams=function(e){return function(e){var t=Yf(e),n=t.extractWeights,r=t.getRemainingWeights,i=[],o=Ap(n,i),a=o.extractConvLayerParams,s=o.extractResidualLayerParams,u=a(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),d=s(9216,32,3,"conv32_3"),h=s(36864,64,3,"conv64_down",!0),f=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),m=s(36864,64,3,"conv64_3"),g=s(147456,128,3,"conv128_down",!0),v=s(147456,128,3,"conv128_1"),y=s(147456,128,3,"conv128_2"),b=s(589824,256,3,"conv256_down",!0),w=s(589824,256,3,"conv256_1"),x=s(589824,256,3,"conv256_2"),_=s(589824,256,3,"conv256_down_out"),C=Qt((function(){return nc(En(n(32768),[128,256]),[1,0])}));if(i.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{conv32_down:u,conv32_1:l,conv32_2:c,conv32_3:d,conv64_down:h,conv64_1:f,conv64_2:p,conv64_3:m,conv128_down:g,conv128_1:v,conv128_2:y,conv256_down:b,conv256_1:w,conv256_2:x,conv256_down_out:_,fc:C},paramMappings:i}}(e)},t}(Lf);function Op(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var Dp=function(){function e(e){var t=void 0===e?{}:e,n=t.minFaceSize,r=t.scaleFactor,i=t.maxNumScales,o=t.scoreThresholds,a=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=i||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=a,"number"!==typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!==typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!==typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some((function(e){return"number"!==typeof e})))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some((function(e){return"number"!==typeof e}))))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function Mp(e,t){function n(n,r,i,o,a){var s=An(e(n*r*i*i),[i,i,n,r]),u=Cn(e(r));return t.push({paramPath:o+"/filters"},{paramPath:o+"/"+(a?"batch_norm_offset":"bias")}),{filters:s,bias:u}}function r(e,t,r,i){var o=n(e,t,r,i,!0);return{filters:o.filters,batch_norm_offset:o.bias}}function i(n,i,o){var a=function(n,r){var i=An(e(9*n),[3,3,n,1]),o=Cn(e(n)),a=Cn(e(n)),s=Cn(e(n)),u=Cn(e(n));return t.push({paramPath:r+"/filters"},{paramPath:r+"/batch_norm_scale"},{paramPath:r+"/batch_norm_offset"},{paramPath:r+"/batch_norm_mean"},{paramPath:r+"/batch_norm_variance"}),{filters:i,batch_norm_scale:o,batch_norm_offset:a,batch_norm_mean:s,batch_norm_variance:u}}(n,o+"/depthwise_conv");return{depthwise_conv:a,pointwise_conv:r(n,i,1,o+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:i(32,64,"mobilenetv1/conv_1"),conv_2:i(64,128,"mobilenetv1/conv_2"),conv_3:i(128,128,"mobilenetv1/conv_3"),conv_4:i(128,256,"mobilenetv1/conv_4"),conv_5:i(256,256,"mobilenetv1/conv_5"),conv_6:i(256,512,"mobilenetv1/conv_6"),conv_7:i(512,512,"mobilenetv1/conv_7"),conv_8:i(512,512,"mobilenetv1/conv_8"),conv_9:i(512,512,"mobilenetv1/conv_9"),conv_10:i(512,512,"mobilenetv1/conv_10"),conv_11:i(512,512,"mobilenetv1/conv_11"),conv_12:i(512,1024,"mobilenetv1/conv_12"),conv_13:i(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}function Pp(e){var t=[],n=function(e,t){var n=qf(e,t);function r(e,t,r){return{filters:n(e+"/Conv2d_"+t+"_pointwise/weights",4,r+"/filters"),batch_norm_offset:n(e+"/Conv2d_"+t+"_pointwise/convolution_bn_offset",1,r+"/batch_norm_offset")}}function i(e){var t="mobilenetv1/conv_"+e,i="MobilenetV1/Conv2d_"+e+"_depthwise",o=t+"/depthwise_conv",a=t+"/pointwise_conv";return{depthwise_conv:{filters:n(i+"/depthwise_weights",4,o+"/filters"),batch_norm_scale:n(i+"/BatchNorm/gamma",1,o+"/batch_norm_scale"),batch_norm_offset:n(i+"/BatchNorm/beta",1,o+"/batch_norm_offset"),batch_norm_mean:n(i+"/BatchNorm/moving_mean",1,o+"/batch_norm_mean"),batch_norm_variance:n(i+"/BatchNorm/moving_variance",1,o+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",e,a)}}function o(e,t){return{filters:n(e+"/weights",4,t+"/filters"),bias:n(e+"/biases",1,t+"/bias")}}function a(e){return{box_encoding_predictor:o("Prediction/BoxPredictor_"+e+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+e+"/box_encoding_predictor"),class_predictor:o("Prediction/BoxPredictor_"+e+"/ClassPredictor","prediction_layer/box_predictor_"+e+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:a(0),box_predictor_1:a(1),box_predictor_2:a(2),box_predictor_3:a(3),box_predictor_4:a(4),box_predictor_5:a(5)}}}}(e,t),r=n.extractMobilenetV1Params,i=n.extractPredictionLayerParams,o=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!Bh(o))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+o);var a={mobilenetv1:r(),prediction_layer:i(),output_layer:{extra_dim:o}};return Vf(e,t),{params:a,paramMappings:t}}function Fp(e,t,n){return Qt((function(){var r=ul(e,t.filters,n,"same");return r=xu(r,t.batch_norm_offset),Rs(r,0,6)}))}function Bp(e,t){return Qt((function(){var n=null,r=Fp(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach((function(e,t){var i=t+1,o=function(e){return[2,4,6,12].some((function(t){return t===e}))?[2,2]:[1,1]}(i);r=function(e,t,n){return Qt((function(){var r=hl(e,t.filters,n,"same");return r=du(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,.0010000000474974513),Rs(r,0,6)}))}(r,e.depthwise_conv,o),r=Fp(r,e.pointwise_conv,[1,1]),11===i&&(n=r)})),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}}))}function Lp(e,t,n){var r=e.arraySync(),i=Math.min(r[t][0],r[t][2]),o=Math.min(r[t][1],r[t][3]),a=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),u=Math.min(r[n][0],r[n][2]),l=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),d=Math.max(r[n][1],r[n][3]),h=(a-i)*(s-o),f=(c-u)*(d-l);if(h<=0||f<=0)return 0;var p=Math.max(i,u),m=Math.max(o,l),g=Math.min(a,c),v=Math.min(s,d),y=Math.max(g-p,0)*Math.max(v-m,0);return y/(h+f-y)}function zp(e,t){var n=function(e){var t=Cr(nc(e,[1,0])),n=[ju(t[2],t[0]),ju(t[3],t[1])];return{sizes:n,centers:[xu(t[0],Su(n[0],_n(2))),xu(t[1],Su(n[1],_n(2)))]}}(e),r=n.sizes,i=n.centers,o=Cr(nc(t,[1,0])),a=Su(Pu(Ds(Su(o[2],_n(5))),r[0]),_n(2)),s=xu(Pu(Su(o[0],_n(10)),r[0]),i[0]),u=Su(Pu(Ds(Su(o[3],_n(5))),r[1]),_n(2)),l=xu(Pu(Su(o[1],_n(10)),r[1]),i[1]);return nc(wr([ju(s,a),ju(l,u),xu(s,a),xu(l,u)]),[1,0])}function jp(e,t){return Qt((function(){var n=e.shape[0];return{boxPredictionEncoding:vr(Hf(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:vr(Hf(e,t.class_predictor),[n,-1,3])}}))}var Wp=function(){function e(e){var t=void 0===e?{}:e,n=t.minConfidence,r=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!==typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!==typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),Hp=function(e){function t(){return e.call(this,"SsdMobilenetv1")||this}return Th(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return Qt((function(){var n=e.toBatchTensor(512,!1).toFloat(),r=Bp(ju(Pu(n,_n(.007843137718737125)),_n(1)),t.mobilenetv1),i=function(e,t,n){return Qt((function(){var r=Fp(e,n.conv_0,[1,1]),i=Fp(r,n.conv_1,[2,2]),o=Fp(i,n.conv_2,[1,1]),a=Fp(o,n.conv_3,[2,2]),s=Fp(a,n.conv_4,[1,1]),u=Fp(s,n.conv_5,[2,2]),l=Fp(u,n.conv_6,[1,1]),c=Fp(l,n.conv_7,[2,2]),d=jp(t,n.box_predictor_0),h=jp(e,n.box_predictor_1),f=jp(i,n.box_predictor_2),p=jp(a,n.box_predictor_3),m=jp(u,n.box_predictor_4),g=jp(c,n.box_predictor_5);return{boxPredictions:Dn([d.boxPredictionEncoding,h.boxPredictionEncoding,f.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding],1),classPredictions:Dn([d.classPrediction,h.classPrediction,f.classPrediction,p.classPrediction,m.classPrediction,g.classPrediction],1)}}))}(r.out,r.conv11,t.prediction_layer);return function(e,t,n){return Qt((function(){var r=e.shape[0],i=zp(vr(xr(n.extra_dim,[r,1,1]),[-1,4]),vr(e,[-1,4]));i=vr(i,[r,i.shape[0]/r,4]);var o=Vs(Dl(t,[0,0,1],[-1,-1,-1])),a=Dl(o,[0,0,0],[-1,-1,1]);return a=vr(a,[r,a.shape[1]]),{boxes:Cr(i),scores:Cr(a)}}))}(i.boxPredictions,i.classPredictions,t.output_layer)}))},t.prototype.forward=function(e){return Oh(this,void 0,void 0,(function(){var t;return Dh(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Nf(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.locateFaces=function(e,t){return void 0===t&&(t={}),Oh(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l,c,d,h,f,p,m,g,v,y,b,w,x;return Dh(this,(function(_){switch(_.label){case 0:return n=new Wp(t),r=n.maxResults,i=n.minConfidence,[4,Nf(e)];case 1:for(o=_.sent(),a=this.forwardInput(o),s=a.boxes,u=a.scores,l=s[0],c=u[0],d=1;d<s.length;d++)s[d].dispose(),u[d].dispose();return p=(f=Array).from,[4,c.data()];case 2:return h=p.apply(f,[_.sent()]),.5,m=function(e,t,n,r,i){var o=e.shape[0],a=Math.min(n,o),s=t.map((function(e,t){return{score:e,boxIndex:t}})).filter((function(e){return e.score>i})).sort((function(e,t){return t.score-e.score})),u=function(e){return e<=r?1:0},l=[];return s.forEach((function(t){if(!(l.length>=a)){for(var n=t.score,r=l.length-1;r>=0;--r){var o=Lp(e,t.boxIndex,l[r]);if(0!==o&&(t.score*=u(o),t.score<=i))break}n===t.score&&l.push(t.boxIndex)}})),l}(l,h,r,.5,i),g=o.getReshapedInputDimensions(0),v=o.inputSize,y=v/g.width,b=v/g.height,w=l.arraySync(),x=m.map((function(e){var t=[Math.max(0,w[e][0]),Math.min(1,w[e][2])].map((function(e){return e*b})),n=t[0],r=t[1],i=[Math.max(0,w[e][1]),Math.min(1,w[e][3])].map((function(e){return e*y})),a=i[0],s=i[1];return new qh(h[e],new tf(a,n,s-a,r-n),{height:o.getInputHeight(0),width:o.getInputWidth(0)})})),l.dispose(),c.dispose(),[2,x]}}))}))},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(e){return Pp(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=Yf(e),r=n.extractWeights,i=n.getRemainingWeights,o=Mp(r,t),a=o.extractMobilenetV1Params,s=o.extractPredictionLayerParams,u=a(),l=s(),c={extra_dim:Sn(r(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:c},paramMappings:t}}(e)},t}(Lf);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Th(t,e)}(Hp);var Vp,Gp=[new Uh(.738768,.874946),new Uh(2.42204,2.65704),new Uh(4.30971,7.04493),new Uh(10.246,4.59428),new Uh(12.6868,11.8741)],Up=[new Uh(1.603231,2.094468),new Uh(6.041143,7.080126),new Uh(2.882459,3.518061),new Uh(4.266906,5.178857),new Uh(9.041765,10.66308)],Kp=[117.001,114.697,97.404],Xp=function(e){return"number"===typeof e};function Zp(e){return Qt((function(){var t=Pu(e,_n(.10000000149011612));return xu($l(ju(e,t)),t)}))}function qp(e,t){return Qt((function(){var n=ur(e,[[0,0],[1,1],[1,1],[0,0]]);return n=ul(n,t.conv.filters,[1,1],"valid"),n=ju(n,t.bn.sub),n=Pu(n,t.bn.truediv),Zp(n=xu(n,t.conv.bias))}))}function Yp(e,t){return Qt((function(){var n=ur(e,[[0,0],[1,1],[1,1],[0,0]]);return n=ml(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),Zp(n=xu(n,t.bias))}))}function Jp(e,t){var n=Gf(e,t);var r=Xf(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:function(r,i,o){var a=n(r,i,3,o+"/conv"),s=function(n,r){var i=Cn(e(n)),o=Cn(e(n));return t.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:i,truediv:o}}(i,o+"/bn");return{conv:a,bn:s}},extractSeparableConvParams:r}}function Qp(e,t){var n=qf(e,t);function r(e){return{filters:n(e+"/filters",4),bias:n(e+"/bias",1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(e){var t=r(e+"/conv"),i=function(e){return{sub:n(e+"/sub",1),truediv:n(e+"/truediv",1)}}(e+"/bn");return{conv:t,bn:i}},extractSeparableConvParams:Zf(n)}}!function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"}(Vp||(Vp={}));var $p=function(){function e(e){var t=void 0===e?{}:e,n=t.inputSize,r=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!==typeof this._inputSize||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!==typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),em=function(e){function t(t){var n=e.call(this,"TinyYolov2")||this;return function(e){if(!e)throw new Error("invalid config: "+e);if("boolean"!==typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!Xp(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every((function(e){return"string"===typeof e})))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map((function(e){return e||{}})).every((function(e){return Xp(e.x)&&Xp(e.y)})))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(Xp)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}(t),n._config=t,n}return Th(t,e),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(e,t){var n=qp(e,t.conv0);return n=qp(n=Il(n,[2,2],[2,2],"same"),t.conv1),n=qp(n=Il(n,[2,2],[2,2],"same"),t.conv2),n=qp(n=Il(n,[2,2],[2,2],"same"),t.conv3),n=qp(n=Il(n,[2,2],[2,2],"same"),t.conv4),n=qp(n=Il(n,[2,2],[2,2],"same"),t.conv5),n=qp(n=Il(n,[2,2],[1,1],"same"),t.conv6),Hf(n=qp(n,t.conv7),t.conv8,"valid",!1)},t.prototype.runMobilenet=function(e,t){var n=this.config.isFirstLayerConv2d?Zp(Hf(e,t.conv0,"valid",!1)):Yp(e,t.conv0);return n=Yp(n=Il(n,[2,2],[2,2],"same"),t.conv1),n=Yp(n=Il(n,[2,2],[2,2],"same"),t.conv2),n=Yp(n=Il(n,[2,2],[2,2],"same"),t.conv3),n=Yp(n=Il(n,[2,2],[2,2],"same"),t.conv4),n=Yp(n=Il(n,[2,2],[2,2],"same"),t.conv5),n=Il(n,[2,2],[1,1],"same"),n=t.conv6?Yp(n,t.conv6):n,Hf(n=t.conv7?Yp(n,t.conv7):n,t.conv8,"valid",!1)},t.prototype.forwardInput=function(e,t){var n=this,r=this.params;if(!r)throw new Error("TinyYolov2 - load model before inference");return Qt((function(){var i=e.toBatchTensor(t,!1).toFloat();return i=(i=n.config.meanRgb?Qh(i,n.config.meanRgb):i).div(_n(256)),n.config.withSeparableConvs?n.runMobilenet(i,r):n.runTinyYolov2(i,r)}))},t.prototype.forward=function(e,t){return Oh(this,void 0,void 0,(function(){var n;return Dh(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Nf(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent()]}}))}))},t.prototype.detect=function(e,t){return void 0===t&&(t={}),Oh(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l,c,d,h,f,p,m=this;return Dh(this,(function(g){switch(g.label){case 0:return n=new $p(t),r=n.inputSize,i=n.scoreThreshold,[4,Nf(e)];case 1:return o=g.sent(),[4,this.forwardInput(o,r)];case 2:return a=g.sent(),s=Qt((function(){return Cr(a)[0].expandDims()})),u={width:o.getInputWidth(0),height:o.getInputHeight(0)},[4,this.extractBoxes(s,o.getReshapedInputDimensions(0),i)];case 3:return l=g.sent(),a.dispose(),s.dispose(),c=l.map((function(e){return e.box})),d=l.map((function(e){return e.score})),h=l.map((function(e){return e.classScore})),f=l.map((function(e){return m.config.classes[e.label]})),p=Jh(c.map((function(e){return e.rescale(r)})),d,this.config.iouThreshold,!0),[2,p.map((function(e){return new Zh(d[e],h[e],f[e],c[e],u)}))]}}))}))},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(e){return function(e,t){var n,r=[],i=Qp(e,r),o=i.extractConvParams,a=i.extractConvWithBatchNormParams,s=i.extractSeparableConvParams;if(t.withSeparableConvs){var u=t.filterSizes&&t.filterSizes.length||9;n={conv0:t.isFirstLayerConv2d?o("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:u>7?s("conv6"):void 0,conv7:u>8?s("conv7"):void 0,conv8:o("conv8")}}else n={conv0:a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:a("conv6"),conv7:a("conv7"),conv8:o("conv8")};return Vf(e,r),{params:n,paramMappings:r}}(e,this.config)},t.prototype.extractParams=function(e){var n=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return function(e,t,n,r){var i,o=Yf(e),a=o.extractWeights,s=o.getRemainingWeights,u=[],l=Jp(a,u),c=l.extractConvParams,d=l.extractConvWithBatchNormParams,h=l.extractSeparableConvParams;if(t.withSeparableConvs){var f=r[0],p=r[1],m=r[2],g=r[3],v=r[4],y=r[5],b=r[6],w=r[7],x=r[8];i={conv0:t.isFirstLayerConv2d?c(f,p,3,"conv0"):h(f,p,"conv0"),conv1:h(p,m,"conv1"),conv2:h(m,g,"conv2"),conv3:h(g,v,"conv3"),conv4:h(v,y,"conv4"),conv5:h(y,b,"conv5"),conv6:w?h(b,w,"conv6"):void 0,conv7:x?h(w,x,"conv7"):void 0,conv8:c(x||w||b,5*n,1,"conv8")}}else f=r[0],p=r[1],m=r[2],g=r[3],v=r[4],y=r[5],b=r[6],w=r[7],x=r[8],i={conv0:d(f,p,"conv0"),conv1:d(p,m,"conv1"),conv2:d(m,g,"conv2"),conv3:d(g,v,"conv3"),conv4:d(v,y,"conv4"),conv5:d(y,b,"conv5"),conv6:d(b,w,"conv6"),conv7:d(w,x,"conv7"),conv8:c(x,5*n,1,"conv8")};if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{params:i,paramMappings:u}}(e,this.config,this.boxEncodingSize,n)},t.prototype.extractBoxes=function(e,t,n){return Oh(this,void 0,void 0,(function(){var r,i,o,a,s,u,l,c,d,h,f,p,m,g,v,y,b,w,x,_,C,E,S,A,k,I,R,T,N,O=this;return Dh(this,(function(D){switch(D.label){case 0:return r=t.width,i=t.height,o=Math.max(r,i),a=o/r,s=o/i,u=e.shape[1],l=this.config.anchors.length,c=Qt((function(){var t=e.reshape([u,u,l,O.boxEncodingSize]);return[t.slice([0,0,0,0],[u,u,l,4]),t.slice([0,0,0,4],[u,u,l,1]),O.withClassScores?Hr(t.slice([0,0,0,5],[u,u,l,O.config.classes.length]),3):_n(0)]})),d=c[0],h=c[1],f=c[2],p=[],[4,h.array()];case 1:return m=D.sent(),[4,d.array()];case 2:g=D.sent(),v=0,D.label=3;case 3:if(!(v<u))return[3,12];y=0,D.label=4;case 4:if(!(y<u))return[3,11];b=0,D.label=5;case 5:return b<l?(w=$h(m[v][y][b][0]),!n||w>n?(x=(y+$h(g[v][y][b][0]))/u*a,_=(v+$h(g[v][y][b][1]))/u*s,C=Math.exp(g[v][y][b][2])*this.config.anchors[b].x/u*a,E=Math.exp(g[v][y][b][3])*this.config.anchors[b].y/u*s,S=x-C/2,A=_-E/2,k={row:v,col:y,anchor:b},this.withClassScores?[4,this.extractPredictedClass(f,k)]:[3,7]):[3,9]):[3,10];case 6:return N=D.sent(),[3,8];case 7:N={classScore:1,label:0},D.label=8;case 8:R=(I=N).classScore,T=I.label,p.push(Nh({box:new Xh(S,A,S+C,A+E),score:w,classScore:w*R,label:T},k)),D.label=9;case 9:return b++,[3,5];case 10:return y++,[3,4];case 11:return v++,[3,3];case 12:return d.dispose(),h.dispose(),f.dispose(),[2,p]}}))}))},t.prototype.extractPredictedClass=function(e,t){return Oh(this,void 0,void 0,(function(){var n,r,i,o;return Dh(this,(function(a){switch(a.label){case 0:return n=t.row,r=t.col,i=t.anchor,[4,e.array()];case 1:return o=a.sent(),[2,Array(this.config.classes.length).fill(0).map((function(e,t){return o[n][r][i][t]})).map((function(e,t){return{classScore:e,label:t}})).reduce((function(e,t){return e.classScore>t.classScore?e:t}))]}}))}))},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(Lf),tm=function(e){function t(t){void 0===t&&(t=!0);var n=Object.assign({},{withSeparableConvs:t,iouThreshold:.4,classes:["face"]},t?{anchors:Up,meanRgb:Kp}:{anchors:Gp,withClassScores:!0});return e.call(this,n)||this}return Th(t,e),Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return Oh(this,void 0,void 0,(function(){return Dh(this,(function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map((function(e){return new qh(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(em);var nm=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return Th(t,e),t}($p),rm=function(){function e(){}return e.prototype.then=function(e){return Oh(this,void 0,void 0,(function(){var t;return Dh(this,(function(n){switch(n.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[n.sent()])]}}))}))},e.prototype.run=function(){return Oh(this,void 0,void 0,(function(){return Dh(this,(function(e){throw new Error("ComposableTask - run is not implemented")}))}))},e}();function im(e,t){var n={descriptor:t};return Object.assign({},e,n)}function om(e,t,n,r,i){return void 0===i&&(i=function(e){return e.alignedRect}),Oh(this,void 0,void 0,(function(){var o,a,s,u,l;return Dh(this,(function(c){switch(c.label){case 0:return o=e.map((function(e){return up(e)?i(e):e.detection})),(s=r)?[3,5]:t instanceof Re?[4,Df(t,o)]:[3,2];case 1:return u=c.sent(),[3,4];case 2:return[4,Of(t,o)];case 3:u=c.sent(),c.label=4;case 4:s=u,c.label=5;case 5:return[4,n(a=s)];case 6:return l=c.sent(),a.forEach((function(e){return e instanceof Re&&e.dispose()})),[2,l]}}))}))}function am(e,t,n,r,i){return Oh(this,void 0,void 0,(function(){var o=this;return Dh(this,(function(a){return[2,om([e],t,(function(e){return Oh(o,void 0,void 0,(function(){return Dh(this,(function(t){return[2,n(e[0])]}))}))}),r,i)]}))}))}function sm(e){var t=Yf(e),n=t.extractWeights,r=t.getRemainingWeights,i=[],o=function(e,t){var n=Gf(e,t),r=Uf(e,t);function i(n,r){var i=Cn(e(n));return t.push({paramPath:r}),i}function o(e,t,r){return void 0===r&&(r=!1),{conv1:n(e[0],e[1],3,t+"/conv1"),prelu1_alpha:i(e[1],t+"/prelu1_alpha"),conv2:n(e[1],e[2],3,t+"/conv2"),prelu2_alpha:i(e[2],t+"/prelu2_alpha"),conv3:n(e[2],e[3],r?2:3,t+"/conv3"),prelu3_alpha:i(e[3],t+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=o([3,10,16,32],"pnet"),t=n(32,2,1,"pnet/conv4_1"),r=n(32,4,1,"pnet/conv4_2");return Nh(Nh({},e),{conv4_1:t,conv4_2:r})},extractRNetParams:function(){var e=o([3,28,48,64],"rnet",!0),t=r(576,128,"rnet/fc1"),n=i(128,"rnet/prelu4_alpha"),a=r(128,2,"rnet/fc2_1"),s=r(128,4,"rnet/fc2_2");return Nh(Nh({},e),{fc1:t,prelu4_alpha:n,fc2_1:a,fc2_2:s})},extractONetParams:function(){var e=o([3,32,64,64],"onet"),t=n(64,128,2,"onet/conv4"),a=i(128,"onet/prelu4_alpha"),s=r(1152,256,"onet/fc1"),u=i(256,"onet/prelu5_alpha"),l=r(256,2,"onet/fc2_1"),c=r(256,4,"onet/fc2_2"),d=r(256,10,"onet/fc2_3");return Nh(Nh({},e),{conv4:t,prelu4_alpha:a,fc1:s,prelu5_alpha:u,fc2_1:l,fc2_2:c,fc2_3:d})}}}(n,i),a=o.extractPNetParams,s=o.extractRNetParams,u=o.extractONetParams,l=a(),c=s(),d=u();if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:c,onet:d},paramMappings:i}}function um(e){var t=[],n=function(e,t){var n=qf(e,t);function r(e){return{filters:n(e+"/weights",4,e+"/filters"),bias:n(e+"/bias",1)}}function i(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}function o(e){return n(e,1)}function a(e){return{conv1:r(e+"/conv1"),prelu1_alpha:o(e+"/prelu1_alpha"),conv2:r(e+"/conv2"),prelu2_alpha:o(e+"/prelu2_alpha"),conv3:r(e+"/conv3"),prelu3_alpha:o(e+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=a("pnet"),t=r("pnet/conv4_1"),n=r("pnet/conv4_2");return Nh(Nh({},e),{conv4_1:t,conv4_2:n})},extractRNetParams:function(){var e=a("rnet"),t=i("rnet/fc1"),n=o("rnet/prelu4_alpha"),r=i("rnet/fc2_1"),s=i("rnet/fc2_2");return Nh(Nh({},e),{fc1:t,prelu4_alpha:n,fc2_1:r,fc2_2:s})},extractONetParams:function(){var e=a("onet"),t=r("onet/conv4"),n=o("onet/prelu4_alpha"),s=i("onet/fc1"),u=o("onet/prelu5_alpha"),l=i("onet/fc2_1"),c=i("onet/fc2_2"),d=i("onet/fc2_3");return Nh(Nh({},e),{conv4:t,prelu4_alpha:n,fc1:s,prelu5_alpha:u,fc2_1:l,fc2_2:c,fc2_3:d})}}}(e,t),r=n.extractPNetParams,i=n.extractRNetParams,o=n.extractONetParams,a=r(),s=i(),u=o();return Vf(e,t),{params:{pnet:a,rnet:s,onet:u},paramMappings:t}}function lm(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}var cm=function(e){function t(t,n,r,i){return e.call(this,{left:t,top:n,right:r,bottom:i},!0)||this}return Th(t,e),t}(Kh);function dm(e){return Qt((function(){return Pu(ju(e,_n(127.5)),_n(.0078125))}))}function hm(e,t){return Qt((function(){return xu($l(e),Pu(t,zs($l(zs(e)))))}))}function fm(e,t,n){return void 0===n&&(n=!1),Qt((function(){var r=Hf(e,t.conv1,"valid");return r=hm(r,t.prelu1_alpha),r=hm(r=Hf(r=Il(r,n?[2,2]:[3,3],[2,2],"same"),t.conv2,"valid"),t.prelu2_alpha),r=hm(r=Hf(r=n?r:Il(r,[3,3],[2,2],"valid"),t.conv3,"valid"),t.prelu3_alpha)}))}function pm(e,t,n,r,i){i.stage1=[];var o=t.map((function(t){return Qt((function(){var n={scale:t},i=function(e,t){return Qt((function(){var n=lm(t,e.shape.slice(1)),r=n.height,i=n.width,o=dm(Zc.resizeBilinear(e,[r,i]));return nc(o,[0,2,1,3])}))}(e,t),o=Date.now(),a=function(e,t){return Qt((function(){var n=fm(e,t,!0),r=Hf(n,t.conv4_1,"valid"),i=ir(Gl(r,3),3);return{prob:Hr(ju(r,i),3),regions:Hf(n,t.conv4_2,"valid")}}))}(i,r),s=a.prob,u=a.regions;return n.pnet=Date.now()-o,{scoresTensor:Cr(Cr(s,3)[1])[0],regionsTensor:Cr(u)[0],scale:t,statsForScale:n}}))})),a=o.map((function(e){var t=e.scoresTensor,r=e.regionsTensor,o=e.scale,a=e.statsForScale,s=function(e,t,n,r){for(var i=[],o=e.arraySync(),a=0;a<e.shape[0];a++)for(var s=0;s<e.shape[1];s++)o[a][s]>=r&&i.push(new Uh(s,a));return i.map((function(e){var r=new Xh(Math.round((2*e.y+1)/n),Math.round((2*e.x+1)/n),Math.round((2*e.y+12)/n),Math.round((2*e.x+12)/n)),i=o[e.y][e.x],a=t.arraySync();return{cell:r,score:i,region:new cm(a[e.y][e.x][0],a[e.y][e.x][1],a[e.y][e.x][2],a[e.y][e.x][3])}}))}(t,r,o,n);if(t.dispose(),r.dispose(),!s.length)return i.stage1.push(a),[];var u=Date.now(),l=Jh(s.map((function(e){return e.cell})),s.map((function(e){return e.score})),.5);return a.nms=Date.now()-u,a.numBoxes=l.length,i.stage1.push(a),l.map((function(e){return s[e]}))})),s=a.reduce((function(e,t){return e.concat(t)}),[]),u=[],l=[];if(s.length>0){var c=Date.now(),d=Jh(s.map((function(e){return e.cell})),s.map((function(e){return e.score})),.7);i.stage1_nms=Date.now()-c,l=d.map((function(e){return s[e].score})),u=d.map((function(e){return s[e]})).map((function(e){var t=e.cell,n=e.region;return new Xh(t.left+n.left*t.width,t.top+n.top*t.height,t.right+n.right*t.width,t.bottom+n.bottom*t.height).toSquare().round()}))}return{boxes:u,scores:l}}function mm(e,t,n){var r=n.width,i=n.height;return Oh(this,void 0,void 0,(function(){var n,o,a,s=this;return Dh(this,(function(u){switch(u.label){case 0:return n=wf(e),[4,Promise.all(t.map((function(t){return Oh(s,void 0,void 0,(function(){var r,i,o,a,s,u,l,c;return Dh(this,(function(d){return r=t.padAtBorders(e.height,e.width),i=r.y,o=r.ey,a=r.x,s=r.ex,u=a-1,l=i-1,c=n.getImageData(u,l,s-u,o-l),[2,yf.isNodejs()?kf(c):createImageBitmap(c)]}))}))})))];case 1:return o=u.sent(),a=[],o.forEach((function(e){var t=wf(Af({width:r,height:i}));t.drawImage(e,0,0,r,i);for(var n=t.getImageData(0,0,r,i).data,o=[],s=0;s<n.length;s+=4)o.push(n[s+2]),o.push(n[s+1]),o.push(n[s]);a.push(o)})),[2,a.map((function(e){return Qt((function(){return dm(nc(An(e,[1,r,i,3]),[0,2,1,3]).toFloat())}))}))]}}))}))}function gm(e,t,n,r,i){return Oh(this,void 0,void 0,(function(){var o,a,s,u,l,c,d,h,f,p,m,g,v,y;return Dh(this,(function(b){switch(b.label){case 0:return o=Date.now(),[4,mm(e,t,{width:24,height:24})];case 1:return a=b.sent(),i.stage2_extractImagePatches=Date.now()-o,o=Date.now(),s=a.map((function(e){var t=function(e,t){return Qt((function(){var n=fm(e,t),r=hm(tp(vr(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu4_alpha),i=tp(r,t.fc2_1),o=ir(Gl(i,1),1),a=Hr(ju(i,o),1),s=tp(r,t.fc2_2);return{scores:Cr(a,1)[1],regions:s}}))}(e,r);return e.dispose(),t})),i.stage2_rnet=Date.now()-o,u=s.length>1?Dn(s.map((function(e){return e.scores}))):s[0].scores,d=(c=Array).from,[4,u.data()];case 2:return l=d.apply(c,[b.sent()]),u.dispose(),h=l.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){return e.idx})),f=h.map((function(e){return t[e]})),p=h.map((function(e){return l[e]})),m=[],g=[],f.length>0&&(o=Date.now(),v=Jh(f,p,.7),i.stage2_nms=Date.now()-o,y=v.map((function(e){var t=s[h[e]].regions.arraySync();return new cm(t[0][0],t[0][1],t[0][2],t[0][3])})),g=v.map((function(e){return p[e]})),m=v.map((function(e,t){return f[e].calibrate(y[t])}))),s.forEach((function(e){e.regions.dispose(),e.scores.dispose()})),[2,{boxes:m,scores:g}]}}))}))}function vm(e,t,n,r,i){return Oh(this,void 0,void 0,(function(){var o,a,s,u,l,c,d,h,f,p,m,g,v,y,b;return Dh(this,(function(w){switch(w.label){case 0:return o=Date.now(),[4,mm(e,t,{width:48,height:48})];case 1:return a=w.sent(),i.stage3_extractImagePatches=Date.now()-o,o=Date.now(),s=a.map((function(e){var t=function(e,t){return Qt((function(){var n=fm(e,t);n=hm(n=Hf(n=Il(n,[2,2],[2,2],"same"),t.conv4,"valid"),t.prelu4_alpha);var r=hm(tp(vr(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu5_alpha),i=tp(r,t.fc2_1),o=ir(Gl(i,1),1),a=Hr(ju(i,o),1),s=tp(r,t.fc2_2),u=tp(r,t.fc2_3);return{scores:Cr(a,1)[1],regions:s,points:u}}))}(e,r);return e.dispose(),t})),i.stage3_onet=Date.now()-o,u=s.length>1?Dn(s.map((function(e){return e.scores}))):s[0].scores,d=(c=Array).from,[4,u.data()];case 2:return l=d.apply(c,[w.sent()]),u.dispose(),h=l.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){return e.idx})),f=h.map((function(e){var t=s[e].regions.arraySync();return new cm(t[0][0],t[0][1],t[0][2],t[0][3])})),p=h.map((function(e,n){return t[e].calibrate(f[n])})),m=h.map((function(e){return l[e]})),g=[],v=[],y=[],p.length>0&&(o=Date.now(),b=Jh(p,m,.7,!1),i.stage3_nms=Date.now()-o,g=b.map((function(e){return p[e]})),v=b.map((function(e){return m[e]})),y=b.map((function(e,t){return Array(5).fill(0).map((function(n,r){var i=s[e].points.arraySync();return new Uh(i[0][r]*(g[t].width+1)+g[t].left,i[0][r+5]*(g[t].height+1)+g[t].top)}))}))),s.forEach((function(e){e.regions.dispose(),e.scores.dispose(),e.points.dispose()})),[2,{boxes:g,scores:v,points:y}]}}))}))}var ym=function(e){function t(){return e.call(this,"Mtcnn")||this}return Th(t,e),t.prototype.load=function(t){return Oh(this,void 0,void 0,(function(){return Dh(this,(function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,t)]}))}))},t.prototype.loadFromDisk=function(t){return Oh(this,void 0,void 0,(function(){return Dh(this,(function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,t)]}))}))},t.prototype.forwardInput=function(e,t){return void 0===t&&(t={}),Oh(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l,c,d,h,f,p,m,g,v,y,b,w,x,_;return Dh(this,(function(C){switch(C.label){case 0:if(!(n=this.params))throw new Error("Mtcnn - load model before inference");if(!(r=e.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return i={},o=Date.now(),a=Qt((function(){return e=ir(fh.fromPixels(r)).toFloat(),Qt((function(){return wr(Cr(e,3).reverse(),3)}));var e})),s=function(e){return a.dispose(),i.total=Date.now()-o,e},u=a.shape.slice(1),l=u[0],c=u[1],d=new Dp(t),h=d.minFaceSize,f=d.scaleFactor,p=d.maxNumScales,m=d.scoreThresholds,g=d.scaleSteps,v=(g||function(e,t,n){for(var r=n[0],i=n[1],o=12/e,a=[],s=Math.min(r,i)*o,u=0;s>=12;)a.push(o*Math.pow(t,u)),s*=t,u+=1;return a}(h,f,[l,c])).filter((function(e){var t=lm(e,[l,c]);return Math.min(t.width,t.height)>12})).slice(0,p),i.scales=v,i.pyramid=v.map((function(e){return lm(e,[l,c])})),y=Date.now(),[4,pm(a,v,m[0],n.pnet,i)];case 1:return b=C.sent(),i.total_stage1=Date.now()-y,b.boxes.length?(i.stage2_numInputBoxes=b.boxes.length,y=Date.now(),[4,gm(r,b.boxes,m[1],n.rnet,i)]):[2,s({results:[],stats:i})];case 2:return w=C.sent(),i.total_stage2=Date.now()-y,w.boxes.length?(i.stage3_numInputBoxes=w.boxes.length,y=Date.now(),[4,vm(r,w.boxes,m[2],n.onet,i)]):[2,s({results:[],stats:i})];case 3:return x=C.sent(),i.total_stage3=Date.now()-y,_=x.boxes.map((function(e,t){return lp(lf({},new qh(x.scores[t],new tf(e.left/c,e.top/l,e.width/c,e.height/l),{height:l,width:c})),new rf(x.points[t].map((function(t){return t.sub(new Uh(e.left,e.top)).div(new Uh(e.width,e.height))})),{width:e.width,height:e.height}))})),[2,s({results:_,stats:i})]}}))}))},t.prototype.forward=function(e,t){return void 0===t&&(t={}),Oh(this,void 0,void 0,(function(){var n;return Dh(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Nf(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent().results]}}))}))},t.prototype.forwardWithStats=function(e,t){return void 0===t&&(t={}),Oh(this,void 0,void 0,(function(){var n;return Dh(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Nf(e)];case 1:return[2,n.apply(this,[r.sent(),t])]}}))}))},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(e){return um(e)},t.prototype.extractParams=function(e){return sm(e)},t}(Lf),bm=[new Uh(1.603231,2.094468),new Uh(6.041143,7.080126),new Uh(2.882459,3.518061),new Uh(4.266906,5.178857),new Uh(9.041765,10.66308)],wm=[117.001,114.697,97.404],xm=function(e){function t(){var t={withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:bm,meanRgb:wm,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e.call(this,t)||this}return Th(t,e),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return Oh(this,void 0,void 0,(function(){return Dh(this,(function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map((function(e){return new qh(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(em),_m={ssdMobilenetv1:new Hp,tinyFaceDetector:new xm,tinyYolov2:new tm,mtcnn:new ym,faceLandmark68Net:new wp,faceLandmark68TinyNet:new _p,faceRecognitionNet:new Np,faceExpressionNet:new ap,ageGenderNet:new yp};function Cm(e,t){var n={age:t};return Object.assign({},e,n)}var Em=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parentTask=t,i.input=n,i.extractedFaces=r,i}return Th(t,e),t}(rm),Sm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Th(t,e),t.prototype.run=function(){return Oh(this,void 0,void 0,(function(){var e,t,n=this;return Dh(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,om(e=r.sent(),this.input,(function(e){return Oh(n,void 0,void 0,(function(){return Dh(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return _m.faceExpressionNet.predictExpressions(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){return sp(e,t[n])}))]}}))}))},t.prototype.withAgeAndGender=function(){return new Tm(this,this.input)},t}(Em),Am=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Th(t,e),t.prototype.run=function(){return Oh(this,void 0,void 0,(function(){var e,t;return Dh(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,am(e,this.input,(function(e){return _m.faceExpressionNet.predictExpressions(e)}),this.extractedFaces)]:[2];case 2:return t=n.sent(),[2,sp(e,t)]}}))}))},t.prototype.withAgeAndGender=function(){return new Nm(this,this.input)},t}(Em),km=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Th(t,e),t.prototype.withAgeAndGender=function(){return new Om(this,this.input)},t.prototype.withFaceDescriptors=function(){return new Pm(this,this.input)},t}(Sm),Im=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Th(t,e),t.prototype.withAgeAndGender=function(){return new Dm(this,this.input)},t.prototype.withFaceDescriptor=function(){return new Fm(this,this.input)},t}(Am),Rm=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parentTask=t,i.input=n,i.extractedFaces=r,i}return Th(t,e),t}(rm),Tm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Th(t,e),t.prototype.run=function(){return Oh(this,void 0,void 0,(function(){var e,t,n=this;return Dh(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,om(e=r.sent(),this.input,(function(e){return Oh(n,void 0,void 0,(function(){return Dh(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return _m.ageGenderNet.predictAgeAndGender(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){var r=t[n],i=r.age;return Cm(Op(e,r.gender,r.genderProbability),i)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new Sm(this,this.input)},t}(Rm),Nm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Th(t,e),t.prototype.run=function(){return Oh(this,void 0,void 0,(function(){var e,t,n,r,i;return Dh(this,(function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return(e=o.sent())?[4,am(e,this.input,(function(e){return _m.ageGenderNet.predictAgeAndGender(e)}),this.extractedFaces)]:[2];case 2:return t=o.sent(),n=t.age,r=t.gender,i=t.genderProbability,[2,Cm(Op(e,r,i),n)]}}))}))},t.prototype.withFaceExpressions=function(){return new Am(this,this.input)},t}(Rm),Om=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Th(t,e),t.prototype.withFaceExpressions=function(){return new km(this,this.input)},t.prototype.withFaceDescriptors=function(){return new Pm(this,this.input)},t}(Tm),Dm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Th(t,e),t.prototype.withFaceExpressions=function(){return new Im(this,this.input)},t.prototype.withFaceDescriptor=function(){return new Fm(this,this.input)},t}(Nm),Mm=function(e){function t(t,n){var r=e.call(this)||this;return r.parentTask=t,r.input=n,r}return Th(t,e),t}(rm),Pm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Th(t,e),t.prototype.run=function(){return Oh(this,void 0,void 0,(function(){var e;return Dh(this,(function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return[4,om(e=t.sent(),this.input,(function(e){return Promise.all(e.map((function(e){return _m.faceRecognitionNet.computeFaceDescriptor(e)})))}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))];case 2:return[2,t.sent().map((function(t,n){return im(e[n],t)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new km(this,this.input)},t.prototype.withAgeAndGender=function(){return new Om(this,this.input)},t}(Mm),Fm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Th(t,e),t.prototype.run=function(){return Oh(this,void 0,void 0,(function(){var e,t;return Dh(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,am(e,this.input,(function(e){return _m.faceRecognitionNet.computeFaceDescriptor(e)}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))]:[2];case 2:return t=n.sent(),[2,im(e,t)]}}))}))},t.prototype.withFaceExpressions=function(){return new Im(this,this.input)},t.prototype.withAgeAndGender=function(){return new Dm(this,this.input)},t}(Mm),Bm=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parentTask=t,i.input=n,i.useTinyLandmarkNet=r,i}return Th(t,e),Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?_m.faceLandmark68TinyNet:_m.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(rm),Lm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Th(t,e),t.prototype.run=function(){return Oh(this,void 0,void 0,(function(){var e,t,n,r,i,o=this;return Dh(this,(function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return e=a.sent(),t=e.map((function(e){return e.detection})),this.input instanceof Re?[4,Df(this.input,t)]:[3,3];case 2:return r=a.sent(),[3,5];case 3:return[4,Of(this.input,t)];case 4:r=a.sent(),a.label=5;case 5:return n=r,[4,Promise.all(n.map((function(e){return o.landmarkNet.detectLandmarks(e)})))];case 6:return i=a.sent(),n.forEach((function(e){return e instanceof Re&&e.dispose()})),[2,e.map((function(e,t){return lp(e,i[t])}))]}}))}))},t.prototype.withFaceExpressions=function(){return new km(this,this.input)},t.prototype.withAgeAndGender=function(){return new Om(this,this.input)},t.prototype.withFaceDescriptors=function(){return new Pm(this,this.input)},t}(Bm),zm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Th(t,e),t.prototype.run=function(){return Oh(this,void 0,void 0,(function(){var e,t,n,r,i;return Dh(this,(function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return(e=o.sent())?(t=e.detection,this.input instanceof Re?[4,Df(this.input,[t])]:[3,3]):[2];case 2:return r=o.sent(),[3,5];case 3:return[4,Of(this.input,[t])];case 4:r=o.sent(),o.label=5;case 5:return n=r,[4,this.landmarkNet.detectLandmarks(n[0])];case 6:return i=o.sent(),n.forEach((function(e){return e instanceof Re&&e.dispose()})),[2,lp(e,i)]}}))}))},t.prototype.withFaceExpressions=function(){return new Im(this,this.input)},t.prototype.withAgeAndGender=function(){return new Dm(this,this.input)},t.prototype.withFaceDescriptor=function(){return new Fm(this,this.input)},t}(Bm),jm=function(e){function t(t,n){void 0===n&&(n=new Wp);var r=e.call(this)||this;return r.input=t,r.options=n,r}return Th(t,e),t}(rm),Wm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Th(t,e),t.prototype.run=function(){return Oh(this,void 0,void 0,(function(){var e,t,n,r;return Dh(this,(function(i){switch(i.label){case 0:return t=(e=this).input,(n=e.options)instanceof Dp?[4,_m.mtcnn.forward(t,n)]:[3,2];case 1:return[2,i.sent().map((function(e){return e.detection}))];case 2:if(r=n instanceof nm?function(e){return _m.tinyFaceDetector.locateFaces(e,n)}:n instanceof Wp?function(e){return _m.ssdMobilenetv1.locateFaces(e,n)}:n instanceof $p?function(e){return _m.tinyYolov2.locateFaces(e,n)}:null,!r)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,r(t)]}}))}))},t.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise((function(t){return Oh(e,void 0,void 0,(function(){var e;return Dh(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e.map((function(e){return lf({},e)})))]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new Lm(this.runAndExtendWithFaceDetections(),this.input,e)},t.prototype.withFaceExpressions=function(){return new Sm(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new Tm(this.runAndExtendWithFaceDetections(),this.input)},t}(jm),Hm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Th(t,e),t.prototype.run=function(){return Oh(this,void 0,void 0,(function(){var e,t;return Dh(this,(function(n){switch(n.label){case 0:return[4,new Wm(this.input,this.options)];case 1:return e=n.sent(),t=e[0],e.forEach((function(e){e.score>t.score&&(t=e)})),[2,t]}}))}))},t.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise((function(t){return Oh(e,void 0,void 0,(function(){var e;return Dh(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e?lf({},e):void 0)]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new zm(this.runAndExtendWithFaceDetection(),this.input,e)},t.prototype.withFaceExpressions=function(){return new Am(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new Nm(this.runAndExtendWithFaceDetection(),this.input)},t}(jm);function Vm(e,t){return void 0===t&&(t=new Wp),new Hm(e,t)}var Gm=function(){function e(e,t){void 0===t&&(t=.6),this._distanceThreshold=t;var n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var r=1,i=function(){return"person "+r++};this._labeledDescriptors=n.map((function(e){if(e instanceof uf)return e;if(e instanceof Float32Array)return new uf(i(),[e]);if(e.descriptor&&e.descriptor instanceof Float32Array)return new uf(i(),[e.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")}))}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(e,t){return t.map((function(t){return function(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map((function(e,t){return e-r[t]})).reduce((function(e,t){return e+Math.pow(t,2)}),0))}(t,e)})).reduce((function(e,t){return e+t}),0)/(t.length||1)},e.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map((function(n){var r=n.descriptors,i=n.label;return new af(i,t.computeMeanDistance(e,r))})).reduce((function(e,t){return e.distance<t.distance?e:t}))},e.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new af("unknown",t.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map((function(e){return e.toJSON()}))}},e.fromJSON=function(t){var n=t.labeledDescriptors.map((function(e){return uf.fromJSON(e)}));return new e(n,t.distanceThreshold)},e}();var Um,Km=JSON.parse('{"Mj":["en","de"],"U1":[{"language":"en","rotate":"Please rotate your device!"},{"language":"de","rotate":"Bitte drehen Sie Ihr Ger\xe4t!"}],"R_":[{"language":"en","help":"How to use the app?","help_tour":"How to start a tour?","help_tour_content":"After opening the application, click on the \'Select tour\' button on the home page. Subsequently, you will see a list of all available tour circuits. Choose the one you bought a ticket for. By clicking on the tour, you will see an overview of the rooms that you will pass through during the tour. Choose the first one, i.e. the one marked with the number 1. After selecting it, a screen with more detailed information about the room, including audio, will appear.","help_room":"How do I switch between rooms?","help_room_content":"You can switch to the next or previous room using the buttons at the bottom of the screen. Gestures are also available to you. Swipe left to switch to next room, swipe left to previous room. You can also switch between rooms if you\'re listening to audio and your screen is locked. Arrows are available on the displayed notification to switch.","help_more_functions":"Does the audio guide have additional features?","help_more_functions_content":"Yes, the audio guide offers a lot of additional features. you can find their overview after clicking on the navigation under the item \'Menu\'."},{"language":"de","help":"Wie verwende ich die App?","help_tour":"Wie starte ich eine F\xfchrung?","help_tour_content":"Klicken Sie nach dem \xd6ffnen der App auf die Schaltfl\xe4che \'Tour ausw\xe4hlen\'. Anschlie\xdfend sehen Sie eine Liste aller verf\xfcgbaren F\xfchrungen. W\xe4hlen Sie diejenige aus, f\xfcr die Sie ein Ticket gekauft haben. Durch Anklicken der F\xfchrung erhalten Sie eine \xdcbersicht der R\xe4ume, die Sie w\xe4hrend der F\xfchrung durchlaufen. W\xe4hlen Sie den ersten aus, d. h. den mit der Nummer 1 markierten. Nachdem Sie ihn ausgew\xe4hlt haben, erscheint ein Bildschirm mit detaillierteren Informationen \xfcber den Raum, einschlie\xdflich Audio.","help_room":"Wie wechsle ich zwischen R\xe4umen?","help_room_content":"Mit den Schaltfl\xe4chen am unteren Bildschirmrand k\xf6nnen Sie zum n\xe4chsten oder vorherigen Raum wechseln. Auch Gesten stehen Ihnen zur Verf\xfcgung. Wische nach links, um zum n\xe4chsten Raum zu wechseln, wische nach links zum vorherigen Raum. Sie k\xf6nnen auch zwischen R\xe4umen wechseln, wenn Sie Audio h\xf6ren und Ihr Bildschirm gesperrt ist. Auf der angezeigten Benachrichtigung stehen Pfeile zum Wechseln zur Verf\xfcgung.","help_more_functions":"Hat der Audioguide zus\xe4tzliche Funktionen?","help_more_functions_content":"Ja, der Audioguide bietet viele zus\xe4tzliche Funktionen. deren \xdcbersicht finden Sie nach Klick auf die Navigation unter dem Punkt \'Men\xfc\'."}],"um":[{"language":"en","info":"Information","tours_info":"First, choose the tour for which you have purchased a ticket. Then wait at the place where the tour starts. Your guide will pick you up there.","history_info":"In this section, you can learn about the history of the castle and chateau. You can read a brief history or get to know the individual families that have owned the manor here over the years.","where_to_info":"If you would like to make another trip, we recommend visiting following places in the nearby area.","rooms_overview":"Here you can see an overview of the rooms located in the sightseeing route you have chosen."},{"language":"de","info":"Informationen","tours_info":"W\xe4hlen Sie zun\xe4chst die Tour aus, f\xfcr die Sie ein Ticket gekauft haben. Warten Sie dann an der Stelle, an der die Tour beginnt. Dort holt Sie Ihr Guide ab.","history_info":"In diesem Abschnitt k\xf6nnen Sie sich \xfcber die Geschichte der Burg und des Schlosses informieren. Hier k\xf6nnen Sie eine kurze Geschichte lesen oder die einzelnen Familien kennenlernen, die das Gut hier im Laufe der Jahre besessen haben.","where_to_info":"Wenn Sie einen weiteren Ausflug machen m\xf6chten, empflehlen wir Ihnen, die folgenden Orte in der n\xe4heren Umgebung zu besuchen.","rooms_overview":"Hier sehen Sie eine \xdcbersicht der Zimmer, die sich in der von Ihnen gew\xe4hlten F\xfchrung befinden."}],"y4":[{"language":"en","install_download_label":"How to download?","install_step_1":"1. Open your browser\u2019s settings.","install_step_2":"2. Find and tap Add to Home screen.","install_step_1_safari":"2. Find and tap Share.","install_step_3":"3. Confirm by tapping Add.","warning":"Warning","install_use_safari":"You must use the Safari browser to install the application.","error_label":"Something went wrong...","invalid_scan_label":"We are sorry, but the given QR code could not be recognized.","close_label":"Close","no_face_detected":"We are sorry, but it was not possible to recognize anyone from the photo you took.","try_again_label":"Please try again. Zoom in on the face and take a photo.","wait_label":"Please wait"},{"language":"de","install_download_label":"Wie downloadet man das?","install_step_1":"1. \xd6ffnen Sie die Einstellungen Ihres Browsers.","install_step_2":"2. Suchen und tippen Sie auf Zum Startbildschirm hinzuf\xfcgen.","install_step_1_safari":"2. Suchen und tippen Sie auf Share.","install_step_3":"3. Best\xe4tigen Sie, indem Sie auf Installieren tippen.","warning":"Warnung","install_step_4_safari":"Sie m\xfcssen den Safari-Browser verwenden, um die Applikation zu installieren.","close_label":"Schlie\xdfen","invalid_scan_label":"Es tut uns leid, aber der angegebene QR-Code konnte nicht erkannt werden.","error_label":"Etwas ist schief gelaufen...","no_face_detected":"Wir entschuldigen uns, aber auf dem von Ihnen aufgenommenen Foto war niemand zu erkennen.","try_again_label":"Bitte versuchen Sie es nochmal. Vergr\xf6\xdfern Sie das Gesicht und machen Sie ein Foto.","wait_label":"Warten Sie bitte."}],"N9":[{"language":"en","install":"Install","install_label":"Install the app for offline access."},{"language":"de","install":"Installieren","install_label":"Installieren Sie die App f\xfcr den Offline-Zugriff."}],"em":[{"language":"en","face_recognition":"Image recognition","title":"Don\'t know who is in the picture?","label":"If you\'ve come across an image on the tour and you\'re not sure who\'s in it, you can either ask the tourguide or use this feature, which recognizes who\'s in the image from the photo. Just follow the instructions below.","step_1":"Press the \u201eTake a picture\u201d button.","step_2":"Zoom in so that the face in the image you want to recognize is clearly visible.","step_3":"Now take a picture and then press OK.","step_4":"Wait a moment. When the image is recognized, you will be redirected to a new page with the depicted person.","button":"Take a picture","button_back":"Back"},{"language":"de","face_recognition":"Bilderkennung","title":"Sie wissen nicht, wer auf dem Bild ist?","label":"Wenn Sie bei der F\xfchrung auf ein Bild gesto\xdfen sind und sich nicht sicher sind, wer darauf abgebildet ist, k\xf6nnen Sie entweder den Begleiter fragen oder diese Funktion verwenden, die anhand des Fotos erkennt, wer auf dem Bild zu sehen ist. Befolgen Sie einfach die nachstehenden Anweisungen.","step_1":"Dr\xfccken Sie die Schaltfl\xe4che \u201eBild aufnehmen\u201d.","step_2":"Vergr\xf6\xdfern Sie die Kamera so, dass das Gesicht im Bild, das Sie erkennen m\xf6chten, deutlich sichtbar ist.","step_3":"Machen Sie jetzt ein Foto und dr\xfccken Sie dann OK.","step_4":"Moment mal. Wenn das Bild erkannt wird, werden Sie auf eine neue Seite mit der abgebildeten Person weitergeleitet.","button":"Bild aufnehmen","button_back":"Zur\xfcck"}],"RS":[{"language":"en","qr_scanner":"QR code Scanner","title":"Don\'t know where you are right now?","label":"If you are not sure where exactly you are, you can ask your guide or use this feature to help you find out. Find the stand with QR code and follow the instructions below.","step_1":"Press the \u201eScan QR code\u201d button.","step_2":"Get close to the QR code so that it is clearly visible on the camera.","step_3":"Wait a moment. When the QR code is detected, you will be redirected to the correct location.","button":"Scan QR code","button_back":"Back"},{"language":"de","qr_scanner":"QR Code Scanner","title":"Sie wissen nicht, wo Sie gerade sind?","label":"Wenn Sie sich nicht sicher sind, wo genau Sie sich befinden, k\xf6nnen Sie Ihren Reiseleiter fragen oder diese Funktion nutzen, um Ihnen dabei zu helfen, Ihren Standort zu finden. Finden Sie den Stand mit QR-Code und folgen Sie den Anweisungen unten.","step_1":"Dr\xfccken Sie die Schaltfl\xe4che \u201eQR Code scannen\u201c.","step_2":"N\xe4hern Sie sich dem QR-Code, sodass er auf der Kamera gut sichtbar ist.","step_3":"Moment mal. Wenn der QR-Code erkannt wird, werden Sie an die richtige Stelle weitergeleitet.","button":"QR Code scannen","button_back":"Zur\xfcck"}],"Fs":[{"language":"en","rooms":"Rooms","menu":"Menu","history":"History","houses":"Houses","owners":"Owners","tours":"Tours","map":"Map","where_to_next":"Where to next?","gallery":"Gallery","about_app":"About app","settings":"Settings","contact":"Contact","scan":"QR code Scanner","help":"Help"},{"language":"de","rooms":"R\xe4ume","menu":"Men\xfc","history":"Geschichte","houses":"H\xe4user","owners":"Besitzer","tours":"F\xfchrungen","map":"Landkarte","where_to_next":"Wohin als n\xe4chstes?","gallery":"Galerie","about_app":"\xdcber App","settings":"Einstellung","contact":"Kontakt","scan":"QR Code Scanner","help":"Hilfe"}],"Xd":[{"language":"en","letter":"Font size","language_label":"Language","default":"Default","medium":"Medium","large":"Large"},{"language":"de","letter":"Schriftgr\xf6\xdfe","language_label":"Sprache","default":"Original","medium":"Mittlere","large":"Gro\xdf"}],"YH":[{"language":"en","history":"History","gallery":"Gallery","image_recognition":"Image recognition","scan_room":"Scan the room","where_to_next":"Where to next?","contact":"Contact","settings":"Settings","help":"Help","about_app":"About app"},{"language":"de","history":"Geschichte","gallery":"Galerie","image_recognition":"Bilderkennung","scan_room":"Scannen Sie den Raum","where_to_next":"Wohin als n\xe4chstes?","contact":"Kontakt","settings":"Einstellung","help":"Hilfe","about_app":"\xdcber App"}],"mx":[{"language":"en","home":"Home","tours":"Tours","rooms":"Rooms in tour","menu":"Menu","back":"Back to previous"},{"language":"de","home":"Startseite","tours":"F\xfchrungen","rooms":"Zimmer in der F\xfchrung","menu":"Men\xfc","back":"Zur\xfcck zum vorherigen"}],"LE":[{"language":"en","label_1":"Welcome","label_2":"to the state castle","label_3":"and chateau Fr\xfddlant","button_label":"Choose tour"},{"language":"de","label_1":"Wilkommen","label_2":"auf der Burg und","label_3":"dem Schloss Friedland","button_label":"F\xfchrung ausw\xe4hlen"}],"Le":[{"language":"en","button":"Visit","places":[{"title":"Grab\u0161tejn castle","description":"Grab\u0161tejn was originally a Gothic castle, built in the middle of the thirteenth century, which stands near the Tri-Border Area where the Czech Republic, Germany and Poland meet. It was remodelled in the sixteenth century as a Renaissance castle, and now offers visitors several guided tours.","url":"https://hrad-grabstejn.cz/en","img":""},{"title":"Lemberk castle","description":"The predecessor of today\'s Baroque castle was the medieval castle of Lemberk, founded in the 1340s by Havel of Markvartic, husband of St. Zdislava. In the second half of the 16th century it was rebuilt into a Renaissance chateau and it acquired its present appearance after the mid-17th century under the the lords of Breda. The last owners were the Clam-Gallas family, until 1945.","url":"https://www.zamek-lemberk.cz/en","img":""},{"title":"Brewery Albrecht","description":"Manor beer production in Fr\xfddlant is first documented in 1381, beer was apparently brewed right at the castle. In the 16th century, a new independent brewery was built under the Redern family near the Sm\u011bd\xe1 river, on the site where the current operation is still located. The half-timbered storey building of the Renaissance brewery is depicted on the so-called Glaubic map.","url":"https://pivovar-albrecht.com/","img":""}]},{"language":"de","button":"Besuchen","places":[{"title":"Burg Grab\u0161tejn","description":"Grab\u0161tejn (Grafenstein), urspr\xfcnglich eine gotische Burg aus dem 13. Jahrhundert, die im 16. Jahrhundert in ein Renaissancesschloss umgebaut wurde, liegt nahe dem Dreil\xe4ndereck zwischen der Tschechischen Republik, Deutschland und Polen und stellt ein nationales Kulturdenkmal mit einer reichen Geschichte dar. Heutzutage bietet die Burg mehrere Touristenf\xfchrungen an, einschlie\xdflich der St. Barbara Kapelle, eines Renaissancejuwel aus der 2. H\xe4lfte des 16. Jahrhunderts.","url":"https://hrad-grabstejn.cz/de","img":""},{"title":"Schloss Lemberk","description":"Der Vorg\xe4nger des heutigen Barockschlosses war die mittelalterliche Burg Lemberk, das in den 1340er Jahren von Havel von Markvartic, dem Ehemann von St. Zdislava, gegr\xfcndet wurde. In der zweiten H\xe4lfte des 16. Jahrhunderts wurde es zu einem Renaissanceschloss umgebaut und erhielt sein heutiges Aussehen nach der Mitte des 17. Jahrhunderts unter den Herren von Breda. Die letzten Eigent\xfcmer waren bis 1945 die Familie Clam-Gallas.","url":"https://www.zamek-lemberk.cz/en","img":""},{"title":"Brauerei Albrecht","description":"Die Herstellung von Bier in Fr\xfddlant wird erstmals 1381 erw\xe4hnt, Bier wurde angeblich direkt auf der Burg gebraut. Im 16. Jahrhundert wurde unter der Familie Redern in der N\xe4he des Flusses Sm\u011bd\xe1 an der Stelle, an der sich noch heute der Betrieb befindet, eine neue unabh\xe4ngige Brauerei gebaut. Der Fachwerkgeschossbau der Renaissance-Brauerei ist auf der sogenannten Glaubic-Karte abgebildet.","url":"https://pivovar-albrecht.com/","img":""}]}],"PU":[{"language":"en","for_label":"Official app for","for":"Castle and chateau Fr\xfddlant","author_label":"Author","author":"Veronika Pavl\xedkov\xe1","collaboration_label":"In collaboration with","collaboration":"Palack\xfd University Olomouc","photos_label":"Photos by","photos1":"Luk\xe1\u0161 H\xfcbner","photos2":"Ji\u0159\xed Holub","logo_label":"Logo by","logo":"Lucie Pavl\xedkov\xe1"},{"language":"de","for_label":"Ofizielle App f\xfcr","for":"Das Schloss und die Burg Fr\xfddlant","author_label":"Author","author":"Veronika Pavl\xedkov\xe1","collaboration_label":"In Zusammenarbeit mit","collaboration":"Palack\xfd Universit\xe4t Olm\xfctz","photos_label":"Fotos von","photos1":"Luk\xe1\u0161 H\xfcbner","photos2":"Ji\u0159\xed Holub","logo_label":"Logo von","logo":"Lucie Pavl\xedkov\xe1"}],"ZR":[{"language":"en","tour_not_selected":"First, please choose the sightseeing route you want to take.","seen":"Already visited rooms","not_seen":"Rooms not yet visited","nothing_more":"Nothing more to see"},{"language":"de","tour_not_selected":"Bitte w\xe4hlen Sie zun\xe4chst die F\xfchrung aus, die Sie nehmen m\xf6chten.","seen":"Bereits besuchte R\xe4ume","not_seen":"Noch nicht besuchte R\xe4ume","nothing_more":"Nichts mehr zu sehen"}],"PX":[{"language":"en","title":"Contact","address":"Address","web":"Web","reservation":"Ticket reservation","phone":"Phone number"},{"language":"de","title":"Kontakt","address":"Addresse","web":"Web","reservation":"Ticketbuchung","phone":"Telefonnummer"}],"Lx":[{"language":"en","people":[{"name":"Fridrich of Redern","img":"/people/katerina_redern.jpg"},{"name":"Melchior of Redern","img":"/people/melchior_redern.jpg"},{"name":"Catherine of Redern","img":"/people/katerina_redern.jpg"},{"name":"Christopher of Redern","img":"/people/katerina_redern.jpg"},{"name":"Albrecht of Wallenstein","img":"/people/albrecht_valdstejn.jpg"},{"name":"Matthias of Gallas","img":"/people/matyas_gallas.jpg"},{"name":"Antonius of Gallas","img":"/people/antonin_pankrac_gallas.jpg"},{"name":"Francis Ferdinand of Gallas","img":"/people/frantisek_ferdinand_gallas.jpg"},{"name":"John Wenceslas of Gallas","img":"/people/jan_vaclav_gallas.jpg"},{"name":"Philip Joseph of Gallas","img":"/people/filip_josef_gallas.jpg"},{"name":"Christian Philip of Clam-Gallas","img":"/people/kristian_filip_clamgallas.jpg"},{"name":"Christian Christopher of Clam-Gallas","img":"/people/kristian_krystof_clamgallas.jpg"},{"name":"William of Clam-Gallas","img":"/people/vilem_clamgallas.jpg"},{"name":"Edward of Clam-Gallas","img":"/people/eduard_clamgallas.jpg"},{"name":"Francis of Clam-Gallas","img":"/people/frantisek_ferdinand_gallas.jpg"},{"name":"Clotilde of Clam-Gallas","img":"/people/katerina_redern.jpg"}]},{"language":"de","people":[{"name":"Fridrich von R\xf6dern","img":"/people/katerina_redern.jpg"},{"name":"Melchior von R\xf6dern","img":"/people/melchior_redern.jpg"},{"name":"Katharina von R\xf6dern","img":"/people/katerina_redern.jpg"},{"name":"Christoph von R\xf6dern","img":"/people/katerina_redern.jpg"},{"name":"Albrecht von Wallenstein","img":"/people/albrecht_valdstejn.jpg"},{"name":"Matthias von Gallas","img":"/people/matyas_gallas.jpg"},{"name":"Antonius von Gallas","img":"/people/antonin_pankrac_gallas.jpg"},{"name":"Franz Ferdinand von Gallas","img":"/people/frantisek_ferdinand_gallas.jpg"},{"name":"Johann Wenzeslaus von Gallas","img":"/people/jan_vaclav_gallas.jpg"},{"name":"Philip Joseph von Gallas","img":"/people/filip_josef_gallas.jpg"},{"name":"Christian Philip von Clam-Gallas","img":"/people/kristian_filip_clamgallas.jpg"},{"name":"Christian Christoph von Clam-Gallas","img":"/people/kristian_krystof_clamgallas.jpg"},{"name":"Wilhelm von Clam-Gallas","img":"/people/vilem_clamgallas.jpg"},{"name":"Eduard von Clam-Gallas","img":"/people/eduard_clamgallas.jpg"},{"name":"Franz von Clam-Gallas","img":"/people/frantisek_ferdinand_gallas.jpg"},{"name":"Clotilde von Clam-Gallas","img":"/people/katerina_redern.jpg"}]}],"m8":[{"language":"en","path":"/history_overview","title":"History overview","button":"Learn more","img":"/history/history.jpg","card_label":"Get to know the history of the Fr\xfddlant castle and chateau.","description":"Fr\xfddlant is one of largest and most important heritage sites in Northern Bohemia. It consists of two architectural complexes: a medieval castle and a renaissance chateau. The castle was built around the mid-13th century. In 1278, the domain became property of the Biberstein house who took major part in building the large castle palace. Between 1558 and 1620, Fr\xfddlant was owned by the Redern house that continued to upgrade the domain. The Rederns were good managers and warriors, but also builders and art supporters. They built the new renaissance chateau and the chapel. \\n\\nBetween 1622 and 1634, the castle belonged to Albrecht of Wallenstein. He bought it for 150,000 guldens and gradually built a large domain. His estates flourished greatly during the Thirty Years War as they supplied his army. The Fr\xfddlant region was called Terra felix \u2013 the happy country. \\n\\nAfter Albrecht\u2019s murder in 1634, the emperor gave Fr\xfddlant to the Gallas house, and since 1759 the domain was owned by the Clam-Gallases, an important aristocratic house active in diplomatic and military circles at the imperial court. They remained until 1945 when Fr\xfddlant became property of the state. \\n\\nThe original gothic castle hasn\u2019t been preserved in its entirety. Nowadays, the castle is a large two-floor building around the small, irregularly shaped courtyard, with the predominant cylindrical tower \u2013 a bergfrit. The castle was growing over time, and underwent two renaissance reconstructions in the 16th century. The chapel and the renaissance chateau were built at the turn of the 16th and 17th century by Marco Spazzio di Lancio. The last big reconstruction took place in the 1860s, when the castle warden wing was rebuilt. \\n\\nIn 1801, the Clam-Gallases enabled public access to a part of the castle with exhibitions, making it the first castle museum in the Central Europe. The current exhibition includes this museum, the chapel with valuable items, and two chateau wings.","label":"History of castle Fr\xfddlant"},{"language":"en","path":"/houses","title":"Houses","img":"/history/houses.jpg","card_label":"Get to know the individual owners of the Fr\xfddlant manor.","button":"Learn more","houses":[{"title":"Ronowitzer","description":"Founders of Fr\xfddlant Castle.","img":"/coat_of_arms/ronovci.png","button":"More","owners":[{"number":1,"name":"Ronowitzer","years":"?-1278","label":"The oldest history of the Fr\xfddlant castle is connected with the Ronowitzer family, who had it built in the 13th century.","button":"More","text":"The oldest history of the Fr\xfddlant castle is connected with the Ronowitzer family, who had it built in the 13th century. We don\'t know much about their activities in the northern part of Bohemia. The first known member of this family was Smil, who was a member of the retinue of King P\u0159emysl Otakar I. His sons Henry and \u010castolov still use the epithet \'of Zittau\' in 1238, but in 1257 we already find a mention of \'\u010castolov of Fr\xfddlant\'. The expansion of this family was limited in 1278 by King P\u0159emysl Otakar II., when he took the estate from the Ronowitzer family and sold it to the Biberstein family.","img":"/coat_of_arms/ronovci.png"}]},{"title":"Biberstein","description":"The longest ruling house, which was responsible for the expansion of the castle.","img":"/coat_of_arms/biberstejnove.png","button":"More","owners":[{"number":1,"name":"Biberstein","years":"1278-1551","label":"Representatives of the Biberstein family became the owners of the Fr\xfddlant castle for the next almost 300 years, and their reign is mainly connected with the construction expansion of the castle and the further growth of Fr\xfddlant manor.","button":"More","text":"Representatives of the Biberstein family became the owners of the Fr\xfddlant castle for the next almost 300 years, and their reign is mainly connected with the construction expansion of the castle and the further growth of Fr\xfddlant manor. Due to this family\'s efforts for further territorial gains, there have been several conflicts with neighboring ones nobles (e.g. the burning of Nymburk in 1326) and even clash with the royal army of Wenceslaus IV. \\n\\nDuring the Hussite Wars, Fr\xfddlant became the center of the anti-Hussite opposition, and the Fr\xfddlant manor was attacked several times between 1420 and 1433. The town of Fr\xfddlant and other villages in the vicinity were several times burned out. The Biberstein family then remained in opposition even against King Charles of Pod\u011bbrady and were involved in other military conflicts. During the rule of the last Biberstein, the Fr\xfddlant manor became completely Protestant, which was followed by family of Redern. The last male descendant, Christoph, died in 1551 without an heir and thus the manor fell to the Czech royal chamber.","img":"/coat_of_arms/biberstejnove.png"}]},{"title":"Redern","description":"The Silesian house, which contributed to the growth of Protestantism and the construction of the chateau.","img":"/coat_of_arms/redernove.png","button":"More","owners":[{"number":1,"name":"Friedrich of Redern","years":"?-1564","label":"Friedrich of Redern was a member of the Silesian knightly family.","button":"More","text":"Friedrich of Redern was a member of the Silesian knightly family. During his lifetime, he held the position of president of the Silesian Land Chamber and was a member of the royal commission to record the state of the Fr\xfddlant manor after death of the last owner. In 1558 it was Friedrich, who bought the North Bohemian estates of Liberec, Fr\xfddlant and Zawidow. After buying them, he reached elevation to nobility. He and his wife Salomena of Sch\xf6naich had a total of 10 children. He died in 1564 while staying in Wroclaw, Poland.","img":"/coat_of_arms/redernove.png"},{"number":2,"name":"Melchior of Redern","years":"1555-1600","label":"He was the ninth of a total of ten children of Friedrich of Redern.","button":"More","text":"He was the ninth of a total of ten children of Friedrich of Redern. He studied law at a protestant university in Heidelberg and then together with his brother Christopher went on a cavalier trip to France, where in 1572 he witnessed the murder of the Huguenots during the so-called Bartholomew\'s Night. In addition to France, he also visited the Italian cities of Rome, Padua or Naples. Melchior eventually joined the service in the army. In the 1570s and 1580s, he took part in the siege of Gda\u0144sk, the anti-Hungarian campaign, the war in the Netherlands or the Siege of Pskov. \\n\\nAfter death of his brother Christopher in 1591 he became the owner of the Fr\xfddlant manor. He married Catherine of \u0160lik, the sister of one of the most influential Protestant noblemen, J\xe1chym Ond\u0159ej of \u0160lik, who was the owner of the neighboring estate. During his lifetime, construction modifications were made in the castle area. He added one castle wing, the of the castle, the Renaissance wing of thechateau was created, and eventually also the chateau chapel. In the 1590s, Melchior returned to the Hungarian battlefields several times as an officer. As early as the spring of 1600, he participated in a meeting in Vienna about the next military advance against the Turks, during the autumn however, he interrupts his military campaign due to health reasons and died in September of this year.","img":"/people/melchior_redern.jpg"},{"number":3,"name":"Catherine of Redern","years":"1553-1617","label":"Catherine of Redern, born \u0160lik, was the sister of J\xe1chym Ond\u0159ej of \u0160lik, one of those executed at Old Town Square in 1621.","button":"More","text":"Catherine of Redern, born \u0160lik, was the sister of J\xe1chym Ond\u0159ej of \u0160lik, one of those executed at Old Town Square in 1621. Between 1600 and 1611 she managed the Fr\xfddlant manor for her underaged son Christopher. Her work on the Fr\xfddlant estate is mainly connected with disputes with the local townspeople regarding the right to brew beer. Bad relations with the locals eventually resulted in her staying primarily at castle in Liberec. \\n\\nDuring her tenure, the chateau chapels in Fr\xfddlant and Liberec were completed, and other churches were built in the entire Fr\xfddlant manor. She died in 1617 in Liberec, she was to be buried in the family tomb in Fr\xfddlant, but that never happened and the place of burial is still unknown.","img":"/people/katerina_redern.jpg"},{"number":4,"name":"Christopher of Redern","years":"1591-1641","label":"Christopher took over the administration of the estate in 1611.","button":"More","text":"Christopher took over the administration of the estate in 1611. He continued the dispute with the townspeople of Fr\xfddlant, which began during his mother\'s reign. After the outbreak of Bohemian uprising, together with his uncle J\xe1chym Ond\u0159ej of \u0160lik, he was involved on the side of Protestant union where he became the commander of a cavalry division. He was already suffering from health problems at this time. \\n\\nAfter defeat in 1620, his manor was confiscated and he lived in exile on the Zawidow estate. In 1627, the Zawidow estate was also confiscated from him. He then lived in the residence of his wife Magdalena of Hundt in Poland. During the raid Swedes to Bohemia between 1639-1640, he returned to Fr\xfddlant, but in the same year he had to leave Fr\xfddlant manor to Wallenstein. He dies in exile sometime after 1641.","img":"/people/krystof_redern.jpg"}]},{"title":"Albrecht of Wallenstein","description":"Albrecht of Wallenstein was a Czech military leader, politician and one of the most important figures in the Czech history.","img":"/coat_of_arms/albrecht.png","button":"More","owners":[{"number":1,"name":"Albrecht von Wallenstein","years":"1591-1641","label":"Albrecht of Wallenstein was born into a not very wealthy and influential Protestant family and eventually became one of the most powerful men of European importance.","button":"More","text":"Albrecht of Wallenstein was born into a not very wealthy and influential Protestant family and eventually became one of the most powerful men of European importance. His tenure at Fr\xfddlant was not long, it lasted only 12 years, even so, this is the time that made this place and the manor the most famous and it was even raised to a dukedom.\\n\\n The life of Albrecht of Wallenstein was connected with service in the army from a young age. He soon defected from the Protestant camp to the imperial service and on the battlefields of the Thirty Years\' War he attained the highest rank in military command, i.e. Generalissimo of the Imperial Army. His possessions, which included the manor of Fr\xfddlant were then more or less spared from major war conflicts and that is why they were referred to as \'the happy land - terra felix\'.\\n\\n As for the Fr\xfddlant manor, during Wallenstein\'s reign, we can talk about an economic rise, primarily in industries that were associated with the needs of the time \u2013 mining and metal processing or gunpowder production. The castle and chateau were uninhabited and only minor structural modifications took place. Wallenstein stayed here only for a few days in 1627, 1628 and 1630. The end of Wallenstein\'s life was heralded by the loss of trust from the emperor, who felt threatened by Walstein, which is why Wallenstein was murdered by his officers at the beginning of 1634.","img":"/people/albrecht_valdstejn.jpg"}]},{"title":"Gallas","description":"House from northern Italy, which contributed to the expansion of the Fr\xfddlant manor to include Lemberk Castle and its surroundings.","img":"/coat_of_arms/gallasove.png","button":"More","owners":[{"number":1,"name":"Matthias of Gallas","years":"1588-1647","label":"The life of Matthias of Gallas and his social rise were, as in the case of Wallenstein, tightly connected with the period of the Thirty Years\' War.","button":"More","text":"The life of Matthias of Gallas and his social rise were, as in the case of Wallenstein, tightly connected with the period of the Thirty Years\' War. Matthias joined the army as a young man and became famous for the first time in the wars for the Mantuan inheritance on the side of the Catholic League. In 1628 he entered the service of Albrecht of Wallenstein and became one of his generals. In 1632 he attained the rank of earl. After the betrayal of Wallenstein, he became the heir to the Frydlant manor and later the commander-in-chief of the Imperial army, where he worked until the end of the Thirty Years\' War. For Fr\xfddlant, his reign meant the period between 1640-1649 when the castle and town were occupied by Swedish crew. Matthias died in Vienna in 1647.","img":"/people/matyas_gallas.jpg"},{"number":2,"name":"Antonius of Gallas","years":"1638-1695","label":"Antonius is the younger of the sons of Matthias of Gallas.","button":"More","text":"Antonius is the younger of the sons of Matthias of Gallas. He lost his father at the age of 9. After studies and a cavalier journey after France and Benelux, together with his brother Francis Ferdinand, he took over the administration of inherited manors. During his lifetime, he worked as a chamberlain in the service of the Elector of Bavaria and inherited from his father the command of military regiments. His economic situation worsened to the point that he was forced to sell his share to manor and to gave up military regiments as well. In the end, he fell into debt and lived in Kladsk on estates of his son Philip Francis.","img":"/people/antonin_pankrac_gallas.jpg"},{"number":3,"name":"Francis Ferdinand of Gallas","years":"1635-1697","label":"Francis is the elder of the sons of Matthias of Gallas.","button":"More","text":"Francis is the elder of the sons of Matthias of Gallas. After completing his studies and cavalier journey, he took over the administration of the inherited manors. The only court title he received was the titular court chamberlain. During his life he stayed mainly on his manors in Bohemia, mostly in Prague and at the castle in Ho\u0159\xedn\u011bves. His life in Fr\xfddlant is mainly connected with the rebellion of the subjects led by the blacksmith Ond\u0159ej of Stelzig, which was suppressed in 1680. He died in 1697 and his remains are kept in the ancestral tomb in Hejnice.","img":"/people/frantisek_ferdinand_gallas.jpg"},{"number":4,"name":"John Wenceslaus of Gallas","years":"1671-1719","label":"The most important member of this family together with Matthias of Gallas.","button":"More","text":"The most important member of this family together with Matthias of Gallas. He worked in the service of emperors Joseph I. and Charles VI. as an imperial chamberlain, a true privy councilor and diplomat. He worked in the diplomatic service in London, The Hague and Rome. He was eventually appointed viceroy in Naples, where he died in 1719. He is the founder of the later Clam-Gallas Palace in Prague\'s Old Town.","img":"/people/jan_vaclav_gallas.jpg"},{"number":5,"name":"Philip Joseph of Gallas","years":"1703-1757","label":"The last member of the Gallas family, thanks to whom the Fr\xfddlant estate was expanded to include the area around Lemberk.","button":"More","text":"The last member of the Gallas family, thanks to whom the Fr\xfddlant estate was expanded to include the area around Lemberk. During his life he held the official positions of the highest regional hofmeister of the Kingdom of Bohemia and the highest court judge. After the Habsburg army suffered a defeat by the Prussians in the Battle of Liberec, the Fr\xfddlant region was plundered by the Prussians. \\n\\nHe died in 1757 without a male heir, the estate was then managed by his wife Marie Anna. After her death the estate was passed to his nephew Christian Philip of Clam. The condition for this was the merging coats of arms and the addition of the name Gallas. This gave rise to the house Clam-Gallas.","img":"/people/filip_josef_gallas.jpg"}]},{"title":"Clam-Gallas","description":"The last family living in the Fr\xfddlant castle. During her tenure, a major reconstruction of the Renaissance wing of the chateau and the construction of a new wing took place.","img":"/coat_of_arms/clamgallasove.png","button":"Learn","owners":[{"number":1,"name":"Christian Philip of Clam-Gallas","years":"1748-1805","label":"The first of the Clam-Gallas line, who also held offices at the Habsburg court during his lifetime.","button":"More","text":"The first of the Clam-Gallas line, who also held offices at the Habsburg court during his lifetime. He became royal chamberlain of three emperors and was promoted to knight of the order of St. Stephen. He expanded the family estates by another territory. \\n\\nHe was a great lover and patron of the arts. In his Prague residence he hosted, for example, Mozart or Beethoven. In the Fr\xfddlant region, he is primarily associated with the founding of the spa town of Libverda, in Prague then with the Klamovka estate.","img":"/people/kristian_filip_clamgallas.jpg"},{"number":2,"name":"Christian Christopher of Clam-Gallas","years":"1771-1838","label":"Christian Christopher of Clam-Gallas continued his father\'s legacy in terms of career and patronage.","button":"More","text":"Christian Christopher of Clam-Gallas continued his father\'s legacy in terms of career and patronage. He had the rank of Supreme Marshal of the Czech Kingdom. He married Josefina Caroline Clary-Aldringen, also a great lover of art. Together they maintained contact with, for example, Ludwig van Beethoven. \\n\\nHe contributed to further construction activity in Libverda, where new spa pavilions were built. Around Klamovka,he established gardens with sculptural decoration.","img":"/people/kristian_krystof_clamgallas.jpg"},{"number":3,"name":"William of Clam-Gallas","years":"1801-1822","label":"The elder of Christian Christopher\'s sons.","button":"More","text":"The elder of Christian Christopher\'s sons. He died very young at the age of 21. He is buried in the ancestral tomb in Hejnice.","img":"/people/vilem_clamgallas.jpg"},{"number":4,"name":"Edward of Clam-Gallas","years":"1805-1891","label":"Edward was the younger of Christian Christopher\'s sons and also the most prominent member of the Clam-Gallas family.","button":"More","text":"Edward was the younger of Christian Christopher\'s sons and also the most prominent member of the Clam-Gallas family. In 1823 he entered the army as a young man, where he reached the rank of general. He fought under the command of Marshal Radeck\xfd in Northern Italy during the First Italian War of Independence, then fought in Hungary and returned to the Second War in Northern Italy. The most significant of the battles in which he participated are the battles of Magenta and Solferin. \\n\\nDuring the Prussian-Austrian War, he suffered a defeat at the Battle of Ji\u010d\xedn, for which he was judged by a court-martial. Even though he was acquitted, he never returned to the army and lived out his life in Fr\xfddlant and Liberec. \\n\\nDuring his stay in Fr\xfddlant, he had the local chateau undergo extensive reconstruction and building modifications, during which the newest wing of the chateau was created. He died in 1891 at the age of 86.","img":"/people/eduard_clamgallas.jpg"},{"number":5,"name":"Francis of Clam-Gallas","years":"1854-1930","label":"The last male descendant of the Clam-Gallas family.","button":"More","text":"The last male descendant of the Clam-Gallas family. He too continued his civil service career, was chamberlain and privy councilor, but above all he devoted himself to the management of the family estates Liberec, Fr\xfddlant, Grab\u0161tejn and Lemberk. \\n\\nThe First World War, the creation of the Czechoslovak Republic and also the land reform intervened in his life. In addition to farming, he also devoted his whole life to volunteer work and charity, to which he actively contributed. \\n\\nHe died in Fr\xfddlanta in 1930 and left behind 7 daughters. The youngest of them, Clotilde, lived in Fr\xfddlant until the end of World War II.","img":"/people/frantisek_clamgallas.jpg"},{"number":6,"name":"Clotilde of Clam-Gallas","years":"1898-1975","label":"Clotilde of Clam-Gallas was the youngest daughter of Francis Clam-Gallas and Maria Hoyos-Sprinzenstein.","button":"More","text":"Clotilde of Clam-Gallas was the youngest daughter of Francis Clam-Gallas and Maria Hoyos-Sprinzenstein. During Francis\' lifetime, his properties were divided between his daughters. Clotilde then received the Fr\xfddlant Castle. She remained single after her father\'s death, she took care of her widowed mother. After 1945, she had to move abroad and the castle was nationalized.","img":"/people/clotilda_clamgallas_mladsi.jpg"}]}]},{"language":"de","path":"/history_overview","title":"Geschichte \xdcbersicht","button":"Mehr","img":"/history/history.jpg","card_label":"Lernen Sie die Geschichte der Burg und des Schlosses Fr\xfddlant kennen.","description":"Fr\xfddlant ist eine der gr\xf6\xdften und bedeutendsten Denkm\xe4ler in Nordb\xf6hmen. Es besteht aus zwei architektonischen Komplexen: einer mittelalterlichen Burg und einem Renaissanceschloss. Die Burg wurde um die Mitte des 13. Jahrhunderts erbaut. 1278 ging die Dom\xe4ne in den Besitz des Hauses Biberstein \xfcber, das ma\xdfgeblich am Bau des gro\xdfen Burgschlosses beteiligt war. Zwischen 1558 und 1620 war Fr\xfddlant im Besitz des Hauses Redern, das die Herrschaft weiter ausbaute. Die Rederns waren gute Manager und Krieger, aber auch Baumeister und Kunstf\xf6rderer. Sie bauten das Neurenaissanceschloss und die Kapelle. \\n\\nZwischen 1622 und 1634 geh\xf6rte die Burg Albrecht von Wallenstein. Er kaufte es f\xfcr 150.000 Gulden und baute nach und nach eine gro\xdfe Dom\xe4ne auf. Seine L\xe4ndereien bl\xfchten w\xe4hrend des Drei\xdfigj\xe4hrigen Krieges sehr auf, als sie seine Armee versorgten. Die Region Fr\xfddlant wurde Terra felix \u2013 das gl\xfcckliche Land \u2013 genannt. \\n\\nNach der Ermordung Albrechts im Jahre 1634 schenkte der Kaiser Fr\xfddlant dem Haus Gallas, und seit 1759 geh\xf6rte die Dom\xe4ne den Clam-Gallas, einem wichtigen Adelshaus, das in diplomatischen und milit\xe4rischen Kreisen am kaiserlichen Hof aktiv war. Sie blieben bis 1945, als Fr\xfddlant Staatseigentum wurde. \\n\\nDie urspr\xfcngliche gotische Burg ist nicht vollst\xe4ndig erhalten. Heutzutage ist die Burg ein gro\xdfes zweist\xf6ckiges Geb\xe4ude um den kleinen, unregelm\xe4\xdfig geformten Innenhof mit dem vorherrschenden zylindrischen Turm \u2013 einem Bergfrit. Die Burg wuchs im Laufe der Zeit und wurde im 16. Jahrhundert zweimal im Renaissancestil umgebaut. Die Kapelle und das Renaissanceschloss wurden um die Wende vom 16. zum 17. Jahrhundert von Marco Spazzio di Lancio erbaut. Der letzte gro\xdfe Umbau fand in den 1860er Jahren statt, als der Burgw\xe4rterfl\xfcgel wieder aufgebaut wurde. \\n\\nIn 1801 machten die Clam-Gallases einen Teil der Burgs mit Ausstellungen \xf6ffentlich zug\xe4nglich und machten es zum ersten Schlossmuseum in Mitteleuropa. Die aktuelle Ausstellung umfasst dieses Museum, die Kapelle mit wertvollen Gegenst\xe4nden und zwei Schlossfl\xfcgel.","label":"Geschichte der Burg Fr\xfddlant"},{"language":"de","path":"/houses","title":"Houses","img":"/history/houses.jpg","card_label":"Lernen Sie die einzelnen Besitzer der Herrschaft Fr\xfddlant kennen","button":"Mehr","houses":[{"title":"Ronowitzer","description":"Gr\xfcnder der Burg Fr\xfddlant.","img":"/coat_of_arms/ronovci.png","button":"Mehr","owners":[{"number":1,"name":"Ronowitzer","years":"?-1278","label":"Die \xe4lteste Geschichte der Burg Fr\xfddlant ist mit der Familie Ronowitzer verbunden, die sie offenbar im 13. Jahrhundert in den 1340er Jahren erbauen lie\xdf.","button":"Mehr","text":"Die \xe4lteste Geschichte der Burg Fr\xfddlant ist mit der Familie Ronowitzer verbunden, die sie offenbar im 13. Jahrhundert in den 1340er Jahren erbauen lie\xdf. Wir wissen nicht viel \xfcber ihre Aktivit\xe4ten in Nordb\xf6hmen. Das erste bekannte Mitglied aus dieser Familie war Smil, der zum Gefolge von K\xf6nig P\u0159emysl Otakar I. geh\xf6rte. Seine S\xf6hne Jind\u0159ich und \u010castolov verwenden noch 1238 den Beinamen \'von Zittau\', aber schon 1257 finden wir eine Erw\xe4hnung \'Der Vogel von Fr\xfddlant\'. Die Expansion dieser Familie wurde 1278 von K\xf6nig P\u0159emysl Otakar II. begrenzt, als er den Besitz von der Familie Ronowitzer \xfcbernahm und an die benachbarte Familie Biberstein verkaufte.","img":"/coat_of_arms/ronovci.png"}]},{"title":"Biberstein","description":"Das l\xe4ngste Herrscherhaus, das f\xfcr den Ausbau des Schlosses verantwortlich war.","img":"/coat_of_arms/biberstejnove.png","button":"Mehr","owners":[{"number":1,"name":"Biberstein","years":"1278-1551","label":"Die Vertreter der Familie Biberstein wurden f\xfcr die n\xe4chsten 300 Jahre Eigent\xfcmer der Herrschaft Fr\xfddlant, und ihre T\xe4tigkeit ist haupts\xe4chlich mit dem Ausbau der Burg und dem weiteren Wachstum der Herrschaft Fr\xfddlant verbunden.","button":"Mehr","text":"Die Vertreter der Familie Biberstein wurden f\xfcr die n\xe4chsten 300 Jahre Eigent\xfcmer der Herrschaft Fr\xfddlant, und ihre T\xe4tigkeit ist haupts\xe4chlich mit dem Ausbau der Burg und dem weiteren Wachstum der Herrschaft Fr\xfddlant verbunden. Dank der Bem\xfchungen dieser Familie um weitere Gebietsgewinne kam es zu mehreren Konflikten mit benachbarten Adligen (z. B. dem Brand von Nymburk im Jahr 1326) und schlie\xdflich zu einem Zusammensto\xdf mit der k\xf6niglichen Armee von Wenzel IV. \\n\\nW\xe4hrend der Hussitenkriege wurde Fr\xfddlant zum Zentrum der antihussitischen Opposition, und die Herrschaft Fr\xfddlant wurde zwischen 1420 und 1433 mehrmals angegriffen. Die Stadt Fr\xfddlant und andere D\xf6rfer in der N\xe4he waren mehrmals ausgebrannt. Die Familie Biberstein blieb dann in Opposition zu K\xf6nig Ji\u0159\xed von Pod\u011bbrady und nahm an anderen kriegerischen Auseinandersetzungen teil. W\xe4hrend der Herrschaft der letzten Mitglieder det Familie Biberstein wurde die Herrschaft Fr\xfddlant vollst\xe4ndig protestantisch, worauf die aufstrebende Familie Redern folgte. Der letzte m\xe4nnliche Nachkomme, Kry\u0161tof, starb 1551 ohne Erben und somit fiel die Herrschaft an die b\xf6hmische K\xf6nigskammer.","img":"/coat_of_arms/biberstejnove.png"}]},{"title":"R\xf6dern","description":"Das Schlesische Haus, das zum Wachstum des Protestantismus und zum Bau des Schlosses beitrug.","img":"/coat_of_arms/redernove.png","button":"Mehr","owners":[{"number":1,"name":"Friedrich von R\xf6dern","years":"?-1564","label":"Friedrich von R\xf6dern war ein Mitglied des schlesischen Rittergeschlechts.","button":"Mehr","text":"Friedrich von R\xf6dern war ein Mitglied des schlesischen Rittergeschlechts. Zu seinen Lebzeiten bekleidete er das Amt des Pr\xe4sidenten der Schlesischen L\xe4nderkammer und war Mitglied der k\xf6niglichen Kommission zur Erfassung des Zustandes des Guts nach dem Tod des letzten Besitzers des Gutshofes Fr\xfddlant. In 1558 kaufte Friedrich die nordb\xf6hmischen G\xfcter Liberec, Fr\xfddlant und Zawidow. Nach dem Kauf wurde er in den Adelsstand erhoben. Er und seine Frau Salomena aus Sch\xf6naich hatten insgesamt 10 Kinder. Er starb 1564 w\xe4hrend eines Aufenthalts in Wroclaw, Polen.","img":"/coat_of_arms/redernove.png"},{"number":2,"name":"Melchior von R\xf6dern","years":"1555-1600","label":"Er war das neunte von insgesamt zehn Kindern von Friedrich von R\xf6dern.","button":"Mehr","text":"Er war das neunte von insgesamt zehn Kindern von Friedrich von R\xf6dern. In seiner Jugend studierte er der Rechtswissenschaften an einer evangelischen Universit\xe4t in Heidelberg und begab sich anschlie\xdfend zusammen mit seinem Bruder Christoph auf eine Kavaliersreise nach Frankreich, wo er 1572 Zeuge des Massakers an den Hugenotten in der sogenannten Bartholom\xe4usnacht wurde. Neben Frankreich besuchte er auch die italienischen St\xe4dte Rom, Padua und Neapel. Alle m\xe4nnlichen Nachkommen wurden an der Verwaltung des Frydlant-Anwesens beteiligt, und Melchior trat schlie\xdflich der Armee bei. In den 1570er und 1580er Jahren nahm er an der Belagerung von Danzig, dem Feldzug gegen Ungarn, dem Krieg in den Niederlanden oder der Belagerung von Pskow teil.\\n\\nErst 1581 verwaltete er das Gut nur mit seinem Bruder Kry\u0161tof, und nach seinem Tod 1591 wurde er alleiniger Eigent\xfcmer. Er heiratete Katharina von \u0160lik, die Schwester eines der einflussreichsten protestantischen Adligen, J\xe1chym Ond\u0159ej von \u0160lik. Zu seinen Lebzeiten wurden im Burgbereich bauliche Ver\xe4nderungen vorgenommen. Ein Burgfl\xfcgel wurde angebaut, ein Renaissancefl\xfcgel des Schlosses wurde in der N\xe4he der Burg errichtet und schlie\xdflich auch eine Schlosskapelle. In den 1590er Jahren kehrte Melchior mehrmals als Offizier auf die ungarischen Schlachtfelder zur\xfcck. Bereits im Fr\xfchjahr 1600 nahm er an einer Versammlung in Wien \xfcber das weitere milit\xe4rische Vorgehen gegen die T\xfcrken teil, unterbrach jedoch im Herbst aus gesundheitlichen Gr\xfcnden seinen Feldzug und starb im September dieses Jahres.","img":"/people/melchior_redern.jpg"},{"number":3,"name":"Katharina von R\xf6dern","years":"1553-1617","label":"Katharina von R\xf6dern, geborene \u0160lik, war die Schwester von J\xe1chym Ond\u0159ej von \u0160lik, einem von denen, die 1621 auf dem Altst\xe4dter Ring hingerichtet wurden.","button":"Mehr","text":"Katharina von R\xf6dern, geborene \u0160lik, war die Schwester von J\xe1chym Ond\u0159ej von \u0160lik, einem von denen, die 1621 auf dem Altst\xe4dter Ring hingerichtet wurden. Zwischen 1600 und 1611 verwaltete sie das Gut f\xfcr ihren minderj\xe4hrigen Sohn Christoph. Ihre Arbeit auf dem Gut Fr\xfddlant ist vor allem mit Streitigkeiten mit den B\xfcrgern der Stadt um das Bierbraurecht verbunden. Schlechte Beziehungen zu den Einheimischen f\xfchrten schlie\xdflich dazu, dass sie haupts\xe4chlich auf dem Schloss in Liberec blieb, und f\xfchrten zu lokalem Aberglauben \xfcber den b\xf6sen Adel. \\n\\nW\xe4hrend ihrer Amtszeit wurde die Schlosskapelle in Fr\xfddlant und Liberec fertig gestellt, und weitere Kirchen wurden im gesamten Gut Fr\xfddlant gebaut. Sie starb 1617 in Liberec, sie sollte in der Familiengruft in Fr\xfddlant beerdigt werden, aber das geschah nie und der Bestattungsort ist bis heute unbekannt.","img":"/people/katerina_redern.jpg"},{"number":4,"name":"Christoph von R\xf6dern","years":"1591-1641","label":"Christoph \xfcbernahm nach Vollj\xe4hrigkeit im Jahre 1611 die Herrschafr Fr\xfddlant.","button":"Mehr","text":"Christoph \xfcbernahm nach Vollj\xe4hrigkeit im Jahre 1611 die Herrschafr Fr\xfddlant. Er setzte den Streit mit den B\xfcrgern von Frydlant fort, der bereits w\xe4hrend der Regentschaft seiner Mutter begonnen hatte. Nach dem Ausbruch des St\xe4ndeaufstandes engagierte er sich zusammen mit seinem Onkel J\xe1chym Ond\u0159ej von \u0160lik auf der Seite des Protestantischen Bundes, als er Kommandeur einer Kavallerieeinheit wurde. Er litt zu diesem Zeitpunkt bereits unter gesundheitlichen Problemen. \\n\\nNach der Niederlage der b\xf6hmischen Staaten 1620 wurde sein Verm\xf6gen beschlagnahmt und er lebte im Exil auf dem Gut Zawidow. Er trat in den Dienst von K\xf6nig Christian von D\xe4nemark und setzte seinen Kampf gegen den Kaiser fort. Er unterhielt auch Beziehungen zu anderen Exilanten, z.B. Jind\u0159ich Maty\xe1\u0161 Thurn. 1627 wurde ihm auch das Gut Zawidow entzogen. Anschlie\xdfend residierte er in der Residenz seiner Frau Magdalena von Hundt im heutigen Polen. Als die Schweden zwischen 1639 und 1640 in B\xf6hmen einfielen, kehrte er nach Fr\xfddlant zur\xfcck, musste es aber im selben Jahr wieder nach Wallenstein verlassen. Er starb irgendwann nach 1641 im Exil.","img":"/people/krystof_redern.jpg"}]},{"title":"Albrecht von Wallenstein","description":"Albrecht von Wallenstein war ein tschechischer Heerf\xfchrer, Politiker und eine der bedeutendsten Pers\xf6nlichkeiten der tschechischen Geschichte.","img":"/coat_of_arms/albrecht.png","button":"Mehr","owners":[{"number":1,"name":"Albrecht von Wallenstein","years":"1591-1641","label":"Albrecht von Wallenstein wurde in eine nicht sehr wohlhabende und einflussreiche protestantische Familie hineingeboren und wurde schlie\xdflich einer der m\xe4chtigsten M\xe4nner von gesamteurop\xe4ischer Bedeutung.","button":"Mehr","text":"Albrecht von Wallenstein wurde in eine nicht sehr wohlhabende und einflussreiche protestantische Familie hineingeboren und wurde schlie\xdflich einer der m\xe4chtigsten M\xe4nner von gesamteurop\xe4ischer Bedeutung. Seine Amtszeit bei Fr\xfddlant war nicht lang, es dauerte nur 12 Jahre, dennoch ist dies die Zeit, die diesen Ort am ber\xfchmtesten machte und das Anwesen zum Herzogtum erhoben wurde. \\n\\nDas Leben von Albrecht von Wallenstein war schon in jungen Jahren mit dem Milit\xe4rdienst verbunden. Er trat bald aus dem protestantischen Lager in den kaiserlichen Dienst \xfcber und erreichte auf den Schlachtfeldern des Drei\xdfigj\xe4hrigen Krieges die h\xf6chste Position in der Heeresleitung, d.h. Generalissimus der kaiserlichen Armee. Seine Besitzungen, zu denen auch das Herzogtum Fr\xfddlant geh\xf6rte, blieben damals von gr\xf6\xdferen kriegerischen Auseinandersetzungen mehr oder weniger verschont und wurden daher als \u201edas gl\xfcckliche Land \u2013 terra felix\u201c bezeichnet. \\n\\nWas das Gut Fr\xfddlan betrifft, k\xf6nnen wir w\xe4hrend der Herrschaft von Wallenstein von wirtschaftlichem Wachstum sprechen, insbesondere in Industriezweigen, die mit den Bed\xfcrfnissen der Zeit verbunden waren - Metallabbau und -verarbeitung oder Schie\xdfpulverherstellung. Die Burg und das Schloss waren unbewohnt und es wurden nur geringf\xfcgige bauliche Ver\xe4nderungen vorgenommen. Wallenstein hielt sich hier nur wenige Tage in den Jahren 1627, 1628 und 1630 auf. Das Ende von Wallensteins Leben k\xfcndigte der Vertrauensverlust des Kaisers an, der sich durch seine Pers\xf6nlichkeit bedroht f\xfchlte, und so wurde Wallenstein Anfang 1634 von seinen Offizieren entfernt . Damit endete eine Zeit ohne gr\xf6\xdfere Kriegsn\xf6te und Ver\xe4nderungen auch f\xfcr seinen Nachlass.","img":"/people/albrecht_valdstejn.jpg"}]},{"title":"Gallas","description":"Herrscherhaus aus Norditalien, das zur Erweiterung des Gutshofs Fr\xfddlant um das Schloss Lemberk und seine Umgebung beitrug.","img":"/coat_of_arms/gallasove.png","button":"Mehr","owners":[{"number":1,"name":"Matthias von Gallas","years":"1588-1647","label":"Das Leben des Matthias von Gallas und sein gesellschaftlicher Aufstieg waren wie im Falle Wallensteins fest mit der Zeit des Drei\xdfigj\xe4hrigen Krieges verbunden.","button":"Mehr","text":"Das Leben des Matthias von Gallas und sein gesellschaftlicher Aufstieg waren wie im Falle Wallensteins fest mit der Zeit des Drei\xdfigj\xe4hrigen Krieges verbunden. Matthias trat als junger Mann in die Armee ein und wurde zum ersten Mal in den Kriegen ber\xfchmt f\xfcr das mantuanische Erbe auf der Seite der Katholischen Liga. 1628 trat er in die Dienste von Albrecht von Wallenstein und wurde einer seiner Feldherren. 1632 erlangte er den Rang eines Earls. Nach dem Verrat an Wallenstein wurde er Erbe des Gutshofes Fr\xfddlant und sp\xe4ter Oberbefehlshaber der kaiserlichen Armee, wo er bis zum Ende des Drei\xdfigj\xe4hrigen Krieges diente. F\xfcr Fr\xfddlant bedeutete seine Regierungszeit die Zeit zwischen 1640 und 1649, als das Schloss und die Stadt von einer schwedischen Garnison besetzt waren. Matthias starb 1647 in Wien.","img":"/people/matyas_gallas.jpg"},{"number":2,"name":"Antonius von Gallas","years":"1638-1695","label":"Der j\xfcngere der S\xf6hne des Matthias von Gallas.","button":"Mehr","text":"Der j\xfcngere der S\xf6hne des Matthias von Gallas. Er verlor seinen Vater im Alter von 9 Jahren. Nach seinem Studium und einer Kavaliersreise durch Frankreich und die Benelux-L\xe4nder \xfcbernahm er zusammen mit seinem Bruder Franz Ferdinand die F\xfchrung der Familieng\xfcter. Zu Lebzeiten arbeitete er als Kammerherr im Dienst des Kurf\xfcrsten von Bayern und erbte von seinem Vater die F\xfchrung von Milit\xe4rregimentern. Seine wirtschaftliche Situation verschlechterte sich derart, dass er gezwungen war, seinen Anteil an den G\xfctern zu verkaufen und seine Milit\xe4rregimenter aufzugeben. Schlie\xdflich verschuldete er sich und lebte in Kladsk auf den G\xfctern seines Sohnes Filip Franz.","img":"/people/antonin_pankrac_gallas.jpg"},{"number":3,"name":"Franz Ferdinand von Gallas","years":"1635-1697","label":"\xc4ltester der S\xf6hne des Matthias von Gallas.","button":"Mehr","text":"\xc4ltester der S\xf6hne des Matthias von Gallas. Nach Abschluss seiner Ritterlehre \xfcbernahm er die Verwaltung der ererbten L\xe4ndereien. Der einzige Gerichtstitel, den er erhielt, war der Titulargerichtsk\xe4mmerer. Zu seinen Lebzeiten lebte er haupts\xe4chlich auf seinen G\xfctern in B\xf6hmen, haupts\xe4chlich in Prag und auf der Burg in Ho\u0159\xednevs. Sein Leben in Fr\xfddlant ist vor allem mit dem Aufstand der Untertanen unter F\xfchrung des Peitschenschmieds Ond\u0159ej von Stelzig verbunden, der 1680 niedergeschlagen wurde. Er starb 1697 und seine sterblichen \xdcberreste werden in der Ahnengruft in Hejnice aufbewahrt.","img":"/people/frantisek_ferdinand_gallas.jpg"},{"number":4,"name":"Johann Wenzeslaus von Gallas","years":"1671-1719","label":"Das wichtigste Mitglied dieser Familie zusammen mit Matthias von Gallas.","button":"Mehr","text":"Das wichtigste Mitglied dieser Familie zusammen mit Matthias von Gallas. Er arbeitete im Dienst der Kaiser Joseph I. und Karl VI. als kaiserlicher K\xe4mmerer, echter Geheimrat und Diplomat. Er diente im diplomatischen Dienst in London, Den Haag und Rom. Er wurde schlie\xdflich zum Vizek\xf6nig in Neapel ernannt, wo er 1719 starb. Er ist der Gr\xfcnder des sp\xe4teren Clam-Gallas-Palais in der Prager Altstadt.","img":"/people/jan_vaclav_gallas.jpg"},{"number":5,"name":"Philip Joseph von Gallas","years":"1703-1757","label":"Prvni majitel frydlantu","button":"Mehr","text":"Das letzte Mitglied der Familie Gallas, dank dessen das Gut Fr\xfddlant auf das Gebiet um Lemberk ausgedehnt wurde. Zu seinen Lebzeiten bekleidete er die \xc4mter des h\xf6chsten Landeshofmeisters des K\xf6nigreichs B\xf6hmen und des obersten Gerichtsrichters. Nachdem die habsburgische Armee in der Schlacht bei Liberec eine Niederlage gegen die Preu\xdfen erlitten hatte, wurde ganz Friedland von den Preu\xdfen gepl\xfcndert. \\n\\nEr starb 1757 ohne m\xe4nnlichen Erben, das Gut wurde dann von seiner Frau Marie Anna verwaltet. Nach ihren Tod musste das Gut an seinen Neffen Christian Philip von Clam \xfcbergehen. Voraussetzung daf\xfcr war die Zusammenlegung der Wappen und die Hinzuf\xfcgung des Namens Gallas.","img":"/people/filip_josef_gallas.jpg"}]},{"title":"Clam-Gallas","description":"Die letzte Familie, die im Schloss Fr\xfddlant lebte. W\xe4hrend ihrer Amtszeit fand eine umfassende Rekonstruktion des Renaissancefl\xfcgels des Schlosses und der Bau eines neuen Fl\xfcgels statt.","img":"/coat_of_arms/clamgallasove.png","button":"Mehr","owners":[{"number":1,"name":"Christian Philip von Clam-Gallas","years":"1748-1805","label":"Der erste aus der Clam-Gallas-Linie, der zu Lebzeiten auch \xc4mter am habsburgischen Hof bekleidete.","button":"Mehr","text":"Der erste aus der Clam-Gallas-Linie, der zu Lebzeiten auch \xc4mter am habsburgischen Hof bekleidete. Er wurde k\xf6niglicher Kammerherr von drei Kaisern und wurde in den Rang eines Ritters des St.-Stephans-Ordens erhoben. Er erweiterte die Familieng\xfcter mit zus\xe4tzlichem Territorium. \\n\\nEr war ein gro\xdfer Liebhaber und M\xe4zen der K\xfcnste. Er beherbergte zum Beispiel Mozart oder Beethoven in seiner Prager Residenz. In der Region Frydlant ist es vor allem mit der Gr\xfcndung der Kurstadt Libverda und in Prag mit dem Gut Klamovka verbunden.","img":"/people/kristian_filip_clamgallas.jpg"},{"number":2,"name":"Christian Christoph von Clam-Gallas","years":"1771-1838","label":"Christian Christoph setzte das Erbe seines Vaters in Bezug auf Karriere und M\xe4zenatentum fort.","button":"Mehr","text":"Christian Christoph setzte das Erbe seines Vaters in Bezug auf Karriere und M\xe4zenatentum fort. Er bekleidete den Rang eines Obersten Marschalls des b\xf6hmischen K\xf6nigreichs. Er heiratete Josefina Caroline von Clary-Aldringen, ebenfalls eine gro\xdfe Kunstliebhaberin. Gemeinsam pflegten sie den Kontakt zum Beispiel zu Ludwig van Beethoven. \\n\\nEr trug zur weiteren Baut\xe4tigkeit in Libverda bei, wo neue Spa-Pavillons gebaut wurden. Rund um das Geh\xf6ft Klamovka lie\xdf er G\xe4rten mit Skulpturenschmuck anlegen.","img":"/people/kristian_krystof_clamgallas.jpg"},{"number":3,"name":"Wilhelm von Clam-Gallas","years":"1801-1822","label":"Der \xe4ltere der S\xf6hne von Christian Christoph.","button":"Mehr","text":"Der \xe4ltere der S\xf6hne von Christian Christoph. Er starb sehr jung im Alter von 21 Jahren. Er ist in der Familiengruft in Hejnice begraben.","img":"/people/vilem_clamgallas.jpg"},{"number":4,"name":"Eduard von Clam-Gallas","years":"1805-1891","label":"Der j\xfcngere Sohn von Christian Christoph.","button":"Mehr","text":"Der j\xfcngere Sohn von Christian Christoph. Das prominenteste Mitglied der Clam-Gallas-Familie. Bereits als junger Mann trat er 1823 in die Armee ein, wo er den Rang eines Generals erreichte. Unter dem Kommando von Marschall Radeck\xfd k\xe4mpfte er w\xe4hrend des Ersten Italienischen Unabh\xe4ngigkeitskrieges in Norditalien, schloss sich dann den K\xe4mpfen in Ungarn an und kehrte in den Zweiten Krieg nach Norditalien zur\xfcck. Die wichtigsten der Schlachten, an denen er teilnahm, sind die Schlachten von Magenta und Solferino. \\n\\nW\xe4hrend des Preu\xdfisch-\xd6sterreichischen Krieges erlitt er in der Schlacht bei Ji\u010d\xedn eine Niederlage, f\xfcr die er vor ein Kriegsgericht gestellt wurde. Dieser sprach ihn frei, aber er kehrte nie zur Armee zur\xfcck und verbrachte sein Leben in Fr\xfddlant und Liberec. \\n\\nW\xe4hrend seines Aufenthaltes in Fr\xfddlant lie\xdf er das Renaissanceschloss umfassend umbauen, wobei der neueste Fl\xfcgel des Schlosses entstand. Er starb 1891 im Alter von 86 Jahren.","img":"/people/eduard_clamgallas.jpg"},{"number":5,"name":"Franz von Clam-Gallas","years":"1854-1930","label":"Der letzte m\xe4nnliche Nachkomme der Familie Clam-Gallas.","button":"Mehr","text":"Der letzte m\xe4nnliche Nachkomme der Familie Clam-Gallas. Auch er setzte seine Beamtenlaufbahn fort, war Kammerherr und Geheimrat, widmete sich aber vor allem der Verwaltung der Familieng\xfcter Liberec, Fr\xfddlant, Grab\u0161tejn und Lemberk. \\n\\nDer Erste Weltkrieg, die Gr\xfcndung der Tschechoslowakischen Republik und auch die Bodenreform griffen in sein Leben ein. Neben der Landwirtschaft widmete er sein ganzes Leben der Freiwilligenarbeit und der Wohlt\xe4tigkeit, zu der er aktiv beitrug. \\n\\nEr starb 1930 in Fr\xfddlant und hinterlie\xdf 7 T\xf6chter. Die j\xfcngste von ihnen, Clotilde, lebte bis zum Ende des Zweiten Weltkriegs in Fr\xfddlant.","img":"/people/frantisek_clamgallas.jpg"},{"number":6,"name":"Clotilde von Clam-Gallas","years":"1898-1975","label":"Klotilde von Clam-Gallas war die j\xfcngste Tochter von Franz Clam-Gallas und Maria Hoyos-Sprinzenstein.","button":"Mehr","text":"Klotilde von Clam-Gallas war die j\xfcngste Tochter von Franz Clam-Gallas und Maria Hoyos-Sprinzenstein. Zu Franz Lebzeiten wurde sein Verm\xf6gen zwischen seinen T\xf6chtern aufgeteilt. Clotilde erhielt dann die Burg Fr\xfddlant. Nach Franzs Tod k\xfcmmerte sie sich um ihre verwitwete Mutter und blieb ledig. Nach 1945 musste sie ins Ausland umziehen und das Schloss wurde verstaatlicht.","img":"/people/clotilda_clamgallas_mladsi.jpg"}]}]}],"gB":[{"tour_id":"castle","language":"en","title":"Castle","img":"/castle/castle.jpg","rooms_label":"rooms","time":"60 minutes","description":"This tour takes the visitor through the Upper Castle, which is the oldest part of the Fr\xfddlant area. The entire route is dominated by a large knight\'s hall with an ancestral gallery, armory, banquet hall or a large collection of employee uniforms.","button":"Start tour","rooms":[{"audio":"/kcd.mp3","number":1,"img":"/castle/dolni_nadvori.jpg","title":"The lower courtyard","card_label":"We are currently standing in the lower courtyard, where we can see the whole complex.","button":"Visit","text":"Dear visitors, we welcome you to the state castle and chateau of Fr\xfddlant. Before the start of the tour, we ask you to silence your mobile phones so that the tour is not disturbed. If you are using an audio guide, wear headphones while listening. Furthermore, we ask you not to touch the displayed exhibits and stay with your group. Thank you for your understanding and we wish you a pleasant visit.\\n\\n We are currently standing in the lower courtyard, where we can see the whole complex.\\n\\nThe oldest part is the round tower called Indica. According to the legend, a fire was being lit on the top of Indica, so the tower served as a beacon for the trade route between the Czech Kingdom and the Kingdoms in the North. The tower is 49 metres high and its walls are in the first floor 4 metres thick.\\n\\n In the 13th century, the old gothic castle was built around the tower. Then in the 16th century, it was rebuilt in renaissance style, which is the current form of the castle.\\n\\nThe yellow building behind the tree is the chapel. It was built between 1598 - 1602 by Catherine Redern. Next to the chapel is the renaissance wing of the chateau from the 16th century. On its facade, we can see the original renaissance pictures called sgraffito. And the youngest part of the complex is the last wing of the chateau, called the Castellan wing. That was built in the 19th century by Eduard Clam-Gallas.\\n\\nUnder the original defensive wall, we can see the path leading up to the castle. The path is called the Knights road because knights rode their horses all the way to the castle doors in olden times while ladies were carried up in sedans. But unfortunately today we have to go by ourselves."},{"audio":"/kcd.mp3","number":2,"img":"/castle/pred_kapli.jpg","title":"In front of the castle","card_label":"Here we can see that the castle was erected on a natural rock foundation","button":"Visit","text":"Here we can see that the castle was erected on a natural rock foundation. The nickname for the rock is the Devil\'s Organ because, according to the legend, the Devil played a game of dice with a castle owner. Because he lost, he had to plough the furrows in this basalt rock base.\\n\\n Here above us, we can see this arc. It\'s called the Diaphragm arch. Owners used it as a corridor between the upper courtyard and the chapel.\\n\\nAbove the castle gate, there are two coats of arms. The one on the left belongs to one of the castle\'s former owners - Anton Pancratius Gallas. The right one belongs to his wife, to Del Arco\'s family.\\n\\nHere is also this platform where we can admire a beautiful view of the Jizera Mountains and the valley of the river Sm\u011bd\xe1.\\n\\nWhen we go upstairs, there are three fire extinguishers from the 19th century along the corridor walls."},{"audio":"/kcd.mp3","number":3,"img":"/castle/hradni_nadvori.jpg","title":"The small castle courtyard","card_label":"This courtyard is this small due to the rock we had seen before, which did not allow the owners to build the castle very wide.","button":"Visit","text":"This courtyard is this small due to the rock we had seen before, which did not allow the owners to build the castle very wide.\\n\\nAs you already know, the oldest part is the tower called Indica. Only two cells are in the tower (behind the wooden doors). They used to serve as a prison and later as a treasure room.\\n\\nThe table above the door commemorates that Christopher Bierberstein completed the first renaissance rebuilding of the castle in the year 1551.\\n\\nOn the wall above is the coat of arms of Matthias Gallas, and the coat of arms above the door belongs to the Bieberstein family.\\n\\nWe will now go inside the castle, and we want to remind you that you cannot touch any exhibits inside. We appreciate your understanding."},{"audio":"/kcd.mp3","number":4,"img":"/castle/prvni_hradni.jpg","title":"The first room of the castle","card_label":"From the second half of the 13th century, this region of Bohemia was ruled by a family called Ronovci, whose coat of arms can be seen above the entrance door.","button":"Visit","text":"From the second half of the 13th century, this region of Bohemia was ruled by a family called Ronovci, whose coat of arms can be seen above the entrance door.\\n\\nIn the year 1278, the Czech king confiscated the castle and sold it to the house of Bieberstein. They remained at Fr\xfddlant for almost 300 years. However, the Bieberstein family that lived on Fr\xfddland died out in 1551.\\n\\n Then in 1558, Rederns came to this castle. In this room, we have three pictures of members of the Redern family. Next to the window is Melchior Redern. He fought against the Turks with great success and even became the Imperial marshall. During his absence and after his death, his wife Catherine (between windows) controlled his property and affairs.\\n\\nAt the beginning of the 17th century, she built the castle chapel, the old section of the chateau and the family tomb in a local church. In addition, she was able to finance all her son\'s journeys to Italy and all around Europe. Unfortunately, many of these expenses were paid by taxes from the local population, which angered them. So they started calling her Catherine the Bad.\\n\\nThen their son Christopher Redern controlled the castle. He took part in the insurrection of the Czech protestants against the catholic Habsburgs from 1618 to 1620. The rebellion culminated on the 8th of November 1620. After the decisive battle of White Mountain, Christopher was forced to emigrate. The Habsburg emperor then confiscated all his property and sold it to Albrecht of Wallenstein in 1622.\\n\\nThe most interesting things in this room are those two models of Fr\xfddlant. They are both from the 19th century. The right one is the actual form of the castle, and the left one is a reconstruction that was never built.\\n\\nIn the glass case, the relics of Melchior Redern are displayed. It is his left armbone, his helmet, and his sword. Above it is his burial clothing robe."},{"audio":"/kcd.mp3","number":5,"img":"/castle/albrecht.jpg","title":"Albrecht of Wallenstein","card_label":"In 1622 the country around the Fr\xfddlant was purchased by Albrecht of Wallenstein (picture on the wall next to the entrance doors). ","button":"Visit","text":"In 1622 the country around the Fr\xfddlant was purchased by Albrecht of Wallenstein (picture on the wall next to the entrance doors). Although Albrecht became the Duke of Fr\xfddlant, the castle was never his chief residence.\\n\\nAlbrecht of Wallenstein was the most important and best-known person in the Thirty years\' war (1618-1648) in the 17th century. At the war\'s end, he started to negotiate with enemies and was accused of high treason. In 1634 he was assassinated in the town of Cheb.\\n\\nTwo paintings on the side of the door represent the murder of Wallenstein. The one on the left is a murder of his friends, and the one on the right is the murder of Wallenstein himself.\\n\\nLook at the other portraits in this room: \\n\\nHis daughter and wife are next to Albrecht\'s painting.\\n\\n On the left wall, next to the window, is Albrecht\'s brother-in-law, cardinal Harrach.\\n\\nThe great painting presents Wallenstein\'s favourite horse, which he took as a spoil of war in 1632. The Spanish inscription MAS QUERIDO means My darling.\\n\\nIn the corner is Wallenstein\'s family tree, and next to the door is a portrait of Wallenstein\'s astrologer Giovanni Battista Seni."},{"audio":"/kcd.mp3","number":6,"img":"/castle/rytirsky_sal.jpg","title":"The knight hall","card_label":"Now we are in the knight hall, which was established as a gallery in 1801 when the castle was opened to the public as the first castle museum in central Europe.","button":"Visit","text":"Now we are in the knight hall, which was established as a gallery in 1801 when the castle was opened to the public as the first castle museum in central Europe.\\n\\nOn the left wall is situated the picture of Matthias Gallas. He betrayed Albrecht of Wallenstein, so he got the castle from the emperor. Next to there is his wife, Dorothy. They had four sons and five daughters. Here we can see only 2 of their sons - Anton Pancratius and Francis Ferdinand.\\n\\nFrancis reconstructed the castle in the baroque style. His portrait is on the right side of the door. His wife Joanne (on the other side of the door) died when she was 92 years old, which means that she outlived her husband and their son.\\n\\n Their son John Wenceslaus (between windows on the right side) was in 1719 appointed as a Viceroy of Naples. Opposite him is a painting of his wife, Mary Ann, who is thought to be the most beautiful lady in the castle.\\n\\nPhillip Joseph, their son, was the last ruling member of the house of Gallas. As he had no children, his family line ended with him. According to his last will, Fr\xfddlant should be passed on to his nephew Christian Philip of Clam (on the left side of the door) under the condition that the name and coat of arms of the Clam family would be joined by the name and coat of arms of the Gallas family.\\n\\nAnd so in 1757, Clam-Gallas family gained Fr\xfddlant."},{"audio":"/kcd.mp3","number":7,"img":"/castle/piano.jpg","title":"The piano room","card_label":"In this room, there are portraits of the Clam-Gallas family members. ","button":"Visit","text":"In this room, there are portraits of the Clam-Gallas family members.\\n\\nChristian Christopher and his wife Josephine (paintings on the left side of the door we came through) sponsored many cultural events such as theather plays and musical performances. Josephine was an accomplished singer, guitarist and pianist. She was a friend of Ludwig van Beethoven who dedicated two of his musical compositions to her.\\n\\nJosephine and Christian had two sons - William and Eduard.\\n\\n William (next to the window) died during a hunting trip when he was only 20.\\n\\n Eduard was a famous general in the Habsburg army. He fought side by side with Marshal Radetzky in the war in Northern Italy. For his deeds, he was rewarded the Order of the Golden Fleece - the highest honours in the Habsburg Monarchy. For his defeats in 1866, he was court-martialled, but he was acquitted because of his position in society. After he abandoned military life, he retired to Fr\xfddlant Castle.\\n\\nEduard had one son named Francis, whose bust we can see between the windows. Francis left no male heir, although he had seven daughters.\\n\\n His second youngest daughter Clotilde lived at Fr\xfddlant castle till 1945.\\n\\n In 1945 Fr\xfddlant was due to the Bene\u0161 decrees (after the 2WW - series of laws, thanks to which the German population was expelled from the state) confiscated by the Czechoslovakian state. Clotilde then moved to Wien, where she died in 1975 without heirs, so the castle is forever in the ownership of the Czech Republic.\\n\\nAnd that is the end of our long history. Now we will visit the rest of the castle, which is set up as the Castle Museum precisely as it was in 1801 when the owners of the castle opened it."},{"audio":"/kcd.mp3","number":8,"img":"/castle/eduard.jpg","title":"Eduard\'s study","card_label":"In this room, you can examine Eduard\'s personal belongings. ","button":"Visit","text":"In this room, you can examine Eduard\'s personal belongings.\\n\\n In the glass boxes on the tables are two books. The bigger one is Eduard\'s photo album, and the smaller one is a birthday wish with photos inside.\\n\\nPictures around the rooms represent battles in North Italy, where Eduard fought alongside Marshal Radetzky. In the showcase at the wall, there are gifts from Radetzky to Eduard for his 80th birthday.\\n\\nIn the showcase on the left side of the door are other gifts. On the right side of the door are Eduard\'s three general uniforms - (from the left) Hussar uniform, Uhlan uniform and Dragoon uniform.\\n\\nThe showcase by the left window contains the personal belongings of Eduard\'s wife, Clotilde Dietrichstein. The one by the right window has military honours, sealing stamps or keys inside it. There is also the Order of the Golden Fleece - golden sheep on the red ribbon."},{"audio":"/kcd.mp3","number":9,"img":"/castle/uniformy.jpg","title":"The uniforms","card_label":"Previously this room served as a luxury accommodation place for all important visitors to the castle. ","button":"Visit","text":"Previously this room served as a luxury accommodation place for all important visitors to the castle. Nowadays, several uniforms of the castle servants are displayed in this room.\\n\\nIn the smaller wardrobe at the wall are four different uniforms of the coachman. There are festive/ordinary and winter/summer uniforms.\\n\\nIn the more extensive wardrobe in the middle of the room are uniforms of the castle foresters, porters or valets. Underneath are several military hats and wigs, some of which were made from real human hair."},{"audio":"/kcd.mp3","number":10,"img":"/castle/nositka.jpg","title":"Means of transport","card_label":"Here in this room are displayed several means of transport used by nobles","button":"Visit","text":"Here in this room are displayed several means of transport used by nobles. \\n\\nFrom the left, the first one is the chassis of the children\'s coach; goats or ponies usually pulled that. \\n\\nNext are two children\'s baroque sledges. The bigger one has an animal\'s motive on it, specifically a dolphin\'s. However, it does not look like a dolphin because the maker of the sledge never saw a real dolphin and only read about them, that they look like fish with the head of a dog.\\n\\nThe last mean of transport is a lady\'s sedan.\\n\\nOther exhibits are a folding screen from 1719, used as a portable wall when changing clothes, or a very rare shooting target because already used targets were usually burned."},{"audio":"/kcd.mp3","number":11,"img":"/castle/lovecky_salon.jpg","title":"Hunting salon","card_label":"Hunting was a very popular amusement for the aristocracy. ","button":"Visit","text":"Hunting was a very popular amusement for the aristocracy. Here on Fr\xfddlant, the castle owners were no exception. Like the other nobles, they organized many hunts, mainly in the nearby forests of the Jizera mountains. Trophies from their hunts decorate the walls around the whole complex. Many of the antlers on the walls also have signs stating when, where, and by whom the animal was killed; some also note the animal\'s weight.\\n\\nIn this room, we have this scarce table. It was made from the trunk of 130 years old birch tree. On it is a collection of pipes that belonged to Eduard Clam-Gallas. Eduard and his son Francis had collected and gathered more than 220 pipes worldwide. Some of them are displayed like this throughout the entire tour of the castle.\\n\\nOpposite the table, on the wall, is the great painting of the last killed wolf in Fr\xfddlant woods, which was shot in 1766."},{"audio":"/kcd.mp3","number":12,"img":"/castle/jidelna.jpg","title":"Renaissance dining room","card_label":"This old Redern\'s dining room is equipped in renaissance style. ","button":"Visit","text":"nThis old Redern\'s dining room is equipped in renaissance style. The collection of the dishes made from the tin is from the 17th, 18th and 19th centuries. The stove in this room is the oldest in the whole castle, from the 17th century. On the wall next to the stove is the clock from the 17th century, entirely made from wood, except for three glass bells. Behind the door is a terrace with a view of the lower courtyard and the town of Fr\xfddlant."},{"audio":"/kcd.mp3","number":13,"img":"/castle/vezeni.jpg","title":"The hallway","card_label":"The wall here is curved due to the fact, that we are going along the high tower called Indica. ","button":"Visit","text":"nThe wall here is curved due to the fact, that we are going along the high tower called Indica. The first door was used for putting the wood into the stove, and the second one leads into one of the cells (used as a prison, later as a treasure room) that are in the tower. Now we will go upstairs to the Castle\'s armoury."},{"audio":"/kcd.mp3","number":14,"img":"/castle/zbrojnice1.jpg","title":"The armoury \u2013 Main hall","card_label":"On the ceiling of this room are coats of arms of families from the Thirty years\' war which lasted from 1618 to 1648.","button":"Visit","text":"On the ceiling of this room are coats of arms of families from the Thirty years\' war which lasted from 1618 to 1648. Most weapons are muskets (long guns on the walls) from the 17th century; they can shoot up to 300 metres and weigh 5-9 kilos. On the left are very rare those two big guns. They are called Arquebus. They were used from the 14th century; one was operated by two men, weighed 50 kilos and could shoot up to 100 metres. On the wall above the doors are copies of Hussit\'s weapons as a reminder that Hussites tried to conquer the castle twice but never succeeded."},{"audio":"/kcd.mp3","number":15,"img":"/castle/zbrojnice2.jpg","title":"The armoury \u2013 the second room","card_label":"In this room we have equipment for castle garrison. ","button":"Visit","text":"In this room we have equipment for castle garrison. It was bought by one of the castle owners - Count Francis Ferdinand Gallas. His initials are also on the cartridge bags on the walls (from German) - Franz Ferdinand Gr\xe4f von Gallas. Displayed are also mortars and tiny cannons used as festive weapons."},{"audio":"/kcd.mp3","number":16,"img":"/castle/postroje.jpg","title":"Equipment for horses","card_label":"On the left are four silver harnesses used last time in 1930 at the funeral of the last male owner of the castle - Francis Clam-Gallas.","button":"Visit","text":"On the left are four silver harnesses used last time in 1930 at the funeral of the last male owner of the castle - Francis Clam-Gallas. Behind them, next to the door, are boots and a hat. That belonged to the courier. Couriers filled the boots with hay and put them over their own shoes so their feet would stay warm. The hat is, in fact, a secret backpack for letters or money.\\n\\nThe other two harnesses are golden, and behind them, on the wall, are three nets. They were used as a protection for horses against the insect. In the adjoining room, you can view some other equipment for horses."},{"audio":"/kcd.mp3","number":17,"img":"/castle/obrazarna.jpg","title":"The Castle\u2019s gallery","card_label":"Here in the gallery are pictures of many owners of the castle, like Christian Philip of Clam-Gallas, William Clam-Gallas, Albrecht Wallenstein or John Wenceslaus Gallas.","button":"Visit","text":"Here in the gallery are pictures of many owners of the castle, like Christian Philip of Clam-Gallas, William Clam-Gallas, Albrecht Wallenstein or John Wenceslaus Gallas.\\n\\nSome of the pictures also show aristocracy all around Europe. For example, the painting above the entrance door is Spanish princess Margaret Theresa - wife of the Habsburg emperor Leopold I. On the right side of her portrait is emperor Charles VI.\\n\\nA fruit bowl made from alabaster is on the table in the middle of the room.   On the other table is a showcase with ostrich egg (a souvenir from travels of the Clam-Gallas family) and burned money - another tourist attraction for the Castle Museum."},{"audio":"/kcd.mp3","number":18,"img":"/castle/vrchnostenska.jpg","title":"Administrative office","card_label":"Here we have many casual things clerks required for their job.","button":"Visit","text":"Here we have many casual things clerks required for their job.\\n\\nThis office has two cabinets: the younger one in front from the 19th century and the older one in the back from the 18th century. On the wall is the oldest map of the Fr\xfddlant region from the 17th century. The interesting thing is that it has north on the bottom and south on the top. The following map is a map from school. The roughcast on the table is a map of the park around the castle from the 19th century. The last map is a map of the region from 1880.\\n\\nBetween the windows is a photo of Eduard Clam-Gallas. Above the door is a woodcut of Saint Florian because the castle owners believed it would protect the castle against fire.\\n\\nOn our way out, you can spot a table on the wall that states the prize of entry into the Castle Museum.\\n\\nDear visitors, our tour ends here. Thank you for your attention and I wish you a nice rest of the day."}]},{"tour_id":"castle","language":"de","title":"Die Burg","img":"/castle/castle.jpg","rooms_label":"R\xe4ume","time":"60 Minuten","description":"Die F\xfchrung f\xfchrt den Besucher durch die Obere Burg, den \xe4ltesten Teil des Fr\xfddlant-Gebiets. Der gesamte Weg wird dominiert von einem gro\xdfen Rittersaal mit Ahnenempore, einer R\xfcstkammer, einem Festsaal oder einer gro\xdfen Sammlung von Dienstkleidung.","button":"F\xfchrung beginnen","rooms":[{"audio":"/kcd.mp3","number":1,"img":"/castle/dolni_nadvori.jpg","title":"Der erste Schlosshof","card_label":"Wir befinden uns auf dem unteren Schlosshof, woher wir das ganze Objekt \xfcbersehen k\xf6nnen.","button":"Besuchen","text":"Herzlich willkommen auf dem Staatsschloss Fr\xfddlant. Vor Beginn der Tour bitten wir Sie, Ihre Handys lautlos zu schalten, damit die Tour nicht gest\xf6rt wird. Wenn Sie einen Audioguide verwenden, tragen Sie beim H\xf6ren Kopfh\xf6rer. Au\xdferdem bitten wir Sie, die ausgestellten Exponate nicht zu ber\xfchren und bei Ihrer Gruppe zu bleiben. Vielen Dank f\xfcr Ihr Verst\xe4ndnis und wir w\xfcnschen Ihnen einen angenehmen Besuch.\\n\\nWir befinden uns auf dem unteren Schlosshof, woher wir das ganze Objekt \xfcbersehen k\xf6nnen.\\n\\nWir sehen die Burg, die Schlosskapelle, das sogenannte Alte Schloss aus dem 16.Jhr. und hier links das sogenannte Neue Schloss aus der 2.H\xe4lfte des 19. Jhds.\\n\\nDie Burg Fr\xfddlant geh\xf6rt zu den \xe4ltesten und m\xe4chtigsten gut erhaltenen Burgen in Nordb\xf6hmen. Sie wurde gegen die H\xe4lfte des 13.Jhd im gotischen Stil erbaut. Der \xe4lteste Teil der Burg ist der hohe Turm, der Indica gennant wird. Eine alte Sage erz\xe4hlt, dass der Turm fr\xfcher oben flach war. Wahrscheinlich wurde auf ihm das Feuer angez\xfcndet und der Turm diente als Leuchterturm auf dem Handelsweg aus B\xf6hmen in die Lausitz und weiter nach Polen.\\n\\nDie Schlosskapelle (das gelbe Geb\xe4ude) liess Katharina von Redern mit ihrem Mann Melchior in den Jahren 1598 \u2013 1602 erbauen.\\n\\nNach der Besichtigung der Kapelle gehen wir durch den \xe4lteren Teil des Schlosses aus dem 16. Jhd, der im Renaissancestil erbaut wurde. Seine Fassade ist mit den echten Renaisancesgraffitos (auch 16.Jhd) geschm\xfcckt. Die Sgraffitos wurden erst im Jahr 1960 nach Jahrhunderten entdeckt.\\n\\nDie Besichtigung beenden wir in dem neusten Teil des Schlosses aus der 2.H\xe4lfte des 19.Jhd und dann als letzte besuchen wir sch\xf6ne Schlossk\xfcche aus dem 19.Jhd.\\n\\nRechts sehen Sie die urspr\xfcnglichen Burgmauern. Dieser steiler Weg heisst \u201eRitterweg\u201c. Hier sind damals die Ritter auf Pferden bis hinauf in die Burg geritten. Die Damen wurden in ihren S\xe4nften nach oben getragen. Aber heuzutage m\xfcssen auch die Damen zu Fuss gehen."},{"audio":"/kcd.mp3","number":2,"img":"/castle/pred_kapli.jpg","title":"Vor der Schlosskapelle","card_label":"Wir stehen jetzt vor der Renaissanceburg aus der H\xe4lfte des 16. Jahrhunderts.","button":"Besuchen","text":"Wir stehen jetzt vor der Renaissanceburg aus der H\xe4lfte des 16. Jahrhunderts. Die Burg steht auf einem nat\xfchrlichen Basaltfelsen. Der Sage nach hat diesen Felsen der Teufel gepfl\xfcgt und deshalb nennt man den Felsen auch die \u201eTeufelsorgel\u201c.\\n\\nDer Bogen hier oben ist eine Br\xfccke zwischen der Burg und der Schlosskapelle.\\n\\n\xdcber dem alten urspr\xfcnglichen Eingang in die Burg sehen Sie 2 Wappen. Links das Wappen von Anton Pankratius Gallas und das Wappen rechts geh\xf6rte seiner Mutter Victoria de Arco.\\n\\nHinaufsteigend die Treppe zum kleinen Burghof sehen Sie rechts 3 alten Wasserpumpen = Feuerl\xf6scher (links und rechts aus dem 18.Jhd, in der Mitte aus dem Jahr 1877 aus Wien)."},{"audio":"/kcd.mp3","number":3,"img":"/castle/hradni_nadvori.jpg","title":"Der Burghof","card_label":"Wir befinden uns in dem kleinen Burghof.","button":"Besuchen","text":"Wir befinden uns in dem kleinen Burghof. Der Basaltfelsen ist relativ klein, deshalb baute man die Burg nicht in die Breite, aber in die H\xf6he.\\n\\nDie urspr\xfcngliche gotische Burg wurde im 16.Jhd im Renaissancestil umgebaut. Auf dieser Gedenktafel \xfcber der T\xfcr ist lateinisch geschrieben, dass den ersten Renaissanceumbau der Burg Christoph von Biberstein beendete. \xdcber dem Dach sehen Sie ein kleines Wappen. Das geh\xf6rte der Adelsfamilie Biberstein.\\n\\nDas grosse Wappen hier oben geh\xf6rte dem Grafen Mathias Gallas de Campo. Er war urspr\xfcnglich Wallensteins General w\xe4rend des 30-Jahrigen Krieges, auch sein Kolege, sp\xe4ter sein Verr\xe4ter. Mathias Gallas hat nach der Wallensteinsermordung im Jahr 1634 \xfcbernahm die ganze Herschaft Fr\xfddlant als die Belohnung f\xfcr die Waldsteinsermordung.\\n\\nVon hier aus k\xf6nnen Sie sich den hohen Burgturm Indica ansehen. Er wurde schon im Jahre 1014 erbaut und ist also der \xe4lteste Teil der Burg. Der Turm ist 49 m hoch und die Mauer sind in der H\xf6he der 1.Etage fast 4m breit. In der Mitte ist ein kleiner Raum (Gef\xe4ngnis oder Schatzkammer in der 1. + 2. Etage)."},{"audio":"/kcd.mp3","number":4,"img":"/castle/prvni_hradni.jpg","title":"Der erste Burgraum","card_label":"Wir sind jetzt in dem 1. Burgraum.","button":"Besuchen","text":"Wir sind jetzt in dem 1. Burgraum. Wir beginnen mit der \xe4ltesten Historie: Der Gr\xfcnder der Burg ist heute schon unbekannt. Seit der H\xe4lfte des 13.Jhds herrschte hier im Namen des b\xf6hmischen K\xf6nigs die Adelsfamilie Ronowitzer, eine der m\xe4chtigsten b\xf6hmischen Adelsfamilien. Das Wappen der Ronowitzer sehen Sie hier links \xfcber der T\xfcr.\\n\\nIm Jahre 1278 hat der b\xf6hmische K\xf6nig P\u0159emysl Otakar II. den Ronowitzer die Herrschaft abgenommen. Und noch in diesem Jahr 1278 kaufte die Herrschaft Fr\xfddlant der s\xe4chsische Edelsmann Rudolf von Biberstein. Und diese Adelsfamilie von Biberstein blieb am l\xe4ngsten da, fast 300 Jahre (1278 - 1551 = 273 Jahre). Die Bibersteins realisierten hier den Renaissanceumbau der Burg. In dem Jahr 1551 starb auch der letzte aus der Friedlander Adelsfamilie Biberstein.\\n\\nIm Jahre 1558 kaufte Fr\xfddlant Fridrich von Redern. In diesem Jahr gewann er auch die Herrschaft Liberec und Zawidow. Er starb schon im Jahre 1564 und seinen Besitz vererbten seine S\xf6hne.\\n\\nSeit 1591 blieb hier als einziger Besitzer Melchior von  Redern, der kaiserliche Feldherr und Pr\xe4sident der kaiserlichen Geheimrates. Melchior war ein herrvorragender Krieger. Er k\xe4mpfte in Ungarn gegen T\xfcrken. Nach seinem Tod im Jahr 1600 \xfcbernahm die Herrschaft Fr\xfddlant seine Frau Katharina von Redern (geborene Schlick). Ihr Bild sehen Sie zwischen den Fenstern.\\n\\nKatharina von Redern war eine sehr energische Frau, deshalb hat sie von der Bev\xf6lkerung einen Spitznamen bekommen: \u201edie b\xf6se Katharina\u201c. Sie hat nach ihrem Mann mit der Harrschaft Fr\xfddlant auch seine riesigen Schulden vererbt. Aber den Hauptteil dieser Schulden bezahlte sie. Sie liess auch die Schlosskapelle, den alten Teil des Schlosses und die Familiengruft der Adelsfamilie Redern in der Kirche hier in Fr\xfddlant erbauen. Das Bild der Familiengruft k\xf6nnen sie rechts von der zweiten T\xfcr sehen. In dieser Vitrine links von der T\xfcr sind Melchiors \xdcberreste ausgestellt. Und im dem kleinem Sarg befindet sich sein Armknochen.\\n\\nKatharina f\xfchrte auch einen Prozess gegen B\xfcrgen um das Braurecht. Diesen Prozess hat sie verloren und den B\xfcrgern zum Trotz liess sie auf dem Marktplatz hier in Fr\xfddlant das sogenannte \u201eTrotzhaus\u201c erbauen, das dort bis heute noch steht. Katharina starb wahrscheinlich im Jahre 1618, aber ihr Grab wurde bis heute nicht gefunden.\\n\\nNach dem Katharinas Tod \xfcbernahm Herschaft Fr\xfddlant ihr Sohn Christoph von Redern. Christoph nahm mit seinem Onkel, dem Grafen Joachim Andreas von Schlick, auf dem Aufstand gegen Kaiser Ferdinand auf dem Weissen Berg im Jahre 1620 teil. Als der Widerstand geschlagen wurde, musste Christoph fliehen. Sein Onkel wurde am 21.Juni 1621 auf dem Altst\xe4tder Ring in Prag hingerichtet.\\n\\nDie Herschaft der Adelsfamilie Redern wurde dann konfisziert und im Jahre 1622 kaufte sie Albrecht von Waldstein (Wallenstein)."},{"audio":"/kcd.mp3","number":5,"img":"/castle/albrecht.jpg","title":"Albrecht von Wallenstein","card_label":"Albrecht von  Wallenstein kaufte die konfiszierten Dom\xe4nen der Adelsfamilie Redern im Jahre 1622.","button":"Besuchen","text":"Albrecht von  Wallenstein kaufte die konfiszierten Dom\xe4nen der Adelsfamilie Redern im Jahre 1622.  Wallenstein war aber ein b\xf6hmischer Adeliger, eine grosse Pers\xf6nlichkeit des 30-Jahrigen Krieg.\\n\\nWallenstein war ein sehr ergeiziger Mann. Im Jahre 1624 wurde er zum Herzog von Fr\xfddlant genannt. Aber sein Hauptsitz war das Schloss Ji\u010d\xedn. In Fr\xfddlant hielt er sich sehr selten auf. Nach der Schlacht auf dem Weissen Berg wurde er kurzer Zeit einer der reichsten M\xe4nner in B\xf6hmen.\\n\\nIhm fehlte nur die B\xf6hmische K\xf6ningskrone. Deswegen paktierte er mit den Schweden und anderen Gegnern der Habsburgen. Seine geheimen Verhandlungen waren aber seinen Gener\xe4len bekannt. Seine Gener\xe4le Octavio Piccolomini und Mathyas Galls de Campo informierten \xfcber seine Pl\xe4ne den Kaiser. Am Anfang des Jahres 1634 wurde in Wien \xfcber  Wallensteins Ermordung entschieden und dann, am 25.Februar 1634, wurde dann  Wallenstein in Cheb (deutsch damals Eger) ermordet.\\n\\nHier links sehen Sie sein Portr\xe4t aus dem Jahr 1630. Das Bild ist wahrscheinlich ein Werk des friedlander Malers Christian Kaulfersch. Daneben ist der Stambaum der Adelsfamilie  Wallenstein. Im Bild ist sein echter Name (Wallenstein) geschrieben. Und oft auch Generalisimus von Friedland.\\n\\nAuf dem gr\xf6ssten Bild ist  Wallensteins Pferd, seine Kriegsbeute aus der Schlacht  bei L\xfctzen bei Leipzig (1632), wo der schwedische K\xf6nig Gustav II. Adolf gestorben ist. Die spanische \xdcberschrift \u201eMas Querido\u201c  bedeutet \u201ebeliebteste\u201c. \xdcber der T\xfcr sehen Sie  Wallenstein\xb4s Wappen."},{"audio":"/kcd.mp3","number":6,"img":"/castle/rytirsky_sal.jpg","title":"Der grosse Rittersaal","card_label":"Wir sind jetzt im dem grossen Rittersaal, der seit 1801 als Bildergalerie der Adelsfamilie Gallas und Clam-Gallas diente.","button":"Besuchen","text":"Wir sind jetzt im dem grossen Rittersaal, der seit 1801 als Bildergalerie der Adelsfamilie Gallas und Clam-Gallas diente.\\n\\nIm Jahre 1634 bekam die Herrschaft Fr\xfddlant Graf Mathyas Gallas de Campo, als die Belohnung f\xfcr den Mord Albrecht von  Wallenstein. Noch in diesem Jahr besetzen die Burg und die Stadt Fr\xfddlant die Schweden, die hier  mehrmals bis 1649 waren. Das Portr\xe4t von Mathyas Gallas ist ein Werk von Franz Leux. Daneben ist seine Gemahlin, Grafin von Lodron.\\n\\nMathias Gallas hatte 4 S\xf6hne und 5 Tochter. Links von der ersten T\xfcr sehen Sie das Portr\xe4t seines Sohnes Franz Ferdinand Graf von Gallas. Er gr\xfcndete im 17.Jhd in Helnice (deutsch Heindorf ) das Kloster und in der Kirche auch die Familiengruft der Adelsfamilie Gallas. Rechts von der T\xfcr sehen Sie auf dem Bild seine Gemahlin Johanna Emerenziana, geborene Gr\xe4fin Gaschin-Rosenberg. Sie herrste noch sehr lange nach dem Tod ihrers Mannes, sie starb im Jahre 1735, als sie 92 Jahre alt war.\\n\\nIhr Sohn, Johann Wenzeslaus von Gallas (rechts in der Mitte des Saales) war ein kaiserlicher Diplomat. Im Jahre 1719 wurde er zum Vicek\xf6nig von Neapol ernannt. Johann Wenzeslaus liess das Palais in Prag, heuzutage \u201eClam-Gallas Palais\u201c umbauen. Die Bauarbeiten hat, nach Pl\xe4nen von Jan Bernard Fischer von Erlach, am Anfang des 18.Jhds G.B.Canevale gef\xfchrt. Johann Wenzeslaus starb in Neapol und dort wurde er auch begraben. Aber nach seinem Wunsch wurde sein Herz in der Familiengruft in Hejnice beigesetzt.\\n\\nDer letzte Besitzer aus der Adelsfamilie Gallas war Filip Josef. Durch ihn starb die Familie Gallas im Jahre 1757 aus. Nach seinem letzten Willen \xfcbernahm dann die Herrschaft Fr\xfddlant als Erbe sein Neffe, Cristian Philip von Clam. Aber nur unter der Bedingung, dass zum Namen und Wappen der Adelsfamilie Clam der Name und Wappen der Adelsfamilie Gallas zugegeben wird.\\n\\nUnd so entstand eine der reichsten und m\xe4chtigsten Adelsfamilien in \xd6sterreich und in B\xf6hmen = die Adelsamilie Clam-Gallas. Der erste von ihnen, Cristian Philip hat den bekannten Kurort Bad Libverda, der in der N\xe4he von Fr\xfddlant liegt, gegr\xfcndet.\\n\\nUnd in dem n\xe4chsten Raum sehen Sie weitere Portr\xe4te der Mitgliedern der Adelsfamilie Clam-Gallas."},{"audio":"/kcd.mp3","number":7,"img":"/castle/piano.jpg","title":"Bei dem Klavier","card_label":"In dem Bild \xfcber dem Fl\xfcgel ist der n\xe4chste Besitzer, Cristian Christoph Clam-Gallas.","button":"Besuchen","text":"In dem Bild \xfcber dem Fl\xfcgel ist der n\xe4chste Besitzer, Cristian Christoph Clam-Gallas. Er war ein grosser Kunst- und Musikliebhaber. Neben ihm sehen sie seine Gemahlin, Josephine Clam-Gallas, geborene Gr\xe4fin Clary\u2013Aldringen. Beide unterst\xfctzten Theater und Musik in Fr\xfddlant. Josephine konnte gut singen und Klavier und Gitare spielen. Sie war auch mit dem Komponisten Ludwig van Beethoven pers\xf6nlich befreudet und hat mit ihm auch in Bad Teplice konzertiert.\\n\\nChristian mit Josephine hatten 2 S\xf6hne: der \xe4ltere Sohn Wilhelm (sein Portr\xe4t ist an der Wand hinter Ihnen) starb an der Jagd in Hejnice, als er 20 Jahre alt war. Sein j\xfcngere Bruder Eduard \xfcbernahm die Verwaltung der Herrschaft Fr\xfddlant im Jahre 1838, unmittelbar nach dem Tod seines Vaters. Sein Portr\xe4t mahlte der Wiener Mahler Franz Schrotzberg im Jahre 1852.\\n\\nEduard Clam-Gallas war ein bedeutender \xf6sterreichischer Gener\xe4l. Er k\xe4mpfte gemeinsam mit dem bekannten Marschall Radecky in der 2.H\xe4lfte des 19.Jhd. in Norditalien. Im Jahre 1866 (\xd6sterreich-Preusischer Krieg) wurden seine Regimente mehrmals geschlagen und Eduard wurde gerichtet und obwohl unschuldig, zum Tod verurteilt. Zum Schluss wurde er aber freigesprochen und als unschuldig gekl\xe4rt. Dann zog er auf Schloss Fr\xfddlant um und lebte hier bis zum Ende des Lebens. Er starb im Jahre 1891 in Wien.\\n\\nEduard Clam-Gallas hatte nur einen einzigen Sohn Franz. Hier ist seine B\xfcste, ein Werk des Wiener Bildhauers Heinrich Karl Scholz. Franz Clam-Gallas starb im Jahre 1930 und hatte 7 T\xf6chter. Eine von ihnen, Clottilde, lebte hier bis zum April 1945, wann sie nach \xd6sterreich umgezogen ist.\\n\\nSeit dem Jahr 1945 geh\xf6rt die Burg und Schloss Fr\xfddlant dem Staat."},{"audio":"/kcd.mp3","number":8,"img":"/castle/eduard.jpg","title":"Das Eduards Arbeitszimmer","card_label":"Wir sind jetzt in dem Arbeitszimmer des Gener\xe4ls Eduard Clam-Gallas. ","button":"Besuchen","text":"Wir sind jetzt in dem Arbeitszimmer des Gener\xe4ls Eduard Clam-Gallas. In dem Schrank links k\xf6nnen sie sich die Andenken an Eduars Kollege und Freund, Marschall Radecky, ansehen.\\n\\nDie Bilder stellen die Schlachten in Norditalien dar, die \xd6sterreich-Ungarn Monarchie in der 2.H\xe4lfte des 19.Jhds f\xfchrte.\\n\\nIn dem grossen Schrank links von der T\xfcr sind die Geschenke, die Eduard von seinen Offizieren und Freunden bekommen hat und dem Schrank rechts von der T\xfcr sind Eduards Uniformen \u2013 die Ulanuniform, die Dragoner- und die Hussarenuniform ausgestellt.\\n\\nIn dem Schaukasten am rechten Fenster sind Eduards Milit\xe4rsorden ausgestellt. Unter ihnen ist auch der bekannteste \xf6sterreichischer Orden \u201eZum goldenen Vlieses\u201c."},{"audio":"/kcd.mp3","number":9,"img":"/castle/uniformy.jpg","title":"Die Uniformen","card_label":"Dieser Eckraum diente fr\xfcher als Gastzimmer f\xfcr sehr geehrte Besucher, sp\xe4ter auch als Herrenklub.","button":"Besuchen","text":"Dieser Eckraum diente fr\xfcher als Gastzimmer f\xfcr sehr geehrte Besucher, sp\xe4ter auch als Herrenklub. Heuzutage sind hier einige Uniformen der Schlossdienerschaft ausgestellt. In dem grossen Schrank in der Mitte des Raumes sehen Sie von links nach rechts Uniformen des Oberf\xe4rsters, des F\xf6rsters und des Adjunkten, und dann altags- und Feieruniform des Majordomus. Daneben ist der Ceremoniestock."},{"audio":"/kcd.mp3","number":10,"img":"/castle/nositka.jpg","title":"Die S\xe4nfte","card_label":"In diesem Raum sehen Sie rechts die Damens\xe4nfte und vor den Fenstern Barockschlitten.","button":"Besuchen","text":"In diesem Raum sehen Sie rechts die Damens\xe4nfte und vor den Fenstern Barockschlitten. Weiter sehen Sie hier noch den unteren Teil der Kinderkutsche, vermutlich von den Ponny gezogen.\\n\\n Im n\xe4chsten Raum sehen Sie Zielscheiben aus dem 18. und 19. Jhd."},{"audio":"/kcd.mp3","number":11,"img":"/castle/lovecky_salon.jpg","title":"Der Jagdsalon","card_label":"In dem  Jagdsalon sehen Sie das Bild des Wolfes, der im Jahre 1766 als der lezte Wolf hier im Isergebirge erschossen wurde.","button":"Besuchen","text":"In dem  Jagdsalon sehen Sie das Bild des Wolfes, der im Jahre 1766 als der lezte Wolf hier im Isergebirge erschossen wurde. Am Fenster steht ein Tisch. Seine Tischplatte ist aus der hunderdreissig Jahre alten Birke hergestellt.\\n\\nIm n\xe4chsten Raum sind mehrere Tiere als Kuriosit\xe4ten, ausgestellt."},{"audio":"/kcd.mp3","number":12,"img":"/castle/jidelna.jpg","title":"Der Renaissancespeisesaal","card_label":"Der Speisesaal ist im Renaissancestil eingerichtet.","button":"Besuchen","text":"Der Speisesaal ist im Renaissancestil eingerichtet. Die Sammlung der Zinngeschirre stammt aus dem 17., 18. und 19. Jahrhundert. Der Ofen in diesem Raum ist der \xe4lteste im ganzen Schloss und stammt aus dem 17. Jahrhundert. An der Wand neben dem Ofen befindet sich die Uhr aus dem 17. Jahrhundert, die bis auf drei Glasglocken vollst\xe4ndig aus Holz besteht. Hinter der T\xfcr ist eine Terrasse mit Blick auf den unteren Hof und die Stadt Fr\xfddlant."},{"audio":"/kcd.mp3","number":13,"img":"/castle/vezeni.jpg","title":"Gef\xe4ngnis","card_label":"Die Wand hier ist gekr\xfcmmt, weil wir an dem hohen Turm namens Indica entlang gehen.","button":"Besuchen","text":"Die Wand hier ist gekr\xfcmmt, weil wir an dem hohen Turm namens Indica entlang gehen. Die erste T\xfcr diente dazu, das Holz in den Ofen zu legen, und die zweite f\xfchrt in eine der Zellen (die als Gef\xe4ngnis, sp\xe4ter als Schatzkammer dienten), die sich im Turm befinden. Jetzt gehen wir nach oben in die Waffenkammer des Schlosses."},{"audio":"/kcd.mp3","number":14,"img":"/castle/zbrojnice1.jpg","title":"Die Waffenkammer - Teil 1","card_label":"An der Decke dieses Raumes befinden sich Wappen von Familien aus dem Drei\xdfigj\xe4hrigen Krieg, der von 1618 bis 1648 dauerte.","button":"Besuchen","text":"An der Decke dieses Raumes befinden sich Wappen von Familien aus dem Drei\xdfigj\xe4hrigen Krieg, der von 1618 bis 1648 dauerte. Die meisten Waffen sind Musketen (Langwaffen an den W\xe4nden) aus dem 17. Jahrhundert. Sie k\xf6nnen bis zu 300 Meter weit schie\xdfen und 5-9 Kilo wiegen. Auf der linken Seite sind diese beiden gro\xdfen Kanonen sehr selten. Sie werden Arkebuse genannt. Sie wurden ab dem 14. Jahrhundert verwendet. Einer wurde von zwei M\xe4nnern bedient, wog 50 Kilo und konnte bis zu 100 Meter weit schie\xdfen. An der Wand \xfcber den T\xfcren sind Kopien von Hussitenwaffen als Erinnerung daran, dass die Hussiten zweimal versuchten, die Burg zu erobern, aber es gelang ihnen nicht."},{"audio":"/kcd.mp3","number":15,"img":"/castle/zbrojnice2.jpg","title":"Der Waffenkammer - Teil 2","card_label":"In diesem Raum haben wir Ausr\xfcstung f\xfcr die Burggarnison.","button":"Besuchen","text":"In diesem Raum haben wir Ausr\xfcstung f\xfcr die Burggarnison. Es wurde von einem der Schlossbesitzer - Graf Francis Ferdinand Gallas - gekauft. Seine Initialen stehen auch auf den Patronentaschen an den W\xe4nden (aus dem Deutschen) - Franz Ferdinand Gr\xe4f von Gallas. Ausgestellt sind auch M\xf6rser und kleine Kanonen, die als festliche Waffen verwendet werden."},{"audio":"/kcd.mp3","number":16,"img":"/castle/postroje.jpg","title":"Die Kutschergeschirre","card_label":"Hier sehen Sie die alten Kutschergeschirre.","button":"Besuchen","text":"Hier sehen Sie die alten Kutschergeschirre. Die ersten zwei sind Brustgeschirre, die anderen vier sind Kummergeschirre. Der Hut, die Stieffel und der Sattel links von der T\xfcr geh\xf6rten zur Ausr\xfcstung des Reitskuriers. Den Hut hat der Kurier auf den R\xfccken getragen und drinnen hat er die Post \xfcbertragen. Die Stiefel wurden als seine \xfcberschuhen benutzt."},{"audio":"/kcd.mp3","number":17,"img":"/castle/obrazarna.jpg","title":"Die Bildergalerie","card_label":"Hier in der Galerie sind Bilder von vielen Besitzern des Schlosses, wie Christian Philip von Clam-Gallas, William Clam-Gallas, Albrecht Wallenstein oder John Wenceslaus Gallas.","button":"Besuchen","text":"Hier in der Galerie sind Bilder von vielen Besitzern des Schlosses, wie Christian Philip von Clam-Gallas, William Clam-Gallas, Albrecht Wallenstein oder John Wenceslaus Gallas.\\n\\nEinige der Bilder zeigen auch Aristokratie in ganz Europa. Zum Beispiel die spanische Prinzessin Margaret Theresa - Ehefrau des Habsburger Kaisers Leopold I.\\n\\nEine Obstschale aus Alabaster steht auf dem Tisch in der Mitte des Raumes. Auf dem anderen Tisch steht eine Vitrine mit Strau\xdfenei, ein Souvenir von Reisen der Familie Clam-Gallas, und verbranntem Geld \u2013 eine weitere Touristenattraktion f\xfcr das Schlossmuseum."},{"audio":"/kcd.mp3","number":18,"img":"/castle/vrchnostenska.jpg","title":"Die Hauptmannkanzlei","card_label":"Hier haben wir viele Alltagssachen, die B\xfcroangestellte f\xfcr ihren Job ben\xf6tigen.","button":"Besuchen","text":"Hier haben wir viele Alltagssachen, die B\xfcroangestellte f\xfcr ihren Job ben\xf6tigen.\\n\\nDieses B\xfcro hat zwei Schr\xe4nke: den j\xfcngeren vorne aus dem 19. Jahrhundert und den \xe4lteren hinten aus dem 18. Jahrhundert.An der Wand h\xe4ngt die \xe4lteste Karte der Friedl\xe4nder Region aus dem 17. Jahrhundert. Das Interessante ist, dass es unten Norden und oben S\xfcden hat. Die folgende Karte ist eine Karte aus der Schule. Der Rohputz auf dem Tisch ist eine Karte des Schlossparks aus dem 19. Jahrhundert. Die letzte Karte ist eine Karte der Region aus dem Jahr 1880.\\n\\nZwischen den Fenstern h\xe4ngt ein Foto von Eduard Clam-Gallas. \xdcber der T\xfcr befindet sich ein Holzschnitt des Heiligen Florian, weil die Burgbesitzer glaubten, dass er die Burg vor Feuer sch\xfctzen w\xfcrde.\\n\\nAuf unserem Weg nach drau\xdfen k\xf6nnen Sie eine Tafel an der Wand entdecken, auf der der Preis f\xfcr den Eintritt in das Burgmuseum steht.\\n\\nLiebe Besucher, unsere Tour endet hier. Ich danke Ihnen f\xfcr Ihre Aufmerksamkeit und w\xfcnsche Ihnen einen sch\xf6nen Rest des Tages."}]},{"tour_id":"chateau","language":"en","title":"Chateau","img":"/chateau/chateau.jpg","rooms_label":"rooms","time":"60 minutes","description":"This tour takes the visitor through the richly furnished castle and the history of the last owners of Clam Gallas. A fully equipped tour route maps the chateau and its more than 20 rooms on all its floors.","button":"Start tour","rooms":[{"audio":"/kcd.mp3","number":1,"img":"/chateau/dolni_nadvori.jpg","title":"The lower courtyard","card_label":"We are currently standing in the lower courtyard, where we can see the whole complex.","button":"Visit","text":"Dear visitors, we welcome you to the state castle and chateau of Fr\xfddlant. Before the start of the tour, we ask you to silence your mobile phones so that the tour is not disturbed. If you are using an audio guide, wear headphones while listening. Furthermore, we ask you not to touch the displayed exhibits and stay with your group. Thank you for your understanding and we wish you a pleasant visit.\\n\\nWe are currently standing in the lower courtyard, where we can see the whole complex.\\n\\nThe oldest part is the round tower called Indica. According to the legend, a fire was being lit on the top of Indica, so the tower served as a beacon for the trade route between the Czech Kingdom and the Kingdoms in the North. The tower is 49 metres high and its walls are in the first floor 4 metres thick.\\n\\nIn the 13th century, the old gothic castle was built around the tower. Then in the 16th century, it was rebuilt in renaissance style, which is the current form of the castle.\\n\\nThe yellow building behind the tree is the chapel. It was built between 1598 - 1602 by Catherine Redern. Next to the chapel is the renaissance wing of the chateau from the 16th century. On its facade, we can see the original renaissance pictures called sgraffito. And the youngest part of the complex is the last wing of the chateau, called the Castellan wing. That was built in the 19th century by Eduard Clam-Gallas.\\n\\nOn this tour through the chateau, we will visit all floors of the renaissance wing. And at the end, we will see the chapel. \\n\\nNow let us begin our tour in the chateau\'s kitchen."},{"audio":"/kcd.mp3","number":2,"img":"/chateau/kuchyne.jpg","title":"The kitchen","card_label":"We entered the chateau building from the 16th century. ","button":"Visit","text":"We entered the chateau building from the 16th century. Originally this building was not supposed to be for the nobles. On the upper floors were offices, and on the ground floor were stables for horses. In the 19th century, nobles moved from the upper castle to the chateau. Chateau was reconstructed and furnished with new things, meaning that the interiors we have today are from the 19th century. The castle was in 1801 opened to the public as the first Castle Museum in Central Europe.\\n\\nAs we are on the ground floor, this room used to be stable. Proof for this statement is the stone trough next to the doors. During the reconstruction, cooks wanted to keep it here, so they could wash dishes or keep live fish in it.\\n\\nThe kitchen is, for its time, relatively modern. Displayed is the most extensive collection of copper dishes in the Czech Republic. The dishes are tin-plated inside.\\n\\nThe larger stove has five ovens, it is still functional, and on some special occasions, we even bake some treats on them. A big black box is placed on top of them, that is a water-heating system for the chateau\'s bathroom.\\n\\nThe smaller stove is a grill and smoking chamber; unfortunately, it is no longer functional."},{"audio":"/kcd.mp3","number":3,"img":"/chateau/spizirna.jpg","title":"The larder","card_label":"This larder was carved into the rock on which the castle and chateau Fr\xfddlant was built. ","button":"Visit","text":"This larder was carved into the rock on which the castle and chateau Fr\xfddlant was built. That is why the temperature is quite cold here during the year, which is optimal for storing food. Interesting are those compotes in the cabinet, some of which are from 1945. Everything else in this larder is not originally from the Fr\xfddlant; it was brought here from the surrounding villages."},{"audio":"/kcd.mp3","number":4,"img":"/chateau/pripravna.jpg","title":"Food preparation room","card_label":"The room behind the window was used as a preparation room for food","button":"Visit","text":"The room behind the window was used as a preparation room for food.\\n\\nFood cooked downstairs in the kitchen was brought here, put on the dishes, decorated, and then servants took it from this window and carried it through the door to the dining room to be served."},{"audio":"/kcd.mp3","number":5,"img":"/chateau/erbovni_sal.jpg","title":"Coat of arms hall","card_label":"We have now entered the Coats of arms hall, and here we can briefly summarize the history of Fr\xfddlant.","button":"Visit","text":"We have now entered the Coats of arms hall, and here we can briefly summarize the history of Fr\xfddlant.\\n\\nFr\xfddland was founded in half of the 13th century by the family of Ronovci; specifically, one ancestral line called Berka z Dub\xe9. \\n\\nIn the year 1278, the Czech king confiscated the castle and sold it to the house of Bieberstein. They remained at Fr\xfddlant for almost 300 years. However, the Bieberstein family that lived on Fr\xfddland died out in 1551. \\n\\nThen in 1558, Rederns came to this castle. However, they were protestants, so after a battle of the battle of White Mountain, they were forced to emigrate. The Habsburg emperor confiscated all their properties and sold them to Albrecht von Wallenstein in 1622.\\n\\nAlbrecht owned Fr\xfddlant for twelve years, visited it four times, but never built anything here. For the supposed treason of the emperor, Albrecht was assassinated on 25th February 1634.\\n\\nEmperor then gave Fr\xfddlant to Albrecht\'s traitor Matthias Gallas. Gallas family, however, died out in 1757. According to last will of the last Gallas, Fr\xfddlant should be passed on to his nephew Christian Philip of Clam under the condition that the name and coat of arms of the Clam family would be joined by the name and coat of arms of the Gallas family.\\n\\nAnd so in 1759, Clam-Gallas family gained Fr\xfddlant. They owned Fr\xfddlant till 1945, when it was nationalized by the Czechoslovakian state due to the Bene\u0161 decrees, series of laws, thanks to which the German population was expelled from the state after WW2.\\n\\nOn this tour, we will talk mainly about the Clam-Gallas family, specifically about the last male owner Francis Clam-Gallas, his daughter - the last owner - Clotilde Clam-Gallas, and his father - Eduard Clam-Gallas. \\n\\nThis grand hall served as a game room, so we have the roulette and the pool table here. On the fireplace is a tankard made from one tusk. The adjoining room is the large dining room."},{"audio":"/kcd.mp3","number":6,"img":"/chateau/jidelna.jpg","title":"The large dining room","card_label":"This large dining room was mainly used as a festive dining room.","button":"Visit","text":"This large dining room was mainly used as a festive dining room. The Clam-Gallas family used it on some special occasions like birthdays or Christmas. Next to the dining room is a terrace, which they used instead of the dining room when the weather was nice. The dining room is panelled with wood, and the Faience of Delft is displayed on the panelling. Ceramic dishes displayed on the tables are then from England. This is also the only room in the complex with a coffered ceiling."},{"audio":"/kcd.mp3","number":7,"img":"/chateau/modry_salon.jpg","title":"The blue salon","card_label":"This floor could be divided into two parts representative rooms, where we are now, and a private apartment of the last male owner of the Fr\xfddlant - Francis Clam-Gallas.","button":"Visit","text":"This floor could be divided into two parts representative rooms, where we are now, and a private apartment of the last male owner of the Fr\xfddlant - Francis Clam-Gallas.\\n\\nOn the floor is an immense Persian carpet, which is just a copy made in a village near the city of Liberec. On the walls are several paintings from the Netherlands; the author is unknown. The salon served the family of Francis Clam-Gallas, whose portrait you can find between the windows, as the main living room where not only visitors but also all family members meet. In the case of Francis Clam-Glass, all his 7 daughters. He and his wife, Maria Hoyos Sprinzenstein, were given another floor of the castle, as well as part of the newest wing, but if they wanted to spend time together, this was the main salon. It was a smoking room, a reading room and a rest room at the same time. Later, after the introduction of electricity, a radio was also placed here, so it was really a living room with all the modern conveniences."},{"audio":"/kcd.mp3","number":8,"img":"/chateau/knihovna.jpg","title":"Small library","card_label":"This is a small library.","button":"Visit","text":"This is a small library. Small because we have another larger one. Unfortunately, that one is not open to the public. Here we can again notice golden leather wallpapers, part of the castle\'s book collection, or a big mirror from Venice."},{"audio":"/kcd.mp3","number":9,"img":"/chateau/panska_chodba.jpg","title":"The hallway","card_label":"This hallway is again panelled with wood.","button":"Visit","text":"This hallway is again panelled with wood. In panelling are displayed plates made in the Netherlands. At the end of the hallway is a stuffed bear. His name is Ali, and he used to live in our castle\'s ditch. When he grew up, he became aggressive, so the nobles decided to euthanize him, and since then, he has been up here stuffed."},{"audio":"/kcd.mp3","number":10,"img":"/chateau/prijimaci_salon.jpg","title":"Entrance salon","card_label":"This salon is one of the few panelled with wood up to the ceiling.","button":"Visit","text":"This salon is one of the few panelled with wood up to the ceiling. The ceiling was then decorated with gold. \\n\\nOn the walls are copies of paintings that could be seen on our second tour through the castle. The first is Christian Philip of Clam-Gallas, founder of near L\xe1zn\u011b Libverda spa. During his reign, the upper castle was in 1801 opened to the public as the first Castle Museum in Central Europe. Our complex has this one big primacy because the tours are here from 1801 without any break, which means we had tours here even during both world wars. The two following pictures are Albrecht von Wallenstein (on the left one) and his traitor Matthias Gallas (on the right one). Opposite of them is Melchior Redern with his son Christopher. Christopher is the one who fought in 1620 in the battle of the White mountain, and after the defeat he had to run away from the Czech Kingdom."},{"audio":"/kcd.mp3","number":11,"img":"/chateau/pracovna.jpg","title":"Francis\' study","card_label":"In this room, we have many personal belongings of the last male owner of Fr\xfddlant - Francis Clam-Gallas.","button":"Visit","text":"In this room, we have many personal belongings of the last male owner of Fr\xfddlant - Francis Clam-Gallas. On the table is a photo of Francis with his wife Maria; above it is the photo of Francis playing with his daughters on dog sledging. n\\n In addition to the work desk, we also come across another part of the library here. Another small interesting thing. The name Karel Jarom\xedr Erben is certainly not unknown to you. The author of Kytice is connected with the Fr\xfddlant castle. He worked here at the castle as an archivist and was in charge of the book collection. By the way, he was also the first creator of the libretto, actually the guide text for the then open exposition of the Upper Castle."},{"audio":"/kcd.mp3","number":12,"img":"/chateau/loznice.jpg","title":"Francis\' bedroom","card_label":"The last room of the men\'s suite - the bedroom - belonged to Francis, whom we saw not only in the photographs, but also in the portrait in the blue salon","button":"Visit","text":"The last room of the men\'s suite - the bedroom - belonged to Francis, whom we saw not only in the photographs, but also in the portrait in the blue salon. We have already talked about the fact that he was the father of seven daughters - here we also find a photo hanging on the door to the chamberlain\'s room. We have already talked about one of them, Clotilde, who took over the family estate from her father in difficult times. I will mention others in the ladies\' floor, where we will go in a moment.\\n\\nFrancis experienced a turning point in the castle, namely the disintegration of Austria-Hungary and the establishment of the republic. Although a monarchist, after the establishment of the Republic he accepted Czechoslovak citizenship and became a proud Czechoslovak. Land reforms and the fact that the state expropriated about 70% of their property eventually changed his decision and he returned to German citizenship. This is precisely why Bene\u0161\'s decrees applied to the property, so that since 1945 Fr\xfddlant has been a chateau under state administration. He died of illness in 1930, and since then his sixth daughter, whom we will talk about later, took care of the Frydlant estate."},{"audio":"/kcd.mp3","number":13,"img":"/chateau/chodba.jpg","title":"The royal hallway","card_label":"Now we are on the second floor of the chateau, where all the ladies have lived.","button":"Visit","text":"Now we are on the second floor of the chateau, where all the ladies have lived. The hallway we are standing in is known by the name The royal hallway because around the walls are pictures of members of the royal families all-across Europe from the 16th century."},{"audio":"/kcd.mp3","number":14,"img":"/chateau/kvetinovy_salon.jpg","title":"Music lounge","card_label":"We have now entered probably the most beautiful room in the chateau.","button":"Visit","text":"We have now entered probably the most beautiful room in the chateau. The salon is called a music lounge because the ladies used to spend their time with music here. This room is also known as the flower salon because of the flower-patterned wallpaper. Around the room, you can notice a big fruit bowl from China, a vast Rococo stove or a chandelier made in town Nov\xfd Bor. Between the windows is Clotilde Clam-Gallas, born Dietrichstein, grandma of our last owner, also named Clotilde."},{"audio":"/kcd.mp3","number":15,"img":"/chateau/loznice_damske1.jpg","title":"Bedroom","card_label":"Today, the women\'s floor consists of two apartments.","button":"Visit","text":"Today, the women\'s floor consists of two apartments. The first belonged to the mother of seven daughters, Maria Hoyos Sprinzenstein. Here, too, the interiors have been returned to the form around 1930, when the three-room apartment looked like we see it today. The original equipment is back in place. The bed next to the stove is in the place where the other rooms have the entrance to the King\'s Hall. Next to it we can see the old rod that controlled the bell. The old signaling device is brought out not only into the corridor, but also into the tent salon, where we will have the opportunity to view it.\\n\\nNext to the door we will find a prayer kneeler designed for private evening prayer."},{"audio":"/kcd.mp3","number":16,"img":"/chateau/prevlekarna_salon.jpg","title":"Changing room","card_label":"The second room we just walk through is the changing room.","button":"Visit","text":"The second room we just walk through is the changing room. It is led by a large screen, which was used for privacy when changing clothes. Among the paintings here, I can also mention the effigies above the door. On one of them, Christian Christoph Clam-Gallas, Francis\' great-grandfather, the first of the owners of Fr\xfddlant, who started living here in the castle and not in the upper castle. He supported art, painted, and it was he who opened the castle museum to the public here in Fr\xfddlant in 1801."},{"audio":"/kcd.mp3","number":17,"img":"/chateau/stanovy_salon.jpg","title":"Tent salon","card_label":"","button":"Visit","text":"The last room of the first suite is the tent salon. It has the form of a field tent, which was a fashionable thing in the 19th century, and again it is a design from the time of Francis\'s parents, who were inspired by the interiors of English estates.\\n\\nThe tent salon was also used as a small dining room, which is also evident from its furnishings. We can also see a change in the interior equipment. While the 19th century tried to unify styles, in the twentieth century it was mainly about functionality. That is why, for example, a sideboard is completely different from other pieces of furniture."},{"audio":"/kcd.mp3","number":18,"img":"/chateau/loznice_klotildy.jpg","title":"Clotilde\'s bedroom","card_label":"This room was previously used as a maid\'s room.","button":"Visit","text":"This room was previously used as a maid\'s room. After the death of Francis Clam-Gallas, the castle was inherited by his daughter Clotilde, who also took care of her mother. Therefore, this room was converted into her bedroom."},{"audio":"/kcd.mp3","number":19,"img":"/chateau/salon_damske.jpg","title":"Salon","card_label":"The wood paneled room is furnished as a lounge.","button":"Visit","text":"The wood paneled room is furnished as a lounge. The ceiling is lined with ceramics mainly from Holland and China, where you can find various plates, jugs and tankards. Oriental elements, very popular at the time, can still be seen in the showcase.\\n\\nThe room served as a living room, which served not only Clotilde, but was also adapted for sitting with visitors and at the same time as a small study.\\n\\nOn the piano behind the door we can find family photographs. The most interesting is probably the joint photo portrait of Francis\' daughters, we also find grandmother Clotilde and other family members. The daughters married, except for Clotilde, who took care of her parents. Thanks to them, the Clam-Gallas family became connected with, for example, the Kinsk\xfd family, the Schwarzenberg family, the Auerspergy family, or perhaps the Moravian family Podstatsk\xfd Lichtenstein. \\n\\nEduardina is the only daughter who did not marry an aristocrat and connected her life with Dr. Winkelnbauer, whom she met while working as a nurse during the war. Francis divided all the family property between his daughters. We already mentioned that Clotilde inherited Fr\xfddlant. She was deported herself in 1945. She lived the second half of her life abroad, where she also died in 1970. She was the last owner of this estate and is not buried in Hejnice, where the Clam-Gallas tomb is located. The last member of the family buried here is Francis\'s wife Marie Hoyos Sprinzenstein."},{"audio":"/kcd.mp3","number":20,"img":"/chateau/prevlekarna.jpg","title":"The dressing room","card_label":"We have just reached the end of the enfilade.","button":"Visit","text":"We have just reached the end of the enfilade. This room served as a dressing room, from which you could enter not only the bathroom, but also the terrace."},{"audio":"/kcd.mp3","number":21,"img":"/chateau/koupelna.jpg","title":"The bathroom","card_label":"The approximately hundred-year-old bathroom is one of the most interesting rooms.","button":"Visit","text":"The approximately hundred-year-old bathroom is one of the most interesting rooms. It is dominated by the bathtub, where you will find not only a shower, but also a bubble and steam bath. If you dipped the wooden board that you can see above its front into the tub, the pump drove air into the tub through a rubber tube, so you could treat yourself to a bubble bath. If the plate stayed where it is - it served as a steam bath.\\n\\nTo the left of the bath is a hot water tank. It came from the castle kitchen on the ground floor, where it was heated and then pumped into the storage tank. Because the kitchen was in operation all day, there was plenty of hot water for everyone. \\n\\nThe built-in corner then hid the toilet, so you had all the comfort of that time in the bathroom."},{"audio":"/kcd.mp3","number":22,"img":"/chateau/umyvarna.jpg","title":"Servant\'s room","card_label":"This room served as a facility for the servants, where, for example, washing sets were stored.","button":"Visit","text":"This room served as a facility for the servants, where, for example, washing sets were stored. At the same time, it served as a washroom for servants with its own toilet. From this room we move to the royal corridor."},{"audio":"/kcd.mp3","number":23,"img":"/chateau/chodba.jpg","title":"The royal hallway","card_label":"A narrow staircase, below which there is an exit to the outdoor terrace, would lead us to the attic, where our tour will continue, but we will go there by the main spiral staircase.","button":"Visit","text":"A narrow staircase, below which there is an exit to the outdoor terrace, would lead us to the attic, where our tour will continue, but we will go there by the main spiral staircase.\\n\\nYou can notice the stained glass windows on these. One represents the Fr\xfddlant castle, and on the other we again come across the coat of arms of the Clam-Gallas, which we have already talked about today.\\nPictures of European monarchs did not originally hang here. They didn\'t get here until sometime after 1930. According to records, the entire collection originally decorated a summer villa somewhere in today\'s Croatia. After its reconstruction, however, they moved here and thus replaced the weapons that were hanging in the corridor in front of them.\\n\\nWe will go through the corridor again past the rooms of the enfilade and then I will ask you to continue up and to the left."},{"audio":"/kcd.mp3","number":24,"img":"/chateau/podkrovi.jpg","title":"The attic","card_label":"Not every castle has the opportunity to show its visitors all the floors.","button":"Visit","text":"Not every castle has the opportunity to show its visitors all the floors. Fr\xfddlant is an exception in this, and its well-preserved spaces under the roof allow you to see several rooms for children and servants."},{"audio":"/kcd.mp3","number":25,"img":"/chateau/detsky_pokoj.jpg","title":"Children\'s room","card_label":"At the head of the attic is one of the children\'s rooms.","button":"Visit","text":"At the head of the attic is one of the children\'s rooms. You will definitely be interested in his wallpaper, which is actually a collection of jokes from the French magazine Charivari. In the room, we come across a few toys, such as a children\'s cart with a horse, into which one of the children could slip and pull someone else in disguise, or a board game. The room originally belonged to two daughters, but later it became a boy\'s room - the sons of one of the daughters, Eleonora, lived here when they visited their grandparents on vacation. Perhaps that is why the room has this wall decoration."},{"audio":"/kcd.mp3","number":26,"img":"/chateau/loznice_dcer_podkrovi.jpg","title":"Daughter\'s bedroom","card_label":"The adjacent room then served as a common bedroom for the other two daughters.","button":"Visit","text":"The adjacent room then served as a common bedroom for the other two daughters. Here too, as in the next room, we come across the original equipment. Very nice beds with carved headboards, they are divided by a washing table, and just like next door, here too we find several original toys of the daughters of the last owners. The most famous toy was the so-called Donut, which lies on the pillow of the back bed. The other well-preserved lumps left by the daughters are today stored in the newest wing, where the Children\'s Sightseeing Circuit leads."},{"audio":"/kcd.mp3","number":27,"img":"/chateau/lokajna.jpg","title":"Footman\'s room","card_label":"Right next to another children\'s room, you can take a look into one of the servants\' apartments.","button":"Visit","text":"Right next to another children\'s room, you can take a look into one of the servants\' apartments. This one is furnished as a so-called footman. In the room of the footman, who looked after the family members and served at the table, we find an extensive collection of well-preserved servant uniforms for various occasions. A simple winter coat hangs on the door, and in the closet you can see the uniforms that are used in the performance of duties. They have sewn-on straps with the C-G crest. One set is then hung on the cabinet door. In addition to uniforms, you will also find travel luggage here, again with the owner\'s emblem, and caps for various occasions - on the chest of drawers, for example, headgear for drivers."},{"audio":"/kcd.mp3","number":28,"img":"/chateau/pokoj_sluzebnych_podkrovi.jpg","title":"Maid\'s room","card_label":"This room was used by two servants - maids, who were in charge not only of the cleanliness of the rooms and cleaning, but also of minor repairs of clothes, ironing and also looking after the girls.","button":"Visit","text":"This room was used by two servants - maids, who were in charge not only of the cleanliness of the rooms and cleaning, but also of minor repairs of clothes, ironing and also looking after the girls. That is why in their room we come across, for example, an old sewing machine or an ironing board of the brand V\u010dela. The stove in the room was also used to heat food or an iron. Then there is a primus on the table and another of the washing tables under the next window."},{"audio":"/kcd.mp3","number":29,"img":"/chateau/pokoj_dcer_2.jpg","title":"Daughter\'s bedroom","card_label":"This room also served as a bedroom, but this time for the other daughters.","button":"Visit","text":"This room also served as a bedroom, but this time for the other daughters."},{"audio":"/kcd.mp3","number":30,"img":"/chateau/ucebna.jpg","title":"Classroom","card_label":"The most spacious room in the attic served as a common classroom.","button":"Visit","text":"The most spacious room in the attic served as a common classroom. The little girls were taught by a governess, while the older ones were tutored by home teachers from the local school. The girls were educated in both German and Czech. The classroom is furnished as a versatile space with several showcases. For example, there is part of the mineral collection, stuffed animals, a geographical map, but also musical instruments and pictures of famous ancestors and family members. Here, for example, we can find the girls\' great-grandmother, Josefina Clara Aldrigen, thanks to whom the family was associated with musical talent, or above the sofa of the first Gallas - Maty\xe1\u0161, great-grandfather Kristian and grandfather Eduard with his brother Vil\xe9m. We talked about all of them today on the tour. There is also a portrait of the emperor between the windows, as a reminder of the monarchy and the times before the establishment of the republic."},{"audio":"/kcd.mp3","number":31,"img":"/chateau/pokoj_vychovatelky.jpg","title":"The teacher\'s room","card_label":"This room served as the teacher\'s room.","button":"Visit","text":"This room served as the teacher\'s room. It is also the last room to be seen on this floor of the castle. Behind this door is the area of the sub-chapel, through which we will go to the staircase, which will lead us to the last area of our tour today - the castle chapel."},{"audio":"/kcd.mp3","number":32,"img":"/chateau/kaple.jpg","title":"Saint Anne\'s Chapel","card_label":"This chapel was built on the place of the old watchtower, has a floor plan of the cross and has two main altars.","button":"Visit","text":"This chapel was built on the place of the old watchtower, has a floor plan of the cross and has two main altars. That\'s because the chapel was built between 1598 and 1602 by the Redern family, who were Protestants, so they made a protestant altar here in front of us. However, the subsequent owners were Catholics, so they built their catholic altar on the side. But fortunately, they decided it was a shame to destroy the Protestant one, so they just covered it with a cloth and prayed to their Catholic one. And that\'s how both altars survived.\\n\\nNobles usually sat in oratory, bellow them (behind bars) sat clerks, and the last section of the benches was meant for the servants.\\n\\nThe architect of the chapel was Marcus Spazio di Lancio from Italy. The sgraffito on the walls (including a sgraffito strip presenting the life of Jesus Christ) and the ceiling (which is supposed to look like the sky at night) are from the 19th century when the Clam-Gallas family reconstructed the chapel. The chapel organ was purchased at the World Exhibition in Wien in 1874.\\n\\nThis is where our tour ends. Thank you for your visit and we wish you a nice rest of the day."}]},{"tour_id":"chateau","language":"de","title":"Das Schlo\xdf","img":"/chateau/chateau.jpg","rooms_label":"R\xe4ume","time":"60 Minuten","description":"Die F\xfchrung f\xfchrt den Besucher durch das reich ausgestattete Schloss und die Geschichte der letzten Besitzer von Clam Gallas. Ein komplett ausgestatteter Rundgang zeigt das Schloss und seine mehr als 20 R\xe4ume auf allen Etagen.","button":"F\xfchrung beginnen","rooms":[{"audio":"/kcd.mp3","number":1,"img":"/chateau/dolni_nadvori.jpg","title":"Der untere Schlosshof","card_label":"Wir stehen gerade im unteren Schlosshof, wo wir den ganzen Komplex sehen k\xf6nnen.","button":"Besuchen","text":"Sehr geehrte Besucher, herzlich willkommen auf der staatlichen Burg und dem Schloss Fr\xfddlant. Vor Beginn der Besichtigung bitten wir Sie, Ihre Mobiltelefone stumm zu schalten, damit die Besichtigung nicht gest\xf6rt wird. Wenn Sie einen Audioguide verwenden, tragen Sie beim Zuh\xf6ren Kopfh\xf6rer. Au\xdferdem bitten wir Sie, die ausgestellten Exponate nicht zu ber\xfchren und bei Ihrer Gruppe zu bleiben. Wir danken f\xfcr Ihr Verst\xe4ndnis und w\xfcnschen Ihnen einen angenehmen Besuch.\\n\\nWir stehen derzeit im unteren Schlosshof, woher wir den ganzen Komplex \xfcbersehen k\xf6nnen.\\n\\nDer \xe4lteste Teil der Burg ist der runde Turm namens Indica. Der Legende nach wurde auf der Spitze von Indica ein Feuer angez\xfcndet, also diente der Turm als Leuchtfeuer f\xfcr den Handelsweg zwischen dem K\xf6nigreich Tschechien und die K\xf6nigreiche im Norden. Der Turm ist 49 Meter hoch und seine Mauern sind im ersten Stock 4 Meter dick.\\n\\nIm 13. Jahrhundert wurde die alte gotische Burg um den Turm herum gebaut, dann im 16. Jahrhundert wurde im Renaissancestil umgebaut, was die aktuelle Form des Schlosses ist.\\n\\nDas Gelb Geb\xe4ude hinter dem Baum ist die Kapelle. Es wurde zwischen 1598 - 1602 von Catherine von Redern erbaut. Neben der Kapelle befindet sich der Renaissancefl\xfcgel des Schlosses aus dem 16. Jahrhundert. An seiner Fassade k\xf6nnen wir die Original-Renaissance-Bilder sehen, die Sgraffito genannt werden. Und der j\xfcngste Teil des Komplexes ist der letzte Fl\xfcgel des Schlosses, genannt Kastellanfl\xfcgel. Es wurde im 19. Jahrhundert von Eduard Clam-Gallas erbaut.\\n\\nBei diesem Rundgang durch das Schloss besichtigen wir alle Stockwerke des Renaissancefl\xfcgels. Und am Ende werden wir die Kapelle sehen. \\n\\nLassen Sie uns jetzt unsere F\xfchrung in der K\xfcche des Schlosses beginnen."},{"audio":"/kcd.mp3","number":2,"img":"/chateau/kuchyne.jpg","title":"Die Schlossk\xfcche","card_label":"Wir betraten das Schlossgeb\xe4ude aus dem 16. Jahrhundert.","button":"Besuchen","text":"Wir betraten das Schlossgeb\xe4ude aus dem 16. Jahrhundert. Urspr\xfcnglich war dieses Geb\xe4ude nicht f\xfcr die Adligen bestimmt. In den oberen Stockwerken befanden sich B\xfcros und im Erdgeschoss St\xe4lle f\xfcr Pferde. Im 19. Jahrhundert zogen die Adligen aus der Burg zum Schloss um. Das Schloss wurde rekonstruiert und mit neuen Dingen ausgestattet, was bedeutet, dass die Innenr\xe4ume, die wir heute haben, aus dem 19. Jahrhundert stammen. Das Schloss wurde 1801 als erstes Schlossmuseum in Mitteleuropa der \xd6ffentlichkeit zug\xe4nglich gemacht.\\n\\n Da wir uns im Erdgeschoss befinden, war dieser Raum fr\xfcher ein Stall. Beweis f\xfcr diese Aussage ist der Steintrog neben den T\xfcren.W\xe4hrend des Umbaus wollten K\xf6che ihn hier behalten, um Geschirr zu sp\xfclen oder lebende Fische darin zu halten .\\n\\n Die K\xfcche ist f\xfcr die damalige Zeit relativ modern. Ausgestellt ist die umfangreichste Sammlung von Kupfergeschirr in der Tschechischen Republik. Das Geschirr ist innen verzinnt.\\n\\n Der gr\xf6\xdfere Herd hat f\xfcnf Back\xf6fen, it ist immer noch funktionsf\xe4hig, und zu einigen besonderen Anl\xe4ssen haben wir sogar Backen Sie ein paar Leckereien darauf. Auf ihnen ist eine gro\xdfe schwarze Box platziert, das ist ein Wasserheizsystem f\xfcr das Badezimmer des Schlosses.\\n\\n Der kleinere Ofen ist ein Grill und eine R\xe4ucherkammer; leider nicht mehr funktionsf\xe4hig."},{"audio":"/kcd.mp3","number":3,"img":"/chateau/spizirna.jpg","title":"Die Speisekammer","card_label":"Diese Speisekammer wurde in den Felsen gehauen, auf dem die Burg und das Schloss Fr\xfddlant errichtet wurden.","button":"Besuchen","text":"Diese Speisekammer wurde in den Felsen gehauen, auf dem die Burg und das Schloss Fr\xfddlant gebaut wurden. Deshalb ist die Temperatur hier das ganze Jahr \xfcber ziemlich kalt, was f\xfcr die Aufbewahrung von Lebensmitteln optimal ist. Interessant sind die Kompotte im Schrank, einige davon sind von 1945. Alles andere in dieser Speisekammer stammt nicht urspr\xfcnglich aus Fr\xfddlant, sondern wurde aus den umliegenden D\xf6rfern hierher gebracht."},{"audio":"/kcd.mp3","number":4,"img":"/chateau/pripravna.jpg","title":"VorbereirungsRaum","card_label":"Der Raum hinter dem Fenster wurde als Vorbereitungsraum f\xfcr Essen genutzt.","button":"Besuchen","text":"Der Raum hinter dem Fenster wurde als Vorbereitungsraum f\xfcr Essen genutzt.\\n\\nDas Essen, das unten in der K\xfcche gekocht wurde, wurde hierher gebracht, auf das Geschirr gestellt, dekoriert, und dann nahmen Diener es von diesem Fenster und trugen es durch die T\xfcr zum Speisesaal zu bedienen."},{"audio":"/kcd.mp3","number":5,"img":"/chateau/erbovni_sal.jpg","title":"Der Wappensaal","card_label":"Wir haben jetzt die Wappenhalle betreten, und hier k\xf6nnen wir die Geschichte von Fr\xfddlant kurz zusammenfassen.","button":"Besuchen","text":"Wir haben jetzt die Wappenhalle betreten, und hier k\xf6nnen wir die Geschichte von Fr\xfddlant kurz zusammenfassen.\\n\\nFr\xfddland wurde in der H\xe4lfte des 13. Jahrhunderts von der Familie Ronovci gegr\xfcndet; genauer gesagt, einer Ahnenlinie namens Berka z Dub\xe9. \\n\\nIm Jahr 1278 beschlagnahmte der b\xf6hmische K\xf6nig die Burg und verkaufte sie an das Haus Bieberstein. Sie blieben fast 300 Jahre in Fr\xfddlant. Die Familie Bieberstein, die auf Fr\xfddland lebte, starb jedoch 1551 aus. \\n\\nDann 1558 kamen Rederns auf diese Burg, sie waren jedoch Protestanten, so dass sie nach einer Schlacht in der Schlacht am Wei\xdfen Berg zur Auswanderung gezwungen wurden, der Habsburger Kaiser beschlagnahmte ihren gesamten Besitz und verkaufte ihn 1622 an Albrecht von Wallenstein.\\n\\nAlbrecht besa\xdf Fr\xfddlant zw\xf6lf Jahre lang, besuchte es viermal, baute hier aber nie etwas. Wegen angeblichen Verrats des Kaisers wurde Albrecht am 25. Februar 1634 ermordet.\\n\\nKaiser \xfcbergab Fr\xfddlant dann an Albrechts Verr\xe4ter Matthias Gallas. Gallas Familie, wie ver, starb 1757 aus. Laut Testament des letzten Gallas sollte Fr\xfddlant an seinen Neffen Christian Philipp von Clam unter der Bedingung vererbt werden, dass der Name und das Wappen der Familie Clam mit dem Namen und dem Wappen verbunden w\xfcrden Wappen der Familie Gallas.\\n\\nUnd so erwarb die Familie Clam-Gallas 1759 Fr\xfddlant. Sie besa\xdfen Fr\xfddlant bis 1945, als es vom tschechoslowakischen Staat aufgrund der Bene\u0161-Dekrete, einer Reihe von Gesetzen, dank derer die deutsche Bev\xf6lkerung nach dem 2. Weltkrieg aus dem Staat vertrieben wurde, verstaatlicht wurde.\\n\\nAuf dieser F\xfchrung werden wir haupts\xe4chlich \xfcber Familie Clam-Gallas sprechen, insbesonders \xfcber den letzten m\xe4nnlichen Besitzer Franz Clam-Gallas, seine Tochter, die letzte Besitzerin Clotilde Clam-Gallas, und seinen Vater Eduard Clam-Gallas. \\n\\nDiese gro\xdfe Halle diente als Spielzimmer, also haben wir hier das Roulette und den Billardtisch. Auf dem Kamin steht ein Krug aus einem Sto\xdfzahn. Das Nebenzimmer ist das gro\xdfe Esszimmer."},{"audio":"/kcd.mp3","number":6,"img":"/chateau/jidelna.jpg","title":"Der Speisesaal","card_label":"Dieser gro\xdfe Speisesaal wurde haupts\xe4chlich als festlicher Speisesaal genutzt.","button":"Besuchen","text":"Dieser gro\xdfe Speisesaal wurde haupts\xe4chlich als festlicher Speisesaal genutzt. Die Familie Clam-Gallas nutzte ihn zu einigen besonderen Anl\xe4ssen wie Geburtstagen oder Weihnachten. Neben dem Speisesaal befindet sich eine Terrasse, die sie bei sch\xf6nem Wetter anstelle des Speisesaals benutzt werden k\xf6nnte. Der Speisesaal ist mit Holz get\xe4felt, und die Fayencen von Delft sind auf der T\xe4felung ausgestellt. Auf den Tischen ausgestelltes Keramikgeschirr stammt aus England. Dies ist auch der einzige Raum im Komplex mit einer Kassettendecke."},{"audio":"/kcd.mp3","number":7,"img":"/chateau/modry_salon.jpg","title":"Der blaue Salon","card_label":"Wie befinden uns jetzt in dem grossen blauen Salon. ","button":"Besuchen","text":"Wie befinden uns jetzt in dem grossen blauen Salon. Dieser raum ist bis zur H\xe4lfte mit Holz het\xe4flt. Auch hier, in den Luneten, sind Tapeten aus Leder, handgemalt und vergoldet. Das Gew\xf6lbe ist mit dem Stuck verziert und vergoldet. Auf dem Boden liegt ein grosser Teppich mit dem reichen persischen Muster, handgebunden im Teppichbetrieb in Vratislavice bei Liberec im 20.Jhd. Die vier kleinen Spiegel sind echte venezianischen Spiegeln.\\n\\nDie Bilder an den W\xe4nden \u2013 \xd6l auf dem Holz \u2013 sind Werke der unbekannten Hol\xe4nder aus dem 17.Jhd. Rechts von der T\xfcr steht ein kleiner Spieltisch. Beachtenswert sind auch die Wandteller und die Schalen, die mit dem blauen Muster geschm\xfcckt sind, und die grosse chinesische Vase."},{"audio":"/kcd.mp3","number":8,"img":"/chateau/knihovna.jpg","title":"Der kleine Bibliothek","card_label":"Wir stehen jetzt in der kleinen Bibliothek.","button":"Besuchen","text":"Wir stehen jetzt in der kleinen Bibliothek. Das Schloss hat noch eine gr\xf6ssere Bilbiothek, die ist leider aber nicht zug\xe4nglich. Interessant ist der Spiegel mit venezianischem Muster, aber aus dem b\xf6hmischen Glas."},{"audio":"/kcd.mp3","number":9,"img":"/chateau/panska_chodba.jpg","title":"Der Gang in der Herrenetage","card_label":"Dieser Gang verbindet alle Zimmer der Herrenetage.","button":"Besuchen","text":"Dieser Gang verbindet alle Zimmer der Herrenetage. Hier wohnte der Besitzer der Herrschaft. Am Ende des 19.Jhds liess sich hier Eduard Clam-Gallas ein bequeme Wohnung im Neorenaissancestil einrichten."},{"audio":"/kcd.mp3","number":10,"img":"/chateau/prijimaci_salon.jpg","title":"Der Empfangssalon","card_label":"Der Empfangsalon geh\xf6rt zu den sch\xf6nsten R\xe4umen der ersten Etage. ","button":"Besuchen","text":"Der Empfangsalon geh\xf6rt zu den sch\xf6nsten R\xe4umen der ersten Etage. Er ist bist zu der Decke mit Holz get\xe4flt. Auf der Decke ist der reiche Renaissancestuck mit dem Gold verziert. An den W\xe4nden h\xe4ngen Kopien der Bilder, die Sie schon oben in der Burg gesehen haben. Von links ist Albrecht von Wallenstein, dann Mathyas Gallas de Campo und ganz rechts Christian Philip Clam-Gallas. Gegen\xfcber ist noch ein Bild, das Sie noch nicht gesehen haben \u2013 Melchior von Redern mit seinem Sohn Christoph."},{"audio":"/kcd.mp3","number":11,"img":"/chateau/pracovna.jpg","title":"Arbeitszimmer","card_label":"Der n\xe4chste Raum  ist das Arbeitszimmer von Franz Clam-Gallas.","button":"Besuchen","text":"Der n\xe4chste Raum  ist das Arbeitszimmer von Franz Clam-Gallas. Die W\xe4nde sind mit Holz verkleidet. In der T\xe4felung ist auch eine kleine Bibliothek eingepasst. Im Arbeitszimmer und auch im n\xe4chsten Salon sind sch\xf6ne \xd6fen, die in der oberen H\xe4lfte mit den Kacheln aus Delf geschm\xfcckt sind."},{"audio":"/kcd.mp3","number":12,"img":"/chateau/loznice.jpg","title":"Das Herrenschlafzimmer","card_label":"Wir sind jetzt im Schlafzimmer des Grafen Franz Clam-Gallas, des letzten m\xe4nlichen Nachkommen der Adelsfamilie Clam-Gallas.","button":"Besuchen","text":"Wir sind jetzt im Schlafzimmer des Grafen Franz Clam-Gallas, des letzten m\xe4nlichen Nachkommen der Adelsfamilie Clam-Gallas. Hier beginnen wir die Besichtigung der Herrenzimmern. Interessant ist die fl\xe4mische Tapiserie aus dem 17.Jhd mit dem Motiv aus der antiken Mythologie \u2013 Heracles und Hera genannt. Auf dem Boden liegt der persische Teppich. Auf dem Bild ist der Graf Franz Clam-Gallas, der hier 1930 gestorben ist.\\n\\nJetzt gehen wir die Treppe nach oben zur Damenetage"},{"audio":"/kcd.mp3","number":13,"img":"/chateau/chodba.jpg","title":"K\xf6nigsgang in der Damenetage","card_label":"Die zweite Etage des Schlosses haben nur Damen bewohnt","button":"Besuchen","text":"Die zweite Etage des Schlosses haben nur Damen bewohnt. Dieser Korridor hat den Namen \u201eK\xf6nigskorridor\u201c, weil hier die Portr\xe4ts der Mitglieder der Europ\xe4ischen K\xf6nigsfamilien vom 16.Jhd ausgestellt sind."},{"audio":"/kcd.mp3","number":14,"img":"/chateau/kvetinovy_salon.jpg","title":"Der Blumensalon","card_label":"Wir haben jetzt den wohl sch\xf6nsten Raum des Schlosses betreten.","button":"Besuchen","text":"Wir haben jetzt den wohl sch\xf6nsten Raum des Schlosses betreten. Der Salon wird Musiksalon genannt, weil die Damen dort fr\xfcher ihre Zeit mit Musik verbrachten. Dieser Raum wird wegen der blumengemusterten Tapete auch als Blumensalon bezeichnet. Rund um den Raum k\xf6nnen Sie eine gro\xdfe Obstschale aus China, einen riesigen Rokoko-Ofen oder einen in der Stadt Nov\xfd Bor hergestellten Kronleuchter bemerken. Zwischen den Fenstern is das Bild von Clotilde Clam-Gallas, geb. Dietrichstein, Oma unserer letzten Besitzerin, auch Clotilde genannt."},{"audio":"/kcd.mp3","number":15,"img":"/chateau/loznice_damske1.jpg","title":"Schlafzimmer","card_label":"Heute besteht die Frauenetage aus zwei Wohnungen.","button":"Besuchen","text":"Heute besteht die Frauenetage aus zwei Wohnungen. Die erste geh\xf6rte der Mutter von sieben T\xf6chtern, Maria Hoyos Sprinzenstein. Auch hier ist die Innenausstattung wieder in den Zustand um 1930 zur\xfcckversetzt worden, als die Dreizimmerwohnung so aussah, wie wir sie heute sehen. Die urspr\xfcngliche Ausr\xfcstung ist wieder vorhanden. Das Bett neben dem Ofen befindet sich an der Stelle, wo die anderen Zimmer den Eingang zum K\xf6nigssaal haben. Daneben sehen wir die alte Stange, die die Glocke steuerte. Das alte Signalger\xe4t wird nicht nur in den Korridor, sondern auch in den Zeltsalon gebracht, wo wir die Gelegenheit haben werden, es zu besichtigen.\\n\\nNeben der T\xfcr finden wir eine Gebetskniebank, die f\xfcr das private Abendgebet bestimmt ist."},{"audio":"/kcd.mp3","number":16,"img":"/chateau/prevlekarna_salon.jpg","title":"Umkleidekabine","card_label":"Der zweite Raum, durch den wir gerade gehen, ist die Umkleidekabine.","button":"Besuchen","text":"Der zweite Raum, durch den wir gerade gehen, ist die Umkleidekabine. Es wird von einem gro\xdfen Bildschirm geleitet, der als Sichtschutz beim Umziehen diente. Unter den Gem\xe4lden hier kann ich auch die Bildnisse \xfcber der T\xfcr erw\xe4hnen. Auf einem von ihnen Christian Christoph Clam-Gallas, Urgro\xdfvater von Francis, der erste der Besitzer von Fr\xfddlant, der hier in der Burg und nicht in der Oberburg zu leben begann. Er f\xf6rderte die Kunst, malte, und er war es, der 1801 hier in Fr\xfddlant das Schlossmuseum der \xd6ffentlichkeit zug\xe4nglich machte."},{"audio":"/kcd.mp3","number":17,"img":"/chateau/stanovy_salon.jpg","title":"Zeltsalon","card_label":"Der letzte Raum der ersten Suite ist der Zeltsalon.","button":"Besuchen","text":"Der letzte Raum der ersten Suite ist der Zeltsalon. Es hat die Form eines Feldzeltes, was im 19. Jahrhundert in Mode war, und wiederum ist es ein Entwurf aus der Zeit der Eltern Franz, die sich von der Einrichtung englischer Landg\xfcter inspirieren lie\xdfen.\\n\\nDer Zeltsalon war es auch als kleines Esszimmer genutzt, was sich auch an der Einrichtung ablesen l\xe4sst. Auch bei der Innenausstattung k\xf6nnen wir eine \xc4nderung erkennen. W\xe4hrend im 19. Jahrhundert versucht wurde, Stile zu vereinheitlichen, ging es im 20. Jahrhundert vor allem um Funktionalit\xe4t. Deshalb unterscheidet sich zum Beispiel ein Sideboard komplett von anderen M\xf6belst\xfccken."},{"audio":"/kcd.mp3","number":18,"img":"/chateau/loznice_klotildy.jpg","title":"Clotildes Schlafzimmer","card_label":"Dieses Zimmer wurde fr\xfcher als Dienstm\xe4dchenzimmer genutzt.","button":"Besuchen","text":"Dieses Zimmer wurde fr\xfcher als Dienstm\xe4dchenzimmer genutzt. Nach dem Tod von Franz Clam-Gallas wurde das Schloss von seiner Tochter Clotilde geerbt, die sich auch um ihre Mutter k\xfcmmerte. Daher wurde dieses Zimmer in ihr Schlafzimmer umgewandelt."},{"audio":"/kcd.mp3","number":19,"img":"/chateau/salon_damske.jpg","title":"Salon","card_label":"Der holzget\xe4felte Raum ist als Aufenthaltsraum eingerichtet.","button":"Besuchen","text":"Der holzget\xe4felte Raum ist als Aufenthaltsraum eingerichtet. Die Decke ist mit Keramik haupts\xe4chlich aus Holland und China verkleidet, wo Sie verschiedene Teller, Kr\xfcge und Humpen finden. In der Vitrine sind noch heute sehr beliebte orientalische Elemente zu sehen.\\n\\nDer Raum diente als Wohnzimmer, das nicht nur Clotilde diente, sondern auch zum Sitzen mit Besuchern und gleichzeitig zum Studieren hergerichtet war. \\n\\nAuf dem Klavier hinter der T\xfcr finden wir Familienfotos. Am interessantesten ist wohl das gemeinsame Fotoportr\xe4t der Franz-T\xf6chter, wir finden auch Gro\xdfmutter Clotilde und andere Familienmitglieder. Die T\xf6chter heirateten, bis auf Clotilde, die sich um ihre Eltern k\xfcmmerte. Dank ihnen wurde die Familie Clam-Gallas zum Beispiel mit der Familie Kinsk\xfd, der Familie Schwarzenberg, der Familie Auerspergy oder vielleicht der m\xe4hrischen Familie Podstatsk\xfd Lichtenstein verbunden. \\n\\nEduardina ist die einzige Tochter, die keinen Aristokraten geheiratet und ihr Leben mit Dr. Winkelnbauer verbunden hat, den sie w\xe4hrend ihrer Arbeit als Krankenschwester w\xe4hrend des Krieges kennengelernt hat. Francis teilte den gesamten Familienbesitz unter seinen T\xf6chtern auf. Clotilde erbte Fr\xfddlant. Sie wurde 1945 deportiert. Die zweite H\xe4lfte ihres Lebens verbrachte sie im Ausland, wo sie auch 1970 starb. Sie war die letzte Besitzerin dieses Anwesens und ist nicht in Hejnice begraben, wo sich das Clam-Gallas-Grab befindet. Das letzte hier begrabene Familienmitglied ist Franz Ehefrau Marie Hoyos Sprinzenstein."},{"audio":"/kcd.mp3","number":20,"img":"/chateau/prevlekarna.jpg","title":"Ankleidezimmer","card_label":"Wir haben gerade das Ende der Enfilade erreicht.","button":"Besuchen","text":"Wir haben gerade das Ende der Enfilade erreicht. Dieser Raum diente als Ankleidezimmer, von dem aus man nicht nur das Badezimmer, sondern auch die Terrasse betreten konnte."},{"audio":"/kcd.mp3","number":21,"img":"/chateau/koupelna.jpg","title":"Das Badezimmer","card_label":"Das etwa hundert Jahre alte Badezimmer ist einer der interessantesten R\xe4ume.","button":"Besuchen","text":"Das etwa hundert Jahre alte Badezimmer ist einer der interessantesten R\xe4ume. Es wird von der Badewanne dominiert, in der Sie neben einer Dusche auch ein Sprudel- und Dampfbad finden. Tauchte man das oben sichtbare Holzbrett in die Wanne, dr\xfcckte die Pumpe Luft durch einen Gummischlauch in die Wanne, sodass man sich ein Schaumbad g\xf6nnen konnte. Wenn der Teller dort blieb, wo er ist, diente er als Dampfbad.\\n\\nLinks vom Bad befindet sich ein Hei\xdfwassertank. Es kam aus der Schlossk\xfcche im Erdgeschoss, wo es erhitzt und dann in den Vorratsbeh\xe4lter gepumpt wurde. Da die K\xfcche den ganzen Tag in Betrieb war, gab es gen\xfcgend hei\xdfes Wasser f\xfcr alle. \\n\\nDie eingebaute Ecke verbarg dann die Toilette, sodass man im Badezimmer den ganzen Komfort von damals hatte."},{"audio":"/kcd.mp3","number":22,"img":"/chateau/umyvarna.jpg","title":"Dienerzimmer","card_label":"Dieser Raum diente als Einrichtung f\xfcr die Bediensteten, wo beispielsweise Waschgarnituren gelagert wurden.","button":"Besuchen","text":"Dieser Raum diente als Einrichtung f\xfcr die Bediensteten, wo beispielsweise Waschgarnituren gelagert wurden. Gleichzeitig diente es als Waschraum f\xfcr Bedienstete mit eigener Toilette. Von diesem Raum aus begeben wir uns in den k\xf6niglichen Korridor."},{"audio":"/kcd.mp3","number":23,"img":"/chateau/chodba.jpg","title":"K\xf6nigsgang in der Damenetage","card_label":"Eine schmale Treppe, unter der sich ein Ausgang zur Au\xdfenterrasse befindet, w\xfcrde uns zum Dachboden f\xfchren, wo unsere Tour fortgesetzt wird, aber wir werden \xfcber die Hauptwendeltreppe dorthin gehen.","button":"Besuchen","text":"Eine schmale Treppe, unter der sich ein Ausgang zur Au\xdfenterrasse befindet, w\xfcrde uns zum Dachboden f\xfchren, wo unsere Tour fortgesetzt wird, aber wir werden \xfcber die Hauptwendeltreppe dorthin gehen.\\n\\nSie k\xf6nnen die Buntglasfenster erkennen diese. Einer stellt die Burg Fr\xfddlant dar, und auf dem anderen sto\xdfen wir wieder auf das Wappen der Clam-Gallas, \xfcber das wir heute bereits gesprochen haben. \\n\\nBilder europ\xe4ischer Monarchen hingen hier urspr\xfcnglich nicht. Sie kamen erst irgendwann nach 1930 hierher. Laut Aufzeichnungen schm\xfcckte die gesamte Sammlung urspr\xfcnglich eine Sommervilla irgendwo im heutigen Kroatien. Nach ihrer Rekonstruktion zogen sie jedoch hierher und ersetzten damit die Waffen, die im Korridor vor ihnen hingen.\\n\\nWir werden den Korridor erneut durchqueren, vorbei an den R\xe4umen der Enfilade, und dann werde ich Sie bitten, weiter nach oben zu gehen und nach links."},{"audio":"/kcd.mp3","number":24,"img":"/chateau/podkrovi.jpg","title":"Der Dachboden","card_label":"Nicht jedes Schloss hat die M\xf6glichkeit, seinen Besuchern alle Stockwerke zu zeigen.","button":"Besuchen","text":"Nicht jedes Schloss hat die M\xf6glichkeit, seinen Besuchern alle Stockwerke zu zeigen. Fr\xfddlant ist hier eine Ausnahme, und seine gut erhaltenen R\xe4ume unter dem Dach erm\xf6glichen es Ihnen, mehrere Zimmer f\xfcr Kinder und Bedienstete zu sehen."},{"audio":"/kcd.mp3","number":25,"img":"/chateau/detsky_pokoj.jpg","title":"Kinderzimmer","card_label":"An der Spitze des Dachbodens befindet sich eines der Kinderzimmer.","button":"Besuchen","text":"An der Spitze des Dachbodens befindet sich eines der Kinderzimmer. Seine Tapete, die eigentlich eine Sammlung von Witzen aus dem franz\xf6sischen Magazin Charivari ist, wird Sie bestimmt interessieren. Im Zimmer sto\xdfen wir auf ein paar Spielsachen, etwa einen Kinderkarren mit Pferd, in den eines der Kinder hineinschl\xfcpfen und einen anderen verkleidet ziehen k\xf6nnte, oder ein Gesellschaftsspiel. Urspr\xfcnglich geh\xf6rte das Zimmer zwei T\xf6chtern, sp\xe4ter wurde es ein Jungenzimmer \u2013 die S\xf6hne einer der T\xf6chter, Eleonora, lebten hier, wenn sie ihre Gro\xdfeltern im Urlaub besuchten. Vielleicht hat das Zimmer deshalb diese Wanddekoration."},{"audio":"/kcd.mp3","number":26,"img":"/chateau/loznice_dcer_podkrovi.jpg","title":"Schlafzimmer der Tochter","card_label":"Das angrenzende Zimmer diente dann den beiden anderen T\xf6chtern als gemeinsames Schlafzimmer.","button":"Besuchen","text":"Das angrenzende Zimmer diente dann den beiden anderen T\xf6chtern als gemeinsames Schlafzimmer. Auch hier, wie im Nebenraum, sto\xdfen wir auf die Originalausstattung. Sehr sch\xf6ne Betten mit geschnitzten Kopfteilen, sie werden durch einen Waschtisch getrennt, und genau wie nebenan finden wir auch hier mehrere originale Spielsachen der T\xf6chter der letzten Besitzer. Das bekannteste Spielzeug war der sogenannte Donut, der auf dem Kopfkissen des hinteren Bettes liegt. Die anderen gut erhaltenen Klumpen, die die T\xf6chter hinterlassen haben, werden heute im neuesten Fl\xfcgel aufbewahrt, wohin der Kinderrundgang f\xfchrt."},{"audio":"/kcd.mp3","number":27,"img":"/chateau/lokajna.jpg","title":"Lakaizimmer","card_label":"Direkt neben einem weiteren Kinderzimmer k\xf6nnen Sie einen Blick in eine der Dienstbotenwohnungen werfen.","button":"Besuchen","text":"Direkt neben einem weiteren Kinderzimmer k\xf6nnen Sie einen Blick in eine der Dienstbotenwohnungen werfen. Dieser ist als sogenannter Lakaien eingerichtet. Im Zimmer des Dieners, der die Familienmitglieder versorgte und bei Tisch bediente, finden wir eine umfangreiche Sammlung gut erhaltener Dieneruniformen f\xfcr verschiedene Anl\xe4sse. An der T\xfcr h\xe4ngt ein einfacher Wintermantel, und im Schrank sieht man die Dienstuniformen. Sie haben aufgen\xe4hte Tr\xe4ger mit C-G-Wappen. Ein Set wird dann an die Schrankt\xfcr geh\xe4ngt. Neben Uniformen finden Sie hier auch Reisegep\xe4ck, wiederum mit dem Emblem des Besitzers, und M\xfctzen f\xfcr verschiedene Anl\xe4sse \u2013 auf der Kommode zum Beispiel Kopfbedeckungen f\xfcr Fahrer."},{"audio":"/kcd.mp3","number":28,"img":"/chateau/pokoj_sluzebnych_podkrovi.jpg","title":"Bedienstetenkammer","card_label":"Dieses Zimmer wurde von zwei Dienerinnen genutzt \u2013 M\xe4gde, die nicht nur f\xfcr die Sauberkeit der Zimmer und die Reinigung zust\xe4ndig waren, sondern auch f\xfcr kleinere Reparaturen an Kleidern, B\xfcgeln und auch f\xfcr die Betreuung der M\xe4dchen.","button":"Besuchen","text":"Dieses Zimmer wurde von zwei Dienerinnen genutzt \u2013 M\xe4gde, die nicht nur f\xfcr die Sauberkeit der Zimmer und die Reinigung zust\xe4ndig waren, sondern auch f\xfcr kleinere Reparaturen an Kleidern, B\xfcgeln und auch f\xfcr die Betreuung der M\xe4dchen. Deshalb finden wir in ihrem Zimmer zum Beispiel eine alte N\xe4hmaschine oder ein B\xfcgelbrett der Marke V\u010dela. Der Ofen im Zimmer wurde auch zum Erhitzen von Speisen oder einem B\xfcgeleisen verwendet. Dann steht ein Primus auf dem Tisch und noch einer der Waschtische unter dem n\xe4chsten Fenster."},{"audio":"/kcd.mp3","number":29,"img":"/chateau/pokoj_dcer_2.jpg","title":"Schlafzimmer der Tochter","card_label":"Dieses Zimmer diente auch als Schlafzimmer, diesmal jedoch f\xfcr die anderen T\xf6chter.","button":"Besuchen","text":"Dieses Zimmer diente auch als Schlafzimmer, diesmal jedoch f\xfcr die anderen T\xf6chter."},{"audio":"/kcd.mp3","number":30,"img":"/chateau/ucebna.jpg","title":"Klassenzimmer","card_label":"Der gr\xf6\xdfte Raum im Dachgeschoss diente als gemeinsames Klassenzimmer.","button":"Besuchen","text":"Der gr\xf6\xdfte Raum im Dachgeschoss diente als gemeinsames Klassenzimmer. Die kleinen M\xe4dchen wurden von einer Gouvernante unterrichtet, w\xe4hrend die \xe4lteren von Heimlehrern der \xf6rtlichen Schule unterrichtet wurden. Die M\xe4dchen wurden sowohl in deutscher als auch in tschechischer Sprache unterrichtet. Der Unterrichtsraum ist als vielseitiger Raum mit mehreren Vitrinen eingerichtet. So gibt es beispielsweise einen Teil der Mineraliensammlung, ausgestopfte Tiere, eine Landkarte, aber auch Musikinstrumente und Bilder ber\xfchmter Vorfahren und Familienmitglieder. Hier finden wir zum Beispiel die Urgro\xdfmutter der M\xe4dchen, Josefina Clara Aldrigen, dank der die Familie mit musikalischem Talent verbunden war, oder \xfcber dem Sofa der ersten Gallas \u2013 Matyas, Urgro\xdfvater Kristian und Gro\xdfvater Eduard mit seinem Bruder Wilhelm. Wir haben heute auf der Tour \xfcber sie alle gesprochen. Zwischen den Fenstern erinnert auch ein Portr\xe4t des Kaisers an die Monarchie und die Zeit vor der Gr\xfcndung der Republik."},{"audio":"/kcd.mp3","number":31,"img":"/chateau/pokoj_vychovatelky.jpg","title":"Lehrerzimmer","card_label":"Dieser Raum diente als Lehrerzimmer.","button":"Besuchen","text":"Dieser Raum diente als Lehrerzimmer. Es ist auch der letzte Raum, der auf dieser Etage des Schlosses zu sehen ist. Hinter dieser T\xfcr befindet sich der Bereich der Unterkapelle, durch den wir zum Treppenaufgang gelangen, der uns zum letzten Bereich unseres heutigen Rundgangs f\xfchrt \u2013 der Schlosskapelle."},{"audio":"/kcd.mp3","number":32,"img":"/chateau/kaple.jpg","title":"Die Schlosskapelle","card_label":"Wir befinden uns jetzt in der Schlosskapelle der heiligen Anna.","button":"Besuchen","text":"Wir befinden uns jetzt in der Schlosskapelle der heiligen Anna. Die Kapelle liess Katharina von Redern mit ihrem Mann Melchior in den Jahren 1598 \u2013 1602 erbauen.Der Baumeister war bekannter Marcus Spazio. Auf dem Gebiet der heutigen Kapelle stand fr\xfcher ein Wachturm, dessen Mauern f\xfcr den neuen Bau zugrunde lagen. Der Grundriss der Kapelle bildet ein Kreuz.\\n\\nIn der Kapelle gibt es zwei Alt\xe4re. Der \xe4ltere protestantische Altar stammt aus der Zeit Katharina von Redern, aus dem Jahr 1609. Dieser Altar, sowie die Kanzel (auch aus dieser Zeit) sind Werke des Liberecer Holzschnitzers Ambrosius Fritsch.\\n\\nDer zweite (links von dem protestantischen Altar zu sehen) katholische Altar im Barockstil, wurde am Ende des 17.Jhds angefertigt.\\n\\nDie Sgrafittos sind von dem M\xfcnchner Maler Franz Dietrich aus dem Jahre 1871. In diesem Jahr liess Clotilde Clam-Gallas die Kapelle umbauen und neu ausgestatten. Hier oben ist die urspr\xfcngliche Orgel, die auf der Weltaustellung im Jahre 1874 gekauft wurde.\\n\\nBeim dem Gottesdienst sass die Herrschaft oben auf der Empore und hier unten sassen die anderen, zum Beispiel Schlossdienerschaft. \\n\\nUnd hier ist die Schlossbesichtigung jetzt zu Ende.Wir bedanken Ihnen f\xfcr Ihren Besuch. Auf Wiedersehen."}]}]}'),Xm=function(){function e(){i(this,e)}return s(e,[{key:"getLanguages",value:function(){return Km.Mj}},{key:"getInstall",value:function(e){for(var t=Km.N9,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getQRScanner",value:function(e){for(var t=Km.RS,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getFaceRecognition",value:function(e){for(var t=Km.em,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getFaceRecognitionPeople",value:function(e){for(var t=Km.Lx,n=0;n<t.length;n++)if(t[n].language===e)return t[n].people;return null}},{key:"getInfo",value:function(e){for(var t=Km.um,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getDialogs",value:function(e){for(var t=Km.y4,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getHeader",value:function(e){for(var t=Km.Fs,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getRotateLabel",value:function(e){for(var t=Km.U1,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getHome",value:function(e){for(var t=Km.LE,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getTours",value:function(e){for(var t=Km.gB,n=[],r=0;r<t.length;r++)t[r].language===e&&n.push(t[r]);return n}},{key:"getTourIds",value:function(e){for(var t=this.getTours(e),n=[],r=0;r<t.length;r++)n.push(t[r].tour_id);return n}},{key:"getTour",value:function(e,t){for(var n=Km.gB,r=0;r<n.length;r++)if(n[r].language===e&&n[r].tour_id===t)return n[r];return null}},{key:"getRooms",value:function(e,t){for(var n=Km.gB,r=0;r<n.length;r++)if(n[r].language===e&&n[r].tour_id===t)return n[r].rooms;return null}},{key:"getRoom",value:function(e,t,n){for(var r=this.getRooms(e,t),i=0;i<r.length;i++)if(r[i].number===n)return r[i];return null}},{key:"getContact",value:function(e){for(var t=Km.PX,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getNavbar",value:function(e){for(var t=Km.mx,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getHistory",value:function(e){for(var t=Km.m8,n=[],r=0;r<t.length;r++)t[r].language===e&&n.push(t[r]);return n}},{key:"getHistoryOverview",value:function(e){for(var t=this.getHistory(e),n=0;n<t.length;n++)if("/history_overview"===t[n].path)return t[n];return null}},{key:"getHouses",value:function(e){for(var t=this.getHistory(e),n=0;n<t.length;n++)if("/houses"===t[n].path)return t[n].houses;return[]}},{key:"getHouse",value:function(e,t){for(var n=this.getHouses(e),r=0;r<n.length;r++)if(n[r].title===t)return n[r];return null}},{key:"getOwners",value:function(e,t){for(var n=this.getHouses(e),r=0;r<n.length;r++)if(n[r].title===t)return n[r].owners;return null}},{key:"getOwner",value:function(e,t,n){for(var r=this.getOwners(e,t),i=0;i<r.length;i++)if(r[i].number===n)return r[i];return null}},{key:"getOther",value:function(e){for(var t=Km.YH,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getAboutApp",value:function(e){for(var t=Km.PU,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getWhereToNext",value:function(e){for(var t=Km.Le,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getSettings",value:function(e){for(var t=Km.Xd,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}},{key:"getRoomsOverview",value:function(e){for(var t=Km.ZR,n=0;n<t.length;n++)if(t[n].language===e)return t[n]}},{key:"getVisitedRooms",value:function(e,t,n){if(null!=t){for(var r=this.getRooms(e,t),i=[],o=0;o<r.length;o++)r[o].number<=n&&i.push(r[o]);return i}return null}},{key:"getUnvisitedRooms",value:function(e,t,n){if(null!=t){for(var r=this.getRooms(e,t),i=[],o=0;o<r.length;o++)r[o].number>n&&i.push(r[o]);return i}return null}},{key:"getHelp",value:function(e){for(var t=Km.R_,n=0;n<t.length;n++)if(t[n].language===e)return t[n];return null}}]),e}(),Zm=Xm,qm=n(885),Ym=n(2982);function Jm(e,t,n){return Jm=d()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&u(i,n.prototype),i},Jm.apply(null,arguments)}function Qm(e){var t="function"===typeof Map?new Map:void 0;return Qm=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Jm(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)},Qm(e)}function $m(){return $m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$m.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Um||(Um={}));var eg,tg="popstate";function ng(e){return{usr:e.state,key:e.key}}function rg(e,t,n,r){return void 0===n&&(n=null),$m({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?og(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function ig(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,o=e.hash,a=void 0===o?"":o;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),a&&"#"!==a&&(n+="#"===a.charAt(0)?a:"#"+a),n}function og(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ag(e,t,n,r){void 0===r&&(r={});var i=r,o=i.window,a=void 0===o?document.defaultView:o,s=i.v5Compat,u=void 0!==s&&s,l=a.history,c=Um.Pop,d=null;function h(){c=Um.Pop,d&&d({action:c,location:f.location})}var f={get action(){return c},get location(){return e(a,l)},listen:function(e){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(tg,h),d=e,function(){a.removeEventListener(tg,h),d=null}},createHref:function(e){return t(a,e)},push:function(e,t){c=Um.Push;var r=rg(f.location,e,t);n&&n(r,e);var i=ng(r),o=f.createHref(r);try{l.pushState(i,"",o)}catch(s){a.location.assign(o)}u&&d&&d({action:c,location:r})},replace:function(e,t){c=Um.Replace;var r=rg(f.location,e,t);n&&n(r,e);var i=ng(r),o=f.createHref(r);l.replaceState(i,"",o),u&&d&&d({action:c,location:r})},go:function(e){return l.go(e)}};return f}function sg(e,t,n){void 0===n&&(n="/");var r=pg(("string"===typeof t?og(t):t).pathname||"/",n);if(null==r)return null;var i=ug(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var o=null,a=0;null==o&&a<i.length;++a)o=hg(i[a],r);return o}function ug(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var o={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(mg(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var a=yg([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(mg(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),ug(e.children,t,s,a)),(null!=e.path||e.index)&&t.push({path:a,score:dg(a,e.index),routesMeta:s})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(eg||(eg={}));var lg=/^:\w+$/,cg=function(e){return"*"===e};function dg(e,t){var n=e.split("/"),r=n.length;return n.some(cg)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!cg(e)})).reduce((function(e,t){return e+(lg.test(t)?3:""===t?1:10)}),r)}function hg(e,t){for(var n=e.routesMeta,r={},i="/",o=[],a=0;a<n.length;++a){var s=n[a],u=a===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=fg({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var d=s.route;o.push({params:r,pathname:yg([i,c.pathname]),pathnameBase:bg(yg([i,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(i=yg([i,c.pathnameBase]))}return o}function fg(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);gg("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[@.~-]|%[0-9A-F]{2})|\\b|\\/|$)";var o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),r=(0,qm.Z)(n,2),i=r[0],o=r[1],a=t.match(i);if(!a)return null;var s=a[0],u=s.replace(/(.)\/+$/,"$1"),l=a.slice(1),c=o.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return gg(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l[n]||"",t),e}),{});return{params:c,pathname:s,pathnameBase:u,pattern:e}}function pg(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function mg(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function gg(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(v){}}}function vg(e,t,n,r){void 0===r&&(r=!1);var i,o="string"===typeof e?og(e):$m({},e),a=""===e||""===o.pathname,s=a?"/":o.pathname;if(r||null==s)i=n;else{var u=t.length-1;if(s.startsWith("..")){for(var l=s.split("/");".."===l[0];)l.shift(),u-=1;o.pathname=l.join("/")}i=u>=0?t[u]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?og(e):e,r=n.pathname,i=n.search,o=void 0===i?"":i,a=n.hash,s=void 0===a?"":a,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:wg(o),hash:xg(s)}}(o,i),d=s&&"/"!==s&&s.endsWith("/"),h=(a||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}var yg=function(e){return e.join("/").replace(/\/\/+/g,"/")},bg=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},wg=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},xg=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},_g=function(e){l(n,e);var t=m(n);function n(){return i(this,n),t.apply(this,arguments)}return s(n)}(Qm(Error));var Cg=s((function e(t,n,r){i(this,e),this.status=t,this.statusText=n||"",this.data=r}));function Eg(e){return e instanceof Cg}function Sg(){return Sg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sg.apply(this,arguments)}var Ag="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},kg=e.useState,Ig=e.useEffect,Rg=e.useLayoutEffect,Tg=e.useDebugValue;function Ng(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!Ag(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,t.useSyncExternalStore;var Og=e.createContext(null);var Dg=e.createContext(null);var Mg=e.createContext(null);var Pg=e.createContext(null);var Fg=e.createContext(null);var Bg=e.createContext(null);var Lg=e.createContext({outlet:null,matches:[]});var zg=e.createContext(null);function jg(){return null!=e.useContext(Bg)}function Wg(){return jg()||mg(!1),e.useContext(Bg).location}function Hg(e){return e.filter((function(t,n){return 0===n||!t.route.index&&t.pathnameBase!==e[n-1].pathnameBase}))}function Vg(){jg()||mg(!1);var t=e.useContext(Fg),n=t.basename,r=t.navigator,i=e.useContext(Lg).matches,o=Wg().pathname,a=JSON.stringify(Hg(i).map((function(e){return e.pathnameBase}))),s=e.useRef(!1);e.useEffect((function(){s.current=!0}));var u=e.useCallback((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var i=vg(e,JSON.parse(a),o,"path"===t.relative);"/"!==n&&(i.pathname="/"===i.pathname?n:yg([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state,t)}else r.go(e)}),[n,r,a,o]);return u}function Gg(t,n){var r=(void 0===n?{}:n).relative,i=e.useContext(Lg).matches,o=Wg().pathname,a=JSON.stringify(Hg(i).map((function(e){return e.pathnameBase})));return e.useMemo((function(){return vg(t,JSON.parse(a),o,"path"===r)}),[t,a,o,r])}function Ug(){var t=function(){var t,n=e.useContext(zg),r=Yg(Kg.UseRouteError),i=e.useContext(Lg),o=i.matches[i.matches.length-1];if(n)return n;return i||mg(!1),!o.route.id&&mg(!1),null==(t=r.errors)?void 0:t[o.route.id]}(),n=Eg(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unhandled Thrown Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:o},r):null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",e.createElement("code",{style:a},"errorElement")," props on\xa0",e.createElement("code",{style:a},"<Route>")))}var Kg,Xg=function(t){l(r,t);var n=m(r);function r(e){var t;return i(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return s(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(zg.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(e.Component);function Zg(t){var n=t.routeContext,r=t.match,i=t.children,o=e.useContext(Og);return o&&r.route.errorElement&&(o._deepestRenderedBoundaryId=r.route.id),e.createElement(Lg.Provider,{value:n},i)}function qg(t,n,r){if(void 0===n&&(n=[]),null==t){if(null==r||!r.errors)return null;t=r.matches}var i=t,o=null==r?void 0:r.errors;if(null!=o){var a=i.findIndex((function(e){return e.route.id&&(null==o?void 0:o[e.route.id])}));a>=0||mg(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((function(t,a,s){var u=a.route.id?null==o?void 0:o[a.route.id]:null,l=r?a.route.errorElement||e.createElement(Ug,null):null,c=function(){return e.createElement(Zg,{match:a,routeContext:{outlet:t,matches:n.concat(i.slice(0,s+1))}},u?l:void 0!==a.route.element?a.route.element:t)};return r&&(a.route.errorElement||0===s)?e.createElement(Xg,{location:r.location,component:l,error:u,children:c()}):c()}),null)}function Yg(t){var n=e.useContext(Mg);return n||mg(!1),n}!function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(Kg||(Kg={}));var Jg;function Qg(e){mg(!1)}function $g(t){var n=t.basename,r=void 0===n?"/":n,i=t.children,o=void 0===i?null:i,a=t.location,s=t.navigationType,u=void 0===s?Um.Pop:s,l=t.navigator,c=t.static,d=void 0!==c&&c;jg()&&mg(!1);var h=r.replace(/^\/*/,"/"),f=e.useMemo((function(){return{basename:h,navigator:l,static:d}}),[h,l,d]);"string"===typeof a&&(a=og(a));var p=a,m=p.pathname,g=void 0===m?"/":m,v=p.search,y=void 0===v?"":v,b=p.hash,w=void 0===b?"":b,x=p.state,_=void 0===x?null:x,C=p.key,E=void 0===C?"default":C,S=e.useMemo((function(){var e=pg(g,h);return null==e?null:{pathname:e,search:y,hash:w,state:_,key:E}}),[h,g,y,w,_,E]);return null==S?null:e.createElement(Fg.Provider,{value:f},e.createElement(Bg.Provider,{children:o,value:{location:S,navigationType:u}}))}function ev(t){var n=t.children,r=t.location,i=e.useContext(Dg);return function(t,n){jg()||mg(!1);var r,i=e.useContext(Mg),o=e.useContext(Lg).matches,a=o[o.length-1],s=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),l=(a&&a.route,Wg());if(n){var c,d="string"===typeof n?og(n):n;"/"===u||(null==(c=d.pathname)?void 0:c.startsWith(u))||mg(!1),r=d}else r=l;var h=r.pathname||"/",f=sg(t,{pathname:"/"===u?h:h.slice(u.length)||"/"}),p=qg(f&&f.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:yg([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:yg([u,e.pathnameBase])})})),o,i||void 0);return n?e.createElement(Bg.Provider,{value:{location:Sg({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:Um.Pop}},p):p}(i&&!n?i.router.routes:nv(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Jg||(Jg={}));var tv=new Promise((function(){}));e.Component;function nv(t,n){void 0===n&&(n=[]);var r=[];return e.Children.forEach(t,(function(t,i){if(e.isValidElement(t))if(t.type!==e.Fragment){t.type!==Qg&&mg(!1);var o=[].concat((0,Ym.Z)(n),[i]),a={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,hasErrorBoundary:null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle};t.props.children&&(a.children=nv(t.props.children,o)),r.push(a)}else r.push.apply(r,nv(t.props.children,n))})),r}function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rv.apply(this,arguments)}function iv(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var ov=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],av=["aria-current","caseSensitive","className","end","style","to","children"];function sv(t){var n,r=t.basename,i=t.children,o=t.window,a=e.useRef();null==a.current&&(a.current=(void 0===(n={window:o,v5Compat:!0})&&(n={}),ag((function(e,t){var n=e.location;return rg("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:ig(t)}),null,n)));var s=a.current,u=e.useState({action:s.action,location:s.location}),l=(0,qm.Z)(u,2),c=l[0],d=l[1];return e.useLayoutEffect((function(){return s.listen(d)}),[s]),e.createElement($g,{basename:r,children:i,location:c.location,navigationType:c.action,navigator:s})}var uv=e.forwardRef((function(t,n){var r=t.onClick,i=t.relative,o=t.reloadDocument,a=t.replace,s=t.state,u=t.target,l=t.to,c=t.preventScrollReset,d=iv(t,ov),h=function(t,n){var r=(void 0===n?{}:n).relative;jg()||mg(!1);var i=e.useContext(Fg),o=i.basename,a=i.navigator,s=Gg(t,{relative:r}),u=s.hash,l=s.pathname,c=s.search,d=l;return"/"!==o&&(d="/"===l?o:yg([o,l])),a.createHref({pathname:d,search:c,hash:u})}(l,{relative:i}),f=function(t,n){var r=void 0===n?{}:n,i=r.target,o=r.replace,a=r.state,s=r.preventScrollReset,u=r.relative,l=Vg(),c=Wg(),d=Gg(t,{relative:u});return e.useCallback((function(e){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,i)){e.preventDefault();var n=void 0!==o?o:ig(c)===ig(d);l(t,{replace:n,state:a,preventScrollReset:s,relative:u})}}),[c,l,d,o,a,i,t,s,u])}(l,{replace:a,state:s,target:u,preventScrollReset:c,relative:i});return e.createElement("a",rv({},d,{href:h,onClick:o?r:function(e){r&&r(e),e.defaultPrevented||f(e)},ref:n,target:u}))}));var lv=e.forwardRef((function(t,n){var r,i=t["aria-current"],o=void 0===i?"page":i,a=t.caseSensitive,s=void 0!==a&&a,u=t.className,l=void 0===u?"":u,c=t.end,d=void 0!==c&&c,h=t.style,f=t.to,p=t.children,m=iv(t,av),g=Gg(f),v=function(t){jg()||mg(!1);var n=Wg().pathname;return e.useMemo((function(){return fg(t,n)}),[n,t])}({path:g.pathname,end:d,caseSensitive:s}),y=e.useContext(Mg),b=null==y?void 0:y.navigation.location,w=Gg(b||""),x=null!=e.useMemo((function(){return b?fg({path:g.pathname,end:d,caseSensitive:s},w.pathname):null}),[b,g.pathname,s,d,w.pathname]),_=null!=v,C=_?o:void 0;r="function"===typeof l?l({isActive:_,isPending:x}):[l,_?"active":null,x?"pending":null].filter(Boolean).join(" ");var E="function"===typeof h?h({isActive:_,isPending:x}):h;return e.createElement(uv,rv({},m,{"aria-current":C,className:r,ref:n,style:E,to:f}),"function"===typeof p?p({isActive:_,isPending:x}):p)}));var cv=e.createContext({language:"en",setLanguage:function(){},tour:"castle",setTour:function(){},room:"1",setRoom:function(){},house:"rederns",setHouse:function(){},owner:"1",setOwner:function(){},"font-size":"d",setFontSize:function(){},gallery_tour:"castle",setGalleryTour:function(){},image_recognition_name:"",setImageRecognitionName:function(){},image_recognition_img:"",setImageRecognitionImg:function(){}}),dv=n(5172),hv=n(184);var fv=function(){var t=(0,e.useContext)(cv),n=(new Zm).getLanguages(),r=(0,e.useState)(!1),i=(0,qm.Z)(r,2),o=i[0],a=i[1];return(0,hv.jsxs)("div",{className:"dropdown-box text-transform-primary",children:[(0,hv.jsxs)("div",{className:"dropdown-button text-transform-primary cursor-primary flex-secondary align-items-primary",onClick:function(){return a(!o)},children:[(0,hv.jsx)("div",{className:"dropdown-padding font-size-medium",children:t.language}),(0,hv.jsx)(dv.Z,{className:"dropdown-icon"})]}),(0,hv.jsx)("ul",{className:o?"dropdown display-block":"dropdown",children:n.map((function(e){return(0,hv.jsx)("li",{className:"dropdown-item cursor-primary font-size-medium",onClick:function(){return function(e){a(!o),t.setLanguage(e)}(e)},children:e},e)}))})]})},pv=n(7462),mv=n(3366);function gv(e,t){if(null==e)return{};var n,r,i=(0,mv.Z)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var vv=n(4942),yv=n(8182),bv=n(2110),wv=n.n(bv),xv="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_v="object"===("undefined"===typeof window?"undefined":xv(window))&&"object"===("undefined"===typeof document?"undefined":xv(document))&&9===document.nodeType;function Cv(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,u(e,t)}var Ev={}.constructor;function Sv(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(Sv);if(e.constructor!==Ev)return e;var t={};for(var n in e)t[n]=Sv(e[n]);return t}function Av(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,i=Sv(t),o=r.plugins.onCreateRule(e,i,n);return o||(e[0],null)}var kv=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},Iv=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&"!important"!==e[n];n++)t&&(t+=", "),t+=kv(e[n]," ");else t=kv(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function Rv(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function Tv(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function Nv(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var i=n.indent,o=void 0===i?0:i,a=t.fallbacks;!1===n.format&&(o=-1/0);var s=Rv(n),u=s.linebreak,l=s.space;if(e&&o++,a)if(Array.isArray(a))for(var c=0;c<a.length;c++){var d=a[c];for(var h in d){var f=d[h];null!=f&&(r&&(r+=u),r+=Tv(h+":"+l+Iv(f)+";",o))}}else for(var p in a){var m=a[p];null!=m&&(r&&(r+=u),r+=Tv(p+":"+l+Iv(m)+";",o))}for(var g in t){var v=t[g];null!=v&&"fallbacks"!==g&&(r&&(r+=u),r+=Tv(g+":"+l+Iv(v)+";",o))}return(r||n.allowEmpty)&&e?(r&&(r=""+u+r+u),Tv(""+e+l+"{"+r,--o)+Tv("}",o)):r}var Ov=/([[\].#*$><+~=|^:(),"'`\s])/g,Dv="undefined"!==typeof CSS&&CSS.escape,Mv=function(e){return Dv?Dv(e):e.replace(Ov,"\\$1")},Pv=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var r=n.sheet,i=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:i&&(this.renderer=new i)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var i=t;n&&!1===n.process||(i=this.options.jss.plugins.onChangeValue(t,e,this));var o=null==i||!1===i,a=e in this.style;if(o&&!a&&!r)return this;var s=o&&a;if(s?delete this.style[e]:this.style[e]=i,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,i),this;var u=this.options.sheet;return u&&u.attached,this},e}(),Fv=function(e){function t(t,n,r){var i;i=e.call(this,t,n,r)||this;var o=r.selector,a=r.scoped,s=r.sheet,u=r.generateId;return o?i.selectorText=o:!1!==a&&(i.id=u(f(f(i)),s),i.selectorText="."+Mv(i.id)),i}Cv(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=Iv(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,pv.Z)({},e,{allowEmpty:!0}):e;return Nv(this.selectorText,this.style,n)},s(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(Pv),Bv={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new Fv(e,t,n)}},Lv={indent:1,children:!0},zv=/@([\w-]+)/,jv=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(zv);for(var i in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new cy((0,pv.Z)({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.toString=function(e){void 0===e&&(e=Lv);var t=Rv(e).linebreak;if(null==e.indent&&(e.indent=Lv.indent),null==e.children&&(e.children=Lv.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),Wv=/@media|@supports\s+/,Hv={onCreateRule:function(e,t,n){return Wv.test(e)?new jv(e,t,n):null}},Vv={indent:1,children:!0},Gv=/@keyframes\s+([\w-]+)/,Uv=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(Gv);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var i=n.scoped,o=n.sheet,a=n.generateId;for(var s in this.id=!1===i?this.name:Mv(a(this,o)),this.rules=new cy((0,pv.Z)({},n,{parent:this})),t)this.rules.add(s,t[s],(0,pv.Z)({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=Vv);var t=Rv(e).linebreak;if(null==e.indent&&(e.indent=Vv.indent),null==e.children&&(e.children=Vv.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),Kv=/@keyframes\s+/,Xv=/\$([\w-]+)/g,Zv=function(e,t){return"string"===typeof e?e.replace(Xv,(function(e,n){return n in t?t[n]:e})):e},qv=function(e,t,n){var r=e[t],i=Zv(r,n);i!==r&&(e[t]=i)},Yv={onCreateRule:function(e,t,n){return"string"===typeof e&&Kv.test(e)?new Uv(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&qv(e,"animation-name",n.keyframes),"animation"in e&&qv(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return Zv(e,r.keyframes);default:return e}}},Jv=function(e){function t(){return e.apply(this,arguments)||this}return Cv(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,pv.Z)({},e,{allowEmpty:!0}):e;return Nv(this.key,this.style,n)},t}(Pv),Qv={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new Jv(e,t,n):null}},$v=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=Rv(e).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=Nv(this.at,this.style[r]),this.style[r+1]&&(n+=t);return n}return Nv(this.at,this.style,e)},e}(),ey=/@font-face/,ty={onCreateRule:function(e,t,n){return ey.test(e)?new $v(e,t,n):null}},ny=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return Nv(this.key,this.style,e)},e}(),ry={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new ny(e,t,n):null}},iy=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),oy={"@charset":!0,"@import":!0,"@namespace":!0},ay={onCreateRule:function(e,t,n){return e in oy?new iy(e,t,n):null}},sy=[Bv,Hv,Yv,Qv,ty,ry,ay],uy={process:!0},ly={force:!0,process:!0},cy=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,i=r.parent,o=r.sheet,a=r.jss,s=r.Renderer,u=r.generateId,l=r.scoped,c=(0,pv.Z)({classes:this.classes,parent:i,sheet:o,jss:a,Renderer:s,generateId:u,scoped:l,name:e,keyframes:this.keyframes,selector:void 0},n),d=e;e in this.raw&&(d=e+"-d"+this.counter++),this.raw[d]=t,d in this.classes&&(c.selector="."+Mv(this.classes[d]));var h=Av(d,t,c);if(!h)return null;this.register(h);var f=void 0===c.index?this.index.length:c.index;return this.index.splice(f,0,h),h},t.replace=function(e,t,n){var r=this.get(e),i=this.index.indexOf(r);r&&this.remove(r);var o=n;return-1!==i&&(o=(0,pv.Z)({},n,{index:i})),this.add(e,t,o)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof Fv?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof Uv&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof Fv?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof Uv&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=uy);var i=this.options,o=i.jss.plugins,a=i.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var s=t.style;if(o.onUpdate(n,t,a,r),r.process&&s&&s!==t.style){for(var u in o.onProcessStyle(t.style,t,a),t.style){var l=t.style[u];l!==s[u]&&t.prop(u,l,ly)}for(var c in s){var d=t.style[c],h=s[c];null==d&&d!==h&&t.prop(c,null,ly)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,i=Rv(e).linebreak,o=0;o<this.index.length;o++){var a=this.index[o].toString(e);(a||r)&&(t&&(t+=i),t+=a)}return t},e}(),dy=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=(0,pv.Z)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new cy(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},t.replaceRule=function(e,t,n){var r=this.rules.get(e);if(!r)return this.addRule(e,t,n);var i=this.rules.replace(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(this.renderer&&(i?r.renderable&&this.renderer.replaceRule(r.renderable,i):this.renderer.deleteRule(r)),i):i:(this.deployed=!1,i)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var i=this.addRule(r,e[r],t);i&&n.push(i)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),hy=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var i=this.registry.onCreateRule[r](e,t,n);if(i)return i}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,i=0;i<this.registry.onChangeValue.length;i++)r=this.registry.onChangeValue[i](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),fy=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=(0,mv.Z)(t,["attached"]),i=Rv(r).linebreak,o="",a=0;a<this.registry.length;a++){var s=this.registry[a];null!=n&&s.attached!==n||(o&&(o+=i),o+=s.toString(r))}return o},s(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),py=new fy,my="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),gy="2f1acc6c3a606b082e5eef5e54414ffb";null==my[gy]&&(my[gy]=0);var vy=my[gy]++,yy=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var i="",o="";return r&&(r.options.classNamePrefix&&(o=r.options.classNamePrefix),null!=r.options.jss.id&&(i=String(r.options.jss.id))),e.minify?""+(o||"c")+vy+i+t:o+n.key+"-"+vy+(i?"-"+i:"")+"-"+t}},by=function(e){var t;return function(){return t||(t=e()),t}},wy=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},xy=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=Iv(n)),e.attributeStyleMap)e.attributeStyleMap.set(t,r);else{var i=r?r.indexOf("!important"):-1,o=i>-1?r.substr(0,i-1):r;e.style.setProperty(t,o,i>-1?"important":"")}}catch(a){return!1}return!0},_y=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},Cy=function(e,t){return e.selectorText=t,e.selectorText===t},Ey=by((function(){return document.querySelector("head")}));function Sy(e){var t=py.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var i=function(e){for(var t=Ey(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var Ay=by((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),ky=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(r){return!1}return e.cssRules[n]},Iy=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},Ry=function(){function e(e){this.getPropertyValue=wy,this.setProperty=xy,this.removeProperty=_y,this.setSelector=Cy,this.hasInsertedRules=!1,this.cssRules=[],e&&py.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,i=t.element;this.element=i||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var o=Ay();o&&this.element.setAttribute("nonce",o)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=Sy(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var i=n,o=i.parentNode;o&&o.insertBefore(e,i.nextSibling)}else Ey().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,i=n;if("conditional"===e.type||"keyframes"===e.type){var o=Iy(n,t);if(!1===(i=ky(n,r.toString({children:!1}),o)))return!1;this.refCssRule(e,o,i)}return this.insertRules(r.rules,i),i}var a=e.toString();if(!a)return!1;var s=Iy(n,t),u=ky(n,a,s);return!1!==u&&(this.hasInsertedRules=!0,this.refCssRule(e,s,u),u)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof dy&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),Ty=0,Ny=function(){function e(e){this.id=Ty++,this.version="10.9.2",this.plugins=new hy,this.options={id:{minify:!1},createGenerateId:yy,Renderer:_v?Ry:null,plugins:[]},this.generateId=yy({minify:!1});for(var t=0;t<sy.length;t++)this.plugins.use(sy[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=(0,pv.Z)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===py.index?0:py.index+1);var r=new dy(e,(0,pv.Z)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),py.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var r=(0,pv.Z)({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var i=Av(e,t,r);return i&&this.plugins.onProcessRule(i),i},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),Oy=function(e){return new Ny(e)},Dy="object"===typeof CSS&&null!=CSS&&"number"in CSS;function My(e){var t=null;for(var n in e){var r=e[n],i=typeof r;if("function"===i)t||(t={}),t[n]=r;else if("object"===i&&null!==r&&!Array.isArray(r)){var o=My(r);o&&(t||(t={}),t[n]=o)}}return t}Oy();function Py(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var r=(0,pv.Z)({},t);return Object.keys(n).forEach((function(e){n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))})),r}var Fy={set:function(e,t,n,r){var i=e.get(t);i||(i=new Map,e.set(t,i)),i.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},By=Fy;var Ly=e.createContext(null);function zy(){return e.useContext(Ly)}var jy="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",Wy=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var Hy=Date.now(),Vy="fnValues"+Hy,Gy="fnStyle"+ ++Hy,Uy=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=Av(e,{},n);return r[Gy]=t,r},onProcessStyle:function(e,t){if(Vy in t||Gy in t)return e;var n={};for(var r in e){var i=e[r];"function"===typeof i&&(delete e[r],n[r]=i)}return t[Vy]=n,e},onUpdate:function(e,t,n,r){var i=t,o=i[Gy];o&&(i.style=o(e)||{});var a=i[Vy];if(a)for(var s in a)i.prop(s,a[s](e),r)}}},Ky="@global",Xy="@global ",Zy=function(){function e(e,t,n){for(var r in this.type="global",this.at=Ky,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new cy((0,pv.Z)({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),qy=function(){function e(e,t,n){this.type="global",this.at=Ky,this.isProcessed=!1,this.key=e,this.options=n;var r=e.substr(Xy.length);this.rule=n.jss.createRule(r,t,(0,pv.Z)({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Yy=/\s*,\s*/g;function Jy(e,t){for(var n=e.split(Yy),r="",i=0;i<n.length;i++)r+=t+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}var Qy=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===Ky)return new Zy(e,t,n);if("@"===e[0]&&e.substr(0,Xy.length)===Xy)return new qy(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,i=r?r[Ky]:null;if(i){for(var o in i)t.addRule(o,i[o],(0,pv.Z)({},n,{selector:Jy(o,e.selector)}));delete r[Ky]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var i in r)if("@"===i[0]&&i.substr(0,Ky.length)===Ky){var o=Jy(i.substr(Ky.length),e.selector);t.addRule(o,r[i],(0,pv.Z)({},n,{selector:o})),delete r[i]}}(e,t))}}},$y=/\s*,\s*/g,eb=/&/g,tb=/\$([\w-]+)/g;var nb=function(){function e(e,t){return function(n,r){var i=e.getRule(r)||t&&t.getRule(r);return i?i.selector:r}}function t(e,t){for(var n=t.split($y),r=e.split($y),i="",o=0;o<n.length;o++)for(var a=n[o],s=0;s<r.length;s++){var u=r[s];i&&(i+=", "),i+=-1!==u.indexOf("&")?u.replace(eb,a):a+" "+u}return i}function n(e,t,n){if(n)return(0,pv.Z)({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var i=(0,pv.Z)({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete i.name,i}return{onProcessStyle:function(r,i,o){if("style"!==i.type)return r;var a,s,u=i,l=u.options.parent;for(var c in r){var d=-1!==c.indexOf("&"),h="@"===c[0];if(d||h){if(a=n(u,l,a),d){var f=t(c,u.selector);s||(s=e(l,o)),f=f.replace(tb,s);var p=u.key+"-"+c;"replaceRule"in l?l.replaceRule(p,r[c],(0,pv.Z)({},a,{selector:f})):l.addRule(p,r[c],(0,pv.Z)({},a,{selector:f}))}else h&&l.addRule(c,{},a).addRule(u.key,r[c],{selector:u.selector});delete r[c]}}return r}}},rb=/[A-Z]/g,ib=/^ms-/,ob={};function ab(e){return"-"+e.toLowerCase()}var sb=function(e){if(ob.hasOwnProperty(e))return ob[e];var t=e.replace(rb,ab);return ob[e]=ib.test(t)?"-"+t:t};function ub(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:sb(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(ub):t.fallbacks=ub(e.fallbacks)),t}var lb=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=ub(e[t]);return e}return ub(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=sb(t);return t===r?e:(n.prop(r,e),null)}}},cb=Dy&&CSS?CSS.px:"px",db=Dy&&CSS?CSS.ms:"ms",hb=Dy&&CSS?CSS.percent:"%";function fb(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var i in e)r[i]=e[i],r[i.replace(t,n)]=e[i];return r}var pb=fb({"animation-delay":db,"animation-duration":db,"background-position":cb,"background-position-x":cb,"background-position-y":cb,"background-size":cb,border:cb,"border-bottom":cb,"border-bottom-left-radius":cb,"border-bottom-right-radius":cb,"border-bottom-width":cb,"border-left":cb,"border-left-width":cb,"border-radius":cb,"border-right":cb,"border-right-width":cb,"border-top":cb,"border-top-left-radius":cb,"border-top-right-radius":cb,"border-top-width":cb,"border-width":cb,"border-block":cb,"border-block-end":cb,"border-block-end-width":cb,"border-block-start":cb,"border-block-start-width":cb,"border-block-width":cb,"border-inline":cb,"border-inline-end":cb,"border-inline-end-width":cb,"border-inline-start":cb,"border-inline-start-width":cb,"border-inline-width":cb,"border-start-start-radius":cb,"border-start-end-radius":cb,"border-end-start-radius":cb,"border-end-end-radius":cb,margin:cb,"margin-bottom":cb,"margin-left":cb,"margin-right":cb,"margin-top":cb,"margin-block":cb,"margin-block-end":cb,"margin-block-start":cb,"margin-inline":cb,"margin-inline-end":cb,"margin-inline-start":cb,padding:cb,"padding-bottom":cb,"padding-left":cb,"padding-right":cb,"padding-top":cb,"padding-block":cb,"padding-block-end":cb,"padding-block-start":cb,"padding-inline":cb,"padding-inline-end":cb,"padding-inline-start":cb,"mask-position-x":cb,"mask-position-y":cb,"mask-size":cb,height:cb,width:cb,"min-height":cb,"max-height":cb,"min-width":cb,"max-width":cb,bottom:cb,left:cb,top:cb,right:cb,inset:cb,"inset-block":cb,"inset-block-end":cb,"inset-block-start":cb,"inset-inline":cb,"inset-inline-end":cb,"inset-inline-start":cb,"box-shadow":cb,"text-shadow":cb,"column-gap":cb,"column-rule":cb,"column-rule-width":cb,"column-width":cb,"font-size":cb,"font-size-delta":cb,"letter-spacing":cb,"text-decoration-thickness":cb,"text-indent":cb,"text-stroke":cb,"text-stroke-width":cb,"word-spacing":cb,motion:cb,"motion-offset":cb,outline:cb,"outline-offset":cb,"outline-width":cb,perspective:cb,"perspective-origin-x":hb,"perspective-origin-y":hb,"transform-origin":hb,"transform-origin-x":hb,"transform-origin-y":hb,"transform-origin-z":hb,"transition-delay":db,"transition-duration":db,"vertical-align":cb,"flex-basis":cb,"shape-margin":cb,size:cb,gap:cb,grid:cb,"grid-gap":cb,"row-gap":cb,"grid-row-gap":cb,"grid-column-gap":cb,"grid-template-rows":cb,"grid-template-columns":cb,"grid-auto-rows":cb,"grid-auto-columns":cb,"box-shadow-x":cb,"box-shadow-y":cb,"box-shadow-blur":cb,"box-shadow-spread":cb,"font-line-height":cb,"text-shadow-x":cb,"text-shadow-y":cb,"text-shadow-blur":cb});function mb(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=mb(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var i in t)t[i]=mb(i,t[i],n);else for(var o in t)t[o]=mb(e+"-"+o,t[o],n);else if("number"===typeof t&&!1===isNaN(t)){var a=n[e]||pb[e];return!a||0===t&&a===cb?t.toString():"function"===typeof a?a(t).toString():""+t+a}return t}var gb=function(e){void 0===e&&(e={});var t=fb(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=mb(r,e[r],t);return e},onChangeValue:function(e,n){return mb(n,e,t)}}},vb="",yb="",bb="",wb="",xb=_v&&"ontouchstart"in document.documentElement;if(_v){var _b={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Cb=document.createElement("p").style;for(var Eb in _b)if(Eb+"Transform"in Cb){vb=Eb,yb=_b[Eb];break}"Webkit"===vb&&"msHyphens"in Cb&&(vb="ms",yb=_b.ms,wb="edge"),"Webkit"===vb&&"-apple-trailing-word"in Cb&&(bb="apple")}var Sb=vb,Ab=yb,kb=bb,Ib=wb,Rb=xb;var Tb={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===Sb?"-webkit-"+e:Ab+e)}},Nb={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===Sb?Ab+"print-"+e:e)}},Ob=/[-\s]+(.)?/g;function Db(e,t){return t?t.toUpperCase():""}function Mb(e){return e.replace(Ob,Db)}function Pb(e){return Mb("-"+e)}var Fb,Bb={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===Sb){var n="mask-image";if(Mb(n)in t)return e;if(Sb+Pb(n)in t)return Ab+e}return e}},Lb={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==kb||Rb?e:Ab+e)}},zb={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:Ab+e)}},jb={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:Ab+e)}},Wb={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===Sb||"ms"===Sb&&"edge"!==Ib?Ab+e:e)}},Hb={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===Sb||"ms"===Sb||"apple"===kb?Ab+e:e)}},Vb={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===Sb?"WebkitColumn"+Pb(e)in t&&Ab+"column-"+e:"Moz"===Sb&&("page"+Pb(e)in t&&"page-"+e))}},Gb={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===Sb)return e;var n=e.replace("-inline","");return Sb+Pb(n)in t&&Ab+n}},Ub={supportedProperty:function(e,t){return Mb(e)in t&&e}},Kb={supportedProperty:function(e,t){var n=Pb(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:Sb+n in t?Ab+e:"Webkit"!==Sb&&"Webkit"+n in t&&"-webkit-"+e}},Xb={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===Sb?""+Ab+e:e)}},Zb={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===Sb?Ab+"scroll-chaining":e)}},qb={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Yb={supportedProperty:function(e,t){var n=qb[e];return!!n&&(Sb+Pb(n)in t&&Ab+n)}},Jb={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Qb=Object.keys(Jb),$b=function(e){return Ab+e},ew={supportedProperty:function(e,t,n){var r=n.multiple;if(Qb.indexOf(e)>-1){var i=Jb[e];if(!Array.isArray(i))return Sb+Pb(i)in t&&Ab+i;if(!r)return!1;for(var o=0;o<i.length;o++)if(!(Sb+Pb(i[0])in t))return!1;return i.map($b)}return!1}},tw=[Tb,Nb,Bb,Lb,zb,jb,Wb,Hb,Vb,Gb,Ub,Kb,Xb,Zb,Yb,ew],nw=tw.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),rw=tw.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,(0,Ym.Z)(t.noPrefill)),e}),[]),iw={};if(_v){Fb=document.createElement("p");var ow=window.getComputedStyle(document.documentElement,"");for(var aw in ow)isNaN(aw)||(iw[ow[aw]]=ow[aw]);rw.forEach((function(e){return delete iw[e]}))}function sw(e,t){if(void 0===t&&(t={}),!Fb)return e;if(null!=iw[e])return iw[e];"transition"!==e&&"transform"!==e||(t[e]=e in Fb.style);for(var n=0;n<nw.length&&(iw[e]=nw[n](e,Fb.style,t),!iw[e]);n++);try{Fb.style[e]=""}catch(r){return!1}return iw[e]}var uw,lw={},cw={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},dw=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function hw(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?sw(t):", "+sw(n);return r||(t||n)}function fw(e,t){var n=t;if(!uw||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=lw[r])return lw[r];try{uw.style[e]=n}catch(i){return lw[r]=!1,!1}if(cw[e])n=n.replace(dw,hw);else if(""===uw.style[e]&&("-ms-flex"===(n=Ab+n)&&(uw.style[e]="-ms-flexbox"),uw.style[e]=n,""===uw.style[e]))return lw[r]=!1,!1;return uw.style[e]="",lw[r]=n,lw[r]}_v&&(uw=document.createElement("p"));var pw=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var i=!1,o=sw(n);o&&o!==n&&(i=!0);var a=!1,s=fw(o,Iv(r));s&&s!==r&&(a=!0),(i||a)&&(i&&delete t[n],t[o||n]=s||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===Sb?e:"@"+Ab+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return fw(t,Iv(e))||e}}};var mw=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},i=Object.keys(t).sort(e),o=0;o<i.length;o++)r[i[o]]=t[i[o]];return r}}};var gw=Oy({plugins:[Uy(),Qy(),nb(),lb(),gb(),"undefined"===typeof window?null:pw(),mw()]}),vw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,i=void 0===r?"jss":r,o=e.seed,a=void 0===o?"":o,s=""===a?"":"".concat(a,"-"),u=0,l=function(){return u+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==Wy.indexOf(e.key))return"Mui-".concat(e.key);var o="".concat(s).concat(r,"-").concat(e.key);return t.options.theme[jy]&&""===a?"".concat(o,"-").concat(l()):o}return"".concat(s).concat(i).concat(l())}}(),yw={disableGeneration:!1,generateClassName:vw,jss:gw,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},bw=e.createContext(yw);var ww=-1e9;function xw(){return ww+=1}function _w(e){return e&&"object"===(0,h.Z)(e)&&e.constructor===Object}function Cw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?(0,pv.Z)({},e):e;return _w(e)&&_w(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(_w(t[i])&&i in e?r[i]=Cw(e[i],t[i],n):r[i]=t[i])})),r}function Ew(e){var t="function"===typeof e;return{create:function(n,r){var i;try{i=t?e(n):e}catch(s){throw s}if(!r||!n.overrides||!n.overrides[r])return i;var o=n.overrides[r],a=(0,pv.Z)({},i);return Object.keys(o).forEach((function(e){a[e]=Cw(a[e],o[e])})),a},options:{}}}var Sw={};function Aw(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var i=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,i=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,i=!0),i&&(r.cacheClasses.value=Py({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}function kw(e,t){var n=e.state,r=e.theme,i=e.stylesOptions,o=e.stylesCreator,a=e.name;if(!i.disableGeneration){var s=By.get(i.sheetsManager,o,r);s||(s={refs:0,staticSheet:null,dynamicStyles:null},By.set(i.sheetsManager,o,r,s));var u=(0,pv.Z)({},o.options,i,{theme:r,flip:"boolean"===typeof i.flip?i.flip:"rtl"===r.direction});u.generateId=u.serverGenerateClassName||u.generateClassName;var l=i.sheetsRegistry;if(0===s.refs){var c;i.sheetsCache&&(c=By.get(i.sheetsCache,o,r));var d=o.create(r,a);c||((c=i.jss.createStyleSheet(d,(0,pv.Z)({link:!1},u))).attach(),i.sheetsCache&&By.set(i.sheetsCache,o,r,c)),l&&l.add(c),s.staticSheet=c,s.dynamicStyles=My(d)}if(s.dynamicStyles){var h=i.jss.createStyleSheet(s.dynamicStyles,(0,pv.Z)({link:!0},u));h.update(t),h.attach(),n.dynamicSheet=h,n.classes=Py({baseClasses:s.staticSheet.classes,newClasses:h.classes}),l&&l.add(h)}else n.classes=s.staticSheet.classes;s.refs+=1}}function Iw(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function Rw(e){var t=e.state,n=e.theme,r=e.stylesOptions,i=e.stylesCreator;if(!r.disableGeneration){var o=By.get(r.sheetsManager,i,n);o.refs-=1;var a=r.sheetsRegistry;0===o.refs&&(By.delete(r.sheetsManager,i,n),r.jss.removeStyleSheet(o.staticSheet),a&&a.remove(o.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),a&&a.remove(t.dynamicSheet))}}function Tw(t,n){var r,i=e.useRef([]),o=e.useMemo((function(){return{}}),n);i.current!==o&&(i.current=o,r=t()),e.useEffect((function(){return function(){r&&r()}}),[o])}function Nw(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.name,i=n.classNamePrefix,o=n.Component,a=n.defaultTheme,s=void 0===a?Sw:a,u=gv(n,["name","classNamePrefix","Component","defaultTheme"]),l=Ew(t),c=r||i||"makeStyles";l.options={index:xw(),name:r,meta:c,classNamePrefix:c};var d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=zy()||s,i=(0,pv.Z)({},e.useContext(bw),u),a=e.useRef(),c=e.useRef();Tw((function(){var e={name:r,state:{},stylesCreator:l,stylesOptions:i,theme:n};return kw(e,t),c.current=!1,a.current=e,function(){Rw(e)}}),[n,l]),e.useEffect((function(){c.current&&Iw(a.current,t),c.current=!0}));var d=Aw(a.current,t.classes,o);return d};return d}function Ow(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var i,o=t.props[n];for(i in o)void 0===r[i]&&(r[i]=o[i]);return r}var Dw=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var i=n.defaultTheme,o=n.withTheme,a=void 0!==o&&o,s=n.name,u=gv(n,["defaultTheme","withTheme","name"]);var l=s,c=Nw(t,(0,pv.Z)({defaultTheme:i,Component:r,name:s||r.displayName,classNamePrefix:l},u)),d=e.forwardRef((function(t,n){t.classes;var o,u=t.innerRef,l=gv(t,["classes","innerRef"]),d=c((0,pv.Z)({},r.defaultProps,t)),h=l;return("string"===typeof s||a)&&(o=zy()||i,s&&(h=Ow({theme:o,name:s,props:l})),a&&!h.theme&&(h.theme=o)),e.createElement(r,(0,pv.Z)({ref:u||n,classes:d},h))}));return wv()(d,r),d}},Mw=["xs","sm","md","lg","xl"];function Pw(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,i=void 0===r?"px":r,o=e.step,a=void 0===o?5:o,s=gv(e,["values","unit","step"]);function u(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function l(e,t){var r=Mw.indexOf(t);return r===Mw.length-1?u(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[Mw[r+1]]?n[Mw[r+1]]:t)-a/100).concat(i,")")}return(0,pv.Z)({keys:Mw,values:n,up:u,down:function(e){var t=Mw.indexOf(e)+1,r=n[Mw[t]];return t===Mw.length?u("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-a/100).concat(i,")")},between:l,only:function(e){return l(e,e)},width:function(e){return n[e]}},s)}function Fw(e,t,n){var r;return(0,pv.Z)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),(0,pv.Z)({paddingLeft:t(2),paddingRight:t(2)},n,(0,vv.Z)({},e.up("sm"),(0,pv.Z)({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(r={minHeight:56},(0,vv.Z)(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,vv.Z)(r,e.up("sm"),{minHeight:64}),r)},n)}function Bw(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}var Lw={black:"#000",white:"#fff"},zw={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},jw={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},Ww={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},Hw={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Vw={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Gw={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Uw={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function Kw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function Xw(e){if(e.type)return e;if("#"===e.charAt(0))return Xw(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(Bw(3,e));var r=e.substring(t+1,e.length-1).split(",");return{type:n,values:r=r.map((function(e){return parseFloat(e)}))}}function Zw(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function qw(e){var t="hsl"===(e=Xw(e)).type?Xw(function(e){var t=(e=Xw(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),Zw({type:s,values:u})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Yw(e,t){return e=Xw(e),t=Kw(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,Zw(e)}function Jw(e,t){if(e=Xw(e),t=Kw(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return Zw(e)}function Qw(e,t){if(e=Xw(e),t=Kw(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return Zw(e)}var $w={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Lw.white,default:zw[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},ex={text:{primary:Lw.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:zw[800],default:"#303030"},action:{active:Lw.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function tx(e,t,n,r){var i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Qw(e.main,i):"dark"===t&&(e.dark=Jw(e.main,o)))}function nx(e){var t=e.primary,n=void 0===t?{light:jw[300],main:jw[500],dark:jw[700]}:t,r=e.secondary,i=void 0===r?{light:Ww.A200,main:Ww.A400,dark:Ww.A700}:r,o=e.error,a=void 0===o?{light:Hw[300],main:Hw[500],dark:Hw[700]}:o,s=e.warning,u=void 0===s?{light:Vw[300],main:Vw[500],dark:Vw[700]}:s,l=e.info,c=void 0===l?{light:Gw[300],main:Gw[500],dark:Gw[700]}:l,d=e.success,h=void 0===d?{light:Uw[300],main:Uw[500],dark:Uw[700]}:d,f=e.type,p=void 0===f?"light":f,m=e.contrastThreshold,g=void 0===m?3:m,v=e.tonalOffset,y=void 0===v?.2:v,b=gv(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function w(e){var t=function(e,t){var n=qw(e),r=qw(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,ex.text.primary)>=g?ex.text.primary:$w.text.primary;return t}var x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=(0,pv.Z)({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(Bw(4,t));if("string"!==typeof e.main)throw new Error(Bw(5,JSON.stringify(e.main)));return tx(e,"light",n,y),tx(e,"dark",r,y),e.contrastText||(e.contrastText=w(e.main)),e},_={dark:ex,light:$w};return Cw((0,pv.Z)({common:Lw,type:p,primary:x(n),secondary:x(i,"A400","A200","A700"),error:x(a),warning:x(u),info:x(c),success:x(h),grey:zw,contrastThreshold:g,getContrastText:w,augmentColor:x,tonalOffset:y},_[p]),b)}function rx(e){return Math.round(1e5*e)/1e5}function ix(e){return rx(e)}var ox={textTransform:"uppercase"},ax='"Roboto", "Helvetica", "Arial", sans-serif';function sx(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,i=void 0===r?ax:r,o=n.fontSize,a=void 0===o?14:o,s=n.fontWeightLight,u=void 0===s?300:s,l=n.fontWeightRegular,c=void 0===l?400:l,d=n.fontWeightMedium,h=void 0===d?500:d,f=n.fontWeightBold,p=void 0===f?700:f,m=n.htmlFontSize,g=void 0===m?16:m,v=n.allVariants,y=n.pxToRem,b=gv(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var w=a/14,x=y||function(e){return"".concat(e/g*w,"rem")},_=function(e,t,n,r,o){return(0,pv.Z)({fontFamily:i,fontWeight:e,fontSize:x(t),lineHeight:n},i===ax?{letterSpacing:"".concat(rx(r/t),"em")}:{},o,v)},C={h1:_(u,96,1.167,-1.5),h2:_(u,60,1.2,-.5),h3:_(c,48,1.167,0),h4:_(c,34,1.235,.25),h5:_(c,24,1.334,0),h6:_(h,20,1.6,.15),subtitle1:_(c,16,1.75,.15),subtitle2:_(h,14,1.57,.1),body1:_(c,16,1.5,.15),body2:_(c,14,1.43,.15),button:_(h,14,1.75,.4,ox),caption:_(c,12,1.66,.4),overline:_(c,12,2.66,1,ox)};return Cw((0,pv.Z)({htmlFontSize:g,pxToRem:x,round:ix,fontFamily:i,fontSize:a,fontWeightLight:u,fontWeightRegular:c,fontWeightMedium:h,fontWeightBold:p},C),b,{clone:!1})}function ux(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var lx=["none",ux(0,2,1,-1,0,1,1,0,0,1,3,0),ux(0,3,1,-2,0,2,2,0,0,1,5,0),ux(0,3,3,-2,0,3,4,0,0,1,8,0),ux(0,2,4,-1,0,4,5,0,0,1,10,0),ux(0,3,5,-1,0,5,8,0,0,1,14,0),ux(0,3,5,-1,0,6,10,0,0,1,18,0),ux(0,4,5,-2,0,7,10,1,0,2,16,1),ux(0,5,5,-3,0,8,10,1,0,3,14,2),ux(0,5,6,-3,0,9,12,1,0,3,16,2),ux(0,6,6,-3,0,10,14,1,0,4,18,3),ux(0,6,7,-4,0,11,15,1,0,4,20,3),ux(0,7,8,-4,0,12,17,2,0,5,22,4),ux(0,7,8,-4,0,13,19,2,0,5,24,4),ux(0,7,9,-4,0,14,21,2,0,5,26,4),ux(0,8,9,-5,0,15,22,2,0,6,28,5),ux(0,8,10,-5,0,16,24,2,0,6,30,5),ux(0,8,11,-5,0,17,26,2,0,6,32,5),ux(0,9,11,-5,0,18,28,2,0,7,34,6),ux(0,9,12,-6,0,19,29,2,0,7,36,6),ux(0,10,13,-6,0,20,31,3,0,8,38,7),ux(0,10,13,-6,0,21,33,3,0,8,40,7),ux(0,10,14,-6,0,22,35,3,0,8,42,7),ux(0,11,14,-7,0,23,36,3,0,9,44,8),ux(0,11,15,-7,0,24,38,3,0,9,46,8)],cx={borderRadius:4},dx={xs:0,sm:600,md:960,lg:1280,xl:1920},hx={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(dx[e],"px)")}};var fx=function(e,t){return t?Cw(e,t,{clone:!1}):e};var px={m:"margin",p:"padding"},mx={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},gx={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},vx=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!gx[e])return[e];e=gx[e]}var t=e.split(""),n=(0,qm.Z)(t,2),r=n[0],i=n[1],o=px[r],a=mx[i]||"";return Array.isArray(a)?a.map((function(e){return o+e})):[o+a]})),yx=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function bx(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function wx(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function xx(e){var t=bx(e.theme);return Object.keys(e).map((function(n){if(-1===yx.indexOf(n))return null;var r=wx(vx(n),t),i=e[n];return function(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||hx;return t.reduce((function(e,i,o){return e[r.up(r.keys[o])]=n(t[o]),e}),{})}if("object"===(0,h.Z)(t)){var i=e.theme.breakpoints||hx;return Object.keys(t).reduce((function(e,r){return e[i.up(r)]=n(t[r]),e}),{})}return n(t)}(e,i,r)})).reduce(fx,{})}xx.propTypes={},xx.filterProps=yx;function _x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=bx({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}var Cx={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Ex={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Sx(e){return"".concat(Math.round(e),"ms")}var Ax={easing:Cx,duration:Ex,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?Ex.standard:n,i=t.easing,o=void 0===i?Cx.easeInOut:i,a=t.delay,s=void 0===a?0:a;gv(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof r?r:Sx(r)," ").concat(o," ").concat("string"===typeof s?s:Sx(s))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},kx={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Ix(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,i=void 0===r?{}:r,o=e.palette,a=void 0===o?{}:o,s=e.spacing,u=e.typography,l=void 0===u?{}:u,c=gv(e,["breakpoints","mixins","palette","spacing","typography"]),d=nx(a),h=Pw(n),f=_x(s),p=Cw({breakpoints:h,direction:"ltr",mixins:Fw(h,f,i),overrides:{},palette:d,props:{},shadows:lx,typography:sx(d,l),spacing:f,shape:cx,transitions:Ax,zIndex:kx},c),m=arguments.length,g=new Array(m>1?m-1:0),v=1;v<m;v++)g[v-1]=arguments[v];return p=g.reduce((function(e,t){return Cw(e,t)}),p)}var Rx=Ix();var Tx=function(e,t){return Dw(e,(0,pv.Z)({defaultTheme:Rx},t))};function Nx(e){if("string"!==typeof e)throw new Error(Bw(7));return e.charAt(0).toUpperCase()+e.slice(1)}var Ox=n(4164);function Dx(e){return e&&e.ownerDocument||document}function Mx(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Px(t,n){return e.useMemo((function(){return null==t&&null==n?null:function(e){Mx(t,e),Mx(n,e)}}),[t,n])}var Fx="undefined"!==typeof window?e.useLayoutEffect:e.useEffect;var Bx=e.forwardRef((function(t,n){var r=t.children,i=t.container,o=t.disablePortal,a=void 0!==o&&o,s=t.onRendered,u=e.useState(null),l=u[0],c=u[1],d=Px(e.isValidElement(r)?r.ref:null,n);return Fx((function(){a||c(function(e){return e="function"===typeof e?e():e,Ox.findDOMNode(e)}(i)||document.body)}),[i,a]),Fx((function(){if(l&&!a)return Mx(n,l),function(){Mx(n,null)}}),[n,l,a]),Fx((function(){s&&(l||a)&&s()}),[s,l,a]),a?e.isValidElement(r)?e.cloneElement(r,{ref:d}):r:l?Ox.createPortal(r,l):l}));function Lx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}var zx="undefined"!==typeof window?e.useLayoutEffect:e.useEffect;function jx(t){var n=e.useRef(t);return zx((function(){n.current=t})),e.useCallback((function(){return n.current.apply(void 0,arguments)}),[])}function Wx(e){var t,n=Dx(e);return n.body===e?(t=n,Dx(t).defaultView||window).innerWidth>n.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Hx(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Vx(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function Gx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,o=[t,n].concat((0,Ym.Z)(r)),a=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===o.indexOf(e)&&-1===a.indexOf(e.tagName)&&Hx(e,i)}))}function Ux(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function Kx(e,t){var n,r=[],i=[],o=e.container;if(!t.disableScrollLock){if(Wx(o)){var a=function(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}();r.push({value:o.style.paddingRight,key:"padding-right",el:o}),o.style["padding-right"]="".concat(Vx(o)+a,"px"),n=Dx(o).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(e){i.push(e.style.paddingRight),e.style.paddingRight="".concat(Vx(e)+a,"px")}))}var s=o.parentElement,u="HTML"===s.nodeName&&"scroll"===window.getComputedStyle(s)["overflow-y"]?s:o;r.push({value:u.style.overflow,key:"overflow",el:u}),u.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(e,t){i[t]?e.style.paddingRight=i[t]:e.style.removeProperty("padding-right")})),r.forEach((function(e){var t=e.value,n=e.el,r=e.key;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var Xx=function(){function e(){i(this,e),this.modals=[],this.containers=[]}return s(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&Hx(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);Gx(t,e.mountNode,e.modalRef,r,!0);var i=Ux(this.containers,(function(e){return e.container===t}));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:r}),n)}},{key:"mount",value:function(e,t){var n=Ux(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=Kx(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=Ux(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&Hx(e.modalRef,!0),Gx(r.container,e.mountNode,e.modalRef,r.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var i=r.modals[r.modals.length-1];i.modalRef&&Hx(i.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();var Zx=function(t){var n=t.children,r=t.disableAutoFocus,i=void 0!==r&&r,o=t.disableEnforceFocus,a=void 0!==o&&o,s=t.disableRestoreFocus,u=void 0!==s&&s,l=t.getDoc,c=t.isEnabled,d=t.open,h=e.useRef(),f=e.useRef(null),p=e.useRef(null),m=e.useRef(),g=e.useRef(null),v=e.useCallback((function(e){g.current=Ox.findDOMNode(e)}),[]),y=Px(n.ref,v),b=e.useRef();return e.useEffect((function(){b.current=d}),[d]),!b.current&&d&&"undefined"!==typeof window&&(m.current=l().activeElement),e.useEffect((function(){if(d){var e=Dx(g.current);i||!g.current||g.current.contains(e.activeElement)||(g.current.hasAttribute("tabIndex")||g.current.setAttribute("tabIndex",-1),g.current.focus());var t=function(){null!==g.current&&(e.hasFocus()&&!a&&c()&&!h.current?g.current&&!g.current.contains(e.activeElement)&&g.current.focus():h.current=!1)},n=function(t){!a&&c()&&9===t.keyCode&&e.activeElement===g.current&&(h.current=!0,t.shiftKey?p.current.focus():f.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",n,!0);var r=setInterval((function(){t()}),50);return function(){clearInterval(r),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",n,!0),u||(m.current&&m.current.focus&&m.current.focus(),m.current=null)}}}),[i,a,u,c,d]),e.createElement(e.Fragment,null,e.createElement("div",{tabIndex:0,ref:f,"data-test":"sentinelStart"}),e.cloneElement(n,{ref:y}),e.createElement("div",{tabIndex:0,ref:p,"data-test":"sentinelEnd"}))},qx={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},Yx=e.forwardRef((function(t,n){var r=t.invisible,i=void 0!==r&&r,o=t.open,a=gv(t,["invisible","open"]);return o?e.createElement("div",(0,pv.Z)({"aria-hidden":!0,ref:n},a,{style:(0,pv.Z)({},qx.root,i?qx.invisible:{},a.style)})):null}));var Jx=new Xx,Qx=e.forwardRef((function(t,n){var r=zy(),i=Ow({name:"MuiModal",props:(0,pv.Z)({},t),theme:r}),o=i.BackdropComponent,a=void 0===o?Yx:o,s=i.BackdropProps,u=i.children,l=i.closeAfterTransition,c=void 0!==l&&l,d=i.container,h=i.disableAutoFocus,f=void 0!==h&&h,p=i.disableBackdropClick,m=void 0!==p&&p,g=i.disableEnforceFocus,v=void 0!==g&&g,y=i.disableEscapeKeyDown,b=void 0!==y&&y,w=i.disablePortal,x=void 0!==w&&w,_=i.disableRestoreFocus,C=void 0!==_&&_,E=i.disableScrollLock,S=void 0!==E&&E,A=i.hideBackdrop,k=void 0!==A&&A,I=i.keepMounted,R=void 0!==I&&I,T=i.manager,N=void 0===T?Jx:T,O=i.onBackdropClick,D=i.onClose,M=i.onEscapeKeyDown,P=i.onRendered,F=i.open,B=gv(i,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),L=e.useState(!0),z=L[0],j=L[1],W=e.useRef({}),H=e.useRef(null),V=e.useRef(null),G=Px(V,n),U=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(i),K=function(){return Dx(H.current)},X=function(){return W.current.modalRef=V.current,W.current.mountNode=H.current,W.current},Z=function(){N.mount(X(),{disableScrollLock:S}),V.current.scrollTop=0},q=jx((function(){var e=function(e){return e="function"===typeof e?e():e,Ox.findDOMNode(e)}(d)||K().body;N.add(X(),e),V.current&&Z()})),Y=e.useCallback((function(){return N.isTopModal(X())}),[N]),J=jx((function(e){H.current=e,e&&(P&&P(),F&&Y()?Z():Hx(V.current,!0))})),Q=e.useCallback((function(){N.remove(X())}),[N]);if(e.useEffect((function(){return function(){Q()}}),[Q]),e.useEffect((function(){F?q():U&&c||Q()}),[F,Q,U,c,q]),!R&&!F&&(!U||z))return null;var $=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(r||{zIndex:kx}),ee={};return void 0===u.props.tabIndex&&(ee.tabIndex=u.props.tabIndex||"-1"),U&&(ee.onEnter=Lx((function(){j(!1)}),u.props.onEnter),ee.onExited=Lx((function(){j(!0),c&&Q()}),u.props.onExited)),e.createElement(Bx,{ref:J,container:d,disablePortal:x},e.createElement("div",(0,pv.Z)({ref:G,onKeyDown:function(e){"Escape"===e.key&&Y()&&(M&&M(e),b||(e.stopPropagation(),D&&D(e,"escapeKeyDown")))},role:"presentation"},B,{style:(0,pv.Z)({},$.root,!F&&z?$.hidden:{},B.style)}),k?null:e.createElement(a,(0,pv.Z)({open:F,onClick:function(e){e.target===e.currentTarget&&(O&&O(e),!m&&D&&D(e,"backdropClick"))}},s)),e.createElement(Zx,{disableEnforceFocus:v,disableAutoFocus:f,disableRestoreFocus:C,getDoc:K,isEnabled:Y,open:F},e.cloneElement(u,ee))))})),$x=!1,e_=e.createContext(null),t_="unmounted",n_="exited",r_="entering",i_="entered",o_="exiting",a_=function(t){function n(e,n){var r;r=t.call(this,e,n)||this;var i,o=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?o?(i=n_,r.appearStatus=r_):i=i_:i=e.unmountOnExit||e.mountOnEnter?t_:n_,r.state={status:i},r.nextCallback=null,r}Cv(n,t),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===t_?{status:n_}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==r_&&n!==i_&&(t=r_):n!==r_&&n!==i_||(t=o_)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===r_){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Ox.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===n_&&this.setState({status:t_})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[Ox.findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),u=r?s.appear:s.enter;!e&&!n||$x?this.safeSetState({status:i_},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:r_},(function(){t.props.onEntering(o,a),t.onTransitionEnd(u,(function(){t.safeSetState({status:i_},(function(){t.props.onEntered(o,a)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Ox.findDOMNode(this);t&&!$x?(this.props.onExit(r),this.safeSetState({status:o_},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:n_},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:n_},(function(){e.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Ox.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var t=this.state.status;if(t===t_)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,mv.Z)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(e_.Provider,{value:null},"function"===typeof r?r(t,i):e.cloneElement(e.Children.only(r),i))},n}(e.Component);function s_(){}a_.contextType=e_,a_.propTypes={},a_.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:s_,onEntering:s_,onEntered:s_,onExit:s_,onExiting:s_,onExited:s_},a_.UNMOUNTED=t_,a_.EXITED=n_,a_.ENTERING=r_,a_.ENTERED=i_,a_.EXITING=o_;var u_=a_;function l_(e,t){var n=e.timeout,r=e.style,i=void 0===r?{}:r;return{duration:i.transitionDuration||"number"===typeof n?n:n[t.mode]||0,delay:i.transitionDelay}}var c_={entering:{opacity:1},entered:{opacity:1}},d_={enter:Ex.enteringScreen,exit:Ex.leavingScreen},h_=e.forwardRef((function(t,n){var r=t.children,i=t.disableStrictModeCompat,o=void 0!==i&&i,a=t.in,s=t.onEnter,u=t.onEntered,l=t.onEntering,c=t.onExit,d=t.onExited,h=t.onExiting,f=t.style,p=t.TransitionComponent,m=void 0===p?u_:p,g=t.timeout,v=void 0===g?d_:g,y=gv(t,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","TransitionComponent","timeout"]),b=zy()||Rx,w=b.unstable_strictMode&&!o,x=e.useRef(null),_=Px(r.ref,n),C=Px(w?x:void 0,_),E=function(e){return function(t,n){if(e){var r=w?[x.current,t]:[t,n],i=(0,qm.Z)(r,2),o=i[0],a=i[1];void 0===a?e(o):e(o,a)}}},S=E(l),A=E((function(e,t){!function(e){e.scrollTop}(e);var n=l_({style:f,timeout:v},{mode:"enter"});e.style.webkitTransition=b.transitions.create("opacity",n),e.style.transition=b.transitions.create("opacity",n),s&&s(e,t)})),k=E(u),I=E(h),R=E((function(e){var t=l_({style:f,timeout:v},{mode:"exit"});e.style.webkitTransition=b.transitions.create("opacity",t),e.style.transition=b.transitions.create("opacity",t),c&&c(e)})),T=E(d);return e.createElement(m,(0,pv.Z)({appear:!0,in:a,nodeRef:w?x:void 0,onEnter:A,onEntered:k,onEntering:S,onExit:R,onExited:T,onExiting:I,timeout:v},y),(function(t,n){return e.cloneElement(r,(0,pv.Z)({style:(0,pv.Z)({opacity:0,visibility:"exited"!==t||a?void 0:"hidden"},c_[t],f,r.props.style),ref:C},n))}))})),f_=h_,p_=e.forwardRef((function(t,n){var r=t.children,i=t.classes,o=t.className,a=t.invisible,s=void 0!==a&&a,u=t.open,l=t.transitionDuration,c=t.TransitionComponent,d=void 0===c?f_:c,h=gv(t,["children","classes","className","invisible","open","transitionDuration","TransitionComponent"]);return e.createElement(d,(0,pv.Z)({in:u,timeout:l},h),e.createElement("div",{className:(0,yv.Z)(i.root,o,s&&i.invisible),"aria-hidden":!0,ref:n},r))})),m_=Tx({root:{zIndex:-1,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},{name:"MuiBackdrop"})(p_),g_=e.forwardRef((function(t,n){var r=t.classes,i=t.className,o=t.component,a=void 0===o?"div":o,s=t.square,u=void 0!==s&&s,l=t.elevation,c=void 0===l?1:l,d=t.variant,h=void 0===d?"elevation":d,f=gv(t,["classes","className","component","square","elevation","variant"]);return e.createElement(a,(0,pv.Z)({className:(0,yv.Z)(r.root,i,"outlined"===h?r.outlined:r["elevation".concat(c)],!u&&r.rounded),ref:n},f))})),v_=Tx((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),(0,pv.Z)({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(g_),y_={enter:Ex.enteringScreen,exit:Ex.leavingScreen},b_=e.forwardRef((function(t,n){var r=t.BackdropProps,i=t.children,o=t.classes,a=t.className,s=t.disableBackdropClick,u=void 0!==s&&s,l=t.disableEscapeKeyDown,c=void 0!==l&&l,d=t.fullScreen,h=void 0!==d&&d,f=t.fullWidth,p=void 0!==f&&f,m=t.maxWidth,g=void 0===m?"sm":m,v=t.onBackdropClick,y=t.onClose,b=t.onEnter,w=t.onEntered,x=t.onEntering,_=t.onEscapeKeyDown,C=t.onExit,E=t.onExited,S=t.onExiting,A=t.open,k=t.PaperComponent,I=void 0===k?v_:k,R=t.PaperProps,T=void 0===R?{}:R,N=t.scroll,O=void 0===N?"paper":N,D=t.TransitionComponent,M=void 0===D?f_:D,P=t.transitionDuration,F=void 0===P?y_:P,B=t.TransitionProps,L=t["aria-describedby"],z=t["aria-labelledby"],j=gv(t,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),W=e.useRef();return e.createElement(Qx,(0,pv.Z)({className:(0,yv.Z)(o.root,a),BackdropComponent:m_,BackdropProps:(0,pv.Z)({transitionDuration:F},r),closeAfterTransition:!0},u?{disableBackdropClick:u}:{},{disableEscapeKeyDown:c,onEscapeKeyDown:_,onClose:y,open:A,ref:n},j),e.createElement(M,(0,pv.Z)({appear:!0,in:A,timeout:F,onEnter:b,onEntering:x,onEntered:w,onExit:C,onExiting:S,onExited:E,role:"none presentation"},B),e.createElement("div",{className:(0,yv.Z)(o.container,o["scroll".concat(Nx(O))]),onMouseUp:function(e){e.target===e.currentTarget&&e.target===W.current&&(W.current=null,v&&v(e),!u&&y&&y(e,"backdropClick"))},onMouseDown:function(e){W.current=e.target}},e.createElement(I,(0,pv.Z)({elevation:24,role:"dialog","aria-describedby":L,"aria-labelledby":z},T,{className:(0,yv.Z)(o.paper,o["paperScroll".concat(Nx(O))],o["paperWidth".concat(Nx(String(g)))],T.className,h&&o.paperFullScreen,p&&o.paperFullWidth)}),i))))})),w_=Tx((function(e){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(e.breakpoints.values.xs,444),"&$paperScrollBody":(0,vv.Z)({},e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:e.breakpoints.values.sm,"&$paperScrollBody":(0,vv.Z)({},e.breakpoints.down(e.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:e.breakpoints.values.md,"&$paperScrollBody":(0,vv.Z)({},e.breakpoints.down(e.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:e.breakpoints.values.lg,"&$paperScrollBody":(0,vv.Z)({},e.breakpoints.down(e.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:e.breakpoints.values.xl,"&$paperScrollBody":(0,vv.Z)({},e.breakpoints.down(e.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}}),{name:"MuiDialog"})(b_),x_={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},__=e.forwardRef((function(t,n){var r=t.align,i=void 0===r?"inherit":r,o=t.classes,a=t.className,s=t.color,u=void 0===s?"initial":s,l=t.component,c=t.display,d=void 0===c?"initial":c,h=t.gutterBottom,f=void 0!==h&&h,p=t.noWrap,m=void 0!==p&&p,g=t.paragraph,v=void 0!==g&&g,y=t.variant,b=void 0===y?"body1":y,w=t.variantMapping,x=void 0===w?x_:w,_=gv(t,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),C=l||(v?"p":x[b]||x_[b])||"span";return e.createElement(C,(0,pv.Z)({className:(0,yv.Z)(o.root,a,"inherit"!==b&&o[b],"initial"!==u&&o["color".concat(Nx(u))],m&&o.noWrap,f&&o.gutterBottom,v&&o.paragraph,"inherit"!==i&&o["align".concat(Nx(i))],"initial"!==d&&o["display".concat(Nx(d))]),ref:n},_))})),C_=Tx((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(__),E_=e.forwardRef((function(t,n){return e.createElement(C_,(0,pv.Z)({component:"p",variant:"body1",color:"textSecondary",ref:n},t))})),S_=Tx({root:{marginBottom:12}},{name:"MuiDialogContentText"})(E_),A_=e.forwardRef((function(t,n){var r=t.children,i=t.classes,o=t.className,a=t.disableTypography,s=void 0!==a&&a,u=gv(t,["children","classes","className","disableTypography"]);return e.createElement("div",(0,pv.Z)({className:(0,yv.Z)(i.root,o),ref:n},u),s?r:e.createElement(C_,{component:"h2",variant:"h6"},r))})),k_=Tx({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(A_),I_=e.forwardRef((function(t,n){var r=t.disableSpacing,i=void 0!==r&&r,o=t.classes,a=t.className,s=gv(t,["disableSpacing","classes","className"]);return e.createElement("div",(0,pv.Z)({className:(0,yv.Z)(o.root,a,!i&&o.spacing),ref:n},s))})),R_=Tx({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiDialogActions"})(I_),T_=e.forwardRef((function(t,n){var r=t.classes,i=t.className,o=t.dividers,a=void 0!==o&&o,s=gv(t,["classes","className","dividers"]);return e.createElement("div",(0,pv.Z)({className:(0,yv.Z)(r.root,i,a&&r.dividers),ref:n},s))})),N_=Tx((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(T_),O_=!0,D_=!1,M_=null,P_={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function F_(e){e.metaKey||e.altKey||e.ctrlKey||(O_=!0)}function B_(){O_=!1}function L_(){"hidden"===this.visibilityState&&D_&&(O_=!0)}function z_(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return O_||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!P_[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function j_(){D_=!0,window.clearTimeout(M_),M_=window.setTimeout((function(){D_=!1}),100)}function W_(){return{isFocusVisible:z_,onBlurVisible:j_,ref:e.useCallback((function(e){var t,n=Ox.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",F_,!0),t.addEventListener("mousedown",B_,!0),t.addEventListener("pointerdown",B_,!0),t.addEventListener("touchstart",B_,!0),t.addEventListener("visibilitychange",L_,!0))}),[])}}function H_(t,n){var r=Object.create(null);return t&&e.Children.map(t,(function(e){return e})).forEach((function(t){r[t.key]=function(t){return n&&(0,e.isValidElement)(t)?n(t):t}(t)})),r}function V_(e,t,n){return null!=n[t]?n[t]:e.props[t]}function G_(t,n,r){var i=H_(t.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var u in t){if(i[u])for(r=0;r<i[u].length;r++){var l=i[u][r];s[i[u][r]]=n(l)}s[u]=n(u)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(n,i);return Object.keys(o).forEach((function(a){var s=o[a];if((0,e.isValidElement)(s)){var u=a in n,l=a in i,c=n[a],d=(0,e.isValidElement)(c)&&!c.props.in;!l||u&&!d?l||!u||d?l&&u&&(0,e.isValidElement)(c)&&(o[a]=(0,e.cloneElement)(s,{onExited:r.bind(null,s),in:c.props.in,exit:V_(s,"exit",t),enter:V_(s,"enter",t)})):o[a]=(0,e.cloneElement)(s,{in:!1}):o[a]=(0,e.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:V_(s,"exit",t),enter:V_(s,"enter",t)})}})),o}var U_=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},K_=function(t){function n(e,n){var r,i=(r=t.call(this,e,n)||this).handleExited.bind(f(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}Cv(n,t);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(t,n){var r,i,o=n.children,a=n.handleExited;return{children:n.firstRender?(r=t,i=a,H_(r.children,(function(t){return(0,e.cloneElement)(t,{onExited:i.bind(null,t),in:!0,appear:V_(t,"appear",r),enter:V_(t,"enter",r),exit:V_(t,"exit",r)})}))):G_(t,o,a),firstRender:!1}},r.handleExited=function(e,t){var n=H_(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,pv.Z)({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var t=this.props,n=t.component,r=t.childFactory,i=(0,mv.Z)(t,["component","childFactory"]),o=this.state.contextValue,a=U_(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?e.createElement(e_.Provider,{value:o},a):e.createElement(e_.Provider,{value:o},e.createElement(n,i,a))},n}(e.Component);K_.propTypes={},K_.defaultProps={component:"div",childFactory:function(e){return e}};var X_=K_,Z_="undefined"===typeof window?e.useEffect:e.useLayoutEffect;var q_=function(t){var n=t.classes,r=t.pulsate,i=void 0!==r&&r,o=t.rippleX,a=t.rippleY,s=t.rippleSize,u=t.in,l=t.onExited,c=void 0===l?function(){}:l,d=t.timeout,h=e.useState(!1),f=h[0],p=h[1],m=(0,yv.Z)(n.ripple,n.rippleVisible,i&&n.ripplePulsate),g={width:s,height:s,top:-s/2+a,left:-s/2+o},v=(0,yv.Z)(n.child,f&&n.childLeaving,i&&n.childPulsate),y=jx(c);return Z_((function(){if(!u){p(!0);var e=setTimeout(y,d);return function(){clearTimeout(e)}}}),[y,u,d]),e.createElement("span",{className:m,style:g},e.createElement("span",{className:v}))},Y_=e.forwardRef((function(t,n){var r=t.center,i=void 0!==r&&r,o=t.classes,a=t.className,s=gv(t,["center","classes","className"]),u=e.useState([]),l=u[0],c=u[1],d=e.useRef(0),h=e.useRef(null);e.useEffect((function(){h.current&&(h.current(),h.current=null)}),[l]);var f=e.useRef(!1),p=e.useRef(null),m=e.useRef(null),g=e.useRef(null);e.useEffect((function(){return function(){clearTimeout(p.current)}}),[]);var v=e.useCallback((function(t){var n=t.pulsate,r=t.rippleX,i=t.rippleY,a=t.rippleSize,s=t.cb;c((function(t){return[].concat((0,Ym.Z)(t),[e.createElement(q_,{key:d.current,classes:o,timeout:550,pulsate:n,rippleX:r,rippleY:i,rippleSize:a})])})),d.current+=1,h.current=s}),[o]),y=e.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,o=void 0!==r&&r,a=t.center,s=void 0===a?i||t.pulsate:a,u=t.fakeElement,l=void 0!==u&&u;if("mousedown"===e.type&&f.current)f.current=!1;else{"touchstart"===e.type&&(f.current=!0);var c,d,h,y=l?null:g.current,b=y?y.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(b.width/2),d=Math.round(b.height/2);else{var w=e.touches?e.touches[0]:e,x=w.clientX,_=w.clientY;c=Math.round(x-b.left),d=Math.round(_-b.top)}if(s)(h=Math.sqrt((2*Math.pow(b.width,2)+Math.pow(b.height,2))/3))%2===0&&(h+=1);else{var C=2*Math.max(Math.abs((y?y.clientWidth:0)-c),c)+2,E=2*Math.max(Math.abs((y?y.clientHeight:0)-d),d)+2;h=Math.sqrt(Math.pow(C,2)+Math.pow(E,2))}e.touches?null===m.current&&(m.current=function(){v({pulsate:o,rippleX:c,rippleY:d,rippleSize:h,cb:n})},p.current=setTimeout((function(){m.current&&(m.current(),m.current=null)}),80)):v({pulsate:o,rippleX:c,rippleY:d,rippleSize:h,cb:n})}}),[i,v]),b=e.useCallback((function(){y({},{pulsate:!0})}),[y]),w=e.useCallback((function(e,t){if(clearTimeout(p.current),"touchend"===e.type&&m.current)return e.persist(),m.current(),m.current=null,void(p.current=setTimeout((function(){w(e,t)})));m.current=null,c((function(e){return e.length>0?e.slice(1):e})),h.current=t}),[]);return e.useImperativeHandle(n,(function(){return{pulsate:b,start:y,stop:w}}),[b,y,w]),e.createElement("span",(0,pv.Z)({className:(0,yv.Z)(o.root,a),ref:g},s),e.createElement(X_,{component:null,exit:!0},l))})),J_=Tx((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(e.memo(Y_)),Q_=e.forwardRef((function(t,n){var r=t.action,i=t.buttonRef,o=t.centerRipple,a=void 0!==o&&o,s=t.children,u=t.classes,l=t.className,c=t.component,d=void 0===c?"button":c,h=t.disabled,f=void 0!==h&&h,p=t.disableRipple,m=void 0!==p&&p,g=t.disableTouchRipple,v=void 0!==g&&g,y=t.focusRipple,b=void 0!==y&&y,w=t.focusVisibleClassName,x=t.onBlur,_=t.onClick,C=t.onFocus,E=t.onFocusVisible,S=t.onKeyDown,A=t.onKeyUp,k=t.onMouseDown,I=t.onMouseLeave,R=t.onMouseUp,T=t.onTouchEnd,N=t.onTouchMove,O=t.onTouchStart,D=t.onDragLeave,M=t.tabIndex,P=void 0===M?0:M,F=t.TouchRippleProps,B=t.type,L=void 0===B?"button":B,z=gv(t,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),j=e.useRef(null);var W=e.useRef(null),H=e.useState(!1),V=H[0],G=H[1];f&&V&&G(!1);var U=W_(),K=U.isFocusVisible,X=U.onBlurVisible,Z=U.ref;function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return jx((function(r){return t&&t(r),!n&&W.current&&W.current[e](r),!0}))}e.useImperativeHandle(r,(function(){return{focusVisible:function(){G(!0),j.current.focus()}}}),[]),e.useEffect((function(){V&&b&&!m&&W.current.pulsate()}),[m,b,V]);var Y=q("start",k),J=q("stop",D),Q=q("stop",R),$=q("stop",(function(e){V&&e.preventDefault(),I&&I(e)})),ee=q("start",O),te=q("stop",T),ne=q("stop",N),re=q("stop",(function(e){V&&(X(e),G(!1)),x&&x(e)}),!1),ie=jx((function(e){j.current||(j.current=e.currentTarget),K(e)&&(G(!0),E&&E(e)),C&&C(e)})),oe=function(){var e=Ox.findDOMNode(j.current);return d&&"button"!==d&&!("A"===e.tagName&&e.href)},ae=e.useRef(!1),se=jx((function(e){b&&!ae.current&&V&&W.current&&" "===e.key&&(ae.current=!0,e.persist(),W.current.stop(e,(function(){W.current.start(e)}))),e.target===e.currentTarget&&oe()&&" "===e.key&&e.preventDefault(),S&&S(e),e.target===e.currentTarget&&oe()&&"Enter"===e.key&&!f&&(e.preventDefault(),_&&_(e))})),ue=jx((function(e){b&&" "===e.key&&W.current&&V&&!e.defaultPrevented&&(ae.current=!1,e.persist(),W.current.stop(e,(function(){W.current.pulsate(e)}))),A&&A(e),_&&e.target===e.currentTarget&&oe()&&" "===e.key&&!e.defaultPrevented&&_(e)})),le=d;"button"===le&&z.href&&(le="a");var ce={};"button"===le?(ce.type=L,ce.disabled=f):("a"===le&&z.href||(ce.role="button"),ce["aria-disabled"]=f);var de=Px(i,n),he=Px(Z,j),fe=Px(de,he),pe=e.useState(!1),me=pe[0],ge=pe[1];e.useEffect((function(){ge(!0)}),[]);var ve=me&&!m&&!f;return e.createElement(le,(0,pv.Z)({className:(0,yv.Z)(u.root,l,V&&[u.focusVisible,w],f&&u.disabled),onBlur:re,onClick:_,onFocus:ie,onKeyDown:se,onKeyUp:ue,onMouseDown:Y,onMouseLeave:$,onMouseUp:Q,onDragLeave:J,onTouchEnd:te,onTouchMove:ne,onTouchStart:ee,ref:fe,tabIndex:f?-1:P},ce,z),s,ve?e.createElement(J_,(0,pv.Z)({ref:W,center:a},F)):null)})),$_=Tx({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(Q_),eC=e.forwardRef((function(t,n){var r=t.children,i=t.classes,o=t.className,a=t.color,s=void 0===a?"default":a,u=t.component,l=void 0===u?"button":u,c=t.disabled,d=void 0!==c&&c,h=t.disableElevation,f=void 0!==h&&h,p=t.disableFocusRipple,m=void 0!==p&&p,g=t.endIcon,v=t.focusVisibleClassName,y=t.fullWidth,b=void 0!==y&&y,w=t.size,x=void 0===w?"medium":w,_=t.startIcon,C=t.type,E=void 0===C?"button":C,S=t.variant,A=void 0===S?"text":S,k=gv(t,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),I=_&&e.createElement("span",{className:(0,yv.Z)(i.startIcon,i["iconSize".concat(Nx(x))])},_),R=g&&e.createElement("span",{className:(0,yv.Z)(i.endIcon,i["iconSize".concat(Nx(x))])},g);return e.createElement($_,(0,pv.Z)({className:(0,yv.Z)(i.root,i[A],o,"inherit"===s?i.colorInherit:"default"!==s&&i["".concat(A).concat(Nx(s))],"medium"!==x&&[i["".concat(A,"Size").concat(Nx(x))],i["size".concat(Nx(x))]],f&&i.disableElevation,d&&i.disabled,b&&i.fullWidth),component:l,disabled:d,focusRipple:!m,focusVisibleClassName:(0,yv.Z)(i.focusVisible,v),ref:n,type:E},k),e.createElement("span",{className:i.label},I,r,R))})),tC=Tx((function(e){return{root:(0,pv.Z)({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:Yw(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:Yw(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:Yw(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(Yw(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:Yw(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(Yw(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:Yw(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(eC);var nC=function(t){var n=(0,e.useContext)(cv),r=(new Zm).getDialogs(n.language);return(0,hv.jsxs)(w_,{open:t.isOpen,children:[(0,hv.jsx)(k_,{children:t.title}),(0,hv.jsx)(N_,{children:(0,hv.jsx)(S_,{children:t.content})}),(0,hv.jsx)(R_,{children:(0,hv.jsx)(tC,{onClick:t.closeDialog,children:r.close_label})})]})};var rC=function(){var t=(0,e.useContext)(cv),n=new Zm,r=n.getHome(t.language),i=n.getDialogs(t.language),o=n.getHelp(t.language),a=function(){if(/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform))return!0;return!1}()&&!function(){var e=navigator.userAgent;if(e.includes("Safari")&&!e.includes("Chrome")&&!e.includes("Chromium"))return!0;return!1}(),s=(0,e.useState)(a),u=(0,qm.Z)(s,2),l=u[0],c=u[1];return(0,e.useEffect)((function(){var e=document.getElementById("homepage"),t=(new Date).getHours();t>=6&&t<12?e.classList.add("welcome-morning"):t>=12&&t<18?e.classList.add("welcome-afternoon"):t>=18&&t<22?e.classList.add("welcome-evening"):e.classList.add("welcome-night")})),(0,hv.jsxs)("div",{id:"homepage",className:"welcome-background full-screen flex",children:[(0,hv.jsx)(nC,{isOpen:l,closeDialog:function(){c(!1)},title:i.warning,content:i.install_use_safari}),(0,hv.jsx)(fv,{}),(0,hv.jsxs)("div",{className:"flex welcome-box",children:[(0,hv.jsxs)("h1",{className:"center-text welcome-text-large color-primary welcome-text",children:[r.label_1,(0,hv.jsx)("br",{}),r.label_2,(0,hv.jsx)("br",{}),r.label_3]}),(0,hv.jsx)(uv,{to:"/tours",children:(0,hv.jsx)("span",{className:"button center-text display-block margin-top-primary background-primary color-primary welcome-text-button font-weight-primary text-transform-primary",children:r.button_label})})]}),(0,hv.jsx)("div",{className:"help-box flex margin-primary font-weight-primary",children:(0,hv.jsx)(uv,{to:"help",className:"color-secondary center-text",children:o.help})})]})};function iC(){iC=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(R){u=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),s=new A(i||[]);return r(a,"_invoke",{value:_(e,n,s)}),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=l;var d={};function f(){}function p(){}function m(){}var g={};u(g,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(k([])));y&&y!==t&&n.call(y,o)&&(g=y);var b=m.prototype=f.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(r,o,a,s){var u=c(e[r],e,o);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==(0,h.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return i("throw",e,a,s)}))}s(u.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=c(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(x.prototype),u(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new x(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function oC(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function aC(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){oC(o,r,i,a,s,"next",e)}function s(e){oC(o,r,i,a,s,"throw",e)}a(void 0)}))}}var sC=function(t){var n=(0,e.useContext)(cv),r=new Zm,i=r.getNavbar(n.language),o=r.getInstall(n.language),a=r.getDialogs(n.language),s=(0,e.useState)(!1),u=(0,qm.Z)(s,2),l=u[0],c=u[1],d=function(){c(!l)},h=(0,e.useState)(!1),f=(0,qm.Z)(h,2),p=f[0],m=f[1],g=function(){var e=navigator.userAgent;if(e.includes("Safari")&&!e.includes("Chrome")&&!e.includes("Chromium"))return!0;return!1}(),v=function(){if(/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform))return!0;return!1}(),y=Vg(),b=function(){m(!0)},w=function(){m(!1)};function x(){return(x=aC(iC().mark((function e(){var t;return iC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.deferredPrompt){e.next=9;break}return window.deferredPrompt.prompt(),e.next=4,window.deferredPrompt.userChoice;case 4:t=e.sent,"accepted"===t.outcome&&(window.installBannerDisplayed=!1),e.next=10;break;case 9:b();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsxs)(w_,{open:p,onClose:w,children:[(0,hv.jsx)(k_,{children:a.install_download_label}),(0,hv.jsxs)(N_,{children:[(0,hv.jsx)(S_,{children:g?a.install_step_1_safari:a.install_step_1}),(0,hv.jsx)(S_,{children:a.install_step_2}),(0,hv.jsx)(S_,{children:a.install_step_3}),(0,hv.jsx)(S_,{className:"font-weight-primary",children:v&&!g?a.install_use_safari:""})]}),(0,hv.jsx)(R_,{children:(0,hv.jsx)(tC,{onClick:w,children:a.close_label})})]}),(0,hv.jsxs)("header",{id:"header",className:"navigation background-primary stick-top z-index-nav flex-secondary align-items-primary",children:[(0,hv.jsx)("h1",{id:"headerLabel",className:"text-header font-weight-primary color-primary margin-right-primary text-large",children:t.header}),(0,hv.jsxs)("div",{className:"flex-secondary align-items-primary z-index-nav",children:[(0,hv.jsx)(fv,{}),(0,hv.jsxs)("div",{className:"hamburger",onClick:d,children:[(0,hv.jsx)("span",{className:l?"bar hamburger1":"bar"}),(0,hv.jsx)("span",{className:l?"bar hamburger2":"bar"}),(0,hv.jsx)("span",{className:l?"bar hamburger3":"bar"})]})]})]}),(0,hv.jsx)("nav",{id:"navbar",children:(0,hv.jsxs)("ul",{id:"navlist",className:l?"navigation-list font-weight-primary flex navigation-list-active":"navigation-list flex font-weight-primary",onClick:d,children:[(0,hv.jsx)("li",{children:(0,hv.jsx)(lv,{className:"navigation-link-padding text-medium font-weight-primary color-primary",to:"/",children:(0,hv.jsx)("span",{children:i.home})})}),(0,hv.jsx)("li",{children:(0,hv.jsx)(lv,{className:"navigation-link-padding text-medium font-weight-primary color-primary cursor-primary",to:"/other",children:i.menu})}),(0,hv.jsx)("li",{children:(0,hv.jsx)(lv,{className:"navigation-link-padding text-medium font-weight-primary color-primary cursor-primary",to:"/tours",children:i.tours})}),(0,hv.jsx)("li",{children:(0,hv.jsx)(lv,{className:"navigation-link-padding text-medium font-weight-primary color-primary cursor-primary",to:"/rooms_overview",children:i.rooms})}),(0,hv.jsx)("li",{children:(0,hv.jsx)(lv,{className:"navigation-link-padding text-medium font-weight-primary color-primary cursor-primary",onClick:function(){return y(-1)},children:i.back})}),(0,hv.jsx)("li",{className:window.installBannerDisplayed?"background-primary":"display-none",children:(0,hv.jsxs)("div",{className:"flex navigation-link-padding navigation-list-install",children:[(0,hv.jsx)("span",{className:"text-medium color-primary margin-bottom-primary",children:o.install_label}),(0,hv.jsx)("button",{onClick:function(){return x.apply(this,arguments)},id:"downloadButton",className:"margin-secondary background-secondary text-medium button background-primary color-secondary text-transform-primary font-weight-primary",children:o.install})]})})]})})]})},uC=n(5878);var lC=function(e){return(0,hv.jsx)("div",{className:"card box-shadow transition-primary padding-third margin-bottom-primary",children:(0,hv.jsxs)("div",{className:"flex",children:[(0,hv.jsxs)("div",{className:"flex-secondary align-items-primary padding-bottom-primary",children:[(0,hv.jsx)(uC.Z,{className:"icon margin-right-secondary"}),(0,hv.jsx)("span",{className:"font-weight-primary text-medium",children:e.info})]}),(0,hv.jsx)("span",{children:e.content})]})})},cC=n(9212),dC=n(4941);var hC=function(e){return(0,hv.jsx)("span",{className:"margin-primary display-block text-medium button align-self-primary background-primary font-weight-primary color-primary",children:e.button})};var fC=function(e){return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsxs)("div",{className:"padding-bottom-primary position-relative flex",children:[(0,hv.jsx)("img",{src:n(9977)("./img".concat(e.img)),alt:"castle",className:"card-image border-radius-secondary"}),e.children]}),(0,hv.jsx)("h2",{className:"text-medium padding-primary padding-bottom-primary",children:e.title}),(0,hv.jsx)("p",{className:"margin-bottom padding-primary medieval-first-letter padding-bottom-primary",children:e.description})]})};var pC=function(){var t=(0,e.useContext)(cv),n=new Zm,r=n.getTours(t.language),i=n.getHeader(t.language),o=n.getInfo(t.language);return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(sC,{header:i.tours}),(0,hv.jsxs)("div",{className:"content-container",children:[(0,hv.jsx)(lC,{info:o.info,content:o.tours_info}),(0,hv.jsx)("div",{className:"grid-secondary padding-top-primary",children:r.map((function(e){return(0,hv.jsx)(uv,{to:"/rooms",className:"card box-shadow transition-primary hover-primary",children:(0,hv.jsxs)("article",{className:"flex",onClick:function(){return t.setTour(e.tour_id)},children:[(0,hv.jsx)(fC,{img:e.img,title:e.title,description:e.description}),(0,hv.jsxs)("div",{className:"flex-secondary align-items-primary padding-primary padding-bottom-primary",children:[(0,hv.jsx)(dC.Z,{className:"icon margin-right-secondary"}),(0,hv.jsx)("span",{className:"font-weight-primary",children:e.rooms.length+" "+e.rooms_label})]}),(0,hv.jsxs)("div",{className:"flex-secondary align-items-primary padding-primary padding-bottom-primary",children:[(0,hv.jsx)(cC.Z,{className:"icon margin-right-secondary"}),(0,hv.jsx)("span",{className:"font-weight-primary",children:e.time})]}),(0,hv.jsx)(hC,{button:e.button})]})},e.title)}))})]})]})};var mC=function(){var t=(0,e.useContext)(cv),n=(new Zm).getTour(t.language,t.tour);return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(sC,{header:n.title}),(0,hv.jsx)("div",{className:"content-container",children:(0,hv.jsx)("div",{className:"grid",children:n.rooms.map((function(e){return(0,hv.jsx)(uv,{to:"/room",className:"card box-shadow transition-primary hover-primary",onClick:function(){return t.setRoom(e.number)},children:(0,hv.jsxs)("article",{className:"flex",children:[(0,hv.jsx)(fC,{img:e.img,title:e.title,description:e.card_label,children:(0,hv.jsx)("div",{className:"card-number flex round-item",children:(0,hv.jsx)("span",{className:"round-item-content",children:e.number})})}),(0,hv.jsx)(hC,{button:e.button})]})},e.number)}))})})]})},gC=n(8456);n(5913);var vC=function(){var t=(0,e.useContext)(cv),n=new Zm,r=n.getContact(t.language),i=n.getHeader(t.language),o=(0,e.useState)(!1),a=(0,qm.Z)(o,2),s=a[0],u=a[1],l=function(e){window.open(e,"_blank","")};return(0,e.useEffect)((function(){navigator.onLine,u(!1)}),[s]),(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(sC,{header:i.contact}),(0,hv.jsx)("div",{className:"content-container background-secondary padding-secondary box-shadow border-radius-primary",children:(0,hv.jsxs)("div",{className:"contact-box",children:[(0,hv.jsx)("div",{className:"margin-top",children:(0,hv.jsxs)("ul",{className:"contact-list",children:[(0,hv.jsxs)("li",{className:"margin-bottom-primary",children:[(0,hv.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,hv.jsx)("span",{className:"font-weight-primary text-transform-primary margin-right-secondary",children:r.address}),(0,hv.jsx)(gC.Z,{})]}),(0,hv.jsx)("span",{className:"cursor-primary",onClick:function(){return l("https://www.google.com/maps/place/Z%C3%A1mek+Fr%C3%BDdlant/@50.9040814,15.0505186,11.54z/data=!4m6!3m5!1s0x47092e5555ec4efb:0xb81e27103a735e5c!8m2!3d50.9148748!4d15.0837108!16s%2Fg%2F1tftvn_y")},children:"Z\xe1meck\xe1 4001 464 01 Fr\xfddlant"})]}),(0,hv.jsxs)("li",{className:"margin-bottom-primary flex",children:[(0,hv.jsx)("span",{className:"font-weight-primary text-transform-primary margin-right-secondary",children:r.reservation}),(0,hv.jsx)("a",{href:"mailto:zamek.rezervace@seznam.cz",children:"zamek.rezervace@seznam.cz"})]}),(0,hv.jsxs)("li",{className:"margin-bottom-primary",children:[(0,hv.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,hv.jsx)("span",{className:"font-weight-primary text-transform-primary margin-right-secondary",children:r.web}),(0,hv.jsx)(gC.Z,{})]}),(0,hv.jsx)("span",{className:"cursor-primary",onClick:function(){return l("https://www.zamek-frydlant.cz/cs")},children:"www.zamek-frydlant.cz"})]}),(0,hv.jsxs)("li",{className:"margin-bottom-primary flex",children:[(0,hv.jsx)("span",{className:"font-weight-primary text-transform-primary",children:r.phone}),(0,hv.jsx)("a",{href:"tel:771 270 150",children:"+420 771 270 150"})]})]})}),(0,hv.jsx)("div",{className:"map-box",children:(0,hv.jsx)("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d80611.4856216651!2d14.978767699106092!3d50.84766716300532!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47092e5555ec4efb%3A0xb81e27103a735e5c!2zWsOhbWVrIEZyw71kbGFudA!5e0!3m2!1scs!2scz!4v1659987294190!5m2!1scs!2scz",style:{border:0},allowfullscreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"map",title:"map"})})]})})]})};var yC=function(){var t=(0,e.useContext)(cv),n=new Zm,r=n.getInfo(t.language),i=n.getHeader(t.language),o=n.getRoomsOverview(t.language),a=n.getUnvisitedRooms(t.language,t.tour,t.room),s=n.getVisitedRooms(t.language,t.tour,t.room);return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(sC,{header:i.rooms}),(0,hv.jsx)("div",{className:"content-container background-secondary",children:t.tour?(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(lC,{info:r.info,content:r.rooms_overview}),(0,hv.jsx)("h3",{className:s.length?"opacity padding-top-primary padding-bottom-primary":"display-none",children:o.seen}),s.map((function(e){return(0,hv.jsxs)("div",{className:"card flex-secondary align-items-primary margin-bottom-primary box-shadow padding-third opacity",children:[(0,hv.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,hv.jsx)("span",{className:"round-item-content color-primary",children:e.number})}),(0,hv.jsx)("span",{children:e.title})]})})),(0,hv.jsx)("h3",{className:"padding-top-primary padding-bottom-primary",children:a.length?o.not_seen:o.nothing_more}),a.map((function(e){return(0,hv.jsx)(uv,{to:"/room",className:"transition-primary hover-primary card margin-bottom-primary box-shadow padding-third",onClick:function(){return t.setRoom(e.number)},children:(0,hv.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,hv.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,hv.jsx)("span",{className:"round-item-content color-primary",children:e.number})}),(0,hv.jsx)("span",{children:e.title})]})})}))]}):(0,hv.jsx)("span",{className:"padding-third display-block font-weight-primary text-medium",children:o.tour_not_selected})})]})},bC=n(8264),wC=n(7394),xC=n(1542),_C=n(9771),CC=n(345);var EC=function(){var t=(0,e.useContext)(cv),r=new Zm,i=r.getRoom(t.language,t.tour,t.room),o=r.getTour(t.language,t.tour),a=i.number-1>=1,s=i.number+1<=o.rooms.length,u=(0,e.useState)(!1),l=(0,qm.Z)(u,2),c=l[0],d=l[1],h=0,f=0,p=function(){a&&t.setRoom(i.number-1)},m=function(){s&&t.setRoom(i.number+1)};function g(){var e=document.getElementById("audio");navigator.mediaSession.setPositionState({duration:e.duration,playbackRate:e.playbackRate,position:e.currentTime})}return(0,e.useEffect)((function(){window.scrollTo(0,0);var e=r.getRoom(t.language,t.tour,t.room).title.toString(),n=r.getTour(t.language,t.tour).title.toString();if("mediaSession"in navigator){navigator.mediaSession.metadata=new MediaMetadata({title:e,artist:"Audio guide Fr\xfddlant",album:n,artwork:[{src:_C,sizes:"64x64",type:"image/png"},{src:CC,sizes:"128x128",type:"image/png"}]});for(var i=0,o=[["play",function(){l.play()}],["pause",function(){l.pause()}],["previoustrack",function(){d(!0),p()}],["nexttrack",function(){d(!0),m()}],["seekto",function(e){e.fastSeek&&"fastSeek"in l?l.fastSeek(e.seekTime):(l.currentTime=e.seekTime,console.log(e))}]];i<o.length;i++){var a=(0,qm.Z)(o[i],2),s=a[0],u=a[1];try{navigator.mediaSession.setActionHandler(s,u)}catch(h){console.log("The media session action, ".concat(s,", is not supported"))}}var l=document.getElementById("audio");l.onloadedmetadata=function(){g()},l.onseeked=function(){g()},c&&l.play(),d(!1)}}),[t.room]),(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(sC,{header:o.title}),(0,hv.jsxs)("div",{className:"flex content-container background-secondary center-text padding-secondary border-radius-primary box-shadow",onTouchStart:function(e){h=e.changedTouches[0].clientX,f=e.changedTouches[0].clientY},onTouchEnd:function(e){!function(e,t,n,r){console.log("sliding"),Math.abs(n-r)<50&&(e>t+100?m():e+100<t&&p())}(h,e.changedTouches[0].clientX,f,e.changedTouches[0].clientY)},children:[(0,hv.jsxs)("article",{children:[(0,hv.jsx)("div",{className:"flex-secondary",children:(0,hv.jsxs)("div",{className:"margin-right-primary margin-left-primary",children:[(0,hv.jsx)("span",{className:"font-style-primary margin-primary",children:i.number}),(0,hv.jsx)("h2",{className:"text-medium",children:i.title}),(0,hv.jsx)("span",{className:"font-style-primary margin-primary",children:o.title})]})}),(0,hv.jsxs)("div",{className:"margin-top-secondary",children:[(0,hv.jsx)("img",{src:n(9977)("./img".concat(i.img)),alt:"castle",className:"page-image"}),(0,hv.jsx)("audio",{preload:"metadata",id:"audio",controls:!0,src:n(1668)("./audio".concat(i.audio)),className:"page-audio",children:" Your browser does not support the audio element."})]}),(0,hv.jsx)("p",{className:"start-text margin-top-secondary medieval-first-letter",children:i.text})]}),(0,hv.jsxs)("div",{className:"flex-secondary stick-bottom padding-bottom-primary padding-top-primary background-gradient",children:[(0,hv.jsx)("div",{className:"flex round-item background-fourth margin-right-primary ".concat(a?"":" visibility-hidden"),children:(0,hv.jsx)(wC.Z,{className:"round-item-content color-primary margin-top-third cursor-primary",onClick:function(){p()}})}),(0,hv.jsx)(uv,{to:"/scan_room",className:"flex round-item background-fourth",children:(0,hv.jsx)(xC.Z,{className:"round-item-content color-primary margin-top-third cursor-primary"})}),(0,hv.jsx)("div",{className:"flex round-item background-fourth margin-left-primary ".concat(s?"":" visibility-hidden"),children:(0,hv.jsx)(bC.Z,{className:"round-item-content color-primary margin-top-third cursor-primary",onClick:function(){m()}})})]})]})]})};var SC=function(){var t=(0,e.useContext)(cv),n=new Zm,r=n.getHistory(t.language),i=n.getHeader(t.language),o=n.getInfo(t.language);return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(sC,{header:i.history}),(0,hv.jsxs)("div",{className:"content-container",children:[(0,hv.jsx)(lC,{info:o.info,content:o.history_info}),(0,hv.jsx)("div",{className:"grid-secondary padding-top-primary",children:r.map((function(e){return(0,hv.jsx)(uv,{to:e.path,className:"card box-shadow transition-primary hover-primary",children:(0,hv.jsxs)("article",{className:"flex",children:[(0,hv.jsx)(fC,{img:e.img,title:e.title,description:e.card_label}),(0,hv.jsx)(hC,{button:e.button})]})},e.title)}))})]})]})};var AC=function(){var t=(0,e.useContext)(cv),r=new Zm,i=r.getHistoryOverview(t.language),o=r.getHeader(t.language);return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(sC,{header:o.history}),(0,hv.jsx)("div",{className:"flex content-container background-secondary center-text padding-secondary box-shadow border-radius-primary",children:(0,hv.jsxs)("article",{className:"font-size-third ",children:[(0,hv.jsx)("div",{className:"flex-secondary",children:(0,hv.jsxs)("div",{className:"margin-right-primary margin-left-primary",children:[(0,hv.jsx)("span",{className:"font-style-primary margin-primary",children:o.history}),(0,hv.jsx)("h2",{children:i.title}),(0,hv.jsx)("span",{className:"font-style-primary margin-primary",children:i.label})]})}),(0,hv.jsx)("div",{className:"margin-top-secondary",children:(0,hv.jsx)("img",{src:n(9977)("./img".concat(i.img)),alt:"castle",className:"page-image"})}),(0,hv.jsx)("p",{className:"start-text margin-top-secondary medieval-first-letter",children:i.description})]})})]})};var kC=function(){var t=(0,e.useContext)(cv),n=new Zm,r=n.getHouses(t.language),i=n.getHeader(t.language);return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(sC,{header:i.houses}),(0,hv.jsx)("div",{className:"margin-primary content-container",children:(0,hv.jsx)("div",{className:"grid",children:r.map((function(e){return(0,hv.jsx)(uv,{to:"/owners",className:"card box-shadow transition-primary hover-primary",onClick:function(){return t.setHouse(e.title)},children:(0,hv.jsxs)("article",{className:"flex",children:[(0,hv.jsx)(fC,{img:e.img,title:e.title,description:e.description}),(0,hv.jsx)(hC,{button:e.button})]})},e.title)}))})})]})};var IC=function(){var t=(0,e.useContext)(cv),n=(new Zm).getOwners(t.language,t.house);return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(sC,{header:t.house}),(0,hv.jsx)("div",{className:"content-container",children:(0,hv.jsx)("div",{className:"grid",children:n.map((function(e){return(0,hv.jsx)(uv,{to:"/owner",className:"card box-shadow transition-primary hover-primary",onClick:function(){return t.setOwner(e.number)},children:(0,hv.jsxs)("article",{className:"flex",children:[(0,hv.jsx)(fC,{img:e.img,title:e.name,description:e.label}),(0,hv.jsx)(hC,{button:e.button})]})},e.number)}))})})]})};var RC=function(){var t=(0,e.useContext)(cv),r=new Zm,i=r.getOwner(t.language,t.house,t.owner),o=r.getHouse(t.language,t.house),a=i.number-1>=1,s=i.number+1<=o.owners.length,u=0,l=0,c=function(){i.number-1>=1&&t.setOwner(i.number-1)},d=function(){i.number+1<=o.owners.length&&t.setOwner(i.number+1)};return(0,e.useEffect)((function(){window.scrollTo(0,0)})),(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(sC,{header:t.house}),(0,hv.jsxs)("div",{className:"flex content-container background-secondary center-text padding-secondary box-shadow border-radius-primary",onTouchStart:function(e){u=e.changedTouches[0].clientX,l=e.changedTouches[0].clientY},onTouchEnd:function(e){!function(e,t,n,r){Math.abs(n-r)<50&&(e>t+100?d():e+100<t&&c())}(u,e.changedTouches[0].clientX,l,e.changedTouches[0].clientY)},children:[(0,hv.jsxs)("article",{className:"font-size-third medieval-first-letter",children:[(0,hv.jsx)("div",{className:"flex-secondary",children:(0,hv.jsxs)("div",{className:"margin-right-primary margin-left-primary",children:[(0,hv.jsx)("span",{className:"font-style-primary margin-primary",children:o.title}),(0,hv.jsx)("h2",{children:i.name}),(0,hv.jsx)("span",{className:"font-style-primary margin-primary",children:i.years})]})}),(0,hv.jsx)("div",{className:"margin-top-secondary",children:(0,hv.jsx)("img",{src:n(9977)("./img".concat(i.img)),alt:"castle",className:"page-image"})}),(0,hv.jsx)("p",{className:"start-text margin-top-secondary medieval-first-letter",children:i.text})]}),(0,hv.jsxs)("div",{className:"flex-secondary stick-bottom padding-bottom-primary padding-top-primary background-gradient",children:[(0,hv.jsx)("div",{className:"flex round-item background-fourth margin-right-primary ".concat(a?"":" visibility-hidden"),children:(0,hv.jsx)(wC.Z,{className:"round-item-content color-primary margin-top-third cursor-primary",onClick:function(){c()}})}),(0,hv.jsx)("div",{className:"flex round-item background-fourth margin-left-primary ".concat(s?"":" visibility-hidden"),children:(0,hv.jsx)(bC.Z,{className:"round-item-content color-primary margin-top-third cursor-primary",onClick:function(){d()}})})]})]})]})};var TC=function(){var t=(0,e.useContext)(cv),n=new Zm,r=n.getLanguages(),i=n.getHeader(t.language),o=n.getSettings(t.language);return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(sC,{header:i.settings}),(0,hv.jsxs)("section",{className:"content-container background-secondary padding-secondary box-shadow border-radius-primary",children:[(0,hv.jsxs)("div",{children:[(0,hv.jsx)("h2",{className:"padding-bottom-primary text-medium",children:o.letter}),(0,hv.jsxs)("div",{onClick:function(){return t.setFontSize("d")},className:"font-size-default flex-secondary align-items-primary box-shadow transition-primary hover-primary padding-third margin-bottom-primary border-radius-primary cursor-primary",children:[(0,hv.jsx)("span",{className:"margin-right-secondary font-weight-primary",children:"Aa"}),(0,hv.jsx)("span",{children:o.default})]}),(0,hv.jsxs)("div",{onClick:function(){return t.setFontSize("m")},className:"font-size-medium flex-secondary align-items-primary box-shadow transition-primary hover-primary padding-third margin-bottom-primary border-radius-primary cursor-primary",children:[(0,hv.jsx)("span",{className:"margin-right-secondary font-weight-primary",children:"Aa"}),(0,hv.jsx)("span",{children:o.medium})]}),(0,hv.jsxs)("div",{onClick:function(){return t.setFontSize("l")},className:"font-size-large flex-secondary align-items-primary box-shadow transition-primary hover-primary padding-third margin-bottom-primary border-radius-primary cursor-primary",children:[(0,hv.jsx)("span",{className:"margin-right-secondary font-weight-primary",children:"Aa"}),(0,hv.jsx)("span",{children:o.large})]})]}),(0,hv.jsxs)("div",{children:[(0,hv.jsx)("h2",{className:"padding-bottom-primary text-medium",children:o.language_label}),r.map((function(e){return(0,hv.jsx)("div",{onClick:function(){return t.setLanguage(e)},className:"flex-secondary align-items-primary box-shadow transition-primary hover-primary padding-third margin-bottom-primary border-radius-primary cursor-primary",children:(0,hv.jsx)("span",{className:"text-transform-primary font-weight-primary",children:e})})}))]})]})]})},NC=n(3229),OC=n(9065),DC=n(1334),MC=n(7122),PC=n(3742),FC=n(2237),BC=n(7961);var LC=function(){var t=(0,e.useContext)(cv),n=new Zm,r=n.getHeader(t.language),i=n.getOther(t.language);return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(sC,{header:r.menu}),(0,hv.jsxs)("div",{className:"content-container",children:[(0,hv.jsx)(uv,{to:"/history",className:"card box-shadow transition-primary hover-primary padding-third margin-bottom-primary",children:(0,hv.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,hv.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,hv.jsx)(PC.Z,{className:"round-item-content color-primary"})}),(0,hv.jsx)("span",{children:i.history})]})}),(0,hv.jsx)(uv,{to:"/gallery",className:"card box-shadow transition-primary hover-primary padding-third margin-bottom-primary",children:(0,hv.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,hv.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,hv.jsx)(DC.Z,{className:"round-item-content color-primary"})}),(0,hv.jsx)("span",{children:i.gallery})]})}),(0,hv.jsx)(uv,{to:"/image_recognition",className:"card box-shadow transition-primary hover-primary padding-third margin-bottom-primary",children:(0,hv.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,hv.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,hv.jsx)(FC.Z,{className:"round-item-content color-primary"})}),(0,hv.jsx)("span",{children:i.image_recognition})]})}),(0,hv.jsx)(uv,{to:"/scan_room",className:"card box-shadow transition-primary hover-primary padding-third margin-bottom-primary",children:(0,hv.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,hv.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,hv.jsx)(xC.Z,{className:"round-item-content color-primary"})}),(0,hv.jsx)("span",{children:i.scan_room})]})}),(0,hv.jsx)(uv,{to:"/where_to_next",className:"card box-shadow transition-primary hover-primary padding-third margin-bottom-primary",children:(0,hv.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,hv.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,hv.jsx)(OC.Z,{className:"round-item-content color-primary"})}),(0,hv.jsx)("span",{children:i.where_to_next})]})}),(0,hv.jsx)(uv,{to:"/contact",className:"card box-shadow transition-primary hover-primary padding-third margin-bottom-primary",children:(0,hv.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,hv.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,hv.jsx)(NC.Z,{className:"round-item-content color-primary"})}),(0,hv.jsx)("span",{children:i.contact})]})}),(0,hv.jsx)(uv,{to:"/settings",className:"card box-shadow transition-primary hover-primary padding-third margin-bottom-primary",children:(0,hv.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,hv.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,hv.jsx)(MC.Z,{className:"round-item-content color-primary"})}),(0,hv.jsx)("span",{children:i.settings})]})}),(0,hv.jsx)(uv,{to:"/help",className:"card box-shadow transition-primary hover-primary padding-third margin-bottom-primary",children:(0,hv.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,hv.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,hv.jsx)(BC.Z,{className:"round-item-content color-primary"})}),(0,hv.jsx)("span",{children:i.help})]})}),(0,hv.jsx)(uv,{to:"/about_app",className:"card box-shadow transition-primary hover-primary padding-third margin-bottom-primary",children:(0,hv.jsxs)("div",{className:"flex-secondary align-items-primary",children:[(0,hv.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,hv.jsx)(uC.Z,{className:"round-item-content color-primary"})}),(0,hv.jsx)("span",{children:i.about_app})]})})]})]})},zC=n(5920);var jC=function(){var t=(0,e.useContext)(cv),n=new Zm,r=n.getHeader(t.language),i=n.getAboutApp(t.language);return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(sC,{header:r.about_app}),(0,hv.jsxs)("div",{class:"content-container background-secondary padding-secondary box-shadow border-radius-primary",children:[(0,hv.jsx)("div",{className:"flex align-items-primary",children:(0,hv.jsx)("div",{className:"margin-top-secondary",children:(0,hv.jsx)("img",{src:zC,alt:"logo",className:"page-image"})})}),(0,hv.jsx)("div",{class:"contact-box",children:(0,hv.jsx)("div",{className:"margin-top",children:(0,hv.jsxs)("ul",{class:"contact-list",children:[(0,hv.jsxs)("li",{class:"margin-bottom-primary flex",children:[(0,hv.jsx)("span",{class:"font-weight-primary text-transform-primary",children:i.for_label}),(0,hv.jsx)("span",{children:i.for})]}),(0,hv.jsxs)("li",{class:"margin-bottom-primary flex",children:[(0,hv.jsx)("span",{class:"font-weight-primary text-transform-primary",children:i.author_label}),(0,hv.jsx)("span",{children:i.author})]}),(0,hv.jsxs)("li",{class:"margin-bottom-primary flex",children:[(0,hv.jsx)("span",{class:"font-weight-primary text-transform-primary",children:i.collaboration_label}),(0,hv.jsx)("span",{children:i.collaboration})]}),(0,hv.jsxs)("li",{class:"margin-bottom-primary flex",children:[(0,hv.jsx)("span",{class:"font-weight-primary text-transform-primary",children:i.photos_label}),(0,hv.jsx)("span",{children:i.photos1}),(0,hv.jsx)("span",{children:i.photos2})]}),(0,hv.jsxs)("li",{class:"margin-bottom-primary flex",children:[(0,hv.jsx)("span",{class:"font-weight-primary text-transform-primary",children:i.logo_label}),(0,hv.jsx)("span",{children:i.logo})]})]})})})]})]})};var WC=function(){var t=(0,e.useContext)(cv),n=new Zm,r=n.getHeader(t.language),i=n.getInfo(t.language),o=n.getWhereToNext(t.language);return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(sC,{header:r.where_to_next}),(0,hv.jsxs)("div",{className:"content-container",children:[(0,hv.jsx)(lC,{info:i.info,content:i.where_to_info}),(0,hv.jsx)("div",{className:"grid padding-top-primary",children:o.places.map((function(e){return(0,hv.jsx)("a",{className:"card box-shadow transition-primary hover-primary",href:"",onClick:function(){return t=e.url,void window.open(t,"_blank","");var t},children:(0,hv.jsxs)("article",{className:"flex",children:[(0,hv.jsx)(fC,{img:"/castle/castle.jpg",title:e.title,description:e.description,children:(0,hv.jsx)("div",{className:"card-number flex round-item",children:(0,hv.jsx)(gC.Z,{className:"round-item-content",children:e.number})})}),(0,hv.jsx)(hC,{button:o.button})]},e.title)})}))})]})]})};var HC=function(){var t=(0,e.useContext)(cv),r=new Zm,i=r.getTours(t.language),o=r.getHeader(t.language);return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(sC,{header:o.gallery}),(0,hv.jsx)("div",{className:"content-container",children:(0,hv.jsx)("div",{className:"grid-secondary",children:i.map((function(e){return(0,hv.jsx)(uv,{to:"/gallery_rooms",className:"card box-shadow transition-primary hover-primary",children:(0,hv.jsxs)("div",{className:"flex",onClick:function(){return t.setGalleryTour(e.tour_id)},children:[(0,hv.jsx)("img",{src:n(9977)("./img".concat(e.img)),alt:"castle",className:"card-image border-radius-primary",loading:"lazy"}),(0,hv.jsx)("h2",{className:"text-medium gallery-label margin-top-fourth color-primary padding-third",children:e.title})]})},e.title)}))})})]})};var VC=function(){var t=(0,e.useContext)(cv),r=(new Zm).getTour(t.language,t.gallery_tour);return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(sC,{header:r.title}),(0,hv.jsx)("div",{className:"content-container",children:(0,hv.jsx)("div",{className:"grid",children:r.rooms.map((function(e){return(0,hv.jsxs)("div",{className:"flex card box-shadow transition-primary hover-primary",children:[(0,hv.jsx)("img",{src:n(9977)("./img".concat(e.img)),alt:"castle",className:"card-image border-radius-primary"}),(0,hv.jsx)("h2",{className:"text-medium gallery-label margin-top-fourth color-primary padding-third",children:e.title})]},e.title)}))})})]})};var GC=function(){var t=Wg().pathname;return(0,e.useEffect)((function(){window.scrollTo(0,0)}),[t]),null};function UC(e,t){void 0===t&&(t=e.constructor);var n=Error.captureStackTrace;n&&n(e,t)}var KC=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),XC=function(e){function t(t,n){var r=this.constructor,i=e.call(this,t,n)||this;return Object.defineProperty(i,"name",{value:r.name,enumerable:!1,configurable:!0}),function(e,t){var n=Object.setPrototypeOf;n?n(e,t):e.__proto__=t}(i,r.prototype),UC(i),i}return KC(t,e),t}(Error);var ZC,qC=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),YC=function(e){function t(t){void 0===t&&(t=void 0);var n=e.call(this,t)||this;return n.message=t,n}return qC(t,e),t.prototype.getKind=function(){return this.constructor.kind},t.kind="Exception",t}(XC),JC=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),QC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JC(t,e),t.kind="ArgumentException",t}(YC),$C=QC,eE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return eE(t,e),t.kind="IllegalArgumentException",t}(YC),nE=tE,rE=function(){function e(e){if(this.binarizer=e,null===e)throw new nE("Binarizer must be non-null.")}return e.prototype.getWidth=function(){return this.binarizer.getWidth()},e.prototype.getHeight=function(){return this.binarizer.getHeight()},e.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},e.prototype.getBlackMatrix=function(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},e.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},e.prototype.crop=function(t,n,r,i){var o=this.binarizer.getLuminanceSource().crop(t,n,r,i);return new e(this.binarizer.createBinarizer(o))},e.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},e.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new e(this.binarizer.createBinarizer(t))},e.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new e(this.binarizer.createBinarizer(t))},e.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch(v){return""}},e}(),iE=rE,oE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),aE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oE(t,e),t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t}(YC),sE=aE,uE=function(){function e(e){this.source=e}return e.prototype.getLuminanceSource=function(){return this.source},e.prototype.getWidth=function(){return this.source.getWidth()},e.prototype.getHeight=function(){return this.source.getHeight()},e}(),lE=function(){function e(){}return e.arraycopy=function(e,t,n,r,i){for(;i--;)n[r++]=e[t++]},e.currentTimeMillis=function(){return Date.now()},e}(),cE=lE,dE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return dE(t,e),t.kind="IndexOutOfBoundsException",t}(YC),fE=hE,pE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mE=function(e){function t(t,n){void 0===t&&(t=void 0),void 0===n&&(n=void 0);var r=e.call(this,n)||this;return r.index=t,r.message=n,r}return pE(t,e),t.kind="ArrayIndexOutOfBoundsException",t}(fE),gE=mE,vE=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},yE=function(){function e(){}return e.fill=function(e,t){for(var n=0,r=e.length;n<r;n++)e[n]=t},e.fillWithin=function(t,n,r,i){e.rangeCheck(t.length,n,r);for(var o=n;o<r;o++)t[o]=i},e.rangeCheck=function(e,t,n){if(t>n)throw new nE("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new gE(t);if(n>e)throw new gE(n)},e.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},e.create=function(e,t,n){return Array.from({length:e}).map((function(e){return Array.from({length:t}).fill(n)}))},e.createInt32Array=function(e,t,n){return Array.from({length:e}).map((function(e){return Int32Array.from({length:t}).fill(n)}))},e.equals=function(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0},e.hashCode=function(e){var t,n;if(null===e)return 0;var r=1;try{for(var i=vE(e),o=i.next();!o.done;o=i.next()){r=31*r+o.value}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.fillUint8Array=function(e,t){for(var n=0;n!==e.length;n++)e[n]=t},e.copyOf=function(e,t){return e.slice(0,t)},e.copyOfUint8Array=function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)},e.copyOfRange=function(e,t,n){var r=n-t,i=new Int32Array(r);return cE.arraycopy(e,t,i,0,r),i},e.binarySearch=function(t,n,r){void 0===r&&(r=e.numberComparator);for(var i=0,o=t.length-1;i<=o;){var a=o+i>>1,s=r(n,t[a]);if(s>0)i=a+1;else{if(!(s<0))return a;o=a-1}}return-i-1},e.numberComparator=function(e,t){return e-t},e}(),bE=yE,wE=function(){function e(){}return e.numberOfTrailingZeros=function(e){var t;if(0===e)return 32;var n=31;return 0!==(t=e<<16)&&(n-=16,e=t),0!==(t=e<<8)&&(n-=8,e=t),0!==(t=e<<4)&&(n-=4,e=t),0!==(t=e<<2)&&(n-=2,e=t),n-(e<<1>>>31)},e.numberOfLeadingZeros=function(e){if(0===e)return 32;var t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31},e.toHexString=function(e){return e.toString(16)},e.toBinaryString=function(e){return String(parseInt(String(e),2))},e.bitCount=function(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)},e.truncDivision=function(e,t){return Math.trunc(e/t)},e.parseInt=function(e,t){return void 0===t&&(t=void 0),parseInt(e,t)},e.MIN_VALUE_32_BITS=-2147483648,e.MAX_VALUE=Number.MAX_SAFE_INTEGER,e}(),xE=wE,_E=function(){function e(t,n){void 0===t?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,this.bits=void 0===n||null===n?e.makeArray(t):n)}return e.prototype.getSize=function(){return this.size},e.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},e.prototype.ensureCapacity=function(t){if(t>32*this.bits.length){var n=e.makeArray(t);cE.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},e.prototype.get=function(e){return 0!==(this.bits[Math.floor(e/32)]&1<<(31&e))},e.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(31&e)},e.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(31&e)},e.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,r=Math.floor(e/32),i=n[r];i&=~((1<<(31&e))-1);for(var o=n.length;0===i;){if(++r===o)return t;i=n[r]}var a=32*r+xE.numberOfTrailingZeros(i);return a>t?t:a},e.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,r=Math.floor(e/32),i=~n[r];i&=~((1<<(31&e))-1);for(var o=n.length;0===i;){if(++r===o)return t;i=~n[r]}var a=32*r+xE.numberOfTrailingZeros(i);return a>t?t:a},e.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},e.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new nE;if(t!==e){t--;for(var n=Math.floor(e/32),r=Math.floor(t/32),i=this.bits,o=n;o<=r;o++){var a=(2<<(o<r?31:31&t))-(1<<(o>n?0:31&e));i[o]|=a}}},e.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0},e.prototype.isRange=function(e,t,n){if(t<e||e<0||t>this.size)throw new nE;if(t===e)return!0;t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,a=r;a<=i;a++){var s=(2<<(a<i?31:31&t))-(1<<(a>r?0:31&e))&4294967295;if((o[a]&s)!==(n?s:0))return!1}return!0},e.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},e.prototype.appendBits=function(e,t){if(t<0||t>32)throw new nE("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit(1===(e>>n-1&1))},e.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))},e.prototype.xor=function(e){if(this.size!==e.size)throw new nE("Sizes don't match");for(var t=this.bits,n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]},e.prototype.toBytes=function(e,t,n,r){for(var i=0;i<r;i++){for(var o=0,a=0;a<8;a++)this.get(e)&&(o|=1<<7-a),e++;t[n+i]=o}},e.prototype.getBitArray=function(){return this.bits},e.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits,i=0;i<n;i++){var o=r[i];o=(o=(o=(o=(o=o>>1&1431655765|(1431655765&o)<<1)>>2&858993459|(858993459&o)<<2)>>4&252645135|(252645135&o)<<4)>>8&16711935|(16711935&o)<<8)>>16&65535|(65535&o)<<16,e[t-i]=o}if(this.size!==32*n){var a=32*n-this.size,s=e[0]>>>a;for(i=1;i<n;i++){var u=e[i];s|=u<<32-a,e[i-1]=s,s=u>>>a}e[n-1]=s}this.bits=e},e.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.size===n.size&&bE.equals(this.bits,n.bits)},e.prototype.hashCode=function(){return 31*this.size+bE.hashCode(this.bits)},e.prototype.toString=function(){for(var e="",t=0,n=this.size;t<n;t++)0===(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e},e.prototype.clone=function(){return new e(this.size,this.bits.slice())},e}(),CE=_E;!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ASSUME_GS1=7]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(ZC||(ZC={}));var EE,SE=ZC,AE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return AE(t,e),t.getFormatInstance=function(){return new t},t.kind="FormatException",t}(YC),IE=kE,RE=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(EE||(EE={}));var TE,NE=function(){function e(t,n,r){for(var i,o,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];this.valueIdentifier=t,this.name=r,this.values="number"===typeof n?Int32Array.from([n]):n,this.otherEncodingNames=a,e.VALUE_IDENTIFIER_TO_ECI.set(t,this),e.NAME_TO_ECI.set(r,this);for(var u=this.values,l=0,c=u.length;l!==c;l++){var d=u[l];e.VALUES_TO_ECI.set(d,this)}try{for(var h=RE(a),f=h.next();!f.done;f=h.next()){var p=f.value;e.NAME_TO_ECI.set(p,this)}}catch(m){i={error:m}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}}return e.prototype.getValueIdentifier=function(){return this.valueIdentifier},e.prototype.getName=function(){return this.name},e.prototype.getValue=function(){return this.values[0]},e.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new IE("incorect value");var n=e.VALUES_TO_ECI.get(t);if(void 0===n)throw new IE("incorect value");return n},e.getCharacterSetECIByName=function(t){var n=e.NAME_TO_ECI.get(t);if(void 0===n)throw new IE("incorect value");return n},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.getName()===n.getName()},e.VALUE_IDENTIFIER_TO_ECI=new Map,e.VALUES_TO_ECI=new Map,e.NAME_TO_ECI=new Map,e.Cp437=new e(EE.Cp437,Int32Array.from([0,2]),"Cp437"),e.ISO8859_1=new e(EE.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),e.ISO8859_2=new e(EE.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),e.ISO8859_3=new e(EE.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),e.ISO8859_4=new e(EE.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),e.ISO8859_5=new e(EE.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),e.ISO8859_6=new e(EE.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),e.ISO8859_7=new e(EE.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),e.ISO8859_8=new e(EE.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),e.ISO8859_9=new e(EE.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),e.ISO8859_10=new e(EE.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),e.ISO8859_11=new e(EE.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),e.ISO8859_13=new e(EE.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),e.ISO8859_14=new e(EE.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),e.ISO8859_15=new e(EE.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),e.ISO8859_16=new e(EE.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),e.SJIS=new e(EE.SJIS,20,"SJIS","Shift_JIS"),e.Cp1250=new e(EE.Cp1250,21,"Cp1250","windows-1250"),e.Cp1251=new e(EE.Cp1251,22,"Cp1251","windows-1251"),e.Cp1252=new e(EE.Cp1252,23,"Cp1252","windows-1252"),e.Cp1256=new e(EE.Cp1256,24,"Cp1256","windows-1256"),e.UnicodeBigUnmarked=new e(EE.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),e.UTF8=new e(EE.UTF8,26,"UTF8","UTF-8"),e.ASCII=new e(EE.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),e.Big5=new e(EE.Big5,28,"Big5"),e.GB18030=new e(EE.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),e.EUC_KR=new e(EE.EUC_KR,30,"EUC_KR","EUC-KR"),e}(),OE=NE,DE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ME=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return DE(t,e),t.kind="UnsupportedOperationException",t}(YC),PE=ME,FE=function(){function e(){}return e.decode=function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},e.shouldDecodeOnFallback=function(t){return!e.isBrowser()&&"ISO-8859-1"===t},e.encode=function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"===typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)},e.isBrowser=function(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)},e.encodingName=function(e){return"string"===typeof e?e:e.getName()},e.encodingCharacterSet=function(e){return e instanceof OE?e:OE.getCharacterSetECIByName(e)},e.decodeFallback=function(t,n){var r=this.encodingCharacterSet(n);if(e.isDecodeFallbackSupported(r)){for(var i="",o=0,a=t.length;o<a;o++){var s=t[o].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(r.equals(OE.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new PE("Encoding "+this.encodingName(n)+" not supported by fallback.")},e.isDecodeFallbackSupported=function(e){return e.equals(OE.UTF8)||e.equals(OE.ISO8859_1)||e.equals(OE.ASCII)},e.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))).split(""),n=[],r=0;r<t.length;r++)n.push(t[r].charCodeAt(0));return new Uint8Array(n)},e}(),BE=FE,LE=function(){function e(){}return e.castAsNonUtf8Char=function(e,t){void 0===t&&(t=null);var n=t?t.getName():this.ISO88591;return BE.decode(new Uint8Array([e]),n)},e.guessEncoding=function(t,n){if(null!==n&&void 0!==n&&void 0!==n.get(SE.CHARACTER_SET))return n.get(SE.CHARACTER_SET).toString();for(var r=t.length,i=!0,o=!0,a=!0,s=0,u=0,l=0,c=0,d=0,h=0,f=0,p=0,m=0,g=0,v=0,y=t.length>3&&239===t[0]&&187===t[1]&&191===t[2],b=0;b<r&&(i||o||a);b++){var w=255&t[b];a&&(s>0?0===(128&w)?a=!1:s--:0!==(128&w)&&(0===(64&w)?a=!1:(s++,0===(32&w)?u++:(s++,0===(16&w)?l++:(s++,0===(8&w)?c++:a=!1))))),i&&(w>127&&w<160?i=!1:w>159&&(w<192||215===w||247===w)&&v++),o&&(d>0?w<64||127===w||w>252?o=!1:d--:128===w||160===w||w>239?o=!1:w>160&&w<224?(h++,p=0,++f>m&&(m=f)):w>127?(d++,f=0,++p>g&&(g=p)):(f=0,p=0))}return a&&s>0&&(a=!1),o&&d>0&&(o=!1),a&&(y||u+l+c>0)?e.UTF8:o&&(e.ASSUME_SHIFT_JIS||m>=3||g>=3)?e.SHIFT_JIS:i&&o?2===m&&2===h||10*v>=r?e.SHIFT_JIS:e.ISO88591:i?e.ISO88591:o?e.SHIFT_JIS:a?e.UTF8:e.PLATFORM_DEFAULT_ENCODING},e.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=-1;function i(e,n,i,o,a,s){if("%%"===e)return"%";if(void 0!==t[++r]){e=o?parseInt(o.substr(1)):void 0;var u,l=a?parseInt(a.substr(1)):void 0;switch(s){case"s":u=t[r];break;case"c":u=t[r][0];break;case"f":u=parseFloat(t[r]).toFixed(e);break;case"p":u=parseFloat(t[r]).toPrecision(e);break;case"e":u=parseFloat(t[r]).toExponential(e);break;case"x":u=parseInt(t[r]).toString(l||16);break;case"d":u=parseFloat(parseInt(t[r],l||10).toPrecision(e)).toFixed(0)}u="object"===typeof u?JSON.stringify(u):(+u).toString(l);for(var c=parseInt(i),d=i&&i[0]+""==="0"?"0":" ";u.length<c;)u=void 0!==n?u+d:d+u;return u}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},e.getBytes=function(e,t){return BE.encode(e,t)},e.getCharCode=function(e,t){return void 0===t&&(t=0),e.charCodeAt(t)},e.getCharAt=function(e){return String.fromCharCode(e)},e.SHIFT_JIS=OE.SJIS.getName(),e.GB2312="GB2312",e.ISO88591=OE.ISO8859_1.getName(),e.EUC_JP="EUC_JP",e.UTF8=OE.UTF8.getName(),e.PLATFORM_DEFAULT_ENCODING=e.UTF8,e.ASSUME_SHIFT_JIS=!1,e}(),zE=LE,jE=function(){function e(e){void 0===e&&(e=""),this.value=e}return e.prototype.enableDecoding=function(e){return this.encoding=e,this},e.prototype.append=function(e){return"string"===typeof e?this.value+=e.toString():this.encoding?this.value+=zE.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},e.prototype.appendChars=function(e,t,n){for(var r=t;t<t+n;r++)this.append(e[r]);return this},e.prototype.length=function(){return this.value.length},e.prototype.charAt=function(e){return this.value.charAt(e)},e.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},e.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},e.prototype.substring=function(e,t){return this.value.substring(e,t)},e.prototype.setLengthToZero=function(){this.value=""},e.prototype.toString=function(){return this.value},e.prototype.insert=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)},e}(),WE=jE,HE=function(){function e(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,void 0!==t&&null!==t||(t=e),this.height=t,e<1||t<1)throw new nE("Both dimensions must be greater than 0");void 0!==n&&null!==n||(n=Math.floor((e+31)/32)),this.rowSize=n,void 0!==r&&null!==r||(this.bits=new Int32Array(this.rowSize*this.height))}return e.parseFromBooleanArray=function(t){for(var n=t.length,r=t[0].length,i=new e(r,n),o=0;o<n;o++)for(var a=t[o],s=0;s<r;s++)a[s]&&i.set(s,o);return i},e.parseFromString=function(t,n,r){if(null===t)throw new nE("stringRepresentation cannot be null");for(var i=new Array(t.length),o=0,a=0,s=-1,u=0,l=0;l<t.length;)if("\n"===t.charAt(l)||"\r"===t.charAt(l)){if(o>a){if(-1===s)s=o-a;else if(o-a!==s)throw new nE("row lengths do not match");a=o,u++}l++}else if(t.substring(l,l+n.length)===n)l+=n.length,i[o]=!0,o++;else{if(t.substring(l,l+r.length)!==r)throw new nE("illegal character encountered: "+t.substring(l));l+=r.length,i[o]=!1,o++}if(o>a){if(-1===s)s=o-a;else if(o-a!==s)throw new nE("row lengths do not match");u++}for(var c=new e(s,u),d=0;d<o;d++)i[d]&&c.set(Math.floor(d%s),Math.floor(d/s));return c},e.prototype.get=function(e,t){var n=t*this.rowSize+Math.floor(e/32);return 0!==(this.bits[n]>>>(31&e)&1)},e.prototype.set=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295},e.prototype.unset=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)},e.prototype.flip=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295},e.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new nE("input matrix dimensions do not match");for(var t=new CE(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits,i=0,o=this.height;i<o;i++)for(var a=i*n,s=e.getRow(i,t).getBitArray(),u=0;u<n;u++)r[a+u]^=s[u]},e.prototype.clear=function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0},e.prototype.setRegion=function(e,t,n,r){if(t<0||e<0)throw new nE("Left and top must be nonnegative");if(r<1||n<1)throw new nE("Height and width must be at least 1");var i=e+n,o=t+r;if(o>this.height||i>this.width)throw new nE("The region must fit inside the matrix");for(var a=this.rowSize,s=this.bits,u=t;u<o;u++)for(var l=u*a,c=e;c<i;c++)s[l+Math.floor(c/32)]|=1<<(31&c)&4294967295},e.prototype.getRow=function(e,t){null===t||void 0===t||t.getSize()<this.width?t=new CE(this.width):t.clear();for(var n=this.rowSize,r=this.bits,i=e*n,o=0;o<n;o++)t.setBulk(32*o,r[i+o]);return t},e.prototype.setRow=function(e,t){cE.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},e.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),n=new CE(e),r=new CE(e),i=0,o=Math.floor((t+1)/2);i<o;i++)n=this.getRow(i,n),r=this.getRow(t-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(t-1-i,n)},e.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,n=this.rowSize,r=this.bits,i=e,o=t,a=-1,s=-1,u=0;u<t;u++)for(var l=0;l<n;l++){var c=r[u*n+l];if(0!==c){if(u<o&&(o=u),u>s&&(s=u),32*l<i){for(var d=0;0===(c<<31-d&4294967295);)d++;32*l+d<i&&(i=32*l+d)}if(32*l+31>a){for(d=31;c>>>d===0;)d--;32*l+d>a&&(a=32*l+d)}}}return a<i||s<o?null:Int32Array.from([i,o,a-i+1,s-o+1])},e.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&0===t[n];)n++;if(n===t.length)return null;for(var r=n/e,i=n%e*32,o=t[n],a=0;0===(o<<31-a&4294967295);)a++;return i+=a,Int32Array.from([i,r])},e.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&0===t[n];)n--;if(n<0)return null;for(var r=Math.floor(n/e),i=32*Math.floor(n%e),o=t[n],a=31;o>>>a===0;)a--;return i+=a,Int32Array.from([i,r])},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getRowSize=function(){return this.rowSize},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&bE.equals(this.bits,n.bits)},e.prototype.hashCode=function(){var e=this.width;return e=31*(e=31*(e=31*(e=31*e+this.width)+this.height)+this.rowSize)+bE.hashCode(this.bits)},e.prototype.toString=function(e,t,n){return void 0===e&&(e="X "),void 0===t&&(t="  "),void 0===n&&(n="\n"),this.buildToString(e,t,n)},e.prototype.buildToString=function(e,t,n){for(var r=new WE,i=0,o=this.height;i<o;i++){for(var a=0,s=this.width;a<s;a++)r.append(this.get(a,i)?e:t);r.append(n)}return r.toString()},e.prototype.clone=function(){return new e(this.width,this.height,this.rowSize,this.bits.slice())},e}(),VE=HE,GE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),UE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return GE(t,e),t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t}(YC),KE=UE,XE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZE=function(e){function t(n){var r=e.call(this,n)||this;return r.luminances=t.EMPTY,r.buckets=new Int32Array(t.LUMINANCE_BUCKETS),r}return XE(t,e),t.prototype.getBlackRow=function(e,n){var r=this.getLuminanceSource(),i=r.getWidth();void 0===n||null===n||n.getSize()<i?n=new CE(i):n.clear(),this.initArrays(i);for(var o=r.getRow(e,this.luminances),a=this.buckets,s=0;s<i;s++)a[(255&o[s])>>t.LUMINANCE_SHIFT]++;var u=t.estimateBlackPoint(a);if(i<3)for(s=0;s<i;s++)(255&o[s])<u&&n.set(s);else{var l=255&o[0],c=255&o[1];for(s=1;s<i-1;s++){var d=255&o[s+1];(4*c-l-d)/2<u&&n.set(s),l=c,c=d}}return n},t.prototype.getBlackMatrix=function(){var e=this.getLuminanceSource(),n=e.getWidth(),r=e.getHeight(),i=new VE(n,r);this.initArrays(n);for(var o=this.buckets,a=1;a<5;a++)for(var s=Math.floor(r*a/5),u=e.getRow(s,this.luminances),l=Math.floor(4*n/5),c=Math.floor(n/5);c<l;c++){o[(255&u[c])>>t.LUMINANCE_SHIFT]++}var d=t.estimateBlackPoint(o),h=e.getMatrix();for(a=0;a<r;a++){var f=a*n;for(c=0;c<n;c++){(255&h[f+c])<d&&i.set(c,a)}}return i},t.prototype.createBinarizer=function(e){return new t(e)},t.prototype.initArrays=function(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));for(var n=this.buckets,r=0;r<t.LUMINANCE_BUCKETS;r++)n[r]=0},t.estimateBlackPoint=function(e){for(var n=e.length,r=0,i=0,o=0,a=0;a<n;a++)e[a]>o&&(i=a,o=e[a]),e[a]>r&&(r=e[a]);var s=0,u=0;for(a=0;a<n;a++){var l=a-i;(f=e[a]*l*l)>u&&(s=a,u=f)}if(i>s){var c=i;i=s,s=c}if(s-i<=n/16)throw new KE;var d=s-1,h=-1;for(a=s-1;a>i;a--){var f,p=a-i;(f=p*p*(s-a)*(r-e[a]))>h&&(d=a,h=f)}return d<<t.LUMINANCE_SHIFT},t.LUMINANCE_BITS=5,t.LUMINANCE_SHIFT=8-t.LUMINANCE_BITS,t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t}(uE),qE=ZE,YE=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),JE=function(e){function t(t){var n=e.call(this,t)||this;return n.matrix=null,n}return YE(t,e),t.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight();if(r>=t.MINIMUM_DIMENSION&&i>=t.MINIMUM_DIMENSION){var o=n.getMatrix(),a=r>>t.BLOCK_SIZE_POWER;0!==(r&t.BLOCK_SIZE_MASK)&&a++;var s=i>>t.BLOCK_SIZE_POWER;0!==(i&t.BLOCK_SIZE_MASK)&&s++;var u=t.calculateBlackPoints(o,a,s,r,i),l=new VE(r,i);t.calculateThresholdForBlock(o,a,s,r,i,u,l),this.matrix=l}else this.matrix=e.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(e){return new t(e)},t.calculateThresholdForBlock=function(e,n,r,i,o,a,s){for(var u=o-t.BLOCK_SIZE,l=i-t.BLOCK_SIZE,c=0;c<r;c++){var d=c<<t.BLOCK_SIZE_POWER;d>u&&(d=u);for(var h=t.cap(c,2,r-3),f=0;f<n;f++){var p=f<<t.BLOCK_SIZE_POWER;p>l&&(p=l);for(var m=t.cap(f,2,n-3),g=0,v=-2;v<=2;v++){var y=a[h+v];g+=y[m-2]+y[m-1]+y[m]+y[m+1]+y[m+2]}var b=g/25;t.thresholdBlock(e,p,d,b,i,s)}}},t.cap=function(e,t,n){return e<t?t:e>n?n:e},t.thresholdBlock=function(e,n,r,i,o,a){for(var s=0,u=r*o+n;s<t.BLOCK_SIZE;s++,u+=o)for(var l=0;l<t.BLOCK_SIZE;l++)(255&e[u+l])<=i&&a.set(n+l,r+s)},t.calculateBlackPoints=function(e,n,r,i,o){for(var a=o-t.BLOCK_SIZE,s=i-t.BLOCK_SIZE,u=new Array(r),l=0;l<r;l++){u[l]=new Int32Array(n);var c=l<<t.BLOCK_SIZE_POWER;c>a&&(c=a);for(var d=0;d<n;d++){var h=d<<t.BLOCK_SIZE_POWER;h>s&&(h=s);for(var f=0,p=255,m=0,g=0,v=c*i+h;g<t.BLOCK_SIZE;g++,v+=i){for(var y=0;y<t.BLOCK_SIZE;y++){var b=255&e[v+y];f+=b,b<p&&(p=b),b>m&&(m=b)}if(m-p>t.MIN_DYNAMIC_RANGE)for(g++,v+=i;g<t.BLOCK_SIZE;g++,v+=i)for(y=0;y<t.BLOCK_SIZE;y++)f+=255&e[v+y]}var w=f>>2*t.BLOCK_SIZE_POWER;if(m-p<=t.MIN_DYNAMIC_RANGE&&(w=p/2,l>0&&d>0)){var x=(u[l-1][d]+2*u[l][d-1]+u[l-1][d-1])/4;p<x&&(w=x)}u[l][d]=w}}return u},t.BLOCK_SIZE_POWER=3,t.BLOCK_SIZE=1<<t.BLOCK_SIZE_POWER,t.BLOCK_SIZE_MASK=t.BLOCK_SIZE-1,t.MINIMUM_DIMENSION=5*t.BLOCK_SIZE,t.MIN_DYNAMIC_RANGE=24,t}(qE),QE=JE,$E=function(){function e(e,t){this.width=e,this.height=t}return e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.isCropSupported=function(){return!1},e.prototype.crop=function(e,t,n,r){throw new PE("This luminance source does not support cropping.")},e.prototype.isRotateSupported=function(){return!1},e.prototype.rotateCounterClockwise=function(){throw new PE("This luminance source does not support rotation by 90 degrees.")},e.prototype.rotateCounterClockwise45=function(){throw new PE("This luminance source does not support rotation by 45 degrees.")},e.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new WE,n=0;n<this.height;n++){for(var r=this.getRow(n,e),i=0;i<this.width;i++){var o=255&r[i],a=void 0;a=o<64?"#":o<128?"+":o<192?".":" ",t.append(a)}t.append("\n")}return t.toString()},e}(),eS=$E,tS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nS=function(e){function t(t){var n=e.call(this,t.getWidth(),t.getHeight())||this;return n.delegate=t,n}return tS(t,e),t.prototype.getRow=function(e,t){for(var n=this.delegate.getRow(e,t),r=this.getWidth(),i=0;i<r;i++)n[i]=255-(255&n[i]);return n},t.prototype.getMatrix=function(){for(var e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t),r=0;r<t;r++)n[r]=255-(255&e[r]);return n},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(e,n,r,i){return new t(this.delegate.crop(e,n,r,i))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t}(eS),rS=nS,iS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oS=function(e){function t(n){var r=e.call(this,n.width,n.height)||this;return r.canvas=n,r.tempCanvasElement=null,r.buffer=t.makeBufferFromCanvasImageData(n),r}return iS(t,e),t.makeBufferFromCanvasImageData=function(e){var n=e.getContext("2d").getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(n.data,e.width,e.height)},t.toGrayscaleBuffer=function(e,t,n){for(var r=new Uint8ClampedArray(t*n),i=0,o=0,a=e.length;i<a;i+=4,o++){var s=void 0;if(0===e[i+3])s=255;else s=306*e[i]+601*e[i+1]+117*e[i+2]+512>>10;r[o]=s}return r},t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new nE("Requested row is outside the image: "+e);var n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(t,n,r,i){return e.prototype.crop.call(this,t,n,r,i),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var n=this.getTempCanvasElement(),r=n.getContext("2d"),i=e*t.DEGREE_TO_RADIANS,o=this.canvas.width,a=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*a),u=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*a);return n.width=s,n.height=u,r.translate(s/2,u/2),r.rotate(i),r.drawImage(this.canvas,o/-2,a/-2),this.buffer=t.makeBufferFromCanvasImageData(n),this},t.prototype.invert=function(){return new rS(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t}(eS),aS=function(){function e(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}return e.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},e}(),sS=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(v){o(v)}}function s(e){try{u(r.throw(e))}catch(v){o(v)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},uS=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(v){o=[6,v],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},lS=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cS=function(){function e(e,t,n){void 0===t&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(e.prototype,"hasNavigator",{get:function(){return"undefined"!==typeof navigator},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),e.prototype.listVideoInputDevices=function(){return sS(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u,l,c,d;return uS(this,(function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(n=lS(e),r=n.next();!r.done;r=n.next())i=r.value,"videoinput"===(o="video"===i.kind?"videoinput":i.kind)&&(a=i.deviceId||i.id,s=i.label||"Video device "+(t.length+1),u=i.groupId,l={deviceId:a,label:s,kind:o,groupId:u},t.push(l))}catch(f){c={error:f}}finally{try{r&&!r.done&&(d=n.return)&&d.call(n)}finally{if(c)throw c.error}}return[2,t]}}))}))},e.prototype.getVideoInputDevices=function(){return sS(this,void 0,void 0,(function(){return uS(this,(function(e){switch(e.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,e.sent().map((function(e){return new aS(e.deviceId,e.label)}))]}}))}))},e.prototype.findDeviceById=function(e){return sS(this,void 0,void 0,(function(){var t;return uS(this,(function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(t=n.sent())?[2,t.find((function(t){return t.deviceId===e}))]:[2,null]}}))}))},e.prototype.decodeFromInputVideoDevice=function(e,t){return sS(this,void 0,void 0,(function(){return uS(this,(function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.decodeOnceFromVideoDevice=function(e,t){return sS(this,void 0,void 0,(function(){var n;return uS(this,(function(r){switch(r.label){case 0:return this.reset(),n={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(n,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.decodeOnceFromConstraints=function(e,t){return sS(this,void 0,void 0,(function(){var n;return uS(this,(function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=r.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,r.sent()]}}))}))},e.prototype.decodeOnceFromStream=function(e,t){return sS(this,void 0,void 0,(function(){var n;return uS(this,(function(r){switch(r.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=r.sent(),[4,this.decodeOnce(n)];case 2:return[2,r.sent()]}}))}))},e.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,n){return sS(this,void 0,void 0,(function(){return uS(this,(function(r){switch(r.label){case 0:return[4,this.decodeFromVideoDevice(e,t,n)];case 1:return[2,r.sent()]}}))}))},e.prototype.decodeFromVideoDevice=function(e,t,n){return sS(this,void 0,void 0,(function(){var r;return uS(this,(function(i){switch(i.label){case 0:return r={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(r,t,n)];case 1:return[2,i.sent()]}}))}))},e.prototype.decodeFromConstraints=function(e,t,n){return sS(this,void 0,void 0,(function(){var r;return uS(this,(function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeFromStream(r,t,n)];case 2:return[2,i.sent()]}}))}))},e.prototype.decodeFromStream=function(e,t,n){return sS(this,void 0,void 0,(function(){var r;return uS(this,(function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=i.sent(),[4,this.decodeContinuously(r,n)];case 2:return[2,i.sent()]}}))}))},e.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},e.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},e.prototype.attachStreamToVideo=function(e,t){return sS(this,void 0,void 0,(function(){var n;return uS(this,(function(r){switch(r.label){case 0:return n=this.prepareVideoElement(t),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return r.sent(),[2,n]}}))}))},e.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise((function(n,r){return t.playVideoOnLoad(e,(function(){return n()}))}))},e.prototype.playVideoOnLoad=function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},e.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},e.prototype.tryPlayVideo=function(e){return sS(this,void 0,void 0,(function(){return uS(this,(function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}}))}))},e.prototype.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new $C("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new $C("element with id '"+e+"' must be an "+t+" element");return n},e.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new $C("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},e.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new $C("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},e.prototype.decodeFromVideoContinuously=function(e,t,n){if(void 0===e&&void 0===t)throw new $C("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)},e.prototype.decodeFromImageElement=function(e){if(!e)throw new $C("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);return this.imageElement=t,this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t)},e.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},e.prototype.decodeFromVideoElementContinuously=function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)},e.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new $C("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},e.prototype.decodeFromImageUrl=function(e){if(!e)throw new $C("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n},e.prototype.decodeFromVideoUrl=function(e){if(!e)throw new $C("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n},e.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new $C("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r},e.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise((function(n,r){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,r)},e.addEventListener("load",t.imageLoadedListener)}))},e.prototype._decodeOnLoadVideo=function(e){return sS(this,void 0,void 0,(function(){return uS(this,(function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}}))}))},e.prototype._decodeOnLoadVideoContinuously=function(e,t){return sS(this,void 0,void 0,(function(){return uS(this,(function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,t),[2]}}))}))},e.prototype.isImageLoaded=function(e){return!!e.complete&&0!==e.naturalWidth},e.prototype.prepareImageElement=function(e){var t;return"undefined"===typeof e&&((t=document.createElement("img")).width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},e.prototype.prepareVideoElement=function(e){var t;return e||"undefined"===typeof document||((t=document.createElement("video")).width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},e.prototype.decodeOnce=function(e,t,n){var r=this;void 0===t&&(t=!0),void 0===n&&(n=!0),this._stopAsyncDecode=!1;var i=function i(o,a){if(r._stopAsyncDecode)return a(new KE("Video stream has ended before any code could be detected.")),void(r._stopAsyncDecode=void 0);try{o(r.decode(e))}catch(v){if(t&&v instanceof KE||(v instanceof sE||v instanceof IE)&&n)return setTimeout(i,r._timeBetweenDecodingAttempts,o,a);a(v)}};return new Promise((function(e,t){return i(e,t)}))},e.prototype.decodeContinuously=function(e,t){var n=this;this._stopContinuousDecode=!1;!function r(){if(n._stopContinuousDecode)n._stopContinuousDecode=void 0;else try{var i=n.decode(e);t(i,null),setTimeout(r,n.timeBetweenScansMillis)}catch(v){t(null,v),(v instanceof sE||v instanceof IE||v instanceof KE)&&setTimeout(r,n._timeBetweenDecodingAttempts)}}()},e.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},e.prototype._isHTMLVideoElement=function(e){return 0!==e.videoWidth},e.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);var t=this.getCaptureCanvas(e),n=new oS(t),r=new QE(n);return new iE(r)},e.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext},e.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},e.prototype.drawFrameOnCanvas=function(e,t,n){void 0===t&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),void 0===n&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},e.prototype.drawImageOnCanvas=function(e,t,n){void 0===t&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),void 0===n&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},e.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},e.prototype.createCaptureCanvas=function(e){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;var t,n,r=document.createElement("canvas");return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(t=e.videoWidth,n=e.videoHeight):e instanceof HTMLImageElement&&(t=e.naturalWidth||e.width,n=e.naturalHeight||e.height)),r.style.width=t+"px",r.style.height=n+"px",r.width=t,r.height=n,r},e.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach((function(e){return e.stop()})),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},e.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},e.prototype._destroyVideoElement=function(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},e.prototype._destroyImageElement=function(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},e.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},e.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}},e.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")},e}(),dS=function(){function e(e,t,n,r,i,o){void 0===n&&(n=null==t?0:8*t.length),void 0===o&&(o=cE.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=t,this.numBits=void 0===n||null===n?null===t||void 0===t?0:8*t.length:n,this.resultPoints=r,this.format=i,this.resultMetadata=null,this.timestamp=void 0===o||null===o?cE.currentTimeMillis():o}return e.prototype.getText=function(){return this.text},e.prototype.getRawBytes=function(){return this.rawBytes},e.prototype.getNumBits=function(){return this.numBits},e.prototype.getResultPoints=function(){return this.resultPoints},e.prototype.getBarcodeFormat=function(){return this.format},e.prototype.getResultMetadata=function(){return this.resultMetadata},e.prototype.putMetadata=function(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},e.prototype.putAllMetadata=function(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))},e.prototype.addResultPoints=function(e){var t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){var n=new Array(t.length+e.length);cE.arraycopy(t,0,n,0,t.length),cE.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.toString=function(){return this.text},e}();!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(TE||(TE={}));var hS,fS=TE;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(hS||(hS={}));var pS,mS=hS,gS=function(){function e(e,t,n,r,i,o){void 0===i&&(i=-1),void 0===o&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=void 0===e||null===e?0:8*e.length}return e.prototype.getRawBytes=function(){return this.rawBytes},e.prototype.getNumBits=function(){return this.numBits},e.prototype.setNumBits=function(e){this.numBits=e},e.prototype.getText=function(){return this.text},e.prototype.getByteSegments=function(){return this.byteSegments},e.prototype.getECLevel=function(){return this.ecLevel},e.prototype.getErrorsCorrected=function(){return this.errorsCorrected},e.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},e.prototype.getErasures=function(){return this.erasures},e.prototype.setErasures=function(e){this.erasures=e},e.prototype.getOther=function(){return this.other},e.prototype.setOther=function(e){this.other=e},e.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},e.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},e.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},e}(),vS=function(){function e(){}return e.prototype.exp=function(e){return this.expTable[e]},e.prototype.log=function(e){if(0===e)throw new nE;return this.logTable[e]},e.addOrSubtract=function(e,t){return e^t},e}(),yS=vS,bS=function(){function e(e,t){if(0===t.length)throw new nE;this.field=e;var n=t.length;if(n>1&&0===t[0]){for(var r=1;r<n&&0===t[r];)r++;r===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-r),cE.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return e.prototype.getCoefficients=function(){return this.coefficients},e.prototype.getDegree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.evaluateAt=function(e){if(0===e)return this.getCoefficient(0);var t,n=this.coefficients;if(1===e){t=0;for(var r=0,i=n.length;r!==i;r++){var o=n[r];t=yS.addOrSubtract(t,o)}return t}t=n[0];var a=n.length,s=this.field;for(r=1;r<a;r++)t=yS.addOrSubtract(s.multiply(e,t),n[r]);return t},e.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new nE("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var n=this.coefficients,r=t.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var o=new Int32Array(r.length),a=r.length-n.length;cE.arraycopy(r,0,o,0,a);for(var s=a;s<r.length;s++)o[s]=yS.addOrSubtract(n[s-a],r[s]);return new e(this.field,o)},e.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new nE("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var n=this.coefficients,r=n.length,i=t.coefficients,o=i.length,a=new Int32Array(r+o-1),s=this.field,u=0;u<r;u++)for(var l=n[u],c=0;c<o;c++)a[u+c]=yS.addOrSubtract(a[u+c],s.multiply(l,i[c]));return new e(s,a)},e.prototype.multiplyScalar=function(t){if(0===t)return this.field.getZero();if(1===t)return this;for(var n=this.coefficients.length,r=this.field,i=new Int32Array(n),o=this.coefficients,a=0;a<n;a++)i[a]=r.multiply(o[a],t);return new e(r,i)},e.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new nE;if(0===n)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+t),a=this.field,s=0;s<i;s++)o[s]=a.multiply(r[s],n);return new e(a,o)},e.prototype.divide=function(e){if(!this.field.equals(e.field))throw new nE("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new nE("Divide by 0");for(var t=this.field,n=t.getZero(),r=this,i=e.getCoefficient(e.getDegree()),o=t.inverse(i);r.getDegree()>=e.getDegree()&&!r.isZero();){var a=r.getDegree()-e.getDegree(),s=t.multiply(r.getCoefficient(r.getDegree()),o),u=e.multiplyByMonomial(a,s),l=t.buildMonomial(a,s);n=n.addOrSubtract(l),r=r.addOrSubtract(u)}return[n,r]},e.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){var r=this.field.log(n);0===r?e+="1":1===r?e+="a":(e+="a^",e+=r)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e},e}(),wS=bS,xS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xS(t,e),t.kind="ArithmeticException",t}(YC),CS=_S,ES=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),SS=function(e){function t(t,n,r){var i=e.call(this)||this;i.primitive=t,i.size=n,i.generatorBase=r;for(var o=new Int32Array(n),a=1,s=0;s<n;s++)o[s]=a,(a*=2)>=n&&(a^=t,a&=n-1);i.expTable=o;var u=new Int32Array(n);for(s=0;s<n-1;s++)u[o[s]]=s;return i.logTable=u,i.zero=new wS(i,Int32Array.from([0])),i.one=new wS(i,Int32Array.from([1])),i}return ES(t,e),t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,t){if(e<0)throw new nE;if(0===t)return this.zero;var n=new Int32Array(e+1);return n[0]=t,new wS(this,n)},t.prototype.inverse=function(e){if(0===e)throw new CS;return this.expTable[this.size-this.logTable[e]-1]},t.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+xE.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(e){return e===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t}(yS),AS=SS,kS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),IS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kS(t,e),t.kind="ReedSolomonException",t}(YC),RS=IS,TS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),NS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return TS(t,e),t.kind="IllegalStateException",t}(YC),OS=NS,DS=function(){function e(e){this.field=e}return e.prototype.decode=function(e,t){for(var n=this.field,r=new wS(n,e),i=new Int32Array(t),o=!0,a=0;a<t;a++){var s=r.evaluateAt(n.exp(a+n.getGeneratorBase()));i[i.length-1-a]=s,0!==s&&(o=!1)}if(!o){var u=new wS(n,i),l=this.runEuclideanAlgorithm(n.buildMonomial(t,1),u,t),c=l[0],d=l[1],h=this.findErrorLocations(c),f=this.findErrorMagnitudes(d,h);for(a=0;a<h.length;a++){var p=e.length-1-n.log(h[a]);if(p<0)throw new RS("Bad error location");e[p]=AS.addOrSubtract(e[p],f[a])}}},e.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var r=e;e=t,t=r}for(var i=this.field,o=e,a=t,s=i.getZero(),u=i.getOne();a.getDegree()>=(n/2|0);){var l=o,c=s;if(s=u,(o=a).isZero())throw new RS("r_{i-1} was zero");a=l;for(var d=i.getZero(),h=o.getCoefficient(o.getDegree()),f=i.inverse(h);a.getDegree()>=o.getDegree()&&!a.isZero();){var p=a.getDegree()-o.getDegree(),m=i.multiply(a.getCoefficient(a.getDegree()),f);d=d.addOrSubtract(i.buildMonomial(p,m)),a=a.addOrSubtract(o.multiplyByMonomial(p,m))}if(u=d.multiply(s).addOrSubtract(c),a.getDegree()>=o.getDegree())throw new OS("Division algorithm failed to reduce polynomial?")}var g=u.getCoefficient(0);if(0===g)throw new RS("sigmaTilde(0) was zero");var v=i.inverse(g);return[u.multiplyScalar(v),a.multiplyScalar(v)]},e.prototype.findErrorLocations=function(e){var t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),r=0,i=this.field,o=1;o<i.getSize()&&r<t;o++)0===e.evaluateAt(o)&&(n[r]=i.inverse(o),r++);if(r!==t)throw new RS("Error locator degree does not match number of roots");return n},e.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,r=new Int32Array(n),i=this.field,o=0;o<n;o++){for(var a=i.inverse(t[o]),s=1,u=0;u<n;u++)if(o!==u){var l=i.multiply(t[u],a),c=0===(1&l)?1|l:-2&l;s=i.multiply(s,c)}r[o]=i.multiply(e.evaluateAt(a),i.inverse(s)),0!==i.getGeneratorBase()&&(r[o]=i.multiply(r[o],a))}return r},e}(),MS=DS;!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(pS||(pS={}));var PS=function(){function e(){}return e.prototype.decode=function(t){this.ddata=t;var n=t.getBits(),r=this.extractBits(n),i=this.correctBits(r),o=e.convertBoolArrayToByteArray(i),a=e.getEncodedData(i),s=new gS(o,a,null,null);return s.setNumBits(i.length),s},e.highLevelDecode=function(e){return this.getEncodedData(e)},e.getEncodedData=function(t){for(var n=t.length,r=pS.UPPER,i=pS.UPPER,o="",a=0;a<n;)if(i===pS.BINARY){if(n-a<5)break;var s=e.readCode(t,a,5);if(a+=5,0===s){if(n-a<11)break;s=e.readCode(t,a,11)+31,a+=11}for(var u=0;u<s;u++){if(n-a<8){a=n;break}var l=e.readCode(t,a,8);o+=zE.castAsNonUtf8Char(l),a+=8}i=r}else{var c=i===pS.DIGIT?4:5;if(n-a<c)break;l=e.readCode(t,a,c);a+=c;var d=e.getCharacter(i,l);d.startsWith("CTRL_")?(r=i,i=e.getTable(d.charAt(5)),"L"===d.charAt(6)&&(r=i)):(o+=d,i=r)}return o},e.getTable=function(e){switch(e){case"L":return pS.LOWER;case"P":return pS.PUNCT;case"M":return pS.MIXED;case"D":return pS.DIGIT;case"B":return pS.BINARY;default:return pS.UPPER}},e.getCharacter=function(t,n){switch(t){case pS.UPPER:return e.UPPER_TABLE[n];case pS.LOWER:return e.LOWER_TABLE[n];case pS.MIXED:return e.MIXED_TABLE[n];case pS.PUNCT:return e.PUNCT_TABLE[n];case pS.DIGIT:return e.DIGIT_TABLE[n];default:throw new OS("Bad table")}},e.prototype.correctBits=function(t){var n,r;this.ddata.getNbLayers()<=2?(r=6,n=AS.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=AS.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=AS.AZTEC_DATA_10):(r=12,n=AS.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=t.length/r;if(o<i)throw new IE;for(var a=t.length%r,s=new Int32Array(o),u=0;u<o;u++,a+=r)s[u]=e.readCode(t,a,r);try{new MS(n).decode(s,o-i)}catch(m){throw new IE(m)}var l=(1<<r)-1,c=0;for(u=0;u<i;u++){if(0===(f=s[u])||f===l)throw new IE;1!==f&&f!==l-1||c++}var d=new Array(i*r-c),h=0;for(u=0;u<i;u++){var f;if(1===(f=s[u])||f===l-1)d.fill(f>1,h,h+r-1),h+=r-1;else for(var p=r-1;p>=0;--p)d[h++]=0!==(f&1<<p)}return d},e.prototype.extractBits=function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+4*n,i=new Int32Array(r),o=new Array(this.totalBitsInLayer(n,t));if(t)for(var a=0;a<i.length;a++)i[a]=a;else{var s=r+1+2*xE.truncDivision(xE.truncDivision(r,2)-1,15),u=r/2,l=xE.truncDivision(s,2);for(a=0;a<u;a++){var c=a+xE.truncDivision(a,15);i[u-a-1]=l-c-1,i[u+a]=l+c+1}}a=0;for(var d=0;a<n;a++){for(var h=4*(n-a)+(t?9:12),f=2*a,p=r-1-f,m=0;m<h;m++)for(var g=2*m,v=0;v<2;v++)o[d+g+v]=e.get(i[f+v],i[f+m]),o[d+2*h+g+v]=e.get(i[f+m],i[p-v]),o[d+4*h+g+v]=e.get(i[p-v],i[p-m]),o[d+6*h+g+v]=e.get(i[p-m],i[f+v]);d+=8*h}return o},e.readCode=function(e,t,n){for(var r=0,i=t;i<t+n;i++)r<<=1,e[i]&&(r|=1);return r},e.readByte=function(t,n){var r=t.length-n;return r>=8?e.readCode(t,n,8):e.readCode(t,n,r)<<8-r},e.convertBoolArrayToByteArray=function(t){for(var n=new Uint8Array((t.length+7)/8),r=0;r<n.length;r++)n[r]=e.readByte(t,8*r);return n},e.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},e.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],e.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],e.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],e.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],e.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],e}(),FS=PS,BS=function(){function e(){}return e.round=function(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},e.distance=function(e,t,n,r){var i=e-n,o=t-r;return Math.sqrt(i*i+o*o)},e.sum=function(e){for(var t=0,n=0,r=e.length;n!==r;n++){t+=e[n]}return t},e}(),LS=BS,zS=function(){function e(){}return e.floatToIntBits=function(e){return e},e.MAX_VALUE=Number.MAX_SAFE_INTEGER,e}(),jS=zS,WS=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.equals=function(t){if(t instanceof e){var n=t;return this.x===n.x&&this.y===n.y}return!1},e.prototype.hashCode=function(){return 31*jS.floatToIntBits(this.x)+jS.floatToIntBits(this.y)},e.prototype.toString=function(){return"("+this.x+","+this.y+")"},e.orderBestPatterns=function(e){var t,n,r,i=this.distance(e[0],e[1]),o=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]);if(o>=i&&o>=a?(n=e[0],t=e[1],r=e[2]):a>=o&&a>=i?(n=e[1],t=e[0],r=e[2]):(n=e[2],t=e[0],r=e[1]),this.crossProductZ(t,n,r)<0){var s=t;t=r,r=s}e[0]=t,e[1]=n,e[2]=r},e.distance=function(e,t){return LS.distance(e.x,e.y,t.x,t.y)},e.crossProductZ=function(e,t,n){var r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)},e}(),HS=WS,VS=function(){function e(e,t){this.bits=e,this.points=t}return e.prototype.getBits=function(){return this.bits},e.prototype.getPoints=function(){return this.points},e}(),GS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),US=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n)||this;return a.compact=r,a.nbDatablocks=i,a.nbLayers=o,a}return GS(t,e),t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t}(VS),KS=function(){function e(t,n,r,i){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),void 0!==n&&null!==n||(n=e.INIT_SIZE),void 0!==r&&null!==r||(r=t.getWidth()/2|0),void 0!==i&&null!==i||(i=t.getHeight()/2|0);var o=n/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new KE}return e.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,i=!1,o=!0,a=!1,s=!1,u=!1,l=!1,c=!1,d=this.width,h=this.height;o;){o=!1;for(var f=!0;(f||!s)&&t<d;)(f=this.containsBlackPoint(n,r,t,!1))?(t++,o=!0,s=!0):s||t++;if(t>=d){i=!0;break}for(var p=!0;(p||!u)&&r<h;)(p=this.containsBlackPoint(e,t,r,!0))?(r++,o=!0,u=!0):u||r++;if(r>=h){i=!0;break}for(var m=!0;(m||!l)&&e>=0;)(m=this.containsBlackPoint(n,r,e,!1))?(e--,o=!0,l=!0):l||e--;if(e<0){i=!0;break}for(var g=!0;(g||!c)&&n>=0;)(g=this.containsBlackPoint(e,t,n,!0))?(n--,o=!0,c=!0):c||n--;if(n<0){i=!0;break}o&&(a=!0)}if(!i&&a){for(var v=t-e,y=null,b=1;null===y&&b<v;b++)y=this.getBlackPointOnSegment(e,r-b,e+b,r);if(null==y)throw new KE;var w=null;for(b=1;null===w&&b<v;b++)w=this.getBlackPointOnSegment(e,n+b,e+b,n);if(null==w)throw new KE;var x=null;for(b=1;null===x&&b<v;b++)x=this.getBlackPointOnSegment(t,n+b,t-b,n);if(null==x)throw new KE;var _=null;for(b=1;null===_&&b<v;b++)_=this.getBlackPointOnSegment(t,r-b,t-b,r);if(null==_)throw new KE;return this.centerEdges(_,y,x,w)}throw new KE},e.prototype.getBlackPointOnSegment=function(e,t,n,r){for(var i=LS.round(LS.distance(e,t,n,r)),o=(n-e)/i,a=(r-t)/i,s=this.image,u=0;u<i;u++){var l=LS.round(e+u*o),c=LS.round(t+u*a);if(s.get(l,c))return new HS(l,c)}return null},e.prototype.centerEdges=function(t,n,r,i){var o=t.getX(),a=t.getY(),s=n.getX(),u=n.getY(),l=r.getX(),c=r.getY(),d=i.getX(),h=i.getY(),f=e.CORR;return o<this.width/2?[new HS(d-f,h+f),new HS(s+f,u+f),new HS(l-f,c-f),new HS(o+f,a-f)]:[new HS(d+f,h+f),new HS(s+f,u-f),new HS(l-f,c+f),new HS(o-f,a-f)]},e.prototype.containsBlackPoint=function(e,t,n,r){var i=this.image;if(r){for(var o=e;o<=t;o++)if(i.get(o,n))return!0}else for(var a=e;a<=t;a++)if(i.get(n,a))return!0;return!1},e.INIT_SIZE=10,e.CORR=1,e}(),XS=KS,ZS=function(){function e(){}return e.checkAndNudgePoints=function(e,t){for(var n=e.getWidth(),r=e.getHeight(),i=!0,o=0;o<t.length&&i;o+=2){var a=Math.floor(t[o]),s=Math.floor(t[o+1]);if(a<-1||a>n||s<-1||s>r)throw new KE;i=!1,-1===a?(t[o]=0,i=!0):a===n&&(t[o]=n-1,i=!0),-1===s?(t[o+1]=0,i=!0):s===r&&(t[o+1]=r-1,i=!0)}i=!0;for(o=t.length-2;o>=0&&i;o-=2){a=Math.floor(t[o]),s=Math.floor(t[o+1]);if(a<-1||a>n||s<-1||s>r)throw new KE;i=!1,-1===a?(t[o]=0,i=!0):a===n&&(t[o]=n-1,i=!0),-1===s?(t[o+1]=0,i=!0):s===r&&(t[o+1]=r-1,i=!0)}},e}(),qS=ZS,YS=function(){function e(e,t,n,r,i,o,a,s,u){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=i,this.a32=o,this.a13=a,this.a23=s,this.a33=u}return e.quadrilateralToQuadrilateral=function(t,n,r,i,o,a,s,u,l,c,d,h,f,p,m,g){var v=e.quadrilateralToSquare(t,n,r,i,o,a,s,u);return e.squareToQuadrilateral(l,c,d,h,f,p,m,g).times(v)},e.prototype.transformPoints=function(e){for(var t=e.length,n=this.a11,r=this.a12,i=this.a13,o=this.a21,a=this.a22,s=this.a23,u=this.a31,l=this.a32,c=this.a33,d=0;d<t;d+=2){var h=e[d],f=e[d+1],p=i*h+s*f+c;e[d]=(n*h+o*f+u)/p,e[d+1]=(r*h+a*f+l)/p}},e.prototype.transformPointsWithValues=function(e,t){for(var n=this.a11,r=this.a12,i=this.a13,o=this.a21,a=this.a22,s=this.a23,u=this.a31,l=this.a32,c=this.a33,d=e.length,h=0;h<d;h++){var f=e[h],p=t[h],m=i*f+s*p+c;e[h]=(n*f+o*p+u)/m,t[h]=(r*f+a*p+l)/m}},e.squareToQuadrilateral=function(t,n,r,i,o,a,s,u){var l=t-r+o-s,c=n-i+a-u;if(0===l&&0===c)return new e(r-t,o-r,t,i-n,a-i,n,0,0,1);var d=r-o,h=s-o,f=i-a,p=u-a,m=d*p-h*f,g=(l*p-h*c)/m,v=(d*c-l*f)/m;return new e(r-t+g*r,s-t+v*s,t,i-n+g*i,u-n+v*u,n,g,v,1)},e.quadrilateralToSquare=function(t,n,r,i,o,a,s,u){return e.squareToQuadrilateral(t,n,r,i,o,a,s,u).buildAdjoint()},e.prototype.buildAdjoint=function(){return new e(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},e.prototype.times=function(t){return new e(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},e}(),JS=YS,QS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return QS(t,e),t.prototype.sampleGrid=function(e,t,n,r,i,o,a,s,u,l,c,d,h,f,p,m,g,v,y){var b=JS.quadrilateralToQuadrilateral(r,i,o,a,s,u,l,c,d,h,f,p,m,g,v,y);return this.sampleGridWithTransform(e,t,n,b)},t.prototype.sampleGridWithTransform=function(e,t,n,r){if(t<=0||n<=0)throw new KE;for(var i=new VE(t,n),o=new Float32Array(2*t),a=0;a<n;a++){for(var s=o.length,u=a+.5,l=0;l<s;l+=2)o[l]=l/2+.5,o[l+1]=u;r.transformPoints(o),qS.checkAndNudgePoints(e,o);try{for(l=0;l<s;l+=2)e.get(Math.floor(o[l]),Math.floor(o[l+1]))&&i.set(l/2,a)}catch(c){throw new KE}}return i},t}(qS),eA=$S,tA=function(){function e(){}return e.setGridSampler=function(t){e.gridSampler=t},e.getInstance=function(){return e.gridSampler},e.gridSampler=new eA,e}(),nA=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.toResultPoint=function(){return new HS(this.getX(),this.getY())},e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e}(),rA=function(){function e(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return e.prototype.detect=function(){return this.detectMirror(!1)},e.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var r=n[0];n[0]=n[2],n[2]=r}this.extractParameters(n);var i=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new US(i,o,this.compact,this.nbDataBlocks,this.nbLayers)},e.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new KE;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var r=0,i=0;i<4;i++){var o=n[(this.shift+i)%4];this.compact?(r<<=7,r+=o>>1&127):(r<<=10,r+=(o>>2&992)+(o>>1&31))}var a=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(a>>6),this.nbDataBlocks=1+(63&a)):(this.nbLayers=1+(a>>11),this.nbDataBlocks=1+(2047&a))},e.prototype.getRotation=function(e,t){var n=0;e.forEach((function(e,r,i){n=(n<<3)+((e>>t-2<<1)+(1&e))})),n=((1&n)<<11)+(n>>1);for(var r=0;r<4;r++)if(xE.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new KE},e.prototype.getCorrectedParameterData=function(e,t){var n,r;t?(n=7,r=2):(n=10,r=4);for(var i=n-r,o=new Int32Array(n),a=n-1;a>=0;--a)o[a]=15&e,e>>=4;try{new MS(AS.AZTEC_PARAM).decode(o,i)}catch(u){throw new KE}var s=0;for(a=0;a<r;a++)s=(s<<4)+o[a];return s},e.prototype.getBullsEyeCorners=function(e){var t=e,n=e,r=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(t,o,1,-1),s=this.getFirstDifferent(n,o,1,1),u=this.getFirstDifferent(r,o,-1,1),l=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){var c=this.distancePoint(l,a)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(c<.75||c>1.25||!this.isWhiteOrBlackRectangle(a,s,u,l))break}t=a,n=s,r=u,i=l,o=!o}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new KE;this.compact=5===this.nbCenterLayers;var d=new HS(t.getX()+.5,t.getY()-.5),h=new HS(n.getX()+.5,n.getY()+.5),f=new HS(r.getX()-.5,r.getY()+.5),p=new HS(i.getX()-.5,i.getY()-.5);return this.expandSquare([d,h,f,p],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},e.prototype.getMatrixCenter=function(){var e,t,n,r;try{e=(u=new XS(this.image).detect())[0],t=u[1],n=u[2],r=u[3]}catch(v){var i=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new nA(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new nA(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new nA(i-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new nA(i-7,o-7),!1,-1,-1).toResultPoint()}var a=LS.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=LS.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{var u;e=(u=new XS(this.image,15,a,s).detect())[0],t=u[1],n=u[2],r=u[3]}catch(v){e=this.getFirstDifferent(new nA(a+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new nA(a+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new nA(a-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new nA(a-7,s-7),!1,-1,-1).toResultPoint()}return a=LS.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=LS.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new nA(a,s)},e.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},e.prototype.sampleGrid=function(e,t,n,r,i){var o=tA.getInstance(),a=this.getDimension(),s=a/2-this.nbCenterLayers,u=a/2+this.nbCenterLayers;return o.sampleGrid(e,a,a,s,s,u,s,u,u,s,u,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())},e.prototype.sampleLine=function(e,t,n){for(var r=0,i=this.distanceResultPoint(e,t),o=i/n,a=e.getX(),s=e.getY(),u=o*(t.getX()-e.getX())/i,l=o*(t.getY()-e.getY())/i,c=0;c<n;c++)this.image.get(LS.round(a+c*u),LS.round(s+c*l))&&(r|=1<<n-c-1);return r},e.prototype.isWhiteOrBlackRectangle=function(e,t,n,r){e=new nA(e.getX()-3,e.getY()+3),t=new nA(t.getX()-3,t.getY()-3),n=new nA(n.getX()+3,n.getY()-3),r=new nA(r.getX()+3,r.getY()+3);var i=this.getColor(r,e);if(0===i)return!1;var o=this.getColor(e,t);return o===i&&((o=this.getColor(t,n))===i&&(o=this.getColor(n,r))===i)},e.prototype.getColor=function(e,t){for(var n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,o=0,a=e.getX(),s=e.getY(),u=this.image.get(e.getX(),e.getY()),l=Math.ceil(n),c=0;c<l;c++)a+=r,s+=i,this.image.get(LS.round(a),LS.round(s))!==u&&o++;var d=o/n;return d>.1&&d<.9?0:d<=.1===u?1:-1},e.prototype.getFirstDifferent=function(e,t,n,r){for(var i=e.getX()+n,o=e.getY()+r;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n,o+=r;for(i-=n,o-=r;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n;for(i-=n;this.isValid(i,o)&&this.image.get(i,o)===t;)o+=r;return new nA(i,o-=r)},e.prototype.expandSquare=function(e,t,n){var r=n/(2*t),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,s=(e[0].getY()+e[2].getY())/2,u=new HS(a+r*i,s+r*o),l=new HS(a-r*i,s-r*o);return i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,s=(e[1].getY()+e[3].getY())/2,[u,new HS(a+r*i,s+r*o),l,new HS(a-r*i,s-r*o)]},e.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},e.prototype.isValidPoint=function(e){var t=LS.round(e.getX()),n=LS.round(e.getY());return this.isValid(t,n)},e.prototype.distancePoint=function(e,t){return LS.distance(e.getX(),e.getY(),t.getX(),t.getY())},e.prototype.distanceResultPoint=function(e,t){return LS.distance(e.getX(),e.getY(),t.getX(),t.getY())},e.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(xE.truncDivision(this.nbLayers-4,8)+1)+15},e}(),iA=rA,oA=function(){function e(){}return e.prototype.decode=function(e,t){void 0===t&&(t=null);var n=null,r=new iA(e.getBlackMatrix()),i=null,o=null;try{i=(a=r.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(t,i),o=(new FS).decode(a)}catch(v){n=v}if(null==o)try{var a;i=(a=r.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(t,i),o=(new FS).decode(a)}catch(v){if(null!=n)throw n;throw v}var s=new dS(o.getText(),o.getRawBytes(),o.getNumBits(),i,fS.AZTEC,cE.currentTimeMillis()),u=o.getByteSegments();null!=u&&s.putMetadata(mS.BYTE_SEGMENTS,u);var l=o.getECLevel();return null!=l&&s.putMetadata(mS.ERROR_CORRECTION_LEVEL,l),s},e.prototype.reportFoundResultPoints=function(e,t){if(null!=e){var n=e.get(SE.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach((function(e,t,r){n.foundPossibleResultPoint(e)}))}},e.prototype.reset=function(){},e}(),aA=oA,sA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),uA=(function(e){function t(t){return void 0===t&&(t=500),e.call(this,new aA,t)||this}sA(t,e)}(cS),function(){function e(){}return e.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch(l){if(t&&!0===t.get(SE.TRY_HARDER)&&e.isRotateSupported()){var n=e.rotateCounterClockwise(),r=this.doDecode(n,t),i=r.getResultMetadata(),o=270;null!==i&&!0===i.get(mS.ORIENTATION)&&(o+=i.get(mS.ORIENTATION)%360),r.putMetadata(mS.ORIENTATION,o);var a=r.getResultPoints();if(null!==a)for(var s=n.getHeight(),u=0;u<a.length;u++)a[u]=new HS(s-a[u].getY()-1,a[u].getX());return r}throw new KE}},e.prototype.reset=function(){},e.prototype.doDecode=function(e,t){var n,r=e.getWidth(),i=e.getHeight(),o=new CE(r),a=t&&!0===t.get(SE.TRY_HARDER),s=Math.max(1,i>>(a?8:5));n=a?i:15;for(var u=Math.trunc(i/2),l=0;l<n;l++){var c=Math.trunc((l+1)/2),d=u+s*(0===(1&l)?c:-c);if(d<0||d>=i)break;try{o=e.getBlackRow(d,o)}catch(g){continue}for(var h=function(e){if(1===e&&(o.reverse(),t&&!0===t.get(SE.NEED_RESULT_POINT_CALLBACK))){var n=new Map;t.forEach((function(e,t){return n.set(t,e)})),n.delete(SE.NEED_RESULT_POINT_CALLBACK),t=n}try{var i=f.decodeRow(d,o,t);if(1===e){i.putMetadata(mS.ORIENTATION,180);var a=i.getResultPoints();null!==a&&(a[0]=new HS(r-a[0].getX()-1,a[0].getY()),a[1]=new HS(r-a[1].getX()-1,a[1].getY()))}return{value:i}}catch(lt){}},f=this,p=0;p<2;p++){var m=h(p);if("object"===typeof m)return m.value}}throw new KE},e.recordPattern=function(e,t,n){for(var r=n.length,i=0;i<r;i++)n[i]=0;var o=e.getSize();if(t>=o)throw new KE;for(var a=!e.get(t),s=0,u=t;u<o;){if(e.get(u)!==a)n[s]++;else{if(++s===r)break;n[s]=1,a=!a}u++}if(s!==r&&(s!==r-1||u!==o))throw new KE},e.recordPatternInReverse=function(t,n,r){for(var i=r.length,o=t.get(n);n>0&&i>=0;)t.get(--n)!==o&&(i--,o=!o);if(i>=0)throw new KE;e.recordPattern(t,n+1,r)},e.patternMatchVariance=function(e,t,n){for(var r=e.length,i=0,o=0,a=0;a<r;a++)i+=e[a],o+=t[a];if(i<o)return Number.POSITIVE_INFINITY;var s=i/o;n*=s;for(var u=0,l=0;l<r;l++){var c=e[l],d=t[l]*s,h=c>d?c-d:d-c;if(h>n)return Number.POSITIVE_INFINITY;u+=h}return u/i},e}()),lA=uA,cA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return cA(t,e),t.findStartPattern=function(e){for(var n=e.getSize(),r=e.getNextSet(0),i=0,o=Int32Array.from([0,0,0,0,0,0]),a=r,s=!1,u=r;u<n;u++)if(e.get(u)!==s)o[i]++;else{if(5===i){for(var l=t.MAX_AVG_VARIANCE,c=-1,d=t.CODE_START_A;d<=t.CODE_START_C;d++){var h=lA.patternMatchVariance(o,t.CODE_PATTERNS[d],t.MAX_INDIVIDUAL_VARIANCE);h<l&&(l=h,c=d)}if(c>=0&&e.isRange(Math.max(0,a-(u-a)/2),a,!1))return Int32Array.from([a,u,c]);a+=o[0]+o[1],(o=o.slice(2,o.length-1))[i-1]=0,o[i]=0,i--}else i++;o[i]=1,s=!s}throw new KE},t.decodeCode=function(e,n,r){lA.recordPattern(e,r,n);for(var i=t.MAX_AVG_VARIANCE,o=-1,a=0;a<t.CODE_PATTERNS.length;a++){var s=t.CODE_PATTERNS[a],u=this.patternMatchVariance(n,s,t.MAX_INDIVIDUAL_VARIANCE);u<i&&(i=u,o=a)}if(o>=0)return o;throw new KE},t.prototype.decodeRow=function(e,n,r){var i,o=r&&!0===r.get(SE.ASSUME_GS1),a=t.findStartPattern(n),s=a[2],u=0,l=new Uint8Array(20);switch(l[u++]=s,s){case t.CODE_START_A:i=t.CODE_CODE_A;break;case t.CODE_START_B:i=t.CODE_CODE_B;break;case t.CODE_START_C:i=t.CODE_CODE_C;break;default:throw new IE}for(var c=!1,d=!1,h="",f=a[0],p=a[1],m=Int32Array.from([0,0,0,0,0,0]),g=0,v=0,y=s,b=0,w=!0,x=!1,_=!1;!c;){var C=d;switch(d=!1,g=v,v=t.decodeCode(n,m,p),l[u++]=v,v!==t.CODE_STOP&&(w=!0),v!==t.CODE_STOP&&(y+=++b*v),f=p,p+=m.reduce((function(e,t){return e+t}),0),v){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new IE}switch(i){case t.CODE_CODE_A:if(v<64)h+=_===x?String.fromCharCode(" ".charCodeAt(0)+v):String.fromCharCode(" ".charCodeAt(0)+v+128),_=!1;else if(v<96)h+=_===x?String.fromCharCode(v-64):String.fromCharCode(v+64),_=!1;else switch(v!==t.CODE_STOP&&(w=!1),v){case t.CODE_FNC_1:o&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!x&&_?(x=!0,_=!1):x&&_?(x=!1,_=!1):_=!0;break;case t.CODE_SHIFT:d=!0,i=t.CODE_CODE_B;break;case t.CODE_CODE_B:i=t.CODE_CODE_B;break;case t.CODE_CODE_C:i=t.CODE_CODE_C;break;case t.CODE_STOP:c=!0}break;case t.CODE_CODE_B:if(v<96)h+=_===x?String.fromCharCode(" ".charCodeAt(0)+v):String.fromCharCode(" ".charCodeAt(0)+v+128),_=!1;else switch(v!==t.CODE_STOP&&(w=!1),v){case t.CODE_FNC_1:o&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!x&&_?(x=!0,_=!1):x&&_?(x=!1,_=!1):_=!0;break;case t.CODE_SHIFT:d=!0,i=t.CODE_CODE_A;break;case t.CODE_CODE_A:i=t.CODE_CODE_A;break;case t.CODE_CODE_C:i=t.CODE_CODE_C;break;case t.CODE_STOP:c=!0}break;case t.CODE_CODE_C:if(v<100)v<10&&(h+="0"),h+=v;else switch(v!==t.CODE_STOP&&(w=!1),v){case t.CODE_FNC_1:o&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case t.CODE_CODE_A:i=t.CODE_CODE_A;break;case t.CODE_CODE_B:i=t.CODE_CODE_B;break;case t.CODE_STOP:c=!0}}C&&(i=i===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var E=p-f;if(p=n.getNextUnset(p),!n.isRange(p,Math.min(n.getSize(),p+(p-f)/2),!1))throw new KE;if((y-=b*g)%103!==g)throw new sE;var S=h.length;if(0===S)throw new KE;S>0&&w&&(h=i===t.CODE_CODE_C?h.substring(0,S-2):h.substring(0,S-1));for(var A=(a[1]+a[0])/2,k=f+E/2,I=l.length,R=new Uint8Array(I),T=0;T<I;T++)R[T]=l[T];var N=[new HS(A,e),new HS(k,e)];return new dS(h,R,0,N,fS.CODE_128,(new Date).getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}(lA),hA=dA,fA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pA=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},mA=function(e){function t(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.call(this)||this;return r.usingCheckDigit=t,r.extendedMode=n,r.decodeRowResult="",r.counters=new Int32Array(9),r}return fA(t,e),t.prototype.decodeRow=function(e,n,r){var i,o,a,s,u=this.counters;u.fill(0),this.decodeRowResult="";var l,c,d=t.findAsteriskPattern(n,u),h=n.getNextSet(d[1]),f=n.getSize();do{t.recordPattern(n,h,u);var p=t.toNarrowWidePattern(u);if(p<0)throw new KE;l=t.patternToChar(p),this.decodeRowResult+=l,c=h;try{for(var m=(i=void 0,pA(u)),g=m.next();!g.done;g=m.next()){h+=g.value}}catch(A){i={error:A}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}h=n.getNextSet(h)}while("*"!==l);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var v,y=0;try{for(var b=pA(u),w=b.next();!w.done;w=b.next()){y+=w.value}}catch(k){a={error:k}}finally{try{w&&!w.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}if(h!==f&&2*(h-c-y)<y)throw new KE;if(this.usingCheckDigit){for(var x=this.decodeRowResult.length-1,_=0,C=0;C<x;C++)_+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(C));if(this.decodeRowResult.charAt(x)!==t.ALPHABET_STRING.charAt(_%43))throw new sE;this.decodeRowResult=this.decodeRowResult.substring(0,x)}if(0===this.decodeRowResult.length)throw new KE;v=this.extendedMode?t.decodeExtended(this.decodeRowResult):this.decodeRowResult;var E=(d[1]+d[0])/2,S=c+y/2;return new dS(v,null,0,[new HS(E,e),new HS(S,e)],fS.CODE_39,(new Date).getTime())},t.findAsteriskPattern=function(e,n){for(var r=e.getSize(),i=e.getNextSet(0),o=0,a=i,s=!1,u=n.length,l=i;l<r;l++)if(e.get(l)!==s)n[o]++;else{if(o===u-1){if(this.toNarrowWidePattern(n)===t.ASTERISK_ENCODING&&e.isRange(Math.max(0,a-Math.floor((l-a)/2)),a,!1))return[a,l];a+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,s=!s}throw new KE},t.toNarrowWidePattern=function(e){var t,n,r,i=e.length,o=0;do{var a=2147483647;try{for(var s=(t=void 0,pA(e)),u=s.next();!u.done;u=s.next()){(h=u.value)<a&&h>o&&(a=h)}}catch(f){t={error:f}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}o=a,r=0;for(var l=0,c=0,d=0;d<i;d++){(h=e[d])>o&&(c|=1<<i-1-d,r++,l+=h)}if(3===r){for(d=0;d<i&&r>0;d++){var h;if((h=e[d])>o&&(r--,2*h>=l))return-1}return c}}while(r>3);return-1},t.patternToChar=function(e){for(var n=0;n<t.CHARACTER_ENCODINGS.length;n++)if(t.CHARACTER_ENCODINGS[n]===e)return t.ALPHABET_STRING.charAt(n);if(e===t.ASTERISK_ENCODING)return"*";throw new KE},t.decodeExtended=function(e){for(var t=e.length,n="",r=0;r<t;r++){var i=e.charAt(r);if("+"===i||"$"===i||"%"===i||"/"===i){var o=e.charAt(r+1),a="\0";switch(i){case"+":if(!(o>="A"&&o<="Z"))throw new IE;a=String.fromCharCode(o.charCodeAt(0)+32);break;case"$":if(!(o>="A"&&o<="Z"))throw new IE;a=String.fromCharCode(o.charCodeAt(0)-64);break;case"%":if(o>="A"&&o<="E")a=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")a=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")a=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")a=String.fromCharCode(o.charCodeAt(0)+43);else if("U"===o)a="\0";else if("V"===o)a="@";else if("W"===o)a="`";else{if("X"!==o&&"Y"!==o&&"Z"!==o)throw new IE;a="\x7f"}break;case"/":if(o>="A"&&o<="O")a=String.fromCharCode(o.charCodeAt(0)-32);else{if("Z"!==o)throw new IE;a=":"}}n+=a,r++}else n+=i}return n},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}(lA),gA=mA,vA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yA=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return vA(t,e),t.prototype.decodeRow=function(e,n,r){var i,o,a=this.decodeStart(n),s=this.decodeEnd(n),u=new WE;t.decodeMiddle(n,a[1],s[0],u);var l=u.toString(),c=null;null!=r&&(c=r.get(SE.ALLOWED_LENGTHS)),null==c&&(c=t.DEFAULT_ALLOWED_LENGTHS);var d=l.length,h=!1,f=0;try{for(var p=yA(c),m=p.next();!m.done;m=p.next()){var g=m.value;if(d===g){h=!0;break}g>f&&(f=g)}}catch(y){i={error:y}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}if(!h&&d>f&&(h=!0),!h)throw new IE;var v=[new HS(a[1],e),new HS(s[0],e)];return new dS(l,null,0,v,fS.ITF,(new Date).getTime())},t.decodeMiddle=function(e,n,r,i){var o=new Int32Array(10),a=new Int32Array(5),s=new Int32Array(5);for(o.fill(0),a.fill(0),s.fill(0);n<r;){lA.recordPattern(e,n,o);for(var u=0;u<5;u++){var l=2*u;a[u]=o[l],s[u]=o[l+1]}var c=t.decodeDigit(a);i.append(c.toString()),c=this.decodeDigit(s),i.append(c.toString()),o.forEach((function(e){n+=e}))}},t.prototype.decodeStart=function(e){var n=t.skipWhiteSpace(e),r=t.findGuardPattern(e,n,t.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(e,r[0]),r},t.prototype.validateQuietZone=function(e,t){var n=10*this.narrowLineWidth;n=n<t?n:t;for(var r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(0!==n)throw new KE},t.skipWhiteSpace=function(e){var t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new KE;return n},t.prototype.decodeEnd=function(e){e.reverse();try{var n=t.skipWhiteSpace(e),r=void 0;try{r=t.findGuardPattern(e,n,t.END_PATTERN_REVERSED[0])}catch(o){o instanceof KE&&(r=t.findGuardPattern(e,n,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,r[0]);var i=r[0];return r[0]=e.getSize()-r[1],r[1]=e.getSize()-i,r}finally{e.reverse()}},t.findGuardPattern=function(e,n,r){var i=r.length,o=new Int32Array(i),a=e.getSize(),s=!1,u=0,l=n;o.fill(0);for(var c=n;c<a;c++)if(e.get(c)!==s)o[u]++;else{if(u===i-1){if(lA.patternMatchVariance(o,r,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[l,c];l+=o[0]+o[1],cE.arraycopy(o,2,o,0,u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,s=!s}throw new KE},t.decodeDigit=function(e){for(var n=t.MAX_AVG_VARIANCE,r=-1,i=t.PATTERNS.length,o=0;o<i;o++){var a=t.PATTERNS[o],s=lA.patternMatchVariance(e,a,t.MAX_INDIVIDUAL_VARIANCE);s<n?(n=s,r=o):s===n&&(r=-1)}if(r>=0)return r%10;throw new KE},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t}(lA),wA=bA,xA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return xA(t,e),t.findStartGuardPattern=function(e){for(var n,r=!1,i=0,o=Int32Array.from([0,0,0]);!r;){o=Int32Array.from([0,0,0]);var a=(n=t.findGuardPattern(e,i,!1,this.START_END_PATTERN,o))[0],s=a-((i=n[1])-a);s>=0&&(r=e.isRange(s,a,!1))}return n},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var n=e.length;if(0===n)return!1;var r=parseInt(e.charAt(n-1),10);return t.getStandardUPCEANChecksum(e.substring(0,n-1))===r},t.getStandardUPCEANChecksum=function(e){for(var t=e.length,n=0,r=t-1;r>=0;r-=2){if((i=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||i>9)throw new IE;n+=i}n*=3;for(r=t-2;r>=0;r-=2){var i;if((i=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||i>9)throw new IE;n+=i}return(1e3-n)%10},t.decodeEnd=function(e,n){return t.findGuardPattern(e,n,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))},t.findGuardPattern=function(e,n,r,i,o){for(var a=e.getSize(),s=0,u=n=r?e.getNextUnset(n):e.getNextSet(n),l=i.length,c=r,d=n;d<a;d++)if(e.get(d)!==c)o[s]++;else{if(s===l-1){if(lA.patternMatchVariance(o,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([u,d]);u+=o[0]+o[1];for(var h=o.slice(2,o.length-1),f=0;f<s-1;f++)o[f]=h[f];o[s-1]=0,o[s]=0,s--}else s++;o[s]=1,c=!c}throw new KE},t.decodeDigit=function(e,n,r,i){this.recordPattern(e,r,n);for(var o=this.MAX_AVG_VARIANCE,a=-1,s=i.length,u=0;u<s;u++){var l=i[u],c=lA.patternMatchVariance(n,l,t.MAX_INDIVIDUAL_VARIANCE);c<o&&(o=c,a=u)}if(a>=0)return a;throw new KE},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}(lA),CA=_A,EA=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},SA=function(){function e(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return e.prototype.decodeRow=function(t,n,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(n,r,i),a=i.toString(),s=e.parseExtensionString(a),u=[new HS((r[0]+r[1])/2,t),new HS(o,t)],l=new dS(a,null,0,u,fS.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&l.putAllMetadata(s),l},e.prototype.decodeMiddle=function(t,n,r){var i,o,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=t.getSize(),u=n[1],l=0,c=0;c<5&&u<s;c++){var d=CA.decodeDigit(t,a,u,CA.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+d%10);try{for(var h=(i=void 0,EA(a)),f=h.next();!f.done;f=h.next()){u+=f.value}}catch(m){i={error:m}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}d>=10&&(l|=1<<4-c),4!==c&&(u=t.getNextSet(u),u=t.getNextUnset(u))}if(5!==r.length)throw new KE;var p=this.determineCheckDigit(l);if(e.extensionChecksum(r.toString())!==p)throw new KE;return u},e.extensionChecksum=function(e){for(var t=e.length,n=0,r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return(n*=3)%10},e.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new KE},e.parseExtensionString=function(t){if(5!==t.length)return null;var n=e.parseExtension5String(t);return null==n?null:new Map([[mS.SUGGESTED_PRICE,n]])},e.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}var n=parseInt(e.substring(1)),r=n%100;return t+(n/100).toString()+"."+(r<10?"0"+r:r.toString())},e}(),AA=SA,kA=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},IA=function(){function e(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return e.prototype.decodeRow=function(t,n,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(n,r,i),a=i.toString(),s=e.parseExtensionString(a),u=[new HS((r[0]+r[1])/2,t),new HS(o,t)],l=new dS(a,null,0,u,fS.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&l.putAllMetadata(s),l},e.prototype.decodeMiddle=function(e,t,n){var r,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var a=e.getSize(),s=t[1],u=0,l=0;l<2&&s<a;l++){var c=CA.decodeDigit(e,o,s,CA.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+c%10);try{for(var d=(r=void 0,kA(o)),h=d.next();!h.done;h=d.next()){s+=h.value}}catch(f){r={error:f}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}c>=10&&(u|=1<<1-l),1!==l&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(2!==n.length)throw new KE;if(parseInt(n.toString())%4!==u)throw new KE;return s},e.parseExtensionString=function(e){return 2!==e.length?null:new Map([[mS.ISSUE_NUMBER,parseInt(e)]])},e}(),RA=IA,TA=function(){function e(){}return e.decodeRow=function(e,t,n){var r=CA.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new AA).decodeRow(e,t,r)}catch(i){return(new RA).decodeRow(e,t,r)}},e.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),e}(),NA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),OA=function(e){function t(){var n=e.call(this)||this;n.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map((function(e){return Int32Array.from(e)}));for(var r=10;r<20;r++){for(var i=t.L_PATTERNS[r-10],o=new Int32Array(i.length),a=0;a<i.length;a++)o[a]=i[i.length-a-1];t.L_AND_G_PATTERNS[r]=o}return n}return NA(t,e),t.prototype.decodeRow=function(e,n,r){var i=t.findStartGuardPattern(n),o=null==r?null:r.get(SE.NEED_RESULT_POINT_CALLBACK);if(null!=o){var a=new HS((i[0]+i[1])/2,e);o.foundPossibleResultPoint(a)}var s=this.decodeMiddle(n,i,this.decodeRowStringBuffer),u=s.rowOffset,l=s.resultString;if(null!=o){var c=new HS(u,e);o.foundPossibleResultPoint(c)}var d=t.decodeEnd(n,u);if(null!=o){var h=new HS((d[0]+d[1])/2,e);o.foundPossibleResultPoint(h)}var f=d[1],p=f+(f-d[0]);if(p>=n.getSize()||!n.isRange(f,p,!1))throw new KE;var m=l.toString();if(m.length<8)throw new IE;if(!t.checkChecksum(m))throw new sE;var g=(i[1]+i[0])/2,v=(d[1]+d[0])/2,y=this.getBarcodeFormat(),b=[new HS(g,e),new HS(v,e)],w=new dS(m,null,0,b,y,(new Date).getTime()),x=0;try{var _=TA.decodeRow(e,n,d[1]);w.putMetadata(mS.UPC_EAN_EXTENSION,_.getText()),w.putAllMetadata(_.getResultMetadata()),w.addResultPoints(_.getResultPoints()),x=_.getText().length}catch(A){}var C=null==r?null:r.get(SE.ALLOWED_EAN_EXTENSIONS);if(null!=C){var E=!1;for(var S in C)if(x.toString()===S){E=!0;break}if(!E)throw new KE}return y===fS.EAN_13||fS.UPC_A,w},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var n=e.length;if(0===n)return!1;var r=parseInt(e.charAt(n-1),10);return t.getStandardUPCEANChecksum(e.substring(0,n-1))===r},t.getStandardUPCEANChecksum=function(e){for(var t=e.length,n=0,r=t-1;r>=0;r-=2){if((i=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||i>9)throw new IE;n+=i}n*=3;for(r=t-2;r>=0;r-=2){var i;if((i=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||i>9)throw new IE;n+=i}return(1e3-n)%10},t.decodeEnd=function(e,n){return t.findGuardPattern(e,n,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t}(CA),DA=OA,MA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),PA=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},FA=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return MA(t,e),t.prototype.decodeMiddle=function(e,n,r){var i,o,a,s,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var l=e.getSize(),c=n[1],d=0,h=0;h<6&&c<l;h++){var f=DA.decodeDigit(e,u,c,DA.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+f%10);try{for(var p=(i=void 0,PA(u)),m=p.next();!m.done;m=p.next()){c+=m.value}}catch(y){i={error:y}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}f>=10&&(d|=1<<5-h)}r=t.determineFirstDigit(r,d),c=DA.findGuardPattern(e,c,!0,DA.MIDDLE_PATTERN,new Int32Array(DA.MIDDLE_PATTERN.length).fill(0))[1];for(h=0;h<6&&c<l;h++){f=DA.decodeDigit(e,u,c,DA.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+f);try{for(var g=(a=void 0,PA(u)),v=g.next();!v.done;v=g.next()){c+=v.value}}catch(b){a={error:b}}finally{try{v&&!v.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}}return{rowOffset:c,resultString:r}},t.prototype.getBarcodeFormat=function(){return fS.EAN_13},t.determineFirstDigit=function(e,t){for(var n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode("0".charCodeAt(0)+n)+e;throw new KE},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t}(DA),BA=FA,LA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zA=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jA=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return LA(t,e),t.prototype.decodeMiddle=function(e,t,n){var r,i,o,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var u=e.getSize(),l=t[1],c=0;c<4&&l<u;c++){var d=DA.decodeDigit(e,s,l,DA.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+d);try{for(var h=(r=void 0,zA(s)),f=h.next();!f.done;f=h.next()){l+=f.value}}catch(g){r={error:g}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}l=DA.findGuardPattern(e,l,!0,DA.MIDDLE_PATTERN,new Int32Array(DA.MIDDLE_PATTERN.length).fill(0))[1];for(c=0;c<4&&l<u;c++){d=DA.decodeDigit(e,s,l,DA.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+d);try{for(var p=(o=void 0,zA(s)),m=p.next();!m.done;m=p.next()){l+=m.value}}catch(v){o={error:v}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}}return{rowOffset:l,resultString:n}},t.prototype.getBarcodeFormat=function(){return fS.EAN_8},t}(DA),WA=jA,HA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),VA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ean13Reader=new BA,t}return HA(t,e),t.prototype.getBarcodeFormat=function(){return fS.UPC_A},t.prototype.decode=function(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))},t.prototype.decodeRow=function(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))},t.prototype.decodeMiddle=function(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)},t.prototype.maybeReturnResult=function(e){var t=e.getText();if("0"===t.charAt(0)){var n=new dS(t.substring(1),null,null,e.getResultPoints(),fS.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new KE},t.prototype.reset=function(){this.ean13Reader.reset()},t}(DA),GA=VA,UA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),KA=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},XA=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return UA(t,e),t.prototype.decodeMiddle=function(e,n,r){var i,o,a=this.decodeMiddleCounters.map((function(e){return e}));a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),u=n[1],l=0,c=0;c<6&&u<s;c++){var d=t.decodeDigit(e,a,u,t.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+d%10);try{for(var h=(i=void 0,KA(a)),f=h.next();!f.done;f=h.next()){u+=f.value}}catch(p){i={error:p}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}d>=10&&(l|=1<<5-c)}return t.determineNumSysAndCheckDigit(new WE(r),l),u},t.prototype.decodeEnd=function(e,n){return t.findGuardPatternWithoutCounters(e,n,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(e){return DA.checkChecksum(t.convertUPCEtoUPCA(e))},t.determineNumSysAndCheckDigit=function(e,t){for(var n=0;n<=1;n++)for(var r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return e.insert(0,"0"+n),void e.append("0"+r);throw KE.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return fS.UPC_E},t.convertUPCEtoUPCA=function(e){var t=e.slice(1,7).split("").map((function(e){return e.charCodeAt(0)})),n=new WE;n.append(e.charAt(0));var r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r)}return e.length>=8&&n.append(e.charAt(7)),n.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t}(DA),ZA=XA,qA=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),YA=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},JA=function(e){function t(t){var n=e.call(this)||this,r=null==t?null:t.get(SE.POSSIBLE_FORMATS),i=[];return null!=r&&(r.indexOf(fS.EAN_13)>-1&&i.push(new BA),r.indexOf(fS.UPC_A)>-1&&i.push(new GA),r.indexOf(fS.EAN_8)>-1&&i.push(new WA),r.indexOf(fS.UPC_E)>-1&&i.push(new ZA)),0===i.length&&(i.push(new BA),i.push(new GA),i.push(new WA),i.push(new ZA)),n.readers=i,n}return qA(t,e),t.prototype.decodeRow=function(e,t,n){var r,i;try{for(var o=YA(this.readers),a=o.next();!a.done;a=o.next()){var s=a.value;try{var u=s.decodeRow(e,t,n),l=u.getBarcodeFormat()===fS.EAN_13&&"0"===u.getText().charAt(0),c=null==n?null:n.get(SE.POSSIBLE_FORMATS),d=null==c||c.includes(fS.UPC_A);if(l&&d){var h=u.getRawBytes(),f=new dS(u.getText().substring(1),h,h?h.length:null,u.getResultPoints(),fS.UPC_A);return f.putAllMetadata(u.getResultMetadata()),f}return u}catch(p){}}}catch(m){r={error:m}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new KE},t.prototype.reset=function(){var e,t;try{for(var n=YA(this.readers),r=n.next();!r.done;r=n.next()){r.value.reset()}}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t}(lA),QA=JA,$A=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ek=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tk=function(e){function t(){var t=e.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return $A(t,e),t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(e,n){for(var r=0;r<n.length;r++)if(lA.patternMatchVariance(e,n[r],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return r;throw new KE},t.count=function(e){return LS.sum(new Int32Array(e))},t.increment=function(e,t){for(var n=0,r=t[0],i=1;i<e.length;i++)t[i]>r&&(r=t[i],n=i);e[n]++},t.decrement=function(e,t){for(var n=0,r=t[0],i=1;i<e.length;i++)t[i]<r&&(r=t[i],n=i);e[n]--},t.isFinderPattern=function(e){var n,r,i=e[0]+e[1],o=i/(i+e[2]+e[3]);if(o>=t.MIN_FINDER_PATTERN_RATIO&&o<=t.MAX_FINDER_PATTERN_RATIO){var a=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;try{for(var u=ek(e),l=u.next();!l.done;l=u.next()){var c=l.value;c>s&&(s=c),c<a&&(a=c)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return s<10*a}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t}(lA),nk=tk,rk=function(){function e(e,t){this.value=e,this.checksumPortion=t}return e.prototype.getValue=function(){return this.value},e.prototype.getChecksumPortion=function(){return this.checksumPortion},e.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value&&this.checksumPortion===n.checksumPortion},e.prototype.hashCode=function(){return this.value^this.checksumPortion},e}(),ik=rk,ok=function(){function e(e,t,n,r,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new HS(n,i)),this.resultPoints.push(new HS(r,i))}return e.prototype.getValue=function(){return this.value},e.prototype.getStartEnd=function(){return this.startEnd},e.prototype.getResultPoints=function(){return this.resultPoints},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value},e.prototype.hashCode=function(){return this.value},e}(),ak=ok,sk=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},uk=function(){function e(){}return e.getRSSvalue=function(t,n,r){var i,o,a=0;try{for(var s=sk(t),u=s.next();!u.done;u=s.next()){a+=u.value}}catch(v){i={error:v}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}for(var l=0,c=0,d=t.length,h=0;h<d-1;h++){var f=void 0;for(f=1,c|=1<<h;f<t[h];f++,c&=~(1<<h)){var p=e.combins(a-f-1,d-h-2);if(r&&0===c&&a-f-(d-h-1)>=d-h-1&&(p-=e.combins(a-f-(d-h),d-h-2)),d-h-1>1){for(var m=0,g=a-f-(d-h-2);g>n;g--)m+=e.combins(a-f-g-1,d-h-3);p-=m*(d-1-h)}else a-f>n&&p--;l+=p}a-=f}return l},e.combins=function(e,t){var n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);for(var i=1,o=1,a=e;a>n;a--)i*=a,o<=r&&(i/=o,o++);for(;o<=r;)i/=o,o++;return i},e}(),lk=uk,ck=function(){function e(){}return e.buildBitArray=function(e){var t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);for(var n=new CE(12*t),r=0,i=e[0].getRightChar().getValue(),o=11;o>=0;--o)0!=(i&1<<o)&&n.set(r),r++;for(o=1;o<e.length;++o){for(var a=e[o],s=a.getLeftChar().getValue(),u=11;u>=0;--u)0!=(s&1<<u)&&n.set(r),r++;if(null!=a.getRightChar()){var l=a.getRightChar().getValue();for(u=11;u>=0;--u)0!=(l&1<<u)&&n.set(r),r++}}return n},e}(),dk=ck,hk=function(){function e(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return e.prototype.getDecodedInformation=function(){return this.decodedInformation},e.prototype.isFinished=function(){return this.finished},e}(),fk=function(){function e(e){this.newPosition=e}return e.prototype.getNewPosition=function(){return this.newPosition},e}(),pk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mk=function(e){function t(t,n){var r=e.call(this,t)||this;return r.value=n,r}return pk(t,e),t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t}(fk),gk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vk=function(e){function t(t,n,r){var i=e.call(this,t)||this;return r?(i.remaining=!0,i.remainingValue=i.remainingValue):(i.remaining=!1,i.remainingValue=0),i.newString=n,i}return gk(t,e),t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t}(fk),yk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bk=function(e){function t(t,n,r){var i=e.call(this,t)||this;if(n<0||n>10||r<0||r>10)throw new IE;return i.firstDigit=n,i.secondDigit=r,i}return yk(t,e),t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t}(fk),wk=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xk=function(){function e(){}return e.parseFieldsInGeneralPurpose=function(t){var n,r,i,o,a,s,u,l;if(!t)return null;if(t.length<2)throw new KE;var c=t.substring(0,2);try{for(var d=wk(e.TWO_DIGIT_DATA_LENGTH),h=d.next();!h.done;h=d.next()){if((x=h.value)[0]===c)return x[1]===e.VARIABLE_LENGTH?e.processVariableAI(2,x[2],t):e.processFixedAI(2,x[1],t)}}catch(_){n={error:_}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}if(t.length<3)throw new KE;var f=t.substring(0,3);try{for(var p=wk(e.THREE_DIGIT_DATA_LENGTH),m=p.next();!m.done;m=p.next()){if((x=m.value)[0]===f)return x[1]===e.VARIABLE_LENGTH?e.processVariableAI(3,x[2],t):e.processFixedAI(3,x[1],t)}}catch(C){i={error:C}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}try{for(var g=wk(e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),v=g.next();!v.done;v=g.next()){if((x=v.value)[0]===f)return x[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,x[2],t):e.processFixedAI(4,x[1],t)}}catch(E){a={error:E}}finally{try{v&&!v.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}if(t.length<4)throw new KE;var y=t.substring(0,4);try{for(var b=wk(e.FOUR_DIGIT_DATA_LENGTH),w=b.next();!w.done;w=b.next()){var x;if((x=w.value)[0]===y)return x[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,x[2],t):e.processFixedAI(4,x[1],t)}}catch(S){u={error:S}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(u)throw u.error}}throw new KE},e.processFixedAI=function(t,n,r){if(r.length<t)throw new KE;var i=r.substring(0,t);if(r.length<t+n)throw new KE;var o=r.substring(t,t+n),a=r.substring(t+n),s="("+i+")"+o,u=e.parseFieldsInGeneralPurpose(a);return null==u?s:s+u},e.processVariableAI=function(t,n,r){var i,o=r.substring(0,t);i=r.length<t+n?r.length:t+n;var a=r.substring(t,i),s=r.substring(i),u="("+o+")"+a,l=e.parseFieldsInGeneralPurpose(s);return null==l?u:u+l},e.VARIABLE_LENGTH=[],e.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",e.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",e.VARIABLE_LENGTH,20],["22",e.VARIABLE_LENGTH,29],["30",e.VARIABLE_LENGTH,8],["37",e.VARIABLE_LENGTH,8],["90",e.VARIABLE_LENGTH,30],["91",e.VARIABLE_LENGTH,30],["92",e.VARIABLE_LENGTH,30],["93",e.VARIABLE_LENGTH,30],["94",e.VARIABLE_LENGTH,30],["95",e.VARIABLE_LENGTH,30],["96",e.VARIABLE_LENGTH,30],["97",e.VARIABLE_LENGTH,3],["98",e.VARIABLE_LENGTH,30],["99",e.VARIABLE_LENGTH,30]],e.THREE_DIGIT_DATA_LENGTH=[["240",e.VARIABLE_LENGTH,30],["241",e.VARIABLE_LENGTH,30],["242",e.VARIABLE_LENGTH,6],["250",e.VARIABLE_LENGTH,30],["251",e.VARIABLE_LENGTH,30],["253",e.VARIABLE_LENGTH,17],["254",e.VARIABLE_LENGTH,20],["400",e.VARIABLE_LENGTH,30],["401",e.VARIABLE_LENGTH,30],["402",17],["403",e.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",e.VARIABLE_LENGTH,20],["421",e.VARIABLE_LENGTH,15],["422",3],["423",e.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",e.VARIABLE_LENGTH,15],["391",e.VARIABLE_LENGTH,18],["392",e.VARIABLE_LENGTH,15],["393",e.VARIABLE_LENGTH,18],["703",e.VARIABLE_LENGTH,30]],e.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",e.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",e.VARIABLE_LENGTH,20],["8003",e.VARIABLE_LENGTH,30],["8004",e.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",e.VARIABLE_LENGTH,30],["8008",e.VARIABLE_LENGTH,12],["8018",18],["8020",e.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",e.VARIABLE_LENGTH,70],["8200",e.VARIABLE_LENGTH,70]],e}(),_k=xk,Ck=function(){function e(e){this.buffer=new WE,this.information=e}return e.prototype.decodeAllCodes=function(e,t){for(var n=t,r=null;;){var i=this.decodeGeneralPurposeField(n,r),o=_k.parseFieldsInGeneralPurpose(i.getNewString());if(null!=o&&e.append(o),r=i.isRemaining()?""+i.getRemainingValue():null,n===i.getNewPosition())break;n=i.getNewPosition()}return e.toString()},e.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},e.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return new bk(this.information.getSize(),0===t?bk.FNC1:t-1,bk.FNC1)}var n=this.extractNumericValueFromBitArray(e,7);return new bk(e+7,(n-8)/11,(n-8)%11)},e.prototype.extractNumericValueFromBitArray=function(t,n){return e.extractNumericValueFromBitArray(this.information,t,n)},e.extractNumericValueFromBitArray=function(e,t,n){for(var r=0,i=0;i<n;++i)e.get(t+i)&&(r|=1<<n-i-1);return r},e.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return null!=n&&n.isRemaining()?new vk(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new vk(this.current.getPosition(),this.buffer.toString())},e.prototype.parseBlocks=function(){var e,t;do{var n=this.current.getPosition();if(e=this.current.isAlpha()?(t=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(t=this.parseIsoIec646Block()).isFinished():(t=this.parseNumericBlock()).isFinished(),!(n!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()},e.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return t=e.isSecondDigitFNC1()?new vk(this.current.getPosition(),this.buffer.toString()):new vk(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new hk(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){t=new vk(this.current.getPosition(),this.buffer.toString());return new hk(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new hk(!1)},e.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new vk(this.current.getPosition(),this.buffer.toString());return new hk(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new hk(!1)},e.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new vk(this.current.getPosition(),this.buffer.toString());return new hk(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new hk(!1)},e.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253},e.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new mk(e+5,mk.FNC1);if(t>=5&&t<15)return new mk(e+5,"0"+(t-5));var n,r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new mk(e+7,""+(r+1));if(r>=90&&r<116)return new mk(e+7,""+(r+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:n="!";break;case 233:n='"';break;case 234:n="%";break;case 235:n="&";break;case 236:n="'";break;case 237:n="(";break;case 238:n=")";break;case 239:n="*";break;case 240:n="+";break;case 241:n=",";break;case 242:n="-";break;case 243:n=".";break;case 244:n="/";break;case 245:n=":";break;case 246:n=";";break;case 247:n="<";break;case 248:n="=";break;case 249:n=">";break;case 250:n="?";break;case 251:n="_";break;case 252:n=" ";break;default:throw new IE}return new mk(e+8,n)},e.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},e.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new mk(e+5,mk.FNC1);if(t>=5&&t<15)return new mk(e+5,"0"+(t-5));var n,r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new mk(e+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new OS("Decoding invalid alphanumeric value: "+r)}return new mk(e+6,n)},e.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},e.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},e.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},e}(),Ek=Ck,Sk=function(){function e(e){this.information=e,this.generalDecoder=new Ek(e)}return e.prototype.getInformation=function(){return this.information},e.prototype.getGeneralDecoder=function(){return this.generalDecoder},e}(),Ak=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kk=function(e){function t(t){return e.call(this,t)||this}return Ak(t,e),t.prototype.encodeCompressedGtin=function(e,t){e.append("(01)");var n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)},t.prototype.encodeCompressedGtinWithoutAI=function(e,n,r){for(var i=0;i<4;++i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*i,10);o/100===0&&e.append("0"),o/10===0&&e.append("0"),e.append(o)}t.appendCheckDigit(e,r)},t.appendCheckDigit=function(e,t){for(var n=0,r=0;r<13;r++){var i=e.charAt(r+t).charCodeAt(0)-"0".charCodeAt(0);n+=0===(1&r)?3*i:i}10===(n=10-n%10)&&(n=0),e.append(n)},t.GTIN_SIZE=40,t}(Sk),Ik=kk,Rk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tk=function(e){function t(t){return e.call(this,t)||this}return Rk(t,e),t.prototype.parseInformation=function(){var e=new WE;e.append("(01)");var n=e.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return e.append(r),this.encodeCompressedGtinWithoutAI(e,t.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE+44)},t.HEADER_SIZE=4,t}(Ik),Nk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ok=function(e){function t(t){return e.call(this,t)||this}return Nk(t,e),t.prototype.parseInformation=function(){var e=new WE;return this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE)},t.HEADER_SIZE=5,t}(Sk),Dk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mk=function(e){function t(t){return e.call(this,t)||this}return Dk(t,e),t.prototype.encodeCompressedWeight=function(e,t,n){var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);for(var i=this.checkWeight(r),o=1e5,a=0;a<5;++a)i/o===0&&e.append("0"),o/=10;e.append(i)},t}(Ik),Pk=Mk,Fk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bk=function(e){function t(t){return e.call(this,t)||this}return Fk(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()!=t.HEADER_SIZE+Pk.GTIN_SIZE+t.WEIGHT_SIZE)throw new KE;var e=new WE;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+Pk.GTIN_SIZE,t.WEIGHT_SIZE),e.toString()},t.HEADER_SIZE=5,t.WEIGHT_SIZE=15,t}(Pk),Lk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zk=function(e){function t(t){return e.call(this,t)||this}return Lk(t,e),t.prototype.addWeightCode=function(e,t){e.append("(3103)")},t.prototype.checkWeight=function(e){return e},t}(Bk),jk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wk=function(e){function t(t){return e.call(this,t)||this}return jk(t,e),t.prototype.addWeightCode=function(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")},t.prototype.checkWeight=function(e){return e<1e4?e:e-1e4},t}(Bk),Hk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vk=function(e){function t(t){return e.call(this,t)||this}return Hk(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+Ik.GTIN_SIZE)throw new KE;var e=new WE;this.encodeCompressedGtin(e,t.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Ik.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");var r=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+Ik.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return e.append(r.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t}(Ik),Gk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Uk=function(e){function t(t){return e.call(this,t)||this}return Gk(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+Ik.GTIN_SIZE)throw new KE;var e=new WE;this.encodeCompressedGtin(e,t.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Ik.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Ik.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);r/100==0&&e.append("0"),r/10==0&&e.append("0"),e.append(r);var i=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+Ik.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return e.append(i.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t}(Ik),Kk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xk=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.dateCode=r,i.firstAIdigits=n,i}return Kk(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()!=t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new KE;var e=new WE;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(e,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),e.toString()},t.prototype.encodeCompressedDate=function(e,n){var r=this.getGeneralDecoder().extractNumericValueFromBitArray(n,t.DATE_SIZE);if(38400!=r){e.append("("),e.append(this.dateCode),e.append(")");var i=r%32,o=(r/=32)%12+1,a=r/=12;a/10==0&&e.append("0"),e.append(a),o/10==0&&e.append("0"),e.append(o),i/10==0&&e.append("0"),e.append(i)}},t.prototype.addWeightCode=function(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")},t.prototype.checkWeight=function(e){return e%1e5},t.HEADER_SIZE=8,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t}(Pk);var Zk,qk=function(){function e(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}return e.prototype.mayBeLast=function(){return this.maybeLast},e.prototype.getLeftChar=function(){return this.leftchar},e.prototype.getRightChar=function(){return this.rightchar},e.prototype.getFinderPattern=function(){return this.finderpattern},e.prototype.mustBeLast=function(){return null==this.rightchar},e.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},e.equals=function(t,n){return t instanceof e&&(e.equalsOrNull(t.leftchar,n.leftchar)&&e.equalsOrNull(t.rightchar,n.rightchar)&&e.equalsOrNull(t.finderpattern,n.finderpattern))},e.equalsOrNull=function(t,n){return null===t?null===n:e.equals(t,n)},e.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},e}(),Yk=function(){function e(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}return e.prototype.getPairs=function(){return this.pairs},e.prototype.getRowNumber=function(){return this.rowNumber},e.prototype.isReversed=function(){return this.wasReversed},e.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},e.prototype.toString=function(){return"{ "+this.pairs+" }"},e.prototype.equals=function(t,n){return t instanceof e&&(this.checkEqualitity(t,n)&&t.wasReversed===n.wasReversed)},e.prototype.checkEqualitity=function(e,t){var n;if(e&&t)return e.forEach((function(e,r){t.forEach((function(t){e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)}))})),n},e}(),Jk=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qk=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$k=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.pairs=new Array(t.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return Jk(t,e),t.prototype.decodeRow=function(e,n,r){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(e,n))}catch(v){}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(e,n))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(e,t){for(var n,r=!1;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(o){if(o instanceof KE){if(!this.pairs.length)throw new KE;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){var i=this.checkRowsBoolean(!1);if(null!=i)return i;if(null!=(i=this.checkRowsBoolean(!0)))return i}throw new KE},t.prototype.checkRowsBoolean=function(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());var t=null;try{t=this.checkRows(new Array,0)}catch(v){console.log(v)}return e&&(this.rows=this.rows.reverse()),t},t.prototype.checkRows=function(e,n){for(var r,i,o=n;o<this.rows.length;o++){var a=this.rows[o];this.pairs.length=0;try{for(var s=(r=void 0,Qk(e)),u=s.next();!u.done;u=s.next()){var l=u.value;this.pairs.push(l.getPairs())}}catch(d){r={error:d}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}if(this.pairs.push(a.getPairs()),t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var c=new Array(e);c.push(a);try{return this.checkRows(c,o+1)}catch(v){console.log(v)}}}throw new KE},t.isValidSequence=function(e){var n,r;try{for(var i=Qk(t.FINDER_PATTERN_SEQUENCES),o=i.next();!o.done;o=i.next()){var a=o.value;if(!(e.length>a.length)){for(var s=!0,u=0;u<e.length;u++)if(e[u].getFinderPattern().getValue()!=a[u]){s=!1;break}if(s)return!0}}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1},t.prototype.storeRow=function(e,n){for(var r=0,i=!1,o=!1;r<this.rows.length;){var a=this.rows[r];if(a.getRowNumber()>e){o=a.isEquivalent(this.pairs);break}i=a.isEquivalent(this.pairs),r++}o||i||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new Yk(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(e,t){var n,r,i,o,a,s;try{for(var u=Qk(t),l=u.next();!l.done;l=u.next()){var c=l.value;if(c.getPairs().length!==e.length){try{for(var d=(i=void 0,Qk(c.getPairs())),h=d.next();!h.done;h=d.next()){var f=h.value,p=!1;try{for(var m=(a=void 0,Qk(e)),g=m.next();!g.done;g=m.next()){var v=g.value;if(qk.equals(f,v)){p=!0;break}}}catch(y){a={error:y}}finally{try{g&&!g.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}p||!1}}catch(b){i={error:b}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}}}catch(w){n={error:w}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}},t.isPartialRow=function(e,t){var n,r,i,o,a,s;try{for(var u=Qk(t),l=u.next();!l.done;l=u.next()){var c=l.value,d=!0;try{for(var h=(i=void 0,Qk(e)),f=h.next();!f.done;f=h.next()){var p=f.value,m=!1;try{for(var g=(a=void 0,Qk(c.getPairs())),v=g.next();!v.done;v=g.next()){var y=v.value;if(p.equals(y)){m=!0;break}}}catch(b){a={error:b}}finally{try{v&&!v.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}if(!m){d=!1;break}}}catch(w){i={error:w}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}if(d)return!0}}catch(x){n={error:x}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(e){var t=function(e){try{if(e.get(1))return new Tk(e);if(!e.get(2))return new Ok(e);switch(Ek.extractNumericValueFromBitArray(e,1,4)){case 4:return new zk(e);case 5:return new Wk(e)}switch(Ek.extractNumericValueFromBitArray(e,1,5)){case 12:return new Vk(e);case 13:return new Uk(e)}switch(Ek.extractNumericValueFromBitArray(e,1,7)){case 56:return new Xk(e,"310","11");case 57:return new Xk(e,"320","11");case 58:return new Xk(e,"310","13");case 59:return new Xk(e,"320","13");case 60:return new Xk(e,"310","15");case 61:return new Xk(e,"320","15");case 62:return new Xk(e,"310","17");case 63:return new Xk(e,"320","17")}}catch(v){throw console.log(v),new OS("unknown decoder: "+e)}}(dk.buildBitArray(e)),n=t.parseInformation(),r=e[0].getFinderPattern().getResultPoints(),i=e[e.length-1].getFinderPattern().getResultPoints(),o=[r[0],r[1],i[0],i[1]];return new dS(n,null,null,o,fS.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null==n)return!1;for(var r=n.getChecksumPortion(),i=2,o=1;o<this.pairs.size();++o){var a=this.pairs.get(o);r+=a.getLeftChar().getChecksumPortion(),i++;var s=a.getRightChar();null!=s&&(r+=s.getChecksumPortion(),i++)}return 211*(i-4)+(r%=211)==t.getValue()},t.getNextSecondBar=function(e,t){var n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n},t.prototype.retrieveNextPair=function(e,n,r){var i,o=n.length%2==0;this.startFromEven&&(o=!o);var a=!0,s=-1;do{this.findNextPair(e,n,s),null==(i=this.parseFoundFinderPattern(e,r,o))?s=t.getNextSecondBar(e,this.startEnd[0]):a=!1}while(a);var u,l=this.decodeDataCharacter(e,i,o,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new KE;try{u=this.decodeDataCharacter(e,i,o,!1)}catch(v){u=null,console.log(v)}return new qk(l,u,i,!0)},t.prototype.isEmptyPair=function(e){return 0===e.length},t.prototype.findNextPair=function(e,n,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;var o,a=e.getSize();if(r>=0)o=r;else if(this.isEmptyPair(n))o=0;else{o=n[n.length-1].getFinderPattern().getStartEnd()[1]}var s=n.length%2!=0;this.startFromEven&&(s=!s);for(var u=!1;o<a&&(u=!e.get(o));)o++;for(var l=0,c=o,d=o;d<a;d++)if(e.get(d)!=u)i[l]++;else{if(3==l){if(s&&t.reverseCounters(i),t.isFinderPattern(i))return this.startEnd[0]=c,void(this.startEnd[1]=d);s&&t.reverseCounters(i),c+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,u=!u}throw new KE},t.reverseCounters=function(e){for(var t=e.length,n=0;n<t/2;++n){var r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}},t.prototype.parseFoundFinderPattern=function(e,n,r){var i,o,a;if(r){for(var s=this.startEnd[0]-1;s>=0&&!e.get(s);)s--;s++,i=this.startEnd[0]-s,o=s,a=this.startEnd[1]}else o=this.startEnd[0],i=(a=e.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var u,l=this.getDecodeFinderCounters();cE.arraycopy(l,0,l,1,l.length-1),l[0]=i;try{u=this.parseFinderValue(l,t.FINDER_PATTERNS)}catch(v){return null}return new ak(u,[o,a],o,a,n)},t.prototype.decodeDataCharacter=function(e,n,r,i){for(var o=this.getDataCharacterCounters(),a=0;a<o.length;a++)o[a]=0;if(i)t.recordPatternInReverse(e,n.getStartEnd()[0],o);else{t.recordPattern(e,n.getStartEnd()[1],o);for(var s=0,u=o.length-1;s<u;s++,u--){var l=o[s];o[s]=o[u],o[u]=l}}var c=LS.sum(new Int32Array(o))/17,d=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(c-d)/d>.3)throw new KE;var h=this.getOddCounts(),f=this.getEvenCounts(),p=this.getOddRoundingErrors(),m=this.getEvenRoundingErrors();for(s=0;s<o.length;s++){var g=1*o[s]/c,v=g+.5;if(v<1){if(g<.3)throw new KE;v=1}else if(v>8){if(g>8.7)throw new KE;v=8}var y=s/2;0==(1&s)?(h[y]=v,p[y]=g-v):(f[y]=v,m[y]=g-v)}this.adjustOddEvenCounts(17);var b=4*n.getValue()+(r?0:2)+(i?0:1)-1,w=0,x=0;for(s=h.length-1;s>=0;s--){if(t.isNotA1left(n,r,i)){var _=t.WEIGHTS[b][2*s];x+=h[s]*_}w+=h[s]}var C=0;for(s=f.length-1;s>=0;s--)if(t.isNotA1left(n,r,i)){_=t.WEIGHTS[b][2*s+1];C+=f[s]*_}var E=x+C;if(0!=(1&w)||w>13||w<4)throw new KE;var S=(13-w)/2,A=t.SYMBOL_WIDEST[S],k=9-A,I=lk.getRSSvalue(h,A,!0),R=lk.getRSSvalue(f,k,!1),T=t.EVEN_TOTAL_SUBSET[S],N=t.GSUM[S];return new ik(I*T+R+N,E)},t.isNotA1left=function(e,t,n){return!(0==e.getValue()&&t&&n)},t.prototype.adjustOddEvenCounts=function(e){var n=LS.sum(new Int32Array(this.getOddCounts())),r=LS.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1;n>13?o=!0:n<4&&(i=!0);var a=!1,s=!1;r>13?s=!0:r<4&&(a=!0);var u=n+r-e,l=1==(1&n),c=0==(1&r);if(1==u)if(l){if(c)throw new KE;o=!0}else{if(!c)throw new KE;s=!0}else if(-1==u)if(l){if(c)throw new KE;i=!0}else{if(!c)throw new KE;a=!0}else{if(0!=u)throw new KE;if(l){if(!c)throw new KE;n<r?(i=!0,s=!0):(o=!0,a=!0)}else if(c)throw new KE}if(i){if(o)throw new KE;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(s)throw new KE;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PAT_A=0,t.FINDER_PAT_B=1,t.FINDER_PAT_C=2,t.FINDER_PAT_D=3,t.FINDER_PAT_E=4,t.FINDER_PAT_F=5,t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C,t.FINDER_PAT_B,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t}(nk),eI=$k,tI=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nI=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.count=0,i.finderPattern=r,i}return tI(t,e),t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t}(ik),rI=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),iI=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},oI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return rI(t,e),t.prototype.decodeRow=function(e,n,r){var i,o,a,s,u=this.decodePair(n,!1,e,r);t.addOrTally(this.possibleLeftPairs,u),n.reverse();var l=this.decodePair(n,!0,e,r);t.addOrTally(this.possibleRightPairs,l),n.reverse();try{for(var c=iI(this.possibleLeftPairs),d=c.next();!d.done;d=c.next()){var h=d.value;if(h.getCount()>1)try{for(var f=(a=void 0,iI(this.possibleRightPairs)),p=f.next();!p.done;p=f.next()){var m=p.value;if(m.getCount()>1&&t.checkChecksum(h,m))return t.constructResult(h,m)}}catch(g){a={error:g}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}}}catch(v){i={error:v}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}throw new KE},t.addOrTally=function(e,t){var n,r;if(null!=t){var i=!1;try{for(var o=iI(e),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.getValue()===t.getValue()){s.incrementCount(),i=!0;break}}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}i||e.push(t)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(e,t){for(var n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),i=new WE,o=13-r.length;o>0;o--)i.append("0");i.append(r);var a=0;for(o=0;o<13;o++){var s=i.charAt(o).charCodeAt(0)-"0".charCodeAt(0);a+=0===(1&o)?3*s:s}10===(a=10-a%10)&&(a=0),i.append(a.toString());var u=e.getFinderPattern().getResultPoints(),l=t.getFinderPattern().getResultPoints();return new dS(i.toString(),null,0,[u[0],u[1],l[0],l[1]],fS.RSS_14,(new Date).getTime())},t.checkChecksum=function(e,t){var n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r},t.prototype.decodePair=function(e,t,n,r){try{var i=this.findFinderPattern(e,t),o=this.parseFoundFinderPattern(e,n,t,i),a=null==r?null:r.get(SE.NEED_RESULT_POINT_CALLBACK);if(null!=a){var s=(i[0]+i[1])/2;t&&(s=e.getSize()-1-s),a.foundPossibleResultPoint(new HS(s,n))}var u=this.decodeDataCharacter(e,o,!0),l=this.decodeDataCharacter(e,o,!1);return new nI(1597*u.getValue()+l.getValue(),u.getChecksumPortion()+4*l.getChecksumPortion(),o)}catch(c){return null}},t.prototype.decodeDataCharacter=function(e,n,r){for(var i=this.getDataCharacterCounters(),o=0;o<i.length;o++)i[o]=0;if(r)lA.recordPatternInReverse(e,n.getStartEnd()[0],i);else{lA.recordPattern(e,n.getStartEnd()[1]+1,i);for(var a=0,s=i.length-1;a<s;a++,s--){var u=i[a];i[a]=i[s],i[s]=u}}var l=r?16:15,c=LS.sum(new Int32Array(i))/l,d=this.getOddCounts(),h=this.getEvenCounts(),f=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors();for(a=0;a<i.length;a++){var m=i[a]/c,g=Math.floor(m+.5);g<1?g=1:g>8&&(g=8);var v=Math.floor(a/2);0===(1&a)?(d[v]=g,f[v]=m-g):(h[v]=g,p[v]=m-g)}this.adjustOddEvenCounts(r,l);var y=0,b=0;for(a=d.length-1;a>=0;a--)b*=9,b+=d[a],y+=d[a];var w=0,x=0;for(a=h.length-1;a>=0;a--)w*=9,w+=h[a],x+=h[a];var _=b+3*w;if(r){if(0!==(1&y)||y>12||y<4)throw new KE;var C=(12-y)/2,E=9-(R=t.OUTSIDE_ODD_WIDEST[C]),S=lk.getRSSvalue(d,R,!1),A=lk.getRSSvalue(h,E,!0),k=t.OUTSIDE_EVEN_TOTAL_SUBSET[C],I=t.OUTSIDE_GSUM[C];return new ik(S*k+A+I,_)}if(0!==(1&x)||x>10||x<4)throw new KE;C=(10-x)/2,E=9-(R=t.INSIDE_ODD_WIDEST[C]),S=lk.getRSSvalue(d,R,!0),A=lk.getRSSvalue(h,E,!1);var R,T=t.INSIDE_ODD_TOTAL_SUBSET[C];I=t.INSIDE_GSUM[C];return new ik(A*T+S+I,_)},t.prototype.findFinderPattern=function(e,t){var n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;for(var r=e.getSize(),i=!1,o=0;o<r&&t!==(i=!e.get(o));)o++;for(var a=0,s=o,u=o;u<r;u++)if(e.get(u)!==i)n[a]++;else{if(3===a){if(nk.isFinderPattern(n))return[s,u];s+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,a--}else a++;n[a]=1,i=!i}throw new KE},t.prototype.parseFoundFinderPattern=function(e,n,r,i){for(var o=e.get(i[0]),a=i[0]-1;a>=0&&o!==e.get(a);)a--;a++;var s=i[0]-a,u=this.getDecodeFinderCounters(),l=new Int32Array(u.length);cE.arraycopy(u,0,l,1,u.length-1),l[0]=s;var c=this.parseFinderValue(l,t.FINDER_PATTERNS),d=a,h=i[1];return r&&(d=e.getSize()-1-d,h=e.getSize()-1-h),new ak(c,[a,i[1]],d,h,n)},t.prototype.adjustOddEvenCounts=function(e,t){var n=LS.sum(new Int32Array(this.getOddCounts())),r=LS.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1,a=!1,s=!1;e?(n>12?o=!0:n<4&&(i=!0),r>12?s=!0:r<4&&(a=!0)):(n>11?o=!0:n<5&&(i=!0),r>10?s=!0:r<4&&(a=!0));var u=n+r-t,l=(1&n)===(e?1:0),c=1===(1&r);if(1===u)if(l){if(c)throw new KE;o=!0}else{if(!c)throw new KE;s=!0}else if(-1===u)if(l){if(c)throw new KE;i=!0}else{if(!c)throw new KE;a=!0}else{if(0!==u)throw new KE;if(l){if(!c)throw new KE;n<r?(i=!0,s=!0):(o=!0,a=!0)}else if(c)throw new KE}if(i){if(o)throw new KE;nk.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&nk.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(s)throw new KE;nk.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&nk.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t}(nk),aI=oI,sI=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),uI=function(e){function t(t){var n=e.call(this)||this;n.readers=[];var r=t?t.get(SE.POSSIBLE_FORMATS):null,i=t&&void 0!==t.get(SE.ASSUME_CODE_39_CHECK_DIGIT);return r&&((r.includes(fS.EAN_13)||r.includes(fS.UPC_A)||r.includes(fS.EAN_8)||r.includes(fS.UPC_E))&&n.readers.push(new QA(t)),r.includes(fS.CODE_39)&&n.readers.push(new gA(i)),r.includes(fS.CODE_128)&&n.readers.push(new hA),r.includes(fS.ITF)&&n.readers.push(new wA),r.includes(fS.RSS_14)&&n.readers.push(new aI),r.includes(fS.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new eI))),0===n.readers.length&&(n.readers.push(new QA(t)),n.readers.push(new gA),n.readers.push(new QA(t)),n.readers.push(new hA),n.readers.push(new wA),n.readers.push(new aI)),n}return sI(t,e),t.prototype.decodeRow=function(e,t,n){for(var r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch(lt){}throw new KE},t.prototype.reset=function(){this.readers.forEach((function(e){return e.reset()}))},t}(lA),lI=uI,cI=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dI=(function(e){function t(t,n){return void 0===t&&(t=500),e.call(this,new lI(n),t,n)||this}cI(t,e)}(cS),function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}),hI=function(){function e(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}return e.prototype.getECCodewords=function(){return this.ecCodewords},e.prototype.getECBlocks=function(){return this.ecBlocks},e}(),fI=function(){function e(e,t){this.count=e,this.dataCodewords=t}return e.prototype.getCount=function(){return this.count},e.prototype.getDataCodewords=function(){return this.dataCodewords},e}(),pI=function(){function e(e,t,n,r,i,o){var a,s;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=o;var u=0,l=o.getECCodewords(),c=o.getECBlocks();try{for(var d=dI(c),h=d.next();!h.done;h=d.next()){var f=h.value;u+=f.getCount()*(f.getDataCodewords()+l)}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}this.totalCodewords=u}return e.prototype.getVersionNumber=function(){return this.versionNumber},e.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},e.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},e.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},e.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},e.prototype.getTotalCodewords=function(){return this.totalCodewords},e.prototype.getECBlocks=function(){return this.ecBlocks},e.getVersionForDimensions=function(t,n){var r,i;if(0!==(1&t)||0!==(1&n))throw new IE;try{for(var o=dI(e.VERSIONS),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.symbolSizeRows===t&&s.symbolSizeColumns===n)return s}}catch(u){r={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new IE},e.prototype.toString=function(){return""+this.versionNumber},e.buildVersions=function(){return[new e(1,10,10,8,8,new hI(5,new fI(1,3))),new e(2,12,12,10,10,new hI(7,new fI(1,5))),new e(3,14,14,12,12,new hI(10,new fI(1,8))),new e(4,16,16,14,14,new hI(12,new fI(1,12))),new e(5,18,18,16,16,new hI(14,new fI(1,18))),new e(6,20,20,18,18,new hI(18,new fI(1,22))),new e(7,22,22,20,20,new hI(20,new fI(1,30))),new e(8,24,24,22,22,new hI(24,new fI(1,36))),new e(9,26,26,24,24,new hI(28,new fI(1,44))),new e(10,32,32,14,14,new hI(36,new fI(1,62))),new e(11,36,36,16,16,new hI(42,new fI(1,86))),new e(12,40,40,18,18,new hI(48,new fI(1,114))),new e(13,44,44,20,20,new hI(56,new fI(1,144))),new e(14,48,48,22,22,new hI(68,new fI(1,174))),new e(15,52,52,24,24,new hI(42,new fI(2,102))),new e(16,64,64,14,14,new hI(56,new fI(2,140))),new e(17,72,72,16,16,new hI(36,new fI(4,92))),new e(18,80,80,18,18,new hI(48,new fI(4,114))),new e(19,88,88,20,20,new hI(56,new fI(4,144))),new e(20,96,96,22,22,new hI(68,new fI(4,174))),new e(21,104,104,24,24,new hI(56,new fI(6,136))),new e(22,120,120,18,18,new hI(68,new fI(6,175))),new e(23,132,132,20,20,new hI(62,new fI(8,163))),new e(24,144,144,22,22,new hI(62,new fI(8,156),new fI(2,155))),new e(25,8,18,6,16,new hI(7,new fI(1,5))),new e(26,8,32,6,14,new hI(11,new fI(1,10))),new e(27,12,26,10,24,new hI(14,new fI(1,16))),new e(28,12,36,10,16,new hI(18,new fI(1,22))),new e(29,16,36,14,16,new hI(24,new fI(1,32))),new e(30,16,48,14,22,new hI(28,new fI(1,49)))]},e.VERSIONS=e.buildVersions(),e}(),mI=pI,gI=function(){function e(t){var n=t.getHeight();if(n<8||n>144||0!==(1&n))throw new IE;this.version=e.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new VE(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return e.prototype.getVersion=function(){return this.version},e.readVersion=function(e){var t=e.getHeight(),n=e.getWidth();return mI.getVersionForDimensions(t,n)},e.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,r=0,i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),a=!1,s=!1,u=!1,l=!1;do{if(n!==i||0!==r||a)if(n!==i-2||0!==r||0===(3&o)||s)if(n!==i+4||2!==r||0!==(7&o)||u)if(n!==i-2||0!==r||4!==(7&o)||l){do{n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,o)),n-=2,r+=2}while(n>=0&&r<o);n+=1,r+=3;do{n>=0&&r<o&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,o)),n+=2,r-=2}while(n<i&&r>=0);n+=3,r+=1}else e[t++]=255&this.readCorner4(i,o),n-=2,r+=2,l=!0;else e[t++]=255&this.readCorner3(i,o),n-=2,r+=2,u=!0;else e[t++]=255&this.readCorner2(i,o),n-=2,r+=2,s=!0;else e[t++]=255&this.readCorner1(i,o),n-=2,r+=2,a=!0}while(n<i||r<o);if(t!==this.version.getTotalCodewords())throw new IE;return e},e.prototype.readModule=function(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},e.prototype.readUtah=function(e,t,n,r){var i=0;return this.readModule(e-2,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t,n,r)&&(i|=1),i<<=1,this.readModule(e,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e,t,n,r)&&(i|=1),i},e.prototype.readCorner1=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},e.prototype.readCorner2=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},e.prototype.readCorner3=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},e.prototype.readCorner4=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},e.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new nE("Dimension of bitMatrix must match the version size");for(var r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=t/r|0,a=n/i|0,s=new VE(a*i,o*r),u=0;u<o;++u)for(var l=u*r,c=0;c<a;++c)for(var d=c*i,h=0;h<r;++h)for(var f=u*(r+2)+1+h,p=l+h,m=0;m<i;++m){var g=c*(i+2)+1+m;if(e.get(g,f)){var v=d+m;s.set(v,p)}}return s},e}(),vI=gI,yI=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bI=function(){function e(e,t){this.numDataCodewords=e,this.codewords=t}return e.getDataBlocks=function(t,n){var r,i,o,a,s=n.getECBlocks(),u=0,l=s.getECBlocks();try{for(var c=yI(l),d=c.next();!d.done;d=c.next()){u+=(g=d.value).getCount()}}catch(R){r={error:R}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}var h=new Array(u),f=0;try{for(var p=yI(l),m=p.next();!m.done;m=p.next())for(var g=m.value,v=0;v<g.getCount();v++){var y=g.getDataCodewords(),b=s.getECCodewords()+y;h[f++]=new e(y,new Uint8Array(b))}}catch(T){o={error:T}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}var w=h[0].codewords.length-s.getECCodewords(),x=w-1,_=0;for(v=0;v<x;v++)for(var C=0;C<f;C++)h[C].codewords[v]=t[_++];var E=24===n.getVersionNumber(),S=E?8:f;for(C=0;C<S;C++)h[C].codewords[w-1]=t[_++];var A=h[0].codewords.length;for(v=w;v<A;v++)for(C=0;C<f;C++){var k=E?(C+8)%f:C,I=E&&k>7?v-1:v;h[k].codewords[I]=t[_++]}if(_!==t.length)throw new nE;return h},e.prototype.getNumDataCodewords=function(){return this.numDataCodewords},e.prototype.getCodewords=function(){return this.codewords},e}(),wI=bI,xI=function(){function e(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return e.prototype.getBitOffset=function(){return this.bitOffset},e.prototype.getByteOffset=function(){return this.byteOffset},e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new nE(""+e);var t=0,n=this.bitOffset,r=this.byteOffset,i=this.bytes;if(n>0){var o=8-n,a=e<o?e:o,s=255>>8-a<<(u=o-a);t=(i[r]&s)>>u,e-=a,8===(n+=a)&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|255&i[r],r++,e-=8;if(e>0){var u;s=255>>(u=8-e)<<u;t=t<<e|(i[r]&s)>>u,n+=e}}return this.bitOffset=n,this.byteOffset=r,t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}(),_I=xI;!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(Zk||(Zk={}));var CI,EI=function(){function e(){}return e.decode=function(e){var t=new _I(e),n=new WE,r=new WE,i=new Array,o=Zk.ASCII_ENCODE;do{if(o===Zk.ASCII_ENCODE)o=this.decodeAsciiSegment(t,n,r);else{switch(o){case Zk.C40_ENCODE:this.decodeC40Segment(t,n);break;case Zk.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case Zk.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case Zk.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case Zk.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new IE}o=Zk.ASCII_ENCODE}}while(o!==Zk.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new gS(e,n.toString(),0===i.length?null:i,null)},e.decodeAsciiSegment=function(e,t,n){var r=!1;do{var i=e.readBits(8);if(0===i)throw new IE;if(i<=128)return r&&(i+=128),t.append(String.fromCharCode(i-1)),Zk.ASCII_ENCODE;if(129===i)return Zk.PAD_ENCODE;if(i<=229){var o=i-130;o<10&&t.append("0"),t.append(""+o)}else switch(i){case 230:return Zk.C40_ENCODE;case 231:return Zk.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:r=!0;break;case 236:t.append("[)>\x1e05\x1d"),n.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),n.insert(0,"\x1e\x04");break;case 238:return Zk.ANSIX12_ENCODE;case 239:return Zk.TEXT_ENCODE;case 240:return Zk.EDIFACT_ENCODE;default:if(254!==i||0!==e.available())throw new IE}}while(e.available()>0);return Zk.ASCII_ENCODE},e.decodeC40Segment=function(e,t){var n=!1,r=[],i=0;do{if(8===e.available())return;var o=e.readBits(8);if(254===o)return;this.parseTwoBytes(o,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(i){case 0:if(s<3)i=s+1;else{if(!(s<this.C40_BASIC_SET_CHARS.length))throw new IE;var u=this.C40_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),i=0;break;case 2:if(s<this.C40_SHIFT2_SET_CHARS.length){u=this.C40_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new IE}i=0;break;case 3:n?(t.append(String.fromCharCode(s+224)),n=!1):t.append(String.fromCharCode(s+96)),i=0;break;default:throw new IE}}}while(e.available()>0)},e.decodeTextSegment=function(e,t){var n=!1,r=[],i=0;do{if(8===e.available())return;var o=e.readBits(8);if(254===o)return;this.parseTwoBytes(o,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(i){case 0:if(s<3)i=s+1;else{if(!(s<this.TEXT_BASIC_SET_CHARS.length))throw new IE;var u=this.TEXT_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),i=0;break;case 2:if(s<this.TEXT_SHIFT2_SET_CHARS.length){u=this.TEXT_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new IE}i=0;break;case 3:if(!(s<this.TEXT_SHIFT3_SET_CHARS.length))throw new IE;u=this.TEXT_SHIFT3_SET_CHARS[s];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u),i=0;break;default:throw new IE}}}while(e.available()>0)},e.decodeAnsiX12Segment=function(e,t){var n=[];do{if(8===e.available())return;var r=e.readBits(8);if(254===r)return;this.parseTwoBytes(r,e.readBits(8),n);for(var i=0;i<3;i++){var o=n[i];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else{if(!(o<40))throw new IE;t.append(String.fromCharCode(o+51))}}}}while(e.available()>0)},e.parseTwoBytes=function(e,t,n){var r=(e<<8)+t-1,i=Math.floor(r/1600);n[0]=i,r-=1600*i,i=Math.floor(r/40),n[1]=i,n[2]=r-40*i},e.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var r=e.readBits(6);if(31===r){var i=8-e.getBitOffset();return void(8!==i&&e.readBits(i))}0===(32&r)&&(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)},e.decodeBase256Segment=function(e,t,n){var r,i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++);if((r=0===o?e.available()/8|0:o<250?o:250*(o-249)+this.unrandomize255State(e.readBits(8),i++))<0)throw new IE;for(var a=new Uint8Array(r),s=0;s<r;s++){if(e.available()<8)throw new IE;a[s]=this.unrandomize255State(e.readBits(8),i++)}n.push(a);try{t.append(BE.decode(a,zE.ISO88591))}catch(u){throw new OS("Platform does not support required encoding: "+u.message)}},e.unrandomize255State=function(e,t){var n=e-(149*t%255+1);return n>=0?n:n+256},e.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],e.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],e.TEXT_SHIFT2_SET_CHARS=e.C40_SHIFT2_SET_CHARS,e.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],e}(),SI=EI,AI=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},kI=function(){function e(){this.rsDecoder=new MS(AS.DATA_MATRIX_FIELD_256)}return e.prototype.decode=function(e){var t,n,r=new vI(e),i=r.getVersion(),o=r.readCodewords(),a=wI.getDataBlocks(o,i),s=0;try{for(var u=AI(a),l=u.next();!l.done;l=u.next()){s+=l.value.getNumDataCodewords()}}catch(v){t={error:v}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}for(var c=new Uint8Array(s),d=a.length,h=0;h<d;h++){var f=a[h],p=f.getCodewords(),m=f.getNumDataCodewords();this.correctErrors(p,m);for(var g=0;g<m;g++)c[g*d+h]=p[g]}return SI.decode(c)},e.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(i){throw new sE}for(var r=0;r<t;r++)e[r]=n[r]},e}(),II=kI,RI=function(){function e(e){this.image=e,this.rectangleDetector=new XS(this.image)}return e.prototype.detect=function(){var t=this.rectangleDetector.detect(),n=this.detectSolid1(t);if((n=this.detectSolid2(n))[3]=this.correctTopRight(n),!n[3])throw new KE;var r=(n=this.shiftToModuleCenter(n))[0],i=n[1],o=n[2],a=n[3],s=this.transitionsBetween(r,a)+1,u=this.transitionsBetween(o,a)+1;1===(1&s)&&(s+=1),1===(1&u)&&(u+=1),4*s<7*u&&4*u<7*s&&(s=u=Math.max(s,u));var l=e.sampleGrid(this.image,r,i,o,a,s,u);return new VS(l,[r,i,o,a])},e.shiftPoint=function(e,t,n){var r=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new HS(e.getX()+r,e.getY()+i)},e.moveAway=function(e,t,n){var r=e.getX(),i=e.getY();return r<t?r-=1:r+=1,i<n?i-=1:i+=1,new HS(r,i)},e.prototype.detectSolid1=function(e){var t=e[0],n=e[1],r=e[3],i=e[2],o=this.transitionsBetween(t,n),a=this.transitionsBetween(n,r),s=this.transitionsBetween(r,i),u=this.transitionsBetween(i,t),l=o,c=[i,t,n,r];return l>a&&(l=a,c[0]=t,c[1]=n,c[2]=r,c[3]=i),l>s&&(l=s,c[0]=n,c[1]=r,c[2]=i,c[3]=t),l>u&&(c[0]=r,c[1]=i,c[2]=t,c[3]=n),c},e.prototype.detectSolid2=function(t){var n=t[0],r=t[1],i=t[2],o=t[3],a=this.transitionsBetween(n,o),s=e.shiftPoint(r,i,4*(a+1)),u=e.shiftPoint(i,r,4*(a+1));return this.transitionsBetween(s,n)<this.transitionsBetween(u,o)?(t[0]=n,t[1]=r,t[2]=i,t[3]=o):(t[0]=r,t[1]=i,t[2]=o,t[3]=n),t},e.prototype.correctTopRight=function(t){var n=t[0],r=t[1],i=t[2],o=t[3],a=this.transitionsBetween(n,o),s=this.transitionsBetween(r,o),u=e.shiftPoint(n,r,4*(s+1)),l=e.shiftPoint(i,r,4*(a+1));a=this.transitionsBetween(u,o),s=this.transitionsBetween(l,o);var c=new HS(o.getX()+(i.getX()-r.getX())/(a+1),o.getY()+(i.getY()-r.getY())/(a+1)),d=new HS(o.getX()+(n.getX()-r.getX())/(s+1),o.getY()+(n.getY()-r.getY())/(s+1));return this.isValid(c)?this.isValid(d)?this.transitionsBetween(u,c)+this.transitionsBetween(l,c)>this.transitionsBetween(u,d)+this.transitionsBetween(l,d)?c:d:c:this.isValid(d)?d:null},e.prototype.shiftToModuleCenter=function(t){var n=t[0],r=t[1],i=t[2],o=t[3],a=this.transitionsBetween(n,o)+1,s=this.transitionsBetween(i,o)+1,u=e.shiftPoint(n,r,4*s),l=e.shiftPoint(i,r,4*a);1===(1&(a=this.transitionsBetween(u,o)+1))&&(a+=1),1===(1&(s=this.transitionsBetween(l,o)+1))&&(s+=1);var c,d,h=(n.getX()+r.getX()+i.getX()+o.getX())/4,f=(n.getY()+r.getY()+i.getY()+o.getY())/4;return n=e.moveAway(n,h,f),r=e.moveAway(r,h,f),i=e.moveAway(i,h,f),o=e.moveAway(o,h,f),u=e.shiftPoint(n,r,4*s),u=e.shiftPoint(u,o,4*a),c=e.shiftPoint(r,n,4*s),c=e.shiftPoint(c,i,4*a),l=e.shiftPoint(i,o,4*s),l=e.shiftPoint(l,r,4*a),d=e.shiftPoint(o,i,4*s),[u,c,l,d=e.shiftPoint(d,n,4*a)]},e.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},e.sampleGrid=function(e,t,n,r,i,o,a){return tA.getInstance().sampleGrid(e,o,a,.5,.5,o-.5,.5,o-.5,a-.5,.5,a-.5,t.getX(),t.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())},e.prototype.transitionsBetween=function(e,t){var n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),i=Math.trunc(t.getX()),o=Math.trunc(t.getY()),a=Math.abs(o-r)>Math.abs(i-n);if(a){var s=n;n=r,r=s,s=i,i=o,o=s}for(var u=Math.abs(i-n),l=Math.abs(o-r),c=-u/2,d=r<o?1:-1,h=n<i?1:-1,f=0,p=this.image.get(a?r:n,a?n:r),m=n,g=r;m!==i;m+=h){var v=this.image.get(a?g:m,a?m:g);if(v!==p&&(f++,p=v),(c+=l)>0){if(g===o)break;g+=d,c-=u}}return f},e}(),TI=RI,NI=function(){function e(){this.decoder=new II}return e.prototype.decode=function(t,n){var r,i;if(void 0===n&&(n=null),null!=n&&n.has(SE.PURE_BARCODE)){var o=e.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(o),i=e.NO_POINTS}else{var a=new TI(t.getBlackMatrix()).detect();r=this.decoder.decode(a.getBits()),i=a.getPoints()}var s=r.getRawBytes(),u=new dS(r.getText(),s,8*s.length,i,fS.DATA_MATRIX,cE.currentTimeMillis()),l=r.getByteSegments();null!=l&&u.putMetadata(mS.BYTE_SEGMENTS,l);var c=r.getECLevel();return null!=c&&u.putMetadata(mS.ERROR_CORRECTION_LEVEL,c),u},e.prototype.reset=function(){},e.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new KE;var r=this.moduleSize(t,e),i=t[1],o=n[1],a=t[0],s=(n[0]-a+1)/r,u=(o-i+1)/r;if(s<=0||u<=0)throw new KE;var l=r/2;i+=l,a+=l;for(var c=new VE(s,u),d=0;d<u;d++)for(var h=i+d*r,f=0;f<s;f++)e.get(a+f*r,h)&&c.set(f,d);return c},e.moduleSize=function(e,t){for(var n=t.getWidth(),r=e[0],i=e[1];r<n&&t.get(r,i);)r++;if(r===n)throw new KE;var o=r-e[0];if(0===o)throw new KE;return o},e.NO_POINTS=[],e}(),OI=NI,DI=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t){return void 0===t&&(t=500),e.call(this,new OI,t)||this}DI(t,e)}(cS);!function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(CI||(CI={}));var MI,PI=function(){function e(t,n,r){this.value=t,this.stringValue=n,this.bits=r,e.FOR_BITS.set(r,this),e.FOR_VALUE.set(t,this)}return e.prototype.getValue=function(){return this.value},e.prototype.getBits=function(){return this.bits},e.fromString=function(t){switch(t){case"L":return e.L;case"M":return e.M;case"Q":return e.Q;case"H":return e.H;default:throw new $C(t+"not available")}},e.prototype.toString=function(){return this.stringValue},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value},e.forBits=function(t){if(t<0||t>=e.FOR_BITS.size)throw new nE;return e.FOR_BITS.get(t)},e.FOR_BITS=new Map,e.FOR_VALUE=new Map,e.L=new e(CI.L,"L",1),e.M=new e(CI.M,"M",0),e.Q=new e(CI.Q,"Q",3),e.H=new e(CI.H,"H",2),e}(),FI=PI,BI=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},LI=function(){function e(e){this.errorCorrectionLevel=FI.forBits(e>>3&3),this.dataMask=7&e}return e.numBitsDiffering=function(e,t){return xE.bitCount(e^t)},e.decodeFormatInformation=function(t,n){var r=e.doDecodeFormatInformation(t,n);return null!==r?r:e.doDecodeFormatInformation(t^e.FORMAT_INFO_MASK_QR,n^e.FORMAT_INFO_MASK_QR)},e.doDecodeFormatInformation=function(t,n){var r,i,o=Number.MAX_SAFE_INTEGER,a=0;try{for(var s=BI(e.FORMAT_INFO_DECODE_LOOKUP),u=s.next();!u.done;u=s.next()){var l=u.value,c=l[0];if(c===t||c===n)return new e(l[1]);var d=e.numBitsDiffering(t,c);d<o&&(a=l[1],o=d),t!==n&&(d=e.numBitsDiffering(n,c))<o&&(a=l[1],o=d)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o<=3?new e(a):null},e.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},e.prototype.getDataMask=function(){return this.dataMask},e.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask},e.FORMAT_INFO_MASK_QR=21522,e.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],e}(),zI=LI,jI=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},WI=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return e.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},e.prototype.getNumBlocks=function(){var e,t,n=0,r=this.ecBlocks;try{for(var i=jI(r),o=i.next();!o.done;o=i.next()){n+=o.value.getCount()}}catch(a){e={error:a}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},e.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},e.prototype.getECBlocks=function(){return this.ecBlocks},e}(),HI=WI,VI=function(){function e(e,t){this.count=e,this.dataCodewords=t}return e.prototype.getCount=function(){return this.count},e.prototype.getDataCodewords=function(){return this.dataCodewords},e}(),GI=VI,UI=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},KI=function(){function e(e,t){for(var n,r,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=i;var a=0,s=i[0].getECCodewordsPerBlock(),u=i[0].getECBlocks();try{for(var l=UI(u),c=l.next();!c.done;c=l.next()){var d=c.value;a+=d.getCount()*(d.getDataCodewords()+s)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}this.totalCodewords=a}return e.prototype.getVersionNumber=function(){return this.versionNumber},e.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},e.prototype.getTotalCodewords=function(){return this.totalCodewords},e.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},e.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},e.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new IE;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new IE}},e.getVersionForNumber=function(t){if(t<1||t>40)throw new nE;return e.VERSIONS[t-1]},e.decodeVersionInformation=function(t){for(var n=Number.MAX_SAFE_INTEGER,r=0,i=0;i<e.VERSION_DECODE_INFO.length;i++){var o=e.VERSION_DECODE_INFO[i];if(o===t)return e.getVersionForNumber(i+7);var a=zI.numBitsDiffering(t,o);a<n&&(r=i+7,n=a)}return n<=3?e.getVersionForNumber(r):null},e.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new VE(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,r=0;r<n;r++)for(var i=this.alignmentPatternCenters[r]-2,o=0;o<n;o++)0===r&&(0===o||o===n-1)||r===n-1&&0===o||t.setRegion(this.alignmentPatternCenters[o]-2,i,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},e.prototype.toString=function(){return""+this.versionNumber},e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),e.VERSIONS=[new e(1,new Int32Array(0),new HI(7,new GI(1,19)),new HI(10,new GI(1,16)),new HI(13,new GI(1,13)),new HI(17,new GI(1,9))),new e(2,Int32Array.from([6,18]),new HI(10,new GI(1,34)),new HI(16,new GI(1,28)),new HI(22,new GI(1,22)),new HI(28,new GI(1,16))),new e(3,Int32Array.from([6,22]),new HI(15,new GI(1,55)),new HI(26,new GI(1,44)),new HI(18,new GI(2,17)),new HI(22,new GI(2,13))),new e(4,Int32Array.from([6,26]),new HI(20,new GI(1,80)),new HI(18,new GI(2,32)),new HI(26,new GI(2,24)),new HI(16,new GI(4,9))),new e(5,Int32Array.from([6,30]),new HI(26,new GI(1,108)),new HI(24,new GI(2,43)),new HI(18,new GI(2,15),new GI(2,16)),new HI(22,new GI(2,11),new GI(2,12))),new e(6,Int32Array.from([6,34]),new HI(18,new GI(2,68)),new HI(16,new GI(4,27)),new HI(24,new GI(4,19)),new HI(28,new GI(4,15))),new e(7,Int32Array.from([6,22,38]),new HI(20,new GI(2,78)),new HI(18,new GI(4,31)),new HI(18,new GI(2,14),new GI(4,15)),new HI(26,new GI(4,13),new GI(1,14))),new e(8,Int32Array.from([6,24,42]),new HI(24,new GI(2,97)),new HI(22,new GI(2,38),new GI(2,39)),new HI(22,new GI(4,18),new GI(2,19)),new HI(26,new GI(4,14),new GI(2,15))),new e(9,Int32Array.from([6,26,46]),new HI(30,new GI(2,116)),new HI(22,new GI(3,36),new GI(2,37)),new HI(20,new GI(4,16),new GI(4,17)),new HI(24,new GI(4,12),new GI(4,13))),new e(10,Int32Array.from([6,28,50]),new HI(18,new GI(2,68),new GI(2,69)),new HI(26,new GI(4,43),new GI(1,44)),new HI(24,new GI(6,19),new GI(2,20)),new HI(28,new GI(6,15),new GI(2,16))),new e(11,Int32Array.from([6,30,54]),new HI(20,new GI(4,81)),new HI(30,new GI(1,50),new GI(4,51)),new HI(28,new GI(4,22),new GI(4,23)),new HI(24,new GI(3,12),new GI(8,13))),new e(12,Int32Array.from([6,32,58]),new HI(24,new GI(2,92),new GI(2,93)),new HI(22,new GI(6,36),new GI(2,37)),new HI(26,new GI(4,20),new GI(6,21)),new HI(28,new GI(7,14),new GI(4,15))),new e(13,Int32Array.from([6,34,62]),new HI(26,new GI(4,107)),new HI(22,new GI(8,37),new GI(1,38)),new HI(24,new GI(8,20),new GI(4,21)),new HI(22,new GI(12,11),new GI(4,12))),new e(14,Int32Array.from([6,26,46,66]),new HI(30,new GI(3,115),new GI(1,116)),new HI(24,new GI(4,40),new GI(5,41)),new HI(20,new GI(11,16),new GI(5,17)),new HI(24,new GI(11,12),new GI(5,13))),new e(15,Int32Array.from([6,26,48,70]),new HI(22,new GI(5,87),new GI(1,88)),new HI(24,new GI(5,41),new GI(5,42)),new HI(30,new GI(5,24),new GI(7,25)),new HI(24,new GI(11,12),new GI(7,13))),new e(16,Int32Array.from([6,26,50,74]),new HI(24,new GI(5,98),new GI(1,99)),new HI(28,new GI(7,45),new GI(3,46)),new HI(24,new GI(15,19),new GI(2,20)),new HI(30,new GI(3,15),new GI(13,16))),new e(17,Int32Array.from([6,30,54,78]),new HI(28,new GI(1,107),new GI(5,108)),new HI(28,new GI(10,46),new GI(1,47)),new HI(28,new GI(1,22),new GI(15,23)),new HI(28,new GI(2,14),new GI(17,15))),new e(18,Int32Array.from([6,30,56,82]),new HI(30,new GI(5,120),new GI(1,121)),new HI(26,new GI(9,43),new GI(4,44)),new HI(28,new GI(17,22),new GI(1,23)),new HI(28,new GI(2,14),new GI(19,15))),new e(19,Int32Array.from([6,30,58,86]),new HI(28,new GI(3,113),new GI(4,114)),new HI(26,new GI(3,44),new GI(11,45)),new HI(26,new GI(17,21),new GI(4,22)),new HI(26,new GI(9,13),new GI(16,14))),new e(20,Int32Array.from([6,34,62,90]),new HI(28,new GI(3,107),new GI(5,108)),new HI(26,new GI(3,41),new GI(13,42)),new HI(30,new GI(15,24),new GI(5,25)),new HI(28,new GI(15,15),new GI(10,16))),new e(21,Int32Array.from([6,28,50,72,94]),new HI(28,new GI(4,116),new GI(4,117)),new HI(26,new GI(17,42)),new HI(28,new GI(17,22),new GI(6,23)),new HI(30,new GI(19,16),new GI(6,17))),new e(22,Int32Array.from([6,26,50,74,98]),new HI(28,new GI(2,111),new GI(7,112)),new HI(28,new GI(17,46)),new HI(30,new GI(7,24),new GI(16,25)),new HI(24,new GI(34,13))),new e(23,Int32Array.from([6,30,54,78,102]),new HI(30,new GI(4,121),new GI(5,122)),new HI(28,new GI(4,47),new GI(14,48)),new HI(30,new GI(11,24),new GI(14,25)),new HI(30,new GI(16,15),new GI(14,16))),new e(24,Int32Array.from([6,28,54,80,106]),new HI(30,new GI(6,117),new GI(4,118)),new HI(28,new GI(6,45),new GI(14,46)),new HI(30,new GI(11,24),new GI(16,25)),new HI(30,new GI(30,16),new GI(2,17))),new e(25,Int32Array.from([6,32,58,84,110]),new HI(26,new GI(8,106),new GI(4,107)),new HI(28,new GI(8,47),new GI(13,48)),new HI(30,new GI(7,24),new GI(22,25)),new HI(30,new GI(22,15),new GI(13,16))),new e(26,Int32Array.from([6,30,58,86,114]),new HI(28,new GI(10,114),new GI(2,115)),new HI(28,new GI(19,46),new GI(4,47)),new HI(28,new GI(28,22),new GI(6,23)),new HI(30,new GI(33,16),new GI(4,17))),new e(27,Int32Array.from([6,34,62,90,118]),new HI(30,new GI(8,122),new GI(4,123)),new HI(28,new GI(22,45),new GI(3,46)),new HI(30,new GI(8,23),new GI(26,24)),new HI(30,new GI(12,15),new GI(28,16))),new e(28,Int32Array.from([6,26,50,74,98,122]),new HI(30,new GI(3,117),new GI(10,118)),new HI(28,new GI(3,45),new GI(23,46)),new HI(30,new GI(4,24),new GI(31,25)),new HI(30,new GI(11,15),new GI(31,16))),new e(29,Int32Array.from([6,30,54,78,102,126]),new HI(30,new GI(7,116),new GI(7,117)),new HI(28,new GI(21,45),new GI(7,46)),new HI(30,new GI(1,23),new GI(37,24)),new HI(30,new GI(19,15),new GI(26,16))),new e(30,Int32Array.from([6,26,52,78,104,130]),new HI(30,new GI(5,115),new GI(10,116)),new HI(28,new GI(19,47),new GI(10,48)),new HI(30,new GI(15,24),new GI(25,25)),new HI(30,new GI(23,15),new GI(25,16))),new e(31,Int32Array.from([6,30,56,82,108,134]),new HI(30,new GI(13,115),new GI(3,116)),new HI(28,new GI(2,46),new GI(29,47)),new HI(30,new GI(42,24),new GI(1,25)),new HI(30,new GI(23,15),new GI(28,16))),new e(32,Int32Array.from([6,34,60,86,112,138]),new HI(30,new GI(17,115)),new HI(28,new GI(10,46),new GI(23,47)),new HI(30,new GI(10,24),new GI(35,25)),new HI(30,new GI(19,15),new GI(35,16))),new e(33,Int32Array.from([6,30,58,86,114,142]),new HI(30,new GI(17,115),new GI(1,116)),new HI(28,new GI(14,46),new GI(21,47)),new HI(30,new GI(29,24),new GI(19,25)),new HI(30,new GI(11,15),new GI(46,16))),new e(34,Int32Array.from([6,34,62,90,118,146]),new HI(30,new GI(13,115),new GI(6,116)),new HI(28,new GI(14,46),new GI(23,47)),new HI(30,new GI(44,24),new GI(7,25)),new HI(30,new GI(59,16),new GI(1,17))),new e(35,Int32Array.from([6,30,54,78,102,126,150]),new HI(30,new GI(12,121),new GI(7,122)),new HI(28,new GI(12,47),new GI(26,48)),new HI(30,new GI(39,24),new GI(14,25)),new HI(30,new GI(22,15),new GI(41,16))),new e(36,Int32Array.from([6,24,50,76,102,128,154]),new HI(30,new GI(6,121),new GI(14,122)),new HI(28,new GI(6,47),new GI(34,48)),new HI(30,new GI(46,24),new GI(10,25)),new HI(30,new GI(2,15),new GI(64,16))),new e(37,Int32Array.from([6,28,54,80,106,132,158]),new HI(30,new GI(17,122),new GI(4,123)),new HI(28,new GI(29,46),new GI(14,47)),new HI(30,new GI(49,24),new GI(10,25)),new HI(30,new GI(24,15),new GI(46,16))),new e(38,Int32Array.from([6,32,58,84,110,136,162]),new HI(30,new GI(4,122),new GI(18,123)),new HI(28,new GI(13,46),new GI(32,47)),new HI(30,new GI(48,24),new GI(14,25)),new HI(30,new GI(42,15),new GI(32,16))),new e(39,Int32Array.from([6,26,54,82,110,138,166]),new HI(30,new GI(20,117),new GI(4,118)),new HI(28,new GI(40,47),new GI(7,48)),new HI(30,new GI(43,24),new GI(22,25)),new HI(30,new GI(10,15),new GI(67,16))),new e(40,Int32Array.from([6,30,58,86,114,142,170]),new HI(30,new GI(19,118),new GI(6,119)),new HI(28,new GI(18,47),new GI(31,48)),new HI(30,new GI(34,24),new GI(34,25)),new HI(30,new GI(20,15),new GI(61,16)))],e}(),XI=KI;!function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(MI||(MI={}));var ZI,qI=function(){function e(e,t){this.value=e,this.isMasked=t}return e.prototype.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},e.values=new Map([[MI.DATA_MASK_000,new e(MI.DATA_MASK_000,(function(e,t){return 0===(e+t&1)}))],[MI.DATA_MASK_001,new e(MI.DATA_MASK_001,(function(e,t){return 0===(1&e)}))],[MI.DATA_MASK_010,new e(MI.DATA_MASK_010,(function(e,t){return t%3===0}))],[MI.DATA_MASK_011,new e(MI.DATA_MASK_011,(function(e,t){return(e+t)%3===0}))],[MI.DATA_MASK_100,new e(MI.DATA_MASK_100,(function(e,t){return 0===(Math.floor(e/2)+Math.floor(t/3)&1)}))],[MI.DATA_MASK_101,new e(MI.DATA_MASK_101,(function(e,t){return e*t%6===0}))],[MI.DATA_MASK_110,new e(MI.DATA_MASK_110,(function(e,t){return e*t%6<3}))],[MI.DATA_MASK_111,new e(MI.DATA_MASK_111,(function(e,t){return 0===(e+t+e*t%3&1)}))]]),e}(),YI=qI,JI=function(){function e(e){var t=e.getHeight();if(t<21||1!==(3&t))throw new IE;this.bitMatrix=e}return e.prototype.readFormatInformation=function(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);var r=this.bitMatrix.getHeight(),i=0,o=r-7;for(n=r-1;n>=o;n--)i=this.copyBit(8,n,i);for(t=r-8;t<r;t++)i=this.copyBit(t,8,i);if(this.parsedFormatInfo=zI.decodeFormatInformation(e,i),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new IE},e.prototype.readVersion=function(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return XI.getVersionForNumber(t);for(var n=0,r=e-11,i=5;i>=0;i--)for(var o=e-9;o>=r;o--)n=this.copyBit(o,i,n);var a=XI.decodeVersionInformation(n);if(null!==a&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;n=0;for(o=5;o>=0;o--)for(i=e-9;i>=r;i--)n=this.copyBit(o,i,n);if(null!==(a=XI.decodeVersionInformation(n))&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new IE},e.prototype.copyBit=function(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1},e.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=YI.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);for(var i=t.buildFunctionPattern(),o=!0,a=new Uint8Array(t.getTotalCodewords()),s=0,u=0,l=0,c=r-1;c>0;c-=2){6===c&&c--;for(var d=0;d<r;d++)for(var h=o?r-1-d:d,f=0;f<2;f++)i.get(c-f,h)||(l++,u<<=1,this.bitMatrix.get(c-f,h)&&(u|=1),8===l&&(a[s++]=u,l=0,u=0));o=!o}if(s!==t.getTotalCodewords())throw new IE;return a},e.prototype.remask=function(){if(null!==this.parsedFormatInfo){var e=YI.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},e.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},e.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var r=t+1,i=e.getHeight();r<i;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))},e}(),QI=JI,$I=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},eR=function(){function e(e,t){this.numDataCodewords=e,this.codewords=t}return e.getDataBlocks=function(t,n,r){var i,o,a,s;if(t.length!==n.getTotalCodewords())throw new nE;var u=n.getECBlocksForLevel(r),l=0,c=u.getECBlocks();try{for(var d=$I(c),h=d.next();!h.done;h=d.next()){l+=(v=h.value).getCount()}}catch(I){i={error:I}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}var f=new Array(l),p=0;try{for(var m=$I(c),g=m.next();!g.done;g=m.next())for(var v=g.value,y=0;y<v.getCount();y++){var b=v.getDataCodewords(),w=u.getECCodewordsPerBlock()+b;f[p++]=new e(b,new Uint8Array(w))}}catch(R){a={error:R}}finally{try{g&&!g.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}for(var x=f[0].codewords.length,_=f.length-1;_>=0;){if(f[_].codewords.length===x)break;_--}_++;var C=x-u.getECCodewordsPerBlock(),E=0;for(y=0;y<C;y++)for(var S=0;S<p;S++)f[S].codewords[y]=t[E++];for(S=_;S<p;S++)f[S].codewords[C]=t[E++];var A=f[0].codewords.length;for(y=C;y<A;y++)for(S=0;S<p;S++){var k=S<_?y:y+1;f[S].codewords[k]=t[E++]}return f},e.prototype.getNumDataCodewords=function(){return this.numDataCodewords},e.prototype.getCodewords=function(){return this.codewords},e}(),tR=eR;!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(ZI||(ZI={}));var nR,rR,iR=function(){function e(t,n,r,i){this.value=t,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=i,e.FOR_BITS.set(i,this),e.FOR_VALUE.set(t,this)}return e.forBits=function(t){var n=e.FOR_BITS.get(t);if(void 0===n)throw new nE;return n},e.prototype.getCharacterCountBits=function(e){var t,n=e.getVersionNumber();return t=n<=9?0:n<=26?1:2,this.characterCountBitsForVersions[t]},e.prototype.getValue=function(){return this.value},e.prototype.getBits=function(){return this.bits},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value},e.prototype.toString=function(){return this.stringValue},e.FOR_BITS=new Map,e.FOR_VALUE=new Map,e.TERMINATOR=new e(ZI.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),e.NUMERIC=new e(ZI.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),e.ALPHANUMERIC=new e(ZI.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),e.STRUCTURED_APPEND=new e(ZI.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),e.BYTE=new e(ZI.BYTE,"BYTE",Int32Array.from([8,16,16]),4),e.ECI=new e(ZI.ECI,"ECI",Int32Array.from([0,0,0]),7),e.KANJI=new e(ZI.KANJI,"KANJI",Int32Array.from([8,10,12]),8),e.FNC1_FIRST_POSITION=new e(ZI.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),e.FNC1_SECOND_POSITION=new e(ZI.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),e.HANZI=new e(ZI.HANZI,"HANZI",Int32Array.from([8,10,12]),13),e}(),oR=iR,aR=function(){function e(){}return e.decode=function(t,n,r,i){var o=new _I(t),a=new WE,s=new Array,u=-1,l=-1;try{var c=null,d=!1,h=void 0;do{if(o.available()<4)h=oR.TERMINATOR;else{var f=o.readBits(4);h=oR.forBits(f)}switch(h){case oR.TERMINATOR:break;case oR.FNC1_FIRST_POSITION:case oR.FNC1_SECOND_POSITION:d=!0;break;case oR.STRUCTURED_APPEND:if(o.available()<16)throw new IE;u=o.readBits(8),l=o.readBits(8);break;case oR.ECI:var p=e.parseECIValue(o);if(null===(c=OE.getCharacterSetECIByValue(p)))throw new IE;break;case oR.HANZI:var m=o.readBits(4),g=o.readBits(h.getCharacterCountBits(n));m===e.GB2312_SUBSET&&e.decodeHanziSegment(o,a,g);break;default:var v=o.readBits(h.getCharacterCountBits(n));switch(h){case oR.NUMERIC:e.decodeNumericSegment(o,a,v);break;case oR.ALPHANUMERIC:e.decodeAlphanumericSegment(o,a,v,d);break;case oR.BYTE:e.decodeByteSegment(o,a,v,c,s,i);break;case oR.KANJI:e.decodeKanjiSegment(o,a,v);break;default:throw new IE}}}while(h!==oR.TERMINATOR)}catch(y){throw new IE}return new gS(t,a.toString(),0===s.length?null:s,null===r?null:r.toString(),u,l)},e.decodeHanziSegment=function(e,t,n){if(13*n>e.available())throw new IE;for(var r=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),a=o/96<<8&4294967295|o%96;a+=a<959?41377:42657,r[i]=a>>8&255,r[i+1]=255&a,i+=2,n--}try{t.append(BE.decode(r,zE.GB2312))}catch(s){throw new IE(s)}},e.decodeKanjiSegment=function(e,t,n){if(13*n>e.available())throw new IE;for(var r=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),a=o/192<<8&4294967295|o%192;a+=a<7936?33088:49472,r[i]=a>>8,r[i+1]=a,i+=2,n--}try{t.append(BE.decode(r,zE.SHIFT_JIS))}catch(s){throw new IE(s)}},e.decodeByteSegment=function(e,t,n,r,i,o){if(8*n>e.available())throw new IE;for(var a,s=new Uint8Array(n),u=0;u<n;u++)s[u]=e.readBits(8);a=null===r?zE.guessEncoding(s,o):r.getName();try{t.append(BE.decode(s,a))}catch(l){throw new IE(l)}i.push(s)},e.toAlphaNumericChar=function(t){if(t>=e.ALPHANUMERIC_CHARS.length)throw new IE;return e.ALPHANUMERIC_CHARS[t]},e.decodeAlphanumericSegment=function(t,n,r,i){for(var o=n.length();r>1;){if(t.available()<11)throw new IE;var a=t.readBits(11);n.append(e.toAlphaNumericChar(Math.floor(a/45))),n.append(e.toAlphaNumericChar(a%45)),r-=2}if(1===r){if(t.available()<6)throw new IE;n.append(e.toAlphaNumericChar(t.readBits(6)))}if(i)for(var s=o;s<n.length();s++)"%"===n.charAt(s)&&(s<n.length()-1&&"%"===n.charAt(s+1)?n.deleteCharAt(s+1):n.setCharAt(s,String.fromCharCode(29)))},e.decodeNumericSegment=function(t,n,r){for(;r>=3;){if(t.available()<10)throw new IE;var i=t.readBits(10);if(i>=1e3)throw new IE;n.append(e.toAlphaNumericChar(Math.floor(i/100))),n.append(e.toAlphaNumericChar(Math.floor(i/10)%10)),n.append(e.toAlphaNumericChar(i%10)),r-=3}if(2===r){if(t.available()<7)throw new IE;var o=t.readBits(7);if(o>=100)throw new IE;n.append(e.toAlphaNumericChar(Math.floor(o/10))),n.append(e.toAlphaNumericChar(o%10))}else if(1===r){if(t.available()<4)throw new IE;var a=t.readBits(4);if(a>=10)throw new IE;n.append(e.toAlphaNumericChar(a))}},e.parseECIValue=function(e){var t=e.readBits(8);if(0===(128&t))return 127&t;if(128===(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192===(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new IE},e.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.GB2312_SUBSET=1,e}(),sR=aR,uR=function(){function e(e){this.mirrored=e}return e.prototype.isMirrored=function(){return this.mirrored},e.prototype.applyMirroredCorrection=function(e){if(this.mirrored&&null!==e&&!(e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},e}(),lR=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cR=function(){function e(){this.rsDecoder=new MS(AS.QR_CODE_FIELD_256)}return e.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(VE.parseFromBooleanArray(e),t)},e.prototype.decodeBitMatrix=function(e,t){var n=new QI(e),r=null;try{return this.decodeBitMatrixParser(n,t)}catch(v){r=v}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var i=this.decodeBitMatrixParser(n,t);return i.setOther(new uR(!0)),i}catch(v){if(null!==r)throw r;throw v}},e.prototype.decodeBitMatrixParser=function(e,t){var n,r,i,o,a=e.readVersion(),s=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),l=tR.getDataBlocks(u,a,s),c=0;try{for(var d=lR(l),h=d.next();!h.done;h=d.next()){c+=(v=h.value).getNumDataCodewords()}}catch(x){n={error:x}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}var f=new Uint8Array(c),p=0;try{for(var m=lR(l),g=m.next();!g.done;g=m.next()){var v,y=(v=g.value).getCodewords(),b=v.getNumDataCodewords();this.correctErrors(y,b);for(var w=0;w<b;w++)f[p++]=y[w]}}catch(_){i={error:_}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}return sR.decode(f,a,s,t)},e.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(i){throw new sE}for(var r=0;r<t;r++)e[r]=n[r]},e}(),dR=cR,hR=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fR=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.estimatedModuleSize=r,i}return hR(t,e),t.prototype.aboutEquals=function(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,n,r){return new t((this.getX()+n)/2,(this.getY()+e)/2,(this.estimatedModuleSize+r)/2)},t}(HS),pR=fR,mR=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},gR=function(){function e(e,t,n,r,i,o,a){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=i,this.moduleSize=o,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return e.prototype.find=function(){for(var e=this.startX,t=this.height,n=e+this.width,r=this.startY+t/2,i=new Int32Array(3),o=this.image,a=0;a<t;a++){var s=r+(0===(1&a)?Math.floor((a+1)/2):-Math.floor((a+1)/2));i[0]=0,i[1]=0,i[2]=0;for(var u=e;u<n&&!o.get(u,s);)u++;for(var l=0;u<n;){if(o.get(u,s))if(1===l)i[1]++;else if(2===l){var c;if(this.foundPatternCross(i))if(null!==(c=this.handlePossibleCenter(i,s,u)))return c;i[0]=i[2],i[1]=1,i[2]=0,l=1}else i[++l]++;else 1===l&&l++,i[l]++;u++}if(this.foundPatternCross(i))if(null!==(c=this.handlePossibleCenter(i,s,n)))return c}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new KE},e.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},e.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0},e.prototype.crossCheckVertical=function(t,n,r,i){var o=this.image,a=o.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var u=t;u>=0&&o.get(n,u)&&s[1]<=r;)s[1]++,u--;if(u<0||s[1]>r)return NaN;for(;u>=0&&!o.get(n,u)&&s[0]<=r;)s[0]++,u--;if(s[0]>r)return NaN;for(u=t+1;u<a&&o.get(n,u)&&s[1]<=r;)s[1]++,u++;if(u===a||s[1]>r)return NaN;for(;u<a&&!o.get(n,u)&&s[2]<=r;)s[2]++,u++;if(s[2]>r)return NaN;var l=s[0]+s[1]+s[2];return 5*Math.abs(l-i)>=2*i?NaN:this.foundPatternCross(s)?e.centerFromEnd(s,u):NaN},e.prototype.handlePossibleCenter=function(t,n,r){var i,o,a=t[0]+t[1]+t[2],s=e.centerFromEnd(t,r),u=this.crossCheckVertical(n,s,2*t[1],a);if(!isNaN(u)){var l=(t[0]+t[1]+t[2])/3;try{for(var c=mR(this.possibleCenters),d=c.next();!d.done;d=c.next()){var h=d.value;if(h.aboutEquals(l,u,s))return h.combineEstimate(u,s,l)}}catch(p){i={error:p}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}var f=new pR(s,u,l);this.possibleCenters.push(f),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(f)}return null},e}(),vR=gR,yR=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bR=function(e){function t(t,n,r,i){var o=e.call(this,t,n)||this;return o.estimatedModuleSize=r,o.count=i,void 0===i&&(o.count=1),o}return yR(t,e),t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,n,r){var i=this.count+1;return new t((this.count*this.getX()+n)/i,(this.count*this.getY()+e)/i,(this.count*this.estimatedModuleSize+r)/i,i)},t}(HS),wR=bR,xR=function(){function e(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return e.prototype.getBottomLeft=function(){return this.bottomLeft},e.prototype.getTopLeft=function(){return this.topLeft},e.prototype.getTopRight=function(){return this.topRight},e}(),_R=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},CR=function(){function e(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return e.prototype.getImage=function(){return this.image},e.prototype.getPossibleCenters=function(){return this.possibleCenters},e.prototype.find=function(t){var n=null!==t&&void 0!==t&&void 0!==t.get(SE.TRY_HARDER),r=null!==t&&void 0!==t&&void 0!==t.get(SE.PURE_BARCODE),i=this.image,o=i.getHeight(),a=i.getWidth(),s=Math.floor(3*o/(4*e.MAX_MODULES));(s<e.MIN_SKIP||n)&&(s=e.MIN_SKIP);for(var u=!1,l=new Int32Array(5),c=s-1;c<o&&!u;c+=s){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;for(var d=0,h=0;h<a;h++)if(i.get(h,c))1===(1&d)&&d++,l[d]++;else if(0===(1&d))if(4===d)if(e.foundPatternCross(l)){if(!0!==this.handlePossibleCenter(l,c,h,r)){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,d=3;continue}if(s=2,!0===this.hasSkipped)u=this.haveMultiplyConfirmedCenters();else{var f=this.findRowSkip();f>l[2]&&(c+=f-l[2]-s,h=a-1)}d=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,d=3;else l[++d]++;else l[d]++;if(e.foundPatternCross(l))!0===this.handlePossibleCenter(l,c,a,r)&&(s=l[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}var p=this.selectBestPatterns();return HS.orderBestPatterns(p),new xR(p)},e.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},e.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var r=e[n];if(0===r)return!1;t+=r}if(t<7)return!1;var i=t/7,o=i/2;return Math.abs(i-e[0])<o&&Math.abs(i-e[1])<o&&Math.abs(3*i-e[2])<3*o&&Math.abs(i-e[3])<o&&Math.abs(i-e[4])<o},e.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},e.prototype.crossCheckDiagonal=function(t,n,r,i){for(var o=this.getCrossCheckStateCount(),a=0,s=this.image;t>=a&&n>=a&&s.get(n-a,t-a);)o[2]++,a++;if(t<a||n<a)return!1;for(;t>=a&&n>=a&&!s.get(n-a,t-a)&&o[1]<=r;)o[1]++,a++;if(t<a||n<a||o[1]>r)return!1;for(;t>=a&&n>=a&&s.get(n-a,t-a)&&o[0]<=r;)o[0]++,a++;if(o[0]>r)return!1;var u=s.getHeight(),l=s.getWidth();for(a=1;t+a<u&&n+a<l&&s.get(n+a,t+a);)o[2]++,a++;if(t+a>=u||n+a>=l)return!1;for(;t+a<u&&n+a<l&&!s.get(n+a,t+a)&&o[3]<r;)o[3]++,a++;if(t+a>=u||n+a>=l||o[3]>=r)return!1;for(;t+a<u&&n+a<l&&s.get(n+a,t+a)&&o[4]<r;)o[4]++,a++;if(o[4]>=r)return!1;var c=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(c-i)<2*i&&e.foundPatternCross(o)},e.prototype.crossCheckVertical=function(t,n,r,i){for(var o=this.image,a=o.getHeight(),s=this.getCrossCheckStateCount(),u=t;u>=0&&o.get(n,u);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!o.get(n,u)&&s[1]<=r;)s[1]++,u--;if(u<0||s[1]>r)return NaN;for(;u>=0&&o.get(n,u)&&s[0]<=r;)s[0]++,u--;if(s[0]>r)return NaN;for(u=t+1;u<a&&o.get(n,u);)s[2]++,u++;if(u===a)return NaN;for(;u<a&&!o.get(n,u)&&s[3]<r;)s[3]++,u++;if(u===a||s[3]>=r)return NaN;for(;u<a&&o.get(n,u)&&s[4]<r;)s[4]++,u++;if(s[4]>=r)return NaN;var l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-i)>=2*i?NaN:e.foundPatternCross(s)?e.centerFromEnd(s,u):NaN},e.prototype.crossCheckHorizontal=function(t,n,r,i){for(var o=this.image,a=o.getWidth(),s=this.getCrossCheckStateCount(),u=t;u>=0&&o.get(u,n);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!o.get(u,n)&&s[1]<=r;)s[1]++,u--;if(u<0||s[1]>r)return NaN;for(;u>=0&&o.get(u,n)&&s[0]<=r;)s[0]++,u--;if(s[0]>r)return NaN;for(u=t+1;u<a&&o.get(u,n);)s[2]++,u++;if(u===a)return NaN;for(;u<a&&!o.get(u,n)&&s[3]<r;)s[3]++,u++;if(u===a||s[3]>=r)return NaN;for(;u<a&&o.get(u,n)&&s[4]<r;)s[4]++,u++;if(s[4]>=r)return NaN;var l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-i)>=i?NaN:e.foundPatternCross(s)?e.centerFromEnd(s,u):NaN},e.prototype.handlePossibleCenter=function(t,n,r,i){var o=t[0]+t[1]+t[2]+t[3]+t[4],a=e.centerFromEnd(t,r),s=this.crossCheckVertical(n,Math.floor(a),t[2],o);if(!isNaN(s)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(s),t[2],o),!isNaN(a)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(a),t[2],o)))){for(var u=o/7,l=!1,c=this.possibleCenters,d=0,h=c.length;d<h;d++){var f=c[d];if(f.aboutEquals(u,s,a)){c[d]=f.combineEstimate(s,a,u),l=!0;break}}if(!l){var p=new wR(a,s,u);c.push(p),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(p)}return!0}return!1},e.prototype.findRowSkip=function(){var t,n;if(this.possibleCenters.length<=1)return 0;var r=null;try{for(var i=_R(this.possibleCenters),o=i.next();!o.done;o=i.next()){var a=o.value;if(a.getCount()>=e.CENTER_QUORUM){if(null!=r)return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-a.getX())-Math.abs(r.getY()-a.getY()))/2);r=a}}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return 0},e.prototype.haveMultiplyConfirmedCenters=function(){var t,n,r,i,o=0,a=0,s=this.possibleCenters.length;try{for(var u=_R(this.possibleCenters),l=u.next();!l.done;l=u.next()){(p=l.value).getCount()>=e.CENTER_QUORUM&&(o++,a+=p.getEstimatedModuleSize())}}catch(m){t={error:m}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}if(o<3)return!1;var c=a/s,d=0;try{for(var h=_R(this.possibleCenters),f=h.next();!f.done;f=h.next()){var p=f.value;d+=Math.abs(p.getEstimatedModuleSize()-c)}}catch(g){r={error:g}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return d<=.05*a},e.prototype.selectBestPatterns=function(){var e,t,n,r,i=this.possibleCenters.length;if(i<3)throw new KE;var o,a=this.possibleCenters;if(i>3){var s=0,u=0;try{for(var l=_R(this.possibleCenters),c=l.next();!c.done;c=l.next()){var d=c.value.getEstimatedModuleSize();s+=d,u+=d*d}}catch(y){e={error:y}}finally{try{c&&!c.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}o=s/i;var h=Math.sqrt(u/i-o*o);a.sort((function(e,t){var n=Math.abs(t.getEstimatedModuleSize()-o),r=Math.abs(e.getEstimatedModuleSize()-o);return n<r?-1:n>r?1:0}));for(var f=Math.max(.2*o,h),p=0;p<a.length&&a.length>3;p++){var m=a[p];Math.abs(m.getEstimatedModuleSize()-o)>f&&(a.splice(p,1),p--)}}if(a.length>3){s=0;try{for(var g=_R(a),v=g.next();!v.done;v=g.next()){s+=v.value.getEstimatedModuleSize()}}catch(b){n={error:b}}finally{try{v&&!v.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}o=s/a.length,a.sort((function(e,t){if(t.getCount()===e.getCount()){var n=Math.abs(t.getEstimatedModuleSize()-o),r=Math.abs(e.getEstimatedModuleSize()-o);return n<r?1:n>r?-1:0}return t.getCount()-e.getCount()})),a.splice(3)}return[a[0],a[1],a[2]]},e.CENTER_QUORUM=2,e.MIN_SKIP=3,e.MAX_MODULES=57,e}(),ER=CR,SR=function(){function e(e){this.image=e}return e.prototype.getImage=function(){return this.image},e.prototype.getResultPointCallback=function(){return this.resultPointCallback},e.prototype.detect=function(e){this.resultPointCallback=null===e||void 0===e?null:e.get(SE.NEED_RESULT_POINT_CALLBACK);var t=new ER(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)},e.prototype.processFinderPatternInfo=function(t){var n=t.getTopLeft(),r=t.getTopRight(),i=t.getBottomLeft(),o=this.calculateModuleSize(n,r,i);if(o<1)throw new KE("No pattern found in proccess finder.");var a=e.computeDimension(n,r,i,o),s=XI.getProvisionalVersionForDimension(a),u=s.getDimensionForVersion()-7,l=null;if(s.getAlignmentPatternCenters().length>0)for(var c=r.getX()-n.getX()+i.getX(),d=r.getY()-n.getY()+i.getY(),h=1-3/u,f=Math.floor(n.getX()+h*(c-n.getX())),p=Math.floor(n.getY()+h*(d-n.getY())),m=4;m<=16;m<<=1)try{l=this.findAlignmentInRegion(o,f,p,m);break}catch(lt){if(!(lt instanceof KE))throw lt}var g=e.createTransform(n,r,i,l,a),v=e.sampleGrid(this.image,g,a);return new VS(v,null===l?[i,n,r]:[i,n,r,l])},e.createTransform=function(e,t,n,r,i){var o,a,s,u,l=i-3.5;return null!==r?(o=r.getX(),a=r.getY(),u=s=l-3):(o=t.getX()-e.getX()+n.getX(),a=t.getY()-e.getY()+n.getY(),s=l,u=l),JS.quadrilateralToQuadrilateral(3.5,3.5,l,3.5,s,u,3.5,l,e.getX(),e.getY(),t.getX(),t.getY(),o,a,n.getX(),n.getY())},e.sampleGrid=function(e,t,n){return tA.getInstance().sampleGridWithTransform(e,n,n,t)},e.computeDimension=function(e,t,n,r){var i=LS.round(HS.distance(e,t)/r),o=LS.round(HS.distance(e,n)/r),a=Math.floor((i+o)/2)+7;switch(3&a){case 0:a++;break;case 2:a--;break;case 3:throw new KE("Dimensions could be not found.")}return a},e.prototype.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},e.prototype.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14},e.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,r){var i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),o=1,a=e-(n-e);a<0?(o=e/(e-a),a=0):a>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var s=Math.floor(t-(r-t)*o);return o=1,s<0?(o=t/(t-s),s=0):s>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(s-t),s=this.image.getHeight()-1),a=Math.floor(e+(a-e)*o),(i+=this.sizeOfBlackWhiteBlackRun(e,t,a,s))-1},e.prototype.sizeOfBlackWhiteBlackRun=function(e,t,n,r){var i=Math.abs(r-t)>Math.abs(n-e);if(i){var o=e;e=t,t=o,o=n,n=r,r=o}for(var a=Math.abs(n-e),s=Math.abs(r-t),u=-a/2,l=e<n?1:-1,c=t<r?1:-1,d=0,h=n+l,f=e,p=t;f!==h;f+=l){var m=i?p:f,g=i?f:p;if(1===d===this.image.get(m,g)){if(2===d)return LS.distance(f,p,e,t);d++}if((u+=s)>0){if(p===r)break;p+=c,u-=a}}return 2===d?LS.distance(n+l,r,e,t):NaN},e.prototype.findAlignmentInRegion=function(e,t,n,r){var i=Math.floor(r*e),o=Math.max(0,t-i),a=Math.min(this.image.getWidth()-1,t+i);if(a-o<3*e)throw new KE("Alignment top exceeds estimated module size.");var s=Math.max(0,n-i),u=Math.min(this.image.getHeight()-1,n+i);if(u-s<3*e)throw new KE("Alignment bottom exceeds estimated module size.");return new vR(this.image,o,s,a-o,u-s,e,this.resultPointCallback).find()},e}(),AR=SR,kR=function(){function e(){this.decoder=new dR}return e.prototype.getDecoder=function(){return this.decoder},e.prototype.decode=function(t,n){var r,i;if(void 0!==n&&null!==n&&void 0!==n.get(SE.PURE_BARCODE)){var o=e.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,n),i=e.NO_POINTS}else{var a=new AR(t.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(a.getBits(),n),i=a.getPoints()}r.getOther()instanceof uR&&r.getOther().applyMirroredCorrection(i);var s=new dS(r.getText(),r.getRawBytes(),void 0,i,fS.QR_CODE,void 0),u=r.getByteSegments();null!==u&&s.putMetadata(mS.BYTE_SEGMENTS,u);var l=r.getECLevel();return null!==l&&s.putMetadata(mS.ERROR_CORRECTION_LEVEL,l),r.hasStructuredAppend()&&(s.putMetadata(mS.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),s.putMetadata(mS.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),s},e.prototype.reset=function(){},e.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new KE;var r=this.moduleSize(t,e),i=t[1],o=n[1],a=t[0],s=n[0];if(a>=s||i>=o)throw new KE;if(o-i!==s-a&&(s=a+(o-i))>=e.getWidth())throw new KE;var u=Math.round((s-a+1)/r),l=Math.round((o-i+1)/r);if(u<=0||l<=0)throw new KE;if(l!==u)throw new KE;var c=Math.floor(r/2);i+=c;var d=(a+=c)+Math.floor((u-1)*r)-s;if(d>0){if(d>c)throw new KE;a-=d}var h=i+Math.floor((l-1)*r)-o;if(h>0){if(h>c)throw new KE;i-=h}for(var f=new VE(u,l),p=0;p<l;p++)for(var m=i+Math.floor(p*r),g=0;g<u;g++)e.get(a+Math.floor(g*r),m)&&f.set(g,p);return f},e.moduleSize=function(e,t){for(var n=t.getHeight(),r=t.getWidth(),i=e[0],o=e[1],a=!0,s=0;i<r&&o<n;){if(a!==t.get(i,o)){if(5===++s)break;a=!a}i++,o++}if(i===r||o===n)throw new KE;return(i-e[0])/7},e.NO_POINTS=new Array,e}(),IR=kR,RR=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},TR=function(){function e(){}return e.prototype.PDF417Common=function(){},e.getBitCountSum=function(e){return LS.sum(e)},e.toIntArray=function(t){var n,r;if(null==t||!t.length)return e.EMPTY_INT_ARRAY;var i=new Int32Array(t.length),o=0;try{for(var a=RR(t),s=a.next();!s.done;s=a.next()){var u=s.value;i[o++]=u}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i},e.getCodeword=function(t){var n=bE.binarySearch(e.SYMBOL_TABLE,262143&t);return n<0?-1:(e.CODEWORD_TABLE[n]-1)%e.NUMBER_OF_CODEWORDS},e.NUMBER_OF_CODEWORDS=929,e.MAX_CODEWORDS_IN_BARCODE=e.NUMBER_OF_CODEWORDS-1,e.MIN_ROWS_IN_BARCODE=3,e.MAX_ROWS_IN_BARCODE=90,e.MODULES_IN_CODEWORD=17,e.MODULES_IN_STOP_PATTERN=18,e.BARS_IN_MODULE=8,e.EMPTY_INT_ARRAY=new Int32Array([]),e.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),e.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),e}(),NR=TR,OR=function(){function e(e,t){this.bits=e,this.points=t}return e.prototype.getBits=function(){return this.bits},e.prototype.getPoints=function(){return this.points},e}(),DR=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},MR=function(){function e(){}return e.detectMultiple=function(t,n,r){var i=t.getBlackMatrix(),o=e.detect(r,i);return o.length||((i=i.clone()).rotate180(),o=e.detect(r,i)),new OR(i,o)},e.detect=function(t,n){for(var r,i,o=new Array,a=0,s=0,u=!1;a<n.getHeight();){var l=e.findVertices(n,a,s);if(null!=l[0]||null!=l[3]){if(u=!0,o.push(l),!t)break;null!=l[2]?(s=Math.trunc(l[2].getX()),a=Math.trunc(l[2].getY())):(s=Math.trunc(l[4].getX()),a=Math.trunc(l[4].getY()))}else{if(!u)break;u=!1,s=0;try{for(var c=(r=void 0,DR(o)),d=c.next();!d.done;d=c.next()){var h=d.value;null!=h[1]&&(a=Math.trunc(Math.max(a,h[1].getY()))),null!=h[3]&&(a=Math.max(a,Math.trunc(h[3].getY())))}}catch(f){r={error:f}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}a+=e.ROW_STEP}}return o},e.findVertices=function(t,n,r){var i=t.getHeight(),o=t.getWidth(),a=new Array(8);return e.copyToResult(a,e.findRowsWithPattern(t,i,o,n,r,e.START_PATTERN),e.INDEXES_START_PATTERN),null!=a[4]&&(r=Math.trunc(a[4].getX()),n=Math.trunc(a[4].getY())),e.copyToResult(a,e.findRowsWithPattern(t,i,o,n,r,e.STOP_PATTERN),e.INDEXES_STOP_PATTERN),a},e.copyToResult=function(e,t,n){for(var r=0;r<n.length;r++)e[n[r]]=t[r]},e.findRowsWithPattern=function(t,n,r,i,o,a){for(var s=new Array(4),u=!1,l=new Int32Array(a.length);i<n;i+=e.ROW_STEP){if(null!=(f=e.findGuardPattern(t,o,i,r,!1,a,l))){for(;i>0;){if(null==(h=e.findGuardPattern(t,o,--i,r,!1,a,l))){i++;break}f=h}s[0]=new HS(f[0],i),s[1]=new HS(f[1],i),u=!0;break}}var c=i+1;if(u){for(var d=0,h=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);c<n;c++){var f;if(null!=(f=e.findGuardPattern(t,h[0],c,r,!1,a,l))&&Math.abs(h[0]-f[0])<e.MAX_PATTERN_DRIFT&&Math.abs(h[1]-f[1])<e.MAX_PATTERN_DRIFT)h=f,d=0;else{if(d>e.SKIPPED_ROW_COUNT_MAX)break;d++}}c-=d+1,s[2]=new HS(h[0],c),s[3]=new HS(h[1],c)}return c-i<e.BARCODE_MIN_HEIGHT&&bE.fill(s,null),s},e.findGuardPattern=function(t,n,r,i,o,a,s){bE.fillWithin(s,0,s.length,0);for(var u=n,l=0;t.get(u,r)&&u>0&&l++<e.MAX_PIXEL_DRIFT;)u--;for(var c=u,d=0,h=a.length,f=o;c<i;c++){if(t.get(c,r)!==f)s[d]++;else{if(d===h-1){if(e.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return new Int32Array([u,c]);u+=s[0]+s[1],cE.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,f=!f}}return d===h-1&&e.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE?new Int32Array([u,c-1]):null},e.patternMatchVariance=function(e,t,n){for(var r=e.length,i=0,o=0,a=0;a<r;a++)i+=e[a],o+=t[a];if(i<o)return 1/0;var s=i/o;n*=s;for(var u=0,l=0;l<r;l++){var c=e[l],d=t[l]*s,h=c>d?c-d:d-c;if(h>n)return 1/0;u+=h}return u/i},e.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),e.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),e.MAX_AVG_VARIANCE=.42,e.MAX_INDIVIDUAL_VARIANCE=.8,e.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),e.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),e.MAX_PIXEL_DRIFT=3,e.MAX_PATTERN_DRIFT=5,e.SKIPPED_ROW_COUNT_MAX=25,e.ROW_STEP=5,e.BARCODE_MIN_HEIGHT=10,e}(),PR=MR,FR=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},BR=function(){function e(e,t){if(0===t.length)throw new nE;this.field=e;var n=t.length;if(n>1&&0===t[0]){for(var r=1;r<n&&0===t[r];)r++;r===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-r),cE.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return e.prototype.getCoefficients=function(){return this.coefficients},e.prototype.getDegree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.evaluateAt=function(e){var t,n;if(0===e)return this.getCoefficient(0);if(1===e){var r=0;try{for(var i=FR(this.coefficients),o=i.next();!o.done;o=i.next()){var a=o.value;r=this.field.add(r,a)}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}for(var s=this.coefficients[0],u=this.coefficients.length,l=1;l<u;l++)s=this.field.add(this.field.multiply(e,s),this.coefficients[l]);return s},e.prototype.add=function(t){if(!this.field.equals(t.field))throw new nE("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var n=this.coefficients,r=t.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var o=new Int32Array(r.length),a=r.length-n.length;cE.arraycopy(r,0,o,0,a);for(var s=a;s<r.length;s++)o[s]=this.field.add(n[s-a],r[s]);return new e(this.field,o)},e.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new nE("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},e.prototype.multiply=function(t){return t instanceof e?this.multiplyOther(t):this.multiplyScalar(t)},e.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new nE("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new e(this.field,new Int32Array([0]));for(var n=this.coefficients,r=n.length,i=t.coefficients,o=i.length,a=new Int32Array(r+o-1),s=0;s<r;s++)for(var u=n[s],l=0;l<o;l++)a[s+l]=this.field.add(a[s+l],this.field.multiply(u,i[l]));return new e(this.field,a)},e.prototype.negative=function(){for(var t=this.coefficients.length,n=new Int32Array(t),r=0;r<t;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new e(this.field,n)},e.prototype.multiplyScalar=function(t){if(0===t)return new e(this.field,new Int32Array([0]));if(1===t)return this;for(var n=this.coefficients.length,r=new Int32Array(n),i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new e(this.field,r)},e.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new nE;if(0===n)return new e(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+t),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],n);return new e(this.field,i)},e.prototype.toString=function(){for(var e=new WE,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),0!==t&&1===n||e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},e}(),LR=BR,zR=function(){function e(){}return e.prototype.add=function(e,t){return(e+t)%this.modulus},e.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},e.prototype.exp=function(e){return this.expTable[e]},e.prototype.log=function(e){if(0===e)throw new nE;return this.logTable[e]},e.prototype.inverse=function(e){if(0===e)throw new CS;return this.expTable[this.modulus-this.logTable[e]-1]},e.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},e.prototype.getSize=function(){return this.modulus},e.prototype.equals=function(e){return e===this},e}(),jR=zR,WR=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),HR=function(e){function t(t,n){var r=e.call(this)||this;r.modulus=t,r.expTable=new Int32Array(t),r.logTable=new Int32Array(t);for(var i=1,o=0;o<t;o++)r.expTable[o]=i,i=i*n%t;for(o=0;o<t-1;o++)r.logTable[r.expTable[o]]=o;return r.zero=new LR(r,new Int32Array([0])),r.one=new LR(r,new Int32Array([1])),r}return WR(t,e),t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,t){if(e<0)throw new nE;if(0===t)return this.zero;var n=new Int32Array(e+1);return n[0]=t,new LR(this,n)},t.PDF417_GF=new t(NR.NUMBER_OF_CODEWORDS,3),t}(jR),VR=HR,GR=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},UR=function(){function e(){this.field=VR.PDF417_GF}return e.prototype.decode=function(e,t,n){for(var r,i,o=new LR(this.field,e),a=new Int32Array(t),s=!1,u=t;u>0;u--){var l=o.evaluateAt(this.field.exp(u));a[t-u]=l,0!==l&&(s=!0)}if(!s)return 0;var c=this.field.getOne();if(null!=n)try{for(var d=GR(n),h=d.next();!h.done;h=d.next()){var f=h.value,p=this.field.exp(e.length-1-f),m=new LR(this.field,new Int32Array([this.field.subtract(0,p),1]));c=c.multiply(m)}}catch(C){r={error:C}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var g=new LR(this.field,a),v=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),g,t),y=v[0],b=v[1],w=this.findErrorLocations(y),x=this.findErrorMagnitudes(b,y,w);for(u=0;u<w.length;u++){var _=e.length-1-this.field.log(w[u]);if(_<0)throw sE.getChecksumInstance();e[_]=this.field.subtract(e[_],x[u])}return w.length},e.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var r=e;e=t,t=r}for(var i=e,o=t,a=this.field.getZero(),s=this.field.getOne();o.getDegree()>=Math.round(n/2);){var u=i,l=a;if(a=s,(i=o).isZero())throw sE.getChecksumInstance();o=u;for(var c=this.field.getZero(),d=i.getCoefficient(i.getDegree()),h=this.field.inverse(d);o.getDegree()>=i.getDegree()&&!o.isZero();){var f=o.getDegree()-i.getDegree(),p=this.field.multiply(o.getCoefficient(o.getDegree()),h);c=c.add(this.field.buildMonomial(f,p)),o=o.subtract(i.multiplyByMonomial(f,p))}s=c.multiply(a).subtract(l).negative()}var m=s.getCoefficient(0);if(0===m)throw sE.getChecksumInstance();var g=this.field.inverse(m);return[s.multiply(g),o.multiply(g)]},e.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),n=new Int32Array(t),r=0,i=1;i<this.field.getSize()&&r<t;i++)0===e.evaluateAt(i)&&(n[r]=this.field.inverse(i),r++);if(r!==t)throw sE.getChecksumInstance();return n},e.prototype.findErrorMagnitudes=function(e,t,n){for(var r=t.getDegree(),i=new Int32Array(r),o=1;o<=r;o++)i[r-o]=this.field.multiply(o,t.getCoefficient(o));var a=new LR(this.field,i),s=n.length,u=new Int32Array(s);for(o=0;o<s;o++){var l=this.field.inverse(n[o]),c=this.field.subtract(0,e.evaluateAt(l)),d=this.field.inverse(a.evaluateAt(l));u[o]=this.field.multiply(c,d)}return u},e}(),KR=UR,XR=function(){function e(t,n,r,i,o){t instanceof e?this.constructor_2(t):this.constructor_1(t,n,r,i,o)}return e.prototype.constructor_1=function(e,t,n,r,i){var o=null==t||null==n,a=null==r||null==i;if(o&&a)throw new KE;o?(t=new HS(0,r.getY()),n=new HS(0,i.getY())):a&&(r=new HS(e.getWidth()-1,t.getY()),i=new HS(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))},e.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},e.merge=function(t,n){return null==t?n:null==n?t:new e(t.image,t.topLeft,t.bottomLeft,n.topRight,n.bottomRight)},e.prototype.addMissingRows=function(t,n,r){var i=this.topLeft,o=this.bottomLeft,a=this.topRight,s=this.bottomRight;if(t>0){var u=r?this.topLeft:this.topRight,l=Math.trunc(u.getY()-t);l<0&&(l=0);var c=new HS(u.getX(),l);r?i=c:a=c}if(n>0){var d=r?this.bottomLeft:this.bottomRight,h=Math.trunc(d.getY()+n);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var f=new HS(d.getX(),h);r?o=f:s=f}return new e(this.image,i,o,a,s)},e.prototype.getMinX=function(){return this.minX},e.prototype.getMaxX=function(){return this.maxX},e.prototype.getMinY=function(){return this.minY},e.prototype.getMaxY=function(){return this.maxY},e.prototype.getTopLeft=function(){return this.topLeft},e.prototype.getTopRight=function(){return this.topRight},e.prototype.getBottomLeft=function(){return this.bottomLeft},e.prototype.getBottomRight=function(){return this.bottomRight},e}(),ZR=XR,qR=function(){function e(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}return e.prototype.getColumnCount=function(){return this.columnCount},e.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},e.prototype.getRowCount=function(){return this.rowCount},e.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},e.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},e}(),YR=function(){function e(){this.buffer=""}return e.form=function(e,t){var n=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,(function(e,r,i,o,a,s){if("%%"===e)return"%";if(void 0!==t[++n]){e=o?parseInt(o.substr(1)):void 0;var u,l=a?parseInt(a.substr(1)):void 0;switch(s){case"s":u=t[n];break;case"c":u=t[n][0];break;case"f":u=parseFloat(t[n]).toFixed(e);break;case"p":u=parseFloat(t[n]).toPrecision(e);break;case"e":u=parseFloat(t[n]).toExponential(e);break;case"x":u=parseInt(t[n]).toString(l||16);break;case"d":u=parseFloat(parseInt(t[n],l||10).toPrecision(e)).toFixed(0)}u="object"===typeof u?JSON.stringify(u):(+u).toString(l);for(var c=parseInt(i),d=i&&i[0]+""==="0"?"0":" ";u.length<c;)u=void 0!==r?u+d:d+u;return u}}))},e.prototype.format=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.buffer+=e.form(t,n)},e.prototype.toString=function(){return this.buffer},e}(),JR=YR,QR=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$R=function(){function e(e){this.boundingBox=new ZR(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return e.prototype.getCodewordNearby=function(t){var n=this.getCodeword(t);if(null!=n)return n;for(var r=1;r<e.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(t)-r;if(i>=0&&null!=(n=this.codewords[i]))return n;if((i=this.imageRowToCodewordIndex(t)+r)<this.codewords.length&&null!=(n=this.codewords[i]))return n}return null},e.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},e.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},e.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.getCodewords=function(){return this.codewords},e.prototype.toString=function(){var e,t,n=new JR,r=0;try{for(var i=QR(this.codewords),o=i.next();!o.done;o=i.next()){var a=o.value;null!=a?n.format("%3d: %3d|%3d%n",r++,a.getRowNumber(),a.getValue()):n.format("%3d:    |   %n",r++)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n.toString()},e.MAX_NEARBY_DISTANCE=5,e}(),eT=$R,tT=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},nT=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},rT=function(){function e(){this.values=new Map}return e.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)},e.prototype.getValue=function(){var e,t,n=-1,r=new Array,i=function(e,t){var i=function(){return e},o=function(){return t};o()>n?(n=o(),(r=[]).push(i())):o()===n&&r.push(i())};try{for(var o=tT(this.values.entries()),a=o.next();!a.done;a=o.next()){var s=nT(a.value,2);i(s[0],s[1])}}catch(u){e={error:u}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return NR.toIntArray(r)},e.prototype.getConfidence=function(e){return this.values.get(e)},e}(),iT=rT,oT=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),aT=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},sT=function(e){function t(t,n){var r=e.call(this,t)||this;return r._isLeft=n,r}return oT(t,e),t.prototype.setRowNumbers=function(){var e,t;try{for(var n=aT(this.getCodewords()),r=n.next();!r.done;r=n.next()){var i=r.value;null!=i&&i.setRowNumberAsRowIndicatorColumn()}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(e){var t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);for(var n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=-1,u=1,l=0,c=o;c<a;c++)if(null!=t[c]){var d=t[c],h=d.getRowNumber()-s;if(0===h)l++;else if(1===h)u=Math.max(u,l),l=1,s=d.getRowNumber();else if(h<0||d.getRowNumber()>=e.getRowCount()||h>c)t[c]=null;else{for(var f=void 0,p=(f=u>2?(u-2)*h:h)>=c,m=1;m<=f&&!p;m++)p=null!=t[c-m];p?t[c]=null:(s=d.getRowNumber(),l=1)}}},t.prototype.getRowHeights=function(){var e,t,n=this.getBarcodeMetadata();if(null==n)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);var r=new Int32Array(n.getRowCount());try{for(var i=aT(this.getCodewords()),o=i.next();!o.done;o=i.next()){var a=o.value;if(null!=a){var s=a.getRowNumber();if(s>=r.length)continue;r[s]++}}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(e){for(var t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.getCodewords(),s=-1,u=1,l=0,c=i;c<o;c++)if(null!=a[c]){var d=a[c];d.setRowNumberAsRowIndicatorColumn();var h=d.getRowNumber()-s;0===h?l++:1===h?(u=Math.max(u,l),l=1,s=d.getRowNumber()):d.getRowNumber()>=e.getRowCount()?a[c]=null:(s=d.getRowNumber(),l=1)}},t.prototype.getBarcodeMetadata=function(){var e,t,n=this.getCodewords(),r=new iT,i=new iT,o=new iT,a=new iT;try{for(var s=aT(n),u=s.next();!u.done;u=s.next()){var l=u.value;if(null!=l){l.setRowNumberAsRowIndicatorColumn();var c=l.getValue()%30,d=l.getRowNumber();switch(this._isLeft||(d+=2),d%3){case 0:i.setValue(3*c+1);break;case 1:a.setValue(c/3),o.setValue(c%3);break;case 2:r.setValue(c+1)}}}}catch(f){e={error:f}}finally{try{u&&!u.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}if(0===r.getValue().length||0===i.getValue().length||0===o.getValue().length||0===a.getValue().length||r.getValue()[0]<1||i.getValue()[0]+o.getValue()[0]<NR.MIN_ROWS_IN_BARCODE||i.getValue()[0]+o.getValue()[0]>NR.MAX_ROWS_IN_BARCODE)return null;var h=new qR(r.getValue()[0],i.getValue()[0],o.getValue()[0],a.getValue()[0]);return this.removeIncorrectCodewords(n,h),h},t.prototype.removeIncorrectCodewords=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(null!=e[n]){var i=r.getValue()%30,o=r.getRowNumber();if(o>t.getRowCount())e[n]=null;else switch(this._isLeft||(o+=2),o%3){case 0:3*i+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:Math.trunc(i/3)===t.getErrorCorrectionLevel()&&i%3===t.getRowCountLowerPart()||(e[n]=null);break;case 2:i+1!==t.getColumnCount()&&(e[n]=null)}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+e.prototype.toString.call(this)},t}(eT),uT=sT,lT=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cT=function(){function e(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return e.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e,t=NR.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns},e.prototype.adjustIndicatorColumnRowNumbers=function(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},e.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(0===e)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),r=0;r<n.length;r++)null!=n[r]&&(n[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,n));return e},e.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},e.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(var r=1;r<=this.barcodeColumnCount;r++){var i=this.detectionResultColumns[r].getCodewords()[n];null!=i&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[r].getCodewords()[n]=null))}},e.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var t=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<n.length;r++)if(null!=n[r])for(var i=n[r].getRowNumber(),o=0,a=this.barcodeColumnCount+1;a>0&&o<this.ADJUST_ROW_NUMBER_SKIP;a--){var s=this.detectionResultColumns[a].getCodewords()[r];null!=s&&(o=e.adjustRowNumberIfValid(i,o,s),s.hasValidRowNumber()||t++)}return t},e.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var t=0,n=this.detectionResultColumns[0].getCodewords(),r=0;r<n.length;r++)if(null!=n[r])for(var i=n[r].getRowNumber(),o=0,a=1;a<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;a++){var s=this.detectionResultColumns[a].getCodewords()[r];null!=s&&(o=e.adjustRowNumberIfValid(i,o,s),s.hasValidRowNumber()||t++)}return t},e.adjustRowNumberIfValid=function(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t},e.prototype.adjustRowNumbers=function(t,n,r){var i,o;if(null!=this.detectionResultColumns[t-1]){var a=r[n],s=this.detectionResultColumns[t-1].getCodewords(),u=s;null!=this.detectionResultColumns[t+1]&&(u=this.detectionResultColumns[t+1].getCodewords());var l=new Array(14);l[2]=s[n],l[3]=u[n],n>0&&(l[0]=r[n-1],l[4]=s[n-1],l[5]=u[n-1]),n>1&&(l[8]=r[n-2],l[10]=s[n-2],l[11]=u[n-2]),n<r.length-1&&(l[1]=r[n+1],l[6]=s[n+1],l[7]=u[n+1]),n<r.length-2&&(l[9]=r[n+2],l[12]=s[n+2],l[13]=u[n+2]);try{for(var c=lT(l),d=c.next();!d.done;d=c.next()){var h=d.value;if(e.adjustRowNumber(a,h))return}}catch(f){i={error:f}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}},e.adjustRowNumber=function(e,t){return null!=t&&(!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0))},e.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},e.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},e.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},e.prototype.setBoundingBox=function(e){this.boundingBox=e},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},e.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},e.prototype.toString=function(){var e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new JR,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var r=0;r<this.barcodeColumnCount+2;r++)if(null!=this.detectionResultColumns[r]){var i=this.detectionResultColumns[r].getCodewords()[n];null!=i?t.format(" %3d|%3d",i.getRowNumber(),i.getValue()):t.format("    |   ")}else t.format("    |   ");t.format("%n")}return t.toString()},e}(),dT=cT,hT=function(){function e(t,n,r,i){this.rowNumber=e.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return e.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},e.prototype.isValidRowNumber=function(t){return t!==e.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},e.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},e.prototype.getWidth=function(){return this.endX-this.startX},e.prototype.getStartX=function(){return this.startX},e.prototype.getEndX=function(){return this.endX},e.prototype.getBucket=function(){return this.bucket},e.prototype.getValue=function(){return this.value},e.prototype.getRowNumber=function(){return this.rowNumber},e.prototype.setRowNumber=function(e){this.rowNumber=e},e.prototype.toString=function(){return this.rowNumber+"|"+this.value},e.BARCODE_ROW_UNKNOWN=-1,e}(),fT=function(){function e(){}return e.initialize=function(){for(var t=0;t<NR.SYMBOL_TABLE.length;t++)for(var n=NR.SYMBOL_TABLE[t],r=1&n,i=0;i<NR.BARS_IN_MODULE;i++){for(var o=0;(1&n)===r;)o+=1,n>>=1;r=1&n,e.RATIOS_TABLE[t]||(e.RATIOS_TABLE[t]=new Array(NR.BARS_IN_MODULE)),e.RATIOS_TABLE[t][NR.BARS_IN_MODULE-i-1]=Math.fround(o/NR.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},e.getDecodedValue=function(t){var n=e.getDecodedCodewordValue(e.sampleBitCounts(t));return-1!==n?n:e.getClosestDecodedValue(t)},e.sampleBitCounts=function(e){for(var t=LS.sum(e),n=new Int32Array(NR.BARS_IN_MODULE),r=0,i=0,o=0;o<NR.MODULES_IN_CODEWORD;o++){var a=t/(2*NR.MODULES_IN_CODEWORD)+o*t/NR.MODULES_IN_CODEWORD;i+e[r]<=a&&(i+=e[r],r++),n[r]++}return n},e.getDecodedCodewordValue=function(t){var n=e.getBitValue(t);return-1===NR.getCodeword(n)?-1:n},e.getBitValue=function(e){for(var t=0,n=0;n<e.length;n++)for(var r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)},e.getClosestDecodedValue=function(t){var n=LS.sum(t),r=new Array(NR.BARS_IN_MODULE);if(n>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(t[i]/n);var o=jS.MAX_VALUE,a=-1;this.bSymbolTableReady||e.initialize();for(var s=0;s<e.RATIOS_TABLE.length;s++){for(var u=0,l=e.RATIOS_TABLE[s],c=0;c<NR.BARS_IN_MODULE;c++){var d=Math.fround(l[c]-r[c]);if((u+=Math.fround(d*d))>=o)break}u<o&&(o=u,a=NR.SYMBOL_TABLE[s])}return a},e.bSymbolTableReady=!1,e.RATIOS_TABLE=new Array(NR.SYMBOL_TABLE.length).map((function(e){return new Array(NR.BARS_IN_MODULE)})),e}(),pT=fT,mT=function(){function e(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return e.prototype.getSegmentIndex=function(){return this.segmentIndex},e.prototype.setSegmentIndex=function(e){this.segmentIndex=e},e.prototype.getFileId=function(){return this.fileId},e.prototype.setFileId=function(e){this.fileId=e},e.prototype.getOptionalData=function(){return this.optionalData},e.prototype.setOptionalData=function(e){this.optionalData=e},e.prototype.isLastSegment=function(){return this.lastSegment},e.prototype.setLastSegment=function(e){this.lastSegment=e},e.prototype.getSegmentCount=function(){return this.segmentCount},e.prototype.setSegmentCount=function(e){this.segmentCount=e},e.prototype.getSender=function(){return this.sender||null},e.prototype.setSender=function(e){this.sender=e},e.prototype.getAddressee=function(){return this.addressee||null},e.prototype.setAddressee=function(e){this.addressee=e},e.prototype.getFileName=function(){return this.fileName},e.prototype.setFileName=function(e){this.fileName=e},e.prototype.getFileSize=function(){return this.fileSize},e.prototype.setFileSize=function(e){this.fileSize=e},e.prototype.getChecksum=function(){return this.checksum},e.prototype.setChecksum=function(e){this.checksum=e},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.setTimestamp=function(e){this.timestamp=e},e}(),gT=function(){function e(){}return e.parseLong=function(e,t){return void 0===t&&(t=void 0),parseInt(e,t)},e}(),vT=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vT(t,e),t.kind="NullPointerException",t}(YC),bT=yT,wT=function(){function e(){}return e.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},e.prototype.writeBytesOffset=function(e,t,n){if(null==e)throw new bT;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new fE;if(0!==n)for(var r=0;r<n;r++)this.write(e[t+r])},e.prototype.flush=function(){},e.prototype.close=function(){},e}(),xT=wT,_T=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),CT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return _T(t,e),t}(YC),ET=CT,ST=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),AT=function(e){function t(t){void 0===t&&(t=32);var n=e.call(this)||this;if(n.count=0,t<0)throw new nE("Negative initial size: "+t);return n.buf=new Uint8Array(t),n}return ST(t,e),t.prototype.ensureCapacity=function(e){e-this.buf.length>0&&this.grow(e)},t.prototype.grow=function(e){var t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new ET;t=xE.MAX_VALUE}this.buf=bE.copyOfUint8Array(this.buf,t)},t.prototype.write=function(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1},t.prototype.writeBytesOffset=function(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new fE;this.ensureCapacity(this.count+n),cE.arraycopy(e,t,this.buf,this.count,n),this.count+=n},t.prototype.writeTo=function(e){e.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return bE.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(e){return e?"string"===typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(e){return new String(this.buf).toString()},t.prototype.toString_number=function(e){return new String(this.buf).toString()},t.prototype.close=function(){},t}(xT),kT=AT;function IT(){if("undefined"!==typeof window)return window.BigInt||null;if("undefined"!==typeof n.g)return n.g.BigInt||null;if("undefined"!==typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function RT(e){if("undefined"===typeof rR&&(rR=IT()),null===rR)throw new Error("BigInt is not supported!");return rR(e)}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(nR||(nR={}));var TT,NT=function(){function e(){}return e.decode=function(t,n){var r=new WE(""),i=OE.ISO8859_1;r.enableDecoding(i);for(var o=1,a=t[o++],s=new mT;o<t[0];){switch(a){case e.TEXT_COMPACTION_MODE_LATCH:o=e.textCompaction(t,o,r);break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:o=e.byteCompaction(a,t,i,o,r);break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o++]);break;case e.NUMERIC_COMPACTION_MODE_LATCH:o=e.numericCompaction(t,o,r);break;case e.ECI_CHARSET:OE.getCharacterSetECIByValue(t[o++]);break;case e.ECI_GENERAL_PURPOSE:o+=2;break;case e.ECI_USER_DEFINED:o++;break;case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=e.decodeMacroBlock(t,o,s);break;case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:throw new IE;default:o--,o=e.textCompaction(t,o,r)}if(!(o<t.length))throw IE.getFormatInstance();a=t[o++]}if(0===r.length())throw IE.getFormatInstance();var u=new gS(null,r.toString(),null,n);return u.setOther(s),u},e.decodeMacroBlock=function(t,n,r){if(n+e.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw IE.getFormatInstance();for(var i=new Int32Array(e.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<e.NUMBER_OF_SEQUENCE_CODEWORDS;o++,n++)i[o]=t[n];r.setSegmentIndex(xE.parseInt(e.decodeBase900toBase10(i,e.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new WE;n=e.textCompaction(t,n,a),r.setFileId(a.toString());var s=-1;for(t[n]===e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=n+1);n<t[0];)switch(t[n]){case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t[++n]){case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new WE;n=e.textCompaction(t,n+1,u),r.setFileName(u.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var l=new WE;n=e.textCompaction(t,n+1,l),r.setSender(l.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var c=new WE;n=e.textCompaction(t,n+1,c),r.setAddressee(c.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var d=new WE;n=e.numericCompaction(t,n+1,d),r.setSegmentCount(xE.parseInt(d.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new WE;n=e.numericCompaction(t,n+1,h),r.setTimestamp(gT.parseLong(h.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var f=new WE;n=e.numericCompaction(t,n+1,f),r.setChecksum(xE.parseInt(f.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var p=new WE;n=e.numericCompaction(t,n+1,p),r.setFileSize(gT.parseLong(p.toString()));break;default:throw IE.getFormatInstance()}break;case e.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw IE.getFormatInstance()}if(-1!==s){var m=n-s;r.isLastSegment()&&m--,r.setOptionalData(bE.copyOfRange(t,s,s+m))}return n},e.textCompaction=function(t,n,r){for(var i=new Int32Array(2*(t[0]-n)),o=new Int32Array(2*(t[0]-n)),a=0,s=!1;n<t[0]&&!s;){var u=t[n++];if(u<e.TEXT_COMPACTION_MODE_LATCH)i[a]=u/30,i[a+1]=u%30,a+=2;else switch(u){case e.TEXT_COMPACTION_MODE_LATCH:i[a++]=e.TEXT_COMPACTION_MODE_LATCH;break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:n--,s=!0;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[a]=e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=t[n++],o[a]=u,a++}}return e.decodeTextCompaction(i,o,a,r),n},e.decodeTextCompaction=function(t,n,r,i){for(var o=nR.ALPHA,a=nR.ALPHA,s=0;s<r;){var u=t[s],l="";switch(o){case nR.ALPHA:if(u<26)l=String.fromCharCode(65+u);else switch(u){case 26:l=" ";break;case e.LL:o=nR.LOWER;break;case e.ML:o=nR.MIXED;break;case e.PS:a=o,o=nR.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:o=nR.ALPHA}break;case nR.LOWER:if(u<26)l=String.fromCharCode(97+u);else switch(u){case 26:l=" ";break;case e.AS:a=o,o=nR.ALPHA_SHIFT;break;case e.ML:o=nR.MIXED;break;case e.PS:a=o,o=nR.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:o=nR.ALPHA}break;case nR.MIXED:if(u<e.PL)l=e.MIXED_CHARS[u];else switch(u){case e.PL:o=nR.PUNCT;break;case 26:l=" ";break;case e.LL:o=nR.LOWER;break;case e.AL:o=nR.ALPHA;break;case e.PS:a=o,o=nR.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:o=nR.ALPHA}break;case nR.PUNCT:if(u<e.PAL)l=e.PUNCT_CHARS[u];else switch(u){case e.PAL:o=nR.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:o=nR.ALPHA}break;case nR.ALPHA_SHIFT:if(o=a,u<26)l=String.fromCharCode(65+u);else switch(u){case 26:l=" ";break;case e.TEXT_COMPACTION_MODE_LATCH:o=nR.ALPHA}break;case nR.PUNCT_SHIFT:if(o=a,u<e.PAL)l=e.PUNCT_CHARS[u];else switch(u){case e.PAL:o=nR.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:o=nR.ALPHA}}""!==l&&i.append(l),s++}},e.byteCompaction=function(t,n,r,i,o){var a=new kT,s=0,u=0,l=!1;switch(t){case e.BYTE_COMPACTION_MODE_LATCH:for(var c=new Int32Array(6),d=n[i++];i<n[0]&&!l;)switch(c[s++]=d,u=900*u+d,d=n[i++]){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:i--,l=!0;break;default:if(s%5===0&&s>0){for(var h=0;h<6;++h)a.write(Number(RT(u)>>RT(8*(5-h))));u=0,s=0}}i===n[0]&&d<e.TEXT_COMPACTION_MODE_LATCH&&(c[s++]=d);for(var f=0;f<s;f++)a.write(c[f]);break;case e.BYTE_COMPACTION_MODE_LATCH_6:for(;i<n[0]&&!l;){var p=n[i++];if(p<e.TEXT_COMPACTION_MODE_LATCH)s++,u=900*u+p;else switch(p){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:i--,l=!0}if(s%5===0&&s>0){for(h=0;h<6;++h)a.write(Number(RT(u)>>RT(8*(5-h))));u=0,s=0}}}return o.append(BE.decode(a.toByteArray(),r)),i},e.numericCompaction=function(t,n,r){for(var i=0,o=!1,a=new Int32Array(e.MAX_NUMERIC_CODEWORDS);n<t[0]&&!o;){var s=t[n++];if(n===t[0]&&(o=!0),s<e.TEXT_COMPACTION_MODE_LATCH)a[i]=s,i++;else switch(s){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:n--,o=!0}(i%e.MAX_NUMERIC_CODEWORDS===0||s===e.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(e.decodeBase900toBase10(a,i)),i=0)}return n},e.decodeBase900toBase10=function(t,n){for(var r=RT(0),i=0;i<n;i++)r+=e.EXP900[n-i-1]*RT(t[i]);var o=r.toString();if("1"!==o.charAt(0))throw new IE;return o.substring(1)},e.TEXT_COMPACTION_MODE_LATCH=900,e.BYTE_COMPACTION_MODE_LATCH=901,e.NUMERIC_COMPACTION_MODE_LATCH=902,e.BYTE_COMPACTION_MODE_LATCH_6=924,e.ECI_USER_DEFINED=925,e.ECI_GENERAL_PURPOSE=926,e.ECI_CHARSET=927,e.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,e.MACRO_PDF417_TERMINATOR=922,e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,e.MAX_NUMERIC_CODEWORDS=15,e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,e.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,e.PL=25,e.LL=27,e.AS=27,e.ML=28,e.AL=28,e.PS=29,e.PAL=29,e.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",e.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",e.EXP900=IT()?function(){var e=[];e[0]=RT(1);var t=RT(900);e[1]=t;for(var n=2;n<16;n++)e[n]=e[n-1]*t;return e}():[],e.NUMBER_OF_SEQUENCE_CODEWORDS=2,e}(),OT=NT,DT=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},MT=function(){function e(){}return e.decode=function(t,n,r,i,o,a,s){for(var u,l=new ZR(t,n,r,i,o),c=null,d=null,h=!0;;h=!1){if(null!=n&&(c=e.getRowIndicatorColumn(t,l,n,!0,a,s)),null!=i&&(d=e.getRowIndicatorColumn(t,l,i,!1,a,s)),null==(u=e.merge(c,d)))throw KE.getNotFoundInstance();var f=u.getBoundingBox();if(!h||null==f||!(f.getMinY()<l.getMinY()||f.getMaxY()>l.getMaxY()))break;l=f}u.setBoundingBox(l);var p=u.getBarcodeColumnCount()+1;u.setDetectionResultColumn(0,c),u.setDetectionResultColumn(p,d);for(var m=null!=c,g=1;g<=p;g++){var v=m?g:p-g;if(void 0===u.getDetectionResultColumn(v)){var y=void 0;y=0===v||v===p?new uT(l,0===v):new eT(l),u.setDetectionResultColumn(v,y);for(var b=-1,w=b,x=l.getMinY();x<=l.getMaxY();x++){if((b=e.getStartColumn(u,v,x,m))<0||b>l.getMaxX()){if(-1===w)continue;b=w}var _=e.detectCodeword(t,l.getMinX(),l.getMaxX(),m,b,x,a,s);null!=_&&(y.setCodeword(x,_),w=b,a=Math.min(a,_.getWidth()),s=Math.max(s,_.getWidth()))}}}return e.createDecoderResult(u)},e.merge=function(t,n){if(null==t&&null==n)return null;var r=e.getBarcodeMetadata(t,n);if(null==r)return null;var i=ZR.merge(e.adjustBoundingBox(t),e.adjustBoundingBox(n));return new dT(r,i)},e.adjustBoundingBox=function(t){var n,r;if(null==t)return null;var i=t.getRowHeights();if(null==i)return null;var o=e.getMax(i),a=0;try{for(var s=DT(i),u=s.next();!u.done;u=s.next()){var l=u.value;if(a+=o-l,l>0)break}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}for(var c=t.getCodewords(),d=0;a>0&&null==c[d];d++)a--;var h=0;for(d=i.length-1;d>=0&&(h+=o-i[d],!(i[d]>0));d--);for(d=c.length-1;h>0&&null==c[d];d--)h--;return t.getBoundingBox().addMissingRows(a,h,t.isLeft())},e.getMax=function(e){var t,n,r=-1;try{for(var i=DT(e),o=i.next();!o.done;o=i.next()){var a=o.value;r=Math.max(r,a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.getBarcodeMetadata=function(e,t){var n,r;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(r=t.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n},e.getRowIndicatorColumn=function(t,n,r,i,o,a){for(var s=new uT(n,i),u=0;u<2;u++)for(var l=0===u?1:-1,c=Math.trunc(Math.trunc(r.getX())),d=Math.trunc(Math.trunc(r.getY()));d<=n.getMaxY()&&d>=n.getMinY();d+=l){var h=e.detectCodeword(t,0,t.getWidth(),i,c,d,o,a);null!=h&&(s.setCodeword(d,h),c=i?h.getStartX():h.getEndX())}return s},e.adjustCodewordCount=function(t,n){var r=n[0][1],i=r.getValue(),o=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-e.getNumberOfECCodeWords(t.getBarcodeECLevel());if(0===i.length){if(o<1||o>NR.MAX_CODEWORDS_IN_BARCODE)throw KE.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},e.createDecoderResult=function(t){var n=e.createBarcodeMatrix(t);e.adjustCodewordCount(t,n);for(var r=new Array,i=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),o=[],a=new Array,s=0;s<t.getBarcodeRowCount();s++)for(var u=0;u<t.getBarcodeColumnCount();u++){var l=n[s][u+1].getValue(),c=s*t.getBarcodeColumnCount()+u;0===l.length?r.push(c):1===l.length?i[c]=l[0]:(a.push(c),o.push(l))}for(var d=new Array(o.length),h=0;h<d.length;h++)d[h]=o[h];return e.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),i,NR.toIntArray(r),NR.toIntArray(a),d)},e.createDecoderResultFromAmbiguousValues=function(t,n,r,i,o){for(var a=new Int32Array(i.length),s=100;s-- >0;){for(var u=0;u<a.length;u++)n[i[u]]=o[u][a[u]];try{return e.decodeCodewords(n,t,r)}catch(l){if(!(l instanceof sE))throw l}if(0===a.length)throw sE.getChecksumInstance();for(u=0;u<a.length;u++){if(a[u]<o[u].length-1){a[u]++;break}if(a[u]=0,u===a.length-1)throw sE.getChecksumInstance()}}throw sE.getChecksumInstance()},e.createBarcodeMatrix=function(e){for(var t,n,r,i,o=Array.from({length:e.getBarcodeRowCount()},(function(){return new Array(e.getBarcodeColumnCount()+2)})),a=0;a<o.length;a++)for(var s=0;s<o[a].length;s++)o[a][s]=new iT;var u=0;try{for(var l=DT(e.getDetectionResultColumns()),c=l.next();!c.done;c=l.next()){var d=c.value;if(null!=d)try{for(var h=(r=void 0,DT(d.getCodewords())),f=h.next();!f.done;f=h.next()){var p=f.value;if(null!=p){var m=p.getRowNumber();if(m>=0){if(m>=o.length)continue;o[m][u].setValue(p.getValue())}}}}catch(g){r={error:g}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}u++}}catch(v){t={error:v}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return o},e.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},e.getStartColumn=function(t,n,r,i){var o,a,s=i?1:-1,u=null;if(e.isValidBarcodeColumn(t,n-s)&&(u=t.getDetectionResultColumn(n-s).getCodeword(r)),null!=u)return i?u.getEndX():u.getStartX();if(null!=(u=t.getDetectionResultColumn(n).getCodewordNearby(r)))return i?u.getStartX():u.getEndX();if(e.isValidBarcodeColumn(t,n-s)&&(u=t.getDetectionResultColumn(n-s).getCodewordNearby(r)),null!=u)return i?u.getEndX():u.getStartX();for(var l=0;e.isValidBarcodeColumn(t,n-s);){n-=s;try{for(var c=(o=void 0,DT(t.getDetectionResultColumn(n).getCodewords())),d=c.next();!d.done;d=c.next()){var h=d.value;if(null!=h)return(i?h.getEndX():h.getStartX())+s*l*(h.getEndX()-h.getStartX())}}catch(f){o={error:f}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}l++}return i?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},e.detectCodeword=function(t,n,r,i,o,a,s,u){o=e.adjustCodewordStartColumn(t,n,r,i,o,a);var l,c=e.getModuleBitCount(t,n,r,i,o,a);if(null==c)return null;var d=LS.sum(c);if(i)l=o+d;else{for(var h=0;h<c.length/2;h++){var f=c[h];c[h]=c[c.length-1-h],c[c.length-1-h]=f}o=(l=o)-d}if(!e.checkCodewordSkew(d,s,u))return null;var p=pT.getDecodedValue(c),m=NR.getCodeword(p);return-1===m?null:new hT(o,l,e.getCodewordBucketNumber(p),m)},e.getModuleBitCount=function(e,t,n,r,i,o){for(var a=i,s=new Int32Array(8),u=0,l=r?1:-1,c=r;(r?a<n:a>=t)&&u<s.length;)e.get(a,o)===c?(s[u]++,a+=l):(u++,c=!c);return u===s.length||a===(r?n:t)&&u===s.length-1?s:null},e.getNumberOfECCodeWords=function(e){return 2<<e},e.adjustCodewordStartColumn=function(t,n,r,i,o,a){for(var s=o,u=i?-1:1,l=0;l<2;l++){for(;(i?s>=n:s<r)&&i===t.get(s,a);){if(Math.abs(o-s)>e.CODEWORD_SKEW_SIZE)return o;s+=u}u=-u,i=!i}return s},e.checkCodewordSkew=function(t,n,r){return n-e.CODEWORD_SKEW_SIZE<=t&&t<=r+e.CODEWORD_SKEW_SIZE},e.decodeCodewords=function(t,n,r){if(0===t.length)throw IE.getFormatInstance();var i=1<<n+1,o=e.correctErrors(t,r,i);e.verifyCodewordCount(t,i);var a=OT.decode(t,""+n);return a.setErrorsCorrected(o),a.setErasures(r.length),a},e.correctErrors=function(t,n,r){if(null!=n&&n.length>r/2+e.MAX_ERRORS||r<0||r>e.MAX_EC_CODEWORDS)throw sE.getChecksumInstance();return e.errorCorrection.decode(t,r,n)},e.verifyCodewordCount=function(e,t){if(e.length<4)throw IE.getFormatInstance();var n=e[0];if(n>e.length)throw IE.getFormatInstance();if(0===n){if(!(t<e.length))throw IE.getFormatInstance();e[0]=e.length-t}},e.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),n=0,r=t.length-1;!((1&e)!==n&&(n=1&e,--r<0));)t[r]++,e>>=1;return t},e.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},e.getCodewordBucketNumber_number=function(t){return e.getCodewordBucketNumber(e.getBitCountForCodeword(t))},e.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},e.toString=function(e){for(var t=new JR,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var r=0;r<e[n].length;r++){var i=e[n][r];0===i.getValue().length?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()},e.CODEWORD_SKEW_SIZE=2,e.MAX_ERRORS=3,e.MAX_EC_CODEWORDS=512,e.errorCorrection=new KR,e}(),PT=MT,FT=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},BT=function(){function e(){}return e.prototype.decode=function(t,n){void 0===n&&(n=null);var r=e.decode(t,n,!1);if(null==r||0===r.length||null==r[0])throw KE.getNotFoundInstance();return r[0]},e.prototype.decodeMultiple=function(t,n){void 0===n&&(n=null);try{return e.decode(t,n,!0)}catch(r){if(r instanceof IE||r instanceof sE)throw KE.getNotFoundInstance();throw r}},e.decode=function(t,n,r){var i,o,a=new Array,s=PR.detectMultiple(t,n,r);try{for(var u=FT(s.getPoints()),l=u.next();!l.done;l=u.next()){var c=l.value,d=PT.decode(s.getBits(),c[4],c[5],c[6],c[7],e.getMinCodewordWidth(c),e.getMaxCodewordWidth(c)),h=new dS(d.getText(),d.getRawBytes(),void 0,c,fS.PDF_417);h.putMetadata(mS.ERROR_CORRECTION_LEVEL,d.getECLevel());var f=d.getOther();null!=f&&h.putMetadata(mS.PDF417_EXTRA_METADATA,f),a.push(h)}}catch(p){i={error:p}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return a.map((function(e){return e}))},e.getMaxWidth=function(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))},e.getMinWidth=function(e,t){return null==e||null==t?xE.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},e.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(e.getMaxWidth(t[0],t[4]),e.getMaxWidth(t[6],t[2])*NR.MODULES_IN_CODEWORD/NR.MODULES_IN_STOP_PATTERN),Math.max(e.getMaxWidth(t[1],t[5]),e.getMaxWidth(t[7],t[3])*NR.MODULES_IN_CODEWORD/NR.MODULES_IN_STOP_PATTERN)))},e.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(e.getMinWidth(t[0],t[4]),e.getMinWidth(t[6],t[2])*NR.MODULES_IN_CODEWORD/NR.MODULES_IN_STOP_PATTERN),Math.min(e.getMinWidth(t[1],t[5]),e.getMinWidth(t[7],t[3])*NR.MODULES_IN_CODEWORD/NR.MODULES_IN_STOP_PATTERN)))},e.prototype.reset=function(){},e}(),LT=BT,zT=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zT(t,e),t.kind="ReaderException",t}(YC),WT=jT,HT=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},VT=function(){function e(){}return e.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},e.prototype.decodeWithState=function(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)},e.prototype.setHints=function(e){this.hints=e;var t=null!==e&&void 0!==e&&void 0!==e.get(SE.TRY_HARDER),n=null===e||void 0===e?null:e.get(SE.POSSIBLE_FORMATS),r=new Array;if(null!==n&&void 0!==n){var i=n.some((function(e){return e===fS.UPC_A||e===fS.UPC_E||e===fS.EAN_13||e===fS.EAN_8||e===fS.CODABAR||e===fS.CODE_39||e===fS.CODE_93||e===fS.CODE_128||e===fS.ITF||e===fS.RSS_14||e===fS.RSS_EXPANDED}));i&&!t&&r.push(new lI(e)),n.includes(fS.QR_CODE)&&r.push(new IR),n.includes(fS.DATA_MATRIX)&&r.push(new OI),n.includes(fS.AZTEC)&&r.push(new aA),n.includes(fS.PDF_417)&&r.push(new LT),i&&t&&r.push(new lI(e))}0===r.length&&(t||r.push(new lI(e)),r.push(new IR),r.push(new OI),r.push(new aA),r.push(new LT),t&&r.push(new lI(e))),this.readers=r},e.prototype.reset=function(){var e,t;if(null!==this.readers)try{for(var n=HT(this.readers),r=n.next();!r.done;r=n.next()){r.value.reset()}}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.decodeInternal=function(e){var t,n;if(null===this.readers)throw new WT("No readers where selected, nothing can be read.");try{for(var r=HT(this.readers),i=r.next();!i.done;i=r.next()){var o=i.value;try{return o.decode(e,this.hints)}catch(a){if(a instanceof WT)continue}}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}throw new KE("No MultiFormat Readers were able to detect the code.")},e}(),GT=VT,UT=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),KT=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=500);var r=new GT;return r.setHints(t),e.call(this,r,n)||this}return UT(t,e),t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)},t}(cS),XT=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZT=(function(e){function t(t){return void 0===t&&(t=500),e.call(this,new LT,t)||this}XT(t,e)}(cS),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}());!function(e){function t(t){return void 0===t&&(t=500),e.call(this,new IR,t)||this}ZT(t,e)}(cS);!function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.MIN_SIZE=3]="MIN_SIZE",e[e.MAX_SIZE=4]="MAX_SIZE",e[e.MARGIN=5]="MARGIN",e[e.PDF417_COMPACT=6]="PDF417_COMPACT",e[e.PDF417_COMPACTION=7]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=9]="AZTEC_LAYERS",e[e.QR_VERSION=10]="QR_VERSION"}(TT||(TT={}));var qT=TT,YT=function(){function e(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new wS(e,Int32Array.from([1])))}return e.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var n=t[t.length-1],r=this.field,i=t.length;i<=e;i++){var o=n.multiply(new wS(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));t.push(o),n=o}return t[e]},e.prototype.encode=function(e,t){if(0===t)throw new nE("No error correction bytes");var n=e.length-t;if(n<=0)throw new nE("No data bytes provided");var r=this.buildGenerator(t),i=new Int32Array(n);cE.arraycopy(e,0,i,0,n);for(var o=new wS(this.field,i),a=(o=o.multiplyByMonomial(t,1)).divide(r)[1].getCoefficients(),s=t-a.length,u=0;u<s;u++)e[n+u]=0;cE.arraycopy(a,0,e,n+s,a.length)},e}(),JT=YT,QT=function(){function e(){}return e.applyMaskPenaltyRule1=function(t){return e.applyMaskPenaltyRule1Internal(t,!0)+e.applyMaskPenaltyRule1Internal(t,!1)},e.applyMaskPenaltyRule2=function(t){for(var n=0,r=t.getArray(),i=t.getWidth(),o=t.getHeight(),a=0;a<o-1;a++)for(var s=r[a],u=0;u<i-1;u++){var l=s[u];l===s[u+1]&&l===r[a+1][u]&&l===r[a+1][u+1]&&n++}return e.N2*n},e.applyMaskPenaltyRule3=function(t){for(var n=0,r=t.getArray(),i=t.getWidth(),o=t.getHeight(),a=0;a<o;a++)for(var s=0;s<i;s++){var u=r[a];s+6<i&&1===u[s]&&0===u[s+1]&&1===u[s+2]&&1===u[s+3]&&1===u[s+4]&&0===u[s+5]&&1===u[s+6]&&(e.isWhiteHorizontal(u,s-4,s)||e.isWhiteHorizontal(u,s+7,s+11))&&n++,a+6<o&&1===r[a][s]&&0===r[a+1][s]&&1===r[a+2][s]&&1===r[a+3][s]&&1===r[a+4][s]&&0===r[a+5][s]&&1===r[a+6][s]&&(e.isWhiteVertical(r,s,a-4,a)||e.isWhiteVertical(r,s,a+7,a+11))&&n++}return n*e.N3},e.isWhiteHorizontal=function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var r=t;r<n;r++)if(1===e[r])return!1;return!0},e.isWhiteVertical=function(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(var i=n;i<r;i++)if(1===e[i][t])return!1;return!0},e.applyMaskPenaltyRule4=function(t){for(var n=0,r=t.getArray(),i=t.getWidth(),o=t.getHeight(),a=0;a<o;a++)for(var s=r[a],u=0;u<i;u++)1===s[u]&&n++;var l=t.getHeight()*t.getWidth();return Math.floor(10*Math.abs(2*n-l)/l)*e.N4},e.getDataMaskBit=function(e,t,n){var r,i;switch(e){case 0:r=n+t&1;break;case 1:r=1&n;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:r=(1&(i=n*t))+i%3;break;case 6:r=(1&(i=n*t))+i%3&1;break;case 7:r=(i=n*t)%3+(n+t&1)&1;break;default:throw new nE("Invalid mask pattern: "+e)}return 0===r},e.applyMaskPenaltyRule1Internal=function(t,n){for(var r=0,i=n?t.getHeight():t.getWidth(),o=n?t.getWidth():t.getHeight(),a=t.getArray(),s=0;s<i;s++){for(var u=0,l=-1,c=0;c<o;c++){var d=n?a[s][c]:a[c][s];d===l?u++:(u>=5&&(r+=e.N1+(u-5)),u=1,l=d)}u>=5&&(r+=e.N1+(u-5))}return r},e.N1=3,e.N2=3,e.N3=40,e.N4=10,e}(),$T=QT,eN=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tN=function(){function e(e,t){this.width=e,this.height=t;for(var n=new Array(t),r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}return e.prototype.getHeight=function(){return this.height},e.prototype.getWidth=function(){return this.width},e.prototype.get=function(e,t){return this.bytes[t][e]},e.prototype.getArray=function(){return this.bytes},e.prototype.setNumber=function(e,t,n){this.bytes[t][e]=n},e.prototype.setBoolean=function(e,t,n){this.bytes[t][e]=n?1:0},e.prototype.clear=function(e){var t,n;try{for(var r=eN(this.bytes),i=r.next();!i.done;i=r.next()){var o=i.value;bE.fill(o,e)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.width!==n.width)return!1;if(this.height!==n.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var o=this.bytes[r],a=n.bytes[r],s=0,u=this.width;s<u;++s)if(o[s]!==a[s])return!1;return!0},e.prototype.toString=function(){for(var e=new WE,t=0,n=this.height;t<n;++t){for(var r=this.bytes[t],i=0,o=this.width;i<o;++i)switch(r[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()},e}(),nN=tN,rN=function(){function e(){this.maskPattern=-1}return e.prototype.getMode=function(){return this.mode},e.prototype.getECLevel=function(){return this.ecLevel},e.prototype.getVersion=function(){return this.version},e.prototype.getMaskPattern=function(){return this.maskPattern},e.prototype.getMatrix=function(){return this.matrix},e.prototype.toString=function(){var e=new WE;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()},e.prototype.setMode=function(e){this.mode=e},e.prototype.setECLevel=function(e){this.ecLevel=e},e.prototype.setVersion=function(e){this.version=e},e.prototype.setMaskPattern=function(e){this.maskPattern=e},e.prototype.setMatrix=function(e){this.matrix=e},e.isValidMaskPattern=function(t){return t>=0&&t<e.NUM_MASK_PATTERNS},e.NUM_MASK_PATTERNS=8,e}(),iN=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oN=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iN(t,e),t.kind="WriterException",t}(YC),aN=oN,sN=function(){function e(){}return e.clearMatrix=function(e){e.clear(255)},e.buildMatrix=function(t,n,r,i,o){e.clearMatrix(o),e.embedBasicPatterns(r,o),e.embedTypeInfo(n,i,o),e.maybeEmbedVersionInfo(r,o),e.embedDataBits(t,i,o)},e.embedBasicPatterns=function(t,n){e.embedPositionDetectionPatternsAndSeparators(n),e.embedDarkDotAtLeftBottomCorner(n),e.maybeEmbedPositionAdjustmentPatterns(t,n),e.embedTimingPatterns(n)},e.embedTypeInfo=function(t,n,r){var i=new CE;e.makeTypeInfoBits(t,n,i);for(var o=0,a=i.getSize();o<a;++o){var s=i.get(i.getSize()-1-o),u=e.TYPE_INFO_COORDINATES[o],l=u[0],c=u[1];if(r.setBoolean(l,c,s),o<8){var d=r.getWidth()-o-1,h=8;r.setBoolean(d,h,s)}else{d=8,h=r.getHeight()-7+(o-8);r.setBoolean(d,h,s)}}},e.maybeEmbedVersionInfo=function(t,n){if(!(t.getVersionNumber()<7)){var r=new CE;e.makeVersionInfoBits(t,r);for(var i=17,o=0;o<6;++o)for(var a=0;a<3;++a){var s=r.get(i);i--,n.setBoolean(o,n.getHeight()-11+a,s),n.setBoolean(n.getHeight()-11+a,o,s)}}},e.embedDataBits=function(t,n,r){for(var i=0,o=-1,a=r.getWidth()-1,s=r.getHeight()-1;a>0;){for(6===a&&(a-=1);s>=0&&s<r.getHeight();){for(var u=0;u<2;++u){var l=a-u;if(e.isEmpty(r.get(l,s))){var c=void 0;i<t.getSize()?(c=t.get(i),++i):c=!1,255!==n&&$T.getDataMaskBit(n,l,s)&&(c=!c),r.setBoolean(l,s,c)}}s+=o}s+=o=-o,a-=2}if(i!==t.getSize())throw new aN("Not all bits consumed: "+i+"/"+t.getSize())},e.findMSBSet=function(e){return 32-xE.numberOfLeadingZeros(e)},e.calculateBCHCode=function(t,n){if(0===n)throw new nE("0 polynomial");var r=e.findMSBSet(n);for(t<<=r-1;e.findMSBSet(t)>=r;)t^=n<<e.findMSBSet(t)-r;return t},e.makeTypeInfoBits=function(t,n,r){if(!rN.isValidMaskPattern(n))throw new aN("Invalid mask pattern");var i=t.getBits()<<3|n;r.appendBits(i,5);var o=e.calculateBCHCode(i,e.TYPE_INFO_POLY);r.appendBits(o,10);var a=new CE;if(a.appendBits(e.TYPE_INFO_MASK_PATTERN,15),r.xor(a),15!==r.getSize())throw new aN("should not happen but we got: "+r.getSize())},e.makeVersionInfoBits=function(t,n){n.appendBits(t.getVersionNumber(),6);var r=e.calculateBCHCode(t.getVersionNumber(),e.VERSION_INFO_POLY);if(n.appendBits(r,12),18!==n.getSize())throw new aN("should not happen but we got: "+n.getSize())},e.isEmpty=function(e){return 255===e},e.embedTimingPatterns=function(t){for(var n=8;n<t.getWidth()-8;++n){var r=(n+1)%2;e.isEmpty(t.get(n,6))&&t.setNumber(n,6,r),e.isEmpty(t.get(6,n))&&t.setNumber(6,n,r)}},e.embedDarkDotAtLeftBottomCorner=function(e){if(0===e.get(8,e.getHeight()-8))throw new aN;e.setNumber(8,e.getHeight()-8,1)},e.embedHorizontalSeparationPattern=function(t,n,r){for(var i=0;i<8;++i){if(!e.isEmpty(r.get(t+i,n)))throw new aN;r.setNumber(t+i,n,0)}},e.embedVerticalSeparationPattern=function(t,n,r){for(var i=0;i<7;++i){if(!e.isEmpty(r.get(t,n+i)))throw new aN;r.setNumber(t,n+i,0)}},e.embedPositionAdjustmentPattern=function(t,n,r){for(var i=0;i<5;++i)for(var o=e.POSITION_ADJUSTMENT_PATTERN[i],a=0;a<5;++a)r.setNumber(t+a,n+i,o[a])},e.embedPositionDetectionPattern=function(t,n,r){for(var i=0;i<7;++i)for(var o=e.POSITION_DETECTION_PATTERN[i],a=0;a<7;++a)r.setNumber(t+a,n+i,o[a])},e.embedPositionDetectionPatternsAndSeparators=function(t){var n=e.POSITION_DETECTION_PATTERN[0].length;e.embedPositionDetectionPattern(0,0,t),e.embedPositionDetectionPattern(t.getWidth()-n,0,t),e.embedPositionDetectionPattern(0,t.getWidth()-n,t);e.embedHorizontalSeparationPattern(0,7,t),e.embedHorizontalSeparationPattern(t.getWidth()-8,7,t),e.embedHorizontalSeparationPattern(0,t.getWidth()-8,t);e.embedVerticalSeparationPattern(7,0,t),e.embedVerticalSeparationPattern(t.getHeight()-7-1,0,t),e.embedVerticalSeparationPattern(7,t.getHeight()-7,t)},e.maybeEmbedPositionAdjustmentPatterns=function(t,n){if(!(t.getVersionNumber()<2))for(var r=t.getVersionNumber()-1,i=e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,a=i.length;o!==a;o++){var s=i[o];if(s>=0)for(var u=0;u!==a;u++){var l=i[u];l>=0&&e.isEmpty(n.get(l,s))&&e.embedPositionAdjustmentPattern(l-2,s-2,n)}}},e.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),e.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),e.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),e.VERSION_INFO_POLY=7973,e.TYPE_INFO_POLY=1335,e.TYPE_INFO_MASK_PATTERN=21522,e}(),uN=sN,lN=function(){function e(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return e.prototype.getDataBytes=function(){return this.dataBytes},e.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},e}(),cN=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},dN=function(){function e(){}return e.calculateMaskPenalty=function(e){return $T.applyMaskPenaltyRule1(e)+$T.applyMaskPenaltyRule2(e)+$T.applyMaskPenaltyRule3(e)+$T.applyMaskPenaltyRule4(e)},e.encode=function(t,n,r){void 0===r&&(r=null);var i=e.DEFAULT_BYTE_MODE_ENCODING,o=null!==r&&void 0!==r.get(qT.CHARACTER_SET);o&&(i=r.get(qT.CHARACTER_SET).toString());var a=this.chooseMode(t,i),s=new CE;if(a===oR.BYTE&&(o||e.DEFAULT_BYTE_MODE_ENCODING!==i)){var u=OE.getCharacterSetECIByName(i);void 0!==u&&this.appendECI(u,s)}this.appendModeInfo(a,s);var l,c=new CE;if(this.appendBytes(t,a,c,i),null!==r&&void 0!==r.get(qT.QR_VERSION)){var d=Number.parseInt(r.get(qT.QR_VERSION).toString(),10);l=XI.getVersionForNumber(d);var h=this.calculateBitsNeeded(a,s,c,l);if(!this.willFit(h,l,n))throw new aN("Data too big for requested version")}else l=this.recommendVersion(n,a,s,c);var f=new CE;f.appendBitArray(s);var p=a===oR.BYTE?c.getSizeInBytes():t.length;this.appendLengthInfo(p,l,a,f),f.appendBitArray(c);var m=l.getECBlocksForLevel(n),g=l.getTotalCodewords()-m.getTotalECCodewords();this.terminateBits(g,f);var v=this.interleaveWithECBytes(f,l.getTotalCodewords(),g,m.getNumBlocks()),y=new rN;y.setECLevel(n),y.setMode(a),y.setVersion(l);var b=l.getDimensionForVersion(),w=new nN(b,b),x=this.chooseMaskPattern(v,n,l,w);return y.setMaskPattern(x),uN.buildMatrix(v,n,l,x,w),y.setMatrix(w),y},e.recommendVersion=function(e,t,n,r){var i=this.calculateBitsNeeded(t,n,r,XI.getVersionForNumber(1)),o=this.chooseVersion(i,e),a=this.calculateBitsNeeded(t,n,r,o);return this.chooseVersion(a,e)},e.calculateBitsNeeded=function(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()},e.getAlphanumericCode=function(t){return t<e.ALPHANUMERIC_TABLE.length?e.ALPHANUMERIC_TABLE[t]:-1},e.chooseMode=function(t,n){if(void 0===n&&(n=null),OE.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(t))return oR.KANJI;for(var r=!1,i=!1,o=0,a=t.length;o<a;++o){var s=t.charAt(o);if(e.isDigit(s))r=!0;else{if(-1===this.getAlphanumericCode(s.charCodeAt(0)))return oR.BYTE;i=!0}}return i?oR.ALPHANUMERIC:r?oR.NUMERIC:oR.BYTE},e.isOnlyDoubleByteKanji=function(e){var t;try{t=BE.encode(e,OE.SJIS)}catch(o){return!1}var n=t.length;if(n%2!==0)return!1;for(var r=0;r<n;r+=2){var i=255&t[r];if((i<129||i>159)&&(i<224||i>235))return!1}return!0},e.chooseMaskPattern=function(e,t,n,r){for(var i=Number.MAX_SAFE_INTEGER,o=-1,a=0;a<rN.NUM_MASK_PATTERNS;a++){uN.buildMatrix(e,t,n,a,r);var s=this.calculateMaskPenalty(r);s<i&&(i=s,o=a)}return o},e.chooseVersion=function(t,n){for(var r=1;r<=40;r++){var i=XI.getVersionForNumber(r);if(e.willFit(t,i,n))return i}throw new aN("Data too big")},e.willFit=function(e,t,n){return t.getTotalCodewords()-t.getECBlocksForLevel(n).getTotalECCodewords()>=(e+7)/8},e.terminateBits=function(e,t){var n=8*e;if(t.getSize()>n)throw new aN("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(var r=0;r<4&&t.getSize()<n;++r)t.appendBit(!1);var i=7&t.getSize();if(i>0)for(r=i;r<8;r++)t.appendBit(!1);var o=e-t.getSizeInBytes();for(r=0;r<o;++r)t.appendBits(0===(1&r)?236:17,8);if(t.getSize()!==n)throw new aN("Bits size does not equal capacity")},e.getNumDataBytesAndNumECBytesForBlockID=function(e,t,n,r,i,o){if(r>=n)throw new aN("Block ID too large");var a=e%n,s=n-a,u=Math.floor(e/n),l=u+1,c=Math.floor(t/n),d=c+1,h=u-c,f=l-d;if(h!==f)throw new aN("EC bytes mismatch");if(n!==s+a)throw new aN("RS blocks mismatch");if(e!==(c+h)*s+(d+f)*a)throw new aN("Total bytes mismatch");r<s?(i[0]=c,o[0]=h):(i[0]=d,o[0]=f)},e.interleaveWithECBytes=function(t,n,r,i){var o,a,s,u;if(t.getSizeInBytes()!==r)throw new aN("Number of bits and data bytes does not match");for(var l=0,c=0,d=0,h=new Array,f=0;f<i;++f){var p=new Int32Array(1),m=new Int32Array(1);e.getNumDataBytesAndNumECBytesForBlockID(n,r,i,f,p,m);var g=p[0],v=new Uint8Array(g);t.toBytes(8*l,v,0,g);var y=e.generateECBytes(v,m[0]);h.push(new lN(v,y)),c=Math.max(c,g),d=Math.max(d,y.length),l+=p[0]}if(r!==l)throw new aN("Data bytes does not match offset");var b=new CE;for(f=0;f<c;++f)try{for(var w=(o=void 0,cN(h)),x=w.next();!x.done;x=w.next()){f<(v=x.value.getDataBytes()).length&&b.appendBits(v[f],8)}}catch(E){o={error:E}}finally{try{x&&!x.done&&(a=w.return)&&a.call(w)}finally{if(o)throw o.error}}for(f=0;f<d;++f)try{for(var _=(s=void 0,cN(h)),C=_.next();!C.done;C=_.next()){f<(y=C.value.getErrorCorrectionBytes()).length&&b.appendBits(y[f],8)}}catch(S){s={error:S}}finally{try{C&&!C.done&&(u=_.return)&&u.call(_)}finally{if(s)throw s.error}}if(n!==b.getSizeInBytes())throw new aN("Interleaving error: "+n+" and "+b.getSizeInBytes()+" differ.");return b},e.generateECBytes=function(e,t){for(var n=e.length,r=new Int32Array(n+t),i=0;i<n;i++)r[i]=255&e[i];new JT(AS.QR_CODE_FIELD_256).encode(r,t);var o=new Uint8Array(t);for(i=0;i<t;i++)o[i]=r[n+i];return o},e.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},e.appendLengthInfo=function(e,t,n,r){var i=n.getCharacterCountBits(t);if(e>=1<<i)throw new aN(e+" is bigger than "+((1<<i)-1));r.appendBits(e,i)},e.appendBytes=function(t,n,r,i){switch(n){case oR.NUMERIC:e.appendNumericBytes(t,r);break;case oR.ALPHANUMERIC:e.appendAlphanumericBytes(t,r);break;case oR.BYTE:e.append8BitBytes(t,r,i);break;case oR.KANJI:e.appendKanjiBytes(t,r);break;default:throw new aN("Invalid mode: "+n)}},e.getDigit=function(e){return e.charCodeAt(0)-48},e.isDigit=function(t){var n=e.getDigit(t);return n>=0&&n<=9},e.appendNumericBytes=function(t,n){for(var r=t.length,i=0;i<r;){var o=e.getDigit(t.charAt(i));if(i+2<r){var a=e.getDigit(t.charAt(i+1)),s=e.getDigit(t.charAt(i+2));n.appendBits(100*o+10*a+s,10),i+=3}else if(i+1<r){a=e.getDigit(t.charAt(i+1));n.appendBits(10*o+a,7),i+=2}else n.appendBits(o,4),i++}},e.appendAlphanumericBytes=function(t,n){for(var r=t.length,i=0;i<r;){var o=e.getAlphanumericCode(t.charCodeAt(i));if(-1===o)throw new aN;if(i+1<r){var a=e.getAlphanumericCode(t.charCodeAt(i+1));if(-1===a)throw new aN;n.appendBits(45*o+a,11),i+=2}else n.appendBits(o,6),i++}},e.append8BitBytes=function(e,t,n){var r;try{r=BE.encode(e,n)}catch(s){throw new aN(s)}for(var i=0,o=r.length;i!==o;i++){var a=r[i];t.appendBits(a,8)}},e.appendKanjiBytes=function(e,t){var n;try{n=BE.encode(e,OE.SJIS)}catch(u){throw new aN(u)}for(var r=n.length,i=0;i<r;i+=2){var o=(255&n[i])<<8&4294967295|255&n[i+1],a=-1;if(o>=33088&&o<=40956?a=o-33088:o>=57408&&o<=60351&&(a=o-49472),-1===a)throw new aN("Invalid byte sequence");var s=192*(a>>8)+(255&a);t.appendBits(s,13)}},e.appendECI=function(e,t){t.appendBits(oR.ECI.getBits(),4),t.appendBits(e.getValue(),8)},e.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),e.DEFAULT_BYTE_MODE_ENCODING=OE.UTF8.getName(),e}(),hN=dN,fN=(function(){function e(){}e.prototype.write=function(t,n,r,i){if(void 0===i&&(i=null),0===t.length)throw new nE("Found empty contents");if(n<0||r<0)throw new nE("Requested dimensions are too small: "+n+"x"+r);var o=FI.L,a=e.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(qT.ERROR_CORRECTION)&&(o=FI.fromString(i.get(qT.ERROR_CORRECTION).toString())),void 0!==i.get(qT.MARGIN)&&(a=Number.parseInt(i.get(qT.MARGIN).toString(),10)));var s=hN.encode(t,o,i);return this.renderResult(s,n,r,a)},e.prototype.writeToDom=function(e,t,n,r,i){void 0===i&&(i=null),"string"===typeof e&&(e=document.querySelector(e));var o=this.write(t,n,r,i);e&&e.appendChild(o)},e.prototype.renderResult=function(e,t,n,r){var i=e.getMatrix();if(null===i)throw new OS;for(var o=i.getWidth(),a=i.getHeight(),s=o+2*r,u=a+2*r,l=Math.max(t,s),c=Math.max(n,u),d=Math.min(Math.floor(l/s),Math.floor(c/u)),h=Math.floor((l-o*d)/2),f=Math.floor((c-a*d)/2),p=this.createSVGElement(l,c),m=0,g=f;m<a;m++,g+=d)for(var v=0,y=h;v<o;v++,y+=d)if(1===i.get(v,m)){var b=this.createSvgRectElement(y,g,d,d);p.appendChild(b)}return p},e.prototype.createSVGElement=function(t,n){var r=document.createElementNS(e.SVG_NS,"svg");return r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"width",n.toString()),r},e.prototype.createSvgRectElement=function(t,n,r,i){var o=document.createElementNS(e.SVG_NS,"rect");return o.setAttributeNS(null,"x",t.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",i.toString()),o.setAttributeNS(null,"fill","#000000"),o},e.QUIET_ZONE_SIZE=4,e.SVG_NS="http://www.w3.org/2000/svg"}(),function(){function e(){}return e.prototype.encode=function(t,n,r,i,o){if(0===t.length)throw new nE("Found empty contents");if(n!==fS.QR_CODE)throw new nE("Can only encode QR_CODE, but got "+n);if(r<0||i<0)throw new nE("Requested dimensions are too small: "+r+"x"+i);var a=FI.L,s=e.QUIET_ZONE_SIZE;null!==o&&(void 0!==o.get(qT.ERROR_CORRECTION)&&(a=FI.fromString(o.get(qT.ERROR_CORRECTION).toString())),void 0!==o.get(qT.MARGIN)&&(s=Number.parseInt(o.get(qT.MARGIN).toString(),10)));var u=hN.encode(t,a,o);return e.renderResult(u,r,i,s)},e.renderResult=function(e,t,n,r){var i=e.getMatrix();if(null===i)throw new OS;for(var o=i.getWidth(),a=i.getHeight(),s=o+2*r,u=a+2*r,l=Math.max(t,s),c=Math.max(n,u),d=Math.min(Math.floor(l/s),Math.floor(c/u)),h=Math.floor((l-o*d)/2),f=Math.floor((c-a*d)/2),p=new VE(l,c),m=0,g=f;m<a;m++,g+=d)for(var v=0,y=h;v<o;v++,y+=d)1===i.get(v,m)&&p.setRegion(y,g,d,d);return p},e.QUIET_ZONE_SIZE=4,e}()),pN=(function(){function e(){}e.prototype.encode=function(e,t,n,r,i){if(t!==fS.QR_CODE)throw new nE("No encoder available for format "+t);return(new fN).encode(e,t,n,r,i)}}(),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),mN=(function(e){function t(t,n,r,i,o,a,s,u){var l=e.call(this,a,s)||this;if(l.yuvData=t,l.dataWidth=n,l.dataHeight=r,l.left=i,l.top=o,i+a>n||o+s>r)throw new nE("Crop rectangle does not fit within image data.");return u&&l.reverseHorizontal(a,s),l}pN(t,e),t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new nE("Requested row is outside the image: "+e);var n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));var r=(e+this.top)*this.dataWidth+this.left;return cE.arraycopy(this.yuvData,r,t,0,n),t},t.prototype.getMatrix=function(){var e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;var n=e*t,r=new Uint8ClampedArray(n),i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return cE.arraycopy(this.yuvData,i,r,0,n),r;for(var o=0;o<t;o++){var a=o*e;cE.arraycopy(this.yuvData,i,r,a,e),i+=this.dataWidth}return r},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,n,r,i){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,r,i,!1)},t.prototype.renderThumbnail=function(){for(var e=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(e*n),i=this.yuvData,o=this.top*this.dataWidth+this.left,a=0;a<n;a++){for(var s=a*e,u=0;u<e;u++){var l=255&i[o+u*t.THUMBNAIL_SCALE_FACTOR];r[s+u]=4278190080|65793*l}o+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return r},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(e,t){for(var n=this.yuvData,r=0,i=this.top*this.dataWidth+this.left;r<t;r++,i+=this.dataWidth)for(var o=i+e/2,a=i,s=i+e-1;a<o;a++,s--){var u=n[a];n[a]=n[s],n[s]=u}},t.prototype.invert=function(){return new rS(this)},t.THUMBNAIL_SCALE_FACTOR=2}(eS),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),gN=(function(e){function t(t,n,r,i,o,a,s){var u=e.call(this,n,r)||this;if(u.dataWidth=i,u.dataHeight=o,u.left=a,u.top=s,4===t.BYTES_PER_ELEMENT){for(var l=n*r,c=new Uint8ClampedArray(l),d=0;d<l;d++){var h=t[d],f=h>>16&255,p=h>>7&510,m=255&h;c[d]=(f+p+m)/4&255}u.luminances=c}else u.luminances=t;if(void 0===i&&(u.dataWidth=n),void 0===o&&(u.dataHeight=r),void 0===a&&(u.left=0),void 0===s&&(u.top=0),u.left+n>u.dataWidth||u.top+r>u.dataHeight)throw new nE("Crop rectangle does not fit within image data.");return u}mN(t,e),t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new nE("Requested row is outside the image: "+e);var n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));var r=(e+this.top)*this.dataWidth+this.left;return cE.arraycopy(this.luminances,r,t,0,n),t},t.prototype.getMatrix=function(){var e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;var n=e*t,r=new Uint8ClampedArray(n),i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return cE.arraycopy(this.luminances,i,r,0,n),r;for(var o=0;o<t;o++){var a=o*e;cE.arraycopy(this.luminances,i,r,a,e),i+=this.dataWidth}return r},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,n,r,i){return new t(this.luminances,r,i,this.dataWidth,this.dataHeight,this.left+e,this.top+n)},t.prototype.invert=function(){return new rS(this)}}(eS),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),vN=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gN(t,e),t.forName=function(e){return this.getCharacterSetECIByName(e)},t}(OE),yN=vN,bN=function(){function e(){}return e.ISO_8859_1=OE.ISO8859_1,e}(),wN=function(){function e(){}return e.prototype.isCompact=function(){return this.compact},e.prototype.setCompact=function(e){this.compact=e},e.prototype.getSize=function(){return this.size},e.prototype.setSize=function(e){this.size=e},e.prototype.getLayers=function(){return this.layers},e.prototype.setLayers=function(e){this.layers=e},e.prototype.getCodeWords=function(){return this.codeWords},e.prototype.setCodeWords=function(e){this.codeWords=e},e.prototype.getMatrix=function(){return this.matrix},e.prototype.setMatrix=function(e){this.matrix=e},e}(),xN=function(){function e(){}return e.singletonList=function(e){return[e]},e.min=function(e,t){return e.sort(t)[0]},e}(),_N=xN,CN=function(){function e(e){this.previous=e}return e.prototype.getPrevious=function(){return this.previous},e}(),EN=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),SN=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.value=n,i.bitCount=r,i}return EN(t,e),t.prototype.appendTo=function(e,t){e.appendBits(this.value,this.bitCount)},t.prototype.add=function(e,n){return new t(this,e,n)},t.prototype.addBinaryShift=function(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,e,n)},t.prototype.toString=function(){var e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+xE.toBinaryString(e|1<<this.bitCount).substring(1)+">"},t}(CN),AN=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kN=function(e){function t(t,n,r){var i=e.call(this,t,0,0)||this;return i.binaryShiftStart=n,i.binaryShiftByteCount=r,i}return AN(t,e),t.prototype.appendTo=function(e,t){for(var n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)},t.prototype.addBinaryShift=function(e,n){return new t(this,e,n)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},t}(SN),IN=kN;function RN(e,t,n){return new SN(e,t,n)}var TN=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],NN=new SN(null,0,0),ON=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],DN=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var MN=function(e){var t,n;try{for(var r=DN(e),i=r.next();!i.done;i=r.next()){var o=i.value;bE.fill(o,-1)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e[0][4]=0,e[1][4]=0,e[1][0]=28,e[3][4]=0,e[2][4]=0,e[2][0]=15,e}(bE.createInt32Array(6,6)),PN=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},FN=function(){function e(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}return e.prototype.getMode=function(){return this.mode},e.prototype.getToken=function(){return this.token},e.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},e.prototype.getBitCount=function(){return this.bitCount},e.prototype.latchAndAppend=function(t,n){var r=this.bitCount,i=this.token;if(t!==this.mode){var o=ON[this.mode][t];i=RN(i,65535&o,o>>16),r+=o>>16}var a=2===t?4:5;return new e(i=RN(i,n,a),t,0,r+a)},e.prototype.shiftAndAppend=function(t,n){var r=this.token,i=2===this.mode?4:5;return r=RN(r,MN[this.mode][t],i),new e(r=RN(r,n,5),this.mode,0,this.bitCount+i+5)},e.prototype.addBinaryShiftChar=function(t){var n=this.token,r=this.mode,i=this.bitCount;if(4===this.mode||2===this.mode){var o=ON[r][0];n=RN(n,65535&o,o>>16),i+=o>>16,r=0}var a=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,s=new e(n,r,this.binaryShiftByteCount+1,i+a);return 2078===s.binaryShiftByteCount&&(s=s.endBinaryShift(t+1)),s},e.prototype.endBinaryShift=function(t){if(0===this.binaryShiftByteCount)return this;var n=this.token;return new e(n=function(e,t,n){return new IN(e,t,n)}(n,t-this.binaryShiftByteCount,this.binaryShiftByteCount),this.mode,0,this.bitCount)},e.prototype.isBetterThanOrEqualTo=function(t){var n=this.bitCount+(ON[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?n+=e.calculateBinaryShiftCost(t)-e.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(n+=10),n<=t.bitCount},e.prototype.toBitArray=function(e){for(var t,n,r=[],i=this.endBinaryShift(e.length).token;null!==i;i=i.getPrevious())r.unshift(i);var o=new CE;try{for(var a=PN(r),s=a.next();!s.done;s=a.next()){s.value.appendTo(o,e)}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},e.prototype.toString=function(){return zE.format("%s bits=%d bytes=%d",TN[this.mode],this.bitCount,this.binaryShiftByteCount)},e.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},e.INITIAL_STATE=new e(NN,0,0,0),e}(),BN=FN;var LN=function(e){var t=zE.getCharCode(" "),n=zE.getCharCode("."),r=zE.getCharCode(",");e[0][t]=1;for(var i=zE.getCharCode("Z"),o=zE.getCharCode("A"),a=o;a<=i;a++)e[0][a]=a-o+2;e[1][t]=1;var s=zE.getCharCode("z"),u=zE.getCharCode("a");for(a=u;a<=s;a++)e[1][a]=a-u+2;e[2][t]=1;var l=zE.getCharCode("9"),c=zE.getCharCode("0");for(a=c;a<=l;a++)e[2][a]=a-c+2;e[2][r]=12,e[2][n]=13;for(var d=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"],h=0;h<d.length;h++)e[3][zE.getCharCode(d[h])]=h;var f=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(h=0;h<f.length;h++)zE.getCharCode(f[h])>0&&(e[4][zE.getCharCode(f[h])]=h);return e}(bE.createInt32Array(5,256)),zN=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jN=function(){function e(e){this.text=e}return e.prototype.encode=function(){for(var t=zE.getCharCode(" "),n=zE.getCharCode("\n"),r=_N.singletonList(BN.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,a=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case zE.getCharCode("\r"):o=a===n?2:0;break;case zE.getCharCode("."):o=a===t?3:0;break;case zE.getCharCode(","):o=a===t?4:0;break;case zE.getCharCode(":"):o=a===t?5:0;break;default:o=0}o>0?(r=e.updateStateListForPair(r,i,o),i++):r=this.updateStateListForChar(r,i)}var s=_N.min(r,(function(e,t){return e.getBitCount()-t.getBitCount()}));return s.toBitArray(this.text)},e.prototype.updateStateListForChar=function(t,n){var r,i,o=[];try{for(var a=zN(t),s=a.next();!s.done;s=a.next()){var u=s.value;this.updateStateForChar(u,n,o)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return e.simplifyStates(o)},e.prototype.updateStateForChar=function(e,t,n){for(var r=255&this.text[t],i=LN[e.getMode()][r]>0,o=null,a=0;a<=4;a++){var s=LN[a][r];if(s>0){if(null==o&&(o=e.endBinaryShift(t)),!i||a===e.getMode()||2===a){var u=o.latchAndAppend(a,s);n.push(u)}if(!i&&MN[e.getMode()][a]>=0){var l=o.shiftAndAppend(a,s);n.push(l)}}}if(e.getBinaryShiftByteCount()>0||0===LN[e.getMode()][r]){var c=e.addBinaryShiftChar(t);n.push(c)}},e.updateStateListForPair=function(e,t,n){var r,i,o=[];try{for(var a=zN(e),s=a.next();!s.done;s=a.next()){var u=s.value;this.updateStateForPair(u,t,n,o)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return this.simplifyStates(o)},e.updateStateForPair=function(e,t,n,r){var i=e.endBinaryShift(t);if(r.push(i.latchAndAppend(4,n)),4!==e.getMode()&&r.push(i.shiftAndAppend(4,n)),3===n||4===n){var o=i.latchAndAppend(2,16-n).latchAndAppend(2,1);r.push(o)}if(e.getBinaryShiftByteCount()>0){var a=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(a)}},e.simplifyStates=function(e){var t,n,r,i,o=[];try{for(var a=zN(e),s=a.next();!s.done;s=a.next()){var u=s.value,l=!0,c=function(e){if(e.isBetterThanOrEqualTo(u))return l=!1,"break";u.isBetterThanOrEqualTo(e)&&(o=o.filter((function(t){return t!==e})))};try{for(var d=(r=void 0,zN(o)),h=d.next();!h.done;h=d.next()){if("break"===c(h.value))break}}catch(f){r={error:f}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}l&&o.push(u)}}catch(p){t={error:p}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},e}(),WN=jN,HN=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},VN=function(){function e(){}return e.encodeBytes=function(t){return e.encode(t,e.DEFAULT_EC_PERCENT,e.DEFAULT_AZTEC_LAYERS)},e.encode=function(t,n,r){var i,o,a,s,u,l=new WN(t).encode(),c=xE.truncDivision(l.getSize()*n,100)+11,d=l.getSize()+c;if(r!==e.DEFAULT_AZTEC_LAYERS){if(i=r<0,(o=Math.abs(r))>(i?e.MAX_NB_BITS_COMPACT:e.MAX_NB_BITS))throw new nE(zE.format("Illegal value %s for layers",r));var h=(a=e.totalBitsInLayer(o,i))-a%(s=e.WORD_SIZE[o]);if((u=e.stuffBits(l,s)).getSize()+c>h)throw new nE("Data to large for user specified layer");if(i&&u.getSize()>64*s)throw new nE("Data to large for user specified layer")}else{s=0,u=null;for(var f=0;;f++){if(f>e.MAX_NB_BITS)throw new nE("Data too large for an Aztec code");if(o=(i=f<=3)?f+1:f,!(d>(a=e.totalBitsInLayer(o,i)))){null!=u&&s===e.WORD_SIZE[o]||(s=e.WORD_SIZE[o],u=e.stuffBits(l,s));h=a-a%s;if(!(i&&u.getSize()>64*s)&&u.getSize()+c<=h)break}}}var p,m=e.generateCheckWords(u,a,s),g=u.getSize()/s,v=e.generateModeMessage(i,o,g),y=(i?11:14)+4*o,b=new Int32Array(y);if(i){p=y;for(f=0;f<b.length;f++)b[f]=f}else{p=y+1+2*xE.truncDivision(xE.truncDivision(y,2)-1,15);var w=xE.truncDivision(y,2),x=xE.truncDivision(p,2);for(f=0;f<w;f++){var _=f+xE.truncDivision(f,15);b[w-f-1]=x-_-1,b[w+f]=x+_+1}}for(var C=new VE(p),E=(f=0,0);f<o;f++){for(var S=4*(o-f)+(i?9:12),A=0;A<S;A++)for(var k=2*A,I=0;I<2;I++)m.get(E+k+I)&&C.set(b[2*f+I],b[2*f+A]),m.get(E+2*S+k+I)&&C.set(b[2*f+A],b[y-1-2*f-I]),m.get(E+4*S+k+I)&&C.set(b[y-1-2*f-I],b[y-1-2*f-A]),m.get(E+6*S+k+I)&&C.set(b[y-1-2*f-A],b[2*f+I]);E+=8*S}if(e.drawModeMessage(C,i,p,v),i)e.drawBullsEye(C,xE.truncDivision(p,2),5);else{e.drawBullsEye(C,xE.truncDivision(p,2),7);for(f=0,A=0;f<xE.truncDivision(y,2)-1;f+=15,A+=16)for(I=1&xE.truncDivision(p,2);I<p;I+=2)C.set(xE.truncDivision(p,2)-A,I),C.set(xE.truncDivision(p,2)+A,I),C.set(I,xE.truncDivision(p,2)-A),C.set(I,xE.truncDivision(p,2)+A)}var R=new wN;return R.setCompact(i),R.setSize(p),R.setLayers(o),R.setCodeWords(g),R.setMatrix(C),R},e.drawBullsEye=function(e,t,n){for(var r=0;r<n;r+=2)for(var i=t-r;i<=t+r;i++)e.set(i,t-r),e.set(i,t+r),e.set(t-r,i),e.set(t+r,i);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)},e.generateModeMessage=function(t,n,r){var i=new CE;return t?(i.appendBits(n-1,2),i.appendBits(r-1,6),i=e.generateCheckWords(i,28,4)):(i.appendBits(n-1,5),i.appendBits(r-1,11),i=e.generateCheckWords(i,40,4)),i},e.drawModeMessage=function(e,t,n,r){var i=xE.truncDivision(n,2);if(t)for(var o=0;o<7;o++){var a=i-3+o;r.get(o)&&e.set(a,i-5),r.get(o+7)&&e.set(i+5,a),r.get(20-o)&&e.set(a,i+5),r.get(27-o)&&e.set(i-5,a)}else for(o=0;o<10;o++){a=i-5+o+xE.truncDivision(o,5);r.get(o)&&e.set(a,i-7),r.get(o+10)&&e.set(i+7,a),r.get(29-o)&&e.set(a,i+7),r.get(39-o)&&e.set(i-7,a)}},e.generateCheckWords=function(t,n,r){var i,o,a=t.getSize()/r,s=new JT(e.getGF(r)),u=xE.truncDivision(n,r),l=e.bitsToWords(t,r,u);s.encode(l,u-a);var c=n%r,d=new CE;d.appendBits(0,c);try{for(var h=HN(Array.from(l)),f=h.next();!f.done;f=h.next()){var p=f.value;d.appendBits(p,r)}}catch(m){i={error:m}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}return d},e.bitsToWords=function(e,t,n){var r,i,o=new Int32Array(n);for(r=0,i=e.getSize()/t;r<i;r++){for(var a=0,s=0;s<t;s++)a|=e.get(r*t+s)?1<<t-s-1:0;o[r]=a}return o},e.getGF=function(e){switch(e){case 4:return AS.AZTEC_PARAM;case 6:return AS.AZTEC_DATA_6;case 8:return AS.AZTEC_DATA_8;case 10:return AS.AZTEC_DATA_10;case 12:return AS.AZTEC_DATA_12;default:throw new nE("Unsupported word size "+e)}},e.stuffBits=function(e,t){for(var n=new CE,r=e.getSize(),i=(1<<t)-2,o=0;o<r;o+=t){for(var a=0,s=0;s<t;s++)(o+s>=r||e.get(o+s))&&(a|=1<<t-1-s);(a&i)===i?(n.appendBits(a&i,t),o--):0===(a&i)?(n.appendBits(1|a,t),o--):n.appendBits(a,t)}return n},e.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},e.DEFAULT_EC_PERCENT=33,e.DEFAULT_AZTEC_LAYERS=0,e.MAX_NB_BITS=32,e.MAX_NB_BITS_COMPACT=4,e.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),e}(),GN=VN,UN=(function(){function e(){}e.prototype.encode=function(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)},e.prototype.encodeWithHints=function(t,n,r,i,o){var a=bN.ISO_8859_1,s=GN.DEFAULT_EC_PERCENT,u=GN.DEFAULT_AZTEC_LAYERS;return null!=o&&(o.has(qT.CHARACTER_SET)&&(a=yN.forName(o.get(qT.CHARACTER_SET).toString())),o.has(qT.ERROR_CORRECTION)&&(s=xE.parseInt(o.get(qT.ERROR_CORRECTION).toString())),o.has(qT.AZTEC_LAYERS)&&(u=xE.parseInt(o.get(qT.AZTEC_LAYERS).toString()))),e.encodeLayers(t,n,r,i,a,s,u)},e.encodeLayers=function(t,n,r,i,o,a,s){if(n!==fS.AZTEC)throw new nE("Can only encode AZTEC, but got "+n);var u=GN.encode(zE.getBytes(t,o),a,s);return e.renderResult(u,r,i)},e.renderResult=function(e,t,n){var r=e.getMatrix();if(null==r)throw new OS;for(var i=r.getWidth(),o=r.getHeight(),a=Math.max(t,i),s=Math.max(n,o),u=Math.min(a/i,s/o),l=(a-i*u)/2,c=(s-o*u)/2,d=new VE(a,s),h=0,f=c;h<o;h++,f+=u)for(var p=0,m=l;p<i;p++,m+=u)r.get(p,h)&&d.setRegion(m,f,u,u);return d}}(),{audio:!1,video:{facingMode:"environment"}}),KN=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(v){o(v)}}function s(e){try{u(r.throw(e))}catch(v){o(v)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},XN=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(v){o=[6,v],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ZN=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(v){o(v)}}function s(e){try{u(r.throw(e))}catch(v){o(v)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},qN=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(v){o=[6,v],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},YN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function JN(e){return void 0!==e.deviceId}var QN=function(t){void 0===t&&(t={});var n=t.paused,r=void 0!==n&&n,i=t.hints,o=t.timeBetweenDecodingAttempts,a=t.onResult,s=void 0===a?function(){}:a,u=t.onError,l=void 0===u?function(){}:u,c=JN(t)?t.deviceId:void 0,d=(0,e.useState)(JN(t)?void 0:t.constraints),h=d[0],f=d[1],p=(0,e.useRef)(s),m=(0,e.useRef)(l),g=(0,e.useRef)(null),v=function(t){var n=void 0===t?{}:t,r=n.timeBetweenDecodingAttempts,i=void 0===r?300:r,o=n.hints;return(0,e.useMemo)((function(){var e=new KT(o);return e.timeBetweenDecodingAttempts=i,e}),[o,i])}({hints:i,timeBetweenDecodingAttempts:o}),y=function(t){var n=t.resetStream,r=(0,e.useState)(!1),i=r[0],o=r[1],a=(0,e.useState)(null),s=a[0],u=a[1],l=(0,e.useRef)(null),c=(0,e.useRef)(n),d=(0,e.useCallback)((function(e){l.current=e,u(void 0!==e.getCapabilities().torch)}),[]),h=(0,e.useCallback)((function(){return KN(void 0,void 0,void 0,(function(){return XN(this,(function(e){switch(e.label){case 0:return l.current&&s?[4,l.current.applyConstraints({advanced:[{torch:!0}]})]:[2];case 1:return e.sent(),o(!0),[2]}}))}))}),[s]),f=(0,e.useCallback)((function(){return KN(void 0,void 0,void 0,(function(){return XN(this,(function(e){switch(e.label){case 0:return l.current&&s?(l.current=null,u(null),o(!1),[4,c.current()]):[2];case 1:return e.sent(),[2]}}))}))}),[s]);return(0,e.useEffect)((function(){c.current=n}),[n]),{init:d,isOn:i,isAvailable:s,on:h,off:f}}({resetStream:function(){return ZN(void 0,void 0,void 0,(function(){return qN(this,(function(e){switch(e.label){case 0:return C(),[4,_()];case 1:return e.sent(),[2]}}))}))}}),b=y.init,w=YN(y,["init"]),x=(0,e.useCallback)((function(e,t){e&&p.current(e),t&&m.current(t)}),[]),_=(0,e.useCallback)((function(){return ZN(void 0,void 0,void 0,(function(){var e,t;return qN(this,(function(n){switch(n.label){case 0:return g.current?r?[2]:c?[4,v.decodeFromVideoDevice(c,g.current,x)]:[3,2]:[2];case 1:return n.sent(),[3,4];case 2:return[4,v.decodeFromConstraints(null!==h&&void 0!==h?h:UN,g.current,x)];case 3:n.sent(),n.label=4;case 4:return e=g.current.srcObject,(t=e.getVideoTracks()[0])&&b(t),[2]}}))}))}),[v,c,h,r,x,b]),C=(0,e.useCallback)((function(){v.reset()}),[v]);return(0,e.useEffect)((function(){p.current=s}),[s]),(0,e.useEffect)((function(){m.current=l}),[l]),(0,e.useEffect)((function(){var e=function(e,t){return JSON.stringify(e)===JSON.stringify(t)}(h,t.constraints);e||f(t.constraints)}),[h,t]),(0,e.useEffect)((function(){return _(),function(){C()}}),[_,C]),{ref:g,torch:w}},$N=n(3970);var eO=function(t){var n=(0,e.useContext)(cv),r=(new Zm).getDialogs(n.language);return(0,hv.jsxs)(w_,{open:t.isOpen,children:[(0,hv.jsxs)(k_,{disableTypography:!0,className:"flex align-items-primary",children:[(0,hv.jsx)($N.Z,{className:"color-secondary"}),(0,hv.jsx)("h3",{children:r.wait})]}),(0,hv.jsx)(N_,{children:(0,hv.jsx)(S_,{children:r.wait_label})})]})};var tO=function(e){return(0,hv.jsxs)("div",{className:"flex content-container background-secondary padding-secondary border-radius-primary box-shadow",children:[(0,hv.jsx)("h2",{className:"text-medium",children:e.title}),(0,hv.jsx)("p",{className:"margin-top-secondary margin-bottom-primary",children:e.label}),(0,hv.jsx)("ol",{children:e.steps.map((function(e){return(0,hv.jsx)("li",{className:"margin-bottom-primary",children:e},e)}))}),e.children]})};var nO=function(){var t=(0,e.useContext)(cv),n=new Zm,r=n.getQRScanner(t.language),i=n.getTourIds(t.language),o=n.getDialogs(t.language),a=n.getHeader(t.language),s=(0,e.useState)(!1),u=(0,qm.Z)(s,2),l=u[0],c=u[1],d=(0,e.useState)(!1),h=(0,qm.Z)(d,2),f=h[0],p=h[1],m=(0,e.useState)(!1),g=(0,qm.Z)(m,2),v=g[0],y=g[1],b=Vg(),w=QN({onResult:function(e){x(e.getText())}}).ref,x=function(e){var r=e.split(" "),i=r[0].toLowerCase(),o=parseInt(r[1]);_(i)&&o>=1&&o<=n.getRooms(t.language,i).length?C(i,o):(p(!1),c(!0))},_=function(e){for(var t=0;t<i.length;t++)if(i[t]===e)return!0;return!1},C=function(e,n){t.setTour(e),t.setRoom(n),b("/room")};return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsxs)("div",{className:v?"display-none":"",children:[(0,hv.jsx)(sC,{header:a.scan}),(0,hv.jsx)(tO,{title:r.title,label:r.label,steps:[r.step_1,r.step_2,r.step_3],children:(0,hv.jsx)("button",{onClick:function(){return y(!0)},className:"margin-primary display-block text-medium button align-self-primary background-primary font-weight-primary color-primary",children:r.button})})]}),(0,hv.jsxs)("div",{className:v?"":"display-none",children:[(0,hv.jsx)(eO,{isOpen:f,isClosed:function(){p(!1)}}),(0,hv.jsx)(nC,{isOpen:l,closeDialog:function(){c(!1)},title:o.error_label,content:o.invalid_scan_label}),(0,hv.jsx)("video",{id:"video",ref:w,className:"full-screen"}),(0,hv.jsx)("div",{className:"video-label margin-top text-medium font-weight-primary center-text",children:(0,hv.jsx)("span",{children:r.qr_scanner})}),(0,hv.jsxs)("button",{onClick:function(){return y(!1)},className:"video-button flex-secondary align-items-primary margin-bottom-primary transparent-background border-none",children:[(0,hv.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",children:(0,hv.jsx)(wC.Z,{className:"round-item-content color-primary margin-top-third cursor-primary"})}),(0,hv.jsx)("span",{className:"text-medium font-weight-primary",children:r.button_back})]})]})]})};var rO=function(){var t=(0,e.useContext)(cv),r=new Zm,i=r.getFaceRecognition(t.language),o=r.getFaceRecognitionPeople(t.language),a=r.getDialogs(t.language),s=(0,e.useState)(!1),u=(0,qm.Z)(s,2),l=u[0],c=u[1],d=(0,e.useState)(!1),h=(0,qm.Z)(d,2),f=h[0],p=h[1],m=(0,e.useState)(!1),g=(0,qm.Z)(m,2),v=g[0],y=g[1],b=(0,e.useState)(!1),w=(0,qm.Z)(b,2),x=w[0],_=w[1],C=(0,e.useState)(!1),E=(0,qm.Z)(C,2),S=E[0],A=E[1],k=function(){var e=aC(iC().mark((function e(){var t,n;return iC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(!0);case 2:null!=(t=document.getElementById("native_camera").files[0])?(n=window.URL.createObjectURL(t),document.getElementById("person_picture").src=n,R(),document.getElementById("native-camera").files[0]=null):I();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){p(!1)},R=function(){var e=aC(iC().mark((function e(){var t,r,i,a,s;return iC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.isModelsLoaded){e.next=26;break}return t=document.getElementById("person_picture"),e.next=5,(u=t,l=void 0,void 0===l&&(l=new Wp),new Wm(u,l)).withFaceLandmarks().withFaceDescriptors();case 5:if(0!==(r=e.sent).length){e.next=10;break}return I(),c(!0),e.abrupt("return");case 10:return e.next=12,Promise.all(o.map(function(){var e=aC(iC().mark((function e(t){var r,i,o,a;return iC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(9977)("./img".concat(t.img)),(i=document.createElement("img")).src=r,e.next=5,Vm(i).withFaceLandmarks().withFaceDescriptor();case 5:return o=e.sent,a=[o.descriptor],e.abrupt("return",new uf(t.name,a));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).catch((function(e){I(),c(!0)}));case 12:if(i=e.sent,.6,a=new Gm(i,.6),s=r.map((function(e){return a.findBestMatch(e.descriptor)})),"unknown"!==s[0].label){e.next=20;break}return I(),c(!0),e.abrupt("return");case 20:A(s[0].label),_(T(s[0].label)),I(),y(!0),e.next=28;break;case 26:I(),window.alert("Nothing loaded");case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(0),I();case 33:case"end":return e.stop()}var u,l}),e,null,[[0,30]])})));return function(){return e.apply(this,arguments)}}(),T=function(e){for(var t=0;t<o.length;t++)if(o[t].name===e)return o[t].img};return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(sC,{header:i.face_recognition}),(0,hv.jsx)(eO,{isOpen:f,isClosed:I}),(0,hv.jsx)(nC,{isOpen:l,closeDialog:function(){c(!1)},title:a.no_face_detected,content:a.try_again_label}),v?(0,hv.jsxs)("div",{className:"flex content-container background-secondary center-text padding-secondary box-shadow border-radius-primary",children:[(0,hv.jsxs)("div",{className:"font-size-third medieval-first-letter",children:[(0,hv.jsx)("div",{className:"flex-secondary align-items-primary",children:(0,hv.jsx)("h2",{className:"margin-right-primary margin-left-primary",children:S})}),(0,hv.jsx)("div",{className:"margin-top-secondary",children:(0,hv.jsx)("img",{src:n(9977)("./img".concat(x)),alt:"castle",className:"page-image"})})]}),(0,hv.jsxs)("div",{className:"flex-secondary padding-bottom-primary padding-top-primary align-items-primary",children:[(0,hv.jsx)("div",{className:"flex round-item background-fourth margin-right-secondary",onClick:function(){return y(!1)},children:(0,hv.jsx)(wC.Z,{className:"round-item-content color-primary margin-top-third cursor-primary"})}),(0,hv.jsx)("p",{className:"text-medium font-weight-primary",children:i.button_back})]})]}):(0,hv.jsxs)(tO,{title:i.title,label:i.label,steps:[i.step_1,i.step_2,i.step_3,i.step_4],children:[(0,hv.jsxs)("label",{id:"label",className:"cursor-primary text-medium button align-self-primary background-primary font-weight-primary color-primary",children:[i.button,(0,hv.jsx)("input",{onChange:function(){return k()},id:"native_camera",type:"file",accept:"image/*",capture:"environment",hidden:!0})]}),(0,hv.jsx)("img",{id:"person_picture",src:".",className:"display-none",alt:"person_picture"})]})]})};var iO=function(t){var n=(0,e.useContext)(cv),r=new Zm,i=r.getHelp(n.language),o=r.getHeader(n.language);return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)(sC,{header:o.help}),(0,hv.jsxs)("div",{className:"flex content-container background-secondary padding-secondary border-radius-primary box-shadow",children:[(0,hv.jsx)("h2",{className:"text-medium margin-bottom-primary",children:i.help}),(0,hv.jsx)("h3",{children:i.help_tour}),(0,hv.jsx)("p",{className:"margin-bottom-primary",children:i.help_tour_content}),(0,hv.jsx)("h3",{children:i.help_room}),(0,hv.jsx)("p",{className:"margin-bottom-primary",children:i.help_room_content}),(0,hv.jsx)("h3",{children:i.help_more_functions}),(0,hv.jsx)("p",{children:i.help_more_functions_content})]})]})},oO=function(e){l(n,e);var t=m(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).setLanguage=function(e){r.setState({language:e}),localStorage.setItem("language",JSON.stringify(e))},r.setHouse=function(e){r.setState({house:e}),localStorage.setItem("house",JSON.stringify(e))},r.setTour=function(e){r.setState({tour:e}),localStorage.setItem("tour",JSON.stringify(e)),r.setState({room:0}),localStorage.setItem("room",JSON.stringify(0))},r.setRoom=function(e){r.setState({room:e}),localStorage.setItem("room",JSON.stringify(e))},r.setOwner=function(e){r.setState({owner:e}),localStorage.setItem("owner",JSON.stringify(e))},r.setGalleryTour=function(e){r.setState({gallery_tour:e}),localStorage.setItem("gallery_tour",JSON.stringify(e))},r.setImageRecognitionName=function(e){r.setState({image_name:e}),localStorage.setItem("image_name",JSON.stringify(e))},r.setImageRecognitionImg=function(e){r.setState({image_img:e}),localStorage.setItem("image_img",JSON.stringify(e))},r.setFontSize=function(e){var t=document.getElementById("body");"d"===e?(t.classList.value="",t.classList.add("font-size-default"),localStorage.setItem("fontSize",JSON.stringify(e))):"m"===e?(t.classList.value="",t.classList.add("font-size-medium"),localStorage.setItem("fontSize",JSON.stringify(e))):"l"===e?(t.classList.value="",t.classList.add("font-size-large"),localStorage.setItem("fontSize",JSON.stringify(e))):console.log("Wrong value of font size.")},r.state={language:null!==localStorage.getItem("language")?JSON.parse(localStorage.getItem("language")):"en",setLanguage:r.setLanguage,tour:null!==localStorage.getItem("tour")?JSON.parse(localStorage.getItem("tour")):null,setTour:r.setTour,room:null!==localStorage.getItem("room")?JSON.parse(localStorage.getItem("room")):0,setRoom:r.setRoom,house:null!==localStorage.getItem("house")?JSON.parse(localStorage.getItem("house")):null,setHouse:r.setHouse,owner:null!==localStorage.getItem("owner")?JSON.parse(localStorage.getItem("owner")):0,setOwner:r.setOwner,fontSize:null!==localStorage.getItem("fontSize")?JSON.parse(localStorage.getItem("fontSize")):"d",setFontSize:r.setFontSize,gallery_tour:null!==localStorage.getItem("gallery_tour")?JSON.parse(localStorage.getItem("gallery_tour")):"",setGalleryTour:r.setGalleryTour,image_name:null!==localStorage.getItem("image_name")?JSON.parse(localStorage.getItem("image_name")):"",setImageRecognitionName:r.setImageRecognitionName,image_img:null!==localStorage.getItem("image_img")?JSON.parse(localStorage.getItem("image_img")):"",setImageRecognitionImg:r.setImageRecognitionImg},r}return s(n,[{key:"componentDidMount",value:function(){var e=null!==localStorage.getItem("fontSize")?JSON.parse(localStorage.getItem("fontSize")):"d";this.setFontSize(e);var t="/models";Promise.all([_m.ssdMobilenetv1.loadFromUri(t),_m.faceLandmark68Net.loadFromUri(t),_m.faceRecognitionNet.loadFromUri(t)]).then(window.isModelsLoaded=!0)}},{key:"render",value:function(){var e=(new Zm).getRotateLabel(this.state.language);return(0,hv.jsxs)(hv.Fragment,{children:[(0,hv.jsx)("span",{id:"rotate_message",className:"font-weight-primary text-medium",children:e.rotate}),(0,hv.jsx)("div",{id:"content",children:(0,hv.jsx)(sv,{onUpdate:function(){return console.log("updated")},children:(0,hv.jsxs)(cv.Provider,{value:this.state,children:[(0,hv.jsx)(GC,{}),(0,hv.jsxs)(ev,{children:[(0,hv.jsx)(Qg,{path:"/",element:(0,hv.jsx)(rC,{})}),(0,hv.jsx)(Qg,{path:"/tours",element:(0,hv.jsx)(pC,{})}),(0,hv.jsx)(Qg,{path:"/contact",element:(0,hv.jsx)(vC,{})}),(0,hv.jsx)(Qg,{path:"/rooms",element:(0,hv.jsx)(mC,{})}),(0,hv.jsx)(Qg,{path:"/room",element:(0,hv.jsx)(EC,{})}),(0,hv.jsx)(Qg,{path:"/history",element:(0,hv.jsx)(SC,{})}),(0,hv.jsx)(Qg,{path:"/history_overview",element:(0,hv.jsx)(AC,{})}),(0,hv.jsx)(Qg,{path:"/houses",element:(0,hv.jsx)(kC,{})}),(0,hv.jsx)(Qg,{path:"/owners",element:(0,hv.jsx)(IC,{})}),(0,hv.jsx)(Qg,{path:"/owner",element:(0,hv.jsx)(RC,{})}),(0,hv.jsx)(Qg,{path:"/rooms_overview",element:(0,hv.jsx)(yC,{})}),(0,hv.jsx)(Qg,{path:"/settings",element:(0,hv.jsx)(TC,{})}),(0,hv.jsx)(Qg,{path:"/other",element:(0,hv.jsx)(LC,{})}),(0,hv.jsx)(Qg,{path:"/about_app",element:(0,hv.jsx)(jC,{})}),(0,hv.jsx)(Qg,{path:"/where_to_next",element:(0,hv.jsx)(WC,{})}),(0,hv.jsx)(Qg,{path:"/gallery",element:(0,hv.jsx)(HC,{})}),(0,hv.jsx)(Qg,{path:"/gallery_rooms",element:(0,hv.jsx)(VC,{})}),(0,hv.jsx)(Qg,{path:"/scan_room",element:(0,hv.jsx)(nO,{})}),(0,hv.jsx)(Qg,{path:"/image_recognition",element:(0,hv.jsx)(rO,{})}),(0,hv.jsx)(Qg,{path:"/help",element:(0,hv.jsx)(iO,{})})]})]})})})]})}}]),n}(e.Component),aO=oO,sO=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function uO(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var lO=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),r(e),i(e),o(e),a(e)}))},cO=r.createRoot(document.getElementById("root"));window.deferredPrompt=null,window.installBannerDisplayed=!window.matchMedia("(display-mode: standalone)").matches,window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),window.deferredPrompt=e})),cO.render((0,hv.jsx)(e.StrictMode,{children:(0,hv.jsx)(aO,{})})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");sO?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):uO(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):uO(t,e)}))}}(),lO()}()}();
//# sourceMappingURL=main.927dbf7c.js.map